D, [2014-12-29T15:54:40.838461 #14508] DEBUG -- : 
D, [2014-12-29T15:54:40.866463 #14508] DEBUG -- : 
I, [2014-12-29T15:54:40.921466 #14508]  INFO -- : Started GET "/" for 127.0.0.1 at 2014-12-29 15:54:40 +0000
D, [2014-12-29T15:54:41.856519 #14508] DEBUG -- :   [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
I, [2014-12-29T15:54:42.095533 #14508]  INFO -- : Processing by StoreController#index as HTML
D, [2014-12-29T15:54:42.206539 #14508] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2014-12-29T15:54:42.387550 #14508] DEBUG -- :   [1m[36mSQL (23.0ms)[0m  [1mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Mon, 29 Dec 2014 15:54:42 UTC +00:00], ["updated_at", Mon, 29 Dec 2014 15:54:42 UTC +00:00]]
D, [2014-12-29T15:54:42.566560 #14508] DEBUG -- :   [1m[35m (135.0ms)[0m  commit transaction
D, [2014-12-29T15:54:42.753571 #14508] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2014-12-29T15:54:42.908579 #14508]  INFO -- : Cache digest for store/index.html: a93d4e2e981ab3dfce98a095c3b6c059
I, [2014-12-29T15:54:42.998585 #14508]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (8.0ms)
I, [2014-12-29T15:54:43.060588 #14508]  INFO -- :   Rendered store/index.html.erb within layouts/application (340.0ms)
D, [2014-12-29T15:54:43.711625 #14508] DEBUG -- :   [1m[35mLineItem Exists (1.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 30]]
D, [2014-12-29T15:54:43.823632 #14508] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 30]]
I, [2014-12-29T15:54:43.865634 #14508]  INFO -- :   Rendered collection (0.0ms)
I, [2014-12-29T15:54:43.933638 #14508]  INFO -- :   Rendered carts/_cart.html.erb (159.0ms)
I, [2014-12-29T15:54:43.999642 #14508]  INFO -- : Completed 200 OK in 1842ms (Views: 1338.1ms | ActiveRecord: 170.0ms)
D, [2014-12-29T15:54:44.361663 #14508] DEBUG -- : 
D, [2014-12-29T15:54:44.385664 #14508] DEBUG -- : 
I, [2014-12-29T15:54:44.453668 #14508]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-29 15:54:44 +0000
D, [2014-12-29T15:54:44.505671 #14508] DEBUG -- : 
D, [2014-12-29T15:54:44.528672 #14508] DEBUG -- : 
I, [2014-12-29T15:54:44.592676 #14508]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-29 15:54:44 +0000
D, [2014-12-29T15:54:44.643679 #14508] DEBUG -- : 
D, [2014-12-29T15:54:44.668680 #14508] DEBUG -- : 
I, [2014-12-29T15:54:44.731684 #14508]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-29 15:54:44 +0000
D, [2014-12-29T15:54:44.783687 #14508] DEBUG -- : 
D, [2014-12-29T15:54:44.807688 #14508] DEBUG -- : 
I, [2014-12-29T15:54:44.867691 #14508]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-29 15:54:44 +0000
D, [2014-12-29T15:54:44.922695 #14508] DEBUG -- : 
D, [2014-12-29T15:54:44.944696 #14508] DEBUG -- : 
I, [2014-12-29T15:54:45.010700 #14508]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-29 15:54:44 +0000
D, [2014-12-29T15:54:45.062703 #14508] DEBUG -- : 
D, [2014-12-29T15:54:45.088704 #14508] DEBUG -- : 
I, [2014-12-29T15:54:45.152708 #14508]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-29 15:54:45 +0000
D, [2014-12-29T15:54:45.206711 #14508] DEBUG -- : 
D, [2014-12-29T15:54:45.231712 #14508] DEBUG -- : 
I, [2014-12-29T15:54:45.299716 #14508]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-29 15:54:45 +0000
D, [2014-12-29T15:54:45.350719 #14508] DEBUG -- : 
D, [2014-12-29T15:54:45.374720 #14508] DEBUG -- : 
I, [2014-12-29T15:54:45.440724 #14508]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-29 15:54:45 +0000
D, [2014-12-29T15:54:45.491727 #14508] DEBUG -- : 
D, [2014-12-29T15:54:45.516729 #14508] DEBUG -- : 
I, [2014-12-29T15:54:45.578732 #14508]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-29 15:54:45 +0000
D, [2014-12-29T15:54:45.628735 #14508] DEBUG -- : 
D, [2014-12-29T15:54:45.651736 #14508] DEBUG -- : 
I, [2014-12-29T15:54:45.711740 #14508]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-29 15:54:45 +0000
D, [2014-12-29T15:54:45.764743 #14508] DEBUG -- : 
D, [2014-12-29T15:54:45.791744 #14508] DEBUG -- : 
I, [2014-12-29T15:54:45.861748 #14508]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-29 15:54:45 +0000
D, [2014-12-29T15:54:45.950753 #14508] DEBUG -- : 
D, [2014-12-29T15:54:45.974755 #14508] DEBUG -- : 
I, [2014-12-29T15:54:46.031758 #14508]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-29 15:54:45 +0000
D, [2014-12-29T15:54:46.089761 #14508] DEBUG -- : 
D, [2014-12-29T15:54:46.111763 #14508] DEBUG -- : 
I, [2014-12-29T15:54:46.178766 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-29 15:54:46 +0000
D, [2014-12-29T15:54:46.234770 #14508] DEBUG -- : 
D, [2014-12-29T15:54:46.254771 #14508] DEBUG -- : 
I, [2014-12-29T15:54:46.321775 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-29 15:54:46 +0000
D, [2014-12-29T15:54:46.384778 #14508] DEBUG -- : 
D, [2014-12-29T15:54:46.409780 #14508] DEBUG -- : 
I, [2014-12-29T15:54:46.473783 #14508]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-29 15:54:46 +0000
D, [2014-12-29T15:54:46.528786 #14508] DEBUG -- : 
D, [2014-12-29T15:54:46.551788 #14508] DEBUG -- : 
I, [2014-12-29T15:54:46.613791 #14508]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-29 15:54:46 +0000
D, [2014-12-29T15:54:46.668794 #14508] DEBUG -- : 
D, [2014-12-29T15:54:46.691796 #14508] DEBUG -- : 
I, [2014-12-29T15:54:46.752799 #14508]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-29 15:54:46 +0000
D, [2014-12-29T15:54:46.802802 #14508] DEBUG -- : 
D, [2014-12-29T15:54:46.826804 #14508] DEBUG -- : 
I, [2014-12-29T15:54:46.887807 #14508]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-29 15:54:46 +0000
D, [2014-12-29T15:54:46.939810 #14508] DEBUG -- : 
D, [2014-12-29T15:54:46.966812 #14508] DEBUG -- : 
I, [2014-12-29T15:54:47.029815 #14508]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-29 15:54:46 +0000
D, [2014-12-29T15:54:47.078818 #14508] DEBUG -- : 
D, [2014-12-29T15:54:47.101819 #14508] DEBUG -- : 
I, [2014-12-29T15:54:47.161823 #14508]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-29 15:54:47 +0000
D, [2014-12-29T15:54:47.210825 #14508] DEBUG -- : 
D, [2014-12-29T15:54:47.234827 #14508] DEBUG -- : 
I, [2014-12-29T15:54:47.296830 #14508]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-29 15:54:47 +0000
D, [2014-12-29T15:54:47.416837 #14508] DEBUG -- : 
D, [2014-12-29T15:54:47.438839 #14508] DEBUG -- : 
I, [2014-12-29T15:54:47.498842 #14508]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-29 15:54:47 +0000
D, [2014-12-29T15:54:47.552845 #14508] DEBUG -- : 
D, [2014-12-29T15:54:47.579847 #14508] DEBUG -- : 
I, [2014-12-29T15:54:47.647850 #14508]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-29 15:54:47 +0000
D, [2014-12-29T15:54:47.702854 #14508] DEBUG -- : 
D, [2014-12-29T15:54:47.725855 #14508] DEBUG -- : 
I, [2014-12-29T15:54:47.788859 #14508]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-29 15:54:47 +0000
D, [2014-12-29T15:54:47.843862 #14508] DEBUG -- : 
D, [2014-12-29T15:54:47.868863 #14508] DEBUG -- : 
I, [2014-12-29T15:54:47.934867 #14508]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-29 15:54:47 +0000
D, [2014-12-29T15:54:47.985870 #14508] DEBUG -- : 
D, [2014-12-29T15:54:48.009871 #14508] DEBUG -- : 
I, [2014-12-29T15:54:48.072875 #14508]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-29 15:54:48 +0000
D, [2014-12-29T15:54:48.177881 #14508] DEBUG -- : 
D, [2014-12-29T15:54:48.195882 #14508] DEBUG -- : 
I, [2014-12-29T15:54:48.249885 #14508]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-29 15:54:48 +0000
D, [2014-12-29T15:54:48.305888 #14508] DEBUG -- : 
D, [2014-12-29T15:54:48.331890 #14508] DEBUG -- : 
I, [2014-12-29T15:54:48.392893 #14508]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2014-12-29 15:54:48 +0000
D, [2014-12-29T15:54:48.506900 #14508] DEBUG -- : 
D, [2014-12-29T15:54:48.527901 #14508] DEBUG -- : 
I, [2014-12-29T15:54:48.586904 #14508]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2014-12-29 15:54:48 +0000
D, [2014-12-29T15:54:48.766914 #14508] DEBUG -- : 
D, [2014-12-29T15:54:48.787916 #14508] DEBUG -- : 
I, [2014-12-29T15:54:48.841919 #14508]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2014-12-29 15:54:48 +0000
D, [2014-12-29T15:54:51.850375 #14508] DEBUG -- : 
D, [2014-12-29T15:54:51.881575 #14508] DEBUG -- : 
I, [2014-12-29T15:54:51.943975 #14508]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2014-12-29 15:54:51 +0000
I, [2014-12-29T15:54:52.021975 #14508]  INFO -- : Processing by LineItemsController#create as JS
I, [2014-12-29T15:54:52.099975 #14508]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2014-12-29T15:54:52.177976 #14508] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 30]]
D, [2014-12-29T15:54:52.272576 #14508] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2014-12-29T15:54:52.397376 #14508] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 30]]
D, [2014-12-29T15:54:52.576977 #14508] DEBUG -- :   [1m[36mProduct Load (15.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2014-12-29T15:54:52.608177 #14508] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2014-12-29T15:54:52.842177 #14508] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 30], ["created_at", Mon, 29 Dec 2014 15:54:52 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:83ec6e8,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Mon, 29 Dec 2014 15:54:52 UTC +00:00]]
D, [2014-12-29T15:54:53.013777 #14508] DEBUG -- :   [1m[35m (124.8ms)[0m  commit transaction
D, [2014-12-29T15:54:53.122978 #14508] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 30]]
I, [2014-12-29T15:54:53.185378 #14508]  INFO -- :   Rendered line_items/_line_item.html.erb (0.0ms)
I, [2014-12-29T15:54:53.232178 #14508]  INFO -- :   Rendered carts/_cart.html.erb (156.0ms)
I, [2014-12-29T15:54:53.278978 #14508]  INFO -- :   Rendered line_items/create.js.erb (202.8ms)
I, [2014-12-29T15:54:53.341378 #14508]  INFO -- : Completed 200 OK in 1179ms (Views: 265.2ms | ActiveRecord: 140.4ms)
D, [2014-12-29T15:54:59.515653 #14508] DEBUG -- : 
D, [2014-12-29T15:54:59.539654 #14508] DEBUG -- : 
I, [2014-12-29T15:54:59.597657 #14508]  INFO -- : Started GET "/orders/new" for 127.0.0.1 at 2014-12-29 15:54:59 +0000
I, [2014-12-29T15:54:59.680662 #14508]  INFO -- : Processing by OrdersController#new as HTML
D, [2014-12-29T15:54:59.756666 #14508] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 30]]
D, [2014-12-29T15:54:59.843671 #14508] DEBUG -- :   [1m[36mLineItem Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 30]]
I, [2014-12-29T15:55:00.088685 #14508]  INFO -- :   Rendered orders/_form.html.erb (158.0ms)
I, [2014-12-29T15:55:00.144689 #14508]  INFO -- :   Rendered orders/new.html.erb within layouts/application (210.0ms)
D, [2014-12-29T15:55:00.253695 #14508] DEBUG -- :   [1m[35mCACHE (0.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 30]]
D, [2014-12-29T15:55:00.339700 #14508] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 30]]
D, [2014-12-29T15:55:00.432705 #14508] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2014-12-29T15:55:00.482708 #14508]  INFO -- :   Rendered line_items/_line_item.html.erb (90.0ms)
I, [2014-12-29T15:55:00.530711 #14508]  INFO -- :   Rendered carts/_cart.html.erb (228.0ms)
I, [2014-12-29T15:55:00.588714 #14508]  INFO -- : Completed 200 OK in 854ms (Views: 667.0ms | ActiveRecord: 3.0ms)
D, [2014-12-29T15:55:00.891731 #14508] DEBUG -- : 
D, [2014-12-29T15:55:00.922733 #14508] DEBUG -- : 
I, [2014-12-29T15:55:00.979736 #14508]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-29 15:55:00 +0000
D, [2014-12-29T15:55:01.025739 #14508] DEBUG -- : 
D, [2014-12-29T15:55:01.049740 #14508] DEBUG -- : 
I, [2014-12-29T15:55:01.115744 #14508]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-29 15:55:01 +0000
D, [2014-12-29T15:55:01.160747 #14508] DEBUG -- : 
D, [2014-12-29T15:55:01.186748 #14508] DEBUG -- : 
I, [2014-12-29T15:55:01.250752 #14508]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-29 15:55:01 +0000
D, [2014-12-29T15:55:01.293754 #14508] DEBUG -- : 
D, [2014-12-29T15:55:01.317756 #14508] DEBUG -- : 
I, [2014-12-29T15:55:01.377759 #14508]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-29 15:55:01 +0000
D, [2014-12-29T15:55:01.423762 #14508] DEBUG -- : 
D, [2014-12-29T15:55:01.450763 #14508] DEBUG -- : 
I, [2014-12-29T15:55:01.519767 #14508]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-29 15:55:01 +0000
D, [2014-12-29T15:55:01.561770 #14508] DEBUG -- : 
D, [2014-12-29T15:55:01.583771 #14508] DEBUG -- : 
I, [2014-12-29T15:55:01.642774 #14508]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-29 15:55:01 +0000
D, [2014-12-29T15:55:01.697777 #14508] DEBUG -- : 
D, [2014-12-29T15:55:01.717779 #14508] DEBUG -- : 
I, [2014-12-29T15:55:01.771782 #14508]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-29 15:55:01 +0000
D, [2014-12-29T15:55:01.812784 #14508] DEBUG -- : 
D, [2014-12-29T15:55:01.831785 #14508] DEBUG -- : 
I, [2014-12-29T15:55:01.884788 #14508]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-29 15:55:01 +0000
D, [2014-12-29T15:55:01.928791 #14508] DEBUG -- : 
D, [2014-12-29T15:55:01.949792 #14508] DEBUG -- : 
I, [2014-12-29T15:55:02.008795 #14508]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-29 15:55:01 +0000
D, [2014-12-29T15:55:02.049798 #14508] DEBUG -- : 
D, [2014-12-29T15:55:02.073799 #14508] DEBUG -- : 
I, [2014-12-29T15:55:02.132802 #14508]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-29 15:55:02 +0000
D, [2014-12-29T15:55:02.176805 #14508] DEBUG -- : 
D, [2014-12-29T15:55:02.202806 #14508] DEBUG -- : 
I, [2014-12-29T15:55:02.272810 #14508]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-29 15:55:02 +0000
D, [2014-12-29T15:55:02.319813 #14508] DEBUG -- : 
D, [2014-12-29T15:55:02.344814 #14508] DEBUG -- : 
I, [2014-12-29T15:55:02.409818 #14508]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-29 15:55:02 +0000
D, [2014-12-29T15:55:02.451821 #14508] DEBUG -- : 
D, [2014-12-29T15:55:02.472822 #14508] DEBUG -- : 
I, [2014-12-29T15:55:02.535825 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-29 15:55:02 +0000
D, [2014-12-29T15:55:02.580828 #14508] DEBUG -- : 
D, [2014-12-29T15:55:02.605829 #14508] DEBUG -- : 
I, [2014-12-29T15:55:02.675833 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-29 15:55:02 +0000
D, [2014-12-29T15:55:02.719836 #14508] DEBUG -- : 
D, [2014-12-29T15:55:02.744837 #14508] DEBUG -- : 
I, [2014-12-29T15:55:02.808841 #14508]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-29 15:55:02 +0000
D, [2014-12-29T15:55:02.850843 #14508] DEBUG -- : 
D, [2014-12-29T15:55:02.873845 #14508] DEBUG -- : 
I, [2014-12-29T15:55:02.932848 #14508]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-29 15:55:02 +0000
D, [2014-12-29T15:55:02.974850 #14508] DEBUG -- : 
D, [2014-12-29T15:55:03.013853 #14508] DEBUG -- : 
I, [2014-12-29T15:55:03.081857 #14508]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-29 15:55:03 +0000
D, [2014-12-29T15:55:03.128859 #14508] DEBUG -- : 
D, [2014-12-29T15:55:03.154861 #14508] DEBUG -- : 
I, [2014-12-29T15:55:03.220865 #14508]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-29 15:55:03 +0000
D, [2014-12-29T15:55:03.264867 #14508] DEBUG -- : 
D, [2014-12-29T15:55:03.288868 #14508] DEBUG -- : 
I, [2014-12-29T15:55:03.352872 #14508]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-29 15:55:03 +0000
D, [2014-12-29T15:55:03.397875 #14508] DEBUG -- : 
D, [2014-12-29T15:55:03.422876 #14508] DEBUG -- : 
I, [2014-12-29T15:55:03.485880 #14508]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-29 15:55:03 +0000
D, [2014-12-29T15:55:03.528882 #14508] DEBUG -- : 
D, [2014-12-29T15:55:03.552884 #14508] DEBUG -- : 
I, [2014-12-29T15:55:03.616887 #14508]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-29 15:55:03 +0000
D, [2014-12-29T15:55:03.658890 #14508] DEBUG -- : 
D, [2014-12-29T15:55:03.681891 #14508] DEBUG -- : 
I, [2014-12-29T15:55:03.739894 #14508]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-29 15:55:03 +0000
D, [2014-12-29T15:55:03.786897 #14508] DEBUG -- : 
D, [2014-12-29T15:55:03.813898 #14508] DEBUG -- : 
I, [2014-12-29T15:55:03.885903 #14508]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-29 15:55:03 +0000
D, [2014-12-29T15:55:03.932905 #14508] DEBUG -- : 
D, [2014-12-29T15:55:03.959907 #14508] DEBUG -- : 
I, [2014-12-29T15:55:04.026911 #14508]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-29 15:55:03 +0000
D, [2014-12-29T15:55:04.068913 #14508] DEBUG -- : 
D, [2014-12-29T15:55:04.091914 #14508] DEBUG -- : 
I, [2014-12-29T15:55:04.153918 #14508]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-29 15:55:04 +0000
D, [2014-12-29T15:55:04.199921 #14508] DEBUG -- : 
D, [2014-12-29T15:55:04.224922 #14508] DEBUG -- : 
I, [2014-12-29T15:55:04.289926 #14508]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-29 15:55:04 +0000
D, [2014-12-29T15:55:04.332928 #14508] DEBUG -- : 
D, [2014-12-29T15:55:04.355929 #14508] DEBUG -- : 
I, [2014-12-29T15:55:04.406932 #14508]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-29 15:55:04 +0000
D, [2014-12-29T15:55:23.509086 #14508] DEBUG -- : 
D, [2014-12-29T15:55:23.530088 #14508] DEBUG -- : 
I, [2014-12-29T15:55:23.581090 #14508]  INFO -- : Started POST "/orders" for 127.0.0.1 at 2014-12-29 15:55:23 +0000
I, [2014-12-29T15:55:23.642094 #14508]  INFO -- : Processing by OrdersController#create as HTML
I, [2014-12-29T15:55:23.756100 #14508]  INFO -- :   Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order"=>{"name"=>"s", "address"=>"s", "shipping_address1"=>"s", "email"=>"simon.king65@gmail.com", "pay_type"=>"Paypal"}, "commit"=>"Place Order"}
D, [2014-12-29T15:55:23.819104 #14508] DEBUG -- :   [1m[36mCart Load (1.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 30]]
I, [2014-12-29T15:55:23.843105 #14508]  INFO -- : log info
D, [2014-12-29T15:55:23.881108 #14508] DEBUG -- : Unpermitted parameters: shipping_address1
D, [2014-12-29T15:55:23.950112 #14508] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 30]]
I, [2014-12-29T15:55:23.993114 #14508]  INFO -- : just about to payment_method and save
I, [2014-12-29T15:55:24.097120 #14508]  INFO -- : #<Order id: nil, name: "s", address: "s", email: "simon.king65@gmail.com", pay_type: "Paypal", created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2014-12-29T15:55:24.133122 #14508] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2014-12-29T15:55:24.288131 #14508] DEBUG -- :   [1m[35mSQL (5.0ms)[0m  INSERT INTO "orders" ("address", "created_at", "email", "name", "pay_type", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "s"], ["created_at", Mon, 29 Dec 2014 15:55:24 UTC +00:00], ["email", "simon.king65@gmail.com"], ["name", "s"], ["pay_type", "Paypal"], ["updated_at", Mon, 29 Dec 2014 15:55:24 UTC +00:00]]
D, [2014-12-29T15:55:24.396137 #14508] DEBUG -- :   [1m[36mSQL (2.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 35[0m  [["cart_id", nil], ["order_id", 34], ["updated_at", Mon, 29 Dec 2014 15:55:24 UTC +00:00]]
I, [2014-12-29T15:55:24.425139 #14508]  INFO -- : about to @payment.create
D, [2014-12-29T15:55:24.507143 #14508] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2014-12-29T15:55:24.541145 #14508]  INFO -- : in order=
I, [2014-12-29T15:55:24.567147 #14508]  INFO -- : in payment.create
I, [2014-12-29T15:55:24.748157 #14508]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/34/confirm", "cancel_url"=>"http://localhost:3000/orders/34/cancel"}}
I, [2014-12-29T15:55:25.309189 #14508]  INFO -- : #<ActiveModel::Errors:0x00000009da5c88 @base=#<Payment:0x00000009e194f8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009e192a0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009db4a80 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009db4968 @error=nil, @total="19.99", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009db44b8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009db4198 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009daeea0 @error=nil, @return_url="http://localhost:3000/orders/34/confirm", @cancel_url="http://localhost:3000/orders/34/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009da5c88 ...>>, @messages={}>
I, [2014-12-29T15:55:25.335191 #14508]  INFO -- : got past invalid
I, [2014-12-29T15:55:25.459198 #14508]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/oauth2/token
I, [2014-12-29T15:55:26.682268 #14508]  INFO -- : Response[200]: OK, Duration: 1.189s
I, [2014-12-29T15:55:26.726270 #14508]  INFO -- : PayPal-Request-Id: 5cd3adcd-dcda-4135-999d-794dd1c2b48b
I, [2014-12-29T15:55:26.772273 #14508]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2014-12-29T15:55:27.896337 #14508]  INFO -- : Response[201]: Created, Duration: 1.080s
I, [2014-12-29T15:55:27.927339 #14508]  INFO -- : back from super
I, [2014-12-29T15:55:28.432368 #14508]  INFO -- : {"id"=>"PAY-0CL07334EW936040CKSQXS4A", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99", "details"=>{"subtotal"=>"19.99"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/34/confirm", "cancel_url"=>"http://localhost:3000/orders/34/cancel"}, "create_time"=>"2014-12-29T15:55:28Z", "update_time"=>"2014-12-29T15:55:28Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL07334EW936040CKSQXS4A", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-92K58545TM7584841", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL07334EW936040CKSQXS4A/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2014-12-29T15:55:28.682382 #14508] DEBUG -- :   [1m[36mSQL (4.0ms)[0m  [1mUPDATE "orders" SET "name" = ?, "address" = ?, "email" = ?, "pay_type" = ?, "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ? WHERE "orders"."id" = 34[0m  [["name", "s"], ["address", "s"], ["email", "simon.king65@gmail.com"], ["pay_type", "Paypal"], ["created_at", Mon, 29 Dec 2014 15:55:24 UTC +00:00], ["updated_at", Mon, 29 Dec 2014 15:55:24 UTC +00:00], ["id", 34], ["payment_id", "PAY-0CL07334EW936040CKSQXS4A"], ["state", "created"]]
I, [2014-12-29T15:55:28.718384 #14508]  INFO -- : @payment save just done
I, [2014-12-29T15:55:29.889451 #14508]  INFO -- : #<Payment:0x00000009e194f8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009c043c0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009c04230 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009c04190 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009c04e38 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009bfff78 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009bffd98 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009bff938 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009bff7f8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009daeea0 @error=nil, @return_url="http://localhost:3000/orders/34/confirm", @cancel_url="http://localhost:3000/orders/34/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009da5c88 @base=#<Payment:0x00000009e194f8 ...>, @messages={}>, @request_id="5cd3adcd-dcda-4135-999d-794dd1c2b48b", @header={}, @id="PAY-0CL07334EW936040CKSQXS4A", @create_time="2014-12-29T15:55:28Z", @update_time="2014-12-29T15:55:28Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009bff280 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL07334EW936040CKSQXS4A", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009bff028 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-92K58545TM7584841", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009bfed30 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL07334EW936040CKSQXS4A/execute", @rel="execute", @method="POST">]>
I, [2014-12-29T15:55:30.907510 #14508]  INFO -- : #<Payment:0x00000009e194f8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009c043c0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009c04230 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009c04190 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009c04e38 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009bfff78 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009bffd98 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009bff938 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009bff7f8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009daeea0 @error=nil, @return_url="http://localhost:3000/orders/34/confirm", @cancel_url="http://localhost:3000/orders/34/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009da5c88 @base=#<Payment:0x00000009e194f8 ...>, @messages={}>, @request_id="5cd3adcd-dcda-4135-999d-794dd1c2b48b", @header={}, @id="PAY-0CL07334EW936040CKSQXS4A", @create_time="2014-12-29T15:55:28Z", @update_time="2014-12-29T15:55:28Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009bff280 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL07334EW936040CKSQXS4A", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009bff028 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-92K58545TM7584841", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009bfed30 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL07334EW936040CKSQXS4A/execute", @rel="execute", @method="POST">]>
D, [2014-12-29T15:55:31.104521 #14508] DEBUG -- :   [1m[35m (164.0ms)[0m  commit transaction
I, [2014-12-29T15:55:31.133522 #14508]  INFO -- : about to approve url
I, [2014-12-29T15:55:32.155581 #14508]  INFO -- : #<Payment:0x00000009e194f8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009c043c0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009c04230 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009c04190 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009c04e38 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009bfff78 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009bffd98 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009bff938 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009bff7f8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009daeea0 @error=nil, @return_url="http://localhost:3000/orders/34/confirm", @cancel_url="http://localhost:3000/orders/34/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009da5c88 @base=#<Payment:0x00000009e194f8 ...>, @messages={}>, @request_id="5cd3adcd-dcda-4135-999d-794dd1c2b48b", @header={}, @id="PAY-0CL07334EW936040CKSQXS4A", @create_time="2014-12-29T15:55:28Z", @update_time="2014-12-29T15:55:28Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009bff280 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL07334EW936040CKSQXS4A", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009bff028 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-92K58545TM7584841", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009bfed30 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL07334EW936040CKSQXS4A/execute", @rel="execute", @method="POST">]>
I, [2014-12-29T15:55:33.149638 #14508]  INFO -- : #<Payment:0x00000009e194f8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009c043c0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009c04230 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009c04190 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009c04e38 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009bfff78 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009bffd98 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009bff938 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009bff7f8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009daeea0 @error=nil, @return_url="http://localhost:3000/orders/34/confirm", @cancel_url="http://localhost:3000/orders/34/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009da5c88 @base=#<Payment:0x00000009e194f8 ...>, @messages={}>, @request_id="5cd3adcd-dcda-4135-999d-794dd1c2b48b", @header={}, @id="PAY-0CL07334EW936040CKSQXS4A", @create_time="2014-12-29T15:55:28Z", @update_time="2014-12-29T15:55:28Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009bff280 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL07334EW936040CKSQXS4A", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009bff028 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-92K58545TM7584841", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009bfed30 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL07334EW936040CKSQXS4A/execute", @rel="execute", @method="POST">]>
I, [2014-12-29T15:55:33.198641 #14508]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-92K58545TM7584841
I, [2014-12-29T15:55:33.890680 #14508]  INFO -- : #<Payment:0x00000009e194f8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009c043c0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009c04230 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009c04190 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009c04e38 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009bfff78 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009bffd98 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009bff938 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009bff7f8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009daeea0 @error=nil, @return_url="http://localhost:3000/orders/34/confirm", @cancel_url="http://localhost:3000/orders/34/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009da5c88 @base=#<Payment:0x00000009e194f8 ...>, @messages={}>, @request_id="5cd3adcd-dcda-4135-999d-794dd1c2b48b", @header={}, @id="PAY-0CL07334EW936040CKSQXS4A", @create_time="2014-12-29T15:55:28Z", @update_time="2014-12-29T15:55:28Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009bff280 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL07334EW936040CKSQXS4A", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009bff028 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-92K58545TM7584841", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009bfed30 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL07334EW936040CKSQXS4A/execute", @rel="execute", @method="POST">]>
I, [2014-12-29T15:55:33.936683 #14508]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-92K58545TM7584841
I, [2014-12-29T15:55:33.964684 #14508]  INFO -- : Completed 302 Found in 10181ms (ActiveRecord: 176.0ms)
D, [2014-12-29T15:56:06.245531 #14508] DEBUG -- : 
D, [2014-12-29T15:56:06.265532 #14508] DEBUG -- : 
I, [2014-12-29T15:56:06.345536 #14508]  INFO -- : Started GET "/orders/34/confirm?paymentId=PAY-0CL07334EW936040CKSQXS4A&token=EC-92K58545TM7584841&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2014-12-29 15:56:06 +0000
I, [2014-12-29T15:56:06.399540 #14508]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2014-12-29T15:56:06.470544 #14508]  INFO -- :   Parameters: {"paymentId"=>"PAY-0CL07334EW936040CKSQXS4A", "token"=>"EC-92K58545TM7584841", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"34"}
D, [2014-12-29T15:56:06.542548 #14508] DEBUG -- :   [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2014-12-29T15:56:06.638553 #14508] DEBUG -- :   [1m[35mUser Load (1.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2014-12-29T15:56:06.692556 #14508] DEBUG -- :   [1m[36mOrder Load (1.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "34"]]
I, [2014-12-29T15:56:13.268932 #14508]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL07334EW936040CKSQXS4A
I, [2014-12-29T15:56:14.553006 #14508]  INFO -- : Response[200]: OK, Duration: 1.242s
D, [2014-12-29T15:56:16.044091 #14508] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2014-12-29T15:56:16.186099 #14508] DEBUG -- :   [1m[36mSQL (6.0ms)[0m  [1mUPDATE "orders" SET "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 34[0m  [["shipping_address1", "1 Main Terrace"], ["updated_at", Mon, 29 Dec 2014 15:56:16 UTC +00:00]]
D, [2014-12-29T15:56:16.341108 #14508] DEBUG -- :   [1m[35m (110.0ms)[0m  commit transaction
I, [2014-12-29T15:56:16.521118 #14508]  INFO -- :   Rendered orders/_form.html.erb (103.0ms)
I, [2014-12-29T15:56:16.591122 #14508]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (170.0ms)
I, [2014-12-29T15:56:16.772133 #14508]  INFO -- : Completed 200 OK in 10243ms (Views: 368.0ms | ActiveRecord: 123.0ms)
D, [2014-12-29T15:56:17.124153 #14508] DEBUG -- : 
D, [2014-12-29T15:56:17.143154 #14508] DEBUG -- : 
I, [2014-12-29T15:56:17.196157 #14508]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-29 15:56:17 +0000
D, [2014-12-29T15:56:17.294163 #14508] DEBUG -- : 
D, [2014-12-29T15:56:17.318164 #14508] DEBUG -- : 
I, [2014-12-29T15:56:17.383168 #14508]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-29 15:56:17 +0000
D, [2014-12-29T15:56:17.475173 #14508] DEBUG -- : 
D, [2014-12-29T15:56:17.518176 #14508] DEBUG -- : 
I, [2014-12-29T15:56:17.575179 #14508]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-29 15:56:17 +0000
D, [2014-12-29T15:56:17.649183 #14508] DEBUG -- : 
D, [2014-12-29T15:56:17.676185 #14508] DEBUG -- : 
I, [2014-12-29T15:56:17.746189 #14508]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-29 15:56:17 +0000
D, [2014-12-29T15:56:17.816193 #14508] DEBUG -- : 
D, [2014-12-29T15:56:17.843194 #14508] DEBUG -- : 
I, [2014-12-29T15:56:17.902197 #14508]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-29 15:56:17 +0000
D, [2014-12-29T15:56:17.994203 #14508] DEBUG -- : 
D, [2014-12-29T15:56:18.018204 #14508] DEBUG -- : 
I, [2014-12-29T15:56:18.083208 #14508]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-29 15:56:18 +0000
D, [2014-12-29T15:56:18.155212 #14508] DEBUG -- : 
D, [2014-12-29T15:56:18.181213 #14508] DEBUG -- : 
I, [2014-12-29T15:56:18.244217 #14508]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-29 15:56:18 +0000
D, [2014-12-29T15:56:18.315221 #14508] DEBUG -- : 
D, [2014-12-29T15:56:18.339222 #14508] DEBUG -- : 
I, [2014-12-29T15:56:18.400226 #14508]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-29 15:56:18 +0000
D, [2014-12-29T15:56:18.472230 #14508] DEBUG -- : 
D, [2014-12-29T15:56:18.495231 #14508] DEBUG -- : 
I, [2014-12-29T15:56:18.558235 #14508]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-29 15:56:18 +0000
D, [2014-12-29T15:56:18.632239 #14508] DEBUG -- : 
D, [2014-12-29T15:56:18.658241 #14508] DEBUG -- : 
I, [2014-12-29T15:56:18.725245 #14508]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-29 15:56:18 +0000
D, [2014-12-29T15:56:18.797249 #14508] DEBUG -- : 
D, [2014-12-29T15:56:18.822250 #14508] DEBUG -- : 
I, [2014-12-29T15:56:18.888254 #14508]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-29 15:56:18 +0000
D, [2014-12-29T15:56:18.970259 #14508] DEBUG -- : 
D, [2014-12-29T15:56:19.028262 #14508] DEBUG -- : 
I, [2014-12-29T15:56:19.091265 #14508]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-29 15:56:19 +0000
D, [2014-12-29T15:56:19.164270 #14508] DEBUG -- : 
D, [2014-12-29T15:56:19.187271 #14508] DEBUG -- : 
I, [2014-12-29T15:56:19.240274 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-29 15:56:19 +0000
D, [2014-12-29T15:56:19.314278 #14508] DEBUG -- : 
D, [2014-12-29T15:56:19.338280 #14508] DEBUG -- : 
I, [2014-12-29T15:56:19.405283 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-29 15:56:19 +0000
D, [2014-12-29T15:56:19.479288 #14508] DEBUG -- : 
D, [2014-12-29T15:56:19.502289 #14508] DEBUG -- : 
I, [2014-12-29T15:56:19.564293 #14508]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-29 15:56:19 +0000
D, [2014-12-29T15:56:19.637297 #14508] DEBUG -- : 
D, [2014-12-29T15:56:19.663298 #14508] DEBUG -- : 
I, [2014-12-29T15:56:19.733302 #14508]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-29 15:56:19 +0000
D, [2014-12-29T15:56:19.806306 #14508] DEBUG -- : 
D, [2014-12-29T15:56:19.824307 #14508] DEBUG -- : 
I, [2014-12-29T15:56:19.882311 #14508]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-29 15:56:19 +0000
D, [2014-12-29T15:56:19.960315 #14508] DEBUG -- : 
D, [2014-12-29T15:56:19.980316 #14508] DEBUG -- : 
I, [2014-12-29T15:56:20.028319 #14508]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-29 15:56:19 +0000
D, [2014-12-29T15:56:20.097323 #14508] DEBUG -- : 
D, [2014-12-29T15:56:20.123325 #14508] DEBUG -- : 
I, [2014-12-29T15:56:20.174327 #14508]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-29 15:56:20 +0000
D, [2014-12-29T15:56:20.252332 #14508] DEBUG -- : 
D, [2014-12-29T15:56:20.284334 #14508] DEBUG -- : 
I, [2014-12-29T15:56:20.333337 #14508]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-29 15:56:20 +0000
D, [2014-12-29T15:56:20.407341 #14508] DEBUG -- : 
D, [2014-12-29T15:56:20.429342 #14508] DEBUG -- : 
I, [2014-12-29T15:56:20.480345 #14508]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-29 15:56:20 +0000
D, [2014-12-29T15:56:20.578351 #14508] DEBUG -- : 
D, [2014-12-29T15:56:20.598352 #14508] DEBUG -- : 
I, [2014-12-29T15:56:20.650355 #14508]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-29 15:56:20 +0000
D, [2014-12-29T15:56:20.717358 #14508] DEBUG -- : 
D, [2014-12-29T15:56:20.737360 #14508] DEBUG -- : 
I, [2014-12-29T15:56:20.791363 #14508]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-29 15:56:20 +0000
D, [2014-12-29T15:56:20.864367 #14508] DEBUG -- : 
D, [2014-12-29T15:56:20.883368 #14508] DEBUG -- : 
I, [2014-12-29T15:56:20.930371 #14508]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-29 15:56:20 +0000
D, [2014-12-29T15:56:21.000375 #14508] DEBUG -- : 
D, [2014-12-29T15:56:21.019376 #14508] DEBUG -- : 
I, [2014-12-29T15:56:21.066378 #14508]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-29 15:56:21 +0000
D, [2014-12-29T15:56:21.133382 #14508] DEBUG -- : 
D, [2014-12-29T15:56:21.149383 #14508] DEBUG -- : 
I, [2014-12-29T15:56:21.194386 #14508]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-29 15:56:21 +0000
D, [2014-12-29T15:56:21.264390 #14508] DEBUG -- : 
D, [2014-12-29T15:56:21.280391 #14508] DEBUG -- : 
I, [2014-12-29T15:56:21.320393 #14508]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-29 15:56:21 +0000
D, [2014-12-29T15:56:27.170433 #14508] DEBUG -- : 
D, [2014-12-29T15:56:27.189435 #14508] DEBUG -- : 
I, [2014-12-29T15:56:27.244438 #14508]  INFO -- : Started POST "/orders/34/execute/34/2VZ7YQDDDPPC4" for 127.0.0.1 at 2014-12-29 15:56:27 +0000
I, [2014-12-29T15:56:27.340443 #14508]  INFO -- : Processing by OrdersController#execute as HTML
I, [2014-12-29T15:56:27.422448 #14508]  INFO -- :   Parameters: {"authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order_id"=>"34", "payer_id"=>"2VZ7YQDDDPPC4"}
D, [2014-12-29T15:56:27.517453 #14508] DEBUG -- :   [1m[36mOrder Load (2.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "34"]]
I, [2014-12-29T15:56:38.532083 #14508]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL07334EW936040CKSQXS4A
I, [2014-12-29T15:56:39.592144 #14508]  INFO -- : Response[200]: OK, Duration: 1.027s
I, [2014-12-29T15:56:39.656148 #14508]  INFO -- : PayPal-Request-Id: 44010d38-9fc0-4bab-99f0-d41e1c363872
I, [2014-12-29T15:56:39.712151 #14508]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL07334EW936040CKSQXS4A/execute
I, [2014-12-29T15:56:42.092287 #14508]  INFO -- : Response[200]: OK, Duration: 2.345s
D, [2014-12-29T15:56:42.146290 #14508] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2014-12-29T15:56:42.261297 #14508] DEBUG -- :   [1m[36mSQL (7.0ms)[0m  [1mUPDATE "orders" SET "state" = ?, "updated_at" = ? WHERE "orders"."id" = 34[0m  [["state", "approved"], ["updated_at", Mon, 29 Dec 2014 15:56:42 UTC +00:00]]
D, [2014-12-29T15:56:42.388304 #14508] DEBUG -- :   [1m[35m (92.0ms)[0m  commit transaction
D, [2014-12-29T15:56:42.459308 #14508] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 30]]
D, [2014-12-29T15:56:42.497310 #14508] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2014-12-29T15:56:42.581315 #14508] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 30]]
D, [2014-12-29T15:56:42.644319 #14508] DEBUG -- :   [1m[35mSQL (5.0ms)[0m  DELETE FROM "carts" WHERE "carts"."id" = ?  [["id", 30]]
D, [2014-12-29T15:56:42.826329 #14508] DEBUG -- :   [1m[36m (147.0ms)[0m  [1mcommit transaction[0m
I, [2014-12-29T15:57:01.506397 #14508]  INFO -- :   Rendered order_notifier/received.html.erb (7.0ms)
D, [2014-12-29T15:57:01.604403 #14508] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 34]]
D, [2014-12-29T15:57:01.711409 #14508] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2014-12-29T15:57:01.752411 #14508]  INFO -- :   Rendered line_items/_line_item.text.erb (97.0ms)
I, [2014-12-29T15:57:01.791414 #14508]  INFO -- :   Rendered order_notifier/received.text.erb (234.0ms)
I, [2014-12-29T15:57:23.988683 #14508]  INFO -- : 
Sent mail to simon.king65@gmail.com (894.1ms)
D, [2014-12-29T15:57:24.363705 #14508] DEBUG -- : Date: Mon, 29 Dec 2014 15:57:23 +0000
From: Simon King <simon.king65@gmail.com>
To: simon.king65@gmail.com
Message-ID: <54a179e327764_38ac401599c3572c@Simon-PC.mail>
Subject: King Clothing Order Confirmation
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_54a179cdcc728_38ac401599c3562d";
 charset=UTF-8
Content-Transfer-Encoding: 7bit


----==_mimepart_54a179cdcc728_38ac401599c3562d
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear s

Thank you for your recent order from King Clothing.

You ordered the following items:

 1 x Camo Print Tee
We'll send you a separate e-mail when your order ships.
----==_mimepart_54a179cdcc728_38ac401599c3562d
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<h1>OrderNotifier#received</h1>

<p>
  , thank you for your order, we will email you again once your order has been despatched. We hope you enjoy wearing your King Clothing brand tee-shirt.
</p>

----==_mimepart_54a179cdcc728_38ac401599c3562d--

I, [2014-12-29T15:57:37.612463 #14508]  INFO -- : Redirected to http://localhost:3000/
I, [2014-12-29T15:57:37.666466 #14508]  INFO -- : Completed 302 Found in 70193ms (ActiveRecord: 265.0ms)
D, [2014-12-29T15:57:37.757471 #14508] DEBUG -- : 
D, [2014-12-29T15:57:37.782472 #14508] DEBUG -- : 
I, [2014-12-29T15:57:37.832475 #14508]  INFO -- : Started GET "/" for 127.0.0.1 at 2014-12-29 15:57:37 +0000
I, [2014-12-29T15:57:37.967483 #14508]  INFO -- : Processing by StoreController#index as HTML
D, [2014-12-29T15:57:38.024486 #14508] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2014-12-29T15:57:38.161494 #14508] DEBUG -- :   [1m[36mSQL (8.0ms)[0m  [1mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Mon, 29 Dec 2014 15:57:38 UTC +00:00], ["updated_at", Mon, 29 Dec 2014 15:57:38 UTC +00:00]]
D, [2014-12-29T15:57:38.352505 #14508] DEBUG -- :   [1m[35m (147.0ms)[0m  commit transaction
D, [2014-12-29T15:57:38.469512 #14508] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2014-12-29T15:57:38.556517 #14508]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (4.0ms)
I, [2014-12-29T15:57:38.614520 #14508]  INFO -- :   Rendered store/index.html.erb within layouts/application (179.0ms)
D, [2014-12-29T15:57:38.860534 #14508] DEBUG -- :   [1m[35mLineItem Exists (2.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 31]]
D, [2014-12-29T15:57:38.967540 #14508] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 31]]
I, [2014-12-29T15:57:39.010542 #14508]  INFO -- :   Rendered collection (1.0ms)
I, [2014-12-29T15:57:39.084547 #14508]  INFO -- :   Rendered carts/_cart.html.erb (167.0ms)
I, [2014-12-29T15:57:39.163551 #14508]  INFO -- : Completed 200 OK in 1144ms (Views: 745.0ms | ActiveRecord: 163.0ms)
D, [2014-12-29T15:57:39.517571 #14508] DEBUG -- : 
D, [2014-12-29T15:57:39.549573 #14508] DEBUG -- : 
I, [2014-12-29T15:57:39.611577 #14508]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-29 15:57:39 +0000
D, [2014-12-29T15:57:39.688581 #14508] DEBUG -- : 
D, [2014-12-29T15:57:39.713583 #14508] DEBUG -- : 
I, [2014-12-29T15:57:39.780587 #14508]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-29 15:57:39 +0000
D, [2014-12-29T15:57:39.856591 #14508] DEBUG -- : 
D, [2014-12-29T15:57:39.881592 #14508] DEBUG -- : 
I, [2014-12-29T15:57:39.946596 #14508]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-29 15:57:39 +0000
D, [2014-12-29T15:57:40.020600 #14508] DEBUG -- : 
D, [2014-12-29T15:57:40.042602 #14508] DEBUG -- : 
I, [2014-12-29T15:57:40.099605 #14508]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-29 15:57:40 +0000
D, [2014-12-29T15:57:40.173609 #14508] DEBUG -- : 
D, [2014-12-29T15:57:40.192610 #14508] DEBUG -- : 
I, [2014-12-29T15:57:40.243613 #14508]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-29 15:57:40 +0000
D, [2014-12-29T15:57:40.318617 #14508] DEBUG -- : 
D, [2014-12-29T15:57:40.337618 #14508] DEBUG -- : 
I, [2014-12-29T15:57:40.389621 #14508]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-29 15:57:40 +0000
D, [2014-12-29T15:57:40.459625 #14508] DEBUG -- : 
D, [2014-12-29T15:57:40.484627 #14508] DEBUG -- : 
I, [2014-12-29T15:57:40.535630 #14508]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-29 15:57:40 +0000
D, [2014-12-29T15:57:40.618634 #14508] DEBUG -- : 
D, [2014-12-29T15:57:40.635635 #14508] DEBUG -- : 
I, [2014-12-29T15:57:40.687638 #14508]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-29 15:57:40 +0000
D, [2014-12-29T15:57:40.769643 #14508] DEBUG -- : 
D, [2014-12-29T15:57:40.786644 #14508] DEBUG -- : 
I, [2014-12-29T15:57:40.830647 #14508]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-29 15:57:40 +0000
D, [2014-12-29T15:57:40.922652 #14508] DEBUG -- : 
D, [2014-12-29T15:57:40.939653 #14508] DEBUG -- : 
I, [2014-12-29T15:57:40.994656 #14508]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-29 15:57:40 +0000
D, [2014-12-29T15:57:41.068660 #14508] DEBUG -- : 
D, [2014-12-29T15:57:41.087661 #14508] DEBUG -- : 
I, [2014-12-29T15:57:41.138664 #14508]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-29 15:57:41 +0000
D, [2014-12-29T15:57:41.216669 #14508] DEBUG -- : 
D, [2014-12-29T15:57:41.236670 #14508] DEBUG -- : 
I, [2014-12-29T15:57:41.288673 #14508]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-29 15:57:41 +0000
D, [2014-12-29T15:57:41.365677 #14508] DEBUG -- : 
D, [2014-12-29T15:57:41.383678 #14508] DEBUG -- : 
I, [2014-12-29T15:57:41.431681 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-29 15:57:41 +0000
D, [2014-12-29T15:57:41.513686 #14508] DEBUG -- : 
D, [2014-12-29T15:57:41.533687 #14508] DEBUG -- : 
I, [2014-12-29T15:57:41.585690 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-29 15:57:41 +0000
D, [2014-12-29T15:57:41.667694 #14508] DEBUG -- : 
D, [2014-12-29T15:57:41.686696 #14508] DEBUG -- : 
I, [2014-12-29T15:57:41.740699 #14508]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-29 15:57:41 +0000
D, [2014-12-29T15:57:41.821703 #14508] DEBUG -- : 
D, [2014-12-29T15:57:41.840704 #14508] DEBUG -- : 
I, [2014-12-29T15:57:41.895708 #14508]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-29 15:57:41 +0000
D, [2014-12-29T15:57:41.970712 #14508] DEBUG -- : 
D, [2014-12-29T15:57:42.013714 #14508] DEBUG -- : 
I, [2014-12-29T15:57:42.061717 #14508]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-29 15:57:42 +0000
D, [2014-12-29T15:57:42.140722 #14508] DEBUG -- : 
D, [2014-12-29T15:57:42.158723 #14508] DEBUG -- : 
I, [2014-12-29T15:57:42.205725 #14508]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-29 15:57:42 +0000
D, [2014-12-29T15:57:42.280730 #14508] DEBUG -- : 
D, [2014-12-29T15:57:42.305731 #14508] DEBUG -- : 
I, [2014-12-29T15:57:42.355734 #14508]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-29 15:57:42 +0000
D, [2014-12-29T15:57:42.437739 #14508] DEBUG -- : 
D, [2014-12-29T15:57:42.459740 #14508] DEBUG -- : 
I, [2014-12-29T15:57:42.510743 #14508]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-29 15:57:42 +0000
D, [2014-12-29T15:57:42.590747 #14508] DEBUG -- : 
D, [2014-12-29T15:57:42.613749 #14508] DEBUG -- : 
I, [2014-12-29T15:57:42.660751 #14508]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-29 15:57:42 +0000
D, [2014-12-29T15:57:42.740756 #14508] DEBUG -- : 
D, [2014-12-29T15:57:42.765757 #14508] DEBUG -- : 
I, [2014-12-29T15:57:42.811760 #14508]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-29 15:57:42 +0000
D, [2014-12-29T15:57:42.887764 #14508] DEBUG -- : 
D, [2014-12-29T15:57:42.903765 #14508] DEBUG -- : 
I, [2014-12-29T15:57:42.948768 #14508]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-29 15:57:42 +0000
D, [2014-12-29T15:57:43.018772 #14508] DEBUG -- : 
D, [2014-12-29T15:57:43.034773 #14508] DEBUG -- : 
I, [2014-12-29T15:57:43.075775 #14508]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-29 15:57:43 +0000
D, [2014-12-29T15:57:43.142779 #14508] DEBUG -- : 
D, [2014-12-29T15:57:43.158780 #14508] DEBUG -- : 
I, [2014-12-29T15:57:43.202782 #14508]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-29 15:57:43 +0000
D, [2014-12-29T15:57:43.277787 #14508] DEBUG -- : 
D, [2014-12-29T15:57:43.294788 #14508] DEBUG -- : 
I, [2014-12-29T15:57:43.339790 #14508]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-29 15:57:43 +0000
D, [2014-12-29T15:57:43.464797 #14508] DEBUG -- : 
D, [2014-12-29T15:57:43.486799 #14508] DEBUG -- : 
I, [2014-12-29T15:57:43.526801 #14508]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-29 15:57:43 +0000
D, [2014-12-29T15:57:43.597805 #14508] DEBUG -- : 
D, [2014-12-29T15:57:43.612806 #14508] DEBUG -- : 
I, [2014-12-29T15:57:43.658808 #14508]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2014-12-29 15:57:43 +0000
D, [2014-12-29T15:57:43.733813 #14508] DEBUG -- : 
D, [2014-12-29T15:57:43.752814 #14508] DEBUG -- : 
I, [2014-12-29T15:57:43.798816 #14508]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2014-12-29 15:57:43 +0000
D, [2014-12-29T16:26:39.589396 #14508] DEBUG -- : 
D, [2014-12-29T16:26:39.604996 #14508] DEBUG -- : 
I, [2014-12-29T16:26:39.620596 #14508]  INFO -- : Started GET "/" for 127.0.0.1 at 2014-12-29 16:26:39 +0000
I, [2014-12-29T16:26:39.667397 #14508]  INFO -- : Processing by StoreController#index as HTML
D, [2014-12-29T16:26:39.698597 #14508] DEBUG -- :   [1m[35mCart Load (15.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 31]]
D, [2014-12-29T16:26:39.760997 #14508] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2014-12-29T16:26:39.792197 #14508]  INFO -- : Cache digest for store/index.xml: a93d4e2e981ab3dfce98a095c3b6c059
I, [2014-12-29T16:26:39.823397 #14508]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (0.0ms)
I, [2014-12-29T16:26:39.854597 #14508]  INFO -- :   Rendered store/index.html.erb within layouts/application (109.2ms)
D, [2014-12-29T16:26:39.948197 #14508] DEBUG -- :   [1m[35mLineItem Exists (0.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 31]]
D, [2014-12-29T16:26:39.994997 #14508] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 31]]
I, [2014-12-29T16:26:40.026197 #14508]  INFO -- :   Rendered collection (0.0ms)
I, [2014-12-29T16:26:40.057397 #14508]  INFO -- :   Rendered carts/_cart.html.erb (78.0ms)
I, [2014-12-29T16:26:40.088597 #14508]  INFO -- : Completed 200 OK in 406ms (Views: 358.8ms | ActiveRecord: 15.6ms)
D, [2014-12-29T16:31:09.242121 #14508] DEBUG -- : 
D, [2014-12-29T16:31:09.257721 #14508] DEBUG -- : 
I, [2014-12-29T16:31:09.335722 #14508]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2014-12-29 16:31:09 +0000
I, [2014-12-29T16:31:09.444922 #14508]  INFO -- : Processing by LineItemsController#create as JS
I, [2014-12-29T16:31:09.522922 #14508]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2014-12-29T16:31:09.632122 #14508] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 31]]
D, [2014-12-29T16:31:09.725722 #14508] DEBUG -- :   [1m[36mProduct Load (15.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2014-12-29T16:31:09.867123 #14508] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 31]]
D, [2014-12-29T16:31:09.976323 #14508] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2014-12-29T16:31:10.038723 #14508] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2014-12-29T16:31:10.257123 #14508] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 31], ["created_at", Mon, 29 Dec 2014 16:31:10 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:5932f38,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Mon, 29 Dec 2014 16:31:10 UTC +00:00]]
D, [2014-12-29T16:31:10.444324 #14508] DEBUG -- :   [1m[35m (140.4ms)[0m  commit transaction
D, [2014-12-29T16:31:10.569124 #14508] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 31]]
I, [2014-12-29T16:31:10.662724 #14508]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2014-12-29T16:31:10.741724 #14508]  INFO -- :   Rendered carts/_cart.html.erb (218.4ms)
I, [2014-12-29T16:31:10.789524 #14508]  INFO -- :   Rendered line_items/create.js.erb (282.8ms)
I, [2014-12-29T16:31:10.851924 #14508]  INFO -- : Completed 200 OK in 1267ms (Views: 345.2ms | ActiveRecord: 156.0ms)
D, [2014-12-29T16:31:20.436005 #14508] DEBUG -- : 
D, [2014-12-29T16:31:20.463007 #14508] DEBUG -- : 
I, [2014-12-29T16:31:20.525010 #14508]  INFO -- : Started GET "/orders/new" for 127.0.0.1 at 2014-12-29 16:31:20 +0000
I, [2014-12-29T16:31:20.637017 #14508]  INFO -- : Processing by OrdersController#new as HTML
D, [2014-12-29T16:31:20.732022 #14508] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 31]]
D, [2014-12-29T16:31:20.852029 #14508] DEBUG -- :   [1m[36mLineItem Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 31]]
I, [2014-12-29T16:31:21.032039 #14508]  INFO -- :   Rendered orders/_form.html.erb (97.0ms)
I, [2014-12-29T16:31:21.094043 #14508]  INFO -- :   Rendered orders/new.html.erb within layouts/application (155.0ms)
D, [2014-12-29T16:31:21.300055 #14508] DEBUG -- :   [1m[35mCACHE (1.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 31]]
D, [2014-12-29T16:31:21.409061 #14508] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 31]]
D, [2014-12-29T16:31:21.532068 #14508] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2014-12-29T16:31:21.602072 #14508]  INFO -- :   Rendered line_items/_line_item.html.erb (127.0ms)
I, [2014-12-29T16:31:21.673076 #14508]  INFO -- :   Rendered carts/_cart.html.erb (315.0ms)
I, [2014-12-29T16:31:21.754081 #14508]  INFO -- : Completed 200 OK in 1057ms (Views: 829.0ms | ActiveRecord: 8.0ms)
D, [2014-12-29T16:31:22.116101 #14508] DEBUG -- : 
D, [2014-12-29T16:31:22.143103 #14508] DEBUG -- : 
I, [2014-12-29T16:31:22.210107 #14508]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-29 16:31:22 +0000
D, [2014-12-29T16:31:22.309113 #14508] DEBUG -- : 
D, [2014-12-29T16:31:22.335114 #14508] DEBUG -- : 
I, [2014-12-29T16:31:22.407118 #14508]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-29 16:31:22 +0000
D, [2014-12-29T16:31:22.488123 #14508] DEBUG -- : 
D, [2014-12-29T16:31:22.535125 #14508] DEBUG -- : 
I, [2014-12-29T16:31:22.618130 #14508]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-29 16:31:22 +0000
D, [2014-12-29T16:31:22.692134 #14508] DEBUG -- : 
D, [2014-12-29T16:31:22.715136 #14508] DEBUG -- : 
I, [2014-12-29T16:31:22.776139 #14508]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-29 16:31:22 +0000
D, [2014-12-29T16:31:22.851144 #14508] DEBUG -- : 
D, [2014-12-29T16:31:22.877145 #14508] DEBUG -- : 
I, [2014-12-29T16:31:22.948149 #14508]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-29 16:31:22 +0000
D, [2014-12-29T16:31:23.022153 #14508] DEBUG -- : 
D, [2014-12-29T16:31:23.048155 #14508] DEBUG -- : 
I, [2014-12-29T16:31:23.112158 #14508]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-29 16:31:23 +0000
D, [2014-12-29T16:31:23.186163 #14508] DEBUG -- : 
D, [2014-12-29T16:31:23.214164 #14508] DEBUG -- : 
I, [2014-12-29T16:31:23.287168 #14508]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-29 16:31:23 +0000
D, [2014-12-29T16:31:23.379174 #14508] DEBUG -- : 
D, [2014-12-29T16:31:23.403175 #14508] DEBUG -- : 
I, [2014-12-29T16:31:23.458178 #14508]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-29 16:31:23 +0000
D, [2014-12-29T16:31:23.554184 #14508] DEBUG -- : 
D, [2014-12-29T16:31:23.578185 #14508] DEBUG -- : 
I, [2014-12-29T16:31:23.640189 #14508]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-29 16:31:23 +0000
D, [2014-12-29T16:31:23.712193 #14508] DEBUG -- : 
D, [2014-12-29T16:31:23.737194 #14508] DEBUG -- : 
I, [2014-12-29T16:31:23.796198 #14508]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-29 16:31:23 +0000
D, [2014-12-29T16:31:23.869202 #14508] DEBUG -- : 
D, [2014-12-29T16:31:23.896203 #14508] DEBUG -- : 
I, [2014-12-29T16:31:23.970208 #14508]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-29 16:31:23 +0000
D, [2014-12-29T16:31:24.047212 #14508] DEBUG -- : 
D, [2014-12-29T16:31:24.070213 #14508] DEBUG -- : 
I, [2014-12-29T16:31:24.133217 #14508]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-29 16:31:24 +0000
D, [2014-12-29T16:31:24.206221 #14508] DEBUG -- : 
D, [2014-12-29T16:31:24.229222 #14508] DEBUG -- : 
I, [2014-12-29T16:31:24.303227 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-29 16:31:24 +0000
D, [2014-12-29T16:31:24.382231 #14508] DEBUG -- : 
D, [2014-12-29T16:31:24.406232 #14508] DEBUG -- : 
I, [2014-12-29T16:31:24.473236 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-29 16:31:24 +0000
D, [2014-12-29T16:31:24.547241 #14508] DEBUG -- : 
D, [2014-12-29T16:31:24.573242 #14508] DEBUG -- : 
I, [2014-12-29T16:31:24.636246 #14508]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-29 16:31:24 +0000
D, [2014-12-29T16:31:24.708250 #14508] DEBUG -- : 
D, [2014-12-29T16:31:24.733251 #14508] DEBUG -- : 
I, [2014-12-29T16:31:24.796255 #14508]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-29 16:31:24 +0000
D, [2014-12-29T16:31:24.869259 #14508] DEBUG -- : 
D, [2014-12-29T16:31:24.893260 #14508] DEBUG -- : 
I, [2014-12-29T16:31:24.964264 #14508]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-29 16:31:24 +0000
D, [2014-12-29T16:31:25.037269 #14508] DEBUG -- : 
D, [2014-12-29T16:31:25.063270 #14508] DEBUG -- : 
I, [2014-12-29T16:31:25.125274 #14508]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-29 16:31:25 +0000
D, [2014-12-29T16:31:25.199278 #14508] DEBUG -- : 
D, [2014-12-29T16:31:25.226279 #14508] DEBUG -- : 
I, [2014-12-29T16:31:25.295283 #14508]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-29 16:31:25 +0000
D, [2014-12-29T16:31:25.373288 #14508] DEBUG -- : 
D, [2014-12-29T16:31:25.397289 #14508] DEBUG -- : 
I, [2014-12-29T16:31:25.463293 #14508]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-29 16:31:25 +0000
D, [2014-12-29T16:31:25.535297 #14508] DEBUG -- : 
D, [2014-12-29T16:31:25.560298 #14508] DEBUG -- : 
I, [2014-12-29T16:31:25.622302 #14508]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-29 16:31:25 +0000
D, [2014-12-29T16:31:25.699306 #14508] DEBUG -- : 
D, [2014-12-29T16:31:25.727308 #14508] DEBUG -- : 
I, [2014-12-29T16:31:25.789312 #14508]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-29 16:31:25 +0000
D, [2014-12-29T16:31:25.865316 #14508] DEBUG -- : 
D, [2014-12-29T16:31:25.894318 #14508] DEBUG -- : 
I, [2014-12-29T16:31:25.966322 #14508]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-29 16:31:25 +0000
D, [2014-12-29T16:31:26.055327 #14508] DEBUG -- : 
D, [2014-12-29T16:31:26.080328 #14508] DEBUG -- : 
I, [2014-12-29T16:31:26.143332 #14508]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-29 16:31:26 +0000
D, [2014-12-29T16:31:26.219336 #14508] DEBUG -- : 
D, [2014-12-29T16:31:26.246338 #14508] DEBUG -- : 
I, [2014-12-29T16:31:26.315342 #14508]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-29 16:31:26 +0000
D, [2014-12-29T16:31:26.392346 #14508] DEBUG -- : 
D, [2014-12-29T16:31:26.416347 #14508] DEBUG -- : 
I, [2014-12-29T16:31:26.479351 #14508]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-29 16:31:26 +0000
D, [2014-12-29T16:31:26.556355 #14508] DEBUG -- : 
D, [2014-12-29T16:31:26.578357 #14508] DEBUG -- : 
I, [2014-12-29T16:31:26.638360 #14508]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-29 16:31:26 +0000
D, [2014-12-29T16:31:48.656702 #14508] DEBUG -- : 
D, [2014-12-29T16:31:48.677703 #14508] DEBUG -- : 
I, [2014-12-29T16:31:48.720706 #14508]  INFO -- : Started POST "/orders" for 127.0.0.1 at 2014-12-29 16:31:48 +0000
I, [2014-12-29T16:31:48.811711 #14508]  INFO -- : Processing by OrdersController#create as HTML
I, [2014-12-29T16:31:48.931718 #14508]  INFO -- :   Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order"=>{"name"=>"s", "address"=>"s", "shipping_address1"=>"s", "email"=>"simon.king65@gmail.com", "pay_type"=>"Paypal"}, "commit"=>"Place Order"}
D, [2014-12-29T16:31:49.010722 #14508] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 31]]
I, [2014-12-29T16:31:49.037724 #14508]  INFO -- : log info
D, [2014-12-29T16:31:49.084726 #14508] DEBUG -- : Unpermitted parameters: shipping_address1
D, [2014-12-29T16:31:49.179732 #14508] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 31]]
I, [2014-12-29T16:31:49.237735 #14508]  INFO -- : just about to payment_method and save
I, [2014-12-29T16:31:49.351742 #14508]  INFO -- : #<Order id: nil, name: "s", address: "s", email: "simon.king65@gmail.com", pay_type: "Paypal", created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2014-12-29T16:31:49.391744 #14508] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2014-12-29T16:31:49.576754 #14508] DEBUG -- :   [1m[35mSQL (10.0ms)[0m  INSERT INTO "orders" ("address", "created_at", "email", "name", "pay_type", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "s"], ["created_at", Mon, 29 Dec 2014 16:31:49 UTC +00:00], ["email", "simon.king65@gmail.com"], ["name", "s"], ["pay_type", "Paypal"], ["updated_at", Mon, 29 Dec 2014 16:31:49 UTC +00:00]]
D, [2014-12-29T16:31:49.712762 #14508] DEBUG -- :   [1m[36mSQL (5.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 36[0m  [["cart_id", nil], ["order_id", 35], ["updated_at", Mon, 29 Dec 2014 16:31:49 UTC +00:00]]
I, [2014-12-29T16:31:49.744764 #14508]  INFO -- : about to @payment.create
D, [2014-12-29T16:31:49.837769 #14508] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2014-12-29T16:31:49.872771 #14508]  INFO -- : in order=
I, [2014-12-29T16:31:49.900773 #14508]  INFO -- : in payment.create
I, [2014-12-29T16:31:50.093784 #14508]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/35/confirm", "cancel_url"=>"http://localhost:3000/orders/35/cancel"}}
I, [2014-12-29T16:31:50.682818 #14508]  INFO -- : #<ActiveModel::Errors:0x00000008213998 @base=#<Payment:0x00000008477ab8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008476910 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000834c030 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000008337518 @error=nil, @total="19.99", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008334980 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000832b128 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000083163b8 @error=nil, @return_url="http://localhost:3000/orders/35/confirm", @cancel_url="http://localhost:3000/orders/35/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008213998 ...>>, @messages={}>
I, [2014-12-29T16:31:50.714820 #14508]  INFO -- : got past invalid
I, [2014-12-29T16:31:50.812825 #14508]  INFO -- : PayPal-Request-Id: 07df39ab-4d92-40bb-932a-d6ad87e8f370
I, [2014-12-29T16:31:50.868828 #14508]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2014-12-29T16:31:52.492921 #14508]  INFO -- : Response[201]: Created, Duration: 1.581s
I, [2014-12-29T16:31:52.534924 #14508]  INFO -- : back from super
I, [2014-12-29T16:31:53.036952 #14508]  INFO -- : {"id"=>"PAY-69729268G8113631LKSQYD6I", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99", "details"=>{"subtotal"=>"19.99"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/35/confirm", "cancel_url"=>"http://localhost:3000/orders/35/cancel"}, "create_time"=>"2014-12-29T16:31:53Z", "update_time"=>"2014-12-29T16:31:53Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-69729268G8113631LKSQYD6I", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6ST288910C964943K", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-69729268G8113631LKSQYD6I/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2014-12-29T16:31:53.297967 #14508] DEBUG -- :   [1m[36mSQL (10.0ms)[0m  [1mUPDATE "orders" SET "name" = ?, "address" = ?, "email" = ?, "pay_type" = ?, "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ? WHERE "orders"."id" = 35[0m  [["name", "s"], ["address", "s"], ["email", "simon.king65@gmail.com"], ["pay_type", "Paypal"], ["created_at", Mon, 29 Dec 2014 16:31:49 UTC +00:00], ["updated_at", Mon, 29 Dec 2014 16:31:49 UTC +00:00], ["id", 35], ["payment_id", "PAY-69729268G8113631LKSQYD6I"], ["state", "created"]]
I, [2014-12-29T16:31:53.335969 #14508]  INFO -- : @payment save just done
I, [2014-12-29T16:31:54.321026 #14508]  INFO -- : #<Payment:0x00000008477ab8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007f64210 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000007f5f580 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000007f5ed10 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007f5df00 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007f5d708 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000007f5c5d8 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007f46f30 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007f45f40 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000083163b8 @error=nil, @return_url="http://localhost:3000/orders/35/confirm", @cancel_url="http://localhost:3000/orders/35/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008213998 @base=#<Payment:0x00000008477ab8 ...>, @messages={}>, @request_id="07df39ab-4d92-40bb-932a-d6ad87e8f370", @header={}, @id="PAY-69729268G8113631LKSQYD6I", @create_time="2014-12-29T16:31:53Z", @update_time="2014-12-29T16:31:53Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000007f2d8f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-69729268G8113631LKSQYD6I", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007f2c090 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6ST288910C964943K", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007f26af0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-69729268G8113631LKSQYD6I/execute", @rel="execute", @method="POST">]>
I, [2014-12-29T16:31:55.294081 #14508]  INFO -- : #<Payment:0x00000008477ab8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007f64210 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000007f5f580 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000007f5ed10 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007f5df00 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007f5d708 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000007f5c5d8 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007f46f30 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007f45f40 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000083163b8 @error=nil, @return_url="http://localhost:3000/orders/35/confirm", @cancel_url="http://localhost:3000/orders/35/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008213998 @base=#<Payment:0x00000008477ab8 ...>, @messages={}>, @request_id="07df39ab-4d92-40bb-932a-d6ad87e8f370", @header={}, @id="PAY-69729268G8113631LKSQYD6I", @create_time="2014-12-29T16:31:53Z", @update_time="2014-12-29T16:31:53Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000007f2d8f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-69729268G8113631LKSQYD6I", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007f2c090 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6ST288910C964943K", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007f26af0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-69729268G8113631LKSQYD6I/execute", @rel="execute", @method="POST">]>
D, [2014-12-29T16:31:55.484092 #14508] DEBUG -- :   [1m[35m (153.0ms)[0m  commit transaction
I, [2014-12-29T16:31:55.515094 #14508]  INFO -- : about to approve url
I, [2014-12-29T16:31:56.492150 #14508]  INFO -- : #<Payment:0x00000008477ab8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007f64210 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000007f5f580 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000007f5ed10 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007f5df00 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007f5d708 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000007f5c5d8 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007f46f30 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007f45f40 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000083163b8 @error=nil, @return_url="http://localhost:3000/orders/35/confirm", @cancel_url="http://localhost:3000/orders/35/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008213998 @base=#<Payment:0x00000008477ab8 ...>, @messages={}>, @request_id="07df39ab-4d92-40bb-932a-d6ad87e8f370", @header={}, @id="PAY-69729268G8113631LKSQYD6I", @create_time="2014-12-29T16:31:53Z", @update_time="2014-12-29T16:31:53Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000007f2d8f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-69729268G8113631LKSQYD6I", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007f2c090 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6ST288910C964943K", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007f26af0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-69729268G8113631LKSQYD6I/execute", @rel="execute", @method="POST">]>
I, [2014-12-29T16:31:57.473206 #14508]  INFO -- : #<Payment:0x00000008477ab8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007f64210 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000007f5f580 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000007f5ed10 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007f5df00 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007f5d708 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000007f5c5d8 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007f46f30 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007f45f40 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000083163b8 @error=nil, @return_url="http://localhost:3000/orders/35/confirm", @cancel_url="http://localhost:3000/orders/35/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008213998 @base=#<Payment:0x00000008477ab8 ...>, @messages={}>, @request_id="07df39ab-4d92-40bb-932a-d6ad87e8f370", @header={}, @id="PAY-69729268G8113631LKSQYD6I", @create_time="2014-12-29T16:31:53Z", @update_time="2014-12-29T16:31:53Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000007f2d8f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-69729268G8113631LKSQYD6I", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007f2c090 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6ST288910C964943K", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007f26af0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-69729268G8113631LKSQYD6I/execute", @rel="execute", @method="POST">]>
I, [2014-12-29T16:31:57.530209 #14508]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6ST288910C964943K
I, [2014-12-29T16:31:58.497265 #14508]  INFO -- : #<Payment:0x00000008477ab8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007f64210 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000007f5f580 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000007f5ed10 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007f5df00 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007f5d708 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000007f5c5d8 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007f46f30 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007f45f40 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000083163b8 @error=nil, @return_url="http://localhost:3000/orders/35/confirm", @cancel_url="http://localhost:3000/orders/35/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008213998 @base=#<Payment:0x00000008477ab8 ...>, @messages={}>, @request_id="07df39ab-4d92-40bb-932a-d6ad87e8f370", @header={}, @id="PAY-69729268G8113631LKSQYD6I", @create_time="2014-12-29T16:31:53Z", @update_time="2014-12-29T16:31:53Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000007f2d8f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-69729268G8113631LKSQYD6I", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007f2c090 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6ST288910C964943K", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007f26af0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-69729268G8113631LKSQYD6I/execute", @rel="execute", @method="POST">]>
I, [2014-12-29T16:31:58.564269 #14508]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6ST288910C964943K
I, [2014-12-29T16:31:58.607271 #14508]  INFO -- : Completed 302 Found in 9634ms (ActiveRecord: 186.0ms)
D, [2014-12-29T16:32:33.336257 #14508] DEBUG -- : 
D, [2014-12-29T16:32:33.361259 #14508] DEBUG -- : 
I, [2014-12-29T16:32:33.457264 #14508]  INFO -- : Started GET "/orders/35/confirm?paymentId=PAY-69729268G8113631LKSQYD6I&token=EC-6ST288910C964943K&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2014-12-29 16:32:33 +0000
I, [2014-12-29T16:32:33.561270 #14508]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2014-12-29T16:32:33.648275 #14508]  INFO -- :   Parameters: {"paymentId"=>"PAY-69729268G8113631LKSQYD6I", "token"=>"EC-6ST288910C964943K", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"35"}
D, [2014-12-29T16:32:33.728280 #14508] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2014-12-29T16:32:33.808284 #14508] DEBUG -- :   [1m[35mUser Load (1.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2014-12-29T16:32:33.895289 #14508] DEBUG -- :   [1m[36mOrder Load (1.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "35"]]
I, [2014-12-29T16:32:36.456436 #14508]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-69729268G8113631LKSQYD6I
I, [2014-12-29T16:32:37.511496 #14508]  INFO -- : Response[200]: OK, Duration: 1.023s
D, [2014-12-29T16:32:38.510553 #14508] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2014-12-29T16:32:38.638561 #14508] DEBUG -- :   [1m[36mSQL (6.0ms)[0m  [1mUPDATE "orders" SET "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 35[0m  [["shipping_address1", "1 Main Terrace"], ["updated_at", Mon, 29 Dec 2014 16:32:38 UTC +00:00]]
D, [2014-12-29T16:32:38.818571 #14508] DEBUG -- :   [1m[35m (134.0ms)[0m  commit transaction
I, [2014-12-29T16:32:38.991581 #14508]  INFO -- :   Rendered orders/_form.html.erb (104.0ms)
I, [2014-12-29T16:32:39.063585 #14508]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (166.0ms)
I, [2014-12-29T16:32:39.257596 #14508]  INFO -- : Completed 200 OK in 5551ms (Views: 378.0ms | ActiveRecord: 145.0ms)
D, [2014-12-29T16:32:39.575614 #14508] DEBUG -- : 
D, [2014-12-29T16:32:39.590615 #14508] DEBUG -- : 
I, [2014-12-29T16:32:39.633618 #14508]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-29 16:32:39 +0000
D, [2014-12-29T16:32:39.699621 #14508] DEBUG -- : 
D, [2014-12-29T16:32:39.723623 #14508] DEBUG -- : 
I, [2014-12-29T16:32:39.788626 #14508]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-29 16:32:39 +0000
D, [2014-12-29T16:32:39.857630 #14508] DEBUG -- : 
D, [2014-12-29T16:32:39.882632 #14508] DEBUG -- : 
I, [2014-12-29T16:32:39.943635 #14508]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-29 16:32:39 +0000
D, [2014-12-29T16:32:40.021640 #14508] DEBUG -- : 
D, [2014-12-29T16:32:40.046641 #14508] DEBUG -- : 
I, [2014-12-29T16:32:40.110645 #14508]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-29 16:32:40 +0000
D, [2014-12-29T16:32:40.189649 #14508] DEBUG -- : 
D, [2014-12-29T16:32:40.214651 #14508] DEBUG -- : 
I, [2014-12-29T16:32:40.277654 #14508]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-29 16:32:40 +0000
D, [2014-12-29T16:32:40.351659 #14508] DEBUG -- : 
D, [2014-12-29T16:32:40.378660 #14508] DEBUG -- : 
I, [2014-12-29T16:32:40.447664 #14508]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-29 16:32:40 +0000
D, [2014-12-29T16:32:40.518668 #14508] DEBUG -- : 
D, [2014-12-29T16:32:40.545670 #14508] DEBUG -- : 
I, [2014-12-29T16:32:40.611674 #14508]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-29 16:32:40 +0000
D, [2014-12-29T16:32:40.683678 #14508] DEBUG -- : 
D, [2014-12-29T16:32:40.708679 #14508] DEBUG -- : 
I, [2014-12-29T16:32:40.771683 #14508]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-29 16:32:40 +0000
D, [2014-12-29T16:32:40.858688 #14508] DEBUG -- : 
D, [2014-12-29T16:32:40.882689 #14508] DEBUG -- : 
I, [2014-12-29T16:32:40.945693 #14508]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-29 16:32:40 +0000
D, [2014-12-29T16:32:41.018697 #14508] DEBUG -- : 
D, [2014-12-29T16:32:41.043698 #14508] DEBUG -- : 
I, [2014-12-29T16:32:41.108702 #14508]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-29 16:32:41 +0000
D, [2014-12-29T16:32:41.185706 #14508] DEBUG -- : 
D, [2014-12-29T16:32:41.210708 #14508] DEBUG -- : 
I, [2014-12-29T16:32:41.273711 #14508]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-29 16:32:41 +0000
D, [2014-12-29T16:32:41.349716 #14508] DEBUG -- : 
D, [2014-12-29T16:32:41.376717 #14508] DEBUG -- : 
I, [2014-12-29T16:32:41.445721 #14508]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-29 16:32:41 +0000
D, [2014-12-29T16:32:41.513725 #14508] DEBUG -- : 
D, [2014-12-29T16:32:41.539727 #14508] DEBUG -- : 
I, [2014-12-29T16:32:41.608731 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-29 16:32:41 +0000
D, [2014-12-29T16:32:41.681735 #14508] DEBUG -- : 
D, [2014-12-29T16:32:41.706736 #14508] DEBUG -- : 
I, [2014-12-29T16:32:41.777740 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-29 16:32:41 +0000
D, [2014-12-29T16:32:41.850744 #14508] DEBUG -- : 
D, [2014-12-29T16:32:41.875746 #14508] DEBUG -- : 
I, [2014-12-29T16:32:41.939749 #14508]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-29 16:32:41 +0000
D, [2014-12-29T16:32:42.014754 #14508] DEBUG -- : 
D, [2014-12-29T16:32:42.040755 #14508] DEBUG -- : 
I, [2014-12-29T16:32:42.107759 #14508]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-29 16:32:42 +0000
D, [2014-12-29T16:32:42.183763 #14508] DEBUG -- : 
D, [2014-12-29T16:32:42.203765 #14508] DEBUG -- : 
I, [2014-12-29T16:32:42.260768 #14508]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-29 16:32:42 +0000
D, [2014-12-29T16:32:42.332772 #14508] DEBUG -- : 
D, [2014-12-29T16:32:42.359773 #14508] DEBUG -- : 
I, [2014-12-29T16:32:42.425777 #14508]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-29 16:32:42 +0000
D, [2014-12-29T16:32:42.498781 #14508] DEBUG -- : 
D, [2014-12-29T16:32:42.523783 #14508] DEBUG -- : 
I, [2014-12-29T16:32:42.587787 #14508]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-29 16:32:42 +0000
D, [2014-12-29T16:32:42.660791 #14508] DEBUG -- : 
D, [2014-12-29T16:32:42.686792 #14508] DEBUG -- : 
I, [2014-12-29T16:32:42.748796 #14508]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-29 16:32:42 +0000
D, [2014-12-29T16:32:42.821800 #14508] DEBUG -- : 
D, [2014-12-29T16:32:42.844801 #14508] DEBUG -- : 
I, [2014-12-29T16:32:42.908805 #14508]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-29 16:32:42 +0000
D, [2014-12-29T16:32:42.994810 #14508] DEBUG -- : 
D, [2014-12-29T16:32:43.012811 #14508] DEBUG -- : 
I, [2014-12-29T16:32:43.062814 #14508]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-29 16:32:43 +0000
D, [2014-12-29T16:32:43.130818 #14508] DEBUG -- : 
D, [2014-12-29T16:32:43.146819 #14508] DEBUG -- : 
I, [2014-12-29T16:32:43.191821 #14508]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-29 16:32:43 +0000
D, [2014-12-29T16:32:43.257825 #14508] DEBUG -- : 
D, [2014-12-29T16:32:43.273826 #14508] DEBUG -- : 
I, [2014-12-29T16:32:43.317828 #14508]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-29 16:32:43 +0000
D, [2014-12-29T16:32:43.392833 #14508] DEBUG -- : 
D, [2014-12-29T16:32:43.406833 #14508] DEBUG -- : 
I, [2014-12-29T16:32:43.441835 #14508]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-29 16:32:43 +0000
D, [2014-12-29T16:32:43.494838 #14508] DEBUG -- : 
D, [2014-12-29T16:32:43.505839 #14508] DEBUG -- : 
I, [2014-12-29T16:32:43.552842 #14508]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-29 16:32:43 +0000
D, [2014-12-29T16:32:43.610845 #14508] DEBUG -- : 
D, [2014-12-29T16:32:43.622846 #14508] DEBUG -- : 
I, [2014-12-29T16:32:43.654848 #14508]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-29 16:32:43 +0000
D, [2014-12-29T16:33:21.296680 #14508] DEBUG -- : 
D, [2014-12-29T16:33:21.320681 #14508] DEBUG -- : 
I, [2014-12-29T16:33:21.384685 #14508]  INFO -- : Started POST "/orders/35/execute/35/2VZ7YQDDDPPC4" for 127.0.0.1 at 2014-12-29 16:33:21 +0000
I, [2014-12-29T16:33:21.469690 #14508]  INFO -- : Processing by OrdersController#execute as HTML
I, [2014-12-29T16:33:21.546694 #14508]  INFO -- :   Parameters: {"authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order_id"=>"35", "payer_id"=>"2VZ7YQDDDPPC4"}
D, [2014-12-29T16:33:21.637699 #14508] DEBUG -- :   [1m[36mOrder Load (2.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "35"]]
I, [2014-12-29T16:33:28.742106 #14508]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-69729268G8113631LKSQYD6I
I, [2014-12-29T16:33:29.841169 #14508]  INFO -- : Response[200]: OK, Duration: 1.072s
I, [2014-12-29T16:33:29.893172 #14508]  INFO -- : PayPal-Request-Id: 90cd530c-4b4c-493d-98a2-ba63602d7567
I, [2014-12-29T16:33:29.940174 #14508]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-69729268G8113631LKSQYD6I/execute
I, [2014-12-29T16:33:31.885286 #14508]  INFO -- : Response[200]: OK, Duration: 1.905s
D, [2014-12-29T16:33:31.943289 #14508] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2014-12-29T16:33:32.073296 #14508] DEBUG -- :   [1m[36mSQL (7.0ms)[0m  [1mUPDATE "orders" SET "state" = ?, "updated_at" = ? WHERE "orders"."id" = 35[0m  [["state", "approved"], ["updated_at", Mon, 29 Dec 2014 16:33:31 UTC +00:00]]
D, [2014-12-29T16:33:32.228305 #14508] DEBUG -- :   [1m[35m (118.0ms)[0m  commit transaction
D, [2014-12-29T16:33:32.306310 #14508] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 31]]
D, [2014-12-29T16:33:32.352312 #14508] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2014-12-29T16:33:32.443317 #14508] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 31]]
D, [2014-12-29T16:33:32.512321 #14508] DEBUG -- :   [1m[35mSQL (4.0ms)[0m  DELETE FROM "carts" WHERE "carts"."id" = ?  [["id", 31]]
D, [2014-12-29T16:33:32.711333 #14508] DEBUG -- :   [1m[36m (156.0ms)[0m  [1mcommit transaction[0m
I, [2014-12-29T16:33:34.502435 #14508]  INFO -- :   Rendered order_notifier/received.html.erb (1.0ms)
D, [2014-12-29T16:33:34.586440 #14508] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 35]]
D, [2014-12-29T16:33:34.677445 #14508] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2014-12-29T16:33:34.721448 #14508]  INFO -- :   Rendered line_items/_line_item.text.erb (86.0ms)
I, [2014-12-29T16:33:34.756450 #14508]  INFO -- :   Rendered order_notifier/received.text.erb (210.0ms)
I, [2014-12-29T16:33:35.781508 #14508]  INFO -- : 
Sent mail to simon.king65@gmail.com (815.0ms)
D, [2014-12-29T16:33:36.130528 #14508] DEBUG -- : Date: Mon, 29 Dec 2014 16:33:35 +0000
From: Simon King <simon.king65@gmail.com>
To: simon.king65@gmail.com
Message-ID: <54a1825f3c69_38ac550733c359ef@Simon-PC.mail>
Subject: King Clothing Order Confirmation
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_54a1825ec0bcc_38ac550733c35819";
 charset=UTF-8
Content-Transfer-Encoding: 7bit


----==_mimepart_54a1825ec0bcc_38ac550733c35819
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear s

Thank you for your recent order from King Clothing.

You ordered the following items:

 1 x Camo Print Tee
We'll send you a separate e-mail when your order ships.
----==_mimepart_54a1825ec0bcc_38ac550733c35819
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<h1>OrderNotifier#received</h1>

<p>
  , thank you for your order, we will email you again once your order has been despatched. We hope you enjoy wearing your King Clothing brand tee-shirt.
</p>

----==_mimepart_54a1825ec0bcc_38ac550733c35819--

I, [2014-12-29T16:33:36.171531 #14508]  INFO -- : Redirected to http://localhost:3000/
I, [2014-12-29T16:33:36.209533 #14508]  INFO -- : Completed 302 Found in 14627ms (ActiveRecord: 297.0ms)
D, [2014-12-29T16:33:36.274537 #14508] DEBUG -- : 
D, [2014-12-29T16:33:36.292538 #14508] DEBUG -- : 
I, [2014-12-29T16:33:36.330540 #14508]  INFO -- : Started GET "/" for 127.0.0.1 at 2014-12-29 16:33:36 +0000
I, [2014-12-29T16:33:36.409544 #14508]  INFO -- : Processing by StoreController#index as HTML
D, [2014-12-29T16:33:36.451547 #14508] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2014-12-29T16:33:36.559553 #14508] DEBUG -- :   [1m[36mSQL (7.0ms)[0m  [1mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Mon, 29 Dec 2014 16:33:36 UTC +00:00], ["updated_at", Mon, 29 Dec 2014 16:33:36 UTC +00:00]]
D, [2014-12-29T16:33:36.723562 #14508] DEBUG -- :   [1m[35m (127.0ms)[0m  commit transaction
D, [2014-12-29T16:33:36.810567 #14508] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2014-12-29T16:33:36.877571 #14508]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (4.0ms)
I, [2014-12-29T16:33:36.922574 #14508]  INFO -- :   Rendered store/index.html.erb within layouts/application (131.0ms)
D, [2014-12-29T16:33:37.117585 #14508] DEBUG -- :   [1m[35mLineItem Exists (1.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 32]]
D, [2014-12-29T16:33:37.201590 #14508] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 32]]
I, [2014-12-29T16:33:37.234592 #14508]  INFO -- :   Rendered collection (1.0ms)
I, [2014-12-29T16:33:37.293595 #14508]  INFO -- :   Rendered carts/_cart.html.erb (132.0ms)
I, [2014-12-29T16:33:37.355598 #14508]  INFO -- : Completed 200 OK in 906ms (Views: 581.0ms | ActiveRecord: 140.0ms)
D, [2014-12-29T16:33:37.663616 #14508] DEBUG -- : 
D, [2014-12-29T16:33:37.675617 #14508] DEBUG -- : 
I, [2014-12-29T16:33:37.711619 #14508]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-29 16:33:37 +0000
D, [2014-12-29T16:33:37.799624 #14508] DEBUG -- : 
D, [2014-12-29T16:33:37.813625 #14508] DEBUG -- : 
I, [2014-12-29T16:33:37.853627 #14508]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-29 16:33:37 +0000
D, [2014-12-29T16:33:37.945632 #14508] DEBUG -- : 
D, [2014-12-29T16:33:37.965633 #14508] DEBUG -- : 
I, [2014-12-29T16:33:38.017636 #14508]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-29 16:33:37 +0000
D, [2014-12-29T16:33:38.092641 #14508] DEBUG -- : 
D, [2014-12-29T16:33:38.116642 #14508] DEBUG -- : 
I, [2014-12-29T16:33:38.159644 #14508]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-29 16:33:38 +0000
D, [2014-12-29T16:33:38.227648 #14508] DEBUG -- : 
D, [2014-12-29T16:33:38.244649 #14508] DEBUG -- : 
I, [2014-12-29T16:33:38.289652 #14508]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-29 16:33:38 +0000
D, [2014-12-29T16:33:38.358656 #14508] DEBUG -- : 
D, [2014-12-29T16:33:38.376657 #14508] DEBUG -- : 
I, [2014-12-29T16:33:38.418659 #14508]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-29 16:33:38 +0000
D, [2014-12-29T16:33:38.487663 #14508] DEBUG -- : 
D, [2014-12-29T16:33:38.504664 #14508] DEBUG -- : 
I, [2014-12-29T16:33:38.550667 #14508]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-29 16:33:38 +0000
D, [2014-12-29T16:33:38.618671 #14508] DEBUG -- : 
D, [2014-12-29T16:33:38.633672 #14508] DEBUG -- : 
I, [2014-12-29T16:33:38.677674 #14508]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-29 16:33:38 +0000
D, [2014-12-29T16:33:38.747678 #14508] DEBUG -- : 
D, [2014-12-29T16:33:38.764679 #14508] DEBUG -- : 
I, [2014-12-29T16:33:38.802681 #14508]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-29 16:33:38 +0000
D, [2014-12-29T16:33:38.877686 #14508] DEBUG -- : 
D, [2014-12-29T16:33:38.894686 #14508] DEBUG -- : 
I, [2014-12-29T16:33:38.930689 #14508]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-29 16:33:38 +0000
D, [2014-12-29T16:33:38.997692 #14508] DEBUG -- : 
D, [2014-12-29T16:33:39.015693 #14508] DEBUG -- : 
I, [2014-12-29T16:33:39.060696 #14508]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-29 16:33:39 +0000
D, [2014-12-29T16:33:39.128700 #14508] DEBUG -- : 
D, [2014-12-29T16:33:39.151701 #14508] DEBUG -- : 
I, [2014-12-29T16:33:39.197704 #14508]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-29 16:33:39 +0000
D, [2014-12-29T16:33:39.257707 #14508] DEBUG -- : 
D, [2014-12-29T16:33:39.276708 #14508] DEBUG -- : 
I, [2014-12-29T16:33:39.315711 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-29 16:33:39 +0000
D, [2014-12-29T16:33:39.380714 #14508] DEBUG -- : 
D, [2014-12-29T16:33:39.396715 #14508] DEBUG -- : 
I, [2014-12-29T16:33:39.432717 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-29 16:33:39 +0000
D, [2014-12-29T16:33:39.499721 #14508] DEBUG -- : 
D, [2014-12-29T16:33:39.518722 #14508] DEBUG -- : 
I, [2014-12-29T16:33:39.565725 #14508]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-29 16:33:39 +0000
D, [2014-12-29T16:33:39.640729 #14508] DEBUG -- : 
D, [2014-12-29T16:33:39.659730 #14508] DEBUG -- : 
I, [2014-12-29T16:33:39.701733 #14508]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-29 16:33:39 +0000
D, [2014-12-29T16:33:39.763736 #14508] DEBUG -- : 
D, [2014-12-29T16:33:39.789738 #14508] DEBUG -- : 
I, [2014-12-29T16:33:39.835740 #14508]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-29 16:33:39 +0000
D, [2014-12-29T16:33:39.921745 #14508] DEBUG -- : 
D, [2014-12-29T16:33:39.941746 #14508] DEBUG -- : 
I, [2014-12-29T16:33:39.992749 #14508]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-29 16:33:39 +0000
D, [2014-12-29T16:33:40.050753 #14508] DEBUG -- : 
D, [2014-12-29T16:33:40.076754 #14508] DEBUG -- : 
I, [2014-12-29T16:33:40.123757 #14508]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-29 16:33:40 +0000
D, [2014-12-29T16:33:40.176760 #14508] DEBUG -- : 
D, [2014-12-29T16:33:40.196761 #14508] DEBUG -- : 
I, [2014-12-29T16:33:40.242764 #14508]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-29 16:33:40 +0000
D, [2014-12-29T16:33:40.311768 #14508] DEBUG -- : 
D, [2014-12-29T16:33:40.331769 #14508] DEBUG -- : 
I, [2014-12-29T16:33:40.382772 #14508]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-29 16:33:40 +0000
D, [2014-12-29T16:33:40.467776 #14508] DEBUG -- : 
D, [2014-12-29T16:33:40.490778 #14508] DEBUG -- : 
I, [2014-12-29T16:33:40.549781 #14508]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-29 16:33:40 +0000
D, [2014-12-29T16:33:40.619785 #14508] DEBUG -- : 
D, [2014-12-29T16:33:40.643787 #14508] DEBUG -- : 
I, [2014-12-29T16:33:40.708790 #14508]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-29 16:33:40 +0000
D, [2014-12-29T16:33:40.781794 #14508] DEBUG -- : 
D, [2014-12-29T16:33:40.808796 #14508] DEBUG -- : 
I, [2014-12-29T16:33:40.868799 #14508]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-29 16:33:40 +0000
D, [2014-12-29T16:33:40.944804 #14508] DEBUG -- : 
D, [2014-12-29T16:33:40.968805 #14508] DEBUG -- : 
I, [2014-12-29T16:33:41.031809 #14508]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-29 16:33:40 +0000
D, [2014-12-29T16:33:41.106813 #14508] DEBUG -- : 
D, [2014-12-29T16:33:41.129814 #14508] DEBUG -- : 
I, [2014-12-29T16:33:41.194818 #14508]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-29 16:33:41 +0000
D, [2014-12-29T16:33:41.285823 #14508] DEBUG -- : 
D, [2014-12-29T16:33:41.307824 #14508] DEBUG -- : 
I, [2014-12-29T16:33:41.361828 #14508]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-29 16:33:41 +0000
D, [2014-12-29T16:33:41.430832 #14508] DEBUG -- : 
D, [2014-12-29T16:33:41.454833 #14508] DEBUG -- : 
I, [2014-12-29T16:33:41.521837 #14508]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2014-12-29 16:33:41 +0000
D, [2014-12-29T16:33:41.589841 #14508] DEBUG -- : 
D, [2014-12-29T16:33:41.612842 #14508] DEBUG -- : 
I, [2014-12-29T16:33:41.679846 #14508]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2014-12-29 16:33:41 +0000
D, [2014-12-29T16:39:25.005661 #14508] DEBUG -- : 
D, [2014-12-29T16:39:25.021261 #14508] DEBUG -- : 
I, [2014-12-29T16:39:25.068061 #14508]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2014-12-29 16:39:25 +0000
I, [2014-12-29T16:39:25.146061 #14508]  INFO -- : Processing by LineItemsController#create as JS
I, [2014-12-29T16:39:25.192861 #14508]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2014-12-29T16:39:25.255261 #14508] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 32]]
D, [2014-12-29T16:39:25.317662 #14508] DEBUG -- :   [1m[36mProduct Load (15.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2014-12-29T16:39:25.395662 #14508] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 32]]
D, [2014-12-29T16:39:25.489262 #14508] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2014-12-29T16:39:25.520462 #14508] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2014-12-29T16:39:25.692062 #14508] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 32], ["created_at", Mon, 29 Dec 2014 16:39:25 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:4665a18,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Mon, 29 Dec 2014 16:39:25 UTC +00:00]]
D, [2014-12-29T16:39:25.879263 #14508] DEBUG -- :   [1m[35m (156.0ms)[0m  commit transaction
D, [2014-12-29T16:39:25.988463 #14508] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 32]]
I, [2014-12-29T16:39:26.050863 #14508]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2014-12-29T16:39:26.113263 #14508]  INFO -- :   Rendered carts/_cart.html.erb (171.6ms)
I, [2014-12-29T16:39:26.160063 #14508]  INFO -- :   Rendered line_items/create.js.erb (202.8ms)
I, [2014-12-29T16:39:26.206863 #14508]  INFO -- : Completed 200 OK in 967ms (Views: 265.2ms | ActiveRecord: 187.2ms)
D, [2014-12-29T16:39:29.312135 #14508] DEBUG -- : 
D, [2014-12-29T16:39:29.334136 #14508] DEBUG -- : 
I, [2014-12-29T16:39:29.382139 #14508]  INFO -- : Started GET "/orders/new" for 127.0.0.1 at 2014-12-29 16:39:29 +0000
I, [2014-12-29T16:39:29.469144 #14508]  INFO -- : Processing by OrdersController#new as HTML
D, [2014-12-29T16:39:29.545149 #14508] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 32]]
D, [2014-12-29T16:39:29.641154 #14508] DEBUG -- :   [1m[36mLineItem Exists (2.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 32]]
I, [2014-12-29T16:39:29.825165 #14508]  INFO -- :   Rendered orders/_form.html.erb (109.0ms)
I, [2014-12-29T16:39:29.873167 #14508]  INFO -- :   Rendered orders/new.html.erb within layouts/application (158.0ms)
D, [2014-12-29T16:39:30.079179 #14508] DEBUG -- :   [1m[35mCACHE (0.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 32]]
D, [2014-12-29T16:39:30.171184 #14508] DEBUG -- :   [1m[36mLineItem Load (3.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 32]]
D, [2014-12-29T16:39:30.295191 #14508] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2014-12-29T16:39:30.361195 #14508]  INFO -- :   Rendered line_items/_line_item.html.erb (129.0ms)
I, [2014-12-29T16:39:30.432199 #14508]  INFO -- :   Rendered carts/_cart.html.erb (296.0ms)
I, [2014-12-29T16:39:30.514204 #14508]  INFO -- : Completed 200 OK in 984ms (Views: 800.0ms | ActiveRecord: 9.0ms)
D, [2014-12-29T16:39:30.848223 #14508] DEBUG -- : 
D, [2014-12-29T16:39:30.871224 #14508] DEBUG -- : 
I, [2014-12-29T16:39:30.929228 #14508]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-29 16:39:30 +0000
D, [2014-12-29T16:39:30.994231 #14508] DEBUG -- : 
D, [2014-12-29T16:39:31.020233 #14508] DEBUG -- : 
I, [2014-12-29T16:39:31.091237 #14508]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-29 16:39:31 +0000
D, [2014-12-29T16:39:31.187242 #14508] DEBUG -- : 
D, [2014-12-29T16:39:31.234245 #14508] DEBUG -- : 
I, [2014-12-29T16:39:31.294249 #14508]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-29 16:39:31 +0000
D, [2014-12-29T16:39:31.375253 #14508] DEBUG -- : 
D, [2014-12-29T16:39:31.408255 #14508] DEBUG -- : 
I, [2014-12-29T16:39:31.472259 #14508]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-29 16:39:31 +0000
D, [2014-12-29T16:39:31.546263 #14508] DEBUG -- : 
D, [2014-12-29T16:39:31.571264 #14508] DEBUG -- : 
I, [2014-12-29T16:39:31.637268 #14508]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-29 16:39:31 +0000
D, [2014-12-29T16:39:31.712272 #14508] DEBUG -- : 
D, [2014-12-29T16:39:31.740274 #14508] DEBUG -- : 
I, [2014-12-29T16:39:31.810278 #14508]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-29 16:39:31 +0000
D, [2014-12-29T16:39:31.890283 #14508] DEBUG -- : 
D, [2014-12-29T16:39:31.917284 #14508] DEBUG -- : 
I, [2014-12-29T16:39:31.990288 #14508]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-29 16:39:31 +0000
D, [2014-12-29T16:39:32.066293 #14508] DEBUG -- : 
D, [2014-12-29T16:39:32.089294 #14508] DEBUG -- : 
I, [2014-12-29T16:39:32.149297 #14508]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-29 16:39:32 +0000
D, [2014-12-29T16:39:32.222302 #14508] DEBUG -- : 
D, [2014-12-29T16:39:32.248303 #14508] DEBUG -- : 
I, [2014-12-29T16:39:32.313307 #14508]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-29 16:39:32 +0000
D, [2014-12-29T16:39:32.384311 #14508] DEBUG -- : 
D, [2014-12-29T16:39:32.409312 #14508] DEBUG -- : 
I, [2014-12-29T16:39:32.475316 #14508]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-29 16:39:32 +0000
D, [2014-12-29T16:39:32.548320 #14508] DEBUG -- : 
D, [2014-12-29T16:39:32.571322 #14508] DEBUG -- : 
I, [2014-12-29T16:39:32.633325 #14508]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-29 16:39:32 +0000
D, [2014-12-29T16:39:32.713330 #14508] DEBUG -- : 
D, [2014-12-29T16:39:32.741331 #14508] DEBUG -- : 
I, [2014-12-29T16:39:32.810335 #14508]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-29 16:39:32 +0000
D, [2014-12-29T16:39:32.886340 #14508] DEBUG -- : 
D, [2014-12-29T16:39:32.912341 #14508] DEBUG -- : 
I, [2014-12-29T16:39:32.978345 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-29 16:39:32 +0000
D, [2014-12-29T16:39:33.056349 #14508] DEBUG -- : 
D, [2014-12-29T16:39:33.080351 #14508] DEBUG -- : 
I, [2014-12-29T16:39:33.142354 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-29 16:39:33 +0000
D, [2014-12-29T16:39:33.216359 #14508] DEBUG -- : 
D, [2014-12-29T16:39:33.242360 #14508] DEBUG -- : 
I, [2014-12-29T16:39:33.298363 #14508]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-29 16:39:33 +0000
D, [2014-12-29T16:39:33.375368 #14508] DEBUG -- : 
D, [2014-12-29T16:39:33.396369 #14508] DEBUG -- : 
I, [2014-12-29T16:39:33.450372 #14508]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-29 16:39:33 +0000
D, [2014-12-29T16:39:33.529376 #14508] DEBUG -- : 
D, [2014-12-29T16:39:33.554378 #14508] DEBUG -- : 
I, [2014-12-29T16:39:33.604381 #14508]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-29 16:39:33 +0000
D, [2014-12-29T16:39:33.678385 #14508] DEBUG -- : 
D, [2014-12-29T16:39:33.704386 #14508] DEBUG -- : 
I, [2014-12-29T16:39:33.758390 #14508]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-29 16:39:33 +0000
D, [2014-12-29T16:39:33.862395 #14508] DEBUG -- : 
D, [2014-12-29T16:39:33.882397 #14508] DEBUG -- : 
I, [2014-12-29T16:39:33.939400 #14508]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-29 16:39:33 +0000
D, [2014-12-29T16:39:34.021405 #14508] DEBUG -- : 
D, [2014-12-29T16:39:34.042406 #14508] DEBUG -- : 
I, [2014-12-29T16:39:34.097409 #14508]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-29 16:39:34 +0000
D, [2014-12-29T16:39:34.177413 #14508] DEBUG -- : 
D, [2014-12-29T16:39:34.199415 #14508] DEBUG -- : 
I, [2014-12-29T16:39:34.252418 #14508]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-29 16:39:34 +0000
D, [2014-12-29T16:39:34.337423 #14508] DEBUG -- : 
D, [2014-12-29T16:39:34.359424 #14508] DEBUG -- : 
I, [2014-12-29T16:39:34.414427 #14508]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-29 16:39:34 +0000
D, [2014-12-29T16:39:34.487431 #14508] DEBUG -- : 
D, [2014-12-29T16:39:34.508432 #14508] DEBUG -- : 
I, [2014-12-29T16:39:34.562436 #14508]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-29 16:39:34 +0000
D, [2014-12-29T16:39:34.636440 #14508] DEBUG -- : 
D, [2014-12-29T16:39:34.660441 #14508] DEBUG -- : 
I, [2014-12-29T16:39:34.715444 #14508]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-29 16:39:34 +0000
D, [2014-12-29T16:39:34.791449 #14508] DEBUG -- : 
D, [2014-12-29T16:39:34.813450 #14508] DEBUG -- : 
I, [2014-12-29T16:39:34.869453 #14508]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-29 16:39:34 +0000
D, [2014-12-29T16:39:34.943457 #14508] DEBUG -- : 
D, [2014-12-29T16:39:34.965459 #14508] DEBUG -- : 
I, [2014-12-29T16:39:35.021462 #14508]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-29 16:39:34 +0000
D, [2014-12-29T16:39:35.099466 #14508] DEBUG -- : 
D, [2014-12-29T16:39:35.117467 #14508] DEBUG -- : 
I, [2014-12-29T16:39:35.168470 #14508]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-29 16:39:35 +0000
D, [2014-12-29T16:39:47.296360 #14508] DEBUG -- : 
D, [2014-12-29T16:39:47.317361 #14508] DEBUG -- : 
I, [2014-12-29T16:39:47.367364 #14508]  INFO -- : Started POST "/orders" for 127.0.0.1 at 2014-12-29 16:39:47 +0000
I, [2014-12-29T16:39:47.462370 #14508]  INFO -- : Processing by OrdersController#create as HTML
I, [2014-12-29T16:39:47.583376 #14508]  INFO -- :   Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order"=>{"name"=>"s", "address"=>"s", "shipping_address1"=>"s", "email"=>"simon.king65@gmail.com", "pay_type"=>"Paypal"}, "commit"=>"Place Order"}
D, [2014-12-29T16:39:47.666381 #14508] DEBUG -- :   [1m[36mCart Load (3.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 32]]
I, [2014-12-29T16:39:47.694383 #14508]  INFO -- : log info
D, [2014-12-29T16:39:47.740385 #14508] DEBUG -- : Unpermitted parameters: shipping_address1
D, [2014-12-29T16:39:47.836391 #14508] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 32]]
I, [2014-12-29T16:39:47.892394 #14508]  INFO -- : just about to payment_method and save
I, [2014-12-29T16:39:48.010401 #14508]  INFO -- : #<Order id: nil, name: "s", address: "s", email: "simon.king65@gmail.com", pay_type: "Paypal", created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2014-12-29T16:39:48.049403 #14508] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2014-12-29T16:39:48.235414 #14508] DEBUG -- :   [1m[35mSQL (9.0ms)[0m  INSERT INTO "orders" ("address", "created_at", "email", "name", "pay_type", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "s"], ["created_at", Mon, 29 Dec 2014 16:39:48 UTC +00:00], ["email", "simon.king65@gmail.com"], ["name", "s"], ["pay_type", "Paypal"], ["updated_at", Mon, 29 Dec 2014 16:39:48 UTC +00:00]]
D, [2014-12-29T16:39:48.372422 #14508] DEBUG -- :   [1m[36mSQL (6.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 37[0m  [["cart_id", nil], ["order_id", 36], ["updated_at", Mon, 29 Dec 2014 16:39:48 UTC +00:00]]
I, [2014-12-29T16:39:48.406424 #14508]  INFO -- : about to @payment.create
D, [2014-12-29T16:39:48.501429 #14508] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2014-12-29T16:39:48.536431 #14508]  INFO -- : in order=
I, [2014-12-29T16:39:48.563433 #14508]  INFO -- : in payment.create
I, [2014-12-29T16:39:48.765444 #14508]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/36/confirm", "cancel_url"=>"http://localhost:3000/orders/36/cancel"}}
I, [2014-12-29T16:39:49.351478 #14508]  INFO -- : #<ActiveModel::Errors:0x000000058e8e88 @base=#<Payment:0x00000005afd2a0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005aeed68 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000599e760 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000599d978 @error=nil, @total="19.99", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000005997258 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005995e80 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000598c538 @error=nil, @return_url="http://localhost:3000/orders/36/confirm", @cancel_url="http://localhost:3000/orders/36/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000058e8e88 ...>>, @messages={}>
I, [2014-12-29T16:39:49.376479 #14508]  INFO -- : got past invalid
I, [2014-12-29T16:39:49.470484 #14508]  INFO -- : PayPal-Request-Id: 0ce28472-a424-4e90-bef3-431f22658940
I, [2014-12-29T16:39:49.514487 #14508]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2014-12-29T16:39:50.860564 #14508]  INFO -- : Response[201]: Created, Duration: 1.301s
I, [2014-12-29T16:39:50.904566 #14508]  INFO -- : back from super
I, [2014-12-29T16:39:51.435597 #14508]  INFO -- : {"id"=>"PAY-3V97855611827540GKSQYHVY", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99", "details"=>{"subtotal"=>"19.99"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/36/confirm", "cancel_url"=>"http://localhost:3000/orders/36/cancel"}, "create_time"=>"2014-12-29T16:39:51Z", "update_time"=>"2014-12-29T16:39:51Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-3V97855611827540GKSQYHVY", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-09H86916FG831443E", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-3V97855611827540GKSQYHVY/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2014-12-29T16:39:51.730614 #14508] DEBUG -- :   [1m[36mSQL (10.0ms)[0m  [1mUPDATE "orders" SET "name" = ?, "address" = ?, "email" = ?, "pay_type" = ?, "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ? WHERE "orders"."id" = 36[0m  [["name", "s"], ["address", "s"], ["email", "simon.king65@gmail.com"], ["pay_type", "Paypal"], ["created_at", Mon, 29 Dec 2014 16:39:48 UTC +00:00], ["updated_at", Mon, 29 Dec 2014 16:39:48 UTC +00:00], ["id", 36], ["payment_id", "PAY-3V97855611827540GKSQYHVY"], ["state", "created"]]
I, [2014-12-29T16:39:51.773616 #14508]  INFO -- : @payment save just done
I, [2014-12-29T16:39:52.930682 #14508]  INFO -- : #<Payment:0x00000005afd2a0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000004ab56b8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000004aafc18 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000004aaecf0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000004aacf18 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000004aac090 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000004aa53d0 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000004a92410 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000004a90bd8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000598c538 @error=nil, @return_url="http://localhost:3000/orders/36/confirm", @cancel_url="http://localhost:3000/orders/36/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000058e8e88 @base=#<Payment:0x00000005afd2a0 ...>, @messages={}>, @request_id="0ce28472-a424-4e90-bef3-431f22658940", @header={}, @id="PAY-3V97855611827540GKSQYHVY", @create_time="2014-12-29T16:39:51Z", @update_time="2014-12-29T16:39:51Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000004a59548 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3V97855611827540GKSQYHVY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000004a521f8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-09H86916FG831443E", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000004a50718 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3V97855611827540GKSQYHVY/execute", @rel="execute", @method="POST">]>
I, [2014-12-29T16:39:53.931740 #14508]  INFO -- : #<Payment:0x00000005afd2a0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000004ab56b8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000004aafc18 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000004aaecf0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000004aacf18 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000004aac090 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000004aa53d0 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000004a92410 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000004a90bd8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000598c538 @error=nil, @return_url="http://localhost:3000/orders/36/confirm", @cancel_url="http://localhost:3000/orders/36/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000058e8e88 @base=#<Payment:0x00000005afd2a0 ...>, @messages={}>, @request_id="0ce28472-a424-4e90-bef3-431f22658940", @header={}, @id="PAY-3V97855611827540GKSQYHVY", @create_time="2014-12-29T16:39:51Z", @update_time="2014-12-29T16:39:51Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000004a59548 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3V97855611827540GKSQYHVY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000004a521f8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-09H86916FG831443E", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000004a50718 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3V97855611827540GKSQYHVY/execute", @rel="execute", @method="POST">]>
D, [2014-12-29T16:39:54.077748 #14508] DEBUG -- :   [1m[35m (108.0ms)[0m  commit transaction
I, [2014-12-29T16:39:54.124751 #14508]  INFO -- : about to approve url
I, [2014-12-29T16:39:55.130808 #14508]  INFO -- : #<Payment:0x00000005afd2a0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000004ab56b8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000004aafc18 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000004aaecf0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000004aacf18 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000004aac090 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000004aa53d0 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000004a92410 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000004a90bd8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000598c538 @error=nil, @return_url="http://localhost:3000/orders/36/confirm", @cancel_url="http://localhost:3000/orders/36/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000058e8e88 @base=#<Payment:0x00000005afd2a0 ...>, @messages={}>, @request_id="0ce28472-a424-4e90-bef3-431f22658940", @header={}, @id="PAY-3V97855611827540GKSQYHVY", @create_time="2014-12-29T16:39:51Z", @update_time="2014-12-29T16:39:51Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000004a59548 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3V97855611827540GKSQYHVY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000004a521f8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-09H86916FG831443E", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000004a50718 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3V97855611827540GKSQYHVY/execute", @rel="execute", @method="POST">]>
I, [2014-12-29T16:39:56.132865 #14508]  INFO -- : #<Payment:0x00000005afd2a0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000004ab56b8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000004aafc18 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000004aaecf0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000004aacf18 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000004aac090 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000004aa53d0 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000004a92410 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000004a90bd8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000598c538 @error=nil, @return_url="http://localhost:3000/orders/36/confirm", @cancel_url="http://localhost:3000/orders/36/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000058e8e88 @base=#<Payment:0x00000005afd2a0 ...>, @messages={}>, @request_id="0ce28472-a424-4e90-bef3-431f22658940", @header={}, @id="PAY-3V97855611827540GKSQYHVY", @create_time="2014-12-29T16:39:51Z", @update_time="2014-12-29T16:39:51Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000004a59548 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3V97855611827540GKSQYHVY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000004a521f8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-09H86916FG831443E", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000004a50718 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3V97855611827540GKSQYHVY/execute", @rel="execute", @method="POST">]>
I, [2014-12-29T16:39:56.192869 #14508]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-09H86916FG831443E
I, [2014-12-29T16:39:57.187926 #14508]  INFO -- : #<Payment:0x00000005afd2a0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000004ab56b8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000004aafc18 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000004aaecf0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000004aacf18 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000004aac090 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000004aa53d0 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000004a92410 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000004a90bd8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000598c538 @error=nil, @return_url="http://localhost:3000/orders/36/confirm", @cancel_url="http://localhost:3000/orders/36/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000058e8e88 @base=#<Payment:0x00000005afd2a0 ...>, @messages={}>, @request_id="0ce28472-a424-4e90-bef3-431f22658940", @header={}, @id="PAY-3V97855611827540GKSQYHVY", @create_time="2014-12-29T16:39:51Z", @update_time="2014-12-29T16:39:51Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000004a59548 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3V97855611827540GKSQYHVY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000004a521f8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-09H86916FG831443E", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000004a50718 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3V97855611827540GKSQYHVY/execute", @rel="execute", @method="POST">]>
I, [2014-12-29T16:39:57.258930 #14508]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-09H86916FG831443E
I, [2014-12-29T16:39:57.300932 #14508]  INFO -- : Completed 302 Found in 9678ms (ActiveRecord: 141.0ms)
D, [2014-12-29T16:40:27.145639 #14508] DEBUG -- : 
D, [2014-12-29T16:40:27.166640 #14508] DEBUG -- : 
I, [2014-12-29T16:40:27.241645 #14508]  INFO -- : Started GET "/orders/36/confirm?paymentId=PAY-3V97855611827540GKSQYHVY&token=EC-09H86916FG831443E&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2014-12-29 16:40:27 +0000
I, [2014-12-29T16:40:27.327650 #14508]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2014-12-29T16:40:27.391653 #14508]  INFO -- :   Parameters: {"paymentId"=>"PAY-3V97855611827540GKSQYHVY", "token"=>"EC-09H86916FG831443E", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"36"}
D, [2014-12-29T16:40:27.457657 #14508] DEBUG -- :   [1m[36mUser Load (3.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2014-12-29T16:40:27.518661 #14508] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2014-12-29T16:40:27.591665 #14508] DEBUG -- :   [1m[36mOrder Load (1.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "36"]]
I, [2014-12-29T16:40:32.510946 #14508]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-3V97855611827540GKSQYHVY
I, [2014-12-29T16:40:33.598008 #14508]  INFO -- : Response[200]: OK, Duration: 1.055s
D, [2014-12-29T16:40:37.395226 #14508] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2014-12-29T16:40:37.515232 #14508] DEBUG -- :   [1m[36mSQL (6.0ms)[0m  [1mUPDATE "orders" SET "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 36[0m  [["shipping_address1", "1 Main Terrace"], ["updated_at", Mon, 29 Dec 2014 16:40:37 UTC +00:00]]
D, [2014-12-29T16:40:37.690242 #14508] DEBUG -- :   [1m[35m (138.0ms)[0m  commit transaction
I, [2014-12-29T16:40:37.861252 #14508]  INFO -- :   Rendered orders/_form.html.erb (105.0ms)
I, [2014-12-29T16:40:37.919255 #14508]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (163.0ms)
I, [2014-12-29T16:40:38.108266 #14508]  INFO -- : Completed 200 OK in 10676ms (Views: 374.0ms | ActiveRecord: 151.0ms)
D, [2014-12-29T16:40:38.481288 #14508] DEBUG -- : 
D, [2014-12-29T16:40:38.496288 #14508] DEBUG -- : 
I, [2014-12-29T16:40:38.542291 #14508]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-29 16:40:38 +0000
D, [2014-12-29T16:40:38.635296 #14508] DEBUG -- : 
D, [2014-12-29T16:40:38.650297 #14508] DEBUG -- : 
I, [2014-12-29T16:40:38.695300 #14508]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-29 16:40:38 +0000
D, [2014-12-29T16:40:38.787305 #14508] DEBUG -- : 
D, [2014-12-29T16:40:38.803306 #14508] DEBUG -- : 
I, [2014-12-29T16:40:38.848309 #14508]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-29 16:40:38 +0000
D, [2014-12-29T16:40:38.980316 #14508] DEBUG -- : 
D, [2014-12-29T16:40:39.013318 #14508] DEBUG -- : 
I, [2014-12-29T16:40:39.057321 #14508]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-29 16:40:39 +0000
D, [2014-12-29T16:40:39.130325 #14508] DEBUG -- : 
D, [2014-12-29T16:40:39.153326 #14508] DEBUG -- : 
I, [2014-12-29T16:40:39.196329 #14508]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-29 16:40:39 +0000
D, [2014-12-29T16:40:39.281333 #14508] DEBUG -- : 
D, [2014-12-29T16:40:39.302335 #14508] DEBUG -- : 
I, [2014-12-29T16:40:39.344337 #14508]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-29 16:40:39 +0000
D, [2014-12-29T16:40:39.421341 #14508] DEBUG -- : 
D, [2014-12-29T16:40:39.443343 #14508] DEBUG -- : 
I, [2014-12-29T16:40:39.487345 #14508]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-29 16:40:39 +0000
D, [2014-12-29T16:40:39.560349 #14508] DEBUG -- : 
D, [2014-12-29T16:40:39.580351 #14508] DEBUG -- : 
I, [2014-12-29T16:40:39.621353 #14508]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-29 16:40:39 +0000
D, [2014-12-29T16:40:39.698357 #14508] DEBUG -- : 
D, [2014-12-29T16:40:39.714358 #14508] DEBUG -- : 
I, [2014-12-29T16:40:39.758361 #14508]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-29 16:40:39 +0000
D, [2014-12-29T16:40:39.841365 #14508] DEBUG -- : 
D, [2014-12-29T16:40:39.857366 #14508] DEBUG -- : 
I, [2014-12-29T16:40:39.891368 #14508]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-29 16:40:39 +0000
D, [2014-12-29T16:40:39.971373 #14508] DEBUG -- : 
D, [2014-12-29T16:40:40.025376 #14508] DEBUG -- : 
I, [2014-12-29T16:40:40.081379 #14508]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-29 16:40:40 +0000
D, [2014-12-29T16:40:40.171384 #14508] DEBUG -- : 
D, [2014-12-29T16:40:40.203386 #14508] DEBUG -- : 
I, [2014-12-29T16:40:40.264390 #14508]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-29 16:40:40 +0000
D, [2014-12-29T16:40:40.338394 #14508] DEBUG -- : 
D, [2014-12-29T16:40:40.364395 #14508] DEBUG -- : 
I, [2014-12-29T16:40:40.428399 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-29 16:40:40 +0000
D, [2014-12-29T16:40:40.501403 #14508] DEBUG -- : 
D, [2014-12-29T16:40:40.528405 #14508] DEBUG -- : 
I, [2014-12-29T16:40:40.603409 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-29 16:40:40 +0000
D, [2014-12-29T16:40:40.676413 #14508] DEBUG -- : 
D, [2014-12-29T16:40:40.701415 #14508] DEBUG -- : 
I, [2014-12-29T16:40:40.767418 #14508]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-29 16:40:40 +0000
D, [2014-12-29T16:40:40.839423 #14508] DEBUG -- : 
D, [2014-12-29T16:40:40.863424 #14508] DEBUG -- : 
I, [2014-12-29T16:40:40.926427 #14508]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-29 16:40:40 +0000
D, [2014-12-29T16:40:41.001432 #14508] DEBUG -- : 
D, [2014-12-29T16:40:41.022433 #14508] DEBUG -- : 
I, [2014-12-29T16:40:41.069436 #14508]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-29 16:40:41 +0000
D, [2014-12-29T16:40:41.142440 #14508] DEBUG -- : 
D, [2014-12-29T16:40:41.170441 #14508] DEBUG -- : 
I, [2014-12-29T16:40:41.231445 #14508]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-29 16:40:41 +0000
D, [2014-12-29T16:40:41.307449 #14508] DEBUG -- : 
D, [2014-12-29T16:40:41.333451 #14508] DEBUG -- : 
I, [2014-12-29T16:40:41.405455 #14508]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-29 16:40:41 +0000
D, [2014-12-29T16:40:41.479459 #14508] DEBUG -- : 
D, [2014-12-29T16:40:41.502460 #14508] DEBUG -- : 
I, [2014-12-29T16:40:41.570464 #14508]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-29 16:40:41 +0000
D, [2014-12-29T16:40:41.642468 #14508] DEBUG -- : 
D, [2014-12-29T16:40:41.666470 #14508] DEBUG -- : 
I, [2014-12-29T16:40:41.731474 #14508]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-29 16:40:41 +0000
D, [2014-12-29T16:40:41.812478 #14508] DEBUG -- : 
D, [2014-12-29T16:40:41.838480 #14508] DEBUG -- : 
I, [2014-12-29T16:40:41.902483 #14508]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-29 16:40:41 +0000
D, [2014-12-29T16:40:41.979488 #14508] DEBUG -- : 
D, [2014-12-29T16:40:42.005489 #14508] DEBUG -- : 
I, [2014-12-29T16:40:42.072493 #14508]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-29 16:40:42 +0000
D, [2014-12-29T16:40:42.148497 #14508] DEBUG -- : 
D, [2014-12-29T16:40:42.173499 #14508] DEBUG -- : 
I, [2014-12-29T16:40:42.234502 #14508]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-29 16:40:42 +0000
D, [2014-12-29T16:40:42.311507 #14508] DEBUG -- : 
D, [2014-12-29T16:40:42.338508 #14508] DEBUG -- : 
I, [2014-12-29T16:40:42.406512 #14508]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-29 16:40:42 +0000
D, [2014-12-29T16:40:42.482516 #14508] DEBUG -- : 
D, [2014-12-29T16:40:42.509518 #14508] DEBUG -- : 
I, [2014-12-29T16:40:42.578522 #14508]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-29 16:40:42 +0000
D, [2014-12-29T16:40:42.654526 #14508] DEBUG -- : 
D, [2014-12-29T16:40:42.674527 #14508] DEBUG -- : 
I, [2014-12-29T16:40:42.726530 #14508]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-29 16:40:42 +0000
D, [2014-12-29T16:40:58.090389 #14508] DEBUG -- : 
D, [2014-12-29T16:40:58.114391 #14508] DEBUG -- : 
I, [2014-12-29T16:40:58.187395 #14508]  INFO -- : Started POST "/orders/36/execute/36/2VZ7YQDDDPPC4" for 127.0.0.1 at 2014-12-29 16:40:58 +0000
I, [2014-12-29T16:40:58.288400 #14508]  INFO -- : Processing by OrdersController#execute as HTML
I, [2014-12-29T16:40:58.379406 #14508]  INFO -- :   Parameters: {"authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order_id"=>"36", "payer_id"=>"2VZ7YQDDDPPC4"}
D, [2014-12-29T16:40:58.482412 #14508] DEBUG -- :   [1m[36mOrder Load (2.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "36"]]
I, [2014-12-29T16:41:05.027786 #14508]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-3V97855611827540GKSQYHVY
I, [2014-12-29T16:41:06.071846 #14508]  INFO -- : Response[200]: OK, Duration: 1.017s
I, [2014-12-29T16:41:06.128849 #14508]  INFO -- : PayPal-Request-Id: 3b329cc2-94f0-440e-9a89-42ad46ad8e1f
I, [2014-12-29T16:41:06.175852 #14508]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-3V97855611827540GKSQYHVY/execute
I, [2014-12-29T16:41:08.389978 #14508]  INFO -- : Response[200]: OK, Duration: 2.178s
D, [2014-12-29T16:41:08.445981 #14508] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2014-12-29T16:41:08.558988 #14508] DEBUG -- :   [1m[36mSQL (7.0ms)[0m  [1mUPDATE "orders" SET "state" = ?, "updated_at" = ? WHERE "orders"."id" = 36[0m  [["state", "approved"], ["updated_at", Mon, 29 Dec 2014 16:41:08 UTC +00:00]]
D, [2014-12-29T16:41:08.726998 #14508] DEBUG -- :   [1m[35m (128.0ms)[0m  commit transaction
D, [2014-12-29T16:41:08.797002 #14508] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 32]]
D, [2014-12-29T16:41:08.836004 #14508] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2014-12-29T16:41:08.921009 #14508] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 32]]
D, [2014-12-29T16:41:08.982012 #14508] DEBUG -- :   [1m[35mSQL (5.0ms)[0m  DELETE FROM "carts" WHERE "carts"."id" = ?  [["id", 32]]
D, [2014-12-29T16:41:09.154022 #14508] DEBUG -- :   [1m[36m (133.0ms)[0m  [1mcommit transaction[0m
I, [2014-12-29T16:41:11.189138 #14508]  INFO -- :   Rendered order_notifier/received.html.erb (1.0ms)
D, [2014-12-29T16:41:11.307145 #14508] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 36]]
D, [2014-12-29T16:41:11.436152 #14508] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2014-12-29T16:41:11.486155 #14508]  INFO -- :   Rendered line_items/_line_item.text.erb (123.0ms)
I, [2014-12-29T16:41:11.530158 #14508]  INFO -- :   Rendered order_notifier/received.text.erb (285.0ms)
I, [2014-12-29T16:41:13.313260 #14508]  INFO -- : 
Sent mail to simon.king65@gmail.com (1522.1ms)
D, [2014-12-29T16:41:13.710283 #14508] DEBUG -- : Date: Mon, 29 Dec 2014 16:41:11 +0000
From: Simon King <simon.king65@gmail.com>
To: simon.king65@gmail.com
Message-ID: <54a18427d1841_38ac5051644361c0@Simon-PC.mail>
Subject: King Clothing Order Confirmation
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_54a184278ab60_38ac50516443604a";
 charset=UTF-8
Content-Transfer-Encoding: 7bit


----==_mimepart_54a184278ab60_38ac50516443604a
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear s

Thank you for your recent order from King Clothing.

You ordered the following items:

 1 x Camo Print Tee
We'll send you a separate e-mail when your order ships.
----==_mimepart_54a184278ab60_38ac50516443604a
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<h1>OrderNotifier#received</h1>

<p>
  , thank you for your order, we will email you again once your order has been despatched. We hope you enjoy wearing your King Clothing brand tee-shirt.
</p>

----==_mimepart_54a184278ab60_38ac50516443604a--

I, [2014-12-29T16:41:13.754285 #14508]  INFO -- : Redirected to http://localhost:3000/
I, [2014-12-29T16:41:13.796287 #14508]  INFO -- : Completed 302 Found in 15375ms (ActiveRecord: 287.0ms)
D, [2014-12-29T16:41:13.882292 #14508] DEBUG -- : 
D, [2014-12-29T16:41:13.903294 #14508] DEBUG -- : 
I, [2014-12-29T16:41:13.943296 #14508]  INFO -- : Started GET "/" for 127.0.0.1 at 2014-12-29 16:41:13 +0000
I, [2014-12-29T16:41:14.030301 #14508]  INFO -- : Processing by StoreController#index as HTML
D, [2014-12-29T16:41:14.079304 #14508] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2014-12-29T16:41:14.199311 #14508] DEBUG -- :   [1m[36mSQL (8.0ms)[0m  [1mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Mon, 29 Dec 2014 16:41:14 UTC +00:00], ["updated_at", Mon, 29 Dec 2014 16:41:14 UTC +00:00]]
D, [2014-12-29T16:41:14.373320 #14508] DEBUG -- :   [1m[35m (136.0ms)[0m  commit transaction
D, [2014-12-29T16:41:14.474326 #14508] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2014-12-29T16:41:14.543330 #14508]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (6.0ms)
I, [2014-12-29T16:41:14.585333 #14508]  INFO -- :   Rendered store/index.html.erb within layouts/application (144.0ms)
D, [2014-12-29T16:41:14.826346 #14508] DEBUG -- :   [1m[35mLineItem Exists (2.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 33]]
D, [2014-12-29T16:41:14.911351 #14508] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 33]]
I, [2014-12-29T16:41:14.946353 #14508]  INFO -- :   Rendered collection (1.0ms)
I, [2014-12-29T16:41:15.013357 #14508]  INFO -- :   Rendered carts/_cart.html.erb (140.0ms)
I, [2014-12-29T16:41:15.089361 #14508]  INFO -- : Completed 200 OK in 1011ms (Views: 655.0ms | ActiveRecord: 152.0ms)
D, [2014-12-29T16:41:15.402379 #14508] DEBUG -- : 
D, [2014-12-29T16:41:15.431381 #14508] DEBUG -- : 
I, [2014-12-29T16:41:15.488384 #14508]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-29 16:41:15 +0000
D, [2014-12-29T16:41:15.579389 #14508] DEBUG -- : 
D, [2014-12-29T16:41:15.622392 #14508] DEBUG -- : 
I, [2014-12-29T16:41:15.682395 #14508]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-29 16:41:15 +0000
D, [2014-12-29T16:41:15.756400 #14508] DEBUG -- : 
D, [2014-12-29T16:41:15.775401 #14508] DEBUG -- : 
I, [2014-12-29T16:41:15.826404 #14508]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-29 16:41:15 +0000
D, [2014-12-29T16:41:15.902408 #14508] DEBUG -- : 
D, [2014-12-29T16:41:15.918409 #14508] DEBUG -- : 
I, [2014-12-29T16:41:15.965412 #14508]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-29 16:41:15 +0000
D, [2014-12-29T16:41:16.034415 #14508] DEBUG -- : 
D, [2014-12-29T16:41:16.059417 #14508] DEBUG -- : 
I, [2014-12-29T16:41:16.097419 #14508]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-29 16:41:16 +0000
D, [2014-12-29T16:41:16.176424 #14508] DEBUG -- : 
D, [2014-12-29T16:41:16.194425 #14508] DEBUG -- : 
I, [2014-12-29T16:41:16.238427 #14508]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-29 16:41:16 +0000
D, [2014-12-29T16:41:16.323432 #14508] DEBUG -- : 
D, [2014-12-29T16:41:16.341433 #14508] DEBUG -- : 
I, [2014-12-29T16:41:16.381435 #14508]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-29 16:41:16 +0000
D, [2014-12-29T16:41:16.454439 #14508] DEBUG -- : 
D, [2014-12-29T16:41:16.489441 #14508] DEBUG -- : 
I, [2014-12-29T16:41:16.532444 #14508]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-29 16:41:16 +0000
D, [2014-12-29T16:41:16.611448 #14508] DEBUG -- : 
D, [2014-12-29T16:41:16.626449 #14508] DEBUG -- : 
I, [2014-12-29T16:41:16.667452 #14508]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-29 16:41:16 +0000
D, [2014-12-29T16:41:16.744456 #14508] DEBUG -- : 
D, [2014-12-29T16:41:16.760457 #14508] DEBUG -- : 
I, [2014-12-29T16:41:16.802459 #14508]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-29 16:41:16 +0000
D, [2014-12-29T16:41:16.883464 #14508] DEBUG -- : 
D, [2014-12-29T16:41:16.898465 #14508] DEBUG -- : 
I, [2014-12-29T16:41:16.940467 #14508]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-29 16:41:16 +0000
D, [2014-12-29T16:41:17.022472 #14508] DEBUG -- : 
D, [2014-12-29T16:41:17.038473 #14508] DEBUG -- : 
I, [2014-12-29T16:41:17.081475 #14508]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-29 16:41:17 +0000
D, [2014-12-29T16:41:17.176481 #14508] DEBUG -- : 
D, [2014-12-29T16:41:17.196482 #14508] DEBUG -- : 
I, [2014-12-29T16:41:17.248485 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-29 16:41:17 +0000
D, [2014-12-29T16:41:17.331490 #14508] DEBUG -- : 
D, [2014-12-29T16:41:17.353491 #14508] DEBUG -- : 
I, [2014-12-29T16:41:17.411494 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-29 16:41:17 +0000
D, [2014-12-29T16:41:17.490499 #14508] DEBUG -- : 
D, [2014-12-29T16:41:17.515500 #14508] DEBUG -- : 
I, [2014-12-29T16:41:17.566503 #14508]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-29 16:41:17 +0000
D, [2014-12-29T16:41:17.649508 #14508] DEBUG -- : 
D, [2014-12-29T16:41:17.688510 #14508] DEBUG -- : 
I, [2014-12-29T16:41:17.739513 #14508]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-29 16:41:17 +0000
D, [2014-12-29T16:41:17.809517 #14508] DEBUG -- : 
D, [2014-12-29T16:41:17.823518 #14508] DEBUG -- : 
I, [2014-12-29T16:41:17.867520 #14508]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-29 16:41:17 +0000
D, [2014-12-29T16:41:17.941525 #14508] DEBUG -- : 
D, [2014-12-29T16:41:17.961526 #14508] DEBUG -- : 
I, [2014-12-29T16:41:18.005528 #14508]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-29 16:41:17 +0000
D, [2014-12-29T16:41:18.088533 #14508] DEBUG -- : 
D, [2014-12-29T16:41:18.106534 #14508] DEBUG -- : 
I, [2014-12-29T16:41:18.162537 #14508]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-29 16:41:18 +0000
D, [2014-12-29T16:41:18.239542 #14508] DEBUG -- : 
D, [2014-12-29T16:41:18.265543 #14508] DEBUG -- : 
I, [2014-12-29T16:41:18.315546 #14508]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-29 16:41:18 +0000
D, [2014-12-29T16:41:18.392550 #14508] DEBUG -- : 
D, [2014-12-29T16:41:18.411551 #14508] DEBUG -- : 
I, [2014-12-29T16:41:18.460554 #14508]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-29 16:41:18 +0000
D, [2014-12-29T16:41:18.529558 #14508] DEBUG -- : 
D, [2014-12-29T16:41:18.558560 #14508] DEBUG -- : 
I, [2014-12-29T16:41:18.610563 #14508]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-29 16:41:18 +0000
D, [2014-12-29T16:41:18.679567 #14508] DEBUG -- : 
D, [2014-12-29T16:41:18.697568 #14508] DEBUG -- : 
I, [2014-12-29T16:41:18.750571 #14508]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-29 16:41:18 +0000
D, [2014-12-29T16:41:18.821575 #14508] DEBUG -- : 
D, [2014-12-29T16:41:18.841576 #14508] DEBUG -- : 
I, [2014-12-29T16:41:18.890579 #14508]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-29 16:41:18 +0000
D, [2014-12-29T16:41:18.963583 #14508] DEBUG -- : 
D, [2014-12-29T16:41:18.984584 #14508] DEBUG -- : 
I, [2014-12-29T16:41:19.032587 #14508]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-29 16:41:18 +0000
D, [2014-12-29T16:41:19.105591 #14508] DEBUG -- : 
D, [2014-12-29T16:41:19.124592 #14508] DEBUG -- : 
I, [2014-12-29T16:41:19.172595 #14508]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-29 16:41:19 +0000
D, [2014-12-29T16:41:19.244599 #14508] DEBUG -- : 
D, [2014-12-29T16:41:19.270601 #14508] DEBUG -- : 
I, [2014-12-29T16:41:19.315603 #14508]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-29 16:41:19 +0000
D, [2014-12-29T16:41:19.383607 #14508] DEBUG -- : 
D, [2014-12-29T16:41:19.404608 #14508] DEBUG -- : 
I, [2014-12-29T16:41:19.454611 #14508]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2014-12-29 16:41:19 +0000
D, [2014-12-29T16:41:19.527615 #14508] DEBUG -- : 
D, [2014-12-29T16:41:19.544616 #14508] DEBUG -- : 
I, [2014-12-29T16:41:19.588619 #14508]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2014-12-29 16:41:19 +0000
D, [2014-12-29T21:26:13.415251 #3944] DEBUG -- : 
D, [2014-12-29T21:26:13.430851 #3944] DEBUG -- : 
I, [2014-12-29T21:26:13.493251 #3944]  INFO -- : Started GET "/" for 127.0.0.1 at 2014-12-29 21:26:13 +0000
D, [2014-12-29T21:26:14.452061 #3944] DEBUG -- :   [1m[36mActiveRecord::SchemaMigration Load (2.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
I, [2014-12-29T21:26:14.669564 #3944]  INFO -- : Processing by StoreController#index as HTML
D, [2014-12-29T21:26:14.827066 #3944] DEBUG -- :   [1m[35mCart Load (12.5ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 33]]
D, [2014-12-29T21:26:15.012069 #3944] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2014-12-29T21:26:15.137071 #3944]  INFO -- : Cache digest for store/index.html: a93d4e2e981ab3dfce98a095c3b6c059
I, [2014-12-29T21:26:15.219572 #3944]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (2.5ms)
I, [2014-12-29T21:26:15.282073 #3944]  INFO -- :   Rendered store/index.html.erb within layouts/application (305.0ms)
D, [2014-12-29T21:26:15.929583 #3944] DEBUG -- :   [1m[35mLineItem Exists (0.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 33]]
D, [2014-12-29T21:26:16.037085 #3944] DEBUG -- :   [1m[36mLineItem Load (2.5ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 33]]
I, [2014-12-29T21:26:16.079586 #3944]  INFO -- :   Rendered collection (0.0ms)
I, [2014-12-29T21:26:16.154587 #3944]  INFO -- :   Rendered carts/_cart.html.erb (157.5ms)
I, [2014-12-29T21:26:16.217088 #3944]  INFO -- : Completed 200 OK in 1485ms (Views: 1272.5ms | ActiveRecord: 27.5ms)
D, [2014-12-29T21:26:16.247088 #3944] DEBUG -- : 
D, [2014-12-29T21:26:16.272089 #3944] DEBUG -- : 
I, [2014-12-29T21:26:16.324589 #3944]  INFO -- : Started GET "/" for 127.0.0.1 at 2014-12-29 21:26:16 +0000
I, [2014-12-29T21:26:16.394590 #3944]  INFO -- : Processing by StoreController#index as HTML
D, [2014-12-29T21:26:16.472092 #3944] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 33]]
D, [2014-12-29T21:26:16.567093 #3944] DEBUG -- :   [1m[36mProduct Load (2.5ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2014-12-29T21:26:16.644594 #3944]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (2.5ms)
I, [2014-12-29T21:26:16.704595 #3944]  INFO -- :   Rendered store/index.html.erb within layouts/application (162.5ms)
D, [2014-12-29T21:26:16.814597 #3944] DEBUG -- :   [1m[35mLineItem Exists (2.5ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 33]]
D, [2014-12-29T21:26:16.907098 #3944] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 33]]
I, [2014-12-29T21:26:16.947099 #3944]  INFO -- :   Rendered collection (0.0ms)
I, [2014-12-29T21:26:16.992100 #3944]  INFO -- :   Rendered carts/_cart.html.erb (130.0ms)
I, [2014-12-29T21:26:17.042100 #3944]  INFO -- : Completed 200 OK in 600ms (Views: 517.5ms | ActiveRecord: 5.0ms)
D, [2014-12-29T21:26:17.354605 #3944] DEBUG -- : 
D, [2014-12-29T21:26:17.374605 #3944] DEBUG -- : 
I, [2014-12-29T21:26:17.424606 #3944]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:17 +0000
D, [2014-12-29T21:26:17.467107 #3944] DEBUG -- : 
D, [2014-12-29T21:26:17.479607 #3944] DEBUG -- : 
I, [2014-12-29T21:26:17.512108 #3944]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:17 +0000
D, [2014-12-29T21:26:17.552108 #3944] DEBUG -- : 
D, [2014-12-29T21:26:17.564608 #3944] DEBUG -- : 
I, [2014-12-29T21:26:17.599609 #3944]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:17 +0000
D, [2014-12-29T21:26:17.647110 #3944] DEBUG -- : 
D, [2014-12-29T21:26:17.664610 #3944] DEBUG -- : 
I, [2014-12-29T21:26:17.709611 #3944]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:17 +0000
D, [2014-12-29T21:26:17.749611 #3944] DEBUG -- : 
D, [2014-12-29T21:26:17.764611 #3944] DEBUG -- : 
I, [2014-12-29T21:26:17.802112 #3944]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:17 +0000
D, [2014-12-29T21:26:17.842113 #3944] DEBUG -- : 
D, [2014-12-29T21:26:17.854613 #3944] DEBUG -- : 
I, [2014-12-29T21:26:17.892113 #3944]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:17 +0000
D, [2014-12-29T21:26:17.929614 #3944] DEBUG -- : 
D, [2014-12-29T21:26:17.942114 #3944] DEBUG -- : 
I, [2014-12-29T21:26:17.977115 #3944]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:17 +0000
D, [2014-12-29T21:26:18.009615 #3944] DEBUG -- : 
D, [2014-12-29T21:26:18.022115 #3944] DEBUG -- : 
I, [2014-12-29T21:26:18.059616 #3944]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:18 +0000
D, [2014-12-29T21:26:18.094616 #3944] DEBUG -- : 
D, [2014-12-29T21:26:18.107117 #3944] DEBUG -- : 
I, [2014-12-29T21:26:18.147117 #3944]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:18 +0000
D, [2014-12-29T21:26:18.182118 #3944] DEBUG -- : 
D, [2014-12-29T21:26:18.197118 #3944] DEBUG -- : 
I, [2014-12-29T21:26:18.232119 #3944]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:18 +0000
D, [2014-12-29T21:26:18.267119 #3944] DEBUG -- : 
D, [2014-12-29T21:26:18.279619 #3944] DEBUG -- : 
I, [2014-12-29T21:26:18.319620 #3944]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:18 +0000
D, [2014-12-29T21:26:18.382121 #3944] DEBUG -- : 
D, [2014-12-29T21:26:18.397121 #3944] DEBUG -- : 
I, [2014-12-29T21:26:18.434622 #3944]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:18 +0000
D, [2014-12-29T21:26:18.474622 #3944] DEBUG -- : 
D, [2014-12-29T21:26:18.487122 #3944] DEBUG -- : 
I, [2014-12-29T21:26:18.519623 #3944]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:18 +0000
D, [2014-12-29T21:26:18.564624 #3944] DEBUG -- : 
D, [2014-12-29T21:26:18.577124 #3944] DEBUG -- : 
I, [2014-12-29T21:26:18.617124 #3944]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:18 +0000
D, [2014-12-29T21:26:18.662125 #3944] DEBUG -- : 
D, [2014-12-29T21:26:18.674625 #3944] DEBUG -- : 
I, [2014-12-29T21:26:18.709626 #3944]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:18 +0000
D, [2014-12-29T21:26:18.747126 #3944] DEBUG -- : 
D, [2014-12-29T21:26:18.762127 #3944] DEBUG -- : 
I, [2014-12-29T21:26:18.797127 #3944]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:18 +0000
D, [2014-12-29T21:26:18.832128 #3944] DEBUG -- : 
D, [2014-12-29T21:26:18.849628 #3944] DEBUG -- : 
I, [2014-12-29T21:26:18.892129 #3944]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:18 +0000
D, [2014-12-29T21:26:18.927129 #3944] DEBUG -- : 
D, [2014-12-29T21:26:18.939629 #3944] DEBUG -- : 
I, [2014-12-29T21:26:18.974630 #3944]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:18 +0000
D, [2014-12-29T21:26:19.007130 #3944] DEBUG -- : 
D, [2014-12-29T21:26:19.022131 #3944] DEBUG -- : 
I, [2014-12-29T21:26:19.057131 #3944]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:19 +0000
D, [2014-12-29T21:26:19.094632 #3944] DEBUG -- : 
D, [2014-12-29T21:26:19.107132 #3944] DEBUG -- : 
I, [2014-12-29T21:26:19.139632 #3944]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:19 +0000
D, [2014-12-29T21:26:19.239634 #3944] DEBUG -- : 
D, [2014-12-29T21:26:19.254634 #3944] DEBUG -- : 
I, [2014-12-29T21:26:19.289635 #3944]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:19 +0000
D, [2014-12-29T21:26:19.324635 #3944] DEBUG -- : 
D, [2014-12-29T21:26:19.337135 #3944] DEBUG -- : 
I, [2014-12-29T21:26:19.372136 #3944]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:19 +0000
D, [2014-12-29T21:26:19.407137 #3944] DEBUG -- : 
D, [2014-12-29T21:26:19.419637 #3944] DEBUG -- : 
I, [2014-12-29T21:26:19.457137 #3944]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:19 +0000
D, [2014-12-29T21:26:19.492138 #3944] DEBUG -- : 
D, [2014-12-29T21:26:19.507138 #3944] DEBUG -- : 
I, [2014-12-29T21:26:19.542139 #3944]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:19 +0000
D, [2014-12-29T21:26:19.574639 #3944] DEBUG -- : 
D, [2014-12-29T21:26:19.587139 #3944] DEBUG -- : 
I, [2014-12-29T21:26:19.622140 #3944]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:19 +0000
D, [2014-12-29T21:26:19.654640 #3944] DEBUG -- : 
D, [2014-12-29T21:26:19.669641 #3944] DEBUG -- : 
I, [2014-12-29T21:26:19.704641 #3944]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:19 +0000
D, [2014-12-29T21:26:19.789642 #3944] DEBUG -- : 
D, [2014-12-29T21:26:19.817143 #3944] DEBUG -- : 
I, [2014-12-29T21:26:19.864644 #3944]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-29 21:26:19 +0000
D, [2014-12-29T21:26:19.899644 #3944] DEBUG -- : 
D, [2014-12-29T21:26:19.914644 #3944] DEBUG -- : 
I, [2014-12-29T21:26:19.947145 #3944]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2014-12-29 21:26:19 +0000
D, [2014-12-29T21:26:19.982145 #3944] DEBUG -- : 
D, [2014-12-29T21:26:19.999646 #3944] DEBUG -- : 
I, [2014-12-29T21:26:20.027146 #3944]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2014-12-29 21:26:19 +0000
D, [2014-12-29T21:26:20.062147 #3944] DEBUG -- : 
D, [2014-12-29T21:26:20.072147 #3944] DEBUG -- : 
I, [2014-12-29T21:26:20.102147 #3944]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2014-12-29 21:26:20 +0000
D, [2014-12-29T21:26:37.042503 #3944] DEBUG -- : 
D, [2014-12-29T21:26:37.058103 #3944] DEBUG -- : 
I, [2014-12-29T21:26:37.120503 #3944]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2014-12-29 21:26:37 +0000
I, [2014-12-29T21:26:37.198503 #3944]  INFO -- : Processing by LineItemsController#create as JS
I, [2014-12-29T21:26:37.260903 #3944]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2014-12-29T21:26:37.322703 #3944] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 33]]
D, [2014-12-29T21:26:37.400704 #3944] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2014-12-29T21:26:37.494304 #3944] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 33]]
D, [2014-12-29T21:26:37.665904 #3944] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2014-12-29T21:26:37.712704 #3944] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2014-12-29T21:26:37.915504 #3944] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 33], ["created_at", Mon, 29 Dec 2014 21:26:37 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:84fe388,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Mon, 29 Dec 2014 21:26:37 UTC +00:00]]
D, [2014-12-29T21:26:38.149505 #3944] DEBUG -- :   [1m[35m (202.8ms)[0m  commit transaction
D, [2014-12-29T21:26:38.243105 #3944] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 33]]
I, [2014-12-29T21:26:38.305505 #3944]  INFO -- :   Rendered line_items/_line_item.html.erb (0.0ms)
I, [2014-12-29T21:26:38.336705 #3944]  INFO -- :   Rendered carts/_cart.html.erb (140.4ms)
I, [2014-12-29T21:26:38.383505 #3944]  INFO -- :   Rendered line_items/create.js.erb (171.6ms)
I, [2014-12-29T21:26:38.430305 #3944]  INFO -- : Completed 200 OK in 1123ms (Views: 234.0ms | ActiveRecord: 218.4ms)
D, [2014-12-29T21:26:48.275839 #3944] DEBUG -- : 
D, [2014-12-29T21:26:48.300839 #3944] DEBUG -- : 
I, [2014-12-29T21:26:48.358340 #3944]  INFO -- : Started GET "/orders/new" for 127.0.0.1 at 2014-12-29 21:26:48 +0000
I, [2014-12-29T21:26:48.440841 #3944]  INFO -- : Processing by OrdersController#new as HTML
D, [2014-12-29T21:26:48.520842 #3944] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 33]]
D, [2014-12-29T21:26:48.613344 #3944] DEBUG -- :   [1m[36mLineItem Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 33]]
I, [2014-12-29T21:26:48.848347 #3944]  INFO -- :   Rendered orders/_form.html.erb (157.5ms)
I, [2014-12-29T21:26:48.905848 #3944]  INFO -- :   Rendered orders/new.html.erb within layouts/application (202.5ms)
D, [2014-12-29T21:26:49.008350 #3944] DEBUG -- :   [1m[35mCACHE (0.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 33]]
D, [2014-12-29T21:26:49.100851 #3944] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 33]]
D, [2014-12-29T21:26:49.200853 #3944] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2014-12-29T21:26:49.250854 #3944]  INFO -- :   Rendered line_items/_line_item.html.erb (97.5ms)
I, [2014-12-29T21:26:49.298354 #3944]  INFO -- :   Rendered carts/_cart.html.erb (240.0ms)
I, [2014-12-29T21:26:49.358355 #3944]  INFO -- : Completed 200 OK in 860ms (Views: 665.0ms | ActiveRecord: 2.5ms)
D, [2014-12-29T21:26:49.650860 #3944] DEBUG -- : 
D, [2014-12-29T21:26:49.673360 #3944] DEBUG -- : 
I, [2014-12-29T21:26:49.733361 #3944]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:49 +0000
D, [2014-12-29T21:26:49.775862 #3944] DEBUG -- : 
D, [2014-12-29T21:26:49.798362 #3944] DEBUG -- : 
I, [2014-12-29T21:26:49.860863 #3944]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:49 +0000
D, [2014-12-29T21:26:49.905864 #3944] DEBUG -- : 
D, [2014-12-29T21:26:49.930864 #3944] DEBUG -- : 
I, [2014-12-29T21:26:49.998365 #3944]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:49 +0000
D, [2014-12-29T21:26:50.040866 #3944] DEBUG -- : 
D, [2014-12-29T21:26:50.065866 #3944] DEBUG -- : 
I, [2014-12-29T21:26:50.128367 #3944]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:50 +0000
D, [2014-12-29T21:26:50.170868 #3944] DEBUG -- : 
D, [2014-12-29T21:26:50.193368 #3944] DEBUG -- : 
I, [2014-12-29T21:26:50.270869 #3944]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:50 +0000
D, [2014-12-29T21:26:50.313370 #3944] DEBUG -- : 
D, [2014-12-29T21:26:50.338370 #3944] DEBUG -- : 
I, [2014-12-29T21:26:50.403371 #3944]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:50 +0000
D, [2014-12-29T21:26:50.448372 #3944] DEBUG -- : 
D, [2014-12-29T21:26:50.473372 #3944] DEBUG -- : 
I, [2014-12-29T21:26:50.540873 #3944]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:50 +0000
D, [2014-12-29T21:26:50.583374 #3944] DEBUG -- : 
D, [2014-12-29T21:26:50.605874 #3944] DEBUG -- : 
I, [2014-12-29T21:26:50.668375 #3944]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:50 +0000
D, [2014-12-29T21:26:50.715876 #3944] DEBUG -- : 
D, [2014-12-29T21:26:50.743376 #3944] DEBUG -- : 
I, [2014-12-29T21:26:50.810878 #3944]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:50 +0000
D, [2014-12-29T21:26:50.855878 #3944] DEBUG -- : 
D, [2014-12-29T21:26:50.878379 #3944] DEBUG -- : 
I, [2014-12-29T21:26:50.940879 #3944]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:50 +0000
D, [2014-12-29T21:26:50.983380 #3944] DEBUG -- : 
D, [2014-12-29T21:26:51.005880 #3944] DEBUG -- : 
I, [2014-12-29T21:26:51.068381 #3944]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:51 +0000
D, [2014-12-29T21:26:51.115882 #3944] DEBUG -- : 
D, [2014-12-29T21:26:51.140883 #3944] DEBUG -- : 
I, [2014-12-29T21:26:51.203384 #3944]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:51 +0000
D, [2014-12-29T21:26:51.243384 #3944] DEBUG -- : 
D, [2014-12-29T21:26:51.263384 #3944] DEBUG -- : 
I, [2014-12-29T21:26:51.330885 #3944]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:51 +0000
D, [2014-12-29T21:26:51.375886 #3944] DEBUG -- : 
D, [2014-12-29T21:26:51.398387 #3944] DEBUG -- : 
I, [2014-12-29T21:26:51.465888 #3944]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:51 +0000
D, [2014-12-29T21:26:51.513388 #3944] DEBUG -- : 
D, [2014-12-29T21:26:51.538389 #3944] DEBUG -- : 
I, [2014-12-29T21:26:51.608390 #3944]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:51 +0000
D, [2014-12-29T21:26:51.653390 #3944] DEBUG -- : 
D, [2014-12-29T21:26:51.678391 #3944] DEBUG -- : 
I, [2014-12-29T21:26:51.740892 #3944]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:51 +0000
D, [2014-12-29T21:26:51.780892 #3944] DEBUG -- : 
D, [2014-12-29T21:26:51.803393 #3944] DEBUG -- : 
I, [2014-12-29T21:26:51.863394 #3944]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:51 +0000
D, [2014-12-29T21:26:51.903394 #3944] DEBUG -- : 
D, [2014-12-29T21:26:51.928395 #3944] DEBUG -- : 
I, [2014-12-29T21:26:51.990896 #3944]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:51 +0000
D, [2014-12-29T21:26:52.045896 #3944] DEBUG -- : 
D, [2014-12-29T21:26:52.070897 #3944] DEBUG -- : 
I, [2014-12-29T21:26:52.135898 #3944]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:52 +0000
D, [2014-12-29T21:26:52.178398 #3944] DEBUG -- : 
D, [2014-12-29T21:26:52.200899 #3944] DEBUG -- : 
I, [2014-12-29T21:26:52.260900 #3944]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:52 +0000
D, [2014-12-29T21:26:52.305900 #3944] DEBUG -- : 
D, [2014-12-29T21:26:52.333401 #3944] DEBUG -- : 
I, [2014-12-29T21:26:52.400902 #3944]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:52 +0000
D, [2014-12-29T21:26:52.443403 #3944] DEBUG -- : 
D, [2014-12-29T21:26:52.465903 #3944] DEBUG -- : 
I, [2014-12-29T21:26:52.528404 #3944]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:52 +0000
D, [2014-12-29T21:26:52.573405 #3944] DEBUG -- : 
D, [2014-12-29T21:26:52.595905 #3944] DEBUG -- : 
I, [2014-12-29T21:26:52.658406 #3944]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:52 +0000
D, [2014-12-29T21:26:52.703406 #3944] DEBUG -- : 
D, [2014-12-29T21:26:52.728407 #3944] DEBUG -- : 
I, [2014-12-29T21:26:52.790908 #3944]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:52 +0000
D, [2014-12-29T21:26:52.835909 #3944] DEBUG -- : 
D, [2014-12-29T21:26:52.860909 #3944] DEBUG -- : 
I, [2014-12-29T21:26:52.925910 #3944]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:52 +0000
D, [2014-12-29T21:26:52.968411 #3944] DEBUG -- : 
D, [2014-12-29T21:26:52.988411 #3944] DEBUG -- : 
I, [2014-12-29T21:26:53.048412 #3944]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:52 +0000
D, [2014-12-29T21:26:53.098413 #3944] DEBUG -- : 
D, [2014-12-29T21:26:53.123413 #3944] DEBUG -- : 
I, [2014-12-29T21:26:53.185914 #3944]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-29 21:26:53 +0000
D, [2014-12-29T21:27:12.754368 #3944] DEBUG -- : 
D, [2014-12-29T21:27:12.781869 #3944] DEBUG -- : 
I, [2014-12-29T21:27:12.839370 #3944]  INFO -- : Started POST "/orders" for 127.0.0.1 at 2014-12-29 21:27:12 +0000
I, [2014-12-29T21:27:12.914371 #3944]  INFO -- : Processing by OrdersController#create as HTML
I, [2014-12-29T21:27:13.064373 #3944]  INFO -- :   Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order"=>{"name"=>"s", "address"=>"s", "shipping_address1"=>"s", "email"=>"simon.king65@gmail.com", "pay_type"=>"Paypal"}, "commit"=>"Place Order"}
D, [2014-12-29T21:27:13.146874 #3944] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 33]]
I, [2014-12-29T21:27:13.179375 #3944]  INFO -- : log info
D, [2014-12-29T21:27:13.226876 #3944] DEBUG -- : Unpermitted parameters: shipping_address1
D, [2014-12-29T21:27:13.321877 #3944] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 33]]
I, [2014-12-29T21:27:13.374378 #3944]  INFO -- : just about to payment_method and save
I, [2014-12-29T21:27:13.519380 #3944]  INFO -- : #<Order id: nil, name: "s", address: "s", email: "simon.king65@gmail.com", pay_type: "Paypal", created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2014-12-29T21:27:13.566881 #3944] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2014-12-29T21:27:13.776884 #3944] DEBUG -- :   [1m[35mSQL (5.0ms)[0m  INSERT INTO "orders" ("address", "created_at", "email", "name", "pay_type", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "s"], ["created_at", Mon, 29 Dec 2014 21:27:13 UTC +00:00], ["email", "simon.king65@gmail.com"], ["name", "s"], ["pay_type", "Paypal"], ["updated_at", Mon, 29 Dec 2014 21:27:13 UTC +00:00]]
D, [2014-12-29T21:27:13.919386 #3944] DEBUG -- :   [1m[36mSQL (2.5ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 38[0m  [["cart_id", nil], ["order_id", 37], ["updated_at", Mon, 29 Dec 2014 21:27:13 UTC +00:00]]
I, [2014-12-29T21:27:13.959387 #3944]  INFO -- : about to @payment.create
D, [2014-12-29T21:27:14.104389 #3944] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2014-12-29T21:27:14.141890 #3944]  INFO -- : in order=
I, [2014-12-29T21:27:14.176890 #3944]  INFO -- : in payment.create
I, [2014-12-29T21:27:14.414394 #3944]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/37/confirm", "cancel_url"=>"http://localhost:3000/orders/37/cancel"}}
I, [2014-12-29T21:27:15.137905 #3944]  INFO -- : #<ActiveModel::Errors:0x0000000a07bf20 @base=#<Payment:0x0000000a0c5198 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000a0c4fb8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a0a62e8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a0a6220 @error=nil, @total="19.99", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a0a5f00 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a0a57a8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000a0a4dd0 @error=nil, @return_url="http://localhost:3000/orders/37/confirm", @cancel_url="http://localhost:3000/orders/37/cancel">, @logger=#<Logger:0x00000005a598f8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a59970 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a5abb8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a5aeb0 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a5b1a8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000a07bf20 ...>>, @messages={}>
I, [2014-12-29T21:27:15.175405 #3944]  INFO -- : got past invalid
I, [2014-12-29T21:27:15.312908 #3944]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/oauth2/token
D, [2014-12-29T21:32:27.870577 #3944] DEBUG -- :   [1m[36m (125.0ms)[0m  [1mcommit transaction[0m
I, [2014-12-29T21:32:27.918078 #3944]  INFO -- : Completed   in 314806ms
D, [2014-12-29T21:34:00.397073 #17280] DEBUG -- : 
D, [2014-12-29T21:34:00.414573 #17280] DEBUG -- : 
I, [2014-12-29T21:34:00.462074 #17280]  INFO -- : Started GET "/" for 127.0.0.1 at 2014-12-29 21:34:00 +0000
D, [2014-12-29T21:34:01.427089 #17280] DEBUG -- :   [1m[36mActiveRecord::SchemaMigration Load (2.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
I, [2014-12-29T21:34:01.642092 #17280]  INFO -- : Processing by StoreController#index as HTML
D, [2014-12-29T21:34:01.784594 #17280] DEBUG -- :   [1m[35mCart Load (12.5ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 33]]
D, [2014-12-29T21:34:01.957097 #17280] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2014-12-29T21:34:02.077099 #17280]  INFO -- : Cache digest for store/index.html: a93d4e2e981ab3dfce98a095c3b6c059
I, [2014-12-29T21:34:02.142100 #17280]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (2.5ms)
I, [2014-12-29T21:34:02.189600 #17280]  INFO -- :   Rendered store/index.html.erb within layouts/application (262.5ms)
D, [2014-12-29T21:34:02.844610 #17280] DEBUG -- :   [1m[35mLineItem Exists (0.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 33]]
D, [2014-12-29T21:34:02.934612 #17280] DEBUG -- :   [1m[36mLineItem Load (2.5ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 33]]
I, [2014-12-29T21:34:02.967112 #17280]  INFO -- :   Rendered collection (0.0ms)
I, [2014-12-29T21:34:03.024613 #17280]  INFO -- :   Rendered carts/_cart.html.erb (130.0ms)
I, [2014-12-29T21:34:03.072114 #17280]  INFO -- : Completed 200 OK in 1383ms (Views: 1190.0ms | ActiveRecord: 20.0ms)
D, [2014-12-29T21:34:03.327118 #17280] DEBUG -- : 
D, [2014-12-29T21:34:03.347118 #17280] DEBUG -- : 
I, [2014-12-29T21:34:03.407119 #17280]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-29 21:34:03 +0000
D, [2014-12-29T21:34:03.449620 #17280] DEBUG -- : 
D, [2014-12-29T21:34:03.467120 #17280] DEBUG -- : 
I, [2014-12-29T21:34:03.507121 #17280]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-29 21:34:03 +0000
D, [2014-12-29T21:34:03.547121 #17280] DEBUG -- : 
D, [2014-12-29T21:34:03.562121 #17280] DEBUG -- : 
I, [2014-12-29T21:34:03.602122 #17280]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-29 21:34:03 +0000
D, [2014-12-29T21:34:03.642123 #17280] DEBUG -- : 
D, [2014-12-29T21:34:03.659623 #17280] DEBUG -- : 
I, [2014-12-29T21:34:03.704624 #17280]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-29 21:34:03 +0000
D, [2014-12-29T21:34:03.744624 #17280] DEBUG -- : 
D, [2014-12-29T21:34:03.759624 #17280] DEBUG -- : 
I, [2014-12-29T21:34:03.802125 #17280]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-29 21:34:03 +0000
D, [2014-12-29T21:34:03.842126 #17280] DEBUG -- : 
D, [2014-12-29T21:34:03.859626 #17280] DEBUG -- : 
I, [2014-12-29T21:34:03.902127 #17280]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-29 21:34:03 +0000
D, [2014-12-29T21:34:03.939627 #17280] DEBUG -- : 
D, [2014-12-29T21:34:03.957127 #17280] DEBUG -- : 
I, [2014-12-29T21:34:04.004628 #17280]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-29 21:34:03 +0000
D, [2014-12-29T21:34:04.047129 #17280] DEBUG -- : 
D, [2014-12-29T21:34:04.062129 #17280] DEBUG -- : 
I, [2014-12-29T21:34:04.107130 #17280]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-29 21:34:04 +0000
D, [2014-12-29T21:34:04.149630 #17280] DEBUG -- : 
D, [2014-12-29T21:34:04.167131 #17280] DEBUG -- : 
I, [2014-12-29T21:34:04.212131 #17280]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-29 21:34:04 +0000
D, [2014-12-29T21:34:04.254632 #17280] DEBUG -- : 
D, [2014-12-29T21:34:04.274632 #17280] DEBUG -- : 
I, [2014-12-29T21:34:04.322133 #17280]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-29 21:34:04 +0000
D, [2014-12-29T21:34:04.362134 #17280] DEBUG -- : 
D, [2014-12-29T21:34:04.387134 #17280] DEBUG -- : 
I, [2014-12-29T21:34:04.454635 #17280]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-29 21:34:04 +0000
D, [2014-12-29T21:34:04.544636 #17280] DEBUG -- : 
D, [2014-12-29T21:34:04.569637 #17280] DEBUG -- : 
I, [2014-12-29T21:34:04.629638 #17280]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-29 21:34:04 +0000
D, [2014-12-29T21:34:04.684639 #17280] DEBUG -- : 
D, [2014-12-29T21:34:04.702139 #17280] DEBUG -- : 
I, [2014-12-29T21:34:04.759640 #17280]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-29 21:34:04 +0000
D, [2014-12-29T21:34:04.817141 #17280] DEBUG -- : 
D, [2014-12-29T21:34:04.839641 #17280] DEBUG -- : 
I, [2014-12-29T21:34:04.882142 #17280]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-29 21:34:04 +0000
D, [2014-12-29T21:34:04.944643 #17280] DEBUG -- : 
D, [2014-12-29T21:34:04.969643 #17280] DEBUG -- : 
I, [2014-12-29T21:34:05.028144 #17280]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-29 21:34:04 +0000
D, [2014-12-29T21:34:05.083145 #17280] DEBUG -- : 
D, [2014-12-29T21:34:05.108145 #17280] DEBUG -- : 
I, [2014-12-29T21:34:05.173146 #17280]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-29 21:34:05 +0000
D, [2014-12-29T21:34:05.228147 #17280] DEBUG -- : 
D, [2014-12-29T21:34:05.250647 #17280] DEBUG -- : 
I, [2014-12-29T21:34:05.315648 #17280]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-29 21:34:05 +0000
D, [2014-12-29T21:34:05.368149 #17280] DEBUG -- : 
D, [2014-12-29T21:34:05.395650 #17280] DEBUG -- : 
I, [2014-12-29T21:34:05.463151 #17280]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-29 21:34:05 +0000
D, [2014-12-29T21:34:05.513151 #17280] DEBUG -- : 
D, [2014-12-29T21:34:05.538152 #17280] DEBUG -- : 
I, [2014-12-29T21:34:05.598153 #17280]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-29 21:34:05 +0000
D, [2014-12-29T21:34:05.645653 #17280] DEBUG -- : 
D, [2014-12-29T21:34:05.668154 #17280] DEBUG -- : 
I, [2014-12-29T21:34:05.730655 #17280]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-29 21:34:05 +0000
D, [2014-12-29T21:34:05.778155 #17280] DEBUG -- : 
D, [2014-12-29T21:34:05.803156 #17280] DEBUG -- : 
I, [2014-12-29T21:34:05.860657 #17280]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-29 21:34:05 +0000
D, [2014-12-29T21:34:05.910657 #17280] DEBUG -- : 
D, [2014-12-29T21:34:05.935658 #17280] DEBUG -- : 
I, [2014-12-29T21:34:05.998159 #17280]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-29 21:34:05 +0000
D, [2014-12-29T21:34:06.125661 #17280] DEBUG -- : 
D, [2014-12-29T21:34:06.153161 #17280] DEBUG -- : 
I, [2014-12-29T21:34:06.223162 #17280]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-29 21:34:06 +0000
D, [2014-12-29T21:34:06.280663 #17280] DEBUG -- : 
D, [2014-12-29T21:34:06.305663 #17280] DEBUG -- : 
I, [2014-12-29T21:34:06.373164 #17280]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-29 21:34:06 +0000
D, [2014-12-29T21:34:06.425665 #17280] DEBUG -- : 
D, [2014-12-29T21:34:06.450666 #17280] DEBUG -- : 
I, [2014-12-29T21:34:06.508167 #17280]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-29 21:34:06 +0000
D, [2014-12-29T21:34:06.560667 #17280] DEBUG -- : 
D, [2014-12-29T21:34:06.583168 #17280] DEBUG -- : 
I, [2014-12-29T21:34:06.648169 #17280]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-29 21:34:06 +0000
D, [2014-12-29T21:34:06.748170 #17280] DEBUG -- : 
D, [2014-12-29T21:34:06.775671 #17280] DEBUG -- : 
I, [2014-12-29T21:34:06.825671 #17280]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-29 21:34:06 +0000
D, [2014-12-29T21:34:06.873172 #17280] DEBUG -- : 
D, [2014-12-29T21:34:06.893172 #17280] DEBUG -- : 
I, [2014-12-29T21:34:06.950673 #17280]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2014-12-29 21:34:06 +0000
D, [2014-12-29T21:34:07.000674 #17280] DEBUG -- : 
D, [2014-12-29T21:34:07.025674 #17280] DEBUG -- : 
I, [2014-12-29T21:34:07.088175 #17280]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2014-12-29 21:34:07 +0000
D, [2014-12-29T21:43:45.295077 #17280] DEBUG -- : 
D, [2014-12-29T21:43:45.326277 #17280] DEBUG -- : 
I, [2014-12-29T21:43:45.357477 #17280]  INFO -- : Started GET "/" for 127.0.0.1 at 2014-12-29 21:43:45 +0000
I, [2014-12-29T21:43:45.435477 #17280]  INFO -- : Processing by StoreController#index as HTML
D, [2014-12-29T21:43:45.497877 #17280] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 33]]
D, [2014-12-29T21:43:45.575877 #17280] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2014-12-29T21:43:45.622677 #17280]  INFO -- : Cache digest for store/index.xml: a93d4e2e981ab3dfce98a095c3b6c059
I, [2014-12-29T21:43:45.685077 #17280]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (0.0ms)
I, [2014-12-29T21:43:45.731877 #17280]  INFO -- :   Rendered store/index.html.erb within layouts/application (187.2ms)
D, [2014-12-29T21:43:45.825478 #17280] DEBUG -- :   [1m[35mLineItem Exists (0.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 33]]
D, [2014-12-29T21:43:45.903478 #17280] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 33]]
I, [2014-12-29T21:43:45.950278 #17280]  INFO -- :   Rendered collection (0.0ms)
I, [2014-12-29T21:43:45.981478 #17280]  INFO -- :   Rendered carts/_cart.html.erb (109.2ms)
I, [2014-12-29T21:43:46.028278 #17280]  INFO -- : Completed 200 OK in 546ms (Views: 483.6ms | ActiveRecord: 0.0ms)
D, [2014-12-29T21:43:54.755896 #17280] DEBUG -- : 
D, [2014-12-29T21:43:54.765896 #17280] DEBUG -- : 
I, [2014-12-29T21:43:54.828296 #17280]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2014-12-29 21:43:54 +0000
I, [2014-12-29T21:43:54.906296 #17280]  INFO -- : Processing by LineItemsController#create as JS
I, [2014-12-29T21:43:54.968697 #17280]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2014-12-29T21:43:55.031097 #17280] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 33]]
D, [2014-12-29T21:43:55.093497 #17280] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2014-12-29T21:43:55.202697 #17280] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 33]]
D, [2014-12-29T21:43:55.358697 #17280] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2014-12-29T21:43:55.389897 #17280] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2014-12-29T21:43:55.592698 #17280] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 33], ["created_at", Mon, 29 Dec 2014 21:43:55 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:822a9b8,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Mon, 29 Dec 2014 21:43:55 UTC +00:00]]
D, [2014-12-29T21:43:55.826698 #17280] DEBUG -- :   [1m[35m (202.8ms)[0m  commit transaction
D, [2014-12-29T21:43:55.904698 #17280] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 33]]
I, [2014-12-29T21:43:55.951498 #17280]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2014-12-29T21:43:55.982698 #17280]  INFO -- :   Rendered carts/_cart.html.erb (109.2ms)
I, [2014-12-29T21:43:56.029498 #17280]  INFO -- :   Rendered line_items/create.js.erb (156.0ms)
I, [2014-12-29T21:43:56.076298 #17280]  INFO -- : Completed 200 OK in 1061ms (Views: 202.8ms | ActiveRecord: 218.4ms)
D, [2014-12-29T21:44:14.288446 #17280] DEBUG -- : 
D, [2014-12-29T21:44:14.308447 #17280] DEBUG -- : 
I, [2014-12-29T21:44:14.353447 #17280]  INFO -- : Started GET "/orders/new" for 127.0.0.1 at 2014-12-29 21:44:14 +0000
I, [2014-12-29T21:44:14.430949 #17280]  INFO -- : Processing by OrdersController#new as HTML
D, [2014-12-29T21:44:14.498450 #17280] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 33]]
D, [2014-12-29T21:44:14.570951 #17280] DEBUG -- :   [1m[36mLineItem Exists (2.5ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 33]]
I, [2014-12-29T21:44:14.813454 #17280]  INFO -- :   Rendered orders/_form.html.erb (160.0ms)
I, [2014-12-29T21:44:14.863455 #17280]  INFO -- :   Rendered orders/new.html.erb within layouts/application (205.0ms)
D, [2014-12-29T21:44:14.953457 #17280] DEBUG -- :   [1m[35mCACHE (0.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 33]]
D, [2014-12-29T21:44:15.025958 #17280] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 33]]
D, [2014-12-29T21:44:15.108459 #17280] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2014-12-29T21:44:15.150960 #17280]  INFO -- :   Rendered line_items/_line_item.html.erb (80.0ms)
I, [2014-12-29T21:44:15.190960 #17280]  INFO -- :   Rendered carts/_cart.html.erb (197.5ms)
I, [2014-12-29T21:44:15.233461 #17280]  INFO -- : Completed 200 OK in 763ms (Views: 597.5ms | ActiveRecord: 5.0ms)
D, [2014-12-29T21:44:15.535966 #17280] DEBUG -- : 
D, [2014-12-29T21:44:15.558466 #17280] DEBUG -- : 
I, [2014-12-29T21:44:15.588466 #17280]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-29 21:44:15 +0000
D, [2014-12-29T21:44:15.645967 #17280] DEBUG -- : 
D, [2014-12-29T21:44:15.665968 #17280] DEBUG -- : 
I, [2014-12-29T21:44:15.720968 #17280]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-29 21:44:15 +0000
D, [2014-12-29T21:44:15.775969 #17280] DEBUG -- : 
D, [2014-12-29T21:44:15.798470 #17280] DEBUG -- : 
I, [2014-12-29T21:44:15.850970 #17280]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-29 21:44:15 +0000
D, [2014-12-29T21:44:15.908471 #17280] DEBUG -- : 
D, [2014-12-29T21:44:15.933472 #17280] DEBUG -- : 
I, [2014-12-29T21:44:15.993473 #17280]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-29 21:44:15 +0000
D, [2014-12-29T21:44:16.035973 #17280] DEBUG -- : 
D, [2014-12-29T21:44:16.055973 #17280] DEBUG -- : 
I, [2014-12-29T21:44:16.108474 #17280]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-29 21:44:16 +0000
D, [2014-12-29T21:44:16.150975 #17280] DEBUG -- : 
D, [2014-12-29T21:44:16.173475 #17280] DEBUG -- : 
I, [2014-12-29T21:44:16.228476 #17280]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-29 21:44:16 +0000
D, [2014-12-29T21:44:16.270977 #17280] DEBUG -- : 
D, [2014-12-29T21:44:16.293477 #17280] DEBUG -- : 
I, [2014-12-29T21:44:16.348478 #17280]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-29 21:44:16 +0000
D, [2014-12-29T21:44:16.393479 #17280] DEBUG -- : 
D, [2014-12-29T21:44:16.413479 #17280] DEBUG -- : 
I, [2014-12-29T21:44:16.470980 #17280]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-29 21:44:16 +0000
D, [2014-12-29T21:44:16.508480 #17280] DEBUG -- : 
D, [2014-12-29T21:44:16.528481 #17280] DEBUG -- : 
I, [2014-12-29T21:44:16.583482 #17280]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-29 21:44:16 +0000
D, [2014-12-29T21:44:16.628482 #17280] DEBUG -- : 
D, [2014-12-29T21:44:16.648483 #17280] DEBUG -- : 
I, [2014-12-29T21:44:16.700983 #17280]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-29 21:44:16 +0000
D, [2014-12-29T21:44:16.743484 #17280] DEBUG -- : 
D, [2014-12-29T21:44:16.763484 #17280] DEBUG -- : 
I, [2014-12-29T21:44:16.810985 #17280]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-29 21:44:16 +0000
D, [2014-12-29T21:44:16.855986 #17280] DEBUG -- : 
D, [2014-12-29T21:44:16.875986 #17280] DEBUG -- : 
I, [2014-12-29T21:44:16.923487 #17280]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-29 21:44:16 +0000
D, [2014-12-29T21:44:16.975988 #17280] DEBUG -- : 
D, [2014-12-29T21:44:16.998488 #17280] DEBUG -- : 
I, [2014-12-29T21:44:17.050989 #17280]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-29 21:44:17 +0000
D, [2014-12-29T21:44:17.093489 #17280] DEBUG -- : 
D, [2014-12-29T21:44:17.113490 #17280] DEBUG -- : 
I, [2014-12-29T21:44:17.175991 #17280]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-29 21:44:17 +0000
D, [2014-12-29T21:44:17.215991 #17280] DEBUG -- : 
D, [2014-12-29T21:44:17.238492 #17280] DEBUG -- : 
I, [2014-12-29T21:44:17.288492 #17280]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-29 21:44:17 +0000
D, [2014-12-29T21:44:17.330993 #17280] DEBUG -- : 
D, [2014-12-29T21:44:17.350993 #17280] DEBUG -- : 
I, [2014-12-29T21:44:17.403494 #17280]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-29 21:44:17 +0000
D, [2014-12-29T21:44:17.445995 #17280] DEBUG -- : 
D, [2014-12-29T21:44:17.473495 #17280] DEBUG -- : 
I, [2014-12-29T21:44:17.525996 #17280]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-29 21:44:17 +0000
D, [2014-12-29T21:44:17.568497 #17280] DEBUG -- : 
D, [2014-12-29T21:44:17.588497 #17280] DEBUG -- : 
I, [2014-12-29T21:44:17.640998 #17280]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-29 21:44:17 +0000
D, [2014-12-29T21:44:17.683498 #17280] DEBUG -- : 
D, [2014-12-29T21:44:17.703499 #17280] DEBUG -- : 
I, [2014-12-29T21:44:17.756000 #17280]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-29 21:44:17 +0000
D, [2014-12-29T21:44:17.801000 #17280] DEBUG -- : 
D, [2014-12-29T21:44:17.823501 #17280] DEBUG -- : 
I, [2014-12-29T21:44:17.878501 #17280]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-29 21:44:17 +0000
D, [2014-12-29T21:44:17.921002 #17280] DEBUG -- : 
D, [2014-12-29T21:44:17.941002 #17280] DEBUG -- : 
I, [2014-12-29T21:44:17.991003 #17280]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-29 21:44:17 +0000
D, [2014-12-29T21:44:18.038504 #17280] DEBUG -- : 
D, [2014-12-29T21:44:18.058504 #17280] DEBUG -- : 
I, [2014-12-29T21:44:18.108505 #17280]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-29 21:44:18 +0000
D, [2014-12-29T21:44:18.151006 #17280] DEBUG -- : 
D, [2014-12-29T21:44:18.171006 #17280] DEBUG -- : 
I, [2014-12-29T21:44:18.223507 #17280]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-29 21:44:18 +0000
D, [2014-12-29T21:44:18.276007 #17280] DEBUG -- : 
D, [2014-12-29T21:44:18.293508 #17280] DEBUG -- : 
I, [2014-12-29T21:44:18.346009 #17280]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-29 21:44:18 +0000
D, [2014-12-29T21:44:18.388509 #17280] DEBUG -- : 
D, [2014-12-29T21:44:18.411010 #17280] DEBUG -- : 
I, [2014-12-29T21:44:18.463510 #17280]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-29 21:44:18 +0000
D, [2014-12-29T21:44:18.511011 #17280] DEBUG -- : 
D, [2014-12-29T21:44:18.533511 #17280] DEBUG -- : 
I, [2014-12-29T21:44:18.588512 #17280]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-29 21:44:18 +0000
D, [2014-12-29T21:44:18.633513 #17280] DEBUG -- : 
D, [2014-12-29T21:44:18.648513 #17280] DEBUG -- : 
I, [2014-12-29T21:44:18.693514 #17280]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-29 21:44:18 +0000
D, [2014-12-29T21:46:29.720636 #17280] DEBUG -- : 
D, [2014-12-29T21:46:29.740636 #17280] DEBUG -- : 
I, [2014-12-29T21:46:29.788137 #17280]  INFO -- : Started POST "/orders" for 127.0.0.1 at 2014-12-29 21:46:29 +0000
I, [2014-12-29T21:46:29.860638 #17280]  INFO -- : Processing by OrdersController#create as HTML
I, [2014-12-29T21:46:30.015640 #17280]  INFO -- :   Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order"=>{"name"=>"s", "address"=>"s", "shipping_address1"=>"simon.king65@gmail.com", "email"=>"simon.king65@gmail.com", "pay_type"=>"Paypal"}, "commit"=>"Place Order"}
D, [2014-12-29T21:46:30.093142 #17280] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 33]]
I, [2014-12-29T21:46:30.123142 #17280]  INFO -- : log info
D, [2014-12-29T21:46:30.170643 #17280] DEBUG -- : Unpermitted parameters: shipping_address1
D, [2014-12-29T21:46:30.258144 #17280] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 33]]
I, [2014-12-29T21:46:30.308145 #17280]  INFO -- : just about to payment_method and save
I, [2014-12-29T21:46:30.445647 #17280]  INFO -- : #<Order id: nil, name: "s", address: "s", email: "simon.king65@gmail.com", pay_type: "Paypal", created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2014-12-29T21:46:30.490648 #17280] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2014-12-29T21:46:30.688151 #17280] DEBUG -- :   [1m[35mSQL (5.0ms)[0m  INSERT INTO "orders" ("address", "created_at", "email", "name", "pay_type", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "s"], ["created_at", Mon, 29 Dec 2014 21:46:30 UTC +00:00], ["email", "simon.king65@gmail.com"], ["name", "s"], ["pay_type", "Paypal"], ["updated_at", Mon, 29 Dec 2014 21:46:30 UTC +00:00]]
D, [2014-12-29T21:46:30.818153 #17280] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 39[0m  [["cart_id", nil], ["order_id", 38], ["updated_at", Mon, 29 Dec 2014 21:46:30 UTC +00:00]]
I, [2014-12-29T21:46:30.853153 #17280]  INFO -- : about to @payment.create
D, [2014-12-29T21:46:30.958155 #17280] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2014-12-29T21:46:30.993155 #17280]  INFO -- : in order=
I, [2014-12-29T21:46:31.028156 #17280]  INFO -- : in payment.create
I, [2014-12-29T21:46:31.253159 #17280]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/38/confirm", "cancel_url"=>"http://localhost:3000/orders/38/cancel"}}
I, [2014-12-29T21:46:31.955670 #17280]  INFO -- : #<ActiveModel::Errors:0x00000009d75218 @base=#<Payment:0x00000009db7f50 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009db7d70 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009d7fec0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009d7fdf8 @error=nil, @total="19.99", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009d7fb28 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009d7f880 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009d7ef48 @error=nil, @return_url="http://localhost:3000/orders/38/confirm", @cancel_url="http://localhost:3000/orders/38/cancel">, @logger=#<Logger:0x000000059ff150 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059ff128 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059ff0d8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059ff038 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059fefc0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009d75218 ...>>, @messages={}>
I, [2014-12-29T21:46:31.983171 #17280]  INFO -- : got past invalid
I, [2014-12-29T21:46:32.128173 #17280]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/oauth2/token
I, [2014-12-29T21:46:34.163204 #17280]  INFO -- : Response[200]: OK, Duration: 1.998s
I, [2014-12-29T21:46:34.205705 #17280]  INFO -- : PayPal-Request-Id: d9f98804-5661-47a9-b36d-bdc19b632e71
I, [2014-12-29T21:46:34.255705 #17280]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2014-12-29T21:46:35.593226 #17280]  INFO -- : Response[201]: Created, Duration: 1.300s
I, [2014-12-29T21:46:35.623226 #17280]  INFO -- : back from super
I, [2014-12-29T21:46:36.065733 #17280]  INFO -- : {"id"=>"PAY-5Y629031XN2609907KSQ4XPA", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99", "details"=>{"subtotal"=>"19.99"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/38/confirm", "cancel_url"=>"http://localhost:3000/orders/38/cancel"}, "create_time"=>"2014-12-29T21:46:36Z", "update_time"=>"2014-12-29T21:46:36Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-5Y629031XN2609907KSQ4XPA", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-06L57932RY7850430", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-5Y629031XN2609907KSQ4XPA/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2014-12-29T21:46:36.283236 #17280] DEBUG -- :   [1m[36mSQL (5.0ms)[0m  [1mUPDATE "orders" SET "name" = ?, "address" = ?, "email" = ?, "pay_type" = ?, "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ? WHERE "orders"."id" = 38[0m  [["name", "s"], ["address", "s"], ["email", "simon.king65@gmail.com"], ["pay_type", "Paypal"], ["created_at", Mon, 29 Dec 2014 21:46:30 UTC +00:00], ["updated_at", Mon, 29 Dec 2014 21:46:30 UTC +00:00], ["id", 38], ["payment_id", "PAY-5Y629031XN2609907KSQ4XPA"], ["state", "created"]]
I, [2014-12-29T21:46:36.313237 #17280]  INFO -- : @payment save just done
I, [2014-12-29T21:46:37.348253 #17280]  INFO -- : #<Payment:0x00000009db7f50 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000833abf0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x0000000833ab00 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x0000000833aa88 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000833a8d0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000833a858 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x0000000833a6c8 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000833a2b8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008339e08 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009d7ef48 @error=nil, @return_url="http://localhost:3000/orders/38/confirm", @cancel_url="http://localhost:3000/orders/38/cancel">, @logger=#<Logger:0x000000059ff150 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059ff128 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059ff0d8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059ff038 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059fefc0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009d75218 @base=#<Payment:0x00000009db7f50 ...>, @messages={}>, @request_id="d9f98804-5661-47a9-b36d-bdc19b632e71", @header={}, @id="PAY-5Y629031XN2609907KSQ4XPA", @create_time="2014-12-29T21:46:36Z", @update_time="2014-12-29T21:46:36Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000083397c8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5Y629031XN2609907KSQ4XPA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008339430 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-06L57932RY7850430", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000083391d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5Y629031XN2609907KSQ4XPA/execute", @rel="execute", @method="POST">]>
I, [2014-12-29T21:46:38.386769 #17280]  INFO -- : #<Payment:0x00000009db7f50 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000833abf0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x0000000833ab00 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x0000000833aa88 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000833a8d0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000833a858 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x0000000833a6c8 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000833a2b8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008339e08 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009d7ef48 @error=nil, @return_url="http://localhost:3000/orders/38/confirm", @cancel_url="http://localhost:3000/orders/38/cancel">, @logger=#<Logger:0x000000059ff150 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059ff128 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059ff0d8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059ff038 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059fefc0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009d75218 @base=#<Payment:0x00000009db7f50 ...>, @messages={}>, @request_id="d9f98804-5661-47a9-b36d-bdc19b632e71", @header={}, @id="PAY-5Y629031XN2609907KSQ4XPA", @create_time="2014-12-29T21:46:36Z", @update_time="2014-12-29T21:46:36Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000083397c8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5Y629031XN2609907KSQ4XPA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008339430 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-06L57932RY7850430", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000083391d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5Y629031XN2609907KSQ4XPA/execute", @rel="execute", @method="POST">]>
D, [2014-12-29T21:46:38.536771 #17280] DEBUG -- :   [1m[35m (117.5ms)[0m  commit transaction
I, [2014-12-29T21:46:38.564271 #17280]  INFO -- : about to approve url
I, [2014-12-29T21:46:39.666788 #17280]  INFO -- : #<Payment:0x00000009db7f50 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000833abf0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x0000000833ab00 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x0000000833aa88 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000833a8d0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000833a858 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x0000000833a6c8 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000833a2b8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008339e08 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009d7ef48 @error=nil, @return_url="http://localhost:3000/orders/38/confirm", @cancel_url="http://localhost:3000/orders/38/cancel">, @logger=#<Logger:0x000000059ff150 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059ff128 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059ff0d8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059ff038 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059fefc0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009d75218 @base=#<Payment:0x00000009db7f50 ...>, @messages={}>, @request_id="d9f98804-5661-47a9-b36d-bdc19b632e71", @header={}, @id="PAY-5Y629031XN2609907KSQ4XPA", @create_time="2014-12-29T21:46:36Z", @update_time="2014-12-29T21:46:36Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000083397c8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5Y629031XN2609907KSQ4XPA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008339430 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-06L57932RY7850430", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000083391d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5Y629031XN2609907KSQ4XPA/execute", @rel="execute", @method="POST">]>
I, [2014-12-29T21:46:40.901807 #17280]  INFO -- : #<Payment:0x00000009db7f50 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000833abf0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x0000000833ab00 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x0000000833aa88 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000833a8d0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000833a858 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x0000000833a6c8 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000833a2b8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008339e08 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009d7ef48 @error=nil, @return_url="http://localhost:3000/orders/38/confirm", @cancel_url="http://localhost:3000/orders/38/cancel">, @logger=#<Logger:0x000000059ff150 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059ff128 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059ff0d8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059ff038 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059fefc0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009d75218 @base=#<Payment:0x00000009db7f50 ...>, @messages={}>, @request_id="d9f98804-5661-47a9-b36d-bdc19b632e71", @header={}, @id="PAY-5Y629031XN2609907KSQ4XPA", @create_time="2014-12-29T21:46:36Z", @update_time="2014-12-29T21:46:36Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000083397c8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5Y629031XN2609907KSQ4XPA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008339430 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-06L57932RY7850430", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000083391d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5Y629031XN2609907KSQ4XPA/execute", @rel="execute", @method="POST">]>
I, [2014-12-29T21:46:40.974308 #17280]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-06L57932RY7850430
I, [2014-12-29T21:46:42.174327 #17280]  INFO -- : #<Payment:0x00000009db7f50 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000833abf0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x0000000833ab00 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x0000000833aa88 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000833a8d0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000833a858 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x0000000833a6c8 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000833a2b8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008339e08 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009d7ef48 @error=nil, @return_url="http://localhost:3000/orders/38/confirm", @cancel_url="http://localhost:3000/orders/38/cancel">, @logger=#<Logger:0x000000059ff150 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059ff128 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059ff0d8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059ff038 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059fefc0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009d75218 @base=#<Payment:0x00000009db7f50 ...>, @messages={}>, @request_id="d9f98804-5661-47a9-b36d-bdc19b632e71", @header={}, @id="PAY-5Y629031XN2609907KSQ4XPA", @create_time="2014-12-29T21:46:36Z", @update_time="2014-12-29T21:46:36Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000083397c8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5Y629031XN2609907KSQ4XPA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008339430 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-06L57932RY7850430", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000083391d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5Y629031XN2609907KSQ4XPA/execute", @rel="execute", @method="POST">]>
I, [2014-12-29T21:46:42.239328 #17280]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-06L57932RY7850430
I, [2014-12-29T21:46:42.279328 #17280]  INFO -- : Completed 302 Found in 12224ms (ActiveRecord: 127.5ms)
D, [2014-12-29T21:47:50.888380 #17280] DEBUG -- : 
D, [2014-12-29T21:47:50.910880 #17280] DEBUG -- : 
I, [2014-12-29T21:47:51.010882 #17280]  INFO -- : Started GET "/orders/38/confirm?paymentId=PAY-5Y629031XN2609907KSQ4XPA&token=EC-06L57932RY7850430&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2014-12-29 21:47:50 +0000
I, [2014-12-29T21:47:51.078383 #17280]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2014-12-29T21:47:51.165884 #17280]  INFO -- :   Parameters: {"paymentId"=>"PAY-5Y629031XN2609907KSQ4XPA", "token"=>"EC-06L57932RY7850430", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"38"}
D, [2014-12-29T21:47:51.250885 #17280] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2014-12-29T21:47:51.365887 #17280] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2014-12-29T21:47:51.440888 #17280] DEBUG -- :   [1m[36mOrder Load (2.5ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "38"]]
I, [2014-12-29T21:47:59.090505 #17280]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-5Y629031XN2609907KSQ4XPA
I, [2014-12-29T21:48:00.383025 #17280]  INFO -- : Response[200]: OK, Duration: 1.258s
D, [2014-12-29T21:48:03.066566 #17280] DEBUG -- :   [1m[35m (2.5ms)[0m  begin transaction
D, [2014-12-29T21:48:03.211569 #17280] DEBUG -- :   [1m[36mSQL (7.5ms)[0m  [1mUPDATE "orders" SET "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 38[0m  [["shipping_address1", "1 Main Terrace"], ["updated_at", Mon, 29 Dec 2014 21:48:03 UTC +00:00]]
D, [2014-12-29T21:48:03.414072 #17280] DEBUG -- :   [1m[35m (155.0ms)[0m  commit transaction
I, [2014-12-29T21:48:03.586574 #17280]  INFO -- :   Rendered orders/_form.html.erb (97.5ms)
I, [2014-12-29T21:48:03.659075 #17280]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (165.0ms)
I, [2014-12-29T21:48:03.841578 #17280]  INFO -- : Completed 200 OK in 12618ms (Views: 367.5ms | ActiveRecord: 170.0ms)
D, [2014-12-29T21:48:04.154083 #17280] DEBUG -- : 
D, [2014-12-29T21:48:04.171583 #17280] DEBUG -- : 
I, [2014-12-29T21:48:04.226584 #17280]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:04 +0000
D, [2014-12-29T21:48:04.321586 #17280] DEBUG -- : 
D, [2014-12-29T21:48:04.346586 #17280] DEBUG -- : 
I, [2014-12-29T21:48:04.411587 #17280]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:04 +0000
D, [2014-12-29T21:48:04.501588 #17280] DEBUG -- : 
D, [2014-12-29T21:48:04.524089 #17280] DEBUG -- : 
I, [2014-12-29T21:48:04.594090 #17280]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:04 +0000
D, [2014-12-29T21:48:04.666591 #17280] DEBUG -- : 
D, [2014-12-29T21:48:04.691591 #17280] DEBUG -- : 
I, [2014-12-29T21:48:04.759092 #17280]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:04 +0000
D, [2014-12-29T21:48:04.836594 #17280] DEBUG -- : 
D, [2014-12-29T21:48:04.864094 #17280] DEBUG -- : 
I, [2014-12-29T21:48:04.934095 #17280]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:04 +0000
D, [2014-12-29T21:48:05.006596 #17280] DEBUG -- : 
D, [2014-12-29T21:48:05.031597 #17280] DEBUG -- : 
I, [2014-12-29T21:48:05.101598 #17280]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:05 +0000
D, [2014-12-29T21:48:05.191599 #17280] DEBUG -- : 
D, [2014-12-29T21:48:05.216599 #17280] DEBUG -- : 
I, [2014-12-29T21:48:05.281600 #17280]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:05 +0000
D, [2014-12-29T21:48:05.351601 #17280] DEBUG -- : 
D, [2014-12-29T21:48:05.376602 #17280] DEBUG -- : 
I, [2014-12-29T21:48:05.434103 #17280]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:05 +0000
D, [2014-12-29T21:48:05.514104 #17280] DEBUG -- : 
D, [2014-12-29T21:48:05.539104 #17280] DEBUG -- : 
I, [2014-12-29T21:48:05.599105 #17280]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:05 +0000
D, [2014-12-29T21:48:05.671606 #17280] DEBUG -- : 
D, [2014-12-29T21:48:05.699107 #17280] DEBUG -- : 
I, [2014-12-29T21:48:05.766608 #17280]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:05 +0000
D, [2014-12-29T21:48:05.844109 #17280] DEBUG -- : 
D, [2014-12-29T21:48:05.869109 #17280] DEBUG -- : 
I, [2014-12-29T21:48:05.941610 #17280]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:05 +0000
D, [2014-12-29T21:48:06.019112 #17280] DEBUG -- : 
D, [2014-12-29T21:48:06.046612 #17280] DEBUG -- : 
I, [2014-12-29T21:48:06.114113 #17280]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:06 +0000
D, [2014-12-29T21:48:06.184114 #17280] DEBUG -- : 
D, [2014-12-29T21:48:06.204114 #17280] DEBUG -- : 
I, [2014-12-29T21:48:06.271616 #17280]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:06 +0000
D, [2014-12-29T21:48:06.344117 #17280] DEBUG -- : 
D, [2014-12-29T21:48:06.369117 #17280] DEBUG -- : 
I, [2014-12-29T21:48:06.439118 #17280]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:06 +0000
D, [2014-12-29T21:48:06.510119 #17280] DEBUG -- : 
D, [2014-12-29T21:48:06.532620 #17280] DEBUG -- : 
I, [2014-12-29T21:48:06.597621 #17280]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:06 +0000
D, [2014-12-29T21:48:06.667622 #17280] DEBUG -- : 
D, [2014-12-29T21:48:06.695122 #17280] DEBUG -- : 
I, [2014-12-29T21:48:06.762623 #17280]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:06 +0000
D, [2014-12-29T21:48:06.840124 #17280] DEBUG -- : 
D, [2014-12-29T21:48:06.860125 #17280] DEBUG -- : 
I, [2014-12-29T21:48:06.925126 #17280]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:06 +0000
D, [2014-12-29T21:48:06.997627 #17280] DEBUG -- : 
D, [2014-12-29T21:48:07.022627 #17280] DEBUG -- : 
I, [2014-12-29T21:48:07.090128 #17280]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:07 +0000
D, [2014-12-29T21:48:07.160129 #17280] DEBUG -- : 
D, [2014-12-29T21:48:07.185130 #17280] DEBUG -- : 
I, [2014-12-29T21:48:07.250131 #17280]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:07 +0000
D, [2014-12-29T21:48:07.322632 #17280] DEBUG -- : 
D, [2014-12-29T21:48:07.347632 #17280] DEBUG -- : 
I, [2014-12-29T21:48:07.410133 #17280]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:07 +0000
D, [2014-12-29T21:48:07.492634 #17280] DEBUG -- : 
D, [2014-12-29T21:48:07.520135 #17280] DEBUG -- : 
I, [2014-12-29T21:48:07.582636 #17280]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:07 +0000
D, [2014-12-29T21:48:07.662637 #17280] DEBUG -- : 
D, [2014-12-29T21:48:07.690137 #17280] DEBUG -- : 
I, [2014-12-29T21:48:07.757638 #17280]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:07 +0000
D, [2014-12-29T21:48:07.835139 #17280] DEBUG -- : 
D, [2014-12-29T21:48:07.862640 #17280] DEBUG -- : 
I, [2014-12-29T21:48:07.932641 #17280]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:07 +0000
D, [2014-12-29T21:48:08.000142 #17280] DEBUG -- : 
D, [2014-12-29T21:48:08.022642 #17280] DEBUG -- : 
I, [2014-12-29T21:48:08.075143 #17280]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:08 +0000
D, [2014-12-29T21:48:08.145144 #17280] DEBUG -- : 
D, [2014-12-29T21:48:08.165145 #17280] DEBUG -- : 
I, [2014-12-29T21:48:08.215145 #17280]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:08 +0000
D, [2014-12-29T21:48:08.285146 #17280] DEBUG -- : 
D, [2014-12-29T21:48:08.305147 #17280] DEBUG -- : 
I, [2014-12-29T21:48:08.357647 #17280]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:08 +0000
D, [2014-12-29T21:48:08.430149 #17280] DEBUG -- : 
D, [2014-12-29T21:48:08.447649 #17280] DEBUG -- : 
I, [2014-12-29T21:48:08.490150 #17280]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-29 21:48:08 +0000
D, [2014-12-29T21:48:08.577651 #17280] DEBUG -- : 
D, [2014-12-29T21:48:08.597651 #17280] DEBUG -- : 
I, [2014-12-29T21:48:08.652652 #17280]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2014-12-29 21:48:08 +0000
D, [2014-12-29T21:48:14.445172 #17280] DEBUG -- : 
D, [2014-12-29T21:48:14.467672 #17280] DEBUG -- : 
I, [2014-12-29T21:48:14.530173 #17280]  INFO -- : Started POST "/orders/38/execute/38/2VZ7YQDDDPPC4" for 127.0.0.1 at 2014-12-29 21:48:14 +0000
I, [2014-12-29T21:48:14.627675 #17280]  INFO -- : Processing by OrdersController#execute as HTML
I, [2014-12-29T21:48:14.705176 #17280]  INFO -- :   Parameters: {"authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order_id"=>"38", "payer_id"=>"2VZ7YQDDDPPC4"}
D, [2014-12-29T21:48:14.795177 #17280] DEBUG -- :   [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "38"]]
I, [2014-12-29T21:48:19.097743 #17280]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-5Y629031XN2609907KSQ4XPA
I, [2014-12-29T21:48:20.365263 #17280]  INFO -- : Response[200]: OK, Duration: 1.233s
I, [2014-12-29T21:48:20.430264 #17280]  INFO -- : PayPal-Request-Id: a0fda986-5a8e-425a-92a4-bdb3d8931b3a
I, [2014-12-29T21:48:20.495265 #17280]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-5Y629031XN2609907KSQ4XPA/execute
I, [2014-12-29T21:48:23.528811 #17280]  INFO -- : Response[200]: OK, Duration: 2.999s
D, [2014-12-29T21:48:23.586312 #17280] DEBUG -- :   [1m[35m (2.5ms)[0m  begin transaction
D, [2014-12-29T21:48:23.698814 #17280] DEBUG -- :   [1m[36mSQL (7.5ms)[0m  [1mUPDATE "orders" SET "state" = ?, "updated_at" = ? WHERE "orders"."id" = 38[0m  [["state", "approved"], ["updated_at", Mon, 29 Dec 2014 21:48:23 UTC +00:00]]
D, [2014-12-29T21:48:23.856316 #17280] DEBUG -- :   [1m[35m (122.5ms)[0m  commit transaction
D, [2014-12-29T21:48:23.928817 #17280] DEBUG -- :   [1m[36mCart Load (2.5ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 33]]
D, [2014-12-29T21:48:23.966318 #17280] DEBUG -- :   [1m[35m (2.5ms)[0m  begin transaction
D, [2014-12-29T21:48:24.051319 #17280] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 33]]
D, [2014-12-29T21:48:24.111320 #17280] DEBUG -- :   [1m[35mSQL (5.0ms)[0m  DELETE FROM "carts" WHERE "carts"."id" = ?  [["id", 33]]
D, [2014-12-29T21:48:24.263822 #17280] DEBUG -- :   [1m[36m (117.5ms)[0m  [1mcommit transaction[0m
I, [2014-12-29T21:48:29.682405 #17280]  INFO -- :   Rendered order_notifier/received.html.erb (7.5ms)
D, [2014-12-29T21:48:29.802407 #17280] DEBUG -- :   [1m[35mLineItem Load (2.5ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 38]]
D, [2014-12-29T21:48:29.932409 #17280] DEBUG -- :   [1m[36mProduct Load (5.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2014-12-29T21:48:29.987410 #17280]  INFO -- :   Rendered line_items/_line_item.text.erb (120.0ms)
I, [2014-12-29T21:48:30.037411 #17280]  INFO -- :   Rendered order_notifier/received.text.erb (292.5ms)
I, [2014-12-29T21:48:31.334931 #17280]  INFO -- : 
Sent mail to simon.king65@gmail.com (1005.0ms)
D, [2014-12-29T21:48:31.774937 #17280] DEBUG -- : Date: Mon, 29 Dec 2014 21:48:30 +0000
From: Simon King <simon.king65@gmail.com>
To: simon.king65@gmail.com
Message-ID: <54a1cc2e65e89_43803fd270038560@Simon-PC.mail>
Subject: King Clothing Order Confirmation
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_54a1cc2e14bb0_43803fd270038464";
 charset=UTF-8
Content-Transfer-Encoding: 7bit


----==_mimepart_54a1cc2e14bb0_43803fd270038464
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear s

Thank you for your recent order from King Clothing.

You ordered the following items:

 1 x Camo Print Tee
We'll send you a separate e-mail when your order ships.
----==_mimepart_54a1cc2e14bb0_43803fd270038464
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<h1>OrderNotifier#received</h1>

<p>
  , thank you for your order, we will email you again once your order has been despatched. We hope you enjoy wearing your King Clothing brand tee-shirt.
</p>

----==_mimepart_54a1cc2e14bb0_43803fd270038464--

I, [2014-12-29T21:48:31.824938 #17280]  INFO -- : Redirected to http://localhost:3000/
I, [2014-12-29T21:48:31.879939 #17280]  INFO -- : Completed 302 Found in 17122ms (ActiveRecord: 267.5ms)
D, [2014-12-29T21:48:31.969940 #17280] DEBUG -- : 
D, [2014-12-29T21:48:31.994941 #17280] DEBUG -- : 
I, [2014-12-29T21:48:32.047442 #17280]  INFO -- : Started GET "/" for 127.0.0.1 at 2014-12-29 21:48:31 +0000
I, [2014-12-29T21:48:32.162443 #17280]  INFO -- : Processing by StoreController#index as HTML
D, [2014-12-29T21:48:32.222444 #17280] DEBUG -- :   [1m[35m (2.5ms)[0m  begin transaction
D, [2014-12-29T21:48:32.372447 #17280] DEBUG -- :   [1m[36mSQL (10.0ms)[0m  [1mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Mon, 29 Dec 2014 21:48:32 UTC +00:00], ["updated_at", Mon, 29 Dec 2014 21:48:32 UTC +00:00]]
D, [2014-12-29T21:48:32.554949 #17280] DEBUG -- :   [1m[35m (135.0ms)[0m  commit transaction
D, [2014-12-29T21:48:32.669951 #17280] DEBUG -- :   [1m[36mProduct Load (2.5ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2014-12-29T21:48:32.754953 #17280]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (2.5ms)
I, [2014-12-29T21:48:32.809953 #17280]  INFO -- :   Rendered store/index.html.erb within layouts/application (175.0ms)
D, [2014-12-29T21:48:33.052457 #17280] DEBUG -- :   [1m[35mLineItem Exists (2.5ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 34]]
D, [2014-12-29T21:48:33.154959 #17280] DEBUG -- :   [1m[36mLineItem Load (2.5ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 34]]
I, [2014-12-29T21:48:33.199959 #17280]  INFO -- :   Rendered collection (0.0ms)
I, [2014-12-29T21:48:33.274960 #17280]  INFO -- :   Rendered carts/_cart.html.erb (165.0ms)
I, [2014-12-29T21:48:33.357462 #17280]  INFO -- : Completed 200 OK in 1138ms (Views: 730.0ms | ActiveRecord: 155.0ms)
D, [2014-12-29T21:48:33.575965 #17280] DEBUG -- : 
D, [2014-12-29T21:48:33.598465 #17280] DEBUG -- : 
I, [2014-12-29T21:48:33.658466 #17280]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:33 +0000
D, [2014-12-29T21:48:33.783468 #17280] DEBUG -- : 
D, [2014-12-29T21:48:33.805969 #17280] DEBUG -- : 
I, [2014-12-29T21:48:33.870970 #17280]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:33 +0000
D, [2014-12-29T21:48:33.945971 #17280] DEBUG -- : 
D, [2014-12-29T21:48:33.970971 #17280] DEBUG -- : 
I, [2014-12-29T21:48:34.035972 #17280]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:33 +0000
D, [2014-12-29T21:48:34.108473 #17280] DEBUG -- : 
D, [2014-12-29T21:48:34.135974 #17280] DEBUG -- : 
I, [2014-12-29T21:48:34.203475 #17280]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:34 +0000
D, [2014-12-29T21:48:34.275976 #17280] DEBUG -- : 
D, [2014-12-29T21:48:34.303476 #17280] DEBUG -- : 
I, [2014-12-29T21:48:34.370977 #17280]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:34 +0000
D, [2014-12-29T21:48:34.448478 #17280] DEBUG -- : 
D, [2014-12-29T21:48:34.475979 #17280] DEBUG -- : 
I, [2014-12-29T21:48:34.548480 #17280]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:34 +0000
D, [2014-12-29T21:48:34.618481 #17280] DEBUG -- : 
D, [2014-12-29T21:48:34.640981 #17280] DEBUG -- : 
I, [2014-12-29T21:48:34.705982 #17280]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:34 +0000
D, [2014-12-29T21:48:34.783484 #17280] DEBUG -- : 
D, [2014-12-29T21:48:34.810984 #17280] DEBUG -- : 
I, [2014-12-29T21:48:34.873485 #17280]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:34 +0000
D, [2014-12-29T21:48:34.965986 #17280] DEBUG -- : 
D, [2014-12-29T21:48:34.985987 #17280] DEBUG -- : 
I, [2014-12-29T21:48:35.048488 #17280]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:34 +0000
D, [2014-12-29T21:48:35.120989 #17280] DEBUG -- : 
D, [2014-12-29T21:48:35.148489 #17280] DEBUG -- : 
I, [2014-12-29T21:48:35.213490 #17280]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:35 +0000
D, [2014-12-29T21:48:35.283491 #17280] DEBUG -- : 
D, [2014-12-29T21:48:35.308492 #17280] DEBUG -- : 
I, [2014-12-29T21:48:35.375993 #17280]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:35 +0000
D, [2014-12-29T21:48:35.455994 #17280] DEBUG -- : 
D, [2014-12-29T21:48:35.483494 #17280] DEBUG -- : 
I, [2014-12-29T21:48:35.553495 #17280]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:35 +0000
D, [2014-12-29T21:48:35.625997 #17280] DEBUG -- : 
D, [2014-12-29T21:48:35.648497 #17280] DEBUG -- : 
I, [2014-12-29T21:48:35.713498 #17280]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:35 +0000
D, [2014-12-29T21:48:35.790999 #17280] DEBUG -- : 
D, [2014-12-29T21:48:35.813499 #17280] DEBUG -- : 
I, [2014-12-29T21:48:35.886001 #17280]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:35 +0000
D, [2014-12-29T21:48:35.958502 #17280] DEBUG -- : 
D, [2014-12-29T21:48:35.983502 #17280] DEBUG -- : 
I, [2014-12-29T21:48:36.061003 #17280]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:35 +0000
D, [2014-12-29T21:48:36.133504 #17280] DEBUG -- : 
D, [2014-12-29T21:48:36.158505 #17280] DEBUG -- : 
I, [2014-12-29T21:48:36.221006 #17280]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:36 +0000
D, [2014-12-29T21:48:36.296007 #17280] DEBUG -- : 
D, [2014-12-29T21:48:36.316007 #17280] DEBUG -- : 
I, [2014-12-29T21:48:36.378508 #17280]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:36 +0000
D, [2014-12-29T21:48:36.458509 #17280] DEBUG -- : 
D, [2014-12-29T21:48:36.483510 #17280] DEBUG -- : 
I, [2014-12-29T21:48:36.551011 #17280]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:36 +0000
D, [2014-12-29T21:48:36.623512 #17280] DEBUG -- : 
D, [2014-12-29T21:48:36.648512 #17280] DEBUG -- : 
I, [2014-12-29T21:48:36.711013 #17280]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:36 +0000
D, [2014-12-29T21:48:36.788514 #17280] DEBUG -- : 
D, [2014-12-29T21:48:36.816015 #17280] DEBUG -- : 
I, [2014-12-29T21:48:36.878516 #17280]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:36 +0000
D, [2014-12-29T21:48:36.951017 #17280] DEBUG -- : 
D, [2014-12-29T21:48:36.976017 #17280] DEBUG -- : 
I, [2014-12-29T21:48:37.036018 #17280]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:36 +0000
D, [2014-12-29T21:48:37.118519 #17280] DEBUG -- : 
D, [2014-12-29T21:48:37.143520 #17280] DEBUG -- : 
I, [2014-12-29T21:48:37.203521 #17280]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:37 +0000
D, [2014-12-29T21:48:37.281022 #17280] DEBUG -- : 
D, [2014-12-29T21:48:37.306022 #17280] DEBUG -- : 
I, [2014-12-29T21:48:37.376023 #17280]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:37 +0000
D, [2014-12-29T21:48:37.456025 #17280] DEBUG -- : 
D, [2014-12-29T21:48:37.483525 #17280] DEBUG -- : 
I, [2014-12-29T21:48:37.553526 #17280]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:37 +0000
D, [2014-12-29T21:48:37.641027 #17280] DEBUG -- : 
D, [2014-12-29T21:48:37.666028 #17280] DEBUG -- : 
I, [2014-12-29T21:48:37.728529 #17280]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:37 +0000
D, [2014-12-29T21:48:37.808530 #17280] DEBUG -- : 
D, [2014-12-29T21:48:37.833530 #17280] DEBUG -- : 
I, [2014-12-29T21:48:37.901031 #17280]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:37 +0000
D, [2014-12-29T21:48:37.981033 #17280] DEBUG -- : 
D, [2014-12-29T21:48:38.038533 #17280] DEBUG -- : 
I, [2014-12-29T21:48:38.103534 #17280]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-29 21:48:38 +0000
D, [2014-12-29T21:48:38.173536 #17280] DEBUG -- : 
D, [2014-12-29T21:48:38.196036 #17280] DEBUG -- : 
I, [2014-12-29T21:48:38.261037 #17280]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2014-12-29 21:48:38 +0000
D, [2014-12-29T21:48:38.331038 #17280] DEBUG -- : 
D, [2014-12-29T21:48:38.356038 #17280] DEBUG -- : 
I, [2014-12-29T21:48:38.413539 #17280]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2014-12-29 21:48:38 +0000
D, [2014-12-31T17:32:41.351482 #10344] DEBUG -- : 
D, [2014-12-31T17:32:41.384484 #10344] DEBUG -- : 
I, [2014-12-31T17:32:41.419486 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2014-12-31 17:32:41 +0000
D, [2014-12-31T17:32:42.492547 #10344] DEBUG -- :   [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
I, [2014-12-31T17:32:42.886570 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2014-12-31T17:32:43.154585 #10344] DEBUG -- :   [1m[35mCart Load (38.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 34]]
D, [2014-12-31T17:32:43.490604 #10344] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2014-12-31T17:32:43.631612 #10344]  INFO -- : Cache digest for store/index.html: a93d4e2e981ab3dfce98a095c3b6c059
I, [2014-12-31T17:32:43.744619 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (26.0ms)
I, [2014-12-31T17:32:43.798622 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (360.0ms)
D, [2014-12-31T17:32:44.851682 #10344] DEBUG -- :   [1m[35mLineItem Exists (1.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 34]]
D, [2014-12-31T17:32:44.974689 #10344] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 34]]
I, [2014-12-31T17:32:45.007691 #10344]  INFO -- :   Rendered collection (0.0ms)
I, [2014-12-31T17:32:45.173701 #10344]  INFO -- :   Rendered carts/_cart.html.erb (243.0ms)
I, [2014-12-31T17:32:45.222703 #10344]  INFO -- : Completed 200 OK in 2291ms (Views: 1924.1ms | ActiveRecord: 47.0ms)
D, [2014-12-31T17:32:45.841739 #10344] DEBUG -- : 
D, [2014-12-31T17:32:45.863740 #10344] DEBUG -- : 
I, [2014-12-31T17:32:45.907742 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-31 17:32:45 +0000
D, [2014-12-31T17:32:45.955745 #10344] DEBUG -- : 
D, [2014-12-31T17:32:45.973746 #10344] DEBUG -- : 
I, [2014-12-31T17:32:46.014749 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-31 17:32:45 +0000
D, [2014-12-31T17:32:46.079752 #10344] DEBUG -- : 
D, [2014-12-31T17:32:46.094753 #10344] DEBUG -- : 
I, [2014-12-31T17:32:46.134755 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-31 17:32:46 +0000
D, [2014-12-31T17:32:46.189759 #10344] DEBUG -- : 
D, [2014-12-31T17:32:46.205760 #10344] DEBUG -- : 
I, [2014-12-31T17:32:46.250762 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-31 17:32:46 +0000
D, [2014-12-31T17:32:46.291764 #10344] DEBUG -- : 
D, [2014-12-31T17:32:46.305765 #10344] DEBUG -- : 
I, [2014-12-31T17:32:46.347768 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-31 17:32:46 +0000
D, [2014-12-31T17:32:46.387770 #10344] DEBUG -- : 
D, [2014-12-31T17:32:46.405771 #10344] DEBUG -- : 
I, [2014-12-31T17:32:46.446773 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-31 17:32:46 +0000
D, [2014-12-31T17:32:46.486776 #10344] DEBUG -- : 
D, [2014-12-31T17:32:46.504777 #10344] DEBUG -- : 
I, [2014-12-31T17:32:46.545779 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-31 17:32:46 +0000
D, [2014-12-31T17:32:46.586781 #10344] DEBUG -- : 
D, [2014-12-31T17:32:46.602782 #10344] DEBUG -- : 
I, [2014-12-31T17:32:46.647785 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-31 17:32:46 +0000
D, [2014-12-31T17:32:46.703788 #10344] DEBUG -- : 
D, [2014-12-31T17:32:46.719789 #10344] DEBUG -- : 
I, [2014-12-31T17:32:46.761791 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-31 17:32:46 +0000
D, [2014-12-31T17:32:46.802794 #10344] DEBUG -- : 
D, [2014-12-31T17:32:46.821795 #10344] DEBUG -- : 
I, [2014-12-31T17:32:46.866797 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-31 17:32:46 +0000
D, [2014-12-31T17:32:46.909800 #10344] DEBUG -- : 
D, [2014-12-31T17:32:46.925801 #10344] DEBUG -- : 
I, [2014-12-31T17:32:46.971803 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-31 17:32:46 +0000
D, [2014-12-31T17:32:47.045808 #10344] DEBUG -- : 
D, [2014-12-31T17:32:47.062809 #10344] DEBUG -- : 
I, [2014-12-31T17:32:47.100811 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-31 17:32:47 +0000
D, [2014-12-31T17:32:47.143813 #10344] DEBUG -- : 
D, [2014-12-31T17:32:47.160814 #10344] DEBUG -- : 
I, [2014-12-31T17:32:47.204817 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-31 17:32:47 +0000
D, [2014-12-31T17:32:47.252819 #10344] DEBUG -- : 
D, [2014-12-31T17:32:47.270820 #10344] DEBUG -- : 
I, [2014-12-31T17:32:47.318823 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-31 17:32:47 +0000
D, [2014-12-31T17:32:47.371826 #10344] DEBUG -- : 
D, [2014-12-31T17:32:47.388827 #10344] DEBUG -- : 
I, [2014-12-31T17:32:47.433830 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-31 17:32:47 +0000
D, [2014-12-31T17:32:47.488833 #10344] DEBUG -- : 
D, [2014-12-31T17:32:47.507834 #10344] DEBUG -- : 
I, [2014-12-31T17:32:47.553837 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-31 17:32:47 +0000
D, [2014-12-31T17:32:47.601839 #10344] DEBUG -- : 
D, [2014-12-31T17:32:47.616840 #10344] DEBUG -- : 
I, [2014-12-31T17:32:47.657843 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-31 17:32:47 +0000
D, [2014-12-31T17:32:47.702845 #10344] DEBUG -- : 
D, [2014-12-31T17:32:47.715846 #10344] DEBUG -- : 
I, [2014-12-31T17:32:47.755848 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-31 17:32:47 +0000
D, [2014-12-31T17:32:47.796851 #10344] DEBUG -- : 
D, [2014-12-31T17:32:47.812851 #10344] DEBUG -- : 
I, [2014-12-31T17:32:47.853854 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-31 17:32:47 +0000
D, [2014-12-31T17:32:47.892856 #10344] DEBUG -- : 
D, [2014-12-31T17:32:47.908857 #10344] DEBUG -- : 
I, [2014-12-31T17:32:47.978861 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-31 17:32:47 +0000
D, [2014-12-31T17:32:48.021863 #10344] DEBUG -- : 
D, [2014-12-31T17:32:48.037864 #10344] DEBUG -- : 
I, [2014-12-31T17:32:48.079867 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-31 17:32:48 +0000
D, [2014-12-31T17:32:48.120869 #10344] DEBUG -- : 
D, [2014-12-31T17:32:48.135870 #10344] DEBUG -- : 
I, [2014-12-31T17:32:48.178872 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-31 17:32:48 +0000
D, [2014-12-31T17:32:48.218875 #10344] DEBUG -- : 
D, [2014-12-31T17:32:48.232875 #10344] DEBUG -- : 
I, [2014-12-31T17:32:48.275878 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-31 17:32:48 +0000
D, [2014-12-31T17:32:48.314880 #10344] DEBUG -- : 
D, [2014-12-31T17:32:48.330881 #10344] DEBUG -- : 
I, [2014-12-31T17:32:48.370883 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-31 17:32:48 +0000
D, [2014-12-31T17:32:48.411886 #10344] DEBUG -- : 
D, [2014-12-31T17:32:48.427887 #10344] DEBUG -- : 
I, [2014-12-31T17:32:48.465889 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-31 17:32:48 +0000
D, [2014-12-31T17:32:48.508891 #10344] DEBUG -- : 
D, [2014-12-31T17:32:48.524892 #10344] DEBUG -- : 
I, [2014-12-31T17:32:48.566895 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-31 17:32:48 +0000
D, [2014-12-31T17:32:48.666900 #10344] DEBUG -- : 
D, [2014-12-31T17:32:48.687902 #10344] DEBUG -- : 
I, [2014-12-31T17:32:48.737904 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-31 17:32:48 +0000
D, [2014-12-31T17:32:48.780907 #10344] DEBUG -- : 
D, [2014-12-31T17:32:48.797908 #10344] DEBUG -- : 
I, [2014-12-31T17:32:48.832910 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2014-12-31 17:32:48 +0000
D, [2014-12-31T17:32:48.881913 #10344] DEBUG -- : 
D, [2014-12-31T17:32:48.900914 #10344] DEBUG -- : 
I, [2014-12-31T17:32:48.947916 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2014-12-31 17:32:48 +0000
D, [2014-12-31T17:32:48.995919 #10344] DEBUG -- : 
D, [2014-12-31T17:32:49.013920 #10344] DEBUG -- : 
I, [2014-12-31T17:32:49.053922 #10344]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2014-12-31 17:32:49 +0000
D, [2014-12-31T17:33:54.027325 #10344] DEBUG -- : 
D, [2014-12-31T17:33:54.042925 #10344] DEBUG -- : 
I, [2014-12-31T17:33:54.105325 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2014-12-31 17:33:54 +0000
I, [2014-12-31T17:33:54.198925 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2014-12-31T17:33:54.292525 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2014-12-31T17:33:54.370525 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 34]]
D, [2014-12-31T17:33:54.448526 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2014-12-31T17:33:54.573326 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 34]]
D, [2014-12-31T17:33:54.791726 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2014-12-31T17:33:54.838526 #10344] DEBUG -- :   [1m[35m (15.6ms)[0m  begin transaction
D, [2014-12-31T17:33:55.119327 #10344] DEBUG -- :   [1m[36mSQL (78.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 34], ["created_at", Wed, 31 Dec 2014 17:33:54 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:9c32f90,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Wed, 31 Dec 2014 17:33:54 UTC +00:00]]
D, [2014-12-31T17:33:55.306527 #10344] DEBUG -- :   [1m[35m (156.0ms)[0m  commit transaction
D, [2014-12-31T17:33:55.462527 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 34]]
I, [2014-12-31T17:33:55.556127 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2014-12-31T17:33:55.587328 #10344]  INFO -- :   Rendered carts/_cart.html.erb (140.4ms)
I, [2014-12-31T17:33:55.618528 #10344]  INFO -- :   Rendered line_items/create.js.erb (265.2ms)
I, [2014-12-31T17:33:55.665328 #10344]  INFO -- : Completed 200 OK in 1326ms (Views: 312.0ms | ActiveRecord: 249.6ms)
D, [2014-12-31T17:35:35.408498 #10344] DEBUG -- : 
D, [2014-12-31T17:35:35.428499 #10344] DEBUG -- : 
I, [2014-12-31T17:35:35.474501 #10344]  INFO -- : Started GET "/orders/new" for 127.0.0.1 at 2014-12-31 17:35:35 +0000
I, [2014-12-31T17:35:35.635511 #10344]  INFO -- : Processing by OrdersController#new as HTML
D, [2014-12-31T17:35:35.697514 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 34]]
D, [2014-12-31T17:35:35.769518 #10344] DEBUG -- :   [1m[36mLineItem Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 34]]
I, [2014-12-31T17:35:36.411555 #10344]  INFO -- :   Rendered orders/_form.html.erb (372.0ms)
I, [2014-12-31T17:35:36.455557 #10344]  INFO -- :   Rendered orders/new.html.erb within layouts/application (498.0ms)
D, [2014-12-31T17:35:36.555563 #10344] DEBUG -- :   [1m[35mCACHE (0.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 34]]
D, [2014-12-31T17:35:36.640568 #10344] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 34]]
D, [2014-12-31T17:35:36.720573 #10344] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2014-12-31T17:35:36.759575 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (77.0ms)
I, [2014-12-31T17:35:36.795577 #10344]  INFO -- :   Rendered carts/_cart.html.erb (201.0ms)
I, [2014-12-31T17:35:36.844580 #10344]  INFO -- : Completed 200 OK in 1164ms (Views: 952.1ms | ActiveRecord: 5.0ms)
D, [2014-12-31T17:35:37.238602 #10344] DEBUG -- : 
D, [2014-12-31T17:35:37.269604 #10344] DEBUG -- : 
I, [2014-12-31T17:35:37.353609 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-31 17:35:37 +0000
D, [2014-12-31T17:35:37.399611 #10344] DEBUG -- : 
D, [2014-12-31T17:35:37.417612 #10344] DEBUG -- : 
I, [2014-12-31T17:35:37.462615 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-31 17:35:37 +0000
D, [2014-12-31T17:35:37.587622 #10344] DEBUG -- : 
D, [2014-12-31T17:35:37.607623 #10344] DEBUG -- : 
I, [2014-12-31T17:35:37.660626 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-31 17:35:37 +0000
D, [2014-12-31T17:35:37.703629 #10344] DEBUG -- : 
D, [2014-12-31T17:35:37.723630 #10344] DEBUG -- : 
I, [2014-12-31T17:35:37.774633 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-31 17:35:37 +0000
D, [2014-12-31T17:35:37.842637 #10344] DEBUG -- : 
D, [2014-12-31T17:35:37.870638 #10344] DEBUG -- : 
I, [2014-12-31T17:35:37.931642 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-31 17:35:37 +0000
D, [2014-12-31T17:35:37.994645 #10344] DEBUG -- : 
D, [2014-12-31T17:35:38.027647 #10344] DEBUG -- : 
I, [2014-12-31T17:35:38.085651 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-31 17:35:38 +0000
D, [2014-12-31T17:35:38.128653 #10344] DEBUG -- : 
D, [2014-12-31T17:35:38.152655 #10344] DEBUG -- : 
I, [2014-12-31T17:35:38.200657 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-31 17:35:38 +0000
D, [2014-12-31T17:35:38.245660 #10344] DEBUG -- : 
D, [2014-12-31T17:35:38.264661 #10344] DEBUG -- : 
I, [2014-12-31T17:35:38.317664 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-31 17:35:38 +0000
D, [2014-12-31T17:35:38.368667 #10344] DEBUG -- : 
D, [2014-12-31T17:35:38.388668 #10344] DEBUG -- : 
I, [2014-12-31T17:35:38.437671 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-31 17:35:38 +0000
D, [2014-12-31T17:35:38.481673 #10344] DEBUG -- : 
D, [2014-12-31T17:35:38.503675 #10344] DEBUG -- : 
I, [2014-12-31T17:35:38.554678 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-31 17:35:38 +0000
D, [2014-12-31T17:35:38.599680 #10344] DEBUG -- : 
D, [2014-12-31T17:35:38.620681 #10344] DEBUG -- : 
I, [2014-12-31T17:35:38.700686 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-31 17:35:38 +0000
D, [2014-12-31T17:35:38.760689 #10344] DEBUG -- : 
D, [2014-12-31T17:35:38.797691 #10344] DEBUG -- : 
I, [2014-12-31T17:35:38.861695 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-31 17:35:38 +0000
D, [2014-12-31T17:35:38.909698 #10344] DEBUG -- : 
D, [2014-12-31T17:35:38.933699 #10344] DEBUG -- : 
I, [2014-12-31T17:35:39.016704 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-31 17:35:38 +0000
D, [2014-12-31T17:35:39.064707 #10344] DEBUG -- : 
D, [2014-12-31T17:35:39.082708 #10344] DEBUG -- : 
I, [2014-12-31T17:35:39.133711 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-31 17:35:39 +0000
D, [2014-12-31T17:35:39.176713 #10344] DEBUG -- : 
D, [2014-12-31T17:35:39.196714 #10344] DEBUG -- : 
I, [2014-12-31T17:35:39.252717 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-31 17:35:39 +0000
D, [2014-12-31T17:35:39.297720 #10344] DEBUG -- : 
D, [2014-12-31T17:35:39.314721 #10344] DEBUG -- : 
I, [2014-12-31T17:35:39.371724 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-31 17:35:39 +0000
D, [2014-12-31T17:35:39.415727 #10344] DEBUG -- : 
D, [2014-12-31T17:35:39.435728 #10344] DEBUG -- : 
I, [2014-12-31T17:35:39.498732 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-31 17:35:39 +0000
D, [2014-12-31T17:35:39.544734 #10344] DEBUG -- : 
D, [2014-12-31T17:35:39.562735 #10344] DEBUG -- : 
I, [2014-12-31T17:35:39.609738 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-31 17:35:39 +0000
D, [2014-12-31T17:35:39.649740 #10344] DEBUG -- : 
D, [2014-12-31T17:35:39.667741 #10344] DEBUG -- : 
I, [2014-12-31T17:35:39.712744 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-31 17:35:39 +0000
D, [2014-12-31T17:35:39.753746 #10344] DEBUG -- : 
D, [2014-12-31T17:35:39.771747 #10344] DEBUG -- : 
I, [2014-12-31T17:35:39.814750 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-31 17:35:39 +0000
D, [2014-12-31T17:35:39.858752 #10344] DEBUG -- : 
D, [2014-12-31T17:35:39.876753 #10344] DEBUG -- : 
I, [2014-12-31T17:35:39.927756 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-31 17:35:39 +0000
D, [2014-12-31T17:35:39.970759 #10344] DEBUG -- : 
D, [2014-12-31T17:35:39.988760 #10344] DEBUG -- : 
I, [2014-12-31T17:35:40.035762 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-31 17:35:39 +0000
D, [2014-12-31T17:35:40.079765 #10344] DEBUG -- : 
D, [2014-12-31T17:35:40.098766 #10344] DEBUG -- : 
I, [2014-12-31T17:35:40.146769 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-31 17:35:40 +0000
D, [2014-12-31T17:35:40.206772 #10344] DEBUG -- : 
D, [2014-12-31T17:35:40.224773 #10344] DEBUG -- : 
I, [2014-12-31T17:35:40.270776 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-31 17:35:40 +0000
D, [2014-12-31T17:35:40.314778 #10344] DEBUG -- : 
D, [2014-12-31T17:35:40.330779 #10344] DEBUG -- : 
I, [2014-12-31T17:35:40.372782 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-31 17:35:40 +0000
D, [2014-12-31T17:35:40.412784 #10344] DEBUG -- : 
D, [2014-12-31T17:35:40.430785 #10344] DEBUG -- : 
I, [2014-12-31T17:35:40.474787 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-31 17:35:40 +0000
D, [2014-12-31T17:35:40.519790 #10344] DEBUG -- : 
D, [2014-12-31T17:35:40.538791 #10344] DEBUG -- : 
I, [2014-12-31T17:35:40.581793 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-31 17:35:40 +0000
D, [2014-12-31T17:35:58.853917 #10344] DEBUG -- : 
D, [2014-12-31T17:35:58.874918 #10344] DEBUG -- : 
I, [2014-12-31T17:35:58.912921 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2014-12-31 17:35:58 +0000
I, [2014-12-31T17:35:58.977924 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2014-12-31T17:35:59.038928 #10344] DEBUG -- :   [1m[36mCart Load (1.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 34]]
D, [2014-12-31T17:35:59.138934 #10344] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2014-12-31T17:35:59.212938 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (9.0ms)
I, [2014-12-31T17:35:59.259940 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (140.0ms)
D, [2014-12-31T17:35:59.358946 #10344] DEBUG -- :   [1m[36mLineItem Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 34]]
D, [2014-12-31T17:35:59.434951 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 34]]
D, [2014-12-31T17:35:59.514955 #10344] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2014-12-31T17:35:59.556957 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (77.0ms)
I, [2014-12-31T17:35:59.596960 #10344]  INFO -- :   Rendered carts/_cart.html.erb (198.0ms)
I, [2014-12-31T17:35:59.647963 #10344]  INFO -- : Completed 200 OK in 622ms (Views: 558.0ms | ActiveRecord: 4.0ms)
D, [2014-12-31T17:39:00.445276 #10344] DEBUG -- : 
D, [2014-12-31T17:39:00.467277 #10344] DEBUG -- : 
I, [2014-12-31T17:39:00.507279 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2014-12-31 17:39:00 +0000
I, [2014-12-31T17:39:00.576283 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2014-12-31T17:39:00.638287 #10344] DEBUG -- :   [1m[35mCart Load (1.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 34]]
D, [2014-12-31T17:39:00.715291 #10344] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2014-12-31T17:39:00.780295 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (1.0ms)
I, [2014-12-31T17:39:00.829298 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (130.0ms)
D, [2014-12-31T17:39:00.947304 #10344] DEBUG -- :   [1m[35mLineItem Exists (0.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 34]]
D, [2014-12-31T17:39:01.017308 #10344] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 34]]
D, [2014-12-31T17:39:01.094313 #10344] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2014-12-31T17:39:01.135315 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (75.0ms)
I, [2014-12-31T17:39:01.173317 #10344]  INFO -- :   Rendered carts/_cart.html.erb (186.0ms)
I, [2014-12-31T17:39:01.219320 #10344]  INFO -- : Completed 200 OK in 598ms (Views: 533.0ms | ActiveRecord: 4.0ms)
D, [2014-12-31T17:52:20.730867 #10344] DEBUG -- : 
D, [2014-12-31T17:52:20.750868 #10344] DEBUG -- : 
I, [2014-12-31T17:52:20.791871 #10344]  INFO -- : Started POST "/orders" for 127.0.0.1 at 2014-12-31 17:52:20 +0000
I, [2014-12-31T17:52:20.862875 #10344]  INFO -- : Processing by OrdersController#create as HTML
I, [2014-12-31T17:52:20.968881 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order"=>{"name"=>"s", "address"=>"s", "shipping_address1"=>"s", "email"=>"s", "pay_type"=>"Paypal"}, "commit"=>"Place Order"}
D, [2014-12-31T17:52:21.029884 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 34]]
I, [2014-12-31T17:52:21.050886 #10344]  INFO -- : log info
D, [2014-12-31T17:52:21.086888 #10344] DEBUG -- : Unpermitted parameters: shipping_address1
D, [2014-12-31T17:52:21.152891 #10344] DEBUG -- :   [1m[35mLineItem Load (1.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 34]]
I, [2014-12-31T17:52:21.193894 #10344]  INFO -- : just about to payment_method and save
I, [2014-12-31T17:52:21.289899 #10344]  INFO -- : #<Order id: nil, name: "s", address: "s", email: "s", pay_type: "Paypal", created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2014-12-31T17:52:21.322901 #10344] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2014-12-31T17:52:21.465909 #10344] DEBUG -- :   [1m[35mSQL (5.0ms)[0m  INSERT INTO "orders" ("address", "created_at", "email", "name", "pay_type", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "s"], ["created_at", Wed, 31 Dec 2014 17:52:21 UTC +00:00], ["email", "s"], ["name", "s"], ["pay_type", "Paypal"], ["updated_at", Wed, 31 Dec 2014 17:52:21 UTC +00:00]]
D, [2014-12-31T17:52:21.575916 #10344] DEBUG -- :   [1m[36mSQL (2.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 40[0m  [["cart_id", nil], ["order_id", 39], ["updated_at", Wed, 31 Dec 2014 17:52:21 UTC +00:00]]
I, [2014-12-31T17:52:21.603917 #10344]  INFO -- : about to @payment.create
D, [2014-12-31T17:52:21.694922 #10344] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2014-12-31T17:52:21.751926 #10344]  INFO -- : in order=
I, [2014-12-31T17:52:21.793928 #10344]  INFO -- : in payment.create
I, [2014-12-31T17:52:21.993940 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/39/confirm", "cancel_url"=>"http://localhost:3000/orders/39/cancel"}}
I, [2014-12-31T17:52:22.560972 #10344]  INFO -- : #<ActiveModel::Errors:0x000000096cdc80 @base=#<Payment:0x0000000979a168 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009799ec0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000972ce38 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000972cd98 @error=nil, @total="19.99", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000972caf0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000972c938 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000972c050 @error=nil, @return_url="http://localhost:3000/orders/39/confirm", @cancel_url="http://localhost:3000/orders/39/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000096cdc80 ...>>, @messages={}>
I, [2014-12-31T17:52:22.591974 #10344]  INFO -- : got past invalid
I, [2014-12-31T17:52:22.920993 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/oauth2/token
I, [2014-12-31T17:52:27.830273 #10344]  INFO -- : Response[200]: OK, Duration: 4.875s
I, [2014-12-31T17:52:27.869276 #10344]  INFO -- : PayPal-Request-Id: d808a2d5-d48f-4db3-aeb3-7bd5a8b404de
I, [2014-12-31T17:52:27.911278 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2014-12-31T17:52:57.143950 #10344]  INFO -- : Response[201]: Created, Duration: 3.739s
I, [2014-12-31T17:52:57.165951 #10344]  INFO -- : back from super
I, [2014-12-31T17:52:57.527972 #10344]  INFO -- : {"id"=>"PAY-43J96431M99175307KSSDPXY", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99", "details"=>{"subtotal"=>"19.99"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/39/confirm", "cancel_url"=>"http://localhost:3000/orders/39/cancel"}, "create_time"=>"2014-12-31T17:52:31Z", "update_time"=>"2014-12-31T17:52:32Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-43J96431M99175307KSSDPXY", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-5X15545440436042U", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-43J96431M99175307KSSDPXY/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2014-12-31T17:52:57.713983 #10344] DEBUG -- :   [1m[36mSQL (5.0ms)[0m  [1mUPDATE "orders" SET "name" = ?, "address" = ?, "email" = ?, "pay_type" = ?, "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ? WHERE "orders"."id" = 39[0m  [["name", "s"], ["address", "s"], ["email", "s"], ["pay_type", "Paypal"], ["created_at", Wed, 31 Dec 2014 17:52:21 UTC +00:00], ["updated_at", Wed, 31 Dec 2014 17:52:21 UTC +00:00], ["id", 39], ["payment_id", "PAY-43J96431M99175307KSSDPXY"], ["state", "created"]]
I, [2014-12-31T17:52:57.743984 #10344]  INFO -- : @payment save just done
I, [2014-12-31T17:52:58.614034 #10344]  INFO -- : #<Payment:0x0000000979a168 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000094a3888 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000094a36f8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000094a3658 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000094a3428 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000094a3360 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000094a3130 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000094a2d48 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000094a2bb8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000972c050 @error=nil, @return_url="http://localhost:3000/orders/39/confirm", @cancel_url="http://localhost:3000/orders/39/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000096cdc80 @base=#<Payment:0x0000000979a168 ...>, @messages={}>, @request_id="d808a2d5-d48f-4db3-aeb3-7bd5a8b404de", @header={}, @id="PAY-43J96431M99175307KSSDPXY", @create_time="2014-12-31T17:52:31Z", @update_time="2014-12-31T17:52:32Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000094a24b0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-43J96431M99175307KSSDPXY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000094a2190 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-5X15545440436042U", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000094a1e48 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-43J96431M99175307KSSDPXY/execute", @rel="execute", @method="POST">]>
I, [2014-12-31T17:52:59.530086 #10344]  INFO -- : #<Payment:0x0000000979a168 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000094a3888 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000094a36f8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000094a3658 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000094a3428 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000094a3360 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000094a3130 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000094a2d48 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000094a2bb8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000972c050 @error=nil, @return_url="http://localhost:3000/orders/39/confirm", @cancel_url="http://localhost:3000/orders/39/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000096cdc80 @base=#<Payment:0x0000000979a168 ...>, @messages={}>, @request_id="d808a2d5-d48f-4db3-aeb3-7bd5a8b404de", @header={}, @id="PAY-43J96431M99175307KSSDPXY", @create_time="2014-12-31T17:52:31Z", @update_time="2014-12-31T17:52:32Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000094a24b0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-43J96431M99175307KSSDPXY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000094a2190 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-5X15545440436042U", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000094a1e48 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-43J96431M99175307KSSDPXY/execute", @rel="execute", @method="POST">]>
D, [2014-12-31T17:52:59.772100 #10344] DEBUG -- :   [1m[35m (213.0ms)[0m  commit transaction
I, [2014-12-31T17:52:59.794102 #10344]  INFO -- : about to approve url
I, [2014-12-31T17:53:00.672152 #10344]  INFO -- : #<Payment:0x0000000979a168 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000094a3888 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000094a36f8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000094a3658 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000094a3428 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000094a3360 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000094a3130 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000094a2d48 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000094a2bb8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000972c050 @error=nil, @return_url="http://localhost:3000/orders/39/confirm", @cancel_url="http://localhost:3000/orders/39/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000096cdc80 @base=#<Payment:0x0000000979a168 ...>, @messages={}>, @request_id="d808a2d5-d48f-4db3-aeb3-7bd5a8b404de", @header={}, @id="PAY-43J96431M99175307KSSDPXY", @create_time="2014-12-31T17:52:31Z", @update_time="2014-12-31T17:52:32Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000094a24b0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-43J96431M99175307KSSDPXY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000094a2190 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-5X15545440436042U", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000094a1e48 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-43J96431M99175307KSSDPXY/execute", @rel="execute", @method="POST">]>
I, [2014-12-31T17:53:01.555202 #10344]  INFO -- : #<Payment:0x0000000979a168 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000094a3888 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000094a36f8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000094a3658 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000094a3428 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000094a3360 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000094a3130 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000094a2d48 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000094a2bb8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000972c050 @error=nil, @return_url="http://localhost:3000/orders/39/confirm", @cancel_url="http://localhost:3000/orders/39/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000096cdc80 @base=#<Payment:0x0000000979a168 ...>, @messages={}>, @request_id="d808a2d5-d48f-4db3-aeb3-7bd5a8b404de", @header={}, @id="PAY-43J96431M99175307KSSDPXY", @create_time="2014-12-31T17:52:31Z", @update_time="2014-12-31T17:52:32Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000094a24b0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-43J96431M99175307KSSDPXY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000094a2190 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-5X15545440436042U", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000094a1e48 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-43J96431M99175307KSSDPXY/execute", @rel="execute", @method="POST">]>
I, [2014-12-31T17:53:01.609205 #10344]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-5X15545440436042U
I, [2014-12-31T17:53:02.652265 #10344]  INFO -- : #<Payment:0x0000000979a168 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000094a3888 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000094a36f8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000094a3658 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000094a3428 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000094a3360 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000094a3130 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000094a2d48 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000094a2bb8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000972c050 @error=nil, @return_url="http://localhost:3000/orders/39/confirm", @cancel_url="http://localhost:3000/orders/39/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000096cdc80 @base=#<Payment:0x0000000979a168 ...>, @messages={}>, @request_id="d808a2d5-d48f-4db3-aeb3-7bd5a8b404de", @header={}, @id="PAY-43J96431M99175307KSSDPXY", @create_time="2014-12-31T17:52:31Z", @update_time="2014-12-31T17:52:32Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000094a24b0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-43J96431M99175307KSSDPXY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000094a2190 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-5X15545440436042U", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000094a1e48 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-43J96431M99175307KSSDPXY/execute", @rel="execute", @method="POST">]>
I, [2014-12-31T17:53:02.725269 #10344]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-5X15545440436042U
I, [2014-12-31T17:53:02.775272 #10344]  INFO -- : Completed 302 Found in 41756ms (ActiveRecord: 228.0ms)
D, [2015-01-01T09:59:35.958561 #10344] DEBUG -- : 
D, [2015-01-01T09:59:35.979562 #10344] DEBUG -- : 
I, [2015-01-01T09:59:36.022564 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 09:59:35 +0000
I, [2015-01-01T09:59:37.320639 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T09:59:37.498649 #10344] DEBUG -- :   [1m[36mCart Load (1.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 34]]
D, [2015-01-01T09:59:37.620656 #10344] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T09:59:37.771664 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (28.0ms)
I, [2015-01-01T09:59:37.817667 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (212.0ms)
D, [2015-01-01T09:59:38.046680 #10344] DEBUG -- :   [1m[36mLineItem Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 34]]
D, [2015-01-01T09:59:38.116684 #10344] DEBUG -- :   [1m[35mLineItem Load (1.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 34]]
I, [2015-01-01T09:59:38.148686 #10344]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-01T09:59:38.216690 #10344]  INFO -- :   Rendered carts/_cart.html.erb (130.0ms)
I, [2015-01-01T09:59:38.285694 #10344]  INFO -- : Completed 200 OK in 922ms (Views: 663.0ms | ActiveRecord: 32.0ms)
D, [2015-01-01T09:59:39.221747 #10344] DEBUG -- : 
D, [2015-01-01T09:59:39.240748 #10344] DEBUG -- : 
I, [2015-01-01T09:59:39.296752 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:39 +0000
D, [2015-01-01T09:59:39.335754 #10344] DEBUG -- : 
D, [2015-01-01T09:59:39.353755 #10344] DEBUG -- : 
I, [2015-01-01T09:59:39.397757 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:39 +0000
D, [2015-01-01T09:59:39.439760 #10344] DEBUG -- : 
D, [2015-01-01T09:59:39.461761 #10344] DEBUG -- : 
I, [2015-01-01T09:59:39.517764 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:39 +0000
D, [2015-01-01T09:59:39.560767 #10344] DEBUG -- : 
D, [2015-01-01T09:59:39.580768 #10344] DEBUG -- : 
I, [2015-01-01T09:59:39.631771 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:39 +0000
D, [2015-01-01T09:59:39.679773 #10344] DEBUG -- : 
D, [2015-01-01T09:59:39.695774 #10344] DEBUG -- : 
I, [2015-01-01T09:59:39.746777 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:39 +0000
D, [2015-01-01T09:59:39.796780 #10344] DEBUG -- : 
D, [2015-01-01T09:59:39.815781 #10344] DEBUG -- : 
I, [2015-01-01T09:59:39.868784 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:39 +0000
D, [2015-01-01T09:59:39.911787 #10344] DEBUG -- : 
D, [2015-01-01T09:59:39.931788 #10344] DEBUG -- : 
I, [2015-01-01T09:59:39.984791 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:39 +0000
D, [2015-01-01T09:59:40.030794 #10344] DEBUG -- : 
D, [2015-01-01T09:59:40.047795 #10344] DEBUG -- : 
I, [2015-01-01T09:59:40.095797 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:40 +0000
D, [2015-01-01T09:59:40.134800 #10344] DEBUG -- : 
D, [2015-01-01T09:59:40.150800 #10344] DEBUG -- : 
I, [2015-01-01T09:59:40.190803 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:40 +0000
D, [2015-01-01T09:59:40.223805 #10344] DEBUG -- : 
D, [2015-01-01T09:59:40.239806 #10344] DEBUG -- : 
I, [2015-01-01T09:59:40.283808 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:40 +0000
D, [2015-01-01T09:59:40.317810 #10344] DEBUG -- : 
D, [2015-01-01T09:59:40.331811 #10344] DEBUG -- : 
I, [2015-01-01T09:59:40.370813 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:40 +0000
D, [2015-01-01T09:59:40.404815 #10344] DEBUG -- : 
D, [2015-01-01T09:59:40.417816 #10344] DEBUG -- : 
I, [2015-01-01T09:59:40.452818 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:40 +0000
D, [2015-01-01T09:59:40.513821 #10344] DEBUG -- : 
D, [2015-01-01T09:59:40.527822 #10344] DEBUG -- : 
I, [2015-01-01T09:59:40.566824 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:40 +0000
D, [2015-01-01T09:59:40.600826 #10344] DEBUG -- : 
D, [2015-01-01T09:59:40.614827 #10344] DEBUG -- : 
I, [2015-01-01T09:59:40.656829 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:40 +0000
D, [2015-01-01T09:59:40.689831 #10344] DEBUG -- : 
D, [2015-01-01T09:59:40.705832 #10344] DEBUG -- : 
I, [2015-01-01T09:59:40.743834 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:40 +0000
D, [2015-01-01T09:59:40.775836 #10344] DEBUG -- : 
D, [2015-01-01T09:59:40.793837 #10344] DEBUG -- : 
I, [2015-01-01T09:59:40.831839 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:40 +0000
D, [2015-01-01T09:59:40.868841 #10344] DEBUG -- : 
D, [2015-01-01T09:59:40.883842 #10344] DEBUG -- : 
I, [2015-01-01T09:59:40.927845 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:40 +0000
D, [2015-01-01T09:59:40.960847 #10344] DEBUG -- : 
D, [2015-01-01T09:59:40.975848 #10344] DEBUG -- : 
I, [2015-01-01T09:59:41.012850 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:40 +0000
D, [2015-01-01T09:59:41.107855 #10344] DEBUG -- : 
D, [2015-01-01T09:59:41.121856 #10344] DEBUG -- : 
I, [2015-01-01T09:59:41.161858 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:41 +0000
D, [2015-01-01T09:59:41.197860 #10344] DEBUG -- : 
D, [2015-01-01T09:59:41.213861 #10344] DEBUG -- : 
I, [2015-01-01T09:59:41.257864 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:41 +0000
D, [2015-01-01T09:59:41.296866 #10344] DEBUG -- : 
D, [2015-01-01T09:59:41.312867 #10344] DEBUG -- : 
I, [2015-01-01T09:59:41.356869 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:41 +0000
D, [2015-01-01T09:59:41.391871 #10344] DEBUG -- : 
D, [2015-01-01T09:59:41.407872 #10344] DEBUG -- : 
I, [2015-01-01T09:59:41.454875 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:41 +0000
D, [2015-01-01T09:59:41.486877 #10344] DEBUG -- : 
D, [2015-01-01T09:59:41.503878 #10344] DEBUG -- : 
I, [2015-01-01T09:59:41.547880 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:41 +0000
D, [2015-01-01T09:59:41.585882 #10344] DEBUG -- : 
D, [2015-01-01T09:59:41.603884 #10344] DEBUG -- : 
I, [2015-01-01T09:59:41.642886 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:41 +0000
D, [2015-01-01T09:59:41.681888 #10344] DEBUG -- : 
D, [2015-01-01T09:59:41.699889 #10344] DEBUG -- : 
I, [2015-01-01T09:59:41.739891 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:41 +0000
D, [2015-01-01T09:59:41.776893 #10344] DEBUG -- : 
D, [2015-01-01T09:59:41.794894 #10344] DEBUG -- : 
I, [2015-01-01T09:59:41.836897 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:41 +0000
D, [2015-01-01T09:59:41.879899 #10344] DEBUG -- : 
D, [2015-01-01T09:59:41.894900 #10344] DEBUG -- : 
I, [2015-01-01T09:59:41.939903 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 09:59:41 +0000
D, [2015-01-01T09:59:41.992906 #10344] DEBUG -- : 
D, [2015-01-01T09:59:42.006907 #10344] DEBUG -- : 
I, [2015-01-01T09:59:42.055909 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 09:59:42 +0000
D, [2015-01-01T09:59:42.102912 #10344] DEBUG -- : 
D, [2015-01-01T09:59:42.121913 #10344] DEBUG -- : 
I, [2015-01-01T09:59:42.161915 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 09:59:42 +0000
D, [2015-01-01T09:59:42.195917 #10344] DEBUG -- : 
D, [2015-01-01T09:59:42.212918 #10344] DEBUG -- : 
I, [2015-01-01T09:59:42.256921 #10344]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-01 09:59:42 +0000
D, [2015-01-01T09:59:46.600371 #10344] DEBUG -- : 
D, [2015-01-01T09:59:46.615971 #10344] DEBUG -- : 
I, [2015-01-01T09:59:46.662771 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 09:59:46 +0000
I, [2015-01-01T09:59:46.740771 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T09:59:46.787572 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T09:59:46.849972 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 34]]
D, [2015-01-01T09:59:46.912372 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-01T09:59:47.005972 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 34]]
D, [2015-01-01T09:59:47.146372 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T09:59:47.177572 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T09:59:47.364173 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 34], ["created_at", Thu, 01 Jan 2015 09:59:47 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7e65e90,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 09:59:47 UTC +00:00]]
D, [2015-01-01T09:59:47.535774 #10344] DEBUG -- :   [1m[36m (124.8ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T09:59:47.613774 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 34]]
I, [2015-01-01T09:59:47.660574 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (0.0ms)
I, [2015-01-01T09:59:47.707374 #10344]  INFO -- :   Rendered carts/_cart.html.erb (124.8ms)
I, [2015-01-01T09:59:47.738574 #10344]  INFO -- :   Rendered line_items/create.js.erb (156.0ms)
I, [2015-01-01T09:59:47.785374 #10344]  INFO -- : Completed 200 OK in 951ms (Views: 202.8ms | ActiveRecord: 140.4ms)
D, [2015-01-01T09:59:51.100645 #10344] DEBUG -- : 
D, [2015-01-01T09:59:51.120646 #10344] DEBUG -- : 
I, [2015-01-01T09:59:51.169649 #10344]  INFO -- : Started GET "/orders/new" for 127.0.0.1 at 2015-01-01 09:59:51 +0000
I, [2015-01-01T09:59:51.265655 #10344]  INFO -- : Processing by OrdersController#new as HTML
D, [2015-01-01T09:59:51.330658 #10344] DEBUG -- :   [1m[36mCart Load (1.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 34]]
D, [2015-01-01T09:59:51.399662 #10344] DEBUG -- :   [1m[35mLineItem Exists (1.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 34]]
I, [2015-01-01T09:59:51.617675 #10344]  INFO -- :   Rendered orders/_form.html.erb (136.0ms)
I, [2015-01-01T09:59:51.663677 #10344]  INFO -- :   Rendered orders/new.html.erb within layouts/application (177.0ms)
D, [2015-01-01T09:59:51.754683 #10344] DEBUG -- :   [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 34]]
D, [2015-01-01T09:59:51.828687 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 34]]
D, [2015-01-01T09:59:51.908691 #10344] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-01T09:59:51.947694 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (77.0ms)
I, [2015-01-01T09:59:51.986696 #10344]  INFO -- :   Rendered carts/_cart.html.erb (191.0ms)
I, [2015-01-01T09:59:52.034699 #10344]  INFO -- : Completed 200 OK in 724ms (Views: 563.0ms | ActiveRecord: 5.0ms)
D, [2015-01-01T09:59:52.388719 #10344] DEBUG -- : 
D, [2015-01-01T09:59:52.405720 #10344] DEBUG -- : 
I, [2015-01-01T09:59:52.446722 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:52 +0000
D, [2015-01-01T09:59:52.479724 #10344] DEBUG -- : 
D, [2015-01-01T09:59:52.493725 #10344] DEBUG -- : 
I, [2015-01-01T09:59:52.529727 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:52 +0000
D, [2015-01-01T09:59:52.563729 #10344] DEBUG -- : 
D, [2015-01-01T09:59:52.578730 #10344] DEBUG -- : 
I, [2015-01-01T09:59:52.614732 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:52 +0000
D, [2015-01-01T09:59:52.647734 #10344] DEBUG -- : 
D, [2015-01-01T09:59:52.663735 #10344] DEBUG -- : 
I, [2015-01-01T09:59:52.702737 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:52 +0000
D, [2015-01-01T09:59:52.735739 #10344] DEBUG -- : 
D, [2015-01-01T09:59:52.750740 #10344] DEBUG -- : 
I, [2015-01-01T09:59:52.788742 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:52 +0000
D, [2015-01-01T09:59:52.821744 #10344] DEBUG -- : 
D, [2015-01-01T09:59:52.835744 #10344] DEBUG -- : 
I, [2015-01-01T09:59:52.873747 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:52 +0000
D, [2015-01-01T09:59:52.906749 #10344] DEBUG -- : 
D, [2015-01-01T09:59:52.920749 #10344] DEBUG -- : 
I, [2015-01-01T09:59:52.956751 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:52 +0000
D, [2015-01-01T09:59:52.989753 #10344] DEBUG -- : 
D, [2015-01-01T09:59:53.003754 #10344] DEBUG -- : 
I, [2015-01-01T09:59:53.040756 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:53 +0000
D, [2015-01-01T09:59:53.072758 #10344] DEBUG -- : 
D, [2015-01-01T09:59:53.085759 #10344] DEBUG -- : 
I, [2015-01-01T09:59:53.123761 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:53 +0000
D, [2015-01-01T09:59:53.155763 #10344] DEBUG -- : 
D, [2015-01-01T09:59:53.169764 #10344] DEBUG -- : 
I, [2015-01-01T09:59:53.204766 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:53 +0000
D, [2015-01-01T09:59:53.235767 #10344] DEBUG -- : 
D, [2015-01-01T09:59:53.249768 #10344] DEBUG -- : 
I, [2015-01-01T09:59:53.287770 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:53 +0000
D, [2015-01-01T09:59:53.322772 #10344] DEBUG -- : 
D, [2015-01-01T09:59:53.337773 #10344] DEBUG -- : 
I, [2015-01-01T09:59:53.375775 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:53 +0000
D, [2015-01-01T09:59:53.415778 #10344] DEBUG -- : 
D, [2015-01-01T09:59:53.434779 #10344] DEBUG -- : 
I, [2015-01-01T09:59:53.483782 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:53 +0000
D, [2015-01-01T09:59:53.519784 #10344] DEBUG -- : 
D, [2015-01-01T09:59:53.533784 #10344] DEBUG -- : 
I, [2015-01-01T09:59:53.574787 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:53 +0000
D, [2015-01-01T09:59:53.603788 #10344] DEBUG -- : 
D, [2015-01-01T09:59:53.617789 #10344] DEBUG -- : 
I, [2015-01-01T09:59:53.650791 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:53 +0000
D, [2015-01-01T09:59:53.683793 #10344] DEBUG -- : 
D, [2015-01-01T09:59:53.697794 #10344] DEBUG -- : 
I, [2015-01-01T09:59:53.730796 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:53 +0000
D, [2015-01-01T09:59:53.763798 #10344] DEBUG -- : 
D, [2015-01-01T09:59:53.779798 #10344] DEBUG -- : 
I, [2015-01-01T09:59:53.818801 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:53 +0000
D, [2015-01-01T09:59:53.850803 #10344] DEBUG -- : 
D, [2015-01-01T09:59:53.864803 #10344] DEBUG -- : 
I, [2015-01-01T09:59:53.897805 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:53 +0000
D, [2015-01-01T09:59:53.928807 #10344] DEBUG -- : 
D, [2015-01-01T09:59:53.941808 #10344] DEBUG -- : 
I, [2015-01-01T09:59:53.977810 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:53 +0000
D, [2015-01-01T09:59:54.006811 #10344] DEBUG -- : 
D, [2015-01-01T09:59:54.018812 #10344] DEBUG -- : 
I, [2015-01-01T09:59:54.051814 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:54 +0000
D, [2015-01-01T09:59:54.082816 #10344] DEBUG -- : 
D, [2015-01-01T09:59:54.095817 #10344] DEBUG -- : 
I, [2015-01-01T09:59:54.129818 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:54 +0000
D, [2015-01-01T09:59:54.163820 #10344] DEBUG -- : 
D, [2015-01-01T09:59:54.177821 #10344] DEBUG -- : 
I, [2015-01-01T09:59:54.211823 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:54 +0000
D, [2015-01-01T09:59:54.240825 #10344] DEBUG -- : 
D, [2015-01-01T09:59:54.254826 #10344] DEBUG -- : 
I, [2015-01-01T09:59:54.288828 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:54 +0000
D, [2015-01-01T09:59:54.318829 #10344] DEBUG -- : 
D, [2015-01-01T09:59:54.331830 #10344] DEBUG -- : 
I, [2015-01-01T09:59:54.363832 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:54 +0000
D, [2015-01-01T09:59:54.393834 #10344] DEBUG -- : 
D, [2015-01-01T09:59:54.406834 #10344] DEBUG -- : 
I, [2015-01-01T09:59:54.437836 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:54 +0000
D, [2015-01-01T09:59:54.465838 #10344] DEBUG -- : 
D, [2015-01-01T09:59:54.479838 #10344] DEBUG -- : 
I, [2015-01-01T09:59:54.513840 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:54 +0000
D, [2015-01-01T09:59:54.542842 #10344] DEBUG -- : 
D, [2015-01-01T09:59:54.553843 #10344] DEBUG -- : 
I, [2015-01-01T09:59:54.586845 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 09:59:54 +0000
D, [2015-01-01T10:00:10.007133 #10344] DEBUG -- : 
D, [2015-01-01T10:00:10.029135 #10344] DEBUG -- : 
I, [2015-01-01T10:00:10.076137 #10344]  INFO -- : Started POST "/orders" for 127.0.0.1 at 2015-01-01 10:00:10 +0000
I, [2015-01-01T10:00:10.141141 #10344]  INFO -- : Processing by OrdersController#create as HTML
I, [2015-01-01T10:00:10.247147 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order"=>{"name"=>"s", "address"=>"s", "shipping_address1"=>"s", "email"=>"s", "pay_type"=>"Paypal"}, "commit"=>"Place Order"}
D, [2015-01-01T10:00:10.306150 #10344] DEBUG -- :   [1m[35mCart Load (1.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 34]]
I, [2015-01-01T10:00:10.329152 #10344]  INFO -- : log info
D, [2015-01-01T10:00:10.367154 #10344] DEBUG -- : Unpermitted parameters: shipping_address1
D, [2015-01-01T10:00:10.434158 #10344] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 34]]
I, [2015-01-01T10:00:10.476160 #10344]  INFO -- : just about to payment_method and save
I, [2015-01-01T10:00:10.594167 #10344]  INFO -- : #<Order id: nil, name: "s", address: "s", email: "s", pay_type: "Paypal", created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T10:00:10.627169 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-01T10:00:10.780178 #10344] DEBUG -- :   [1m[36mSQL (4.0ms)[0m  [1mINSERT INTO "orders" ("address", "created_at", "email", "name", "pay_type", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "s"], ["created_at", Thu, 01 Jan 2015 10:00:10 UTC +00:00], ["email", "s"], ["name", "s"], ["pay_type", "Paypal"], ["updated_at", Thu, 01 Jan 2015 10:00:10 UTC +00:00]]
D, [2015-01-01T10:00:10.881183 #10344] DEBUG -- :   [1m[35mSQL (1.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 41  [["cart_id", nil], ["order_id", 40], ["updated_at", Thu, 01 Jan 2015 10:00:10 UTC +00:00]]
I, [2015-01-01T10:00:10.911185 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T10:00:10.998190 #10344] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-01T10:00:11.023191 #10344]  INFO -- : in order=
I, [2015-01-01T10:00:11.050193 #10344]  INFO -- : in payment.create
I, [2015-01-01T10:00:11.234204 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/40/confirm", "cancel_url"=>"http://localhost:3000/orders/40/cancel"}}
I, [2015-01-01T10:00:11.815237 #10344]  INFO -- : #<ActiveModel::Errors:0x00000007f0a2d8 @base=#<Payment:0x00000007f351b8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007f34f38 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007f1d400 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007f1d338 @error=nil, @total="19.99", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007f1d068 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007f1ce38 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007f1c410 @error=nil, @return_url="http://localhost:3000/orders/40/confirm", @cancel_url="http://localhost:3000/orders/40/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007f0a2d8 ...>>, @messages={}>
I, [2015-01-01T10:00:11.845238 #10344]  INFO -- : got past invalid
I, [2015-01-01T10:00:11.892241 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/oauth2/token
I, [2015-01-01T10:00:13.988361 #10344]  INFO -- : Response[200]: OK, Duration: 2.067s
I, [2015-01-01T10:00:14.049365 #10344]  INFO -- : PayPal-Request-Id: 1797e870-a583-4bad-9216-0c64f46dc8da
I, [2015-01-01T10:00:14.090367 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T10:00:15.383441 #10344]  INFO -- : Response[201]: Created, Duration: 1.261s
I, [2015-01-01T10:00:15.407442 #10344]  INFO -- : back from super
I, [2015-01-01T10:00:15.794464 #10344]  INFO -- : {"id"=>"PAY-6KP63618HS6633843KSSRVMA", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99", "details"=>{"subtotal"=>"19.99"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/40/confirm", "cancel_url"=>"http://localhost:3000/orders/40/cancel"}, "create_time"=>"2015-01-01T10:00:16Z", "update_time"=>"2015-01-01T10:00:16Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KP63618HS6633843KSSRVMA", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-2AE44877DE457931K", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KP63618HS6633843KSSRVMA/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-01T10:00:15.980475 #10344] DEBUG -- :   [1m[35mSQL (4.0ms)[0m  UPDATE "orders" SET "name" = ?, "address" = ?, "email" = ?, "pay_type" = ?, "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ? WHERE "orders"."id" = 40  [["name", "s"], ["address", "s"], ["email", "s"], ["pay_type", "Paypal"], ["created_at", Thu, 01 Jan 2015 10:00:10 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 10:00:10 UTC +00:00], ["id", 40], ["payment_id", "PAY-6KP63618HS6633843KSSRVMA"], ["state", "created"]]
I, [2015-01-01T10:00:16.008477 #10344]  INFO -- : @payment save just done
I, [2015-01-01T10:00:16.920529 #10344]  INFO -- : #<Payment:0x00000007f351b8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007e6d410 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000007e6d320 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000007e6d2a8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007e6d190 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007e6d118 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000007e6cf88 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007e6cd80 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007e6cc68 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007f1c410 @error=nil, @return_url="http://localhost:3000/orders/40/confirm", @cancel_url="http://localhost:3000/orders/40/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007f0a2d8 @base=#<Payment:0x00000007f351b8 ...>, @messages={}>, @request_id="1797e870-a583-4bad-9216-0c64f46dc8da", @header={}, @id="PAY-6KP63618HS6633843KSSRVMA", @create_time="2015-01-01T10:00:16Z", @update_time="2015-01-01T10:00:16Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000007e6c7b8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KP63618HS6633843KSSRVMA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007e6c5d8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-2AE44877DE457931K", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007e6c3f8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KP63618HS6633843KSSRVMA/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T10:00:17.836581 #10344]  INFO -- : #<Payment:0x00000007f351b8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007e6d410 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000007e6d320 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000007e6d2a8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007e6d190 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007e6d118 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000007e6cf88 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007e6cd80 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007e6cc68 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007f1c410 @error=nil, @return_url="http://localhost:3000/orders/40/confirm", @cancel_url="http://localhost:3000/orders/40/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007f0a2d8 @base=#<Payment:0x00000007f351b8 ...>, @messages={}>, @request_id="1797e870-a583-4bad-9216-0c64f46dc8da", @header={}, @id="PAY-6KP63618HS6633843KSSRVMA", @create_time="2015-01-01T10:00:16Z", @update_time="2015-01-01T10:00:16Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000007e6c7b8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KP63618HS6633843KSSRVMA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007e6c5d8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-2AE44877DE457931K", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007e6c3f8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KP63618HS6633843KSSRVMA/execute", @rel="execute", @method="POST">]>
D, [2015-01-01T10:00:18.111597 #10344] DEBUG -- :   [1m[36m (242.0ms)[0m  [1mcommit transaction[0m
I, [2015-01-01T10:00:18.139598 #10344]  INFO -- : about to approve url
I, [2015-01-01T10:00:18.964646 #10344]  INFO -- : #<Payment:0x00000007f351b8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007e6d410 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000007e6d320 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000007e6d2a8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007e6d190 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007e6d118 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000007e6cf88 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007e6cd80 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007e6cc68 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007f1c410 @error=nil, @return_url="http://localhost:3000/orders/40/confirm", @cancel_url="http://localhost:3000/orders/40/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007f0a2d8 @base=#<Payment:0x00000007f351b8 ...>, @messages={}>, @request_id="1797e870-a583-4bad-9216-0c64f46dc8da", @header={}, @id="PAY-6KP63618HS6633843KSSRVMA", @create_time="2015-01-01T10:00:16Z", @update_time="2015-01-01T10:00:16Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000007e6c7b8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KP63618HS6633843KSSRVMA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007e6c5d8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-2AE44877DE457931K", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007e6c3f8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KP63618HS6633843KSSRVMA/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T10:01:55.644175 #10344]  INFO -- : #<Payment:0x00000007f351b8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007e6d410 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000007e6d320 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000007e6d2a8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007e6d190 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007e6d118 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000007e6cf88 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007e6cd80 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007e6cc68 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007f1c410 @error=nil, @return_url="http://localhost:3000/orders/40/confirm", @cancel_url="http://localhost:3000/orders/40/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007f0a2d8 @base=#<Payment:0x00000007f351b8 ...>, @messages={}>, @request_id="1797e870-a583-4bad-9216-0c64f46dc8da", @header={}, @id="PAY-6KP63618HS6633843KSSRVMA", @create_time="2015-01-01T10:00:16Z", @update_time="2015-01-01T10:00:16Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000007e6c7b8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KP63618HS6633843KSSRVMA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007e6c5d8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-2AE44877DE457931K", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007e6c3f8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KP63618HS6633843KSSRVMA/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T10:02:08.237896 #10344]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-2AE44877DE457931K
I, [2015-01-01T10:02:09.300957 #10344]  INFO -- : #<Payment:0x00000007f351b8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007e6d410 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000007e6d320 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000007e6d2a8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007e6d190 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007e6d118 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000007e6cf88 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007e6cd80 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007e6cc68 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007f1c410 @error=nil, @return_url="http://localhost:3000/orders/40/confirm", @cancel_url="http://localhost:3000/orders/40/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007f0a2d8 @base=#<Payment:0x00000007f351b8 ...>, @messages={}>, @request_id="1797e870-a583-4bad-9216-0c64f46dc8da", @header={}, @id="PAY-6KP63618HS6633843KSSRVMA", @create_time="2015-01-01T10:00:16Z", @update_time="2015-01-01T10:00:16Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000007e6c7b8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KP63618HS6633843KSSRVMA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007e6c5d8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-2AE44877DE457931K", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007e6c3f8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KP63618HS6633843KSSRVMA/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T10:02:13.777213 #10344]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-2AE44877DE457931K
I, [2015-01-01T10:02:13.818215 #10344]  INFO -- : Completed 302 Found in 123532ms (ActiveRecord: 255.0ms)
D, [2015-01-01T10:03:19.672982 #10344] DEBUG -- : 
D, [2015-01-01T10:03:19.692983 #10344] DEBUG -- : 
I, [2015-01-01T10:03:19.788988 #10344]  INFO -- : Started GET "/orders/40/confirm?paymentId=PAY-6KP63618HS6633843KSSRVMA&token=EC-2AE44877DE457931K&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-01 10:03:19 +0000
I, [2015-01-01T10:03:22.008115 #10344]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-01T10:03:22.094120 #10344]  INFO -- :   Parameters: {"paymentId"=>"PAY-6KP63618HS6633843KSSRVMA", "token"=>"EC-2AE44877DE457931K", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"40"}
D, [2015-01-01T10:03:22.219127 #10344] DEBUG -- :   [1m[35mUser Load (3.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T10:03:22.402138 #10344] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T10:03:22.551146 #10344] DEBUG -- :   [1m[35mOrder Load (3.0ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "40"]]
I, [2015-01-01T10:03:27.418425 #10344]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KP63618HS6633843KSSRVMA
I, [2015-01-01T10:03:28.504487 #10344]  INFO -- : Response[200]: OK, Duration: 1.043s
D, [2015-01-01T10:03:30.075577 #10344] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:03:30.197584 #10344] DEBUG -- :   [1m[35mSQL (6.0ms)[0m  UPDATE "orders" SET "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 40  [["shipping_address1", "1 Main Terrace"], ["updated_at", Thu, 01 Jan 2015 10:03:30 UTC +00:00]]
D, [2015-01-01T10:03:30.462599 #10344] DEBUG -- :   [1m[36m (230.0ms)[0m  [1mcommit transaction[0m
I, [2015-01-01T10:03:30.666610 #10344]  INFO -- :   Rendered orders/_form.html.erb (133.0ms)
I, [2015-01-01T10:03:30.715613 #10344]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (191.0ms)
I, [2015-01-01T10:03:30.898624 #10344]  INFO -- : Completed 200 OK in 8759ms (Views: 385.0ms | ActiveRecord: 259.0ms)
D, [2015-01-01T10:03:31.146638 #10344] DEBUG -- : 
D, [2015-01-01T10:03:31.161639 #10344] DEBUG -- : 
I, [2015-01-01T10:03:31.210642 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 10:03:31 +0000
D, [2015-01-01T10:03:31.341649 #10344] DEBUG -- : 
D, [2015-01-01T10:03:31.360650 #10344] DEBUG -- : 
I, [2015-01-01T10:03:31.400652 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 10:03:31 +0000
D, [2015-01-01T10:03:31.490658 #10344] DEBUG -- : 
D, [2015-01-01T10:03:31.523659 #10344] DEBUG -- : 
I, [2015-01-01T10:03:31.630666 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 10:03:31 +0000
D, [2015-01-01T10:03:31.708670 #10344] DEBUG -- : 
D, [2015-01-01T10:03:31.728671 #10344] DEBUG -- : 
I, [2015-01-01T10:03:31.781674 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 10:03:31 +0000
D, [2015-01-01T10:03:31.850678 #10344] DEBUG -- : 
D, [2015-01-01T10:03:31.876680 #10344] DEBUG -- : 
I, [2015-01-01T10:03:31.928683 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 10:03:31 +0000
D, [2015-01-01T10:03:32.018688 #10344] DEBUG -- : 
D, [2015-01-01T10:03:32.035689 #10344] DEBUG -- : 
I, [2015-01-01T10:03:32.081691 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 10:03:32 +0000
D, [2015-01-01T10:03:32.148695 #10344] DEBUG -- : 
D, [2015-01-01T10:03:32.174697 #10344] DEBUG -- : 
I, [2015-01-01T10:03:32.219699 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 10:03:32 +0000
D, [2015-01-01T10:03:32.297704 #10344] DEBUG -- : 
D, [2015-01-01T10:03:32.315705 #10344] DEBUG -- : 
I, [2015-01-01T10:03:32.371708 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 10:03:32 +0000
D, [2015-01-01T10:03:32.438712 #10344] DEBUG -- : 
D, [2015-01-01T10:03:32.466713 #10344] DEBUG -- : 
I, [2015-01-01T10:03:32.515716 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 10:03:32 +0000
D, [2015-01-01T10:03:32.591721 #10344] DEBUG -- : 
D, [2015-01-01T10:03:32.615722 #10344] DEBUG -- : 
I, [2015-01-01T10:03:32.667725 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 10:03:32 +0000
D, [2015-01-01T10:03:32.743729 #10344] DEBUG -- : 
D, [2015-01-01T10:03:32.763730 #10344] DEBUG -- : 
I, [2015-01-01T10:03:32.816733 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 10:03:32 +0000
D, [2015-01-01T10:03:32.902738 #10344] DEBUG -- : 
D, [2015-01-01T10:03:32.920739 #10344] DEBUG -- : 
I, [2015-01-01T10:03:32.969742 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 10:03:32 +0000
D, [2015-01-01T10:03:33.049747 #10344] DEBUG -- : 
D, [2015-01-01T10:03:33.066748 #10344] DEBUG -- : 
I, [2015-01-01T10:03:33.108750 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 10:03:33 +0000
D, [2015-01-01T10:03:33.191755 #10344] DEBUG -- : 
D, [2015-01-01T10:03:33.222757 #10344] DEBUG -- : 
I, [2015-01-01T10:03:33.278760 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 10:03:33 +0000
D, [2015-01-01T10:03:33.350764 #10344] DEBUG -- : 
D, [2015-01-01T10:03:33.372765 #10344] DEBUG -- : 
I, [2015-01-01T10:03:33.421768 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 10:03:33 +0000
D, [2015-01-01T10:03:33.490772 #10344] DEBUG -- : 
D, [2015-01-01T10:03:33.529774 #10344] DEBUG -- : 
I, [2015-01-01T10:03:33.579777 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 10:03:33 +0000
D, [2015-01-01T10:03:33.654781 #10344] DEBUG -- : 
D, [2015-01-01T10:03:33.668782 #10344] DEBUG -- : 
I, [2015-01-01T10:03:33.711785 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 10:03:33 +0000
D, [2015-01-01T10:03:33.792789 #10344] DEBUG -- : 
D, [2015-01-01T10:03:33.810790 #10344] DEBUG -- : 
I, [2015-01-01T10:03:33.858793 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 10:03:33 +0000
D, [2015-01-01T10:03:33.931797 #10344] DEBUG -- : 
D, [2015-01-01T10:03:33.957799 #10344] DEBUG -- : 
I, [2015-01-01T10:03:34.004801 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 10:03:33 +0000
D, [2015-01-01T10:03:34.080806 #10344] DEBUG -- : 
D, [2015-01-01T10:03:34.100807 #10344] DEBUG -- : 
I, [2015-01-01T10:03:34.151810 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 10:03:34 +0000
D, [2015-01-01T10:03:34.221814 #10344] DEBUG -- : 
D, [2015-01-01T10:03:34.247815 #10344] DEBUG -- : 
I, [2015-01-01T10:03:34.300818 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 10:03:34 +0000
D, [2015-01-01T10:03:34.384823 #10344] DEBUG -- : 
D, [2015-01-01T10:03:34.405824 #10344] DEBUG -- : 
I, [2015-01-01T10:03:34.455827 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 10:03:34 +0000
D, [2015-01-01T10:03:34.524831 #10344] DEBUG -- : 
D, [2015-01-01T10:03:34.543832 #10344] DEBUG -- : 
I, [2015-01-01T10:03:34.593835 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 10:03:34 +0000
D, [2015-01-01T10:03:34.666839 #10344] DEBUG -- : 
D, [2015-01-01T10:03:34.687840 #10344] DEBUG -- : 
I, [2015-01-01T10:03:34.740843 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 10:03:34 +0000
D, [2015-01-01T10:03:34.812848 #10344] DEBUG -- : 
D, [2015-01-01T10:03:34.832849 #10344] DEBUG -- : 
I, [2015-01-01T10:03:34.882852 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 10:03:34 +0000
D, [2015-01-01T10:03:34.953856 #10344] DEBUG -- : 
D, [2015-01-01T10:03:34.972857 #10344] DEBUG -- : 
I, [2015-01-01T10:03:35.023860 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 10:03:34 +0000
D, [2015-01-01T10:03:35.112865 #10344] DEBUG -- : 
D, [2015-01-01T10:03:35.130866 #10344] DEBUG -- : 
I, [2015-01-01T10:03:35.172868 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 10:03:35 +0000
D, [2015-01-01T10:03:35.271874 #10344] DEBUG -- : 
D, [2015-01-01T10:03:35.290875 #10344] DEBUG -- : 
I, [2015-01-01T10:03:35.343878 #10344]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-01 10:03:35 +0000
D, [2015-01-01T10:03:45.472917 #10344] DEBUG -- : 
D, [2015-01-01T10:03:45.492918 #10344] DEBUG -- : 
I, [2015-01-01T10:03:45.547921 #10344]  INFO -- : Started POST "/orders/40/execute/40/2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-01 10:03:45 +0000
I, [2015-01-01T10:03:45.673928 #10344]  INFO -- : Processing by OrdersController#execute as HTML
I, [2015-01-01T10:03:45.747932 #10344]  INFO -- :   Parameters: {"authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order_id"=>"40", "payer_id"=>"2VZ7YQDDDPPC4"}
D, [2015-01-01T10:03:45.834937 #10344] DEBUG -- :   [1m[35mOrder Load (2.0ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "40"]]
I, [2015-01-01T10:03:59.000690 #10344]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KP63618HS6633843KSSRVMA
I, [2015-01-01T10:04:00.098753 #10344]  INFO -- : Response[200]: OK, Duration: 1.067s
I, [2015-01-01T10:04:00.169757 #10344]  INFO -- : PayPal-Request-Id: 39387731-5ce1-4aaa-98a8-0dacbf3a060f
I, [2015-01-01T10:04:00.236761 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KP63618HS6633843KSSRVMA/execute
I, [2015-01-01T10:04:03.098925 #10344]  INFO -- : Response[200]: OK, Duration: 2.820s
D, [2015-01-01T10:04:03.168929 #10344] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:04:03.309937 #10344] DEBUG -- :   [1m[35mSQL (6.0ms)[0m  UPDATE "orders" SET "state" = ?, "updated_at" = ? WHERE "orders"."id" = 40  [["state", "approved"], ["updated_at", Thu, 01 Jan 2015 10:04:03 UTC +00:00]]
D, [2015-01-01T10:04:03.488947 #10344] DEBUG -- :   [1m[36m (136.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T10:04:03.639956 #10344] DEBUG -- :   [1m[35mCart Load (3.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 34]]
D, [2015-01-01T10:04:03.751962 #10344] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:04:03.924972 #10344] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 34]]
D, [2015-01-01T10:04:04.007977 #10344] DEBUG -- :   [1m[36mSQL (4.0ms)[0m  [1mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 34]]
D, [2015-01-01T10:04:04.162986 #10344] DEBUG -- :   [1m[35m (108.0ms)[0m  commit transaction
I, [2015-01-01T10:04:16.102669 #10344]  INFO -- :   Rendered order_notifier/received.html.erb (7.0ms)
D, [2015-01-01T10:04:16.251677 #10344] DEBUG -- :   [1m[36mLineItem Load (3.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 40]]
D, [2015-01-01T10:04:16.722704 #10344] DEBUG -- :   [1m[35mProduct Load (3.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-01T10:04:16.920715 #10344]  INFO -- :   Rendered line_items/_line_item.text.erb (388.0ms)
I, [2015-01-01T10:04:16.965718 #10344]  INFO -- :   Rendered order_notifier/received.text.erb (803.0ms)
I, [2015-01-01T10:04:18.150786 #10344]  INFO -- : 
Sent mail to s (900.1ms)
D, [2015-01-01T10:04:18.666815 #10344] DEBUG -- : Date: Thu, 01 Jan 2015 10:04:17 +0000
From: Simon King <simon.king65@gmail.com>
To: s
Message-ID: <54a51ba15b3ed_28684f4b218225fc@Simon-PC.mail>
Subject: King Clothing Order Confirmation
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_54a51ba150f1_28684f4b218224d6";
 charset=UTF-8
Content-Transfer-Encoding: 7bit


----==_mimepart_54a51ba150f1_28684f4b218224d6
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear s

Thank you for your recent order from King Clothing.

You ordered the following items:

 1 x Camo Print Tee
We'll send you a separate e-mail when your order ships.
----==_mimepart_54a51ba150f1_28684f4b218224d6
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<h1>OrderNotifier#received</h1>

<p>
  , thank you for your order, we will email you again once your order has been despatched. We hope you enjoy wearing your King Clothing brand tee-shirt.
</p>

----==_mimepart_54a51ba150f1_28684f4b218224d6--

I, [2015-01-01T10:04:18.721818 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T10:04:18.779822 #10344]  INFO -- : Completed 302 Found in 32977ms (ActiveRecord: 290.0ms)
D, [2015-01-01T10:04:18.863826 #10344] DEBUG -- : 
D, [2015-01-01T10:04:18.890828 #10344] DEBUG -- : 
I, [2015-01-01T10:04:18.944831 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 10:04:18 +0000
I, [2015-01-01T10:04:19.095840 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T10:04:19.161843 #10344] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:04:19.322853 #10344] DEBUG -- :   [1m[35mSQL (8.0ms)[0m  INSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 01 Jan 2015 10:04:19 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 10:04:19 UTC +00:00]]
D, [2015-01-01T10:04:19.493862 #10344] DEBUG -- :   [1m[36m (119.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T10:04:19.618870 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T10:04:19.715875 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (4.0ms)
I, [2015-01-01T10:04:19.774879 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (193.0ms)
D, [2015-01-01T10:04:20.039894 #10344] DEBUG -- :   [1m[36mLineItem Exists (3.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 35]]
D, [2015-01-01T10:04:20.154900 #10344] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
I, [2015-01-01T10:04:20.199903 #10344]  INFO -- :   Rendered collection (1.0ms)
I, [2015-01-01T10:04:20.286908 #10344]  INFO -- :   Rendered carts/_cart.html.erb (184.0ms)
I, [2015-01-01T10:04:20.375913 #10344]  INFO -- : Completed 200 OK in 1218ms (Views: 806.0ms | ActiveRecord: 135.0ms)
D, [2015-01-01T10:04:20.593925 #10344] DEBUG -- : 
D, [2015-01-01T10:04:20.645928 #10344] DEBUG -- : 
I, [2015-01-01T10:04:20.711932 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 10:04:20 +0000
D, [2015-01-01T10:04:20.806938 #10344] DEBUG -- : 
D, [2015-01-01T10:04:20.832939 #10344] DEBUG -- : 
I, [2015-01-01T10:04:20.896943 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 10:04:20 +0000
D, [2015-01-01T10:04:20.972947 #10344] DEBUG -- : 
D, [2015-01-01T10:04:20.996948 #10344] DEBUG -- : 
I, [2015-01-01T10:04:21.057952 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 10:04:20 +0000
D, [2015-01-01T10:04:21.131956 #10344] DEBUG -- : 
D, [2015-01-01T10:04:21.158958 #10344] DEBUG -- : 
I, [2015-01-01T10:04:21.226962 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 10:04:21 +0000
D, [2015-01-01T10:04:21.306966 #10344] DEBUG -- : 
D, [2015-01-01T10:04:21.330968 #10344] DEBUG -- : 
I, [2015-01-01T10:04:21.394971 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 10:04:21 +0000
D, [2015-01-01T10:04:21.474976 #10344] DEBUG -- : 
D, [2015-01-01T10:04:21.501977 #10344] DEBUG -- : 
I, [2015-01-01T10:04:21.569981 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 10:04:21 +0000
D, [2015-01-01T10:04:21.641985 #10344] DEBUG -- : 
D, [2015-01-01T10:04:21.664987 #10344] DEBUG -- : 
I, [2015-01-01T10:04:21.729990 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 10:04:21 +0000
D, [2015-01-01T10:04:21.802995 #10344] DEBUG -- : 
D, [2015-01-01T10:04:21.826996 #10344] DEBUG -- : 
I, [2015-01-01T10:04:21.892000 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 10:04:21 +0000
D, [2015-01-01T10:04:21.965004 #10344] DEBUG -- : 
D, [2015-01-01T10:04:21.991005 #10344] DEBUG -- : 
I, [2015-01-01T10:04:22.051009 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 10:04:21 +0000
D, [2015-01-01T10:04:22.126013 #10344] DEBUG -- : 
D, [2015-01-01T10:04:22.152015 #10344] DEBUG -- : 
I, [2015-01-01T10:04:22.220018 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 10:04:22 +0000
D, [2015-01-01T10:04:22.299023 #10344] DEBUG -- : 
D, [2015-01-01T10:04:22.323024 #10344] DEBUG -- : 
I, [2015-01-01T10:04:22.389028 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 10:04:22 +0000
D, [2015-01-01T10:04:22.474033 #10344] DEBUG -- : 
D, [2015-01-01T10:04:22.502035 #10344] DEBUG -- : 
I, [2015-01-01T10:04:22.568038 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 10:04:22 +0000
D, [2015-01-01T10:04:22.641042 #10344] DEBUG -- : 
D, [2015-01-01T10:04:22.664044 #10344] DEBUG -- : 
I, [2015-01-01T10:04:22.732048 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 10:04:22 +0000
D, [2015-01-01T10:04:22.806052 #10344] DEBUG -- : 
D, [2015-01-01T10:04:22.829053 #10344] DEBUG -- : 
I, [2015-01-01T10:04:22.901057 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 10:04:22 +0000
D, [2015-01-01T10:04:22.987062 #10344] DEBUG -- : 
D, [2015-01-01T10:04:23.015064 #10344] DEBUG -- : 
I, [2015-01-01T10:04:23.077067 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 10:04:23 +0000
D, [2015-01-01T10:04:23.151072 #10344] DEBUG -- : 
D, [2015-01-01T10:04:23.176073 #10344] DEBUG -- : 
I, [2015-01-01T10:04:23.245077 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 10:04:23 +0000
D, [2015-01-01T10:04:23.318081 #10344] DEBUG -- : 
D, [2015-01-01T10:04:23.347083 #10344] DEBUG -- : 
I, [2015-01-01T10:04:23.406086 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 10:04:23 +0000
D, [2015-01-01T10:04:23.484091 #10344] DEBUG -- : 
D, [2015-01-01T10:04:23.510092 #10344] DEBUG -- : 
I, [2015-01-01T10:04:23.577096 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 10:04:23 +0000
D, [2015-01-01T10:04:23.651100 #10344] DEBUG -- : 
D, [2015-01-01T10:04:23.676102 #10344] DEBUG -- : 
I, [2015-01-01T10:04:23.741105 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 10:04:23 +0000
D, [2015-01-01T10:04:23.814110 #10344] DEBUG -- : 
D, [2015-01-01T10:04:23.839111 #10344] DEBUG -- : 
I, [2015-01-01T10:04:23.899114 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 10:04:23 +0000
D, [2015-01-01T10:04:23.973119 #10344] DEBUG -- : 
D, [2015-01-01T10:04:23.997120 #10344] DEBUG -- : 
I, [2015-01-01T10:04:24.060124 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 10:04:23 +0000
D, [2015-01-01T10:04:24.142128 #10344] DEBUG -- : 
D, [2015-01-01T10:04:24.171130 #10344] DEBUG -- : 
I, [2015-01-01T10:04:24.240134 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 10:04:24 +0000
D, [2015-01-01T10:04:24.317138 #10344] DEBUG -- : 
D, [2015-01-01T10:04:24.343140 #10344] DEBUG -- : 
I, [2015-01-01T10:04:24.405143 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 10:04:24 +0000
D, [2015-01-01T10:04:24.484148 #10344] DEBUG -- : 
D, [2015-01-01T10:04:24.512150 #10344] DEBUG -- : 
I, [2015-01-01T10:04:24.579153 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 10:04:24 +0000
D, [2015-01-01T10:04:24.652158 #10344] DEBUG -- : 
D, [2015-01-01T10:04:24.677159 #10344] DEBUG -- : 
I, [2015-01-01T10:04:24.741163 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 10:04:24 +0000
D, [2015-01-01T10:04:24.816167 #10344] DEBUG -- : 
D, [2015-01-01T10:04:24.842168 #10344] DEBUG -- : 
I, [2015-01-01T10:04:24.907172 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 10:04:24 +0000
D, [2015-01-01T10:04:24.996177 #10344] DEBUG -- : 
D, [2015-01-01T10:04:25.020179 #10344] DEBUG -- : 
I, [2015-01-01T10:04:25.075182 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 10:04:25 +0000
D, [2015-01-01T10:04:25.140185 #10344] DEBUG -- : 
D, [2015-01-01T10:04:25.169187 #10344] DEBUG -- : 
I, [2015-01-01T10:04:25.233191 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 10:04:25 +0000
D, [2015-01-01T10:04:25.302195 #10344] DEBUG -- : 
D, [2015-01-01T10:04:25.322196 #10344] DEBUG -- : 
I, [2015-01-01T10:04:25.375199 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 10:04:25 +0000
D, [2015-01-01T10:15:27.641000 #10344] DEBUG -- : 
D, [2015-01-01T10:15:27.656600 #10344] DEBUG -- : 
I, [2015-01-01T10:15:27.719000 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 10:15:27 +0000
I, [2015-01-01T10:15:29.926807 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T10:15:30.082807 #10344] DEBUG -- :   [1m[36mCart Load (15.6ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T10:15:30.344408 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T10:15:30.547209 #10344]  INFO -- : Cache digest for store/index.xml: a93d4e2e981ab3dfce98a095c3b6c059
I, [2015-01-01T10:15:30.625209 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (0.0ms)
I, [2015-01-01T10:15:30.687609 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (402.0ms)
D, [2015-01-01T10:15:30.984009 #10344] DEBUG -- :   [1m[36mLineItem Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 35]]
D, [2015-01-01T10:15:31.108810 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
I, [2015-01-01T10:15:31.155610 #10344]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-01T10:15:31.296010 #10344]  INFO -- :   Rendered carts/_cart.html.erb (265.2ms)
I, [2015-01-01T10:15:31.342810 #10344]  INFO -- : Completed 500 Internal Server Error in 1385ms
F, [2015-01-01T10:15:31.717211 #10344] FATAL -- : 
ActionView::Template::Error (No route matches {:controller=>"orders", :action=>"ppcheckout"}):
     8: 	</tr>
     9: </table>
    10:   <div class="ppbutton">
    11:     <%= link_to image_tag("https://www.paypal.com/en_US/i/btn/btn_xpressCheckout.gif"), :controller => 'orders', :action => 'ppcheckout' %>
    12:     </div>
    13: 
    14: <%= button_to "Checkout", new_order_path, method: :get %>
  app/views/carts/_cart.html.erb:11:in `_app_views_carts__cart_html_erb___1502487567_47939180'
  app/views/layouts/application.html.erb:18:in `block in _app_views_layouts_application_html_erb___1305337884_84093600'
  app/helpers/application_helper.rb:6:in `hidden_div_if'
  app/views/layouts/application.html.erb:17:in `_app_views_layouts_application_html_erb___1305337884_84093600'


I, [2015-01-01T10:15:32.281812 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (15.6ms)
I, [2015-01-01T10:15:32.437812 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (15.6ms)
I, [2015-01-01T10:15:32.515812 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (343.2ms)
D, [2015-01-01T10:15:32.686219 #10344] DEBUG -- : 
D, [2015-01-01T10:15:32.708220 #10344] DEBUG -- : 
I, [2015-01-01T10:15:32.752222 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 10:15:32 +0000
I, [2015-01-01T10:15:32.857228 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T10:15:32.931233 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T10:15:33.025238 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T10:15:33.100242 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (4.0ms)
I, [2015-01-01T10:15:33.148245 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (145.0ms)
D, [2015-01-01T10:15:33.370258 #10344] DEBUG -- :   [1m[36mLineItem Exists (3.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 35]]
D, [2015-01-01T10:15:33.458263 #10344] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
I, [2015-01-01T10:15:33.490265 #10344]  INFO -- :   Rendered collection (1.0ms)
I, [2015-01-01T10:15:33.548268 #10344]  INFO -- :   Rendered carts/_cart.html.erb (134.0ms)
I, [2015-01-01T10:15:33.584270 #10344]  INFO -- : Completed 500 Internal Server Error in 691ms
F, [2015-01-01T10:15:33.941290 #10344] FATAL -- : 
ActionView::Template::Error (No route matches {:controller=>"orders", :action=>"ppcheckout"}):
     8: 	</tr>
     9: </table>
    10:   <div class="ppbutton">
    11:     <%= link_to image_tag("https://www.paypal.com/en_US/i/btn/btn_xpressCheckout.gif"), :controller => 'orders', :action => 'ppcheckout' %>
    12:     </div>
    13: 
    14: <%= button_to "Checkout", new_order_path, method: :get %>
  app/views/carts/_cart.html.erb:11:in `_app_views_carts__cart_html_erb___1502487567_51114000'
  app/views/layouts/application.html.erb:18:in `block in _app_views_layouts_application_html_erb___1305337884_84093600'
  app/helpers/application_helper.rb:6:in `hidden_div_if'
  app/views/layouts/application.html.erb:17:in `_app_views_layouts_application_html_erb___1305337884_84093600'


I, [2015-01-01T10:15:34.353314 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (23.0ms)
I, [2015-01-01T10:15:34.496322 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (12.0ms)
I, [2015-01-01T10:15:34.586327 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (299.0ms)
D, [2015-01-01T10:17:23.710458 #10344] DEBUG -- : 
D, [2015-01-01T10:17:23.731459 #10344] DEBUG -- : 
I, [2015-01-01T10:17:23.774461 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 10:17:23 +0000
I, [2015-01-01T10:17:26.713629 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T10:17:26.867638 #10344] DEBUG -- :   [1m[36mCart Load (3.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T10:17:27.125653 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T10:17:27.385668 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (4.0ms)
I, [2015-01-01T10:17:27.441671 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (347.0ms)
D, [2015-01-01T10:17:27.798692 #10344] DEBUG -- :   [1m[36mLineItem Exists (3.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 35]]
D, [2015-01-01T10:17:27.906698 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
I, [2015-01-01T10:17:27.947700 #10344]  INFO -- :   Rendered collection (1.0ms)
I, [2015-01-01T10:17:28.071707 #10344]  INFO -- :   Rendered carts/_cart.html.erb (215.0ms)
I, [2015-01-01T10:17:28.155712 #10344]  INFO -- : Completed 200 OK in 1386ms (Views: 1059.1ms | ActiveRecord: 35.0ms)
D, [2015-01-01T10:17:28.346723 #10344] DEBUG -- : 
D, [2015-01-01T10:17:28.380725 #10344] DEBUG -- : 
I, [2015-01-01T10:17:28.460729 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 10:17:28 +0000
D, [2015-01-01T10:17:28.543734 #10344] DEBUG -- : 
D, [2015-01-01T10:17:28.568736 #10344] DEBUG -- : 
I, [2015-01-01T10:17:28.633739 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 10:17:28 +0000
D, [2015-01-01T10:17:28.709744 #10344] DEBUG -- : 
D, [2015-01-01T10:17:28.735745 #10344] DEBUG -- : 
I, [2015-01-01T10:17:28.799749 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 10:17:28 +0000
D, [2015-01-01T10:17:28.875753 #10344] DEBUG -- : 
D, [2015-01-01T10:17:28.898754 #10344] DEBUG -- : 
I, [2015-01-01T10:17:28.963758 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 10:17:28 +0000
D, [2015-01-01T10:17:29.040763 #10344] DEBUG -- : 
D, [2015-01-01T10:17:29.064764 #10344] DEBUG -- : 
I, [2015-01-01T10:17:29.126768 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 10:17:29 +0000
D, [2015-01-01T10:17:29.208772 #10344] DEBUG -- : 
D, [2015-01-01T10:17:29.229773 #10344] DEBUG -- : 
I, [2015-01-01T10:17:29.281776 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 10:17:29 +0000
D, [2015-01-01T10:17:29.363781 #10344] DEBUG -- : 
D, [2015-01-01T10:17:29.391783 #10344] DEBUG -- : 
I, [2015-01-01T10:17:29.445786 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 10:17:29 +0000
D, [2015-01-01T10:17:29.527790 #10344] DEBUG -- : 
D, [2015-01-01T10:17:29.548792 #10344] DEBUG -- : 
I, [2015-01-01T10:17:29.622796 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 10:17:29 +0000
D, [2015-01-01T10:17:29.702800 #10344] DEBUG -- : 
D, [2015-01-01T10:17:29.724802 #10344] DEBUG -- : 
I, [2015-01-01T10:17:29.780805 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 10:17:29 +0000
D, [2015-01-01T10:17:29.859809 #10344] DEBUG -- : 
D, [2015-01-01T10:17:29.878811 #10344] DEBUG -- : 
I, [2015-01-01T10:17:29.931814 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 10:17:29 +0000
D, [2015-01-01T10:17:30.014818 #10344] DEBUG -- : 
D, [2015-01-01T10:17:30.037820 #10344] DEBUG -- : 
I, [2015-01-01T10:17:30.096823 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 10:17:30 +0000
D, [2015-01-01T10:17:30.181828 #10344] DEBUG -- : 
D, [2015-01-01T10:17:30.203829 #10344] DEBUG -- : 
I, [2015-01-01T10:17:30.256832 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 10:17:30 +0000
D, [2015-01-01T10:17:30.342837 #10344] DEBUG -- : 
D, [2015-01-01T10:17:30.362838 #10344] DEBUG -- : 
I, [2015-01-01T10:17:30.416841 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 10:17:30 +0000
D, [2015-01-01T10:17:30.498846 #10344] DEBUG -- : 
D, [2015-01-01T10:17:30.517847 #10344] DEBUG -- : 
I, [2015-01-01T10:17:30.576850 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 10:17:30 +0000
D, [2015-01-01T10:17:30.657855 #10344] DEBUG -- : 
D, [2015-01-01T10:17:30.680856 #10344] DEBUG -- : 
I, [2015-01-01T10:17:30.734859 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 10:17:30 +0000
D, [2015-01-01T10:17:30.814864 #10344] DEBUG -- : 
D, [2015-01-01T10:17:30.836865 #10344] DEBUG -- : 
I, [2015-01-01T10:17:30.890868 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 10:17:30 +0000
D, [2015-01-01T10:17:30.981874 #10344] DEBUG -- : 
D, [2015-01-01T10:17:31.029876 #10344] DEBUG -- : 
I, [2015-01-01T10:17:31.090880 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 10:17:31 +0000
D, [2015-01-01T10:17:31.173885 #10344] DEBUG -- : 
D, [2015-01-01T10:17:31.196886 #10344] DEBUG -- : 
I, [2015-01-01T10:17:31.248889 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 10:17:31 +0000
D, [2015-01-01T10:17:31.336894 #10344] DEBUG -- : 
D, [2015-01-01T10:17:31.357895 #10344] DEBUG -- : 
I, [2015-01-01T10:17:31.408898 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 10:17:31 +0000
D, [2015-01-01T10:17:31.508904 #10344] DEBUG -- : 
D, [2015-01-01T10:17:31.528905 #10344] DEBUG -- : 
I, [2015-01-01T10:17:31.583908 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 10:17:31 +0000
D, [2015-01-01T10:17:31.662913 #10344] DEBUG -- : 
D, [2015-01-01T10:17:31.682914 #10344] DEBUG -- : 
I, [2015-01-01T10:17:31.735917 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 10:17:31 +0000
D, [2015-01-01T10:17:31.826922 #10344] DEBUG -- : 
D, [2015-01-01T10:17:31.849923 #10344] DEBUG -- : 
I, [2015-01-01T10:17:31.912927 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 10:17:31 +0000
D, [2015-01-01T10:17:31.990931 #10344] DEBUG -- : 
D, [2015-01-01T10:17:32.011933 #10344] DEBUG -- : 
I, [2015-01-01T10:17:32.068936 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 10:17:32 +0000
D, [2015-01-01T10:17:32.140940 #10344] DEBUG -- : 
D, [2015-01-01T10:17:32.161941 #10344] DEBUG -- : 
I, [2015-01-01T10:17:32.213944 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 10:17:32 +0000
D, [2015-01-01T10:17:32.292949 #10344] DEBUG -- : 
D, [2015-01-01T10:17:32.311950 #10344] DEBUG -- : 
I, [2015-01-01T10:17:32.363953 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 10:17:32 +0000
D, [2015-01-01T10:17:32.436957 #10344] DEBUG -- : 
D, [2015-01-01T10:17:32.456958 #10344] DEBUG -- : 
I, [2015-01-01T10:17:32.509961 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 10:17:32 +0000
D, [2015-01-01T10:17:32.607967 #10344] DEBUG -- : 
D, [2015-01-01T10:17:32.632968 #10344] DEBUG -- : 
I, [2015-01-01T10:17:32.699972 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 10:17:32 +0000
D, [2015-01-01T10:17:32.780977 #10344] DEBUG -- : 
D, [2015-01-01T10:17:32.800978 #10344] DEBUG -- : 
I, [2015-01-01T10:17:32.847980 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 10:17:32 +0000
D, [2015-01-01T10:17:32.921985 #10344] DEBUG -- : 
D, [2015-01-01T10:17:32.938986 #10344] DEBUG -- : 
I, [2015-01-01T10:17:32.992989 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 10:17:32 +0000
D, [2015-01-01T10:17:33.063993 #10344] DEBUG -- : 
D, [2015-01-01T10:17:33.083994 #10344] DEBUG -- : 
I, [2015-01-01T10:17:33.128996 #10344]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-01 10:17:33 +0000
D, [2015-01-01T10:17:34.641212 #10344] DEBUG -- : 
D, [2015-01-01T10:17:34.672412 #10344] DEBUG -- : 
I, [2015-01-01T10:17:34.719212 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 10:17:34 +0000
I, [2015-01-01T10:17:34.890812 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T10:17:34.968813 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T10:17:35.046813 #10344] DEBUG -- :   [1m[36mCart Load (15.6ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T10:17:35.124813 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-01T10:17:35.234013 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 35]]
D, [2015-01-01T10:17:35.532414 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T10:17:35.579214 #10344] DEBUG -- :   [1m[36m (15.6ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:17:35.782014 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 35], ["created_at", Thu, 01 Jan 2015 10:17:35 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:835ee88,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 10:17:35 UTC +00:00]]
D, [2015-01-01T10:17:36.000414 #10344] DEBUG -- :   [1m[36m (171.6ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T10:17:36.156415 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
I, [2015-01-01T10:17:36.250015 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T10:17:36.328015 #10344]  INFO -- :   Rendered carts/_cart.html.erb (249.6ms)
I, [2015-01-01T10:17:36.390415 #10344]  INFO -- :   Rendered line_items/create.js.erb (312.0ms)
I, [2015-01-01T10:17:36.437215 #10344]  INFO -- : Completed 200 OK in 1422ms (Views: 374.4ms | ActiveRecord: 218.4ms)
D, [2015-01-01T10:17:42.527494 #10344] DEBUG -- : 
D, [2015-01-01T10:17:42.558694 #10344] DEBUG -- : 
I, [2015-01-01T10:17:42.605494 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 10:17:42 +0000
I, [2015-01-01T10:17:42.778094 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T10:17:42.902894 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T10:17:43.183695 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
I, [2015-01-01T10:17:43.261695 #10344]  INFO -- : Completed 500 Internal Server Error in 437ms
F, [2015-01-01T10:17:43.386495 #10344] FATAL -- : 
NameError (undefined local variable or method `order' for #<OrdersController:0x00000005987448>):
  app/controllers/orders_controller.rb:142:in `ppcheckout'


I, [2015-01-01T10:17:43.824296 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (15.6ms)
I, [2015-01-01T10:17:43.964696 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (15.6ms)
I, [2015-01-01T10:17:44.089496 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (15.6ms)
I, [2015-01-01T10:17:44.183097 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (453.4ms)
D, [2015-01-01T10:17:44.274498 #10344] DEBUG -- : 
D, [2015-01-01T10:17:44.294500 #10344] DEBUG -- : 
I, [2015-01-01T10:17:44.343502 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 10:17:44 +0000
I, [2015-01-01T10:17:44.467509 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T10:17:44.544514 #10344] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T10:17:44.617518 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
I, [2015-01-01T10:17:44.682522 #10344]  INFO -- : Completed 500 Internal Server Error in 179ms
F, [2015-01-01T10:17:44.815529 #10344] FATAL -- : 
NameError (undefined local variable or method `order' for #<OrdersController:0x0000000934c110>):
  app/controllers/orders_controller.rb:142:in `ppcheckout'


I, [2015-01-01T10:17:45.141548 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (15.0ms)
I, [2015-01-01T10:17:45.270555 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (20.0ms)
I, [2015-01-01T10:17:45.401563 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (14.0ms)
I, [2015-01-01T10:17:45.488568 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (422.0ms)
D, [2015-01-01T10:18:35.705521 #10344] DEBUG -- : 
D, [2015-01-01T10:18:35.728523 #10344] DEBUG -- : 
I, [2015-01-01T10:18:35.776525 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 10:18:35 +0000
I, [2015-01-01T10:18:38.669691 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T10:18:38.833700 #10344] DEBUG -- :   [1m[36mCart Load (3.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T10:18:39.096715 #10344] DEBUG -- :   [1m[35mProduct Load (3.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T10:18:39.375731 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (5.0ms)
I, [2015-01-01T10:18:39.424734 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (369.0ms)
D, [2015-01-01T10:18:39.757753 #10344] DEBUG -- :   [1m[36mLineItem Exists (2.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 35]]
D, [2015-01-01T10:18:39.855759 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
D, [2015-01-01T10:18:40.185777 #10344] DEBUG -- :   [1m[36mProduct Load (4.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-01T10:18:40.248781 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (136.0ms)
I, [2015-01-01T10:18:40.371788 #10344]  INFO -- :   Rendered carts/_cart.html.erb (560.0ms)
I, [2015-01-01T10:18:40.449793 #10344]  INFO -- : Completed 200 OK in 1730ms (Views: 1386.1ms | ActiveRecord: 41.0ms)
D, [2015-01-01T10:18:40.795812 #10344] DEBUG -- : 
D, [2015-01-01T10:18:40.865816 #10344] DEBUG -- : 
I, [2015-01-01T10:18:40.931820 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 10:18:40 +0000
D, [2015-01-01T10:18:41.014825 #10344] DEBUG -- : 
D, [2015-01-01T10:18:41.035826 #10344] DEBUG -- : 
I, [2015-01-01T10:18:41.088829 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 10:18:41 +0000
D, [2015-01-01T10:18:41.166834 #10344] DEBUG -- : 
D, [2015-01-01T10:18:41.190835 #10344] DEBUG -- : 
I, [2015-01-01T10:18:41.244838 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 10:18:41 +0000
D, [2015-01-01T10:18:41.331843 #10344] DEBUG -- : 
D, [2015-01-01T10:18:41.352844 #10344] DEBUG -- : 
I, [2015-01-01T10:18:41.407847 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 10:18:41 +0000
D, [2015-01-01T10:18:41.486852 #10344] DEBUG -- : 
D, [2015-01-01T10:18:41.507853 #10344] DEBUG -- : 
I, [2015-01-01T10:18:41.564856 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 10:18:41 +0000
D, [2015-01-01T10:18:41.653861 #10344] DEBUG -- : 
D, [2015-01-01T10:18:41.676863 #10344] DEBUG -- : 
I, [2015-01-01T10:18:41.731866 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 10:18:41 +0000
D, [2015-01-01T10:18:41.813871 #10344] DEBUG -- : 
D, [2015-01-01T10:18:41.834872 #10344] DEBUG -- : 
I, [2015-01-01T10:18:41.887875 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 10:18:41 +0000
D, [2015-01-01T10:18:41.990881 #10344] DEBUG -- : 
D, [2015-01-01T10:18:42.013882 #10344] DEBUG -- : 
I, [2015-01-01T10:18:42.064885 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 10:18:42 +0000
D, [2015-01-01T10:18:42.140889 #10344] DEBUG -- : 
D, [2015-01-01T10:18:42.168891 #10344] DEBUG -- : 
I, [2015-01-01T10:18:42.225894 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 10:18:42 +0000
D, [2015-01-01T10:18:42.302899 #10344] DEBUG -- : 
D, [2015-01-01T10:18:42.322900 #10344] DEBUG -- : 
I, [2015-01-01T10:18:42.373903 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 10:18:42 +0000
D, [2015-01-01T10:18:42.452907 #10344] DEBUG -- : 
D, [2015-01-01T10:18:42.473908 #10344] DEBUG -- : 
I, [2015-01-01T10:18:42.534912 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 10:18:42 +0000
D, [2015-01-01T10:18:42.621917 #10344] DEBUG -- : 
D, [2015-01-01T10:18:42.652919 #10344] DEBUG -- : 
I, [2015-01-01T10:18:42.742924 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 10:18:42 +0000
D, [2015-01-01T10:18:42.826929 #10344] DEBUG -- : 
D, [2015-01-01T10:18:42.847930 #10344] DEBUG -- : 
I, [2015-01-01T10:18:42.904933 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 10:18:42 +0000
D, [2015-01-01T10:18:42.984938 #10344] DEBUG -- : 
D, [2015-01-01T10:18:43.003939 #10344] DEBUG -- : 
I, [2015-01-01T10:18:43.060942 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 10:18:43 +0000
D, [2015-01-01T10:18:43.140946 #10344] DEBUG -- : 
D, [2015-01-01T10:18:43.164948 #10344] DEBUG -- : 
I, [2015-01-01T10:18:43.222951 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 10:18:43 +0000
D, [2015-01-01T10:18:43.300956 #10344] DEBUG -- : 
D, [2015-01-01T10:18:43.319957 #10344] DEBUG -- : 
I, [2015-01-01T10:18:43.370960 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 10:18:43 +0000
D, [2015-01-01T10:18:43.458965 #10344] DEBUG -- : 
D, [2015-01-01T10:18:43.478966 #10344] DEBUG -- : 
I, [2015-01-01T10:18:43.560971 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 10:18:43 +0000
D, [2015-01-01T10:18:43.644975 #10344] DEBUG -- : 
D, [2015-01-01T10:18:43.662976 #10344] DEBUG -- : 
I, [2015-01-01T10:18:43.711979 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 10:18:43 +0000
D, [2015-01-01T10:18:43.788984 #10344] DEBUG -- : 
D, [2015-01-01T10:18:43.810985 #10344] DEBUG -- : 
I, [2015-01-01T10:18:43.862988 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 10:18:43 +0000
D, [2015-01-01T10:18:43.939992 #10344] DEBUG -- : 
D, [2015-01-01T10:18:43.959993 #10344] DEBUG -- : 
I, [2015-01-01T10:18:44.011996 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 10:18:43 +0000
D, [2015-01-01T10:18:44.090001 #10344] DEBUG -- : 
D, [2015-01-01T10:18:44.112002 #10344] DEBUG -- : 
I, [2015-01-01T10:18:44.167005 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 10:18:44 +0000
D, [2015-01-01T10:18:44.257010 #10344] DEBUG -- : 
D, [2015-01-01T10:18:44.277011 #10344] DEBUG -- : 
I, [2015-01-01T10:18:44.327014 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 10:18:44 +0000
D, [2015-01-01T10:18:44.403019 #10344] DEBUG -- : 
D, [2015-01-01T10:18:44.422020 #10344] DEBUG -- : 
I, [2015-01-01T10:18:44.478023 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 10:18:44 +0000
D, [2015-01-01T10:18:44.556027 #10344] DEBUG -- : 
D, [2015-01-01T10:18:44.575029 #10344] DEBUG -- : 
I, [2015-01-01T10:18:44.627031 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 10:18:44 +0000
D, [2015-01-01T10:18:44.700036 #10344] DEBUG -- : 
D, [2015-01-01T10:18:44.721037 #10344] DEBUG -- : 
I, [2015-01-01T10:18:44.776040 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 10:18:44 +0000
D, [2015-01-01T10:18:44.852044 #10344] DEBUG -- : 
D, [2015-01-01T10:18:44.872045 #10344] DEBUG -- : 
I, [2015-01-01T10:18:44.926049 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 10:18:44 +0000
D, [2015-01-01T10:18:45.035055 #10344] DEBUG -- : 
D, [2015-01-01T10:18:45.077057 #10344] DEBUG -- : 
I, [2015-01-01T10:18:45.149061 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 10:18:45 +0000
D, [2015-01-01T10:18:45.220065 #10344] DEBUG -- : 
D, [2015-01-01T10:18:45.239066 #10344] DEBUG -- : 
I, [2015-01-01T10:18:45.289069 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 10:18:45 +0000
D, [2015-01-01T10:18:45.396075 #10344] DEBUG -- : 
D, [2015-01-01T10:18:45.427077 #10344] DEBUG -- : 
I, [2015-01-01T10:18:45.484080 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 10:18:45 +0000
D, [2015-01-01T10:18:45.560085 #10344] DEBUG -- : 
D, [2015-01-01T10:18:45.579086 #10344] DEBUG -- : 
I, [2015-01-01T10:18:45.633089 #10344]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-01 10:18:45 +0000
D, [2015-01-01T10:18:49.471110 #10344] DEBUG -- : 
D, [2015-01-01T10:18:49.486710 #10344] DEBUG -- : 
I, [2015-01-01T10:18:49.549110 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 10:18:49 +0000
I, [2015-01-01T10:18:49.689510 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T10:18:49.829910 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T10:18:50.017111 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
I, [2015-01-01T10:18:50.141911 #10344]  INFO -- : Completed 500 Internal Server Error in 421ms
F, [2015-01-01T10:18:50.266711 #10344] FATAL -- : 
NoMethodError (undefined method `line_items' for nil:NilClass):
  app/models/order.rb:12:in `add_line_items_from_cart'
  app/controllers/orders_controller.rb:143:in `ppcheckout'


I, [2015-01-01T10:18:50.583712 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (15.6ms)
I, [2015-01-01T10:18:50.708512 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (15.6ms)
I, [2015-01-01T10:18:50.833312 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (15.6ms)
I, [2015-01-01T10:18:50.926912 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (395.0ms)
D, [2015-01-01T10:18:51.017715 #10344] DEBUG -- : 
D, [2015-01-01T10:18:51.038716 #10344] DEBUG -- : 
I, [2015-01-01T10:18:51.090719 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 10:18:51 +0000
I, [2015-01-01T10:18:51.215726 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T10:18:51.293731 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T10:18:51.366735 #10344] DEBUG -- :   [1m[36mUser Load (3.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
I, [2015-01-01T10:18:51.418738 #10344]  INFO -- : Completed 500 Internal Server Error in 160ms
F, [2015-01-01T10:18:51.537745 #10344] FATAL -- : 
NoMethodError (undefined method `line_items' for nil:NilClass):
  app/models/order.rb:12:in `add_line_items_from_cart'
  app/controllers/orders_controller.rb:143:in `ppcheckout'


I, [2015-01-01T10:18:51.865763 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (16.0ms)
I, [2015-01-01T10:18:51.998771 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (20.0ms)
I, [2015-01-01T10:18:52.131779 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (14.0ms)
I, [2015-01-01T10:18:52.217784 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (427.0ms)
D, [2015-01-01T10:19:08.659238 #10344] DEBUG -- : 
D, [2015-01-01T10:19:08.674838 #10344] DEBUG -- : 
I, [2015-01-01T10:19:08.737238 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 10:19:08 +0000
I, [2015-01-01T10:19:08.846439 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T10:19:08.940039 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 35]]
D, [2015-01-01T10:19:09.064839 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-01T10:19:09.164840 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (0.0ms)
I, [2015-01-01T10:19:09.217843 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (195.6ms)
D, [2015-01-01T10:19:09.463857 #10344] DEBUG -- :   [1m[35mLineItem Exists (2.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 35]]
D, [2015-01-01T10:19:09.558863 #10344] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 35]]
D, [2015-01-01T10:19:09.670869 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-01T10:19:09.734873 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (120.0ms)
I, [2015-01-01T10:19:09.813877 #10344]  INFO -- :   Rendered carts/_cart.html.erb (300.0ms)
I, [2015-01-01T10:19:09.886882 #10344]  INFO -- : Completed 200 OK in 982ms (Views: 880.2ms | ActiveRecord: 6.0ms)
D, [2015-01-01T10:19:09.933884 #10344] DEBUG -- : 
D, [2015-01-01T10:19:09.967886 #10344] DEBUG -- : 
I, [2015-01-01T10:19:10.033890 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 10:19:09 +0000
I, [2015-01-01T10:19:10.129895 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T10:19:10.212900 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T10:19:10.321906 #10344] DEBUG -- :   [1m[35mProduct Load (4.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T10:19:10.396911 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (4.0ms)
I, [2015-01-01T10:19:10.444914 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (154.0ms)
D, [2015-01-01T10:19:10.693928 #10344] DEBUG -- :   [1m[36mLineItem Exists (2.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 35]]
D, [2015-01-01T10:19:10.786933 #10344] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
D, [2015-01-01T10:19:10.897939 #10344] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-01T10:19:10.957943 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (116.0ms)
I, [2015-01-01T10:19:11.037947 #10344]  INFO -- :   Rendered carts/_cart.html.erb (293.0ms)
I, [2015-01-01T10:19:11.109952 #10344]  INFO -- : Completed 200 OK in 934ms (Views: 833.0ms | ActiveRecord: 13.0ms)
D, [2015-01-01T10:19:11.530976 #10344] DEBUG -- : 
D, [2015-01-01T10:19:11.562977 #10344] DEBUG -- : 
I, [2015-01-01T10:19:11.620981 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 10:19:11 +0000
D, [2015-01-01T10:19:11.697985 #10344] DEBUG -- : 
D, [2015-01-01T10:19:11.716986 #10344] DEBUG -- : 
I, [2015-01-01T10:19:11.771989 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 10:19:11 +0000
D, [2015-01-01T10:19:11.847994 #10344] DEBUG -- : 
D, [2015-01-01T10:19:11.903997 #10344] DEBUG -- : 
I, [2015-01-01T10:19:11.951000 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 10:19:11 +0000
D, [2015-01-01T10:19:12.034004 #10344] DEBUG -- : 
D, [2015-01-01T10:19:12.054006 #10344] DEBUG -- : 
I, [2015-01-01T10:19:12.108009 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 10:19:12 +0000
D, [2015-01-01T10:19:12.188013 #10344] DEBUG -- : 
D, [2015-01-01T10:19:12.214015 #10344] DEBUG -- : 
I, [2015-01-01T10:19:12.267018 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 10:19:12 +0000
D, [2015-01-01T10:19:12.348022 #10344] DEBUG -- : 
D, [2015-01-01T10:19:12.373024 #10344] DEBUG -- : 
I, [2015-01-01T10:19:12.433027 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 10:19:12 +0000
D, [2015-01-01T10:19:12.509032 #10344] DEBUG -- : 
D, [2015-01-01T10:19:12.530033 #10344] DEBUG -- : 
I, [2015-01-01T10:19:12.583036 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 10:19:12 +0000
D, [2015-01-01T10:19:12.661040 #10344] DEBUG -- : 
D, [2015-01-01T10:19:12.681041 #10344] DEBUG -- : 
I, [2015-01-01T10:19:12.733044 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 10:19:12 +0000
D, [2015-01-01T10:19:12.811049 #10344] DEBUG -- : 
D, [2015-01-01T10:19:12.834050 #10344] DEBUG -- : 
I, [2015-01-01T10:19:12.885053 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 10:19:12 +0000
D, [2015-01-01T10:19:12.958057 #10344] DEBUG -- : 
D, [2015-01-01T10:19:12.981059 #10344] DEBUG -- : 
I, [2015-01-01T10:19:13.032061 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 10:19:12 +0000
D, [2015-01-01T10:19:13.117066 #10344] DEBUG -- : 
D, [2015-01-01T10:19:13.138068 #10344] DEBUG -- : 
I, [2015-01-01T10:19:13.196071 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 10:19:13 +0000
D, [2015-01-01T10:19:13.283076 #10344] DEBUG -- : 
D, [2015-01-01T10:19:13.304077 #10344] DEBUG -- : 
I, [2015-01-01T10:19:13.358080 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 10:19:13 +0000
D, [2015-01-01T10:19:13.449085 #10344] DEBUG -- : 
D, [2015-01-01T10:19:13.478087 #10344] DEBUG -- : 
I, [2015-01-01T10:19:13.531090 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 10:19:13 +0000
D, [2015-01-01T10:19:13.610095 #10344] DEBUG -- : 
D, [2015-01-01T10:19:13.629096 #10344] DEBUG -- : 
I, [2015-01-01T10:19:13.688099 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 10:19:13 +0000
D, [2015-01-01T10:19:13.767104 #10344] DEBUG -- : 
D, [2015-01-01T10:19:13.789105 #10344] DEBUG -- : 
I, [2015-01-01T10:19:13.840108 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 10:19:13 +0000
D, [2015-01-01T10:19:13.917112 #10344] DEBUG -- : 
D, [2015-01-01T10:19:13.938113 #10344] DEBUG -- : 
I, [2015-01-01T10:19:13.993116 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 10:19:13 +0000
D, [2015-01-01T10:19:14.096122 #10344] DEBUG -- : 
D, [2015-01-01T10:19:14.124124 #10344] DEBUG -- : 
I, [2015-01-01T10:19:14.176127 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 10:19:14 +0000
D, [2015-01-01T10:19:14.261132 #10344] DEBUG -- : 
D, [2015-01-01T10:19:14.283133 #10344] DEBUG -- : 
I, [2015-01-01T10:19:14.335136 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 10:19:14 +0000
D, [2015-01-01T10:19:14.413140 #10344] DEBUG -- : 
D, [2015-01-01T10:19:14.434142 #10344] DEBUG -- : 
I, [2015-01-01T10:19:14.489145 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 10:19:14 +0000
D, [2015-01-01T10:19:14.568149 #10344] DEBUG -- : 
D, [2015-01-01T10:19:14.589151 #10344] DEBUG -- : 
I, [2015-01-01T10:19:14.641154 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 10:19:14 +0000
D, [2015-01-01T10:19:14.735159 #10344] DEBUG -- : 
D, [2015-01-01T10:19:14.755160 #10344] DEBUG -- : 
I, [2015-01-01T10:19:14.805163 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 10:19:14 +0000
D, [2015-01-01T10:19:14.896168 #10344] DEBUG -- : 
D, [2015-01-01T10:19:14.916169 #10344] DEBUG -- : 
I, [2015-01-01T10:19:14.970172 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 10:19:14 +0000
D, [2015-01-01T10:19:15.047177 #10344] DEBUG -- : 
D, [2015-01-01T10:19:15.069178 #10344] DEBUG -- : 
I, [2015-01-01T10:19:15.128181 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 10:19:15 +0000
D, [2015-01-01T10:19:15.206186 #10344] DEBUG -- : 
D, [2015-01-01T10:19:15.227187 #10344] DEBUG -- : 
I, [2015-01-01T10:19:15.282190 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 10:19:15 +0000
D, [2015-01-01T10:19:15.354194 #10344] DEBUG -- : 
D, [2015-01-01T10:19:15.374195 #10344] DEBUG -- : 
I, [2015-01-01T10:19:15.422198 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 10:19:15 +0000
D, [2015-01-01T10:19:15.496202 #10344] DEBUG -- : 
D, [2015-01-01T10:19:15.517204 #10344] DEBUG -- : 
I, [2015-01-01T10:19:15.570207 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 10:19:15 +0000
D, [2015-01-01T10:19:15.664212 #10344] DEBUG -- : 
D, [2015-01-01T10:19:15.690214 #10344] DEBUG -- : 
I, [2015-01-01T10:19:15.744217 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 10:19:15 +0000
D, [2015-01-01T10:19:15.815221 #10344] DEBUG -- : 
D, [2015-01-01T10:19:15.837222 #10344] DEBUG -- : 
I, [2015-01-01T10:19:15.900226 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 10:19:15 +0000
D, [2015-01-01T10:19:15.974230 #10344] DEBUG -- : 
D, [2015-01-01T10:19:16.022233 #10344] DEBUG -- : 
I, [2015-01-01T10:19:16.079236 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 10:19:16 +0000
D, [2015-01-01T10:19:16.153240 #10344] DEBUG -- : 
D, [2015-01-01T10:19:16.178241 #10344] DEBUG -- : 
I, [2015-01-01T10:19:16.236245 #10344]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-01 10:19:16 +0000
D, [2015-01-01T10:19:18.869261 #10344] DEBUG -- : 
D, [2015-01-01T10:19:18.900461 #10344] DEBUG -- : 
I, [2015-01-01T10:19:18.978461 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 10:19:18 +0000
I, [2015-01-01T10:19:19.118862 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T10:19:19.196862 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T10:19:19.274862 #10344] DEBUG -- :   [1m[35mCart Load (15.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 35]]
D, [2015-01-01T10:19:19.368462 #10344] DEBUG -- :   [1m[36mProduct Load (15.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-01T10:19:19.477662 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 35]]
D, [2015-01-01T10:19:19.524462 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:19:19.664863 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = 42  [["quantity", 2], ["updated_at", Thu, 01 Jan 2015 10:19:19 UTC +00:00]]
D, [2015-01-01T10:19:19.805263 #10344] DEBUG -- :   [1m[36m (93.6ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T10:19:19.930063 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
D, [2015-01-01T10:19:20.039263 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-01T10:19:20.101663 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (109.2ms)
I, [2015-01-01T10:19:20.179664 #10344]  INFO -- :   Rendered carts/_cart.html.erb (280.8ms)
I, [2015-01-01T10:19:20.226464 #10344]  INFO -- :   Rendered line_items/create.js.erb (343.2ms)
I, [2015-01-01T10:19:20.273264 #10344]  INFO -- : Completed 200 OK in 1030ms (Views: 421.2ms | ActiveRecord: 124.8ms)
D, [2015-01-01T10:19:23.245731 #10344] DEBUG -- : 
D, [2015-01-01T10:19:23.276931 #10344] DEBUG -- : 
I, [2015-01-01T10:19:23.323731 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 10:19:23 +0000
I, [2015-01-01T10:19:23.432931 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T10:19:23.510931 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T10:19:23.588931 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
I, [2015-01-01T10:19:23.635731 #10344]  INFO -- : Completed 500 Internal Server Error in 172ms
F, [2015-01-01T10:19:23.760532 #10344] FATAL -- : 
NoMethodError (undefined method `line_items' for nil:NilClass):
  app/models/order.rb:12:in `add_line_items_from_cart'
  app/controllers/orders_controller.rb:143:in `ppcheckout'


I, [2015-01-01T10:19:24.088132 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (15.6ms)
I, [2015-01-01T10:19:24.228533 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (31.2ms)
I, [2015-01-01T10:19:24.353333 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (15.6ms)
I, [2015-01-01T10:19:24.446933 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (405.6ms)
D, [2015-01-01T10:19:24.535334 #10344] DEBUG -- : 
D, [2015-01-01T10:19:24.557336 #10344] DEBUG -- : 
I, [2015-01-01T10:19:24.614339 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 10:19:24 +0000
I, [2015-01-01T10:19:24.711345 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T10:19:24.786349 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T10:19:24.865353 #10344] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
I, [2015-01-01T10:19:24.916356 #10344]  INFO -- : Completed 500 Internal Server Error in 163ms
F, [2015-01-01T10:19:25.038363 #10344] FATAL -- : 
NoMethodError (undefined method `line_items' for nil:NilClass):
  app/models/order.rb:12:in `add_line_items_from_cart'
  app/controllers/orders_controller.rb:143:in `ppcheckout'


I, [2015-01-01T10:19:25.345381 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (16.0ms)
I, [2015-01-01T10:19:25.485389 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (21.0ms)
I, [2015-01-01T10:19:25.620397 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (13.0ms)
I, [2015-01-01T10:19:25.709402 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (417.0ms)
D, [2015-01-01T10:19:50.436531 #10344] DEBUG -- : 
D, [2015-01-01T10:19:50.457533 #10344] DEBUG -- : 
I, [2015-01-01T10:19:50.508535 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 10:19:50 +0000
I, [2015-01-01T10:19:52.957676 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T10:19:53.080683 #10344] DEBUG -- :   [1m[35mUser Load (3.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T10:19:53.265693 #10344] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T10:19:53.408701 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 35]]
D, [2015-01-01T10:19:53.676717 #10344] DEBUG -- :   [1m[36mLineItem Load (3.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 35]]
I, [2015-01-01T10:19:53.977734 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T10:19:54.016736 #10344] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2015-01-01T10:19:54.376757 #10344] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
I, [2015-01-01T10:19:54.410759 #10344]  INFO -- : failed to order.save
I, [2015-01-01T10:19:54.456761 #10344]  INFO -- : Completed 500 Internal Server Error in 1458ms
F, [2015-01-01T10:19:54.552767 #10344] FATAL -- : 
NoMethodError (undefined method `error' for #<Order:0x00000009cb39b0>):
  app/controllers/orders_controller.rb:168:in `ppcheckout'


I, [2015-01-01T10:19:54.823782 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (13.0ms)
I, [2015-01-01T10:19:54.971791 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (38.0ms)
I, [2015-01-01T10:19:55.101798 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (12.0ms)
I, [2015-01-01T10:19:55.194803 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (413.0ms)
D, [2015-01-01T10:20:32.634184 #10344] DEBUG -- : 
D, [2015-01-01T10:20:32.653185 #10344] DEBUG -- : 
I, [2015-01-01T10:20:32.692187 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 10:20:32 +0000
I, [2015-01-01T10:20:32.821194 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T10:20:32.893199 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 35]]
D, [2015-01-01T10:20:33.069209 #10344] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-01T10:20:33.311222 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (4.0ms)
I, [2015-01-01T10:20:33.356225 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (311.0ms)
D, [2015-01-01T10:20:33.590238 #10344] DEBUG -- :   [1m[35mLineItem Exists (2.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 35]]
D, [2015-01-01T10:20:33.682244 #10344] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 35]]
D, [2015-01-01T10:20:33.802251 #10344] DEBUG -- :   [1m[35mProduct Load (3.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-01T10:20:33.863254 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (126.0ms)
I, [2015-01-01T10:20:33.982261 #10344]  INFO -- :   Rendered carts/_cart.html.erb (339.0ms)
I, [2015-01-01T10:20:34.057265 #10344]  INFO -- : Completed 200 OK in 1188ms (Views: 1013.1ms | ActiveRecord: 20.0ms)
D, [2015-01-01T10:20:34.388284 #10344] DEBUG -- : 
D, [2015-01-01T10:20:34.438287 #10344] DEBUG -- : 
I, [2015-01-01T10:20:34.510291 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 10:20:34 +0000
D, [2015-01-01T10:20:34.589296 #10344] DEBUG -- : 
D, [2015-01-01T10:20:34.615297 #10344] DEBUG -- : 
I, [2015-01-01T10:20:34.665300 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 10:20:34 +0000
D, [2015-01-01T10:20:34.740304 #10344] DEBUG -- : 
D, [2015-01-01T10:20:34.770306 #10344] DEBUG -- : 
I, [2015-01-01T10:20:34.821309 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 10:20:34 +0000
D, [2015-01-01T10:20:34.920315 #10344] DEBUG -- : 
D, [2015-01-01T10:20:34.946316 #10344] DEBUG -- : 
I, [2015-01-01T10:20:35.000319 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 10:20:34 +0000
D, [2015-01-01T10:20:35.080324 #10344] DEBUG -- : 
D, [2015-01-01T10:20:35.102325 #10344] DEBUG -- : 
I, [2015-01-01T10:20:35.156328 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 10:20:35 +0000
D, [2015-01-01T10:20:35.230332 #10344] DEBUG -- : 
D, [2015-01-01T10:20:35.254334 #10344] DEBUG -- : 
I, [2015-01-01T10:20:35.309337 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 10:20:35 +0000
D, [2015-01-01T10:20:35.390341 #10344] DEBUG -- : 
D, [2015-01-01T10:20:35.414343 #10344] DEBUG -- : 
I, [2015-01-01T10:20:35.470346 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 10:20:35 +0000
D, [2015-01-01T10:20:35.552351 #10344] DEBUG -- : 
D, [2015-01-01T10:20:35.572352 #10344] DEBUG -- : 
I, [2015-01-01T10:20:35.627355 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 10:20:35 +0000
D, [2015-01-01T10:20:35.700359 #10344] DEBUG -- : 
D, [2015-01-01T10:20:35.725361 #10344] DEBUG -- : 
I, [2015-01-01T10:20:35.789364 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 10:20:35 +0000
D, [2015-01-01T10:20:35.864369 #10344] DEBUG -- : 
D, [2015-01-01T10:20:35.889370 #10344] DEBUG -- : 
I, [2015-01-01T10:20:35.956374 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 10:20:35 +0000
D, [2015-01-01T10:20:36.031378 #10344] DEBUG -- : 
D, [2015-01-01T10:20:36.058380 #10344] DEBUG -- : 
I, [2015-01-01T10:20:36.130384 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 10:20:36 +0000
D, [2015-01-01T10:20:36.208388 #10344] DEBUG -- : 
D, [2015-01-01T10:20:36.232390 #10344] DEBUG -- : 
I, [2015-01-01T10:20:36.295393 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 10:20:36 +0000
D, [2015-01-01T10:20:36.371398 #10344] DEBUG -- : 
D, [2015-01-01T10:20:36.399399 #10344] DEBUG -- : 
I, [2015-01-01T10:20:36.468403 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 10:20:36 +0000
D, [2015-01-01T10:20:36.541407 #10344] DEBUG -- : 
D, [2015-01-01T10:20:36.569409 #10344] DEBUG -- : 
I, [2015-01-01T10:20:36.644413 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 10:20:36 +0000
D, [2015-01-01T10:20:36.719417 #10344] DEBUG -- : 
D, [2015-01-01T10:20:36.741419 #10344] DEBUG -- : 
I, [2015-01-01T10:20:36.805422 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 10:20:36 +0000
D, [2015-01-01T10:20:36.880427 #10344] DEBUG -- : 
D, [2015-01-01T10:20:36.907428 #10344] DEBUG -- : 
I, [2015-01-01T10:20:36.972432 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 10:20:36 +0000
D, [2015-01-01T10:20:37.051436 #10344] DEBUG -- : 
D, [2015-01-01T10:20:37.071438 #10344] DEBUG -- : 
I, [2015-01-01T10:20:37.135441 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 10:20:37 +0000
D, [2015-01-01T10:20:37.209445 #10344] DEBUG -- : 
D, [2015-01-01T10:20:37.233447 #10344] DEBUG -- : 
I, [2015-01-01T10:20:37.296450 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 10:20:37 +0000
D, [2015-01-01T10:20:37.377455 #10344] DEBUG -- : 
D, [2015-01-01T10:20:37.401456 #10344] DEBUG -- : 
I, [2015-01-01T10:20:37.465460 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 10:20:37 +0000
D, [2015-01-01T10:20:37.541464 #10344] DEBUG -- : 
D, [2015-01-01T10:20:37.566466 #10344] DEBUG -- : 
I, [2015-01-01T10:20:37.633470 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 10:20:37 +0000
D, [2015-01-01T10:20:37.723475 #10344] DEBUG -- : 
D, [2015-01-01T10:20:37.746476 #10344] DEBUG -- : 
I, [2015-01-01T10:20:37.807480 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 10:20:37 +0000
D, [2015-01-01T10:20:37.890484 #10344] DEBUG -- : 
D, [2015-01-01T10:20:37.915486 #10344] DEBUG -- : 
I, [2015-01-01T10:20:37.977489 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 10:20:37 +0000
D, [2015-01-01T10:20:38.053494 #10344] DEBUG -- : 
D, [2015-01-01T10:20:38.080495 #10344] DEBUG -- : 
I, [2015-01-01T10:20:38.153499 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 10:20:38 +0000
D, [2015-01-01T10:20:38.226504 #10344] DEBUG -- : 
D, [2015-01-01T10:20:38.251505 #10344] DEBUG -- : 
I, [2015-01-01T10:20:38.313509 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 10:20:38 +0000
D, [2015-01-01T10:20:38.392513 #10344] DEBUG -- : 
D, [2015-01-01T10:20:38.416514 #10344] DEBUG -- : 
I, [2015-01-01T10:20:38.478518 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 10:20:38 +0000
D, [2015-01-01T10:20:38.555522 #10344] DEBUG -- : 
D, [2015-01-01T10:20:38.582524 #10344] DEBUG -- : 
I, [2015-01-01T10:20:38.651528 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 10:20:38 +0000
D, [2015-01-01T10:20:38.732533 #10344] DEBUG -- : 
D, [2015-01-01T10:20:38.767535 #10344] DEBUG -- : 
I, [2015-01-01T10:20:38.820538 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 10:20:38 +0000
D, [2015-01-01T10:20:38.895542 #10344] DEBUG -- : 
D, [2015-01-01T10:20:38.919543 #10344] DEBUG -- : 
I, [2015-01-01T10:20:38.986547 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 10:20:38 +0000
D, [2015-01-01T10:20:39.059551 #10344] DEBUG -- : 
D, [2015-01-01T10:20:39.082553 #10344] DEBUG -- : 
I, [2015-01-01T10:20:39.130555 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 10:20:39 +0000
D, [2015-01-01T10:20:39.204560 #10344] DEBUG -- : 
D, [2015-01-01T10:20:39.222561 #10344] DEBUG -- : 
I, [2015-01-01T10:20:39.269563 #10344]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-01 10:20:39 +0000
D, [2015-01-01T10:20:42.748801 #10344] DEBUG -- : 
D, [2015-01-01T10:20:42.764401 #10344] DEBUG -- : 
I, [2015-01-01T10:20:42.811201 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 10:20:42 +0000
I, [2015-01-01T10:20:42.952601 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T10:20:43.015001 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T10:20:43.093001 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T10:20:43.171001 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T10:20:43.264601 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
I, [2015-01-01T10:20:43.389402 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T10:20:43.420602 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:20:43.561002 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  rollback transaction
I, [2015-01-01T10:20:43.607802 #10344]  INFO -- : failed to order.save
I, [2015-01-01T10:20:43.639002 #10344]  INFO -- : Completed 500 Internal Server Error in 655ms
F, [2015-01-01T10:20:43.748202 #10344] FATAL -- : 
NoMethodError (undefined method `error' for #<Order:0x00000005feaf88>):
  app/controllers/orders_controller.rb:168:in `ppcheckout'


I, [2015-01-01T10:20:44.081605 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (15.6ms)
I, [2015-01-01T10:20:44.206405 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (15.6ms)
I, [2015-01-01T10:20:44.346805 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.0ms)
I, [2015-01-01T10:20:44.424806 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (407.4ms)
D, [2015-01-01T10:20:44.541209 #10344] DEBUG -- : 
D, [2015-01-01T10:20:44.562210 #10344] DEBUG -- : 
I, [2015-01-01T10:20:44.611213 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 10:20:44 +0000
I, [2015-01-01T10:20:44.709218 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T10:20:44.789223 #10344] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T10:20:44.862227 #10344] DEBUG -- :   [1m[35mUser Load (3.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T10:20:44.938231 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T10:20:45.035237 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
I, [2015-01-01T10:20:45.159244 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T10:20:45.201247 #10344] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:20:45.350255 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  rollback transaction
I, [2015-01-01T10:20:45.381257 #10344]  INFO -- : failed to order.save
I, [2015-01-01T10:20:45.423259 #10344]  INFO -- : Completed 500 Internal Server Error in 676ms
F, [2015-01-01T10:20:45.528265 #10344] FATAL -- : 
NoMethodError (undefined method `error' for #<Order:0x0000000994ec98>):
  app/controllers/orders_controller.rb:168:in `ppcheckout'


I, [2015-01-01T10:20:45.844283 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (17.0ms)
I, [2015-01-01T10:20:45.986291 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (21.0ms)
I, [2015-01-01T10:20:46.145300 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (16.0ms)
I, [2015-01-01T10:20:46.231305 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (446.0ms)
D, [2015-01-01T10:23:15.365488 #10344] DEBUG -- : 
D, [2015-01-01T10:23:15.384489 #10344] DEBUG -- : 
I, [2015-01-01T10:23:15.434492 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 10:23:15 +0000
I, [2015-01-01T10:23:18.407662 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T10:23:18.556671 #10344] DEBUG -- :   [1m[36mUser Load (3.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T10:23:18.770683 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T10:23:18.923692 #10344] DEBUG -- :   [1m[36mCart Load (3.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T10:23:19.235710 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
I, [2015-01-01T10:23:19.578729 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T10:24:32.384893 #10344] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:24:32.550903 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  rollback transaction
D, [2015-01-01T10:26:56.459134 #10344] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:26:56.583141 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  rollback transaction
I, [2015-01-01T10:26:56.619143 #10344]  INFO -- : failed to order.save
I, [2015-01-01T10:26:56.672146 #10344]  INFO -- : Completed 500 Internal Server Error in 218214ms
F, [2015-01-01T10:26:56.786153 #10344] FATAL -- : 
NoMethodError (undefined method `error' for #<Order:0x000000082b6378>):
  app/controllers/orders_controller.rb:168:in `ppcheckout'


I, [2015-01-01T10:26:57.058168 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (12.0ms)
I, [2015-01-01T10:26:57.190176 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (16.0ms)
I, [2015-01-01T10:26:57.331184 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (10.0ms)
I, [2015-01-01T10:26:57.432190 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (420.0ms)
D, [2015-01-01T10:27:02.227842 #10344] DEBUG -- : 
D, [2015-01-01T10:27:02.258443 #10344] DEBUG -- : 
I, [2015-01-01T10:27:02.303446 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 10:27:02 +0000
I, [2015-01-01T10:27:05.491628 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T10:27:05.631636 #10344] DEBUG -- :   [1m[36mUser Load (4.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T10:27:05.844649 #10344] DEBUG -- :   [1m[35mUser Load (3.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T10:27:06.010658 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T10:27:06.331676 #10344] DEBUG -- :   [1m[35mLineItem Load (4.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
I, [2015-01-01T10:27:06.748700 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T10:27:16.089234 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:27:16.231243 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  rollback transaction
D, [2015-01-01T10:28:36.069809 #10344] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:28:36.139813 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  rollback transaction
I, [2015-01-01T10:28:36.176815 #10344]  INFO -- : failed to order.save
I, [2015-01-01T10:28:36.226818 #10344]  INFO -- : Completed 500 Internal Server Error in 90688ms
F, [2015-01-01T10:28:36.333824 #10344] FATAL -- : 
NoMethodError (undefined method `error' for #<Order:0x00000007d938a0>):
  app/controllers/orders_controller.rb:168:in `ppcheckout'


I, [2015-01-01T10:28:36.602840 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (12.0ms)
I, [2015-01-01T10:28:36.740847 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (15.0ms)
I, [2015-01-01T10:28:36.880855 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (11.0ms)
I, [2015-01-01T10:28:36.982861 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (420.0ms)
D, [2015-01-01T10:28:40.378740 #10344] DEBUG -- : 
D, [2015-01-01T10:28:40.412342 #10344] DEBUG -- : 
I, [2015-01-01T10:28:40.474345 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 10:28:40 +0000
I, [2015-01-01T10:28:43.521519 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T10:28:43.673528 #10344] DEBUG -- :   [1m[36mUser Load (4.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T10:28:43.916542 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T10:28:44.066551 #10344] DEBUG -- :   [1m[36mCart Load (3.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T10:28:44.407570 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
I, [2015-01-01T10:28:44.757590 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T10:29:00.889513 #10344] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:29:01.021520 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  rollback transaction
D, [2015-01-01T10:29:43.026923 #10344] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:29:43.081926 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  rollback transaction
I, [2015-01-01T10:29:43.112928 #10344]  INFO -- : failed to order.save
I, [2015-01-01T10:29:43.154930 #10344]  INFO -- : Completed 500 Internal Server Error in 59595ms
F, [2015-01-01T10:29:43.247936 #10344] FATAL -- : 
NoMethodError (undefined method `error' for #<Order:0x0000000a00c5d0>):
  app/controllers/orders_controller.rb:168:in `ppcheckout'


I, [2015-01-01T10:29:43.500950 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (13.0ms)
I, [2015-01-01T10:29:43.618957 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (16.0ms)
I, [2015-01-01T10:29:43.741964 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (11.0ms)
I, [2015-01-01T10:29:43.824969 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (363.0ms)
D, [2015-01-01T10:29:49.507422 #10344] DEBUG -- : 
D, [2015-01-01T10:29:49.525423 #10344] DEBUG -- : 
I, [2015-01-01T10:29:49.575426 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 10:29:49 +0000
I, [2015-01-01T10:29:52.860614 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T10:29:52.997622 #10344] DEBUG -- :   [1m[36mUser Load (3.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T10:29:53.223634 #10344] DEBUG -- :   [1m[35mUser Load (3.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T10:29:53.357642 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T10:29:53.658659 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
I, [2015-01-01T10:29:53.991678 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T10:30:00.067026 #10344] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:30:00.276038 #10344] DEBUG -- :   [1m[35mSQL (4.0ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 01 Jan 2015 10:30:00 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 10:30:00 UTC +00:00]]
D, [2015-01-01T10:30:00.361043 #10344] DEBUG -- :   [1m[36mSQL (3.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 42[0m  [["cart_id", nil], ["order_id", 41], ["updated_at", Thu, 01 Jan 2015 10:30:00 UTC +00:00]]
I, [2015-01-01T10:30:00.409045 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T10:30:00.516052 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-01T10:30:00.592056 #10344]  INFO -- : in order=
I, [2015-01-01T10:30:00.617057 #10344]  INFO -- : in payment.create
I, [2015-01-01T10:30:00.770066 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"39.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"39.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/41/confirm", "cancel_url"=>"http://localhost:3000/orders/41/cancel"}}
I, [2015-01-01T10:30:01.282095 #10344]  INFO -- : #<ActiveModel::Errors:0x000000092ab850 @base=#<Payment:0x000000097abc60 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000097aba58 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000092bbf20 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000092bbd40 @error=nil, @total="39.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000092bb7c8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000092bb4a8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="39.98", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000092ba6c0 @error=nil, @return_url="http://localhost:3000/orders/41/confirm", @cancel_url="http://localhost:3000/orders/41/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000092ab850 ...>>, @messages={}>
I, [2015-01-01T10:30:01.308097 #10344]  INFO -- : got past invalid
I, [2015-01-01T10:30:01.349099 #10344]  INFO -- : PayPal-Request-Id: ce42784e-0a5a-46ac-b7da-e95b7c896d38
I, [2015-01-01T10:30:01.386101 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T10:30:02.674175 #10344]  INFO -- : Response[201]: Created, Duration: 1.257s
I, [2015-01-01T10:30:02.699176 #10344]  INFO -- : back from super
I, [2015-01-01T10:30:03.100199 #10344]  INFO -- : {"id"=>"PAY-8AF348278S473223KKSSSDKY", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"39.98", "details"=>{"subtotal"=>"39.98"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"39.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/41/confirm", "cancel_url"=>"http://localhost:3000/orders/41/cancel"}, "create_time"=>"2015-01-01T10:30:03Z", "update_time"=>"2015-01-01T10:30:04Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-8AF348278S473223KKSSSDKY", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6PY24350072782108", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-8AF348278S473223KKSSSDKY/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-01T10:30:03.249208 #10344] DEBUG -- :   [1m[36mSQL (5.0ms)[0m  [1mUPDATE "orders" SET "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ? WHERE "orders"."id" = 41[0m  [["created_at", Thu, 01 Jan 2015 10:30:00 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 10:30:00 UTC +00:00], ["id", 41], ["payment_id", "PAY-8AF348278S473223KKSSSDKY"], ["state", "created"]]
I, [2015-01-01T10:30:03.275209 #10344]  INFO -- : @payment save just done
I, [2015-01-01T10:30:04.216263 #10344]  INFO -- : #<Payment:0x000000097abc60 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000086e96e8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000086e9530 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000086e9468 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000086e92d8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000086e9260 @error=nil, @total="39.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000086e9058 @error=nil, @subtotal="39.98">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000086e8d88 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000086e8b30 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="39.98", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000092ba6c0 @error=nil, @return_url="http://localhost:3000/orders/41/confirm", @cancel_url="http://localhost:3000/orders/41/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000092ab850 @base=#<Payment:0x000000097abc60 ...>, @messages={}>, @request_id="ce42784e-0a5a-46ac-b7da-e95b7c896d38", @header={}, @id="PAY-8AF348278S473223KKSSSDKY", @create_time="2015-01-01T10:30:03Z", @update_time="2015-01-01T10:30:04Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000086e81f8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8AF348278S473223KKSSSDKY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086e3e28 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6PY24350072782108", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086e39f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8AF348278S473223KKSSSDKY/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T10:30:05.129315 #10344]  INFO -- : #<Payment:0x000000097abc60 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000086e96e8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000086e9530 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000086e9468 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000086e92d8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000086e9260 @error=nil, @total="39.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000086e9058 @error=nil, @subtotal="39.98">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000086e8d88 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000086e8b30 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="39.98", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000092ba6c0 @error=nil, @return_url="http://localhost:3000/orders/41/confirm", @cancel_url="http://localhost:3000/orders/41/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000092ab850 @base=#<Payment:0x000000097abc60 ...>, @messages={}>, @request_id="ce42784e-0a5a-46ac-b7da-e95b7c896d38", @header={}, @id="PAY-8AF348278S473223KKSSSDKY", @create_time="2015-01-01T10:30:03Z", @update_time="2015-01-01T10:30:04Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000086e81f8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8AF348278S473223KKSSSDKY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086e3e28 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6PY24350072782108", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086e39f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8AF348278S473223KKSSSDKY/execute", @rel="execute", @method="POST">]>
D, [2015-01-01T10:30:05.277324 #10344] DEBUG -- :   [1m[35m (118.0ms)[0m  commit transaction
D, [2015-01-01T10:30:49.036827 #10344] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:30:49.080829 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  commit transaction
I, [2015-01-01T10:30:49.114831 #10344]  INFO -- : about to approve url
I, [2015-01-01T10:30:50.064886 #10344]  INFO -- : #<Payment:0x000000097abc60 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000086e96e8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000086e9530 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000086e9468 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000086e92d8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000086e9260 @error=nil, @total="39.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000086e9058 @error=nil, @subtotal="39.98">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000086e8d88 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000086e8b30 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="39.98", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000092ba6c0 @error=nil, @return_url="http://localhost:3000/orders/41/confirm", @cancel_url="http://localhost:3000/orders/41/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000092ab850 @base=#<Payment:0x000000097abc60 ...>, @messages={}>, @request_id="ce42784e-0a5a-46ac-b7da-e95b7c896d38", @header={}, @id="PAY-8AF348278S473223KKSSSDKY", @create_time="2015-01-01T10:30:03Z", @update_time="2015-01-01T10:30:04Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000086e81f8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8AF348278S473223KKSSSDKY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086e3e28 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6PY24350072782108", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086e39f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8AF348278S473223KKSSSDKY/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T10:30:50.848930 #10344]  INFO -- : #<Payment:0x000000097abc60 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000086e96e8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000086e9530 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000086e9468 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000086e92d8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000086e9260 @error=nil, @total="39.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000086e9058 @error=nil, @subtotal="39.98">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000086e8d88 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000086e8b30 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="39.98", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000092ba6c0 @error=nil, @return_url="http://localhost:3000/orders/41/confirm", @cancel_url="http://localhost:3000/orders/41/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000092ab850 @base=#<Payment:0x000000097abc60 ...>, @messages={}>, @request_id="ce42784e-0a5a-46ac-b7da-e95b7c896d38", @header={}, @id="PAY-8AF348278S473223KKSSSDKY", @create_time="2015-01-01T10:30:03Z", @update_time="2015-01-01T10:30:04Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000086e81f8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8AF348278S473223KKSSSDKY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086e3e28 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6PY24350072782108", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086e39f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8AF348278S473223KKSSSDKY/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T10:30:50.895933 #10344]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6PY24350072782108
I, [2015-01-01T10:30:51.717980 #10344]  INFO -- : #<Payment:0x000000097abc60 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000086e96e8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000086e9530 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000086e9468 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000086e92d8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000086e9260 @error=nil, @total="39.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000086e9058 @error=nil, @subtotal="39.98">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000086e8d88 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000086e8b30 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="39.98", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000092ba6c0 @error=nil, @return_url="http://localhost:3000/orders/41/confirm", @cancel_url="http://localhost:3000/orders/41/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000092ab850 @base=#<Payment:0x000000097abc60 ...>, @messages={}>, @request_id="ce42784e-0a5a-46ac-b7da-e95b7c896d38", @header={}, @id="PAY-8AF348278S473223KKSSSDKY", @create_time="2015-01-01T10:30:03Z", @update_time="2015-01-01T10:30:04Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000086e81f8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8AF348278S473223KKSSSDKY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086e3e28 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6PY24350072782108", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086e39f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8AF348278S473223KKSSSDKY/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T10:30:51.780984 #10344]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6PY24350072782108
I, [2015-01-01T10:30:51.822986 #10344]  INFO -- : Completed 302 Found in 58920ms (ActiveRecord: 175.0ms)
D, [2015-01-01T10:31:30.097175 #10344] DEBUG -- : 
D, [2015-01-01T10:31:30.122177 #10344] DEBUG -- : 
I, [2015-01-01T10:31:30.215182 #10344]  INFO -- : Started GET "/orders/41/confirm?paymentId=PAY-8AF348278S473223KKSSSDKY&token=EC-6PY24350072782108&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-01 10:31:30 +0000
I, [2015-01-01T10:31:30.320188 #10344]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-01T10:31:30.397192 #10344]  INFO -- :   Parameters: {"paymentId"=>"PAY-8AF348278S473223KKSSSDKY", "token"=>"EC-6PY24350072782108", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"41"}
D, [2015-01-01T10:31:30.472197 #10344] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T10:31:30.544201 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T10:31:30.623205 #10344] DEBUG -- :   [1m[36mOrder Load (3.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "41"]]
I, [2015-01-01T10:31:47.033144 #10344]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-8AF348278S473223KKSSSDKY
I, [2015-01-01T10:31:48.132207 #10344]  INFO -- : Response[200]: OK, Duration: 1.058s
D, [2015-01-01T10:31:51.374392 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-01T10:31:51.484399 #10344] DEBUG -- :   [1m[36mSQL (6.0ms)[0m  [1mUPDATE "orders" SET "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 41[0m  [["shipping_address1", "1 Main Terrace"], ["updated_at", Thu, 01 Jan 2015 10:31:51 UTC +00:00]]
D, [2015-01-01T10:31:51.632407 #10344] DEBUG -- :   [1m[35m (109.0ms)[0m  commit transaction
I, [2015-01-01T10:31:51.835419 #10344]  INFO -- :   Rendered orders/_form.html.erb (136.0ms)
I, [2015-01-01T10:31:51.898422 #10344]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (193.0ms)
I, [2015-01-01T10:31:52.093433 #10344]  INFO -- : Completed 200 OK in 21655ms (Views: 416.0ms | ActiveRecord: 123.0ms)
D, [2015-01-01T10:31:52.524458 #10344] DEBUG -- : 
D, [2015-01-01T10:31:52.550460 #10344] DEBUG -- : 
I, [2015-01-01T10:31:52.617463 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 10:31:52 +0000
D, [2015-01-01T10:31:52.693468 #10344] DEBUG -- : 
D, [2015-01-01T10:31:52.709469 #10344] DEBUG -- : 
I, [2015-01-01T10:31:52.757471 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 10:31:52 +0000
D, [2015-01-01T10:31:52.839476 #10344] DEBUG -- : 
D, [2015-01-01T10:31:52.863477 #10344] DEBUG -- : 
I, [2015-01-01T10:31:52.908480 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 10:31:52 +0000
D, [2015-01-01T10:31:52.985484 #10344] DEBUG -- : 
D, [2015-01-01T10:31:53.003485 #10344] DEBUG -- : 
I, [2015-01-01T10:31:53.049488 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 10:31:53 +0000
D, [2015-01-01T10:31:53.140493 #10344] DEBUG -- : 
D, [2015-01-01T10:31:53.158494 #10344] DEBUG -- : 
I, [2015-01-01T10:31:53.202497 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 10:31:53 +0000
D, [2015-01-01T10:31:53.279501 #10344] DEBUG -- : 
D, [2015-01-01T10:31:53.294502 #10344] DEBUG -- : 
I, [2015-01-01T10:31:53.334504 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 10:31:53 +0000
D, [2015-01-01T10:31:53.416509 #10344] DEBUG -- : 
D, [2015-01-01T10:31:53.432510 #10344] DEBUG -- : 
I, [2015-01-01T10:31:53.475512 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 10:31:53 +0000
D, [2015-01-01T10:31:53.555517 #10344] DEBUG -- : 
D, [2015-01-01T10:31:53.571518 #10344] DEBUG -- : 
I, [2015-01-01T10:31:53.612520 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 10:31:53 +0000
D, [2015-01-01T10:31:53.688525 #10344] DEBUG -- : 
D, [2015-01-01T10:31:53.705526 #10344] DEBUG -- : 
I, [2015-01-01T10:31:53.746528 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 10:31:53 +0000
D, [2015-01-01T10:31:53.831533 #10344] DEBUG -- : 
D, [2015-01-01T10:31:53.848534 #10344] DEBUG -- : 
I, [2015-01-01T10:31:53.890536 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 10:31:53 +0000
D, [2015-01-01T10:31:53.971541 #10344] DEBUG -- : 
D, [2015-01-01T10:31:54.012543 #10344] DEBUG -- : 
I, [2015-01-01T10:31:54.066546 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 10:31:54 +0000
D, [2015-01-01T10:31:54.149551 #10344] DEBUG -- : 
D, [2015-01-01T10:31:54.166552 #10344] DEBUG -- : 
I, [2015-01-01T10:31:54.217555 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 10:31:54 +0000
D, [2015-01-01T10:31:54.291559 #10344] DEBUG -- : 
D, [2015-01-01T10:31:54.312560 #10344] DEBUG -- : 
I, [2015-01-01T10:31:54.359563 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 10:31:54 +0000
D, [2015-01-01T10:31:54.440568 #10344] DEBUG -- : 
D, [2015-01-01T10:31:54.461569 #10344] DEBUG -- : 
I, [2015-01-01T10:31:54.520572 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 10:31:54 +0000
D, [2015-01-01T10:31:54.591576 #10344] DEBUG -- : 
D, [2015-01-01T10:31:54.615578 #10344] DEBUG -- : 
I, [2015-01-01T10:31:54.667581 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 10:31:54 +0000
D, [2015-01-01T10:31:54.754586 #10344] DEBUG -- : 
D, [2015-01-01T10:31:54.774587 #10344] DEBUG -- : 
I, [2015-01-01T10:31:54.822590 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 10:31:54 +0000
D, [2015-01-01T10:31:54.910595 #10344] DEBUG -- : 
D, [2015-01-01T10:31:54.930596 #10344] DEBUG -- : 
I, [2015-01-01T10:31:54.996599 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 10:31:54 +0000
D, [2015-01-01T10:31:55.070604 #10344] DEBUG -- : 
D, [2015-01-01T10:31:55.086605 #10344] DEBUG -- : 
I, [2015-01-01T10:31:55.131607 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 10:31:55 +0000
D, [2015-01-01T10:31:55.209612 #10344] DEBUG -- : 
D, [2015-01-01T10:31:55.230613 #10344] DEBUG -- : 
I, [2015-01-01T10:31:55.280616 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 10:31:55 +0000
D, [2015-01-01T10:31:55.357620 #10344] DEBUG -- : 
D, [2015-01-01T10:31:55.378621 #10344] DEBUG -- : 
I, [2015-01-01T10:31:55.425624 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 10:31:55 +0000
D, [2015-01-01T10:31:55.501628 #10344] DEBUG -- : 
D, [2015-01-01T10:31:55.523630 #10344] DEBUG -- : 
I, [2015-01-01T10:31:55.584633 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 10:31:55 +0000
D, [2015-01-01T10:31:55.670638 #10344] DEBUG -- : 
D, [2015-01-01T10:31:55.697640 #10344] DEBUG -- : 
I, [2015-01-01T10:31:55.767644 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 10:31:55 +0000
D, [2015-01-01T10:31:55.868649 #10344] DEBUG -- : 
D, [2015-01-01T10:31:55.896651 #10344] DEBUG -- : 
I, [2015-01-01T10:31:55.963655 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 10:31:55 +0000
D, [2015-01-01T10:31:56.038659 #10344] DEBUG -- : 
D, [2015-01-01T10:31:56.063661 #10344] DEBUG -- : 
I, [2015-01-01T10:31:56.121664 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 10:31:56 +0000
D, [2015-01-01T10:31:56.197668 #10344] DEBUG -- : 
D, [2015-01-01T10:31:56.222670 #10344] DEBUG -- : 
I, [2015-01-01T10:31:56.286673 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 10:31:56 +0000
D, [2015-01-01T10:31:56.360678 #10344] DEBUG -- : 
D, [2015-01-01T10:31:56.386679 #10344] DEBUG -- : 
I, [2015-01-01T10:31:56.451683 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 10:31:56 +0000
D, [2015-01-01T10:31:56.528687 #10344] DEBUG -- : 
D, [2015-01-01T10:31:56.550688 #10344] DEBUG -- : 
I, [2015-01-01T10:31:56.613692 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 10:31:56 +0000
D, [2015-01-01T10:31:56.687696 #10344] DEBUG -- : 
D, [2015-01-01T10:31:56.712698 #10344] DEBUG -- : 
I, [2015-01-01T10:31:56.778701 #10344]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-01 10:31:56 +0000
D, [2015-01-01T10:39:57.798311 #10344] DEBUG -- : 
D, [2015-01-01T10:39:57.829511 #10344] DEBUG -- : 
I, [2015-01-01T10:39:57.876311 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 10:39:57 +0000
I, [2015-01-01T10:39:57.985511 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T10:39:58.079111 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T10:39:58.188311 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T10:39:58.281912 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (0.0ms)
I, [2015-01-01T10:39:58.345312 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (187.2ms)
D, [2015-01-01T10:39:58.579312 #10344] DEBUG -- :   [1m[36mLineItem Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 35]]
D, [2015-01-01T10:39:58.688512 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
I, [2015-01-01T10:39:58.735312 #10344]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-01T10:39:58.813313 #10344]  INFO -- :   Rendered carts/_cart.html.erb (171.6ms)
I, [2015-01-01T10:39:58.922513 #10344]  INFO -- : Completed 200 OK in 875ms (Views: 781.0ms | ActiveRecord: 0.0ms)
D, [2015-01-01T10:39:59.052714 #10344] DEBUG -- : 
D, [2015-01-01T10:39:59.068314 #10344] DEBUG -- : 
I, [2015-01-01T10:39:59.131714 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 10:39:59 +0000
D, [2015-01-01T10:39:59.194114 #10344] DEBUG -- : 
D, [2015-01-01T10:39:59.209714 #10344] DEBUG -- : 
I, [2015-01-01T10:39:59.277317 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 10:39:59 +0000
D, [2015-01-01T10:41:01.747465 #10344] DEBUG -- : 
D, [2015-01-01T10:41:01.778665 #10344] DEBUG -- : 
I, [2015-01-01T10:41:01.825465 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 10:41:01 +0000
I, [2015-01-01T10:41:01.965865 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T10:41:02.028265 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T10:41:02.106266 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T10:41:02.184266 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-01T10:41:02.277866 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 35]]
D, [2015-01-01T10:41:02.371466 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T10:41:02.418266 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:41:02.636666 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 35], ["created_at", Thu, 01 Jan 2015 10:41:02 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:8213c40,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 10:41:02 UTC +00:00]]
D, [2015-01-01T10:41:02.808267 #10344] DEBUG -- :   [1m[36m (156.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T10:41:02.917467 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
I, [2015-01-01T10:41:03.011067 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T10:41:03.073467 #10344]  INFO -- :   Rendered carts/_cart.html.erb (187.2ms)
I, [2015-01-01T10:41:03.120267 #10344]  INFO -- :   Rendered line_items/create.js.erb (249.6ms)
I, [2015-01-01T10:41:03.167067 #10344]  INFO -- : Completed 200 OK in 1092ms (Views: 296.4ms | ActiveRecord: 171.6ms)
D, [2015-01-01T10:41:07.550938 #10344] DEBUG -- : 
D, [2015-01-01T10:41:07.566538 #10344] DEBUG -- : 
I, [2015-01-01T10:41:07.628938 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 10:41:07 +0000
I, [2015-01-01T10:41:07.722538 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T10:41:07.816139 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T10:41:07.894139 #10344] DEBUG -- :   [1m[35mUser Load (15.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T10:41:07.972139 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T10:41:08.081339 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
I, [2015-01-01T10:41:08.206139 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T10:41:16.098956 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:41:16.223756 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 01 Jan 2015 10:41:16 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 10:41:16 UTC +00:00]]
D, [2015-01-01T10:41:16.348556 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 43[0m  [["cart_id", nil], ["order_id", 42], ["updated_at", Thu, 01 Jan 2015 10:41:16 UTC +00:00]]
I, [2015-01-01T10:41:16.379756 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T10:41:16.473356 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-01T10:41:16.504556 #10344]  INFO -- : in order=
I, [2015-01-01T10:41:16.520156 #10344]  INFO -- : in payment.create
I, [2015-01-01T10:41:16.707357 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/42/confirm", "cancel_url"=>"http://localhost:3000/orders/42/cancel"}}
I, [2015-01-01T10:41:17.331358 #10344]  INFO -- : #<ActiveModel::Errors:0x0000000992e880 @base=#<Payment:0x00000009bd8450 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009bd2fa0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009a4f480 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009a4ea30 @error=nil, @total="19.99", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009a4c618 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009a56af0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009a2cde0 @error=nil, @return_url="http://localhost:3000/orders/42/confirm", @cancel_url="http://localhost:3000/orders/42/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000992e880 ...>>, @messages={}>
I, [2015-01-01T10:41:17.346958 #10344]  INFO -- : got past invalid
I, [2015-01-01T10:41:17.440558 #10344]  INFO -- : PayPal-Request-Id: b37d5c1a-b4d6-4a7f-af90-aa8be2596c3d
I, [2015-01-01T10:41:17.487358 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T10:41:18.875760 #10344]  INFO -- : Response[201]: Created, Duration: 1.357s
I, [2015-01-01T10:41:18.922561 #10344]  INFO -- : back from super
I, [2015-01-01T10:41:19.376961 #10344]  INFO -- : {"id"=>"PAY-40D95864853550437KSSSITY", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99", "details"=>{"subtotal"=>"19.99"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/42/confirm", "cancel_url"=>"http://localhost:3000/orders/42/cancel"}, "create_time"=>"2015-01-01T10:41:19Z", "update_time"=>"2015-01-01T10:41:20Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-4CW540145A2930528", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-01T10:41:19.548562 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mUPDATE "orders" SET "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ? WHERE "orders"."id" = 42[0m  [["created_at", Thu, 01 Jan 2015 10:41:16 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 10:41:16 UTC +00:00], ["id", 42], ["payment_id", "PAY-40D95864853550437KSSSITY"], ["state", "created"]]
I, [2015-01-01T10:41:19.579762 #10344]  INFO -- : @payment save just done
I, [2015-01-01T10:41:20.546963 #10344]  INFO -- : #<Payment:0x00000009bd8450 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000956a410 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009569510 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009568ac0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000955b640 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000955af88 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009559b38 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000954b998 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000954a930 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009a2cde0 @error=nil, @return_url="http://localhost:3000/orders/42/confirm", @cancel_url="http://localhost:3000/orders/42/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000992e880 @base=#<Payment:0x00000009bd8450 ...>, @messages={}>, @request_id="b37d5c1a-b4d6-4a7f-af90-aa8be2596c3d", @header={}, @id="PAY-40D95864853550437KSSSITY", @create_time="2015-01-01T10:41:19Z", @update_time="2015-01-01T10:41:20Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000095427f8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009540840 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-4CW540145A2930528", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000953a5d0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T10:41:21.467365 #10344]  INFO -- : #<Payment:0x00000009bd8450 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000956a410 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009569510 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009568ac0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000955b640 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000955af88 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009559b38 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000954b998 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000954a930 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009a2cde0 @error=nil, @return_url="http://localhost:3000/orders/42/confirm", @cancel_url="http://localhost:3000/orders/42/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000992e880 @base=#<Payment:0x00000009bd8450 ...>, @messages={}>, @request_id="b37d5c1a-b4d6-4a7f-af90-aa8be2596c3d", @header={}, @id="PAY-40D95864853550437KSSSITY", @create_time="2015-01-01T10:41:19Z", @update_time="2015-01-01T10:41:20Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000095427f8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009540840 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-4CW540145A2930528", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000953a5d0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY/execute", @rel="execute", @method="POST">]>
D, [2015-01-01T10:41:21.592165 #10344] DEBUG -- :   [1m[35m (93.6ms)[0m  commit transaction
I, [2015-01-01T10:41:21.623365 #10344]  INFO -- : about to approve url
I, [2015-01-01T10:41:22.559367 #10344]  INFO -- : #<Payment:0x00000009bd8450 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000956a410 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009569510 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009568ac0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000955b640 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000955af88 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009559b38 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000954b998 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000954a930 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009a2cde0 @error=nil, @return_url="http://localhost:3000/orders/42/confirm", @cancel_url="http://localhost:3000/orders/42/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000992e880 @base=#<Payment:0x00000009bd8450 ...>, @messages={}>, @request_id="b37d5c1a-b4d6-4a7f-af90-aa8be2596c3d", @header={}, @id="PAY-40D95864853550437KSSSITY", @create_time="2015-01-01T10:41:19Z", @update_time="2015-01-01T10:41:20Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000095427f8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009540840 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-4CW540145A2930528", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000953a5d0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T10:41:23.528569 #10344]  INFO -- : #<Payment:0x00000009bd8450 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000956a410 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009569510 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009568ac0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000955b640 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000955af88 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009559b38 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000954b998 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000954a930 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009a2cde0 @error=nil, @return_url="http://localhost:3000/orders/42/confirm", @cancel_url="http://localhost:3000/orders/42/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000992e880 @base=#<Payment:0x00000009bd8450 ...>, @messages={}>, @request_id="b37d5c1a-b4d6-4a7f-af90-aa8be2596c3d", @header={}, @id="PAY-40D95864853550437KSSSITY", @create_time="2015-01-01T10:41:19Z", @update_time="2015-01-01T10:41:20Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000095427f8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009540840 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-4CW540145A2930528", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000953a5d0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T10:41:23.590969 #10344]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-4CW540145A2930528
I, [2015-01-01T10:41:24.573771 #10344]  INFO -- : #<Payment:0x00000009bd8450 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000956a410 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009569510 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009568ac0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000955b640 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000955af88 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009559b38 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000954b998 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000954a930 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009a2cde0 @error=nil, @return_url="http://localhost:3000/orders/42/confirm", @cancel_url="http://localhost:3000/orders/42/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000992e880 @base=#<Payment:0x00000009bd8450 ...>, @messages={}>, @request_id="b37d5c1a-b4d6-4a7f-af90-aa8be2596c3d", @header={}, @id="PAY-40D95864853550437KSSSITY", @create_time="2015-01-01T10:41:19Z", @update_time="2015-01-01T10:41:20Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000095427f8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009540840 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-4CW540145A2930528", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000953a5d0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T10:41:24.651771 #10344]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-4CW540145A2930528
I, [2015-01-01T10:41:24.698571 #10344]  INFO -- : Completed 403 Forbidden in 16929ms (ActiveRecord: 156.0ms)
D, [2015-01-01T10:42:07.624022 #10344] DEBUG -- : 
D, [2015-01-01T10:42:07.648023 #10344] DEBUG -- : 
I, [2015-01-01T10:42:07.745029 #10344]  INFO -- : Started GET "/orders/42/confirm?paymentId=PAY-40D95864853550437KSSSITY&token=EC-4CW540145A2930528&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-01 10:42:07 +0000
I, [2015-01-01T10:42:07.830033 #10344]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-01T10:42:07.914038 #10344]  INFO -- :   Parameters: {"paymentId"=>"PAY-40D95864853550437KSSSITY", "token"=>"EC-4CW540145A2930528", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"42"}
D, [2015-01-01T10:42:08.091048 #10344] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T10:42:08.180054 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T10:42:08.264058 #10344] DEBUG -- :   [1m[36mOrder Load (2.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "42"]]
D, [2015-01-01T10:50:53.581105 #10344] DEBUG -- :   [1m[35mLineItem Load (1.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 42]]
D, [2015-01-01T10:50:57.831348 #10344] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 42]]
I, [2015-01-01T10:51:53.691543 #10344]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY
I, [2015-01-01T10:51:54.812607 #10344]  INFO -- : Response[200]: OK, Duration: 1.091s
D, [2015-01-01T10:58:36.149562 #10344] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2015-01-01T10:58:36.286570 #10344] DEBUG -- :   [1m[36mSQL (6.0ms)[0m  [1mUPDATE "orders" SET "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 42[0m  [["shipping_address1", "1 Main Terrace"], ["updated_at", Thu, 01 Jan 2015 10:58:36 UTC +00:00]]
D, [2015-01-01T10:58:36.460580 #10344] DEBUG -- :   [1m[35m (131.0ms)[0m  commit transaction
I, [2015-01-01T10:58:36.633590 #10344]  INFO -- :   Rendered orders/_form.html.erb (102.0ms)
I, [2015-01-01T10:58:36.702594 #10344]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (164.0ms)
I, [2015-01-01T10:58:36.889604 #10344]  INFO -- : Completed 200 OK in 988922ms (Views: 371.0ms | ActiveRecord: 147.0ms)
D, [2015-01-01T10:58:37.127618 #10344] DEBUG -- : 
D, [2015-01-01T10:58:37.143619 #10344] DEBUG -- : 
I, [2015-01-01T10:58:37.185621 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 10:58:37 +0000
D, [2015-01-01T10:58:37.307628 #10344] DEBUG -- : 
D, [2015-01-01T10:58:37.330630 #10344] DEBUG -- : 
I, [2015-01-01T10:58:37.392633 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 10:58:37 +0000
D, [2015-01-01T10:58:37.480638 #10344] DEBUG -- : 
D, [2015-01-01T10:58:37.505640 #10344] DEBUG -- : 
I, [2015-01-01T10:58:37.554643 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 10:58:37 +0000
D, [2015-01-01T10:58:37.635647 #10344] DEBUG -- : 
D, [2015-01-01T10:58:37.666649 #10344] DEBUG -- : 
I, [2015-01-01T10:58:37.722652 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 10:58:37 +0000
D, [2015-01-01T10:58:37.801657 #10344] DEBUG -- : 
D, [2015-01-01T10:58:37.827658 #10344] DEBUG -- : 
I, [2015-01-01T10:58:37.895662 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 10:58:37 +0000
D, [2015-01-01T10:58:37.967666 #10344] DEBUG -- : 
D, [2015-01-01T10:58:37.992668 #10344] DEBUG -- : 
I, [2015-01-01T10:58:38.057671 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 10:58:37 +0000
D, [2015-01-01T10:58:38.127675 #10344] DEBUG -- : 
D, [2015-01-01T10:58:38.152677 #10344] DEBUG -- : 
I, [2015-01-01T10:58:38.218680 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 10:58:38 +0000
D, [2015-01-01T10:58:38.290685 #10344] DEBUG -- : 
D, [2015-01-01T10:58:38.313686 #10344] DEBUG -- : 
I, [2015-01-01T10:58:38.371689 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 10:58:38 +0000
D, [2015-01-01T10:58:38.444693 #10344] DEBUG -- : 
D, [2015-01-01T10:58:38.467695 #10344] DEBUG -- : 
I, [2015-01-01T10:58:38.529698 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 10:58:38 +0000
D, [2015-01-01T10:58:38.603703 #10344] DEBUG -- : 
D, [2015-01-01T10:58:38.625704 #10344] DEBUG -- : 
I, [2015-01-01T10:58:38.687707 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 10:58:38 +0000
D, [2015-01-01T10:58:38.767712 #10344] DEBUG -- : 
D, [2015-01-01T10:58:38.793713 #10344] DEBUG -- : 
I, [2015-01-01T10:58:38.862717 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 10:58:38 +0000
D, [2015-01-01T10:58:38.937722 #10344] DEBUG -- : 
D, [2015-01-01T10:58:38.960723 #10344] DEBUG -- : 
I, [2015-01-01T10:58:39.015726 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 10:58:38 +0000
D, [2015-01-01T10:58:39.088730 #10344] DEBUG -- : 
D, [2015-01-01T10:58:39.106731 #10344] DEBUG -- : 
I, [2015-01-01T10:58:39.146734 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 10:58:39 +0000
D, [2015-01-01T10:58:39.220738 #10344] DEBUG -- : 
D, [2015-01-01T10:58:39.245739 #10344] DEBUG -- : 
I, [2015-01-01T10:58:39.299742 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 10:58:39 +0000
D, [2015-01-01T10:58:39.386747 #10344] DEBUG -- : 
D, [2015-01-01T10:58:39.406748 #10344] DEBUG -- : 
I, [2015-01-01T10:58:39.454751 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 10:58:39 +0000
D, [2015-01-01T10:58:39.533756 #10344] DEBUG -- : 
D, [2015-01-01T10:58:39.554757 #10344] DEBUG -- : 
I, [2015-01-01T10:58:39.604760 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 10:58:39 +0000
D, [2015-01-01T10:58:39.687765 #10344] DEBUG -- : 
D, [2015-01-01T10:58:39.708766 #10344] DEBUG -- : 
I, [2015-01-01T10:58:39.758769 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 10:58:39 +0000
D, [2015-01-01T10:58:39.833773 #10344] DEBUG -- : 
D, [2015-01-01T10:58:39.854774 #10344] DEBUG -- : 
I, [2015-01-01T10:58:39.907777 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 10:58:39 +0000
D, [2015-01-01T10:58:39.980781 #10344] DEBUG -- : 
D, [2015-01-01T10:58:40.006783 #10344] DEBUG -- : 
I, [2015-01-01T10:58:40.049785 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 10:58:40 +0000
D, [2015-01-01T10:58:40.129790 #10344] DEBUG -- : 
D, [2015-01-01T10:58:40.149791 #10344] DEBUG -- : 
I, [2015-01-01T10:58:40.197794 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 10:58:40 +0000
D, [2015-01-01T10:58:40.270798 #10344] DEBUG -- : 
D, [2015-01-01T10:58:40.298799 #10344] DEBUG -- : 
I, [2015-01-01T10:58:40.347802 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 10:58:40 +0000
D, [2015-01-01T10:58:40.433807 #10344] DEBUG -- : 
D, [2015-01-01T10:58:40.452808 #10344] DEBUG -- : 
I, [2015-01-01T10:58:40.498811 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 10:58:40 +0000
D, [2015-01-01T10:58:40.589816 #10344] DEBUG -- : 
D, [2015-01-01T10:58:40.605817 #10344] DEBUG -- : 
I, [2015-01-01T10:58:40.649820 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 10:58:40 +0000
D, [2015-01-01T10:58:40.717823 #10344] DEBUG -- : 
D, [2015-01-01T10:58:40.734824 #10344] DEBUG -- : 
I, [2015-01-01T10:58:40.777827 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 10:58:40 +0000
D, [2015-01-01T10:58:40.847831 #10344] DEBUG -- : 
D, [2015-01-01T10:58:40.863832 #10344] DEBUG -- : 
I, [2015-01-01T10:58:40.902834 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 10:58:40 +0000
D, [2015-01-01T10:58:40.972838 #10344] DEBUG -- : 
D, [2015-01-01T10:58:40.988839 #10344] DEBUG -- : 
I, [2015-01-01T10:58:41.041842 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 10:58:40 +0000
D, [2015-01-01T10:58:41.116846 #10344] DEBUG -- : 
D, [2015-01-01T10:58:41.133847 #10344] DEBUG -- : 
I, [2015-01-01T10:58:41.176850 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 10:58:41 +0000
D, [2015-01-01T10:58:41.267855 #10344] DEBUG -- : 
D, [2015-01-01T10:58:41.284856 #10344] DEBUG -- : 
I, [2015-01-01T10:58:41.330858 #10344]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-01 10:58:41 +0000
D, [2015-01-01T10:58:47.305091 #10344] DEBUG -- : 
D, [2015-01-01T10:58:47.329093 #10344] DEBUG -- : 
I, [2015-01-01T10:58:47.395097 #10344]  INFO -- : Started POST "/orders/42/execute/42/2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-01 10:58:47 +0000
I, [2015-01-01T10:58:47.495102 #10344]  INFO -- : Processing by OrdersController#execute as HTML
I, [2015-01-01T10:58:47.581107 #10344]  INFO -- :   Parameters: {"authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order_id"=>"42", "payer_id"=>"2VZ7YQDDDPPC4"}
D, [2015-01-01T10:58:47.677113 #10344] DEBUG -- :   [1m[36mOrder Load (2.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "42"]]
I, [2015-01-01T10:58:47.990131 #10344]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY
I, [2015-01-01T10:58:49.495217 #10344]  INFO -- : Response[200]: OK, Duration: 1.474s
I, [2015-01-01T10:58:49.557220 #10344]  INFO -- : PayPal-Request-Id: 205f3133-6526-49cb-ba6d-12a1b9d46dc7
I, [2015-01-01T10:58:49.610223 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY/execute
I, [2015-01-01T10:58:51.794348 #10344]  INFO -- : Response[200]: OK, Duration: 2.150s
D, [2015-01-01T10:58:51.852351 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-01T10:58:51.968358 #10344] DEBUG -- :   [1m[36mSQL (7.0ms)[0m  [1mUPDATE "orders" SET "state" = ?, "updated_at" = ? WHERE "orders"."id" = 42[0m  [["state", "approved"], ["updated_at", Thu, 01 Jan 2015 10:58:51 UTC +00:00]]
D, [2015-01-01T10:58:52.141368 #10344] DEBUG -- :   [1m[35m (136.0ms)[0m  commit transaction
D, [2015-01-01T10:58:52.210372 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T10:58:52.251374 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-01T10:58:52.339379 #10344] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 35]]
D, [2015-01-01T10:58:52.400383 #10344] DEBUG -- :   [1m[35mSQL (5.0ms)[0m  DELETE FROM "carts" WHERE "carts"."id" = ?  [["id", 35]]
D, [2015-01-01T10:58:52.562392 #10344] DEBUG -- :   [1m[36m (121.0ms)[0m  [1mcommit transaction[0m
I, [2015-01-01T17:25:02.314257 #10344]  INFO -- :   Rendered order_notifier/received.html.erb (44.0ms)
D, [2015-01-01T17:25:02.882290 #10344] DEBUG -- :   [1m[35mLineItem Load (146.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 42]]
D, [2015-01-01T17:25:03.420320 #10344] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-01T17:25:03.557328 #10344]  INFO -- :   Rendered line_items/_line_item.text.erb (414.0ms)
I, [2015-01-01T17:25:03.603331 #10344]  INFO -- :   Rendered order_notifier/received.text.erb (1119.1ms)
I, [2015-01-01T17:25:07.013526 #10344]  INFO -- : 
Sent mail to  (1710.1ms)
D, [2015-01-01T17:25:07.286542 #10344] DEBUG -- : Date: Thu, 01 Jan 2015 17:25:05 +0000
From: Simon King <simon.king65@gmail.com>
Message-ID: <54a582f1c84ea_2868262d5702275f@Simon-PC.mail>
Subject: King Clothing Order Confirmation
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_54a582f0715fc_2868262d570226eb";
 charset=UTF-8
Content-Transfer-Encoding: 7bit


----==_mimepart_54a582f0715fc_2868262d570226eb
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear 

Thank you for your recent order from King Clothing.

You ordered the following items:

 1 x Camo Print Tee
We'll send you a separate e-mail when your order ships.
----==_mimepart_54a582f0715fc_2868262d570226eb
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<h1>OrderNotifier#received</h1>

<p>
  , thank you for your order, we will email you again once your order has been despatched. We hope you enjoy wearing your King Clothing brand tee-shirt.
</p>

----==_mimepart_54a582f0715fc_2868262d570226eb--

I, [2015-01-01T17:25:07.601560 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T17:25:07.633561 #10344]  INFO -- : Completed 302 Found in 23180024ms (ActiveRecord: 424.0ms)
D, [2015-01-01T17:25:08.254597 #10344] DEBUG -- : 
D, [2015-01-01T17:25:08.363603 #10344] DEBUG -- : 
I, [2015-01-01T17:25:08.418606 #10344]  INFO -- : Started POST "/orders/42/execute/42/2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-01 17:25:08 +0000
I, [2015-01-01T17:25:09.632676 #10344]  INFO -- : Processing by OrdersController#execute as HTML
I, [2015-01-01T17:25:09.688679 #10344]  INFO -- :   Parameters: {"authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order_id"=>"42", "payer_id"=>"2VZ7YQDDDPPC4"}
D, [2015-01-01T17:25:09.830687 #10344] DEBUG -- :   [1m[35mOrder Load (2.0ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "42"]]
I, [2015-01-01T17:25:57.576418 #10344]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY
I, [2015-01-01T17:26:00.170566 #10344]  INFO -- : Response[200]: OK, Duration: 2.563s
I, [2015-01-01T17:26:00.487584 #10344]  INFO -- : PayPal-Request-Id: 66f72a2c-6e9c-48ce-a713-083c76f50652
I, [2015-01-01T17:26:00.541588 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY/execute
I, [2015-01-01T17:26:01.548645 #10344]  INFO -- : Response[400]: Bad Request, Duration: 0.971s
I, [2015-01-01T17:26:02.123678 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T17:26:02.170681 #10344]  INFO -- : Completed 302 Found in 52436ms (ActiveRecord: 2.0ms)
D, [2015-01-01T17:26:02.301688 #10344] DEBUG -- : 
D, [2015-01-01T17:26:02.325690 #10344] DEBUG -- : 
I, [2015-01-01T17:26:02.376693 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 17:26:02 +0000
I, [2015-01-01T17:26:03.589762 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T17:26:03.712769 #10344] DEBUG -- :   [1m[36mCart Load (1.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T17:26:03.878778 #10344] DEBUG -- :   [1m[35m (42.0ms)[0m  begin transaction
D, [2015-01-01T17:26:04.172795 #10344] DEBUG -- :   [1m[36mSQL (39.0ms)[0m  [1mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 17:26:03 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 17:26:03 UTC +00:00]]
D, [2015-01-01T17:26:04.329804 #10344] DEBUG -- :   [1m[35m (121.0ms)[0m  commit transaction
D, [2015-01-01T17:26:04.572818 #10344] DEBUG -- :   [1m[36mProduct Load (19.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-01T17:26:04.967841 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (162.0ms)
I, [2015-01-01T17:26:05.038845 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (569.0ms)
D, [2015-01-01T17:26:05.778887 #10344] DEBUG -- :   [1m[35mLineItem Exists (12.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:26:05.934896 #10344] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:26:05.965898 #10344]  INFO -- :   Rendered collection (1.0ms)
I, [2015-01-01T17:26:06.380922 #10344]  INFO -- :   Rendered carts/_cart.html.erb (469.0ms)
I, [2015-01-01T17:26:06.491928 #10344]  INFO -- : Completed 200 OK in 2856ms (Views: 2043.1ms | ActiveRecord: 236.0ms)
D, [2015-01-01T17:26:07.326976 #10344] DEBUG -- : 
D, [2015-01-01T17:26:07.340976 #10344] DEBUG -- : 
I, [2015-01-01T17:26:07.388979 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 17:26:07 +0000
D, [2015-01-01T17:26:07.549988 #10344] DEBUG -- : 
D, [2015-01-01T17:26:07.563989 #10344] DEBUG -- : 
I, [2015-01-01T17:26:07.634993 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 17:26:07 +0000
D, [2015-01-01T17:26:07.732999 #10344] DEBUG -- : 
D, [2015-01-01T17:26:07.779001 #10344] DEBUG -- : 
I, [2015-01-01T17:26:07.860006 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 17:26:07 +0000
D, [2015-01-01T17:26:07.923010 #10344] DEBUG -- : 
D, [2015-01-01T17:26:07.939011 #10344] DEBUG -- : 
I, [2015-01-01T17:26:07.983013 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 17:26:07 +0000
D, [2015-01-01T17:26:08.125021 #10344] DEBUG -- : 
D, [2015-01-01T17:26:08.173024 #10344] DEBUG -- : 
I, [2015-01-01T17:26:08.226027 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 17:26:08 +0000
D, [2015-01-01T17:26:08.315032 #10344] DEBUG -- : 
D, [2015-01-01T17:26:08.353034 #10344] DEBUG -- : 
I, [2015-01-01T17:26:08.401037 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 17:26:08 +0000
D, [2015-01-01T17:26:08.555046 #10344] DEBUG -- : 
D, [2015-01-01T17:26:08.578047 #10344] DEBUG -- : 
I, [2015-01-01T17:26:08.670052 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 17:26:08 +0000
D, [2015-01-01T17:26:08.854063 #10344] DEBUG -- : 
D, [2015-01-01T17:26:08.890065 #10344] DEBUG -- : 
I, [2015-01-01T17:26:08.942068 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 17:26:08 +0000
D, [2015-01-01T17:26:09.089076 #10344] DEBUG -- : 
D, [2015-01-01T17:26:09.115078 #10344] DEBUG -- : 
I, [2015-01-01T17:26:09.163081 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 17:26:09 +0000
D, [2015-01-01T17:26:09.238085 #10344] DEBUG -- : 
D, [2015-01-01T17:26:09.259086 #10344] DEBUG -- : 
I, [2015-01-01T17:26:09.310089 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 17:26:09 +0000
D, [2015-01-01T17:26:09.443097 #10344] DEBUG -- : 
D, [2015-01-01T17:26:09.462098 #10344] DEBUG -- : 
I, [2015-01-01T17:26:09.515101 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 17:26:09 +0000
D, [2015-01-01T17:26:09.641108 #10344] DEBUG -- : 
D, [2015-01-01T17:26:09.661109 #10344] DEBUG -- : 
I, [2015-01-01T17:26:09.715112 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 17:26:09 +0000
D, [2015-01-01T17:26:09.798117 #10344] DEBUG -- : 
D, [2015-01-01T17:26:09.823118 #10344] DEBUG -- : 
I, [2015-01-01T17:26:09.873121 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 17:26:09 +0000
D, [2015-01-01T17:26:09.950126 #10344] DEBUG -- : 
D, [2015-01-01T17:26:09.970127 #10344] DEBUG -- : 
I, [2015-01-01T17:26:10.024130 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 17:26:09 +0000
D, [2015-01-01T17:26:10.102134 #10344] DEBUG -- : 
D, [2015-01-01T17:26:10.123136 #10344] DEBUG -- : 
I, [2015-01-01T17:26:10.173138 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 17:26:10 +0000
D, [2015-01-01T17:26:10.277144 #10344] DEBUG -- : 
D, [2015-01-01T17:26:10.296145 #10344] DEBUG -- : 
I, [2015-01-01T17:26:10.348148 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 17:26:10 +0000
D, [2015-01-01T17:26:10.438154 #10344] DEBUG -- : 
D, [2015-01-01T17:26:10.458155 #10344] DEBUG -- : 
I, [2015-01-01T17:26:10.513158 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 17:26:10 +0000
D, [2015-01-01T17:26:10.609163 #10344] DEBUG -- : 
D, [2015-01-01T17:26:10.629165 #10344] DEBUG -- : 
I, [2015-01-01T17:26:10.679167 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 17:26:10 +0000
D, [2015-01-01T17:26:10.756172 #10344] DEBUG -- : 
D, [2015-01-01T17:26:10.777173 #10344] DEBUG -- : 
I, [2015-01-01T17:26:10.828176 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 17:26:10 +0000
D, [2015-01-01T17:26:10.898180 #10344] DEBUG -- : 
D, [2015-01-01T17:26:10.926182 #10344] DEBUG -- : 
I, [2015-01-01T17:26:10.979185 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 17:26:10 +0000
D, [2015-01-01T17:26:11.058189 #10344] DEBUG -- : 
D, [2015-01-01T17:26:11.077190 #10344] DEBUG -- : 
I, [2015-01-01T17:26:11.126193 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 17:26:11 +0000
D, [2015-01-01T17:26:11.203197 #10344] DEBUG -- : 
D, [2015-01-01T17:26:11.231199 #10344] DEBUG -- : 
I, [2015-01-01T17:26:11.282202 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 17:26:11 +0000
D, [2015-01-01T17:26:11.357206 #10344] DEBUG -- : 
D, [2015-01-01T17:26:11.377207 #10344] DEBUG -- : 
I, [2015-01-01T17:26:11.430210 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 17:26:11 +0000
D, [2015-01-01T17:26:11.501214 #10344] DEBUG -- : 
D, [2015-01-01T17:26:11.556218 #10344] DEBUG -- : 
I, [2015-01-01T17:26:11.603220 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 17:26:11 +0000
D, [2015-01-01T17:26:11.677224 #10344] DEBUG -- : 
D, [2015-01-01T17:26:11.700226 #10344] DEBUG -- : 
I, [2015-01-01T17:26:11.760229 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 17:26:11 +0000
D, [2015-01-01T17:26:11.835233 #10344] DEBUG -- : 
D, [2015-01-01T17:26:11.863235 #10344] DEBUG -- : 
I, [2015-01-01T17:26:11.933239 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 17:26:11 +0000
D, [2015-01-01T17:26:12.058246 #10344] DEBUG -- : 
D, [2015-01-01T17:26:12.084248 #10344] DEBUG -- : 
I, [2015-01-01T17:26:12.149251 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 17:26:12 +0000
D, [2015-01-01T17:26:12.236256 #10344] DEBUG -- : 
D, [2015-01-01T17:26:12.262258 #10344] DEBUG -- : 
I, [2015-01-01T17:26:12.331262 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 17:26:12 +0000
D, [2015-01-01T17:26:12.429267 #10344] DEBUG -- : 
D, [2015-01-01T17:26:12.449269 #10344] DEBUG -- : 
I, [2015-01-01T17:26:12.510272 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 17:26:12 +0000
D, [2015-01-01T17:26:23.528353 #10344] DEBUG -- : 
D, [2015-01-01T17:26:23.559553 #10344] DEBUG -- : 
I, [2015-01-01T17:26:23.621953 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 17:26:23 +0000
I, [2015-01-01T17:26:23.824754 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T17:26:23.902754 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T17:26:23.996354 #10344] DEBUG -- :   [1m[35mCart Load (15.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:26:24.106554 #10344] DEBUG -- :   [1m[36mProduct Load (15.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-01T17:26:24.246954 #10344] DEBUG -- :   [1m[35mLineItem Load (15.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:26:24.402955 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T17:26:24.496555 #10344] DEBUG -- :   [1m[35m (15.6ms)[0m  begin transaction
D, [2015-01-01T17:26:24.886555 #10344] DEBUG -- :   [1m[36mSQL (124.8ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 17:26:24 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:9e35018,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 17:26:24 UTC +00:00]]
D, [2015-01-01T17:26:25.089356 #10344] DEBUG -- :   [1m[35m (156.0ms)[0m  commit transaction
D, [2015-01-01T17:26:25.260956 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:26:25.386756 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (31.2ms)
I, [2015-01-01T17:26:25.464756 #10344]  INFO -- :   Rendered carts/_cart.html.erb (235.0ms)
I, [2015-01-01T17:26:25.511557 #10344]  INFO -- :   Rendered line_items/create.js.erb (297.4ms)
I, [2015-01-01T17:26:25.558357 #10344]  INFO -- : Completed 200 OK in 1609ms (Views: 406.6ms | ActiveRecord: 343.2ms)
D, [2015-01-01T17:26:28.790627 #10344] DEBUG -- : 
D, [2015-01-01T17:26:28.821827 #10344] DEBUG -- : 
I, [2015-01-01T17:26:28.868627 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 17:26:28 +0000
I, [2015-01-01T17:26:28.993428 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T17:26:29.133828 #10344] DEBUG -- :   [1m[35mUser Load (15.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T17:26:29.243028 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T17:26:29.695429 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:26:30.210230 #10344] DEBUG -- :   [1m[36mLineItem Load (15.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:26:30.678231 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T17:26:42.467661 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T17:26:42.623662 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 17:26:42 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 17:26:42 UTC +00:00]]
D, [2015-01-01T17:26:42.826462 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 44  [["cart_id", nil], ["order_id", 43], ["updated_at", Thu, 01 Jan 2015 17:26:42 UTC +00:00]]
I, [2015-01-01T17:26:42.873262 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T17:26:42.982462 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-01T17:26:43.060462 #10344]  INFO -- : in order=
I, [2015-01-01T17:26:43.091662 #10344]  INFO -- : in payment.create
I, [2015-01-01T17:26:43.325663 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/43/confirm", "cancel_url"=>"http://localhost:3000/orders/43/cancel"}}
I, [2015-01-01T17:26:43.918464 #10344]  INFO -- : #<ActiveModel::Errors:0x00000007ff3e10 @base=#<Payment:0x00000008163e08 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008163188 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008090328 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000008077350 @error=nil, @total="19.99", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008074f88 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000806fd08 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008067018 @error=nil, @return_url="http://localhost:3000/orders/43/confirm", @cancel_url="http://localhost:3000/orders/43/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007ff3e10 ...>>, @messages={}>
I, [2015-01-01T17:26:43.949664 #10344]  INFO -- : got past invalid
I, [2015-01-01T17:26:44.043264 #10344]  INFO -- : PayPal-Request-Id: 2f3d041b-e214-444f-9b07-4b168b1c2c32
I, [2015-01-01T17:26:44.105664 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T17:26:45.494067 #10344]  INFO -- : Response[201]: Created, Duration: 1.357s
I, [2015-01-01T17:26:45.540867 #10344]  INFO -- : back from super
I, [2015-01-01T17:26:45.977667 #10344]  INFO -- : {"id"=>"PAY-5A5461639M254973KKSSYGVY", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99", "details"=>{"subtotal"=>"19.99"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/43/confirm", "cancel_url"=>"http://localhost:3000/orders/43/cancel"}, "create_time"=>"2015-01-01T17:26:47Z", "update_time"=>"2015-01-01T17:26:47Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-5A5461639M254973KKSSYGVY", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-1EW18306P1794840T", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-5A5461639M254973KKSSYGVY/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-01T17:26:46.211668 #10344] DEBUG -- :   [1m[35mSQL (62.4ms)[0m  UPDATE "orders" SET "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ? WHERE "orders"."id" = 43  [["created_at", Thu, 01 Jan 2015 17:26:42 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 17:26:42 UTC +00:00], ["id", 43], ["payment_id", "PAY-5A5461639M254973KKSSYGVY"], ["state", "created"]]
I, [2015-01-01T17:26:46.242868 #10344]  INFO -- : @payment save just done
I, [2015-01-01T17:26:47.211070 #10344]  INFO -- : #<Payment:0x00000008163e08 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007de0f38 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000007de03d0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000007ddbdd0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007ddabd8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007dda688 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000007dd9238 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007dd3f90 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007dd3158 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008067018 @error=nil, @return_url="http://localhost:3000/orders/43/confirm", @cancel_url="http://localhost:3000/orders/43/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007ff3e10 @base=#<Payment:0x00000008163e08 ...>, @messages={}>, @request_id="2f3d041b-e214-444f-9b07-4b168b1c2c32", @header={}, @id="PAY-5A5461639M254973KKSSYGVY", @create_time="2015-01-01T17:26:47Z", @update_time="2015-01-01T17:26:47Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000007dd04a8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5A5461639M254973KKSSYGVY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007dcac10 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-1EW18306P1794840T", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007dc9428 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5A5461639M254973KKSSYGVY/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T17:26:48.147071 #10344]  INFO -- : #<Payment:0x00000008163e08 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007de0f38 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000007de03d0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000007ddbdd0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007ddabd8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007dda688 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000007dd9238 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007dd3f90 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007dd3158 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008067018 @error=nil, @return_url="http://localhost:3000/orders/43/confirm", @cancel_url="http://localhost:3000/orders/43/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007ff3e10 @base=#<Payment:0x00000008163e08 ...>, @messages={}>, @request_id="2f3d041b-e214-444f-9b07-4b168b1c2c32", @header={}, @id="PAY-5A5461639M254973KKSSYGVY", @create_time="2015-01-01T17:26:47Z", @update_time="2015-01-01T17:26:47Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000007dd04a8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5A5461639M254973KKSSYGVY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007dcac10 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-1EW18306P1794840T", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007dc9428 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5A5461639M254973KKSSYGVY/execute", @rel="execute", @method="POST">]>
D, [2015-01-01T17:26:48.320672 #10344] DEBUG -- :   [1m[36m (125.8ms)[0m  [1mcommit transaction[0m
I, [2015-01-01T17:26:48.351872 #10344]  INFO -- : about to approve url
I, [2015-01-01T17:26:49.319073 #10344]  INFO -- : #<Payment:0x00000008163e08 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007de0f38 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000007de03d0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000007ddbdd0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007ddabd8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007dda688 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000007dd9238 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007dd3f90 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007dd3158 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008067018 @error=nil, @return_url="http://localhost:3000/orders/43/confirm", @cancel_url="http://localhost:3000/orders/43/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007ff3e10 @base=#<Payment:0x00000008163e08 ...>, @messages={}>, @request_id="2f3d041b-e214-444f-9b07-4b168b1c2c32", @header={}, @id="PAY-5A5461639M254973KKSSYGVY", @create_time="2015-01-01T17:26:47Z", @update_time="2015-01-01T17:26:47Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000007dd04a8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5A5461639M254973KKSSYGVY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007dcac10 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-1EW18306P1794840T", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007dc9428 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5A5461639M254973KKSSYGVY/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T17:26:50.334075 #10344]  INFO -- : #<Payment:0x00000008163e08 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007de0f38 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000007de03d0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000007ddbdd0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007ddabd8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007dda688 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000007dd9238 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007dd3f90 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007dd3158 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008067018 @error=nil, @return_url="http://localhost:3000/orders/43/confirm", @cancel_url="http://localhost:3000/orders/43/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007ff3e10 @base=#<Payment:0x00000008163e08 ...>, @messages={}>, @request_id="2f3d041b-e214-444f-9b07-4b168b1c2c32", @header={}, @id="PAY-5A5461639M254973KKSSYGVY", @create_time="2015-01-01T17:26:47Z", @update_time="2015-01-01T17:26:47Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000007dd04a8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5A5461639M254973KKSSYGVY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007dcac10 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-1EW18306P1794840T", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007dc9428 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5A5461639M254973KKSSYGVY/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T17:26:50.381875 #10344]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-1EW18306P1794840T
I, [2015-01-01T17:26:51.352077 #10344]  INFO -- : #<Payment:0x00000008163e08 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007de0f38 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000007de03d0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000007ddbdd0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007ddabd8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007dda688 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000007dd9238 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007dd3f90 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007dd3158 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008067018 @error=nil, @return_url="http://localhost:3000/orders/43/confirm", @cancel_url="http://localhost:3000/orders/43/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007ff3e10 @base=#<Payment:0x00000008163e08 ...>, @messages={}>, @request_id="2f3d041b-e214-444f-9b07-4b168b1c2c32", @header={}, @id="PAY-5A5461639M254973KKSSYGVY", @create_time="2015-01-01T17:26:47Z", @update_time="2015-01-01T17:26:47Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000007dd04a8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5A5461639M254973KKSSYGVY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007dcac10 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-1EW18306P1794840T", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007dc9428 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5A5461639M254973KKSSYGVY/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T17:26:51.430077 #10344]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-1EW18306P1794840T
I, [2015-01-01T17:26:51.539278 #10344]  INFO -- : Completed 403 Forbidden in 22483ms (ActiveRecord: 250.6ms)
D, [2015-01-01T17:29:16.876614 #10344] DEBUG -- : 
D, [2015-01-01T17:29:16.894615 #10344] DEBUG -- : 
I, [2015-01-01T17:29:16.988621 #10344]  INFO -- : Started GET "/orders/43/confirm?paymentId=PAY-5A5461639M254973KKSSYGVY&token=EC-1EW18306P1794840T&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-01 17:29:16 +0000
I, [2015-01-01T17:29:17.114628 #10344]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-01T17:29:17.194633 #10344]  INFO -- :   Parameters: {"paymentId"=>"PAY-5A5461639M254973KKSSYGVY", "token"=>"EC-1EW18306P1794840T", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"43"}
D, [2015-01-01T17:29:17.293638 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T17:29:17.363642 #10344] DEBUG -- :   [1m[36mUser Load (3.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T17:29:17.474649 #10344] DEBUG -- :   [1m[35mOrder Load (1.0ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "43"]]
I, [2015-01-01T17:29:59.152032 #10344]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-5A5461639M254973KKSSYGVY
I, [2015-01-01T17:30:00.245095 #10344]  INFO -- : Response[200]: OK, Duration: 1.061s
D, [2015-01-01T17:30:01.309156 #10344] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T17:30:01.414162 #10344] DEBUG -- :   [1m[35mSQL (7.0ms)[0m  UPDATE "orders" SET "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 43  [["shipping_address1", "1 Main Terrace"], ["updated_at", Thu, 01 Jan 2015 17:30:01 UTC +00:00]]
D, [2015-01-01T17:30:01.700178 #10344] DEBUG -- :   [1m[36m (254.0ms)[0m  [1mcommit transaction[0m
I, [2015-01-01T17:30:02.045198 #10344]  INFO -- :   Rendered orders/_form.html.erb (262.0ms)
I, [2015-01-01T17:30:02.106201 #10344]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (342.0ms)
I, [2015-01-01T17:30:02.325214 #10344]  INFO -- : Completed 200 OK in 45083ms (Views: 575.0ms | ActiveRecord: 268.0ms)
D, [2015-01-01T17:30:02.630231 #10344] DEBUG -- : 
D, [2015-01-01T17:30:02.645232 #10344] DEBUG -- : 
I, [2015-01-01T17:30:02.688235 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 17:30:02 +0000
D, [2015-01-01T17:30:06.383446 #10344] DEBUG -- : 
D, [2015-01-01T17:30:06.408447 #10344] DEBUG -- : 
I, [2015-01-01T17:30:06.460450 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 17:30:06 +0000
D, [2015-01-01T17:30:06.541455 #10344] DEBUG -- : 
D, [2015-01-01T17:30:06.561456 #10344] DEBUG -- : 
I, [2015-01-01T17:30:06.608459 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 17:30:06 +0000
D, [2015-01-01T17:30:06.682463 #10344] DEBUG -- : 
D, [2015-01-01T17:30:06.706465 #10344] DEBUG -- : 
I, [2015-01-01T17:30:06.754467 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 17:30:06 +0000
D, [2015-01-01T17:30:06.833472 #10344] DEBUG -- : 
D, [2015-01-01T17:30:06.853473 #10344] DEBUG -- : 
I, [2015-01-01T17:30:06.906476 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 17:30:06 +0000
D, [2015-01-01T17:30:06.982480 #10344] DEBUG -- : 
D, [2015-01-01T17:30:07.005482 #10344] DEBUG -- : 
I, [2015-01-01T17:30:07.059485 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 17:30:07 +0000
D, [2015-01-01T17:30:07.135489 #10344] DEBUG -- : 
D, [2015-01-01T17:30:07.155490 #10344] DEBUG -- : 
I, [2015-01-01T17:30:07.208493 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 17:30:07 +0000
D, [2015-01-01T17:30:07.293498 #10344] DEBUG -- : 
D, [2015-01-01T17:30:07.312499 #10344] DEBUG -- : 
I, [2015-01-01T17:30:07.362502 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 17:30:07 +0000
D, [2015-01-01T17:30:07.443507 #10344] DEBUG -- : 
D, [2015-01-01T17:30:07.462508 #10344] DEBUG -- : 
I, [2015-01-01T17:30:07.512511 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 17:30:07 +0000
D, [2015-01-01T17:30:07.583515 #10344] DEBUG -- : 
D, [2015-01-01T17:30:07.611516 #10344] DEBUG -- : 
I, [2015-01-01T17:30:07.664519 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 17:30:07 +0000
D, [2015-01-01T17:30:07.744524 #10344] DEBUG -- : 
D, [2015-01-01T17:30:07.764525 #10344] DEBUG -- : 
I, [2015-01-01T17:30:07.819528 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 17:30:07 +0000
D, [2015-01-01T17:30:07.901533 #10344] DEBUG -- : 
D, [2015-01-01T17:30:07.922534 #10344] DEBUG -- : 
I, [2015-01-01T17:30:07.971537 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 17:30:07 +0000
D, [2015-01-01T17:30:08.052542 #10344] DEBUG -- : 
D, [2015-01-01T17:30:08.097544 #10344] DEBUG -- : 
I, [2015-01-01T17:30:08.145547 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 17:30:08 +0000
D, [2015-01-01T17:30:08.212551 #10344] DEBUG -- : 
D, [2015-01-01T17:30:08.229552 #10344] DEBUG -- : 
I, [2015-01-01T17:30:08.270554 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 17:30:08 +0000
D, [2015-01-01T17:30:08.327557 #10344] DEBUG -- : 
D, [2015-01-01T17:30:08.342558 #10344] DEBUG -- : 
I, [2015-01-01T17:30:08.379560 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 17:30:08 +0000
D, [2015-01-01T17:30:08.432563 #10344] DEBUG -- : 
D, [2015-01-01T17:30:08.451564 #10344] DEBUG -- : 
I, [2015-01-01T17:30:08.486566 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 17:30:08 +0000
D, [2015-01-01T17:30:08.542570 #10344] DEBUG -- : 
D, [2015-01-01T17:30:08.562571 #10344] DEBUG -- : 
I, [2015-01-01T17:30:08.597573 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 17:30:08 +0000
D, [2015-01-01T17:30:08.652576 #10344] DEBUG -- : 
D, [2015-01-01T17:30:08.670577 #10344] DEBUG -- : 
I, [2015-01-01T17:30:08.708579 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 17:30:08 +0000
D, [2015-01-01T17:30:08.762582 #10344] DEBUG -- : 
D, [2015-01-01T17:30:08.782583 #10344] DEBUG -- : 
I, [2015-01-01T17:30:08.817585 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 17:30:08 +0000
D, [2015-01-01T17:30:08.878589 #10344] DEBUG -- : 
D, [2015-01-01T17:30:08.892590 #10344] DEBUG -- : 
I, [2015-01-01T17:30:08.928592 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 17:30:08 +0000
D, [2015-01-01T17:30:08.988595 #10344] DEBUG -- : 
D, [2015-01-01T17:30:09.004596 #10344] DEBUG -- : 
I, [2015-01-01T17:30:09.040598 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 17:30:09 +0000
D, [2015-01-01T17:30:09.105602 #10344] DEBUG -- : 
D, [2015-01-01T17:30:09.119603 #10344] DEBUG -- : 
I, [2015-01-01T17:30:09.155605 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 17:30:09 +0000
D, [2015-01-01T17:30:09.208608 #10344] DEBUG -- : 
D, [2015-01-01T17:30:09.221608 #10344] DEBUG -- : 
I, [2015-01-01T17:30:09.260611 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 17:30:09 +0000
D, [2015-01-01T17:30:09.312614 #10344] DEBUG -- : 
D, [2015-01-01T17:30:09.327614 #10344] DEBUG -- : 
I, [2015-01-01T17:30:09.362616 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 17:30:09 +0000
D, [2015-01-01T17:30:09.415619 #10344] DEBUG -- : 
D, [2015-01-01T17:30:09.428620 #10344] DEBUG -- : 
I, [2015-01-01T17:30:09.463622 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 17:30:09 +0000
D, [2015-01-01T17:30:09.516625 #10344] DEBUG -- : 
D, [2015-01-01T17:30:09.530626 #10344] DEBUG -- : 
I, [2015-01-01T17:30:09.569628 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 17:30:09 +0000
D, [2015-01-01T17:30:09.625631 #10344] DEBUG -- : 
D, [2015-01-01T17:30:09.638632 #10344] DEBUG -- : 
I, [2015-01-01T17:30:09.668634 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 17:30:09 +0000
D, [2015-01-01T17:30:09.739638 #10344] DEBUG -- : 
D, [2015-01-01T17:30:09.754639 #10344] DEBUG -- : 
I, [2015-01-01T17:30:09.791641 #10344]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-01 17:30:09 +0000
D, [2015-01-01T17:32:22.504702 #10344] DEBUG -- : 
D, [2015-01-01T17:32:22.520302 #10344] DEBUG -- : 
I, [2015-01-01T17:32:22.582504 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 17:32:22 +0000
I, [2015-01-01T17:32:23.132535 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T17:32:23.392550 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:32:23.782572 #10344] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-01T17:32:24.167595 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (5.0ms)
I, [2015-01-01T17:32:24.230598 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (485.0ms)
D, [2015-01-01T17:32:24.625621 #10344] DEBUG -- :   [1m[35mLineItem Exists (2.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:32:24.740627 #10344] DEBUG -- :   [1m[36mLineItem Load (3.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:32:24.784630 #10344]  INFO -- :   Rendered collection (1.0ms)
I, [2015-01-01T17:32:24.937639 #10344]  INFO -- :   Rendered carts/_cart.html.erb (250.0ms)
I, [2015-01-01T17:32:25.038644 #10344]  INFO -- : Completed 200 OK in 1845ms (Views: 1285.1ms | ActiveRecord: 38.0ms)
D, [2015-01-01T17:32:25.426667 #10344] DEBUG -- : 
D, [2015-01-01T17:32:25.481670 #10344] DEBUG -- : 
I, [2015-01-01T17:32:25.534673 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 17:32:25 +0000
D, [2015-01-01T17:32:25.645679 #10344] DEBUG -- : 
D, [2015-01-01T17:32:25.663680 #10344] DEBUG -- : 
I, [2015-01-01T17:32:25.714683 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 17:32:25 +0000
D, [2015-01-01T17:32:25.798688 #10344] DEBUG -- : 
D, [2015-01-01T17:32:25.825689 #10344] DEBUG -- : 
I, [2015-01-01T17:32:25.880692 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 17:32:25 +0000
D, [2015-01-01T17:32:25.992699 #10344] DEBUG -- : 
D, [2015-01-01T17:32:26.012700 #10344] DEBUG -- : 
I, [2015-01-01T17:32:26.066703 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 17:32:26 +0000
D, [2015-01-01T17:32:26.146708 #10344] DEBUG -- : 
D, [2015-01-01T17:32:26.172709 #10344] DEBUG -- : 
I, [2015-01-01T17:32:26.225712 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 17:32:26 +0000
D, [2015-01-01T17:32:26.309717 #10344] DEBUG -- : 
D, [2015-01-01T17:32:26.329718 #10344] DEBUG -- : 
I, [2015-01-01T17:32:26.386721 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 17:32:26 +0000
D, [2015-01-01T17:32:26.484727 #10344] DEBUG -- : 
D, [2015-01-01T17:32:26.505728 #10344] DEBUG -- : 
I, [2015-01-01T17:32:26.562731 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 17:32:26 +0000
D, [2015-01-01T17:32:26.665737 #10344] DEBUG -- : 
D, [2015-01-01T17:32:26.686739 #10344] DEBUG -- : 
I, [2015-01-01T17:32:26.741742 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 17:32:26 +0000
D, [2015-01-01T17:32:26.819746 #10344] DEBUG -- : 
D, [2015-01-01T17:32:26.840747 #10344] DEBUG -- : 
I, [2015-01-01T17:32:26.889750 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 17:32:26 +0000
D, [2015-01-01T17:32:26.979755 #10344] DEBUG -- : 
D, [2015-01-01T17:32:27.010757 #10344] DEBUG -- : 
I, [2015-01-01T17:32:27.062760 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 17:32:27 +0000
D, [2015-01-01T17:32:27.141765 #10344] DEBUG -- : 
D, [2015-01-01T17:32:27.167766 #10344] DEBUG -- : 
I, [2015-01-01T17:32:27.221769 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 17:32:27 +0000
D, [2015-01-01T17:32:27.304774 #10344] DEBUG -- : 
D, [2015-01-01T17:32:27.324775 #10344] DEBUG -- : 
I, [2015-01-01T17:32:27.375778 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 17:32:27 +0000
D, [2015-01-01T17:32:27.468783 #10344] DEBUG -- : 
D, [2015-01-01T17:32:27.487784 #10344] DEBUG -- : 
I, [2015-01-01T17:32:27.542788 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 17:32:27 +0000
D, [2015-01-01T17:32:27.625792 #10344] DEBUG -- : 
D, [2015-01-01T17:32:27.645793 #10344] DEBUG -- : 
I, [2015-01-01T17:32:27.705797 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 17:32:27 +0000
D, [2015-01-01T17:32:27.792802 #10344] DEBUG -- : 
D, [2015-01-01T17:32:27.813803 #10344] DEBUG -- : 
I, [2015-01-01T17:32:27.864806 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 17:32:27 +0000
D, [2015-01-01T17:32:27.949811 #10344] DEBUG -- : 
D, [2015-01-01T17:32:27.971812 #10344] DEBUG -- : 
I, [2015-01-01T17:32:28.028815 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 17:32:27 +0000
D, [2015-01-01T17:32:28.117820 #10344] DEBUG -- : 
D, [2015-01-01T17:32:28.142822 #10344] DEBUG -- : 
I, [2015-01-01T17:32:28.194825 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 17:32:28 +0000
D, [2015-01-01T17:32:28.273829 #10344] DEBUG -- : 
D, [2015-01-01T17:32:28.294831 #10344] DEBUG -- : 
I, [2015-01-01T17:32:28.346834 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 17:32:28 +0000
D, [2015-01-01T17:32:28.425838 #10344] DEBUG -- : 
D, [2015-01-01T17:32:28.448839 #10344] DEBUG -- : 
I, [2015-01-01T17:32:28.503843 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 17:32:28 +0000
D, [2015-01-01T17:32:28.590847 #10344] DEBUG -- : 
D, [2015-01-01T17:32:28.618849 #10344] DEBUG -- : 
I, [2015-01-01T17:32:28.672852 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 17:32:28 +0000
D, [2015-01-01T17:32:28.751857 #10344] DEBUG -- : 
D, [2015-01-01T17:32:28.772858 #10344] DEBUG -- : 
I, [2015-01-01T17:32:28.825861 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 17:32:28 +0000
D, [2015-01-01T17:32:28.914866 #10344] DEBUG -- : 
D, [2015-01-01T17:32:28.932867 #10344] DEBUG -- : 
I, [2015-01-01T17:32:29.006871 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 17:32:28 +0000
D, [2015-01-01T17:32:29.083876 #10344] DEBUG -- : 
D, [2015-01-01T17:32:29.104877 #10344] DEBUG -- : 
I, [2015-01-01T17:32:29.158880 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 17:32:29 +0000
D, [2015-01-01T17:32:29.231884 #10344] DEBUG -- : 
D, [2015-01-01T17:32:29.250885 #10344] DEBUG -- : 
I, [2015-01-01T17:32:29.298888 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 17:32:29 +0000
D, [2015-01-01T17:32:29.369892 #10344] DEBUG -- : 
D, [2015-01-01T17:32:29.388893 #10344] DEBUG -- : 
I, [2015-01-01T17:32:29.447897 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 17:32:29 +0000
D, [2015-01-01T17:32:29.522901 #10344] DEBUG -- : 
D, [2015-01-01T17:32:29.544902 #10344] DEBUG -- : 
I, [2015-01-01T17:32:29.599905 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 17:32:29 +0000
D, [2015-01-01T17:32:29.689910 #10344] DEBUG -- : 
D, [2015-01-01T17:32:29.722912 #10344] DEBUG -- : 
I, [2015-01-01T17:32:29.768915 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 17:32:29 +0000
D, [2015-01-01T17:32:29.848919 #10344] DEBUG -- : 
D, [2015-01-01T17:32:29.868921 #10344] DEBUG -- : 
I, [2015-01-01T17:32:29.918923 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 17:32:29 +0000
D, [2015-01-01T17:32:30.000928 #10344] DEBUG -- : 
D, [2015-01-01T17:32:30.019929 #10344] DEBUG -- : 
I, [2015-01-01T17:32:30.074932 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 17:32:30 +0000
D, [2015-01-01T17:34:02.538432 #10344] DEBUG -- : 
D, [2015-01-01T17:34:02.554032 #10344] DEBUG -- : 
I, [2015-01-01T17:34:02.616432 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 17:34:02 +0000
I, [2015-01-01T17:34:02.772433 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T17:34:02.850433 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T17:34:02.975233 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:34:03.053233 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-01T17:34:03.179033 #10344] DEBUG -- :   [1m[35mLineItem Load (15.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:34:03.460834 #10344] DEBUG -- :   [1m[36mProduct Load (15.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T17:34:03.507634 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T17:34:03.788434 #10344] DEBUG -- :   [1m[36mSQL (31.2ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 17:34:03 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:4625288,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 17:34:03 UTC +00:00]]
D, [2015-01-01T17:34:04.006835 #10344] DEBUG -- :   [1m[35m (187.2ms)[0m  commit transaction
D, [2015-01-01T17:34:04.116035 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:34:04.209635 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T17:34:04.287635 #10344]  INFO -- :   Rendered carts/_cart.html.erb (218.4ms)
I, [2015-01-01T17:34:04.334435 #10344]  INFO -- :   Rendered line_items/create.js.erb (280.8ms)
I, [2015-01-01T17:34:04.396835 #10344]  INFO -- : Completed 200 OK in 1500ms (Views: 343.2ms | ActiveRecord: 249.6ms)
D, [2015-01-01T17:34:10.263511 #10344] DEBUG -- : 
D, [2015-01-01T17:34:10.279111 #10344] DEBUG -- : 
I, [2015-01-01T17:34:10.341511 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 17:34:10 +0000
I, [2015-01-01T17:34:10.497511 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T17:34:10.887512 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T17:34:11.164713 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T17:34:11.227113 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:34:11.414313 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:34:11.570314 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T17:34:20.184132 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T17:34:20.605333 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 17:34:20 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 17:34:20 UTC +00:00]]
D, [2015-01-01T17:34:20.745733 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 45  [["cart_id", nil], ["order_id", 44], ["updated_at", Thu, 01 Jan 2015 17:34:20 UTC +00:00]]
I, [2015-01-01T17:34:20.776933 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T17:34:20.888134 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-01T17:34:20.966134 #10344]  INFO -- : in order=
I, [2015-01-01T17:34:20.997334 #10344]  INFO -- : in payment.create
I, [2015-01-01T17:34:21.215734 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/44/confirm", "cancel_url"=>"http://localhost:3000/orders/44/cancel"}}
I, [2015-01-01T17:34:21.652535 #10344]  INFO -- : #<ActiveModel::Errors:0x00000009e3ede8 @base=#<Payment:0x00000004075400 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000004067a08 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000002c93568 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000002c778b8 @error=nil, @total="19.99", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000002b033b0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000002ae9758 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000095627b0 @error=nil, @return_url="http://localhost:3000/orders/44/confirm", @cancel_url="http://localhost:3000/orders/44/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009e3ede8 ...>>, @messages={}>
I, [2015-01-01T17:34:21.683735 #10344]  INFO -- : got past invalid
I, [2015-01-01T17:34:21.746135 #10344]  INFO -- : PayPal-Request-Id: 7553a96f-716a-4032-8409-08c97b33708a
I, [2015-01-01T17:34:21.777335 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T17:34:23.059538 #10344]  INFO -- : Response[201]: Created, Duration: 1.251s
I, [2015-01-01T17:34:23.106338 #10344]  INFO -- : back from super
I, [2015-01-01T17:34:23.608539 #10344]  INFO -- : {"id"=>"PAY-56K1992957110070NKSSYKIA", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99", "details"=>{"subtotal"=>"19.99"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/44/confirm", "cancel_url"=>"http://localhost:3000/orders/44/cancel"}, "create_time"=>"2015-01-01T17:34:24Z", "update_time"=>"2015-01-01T17:34:25Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-56K1992957110070NKSSYKIA", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-1EF57336UK813481L", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-56K1992957110070NKSSYKIA/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-01T17:34:23.826939 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "orders" SET "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ? WHERE "orders"."id" = 44  [["created_at", Thu, 01 Jan 2015 17:34:20 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 17:34:20 UTC +00:00], ["id", 44], ["payment_id", "PAY-56K1992957110070NKSSYKIA"], ["state", "created"]]
I, [2015-01-01T17:34:23.858139 #10344]  INFO -- : @payment save just done
I, [2015-01-01T17:34:24.983341 #10344]  INFO -- : #<Payment:0x00000004075400 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009f54f20 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009f542f0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009f0fb28 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009f0eb10 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009f0e458 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009f0d378 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009f07ea0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009f06f50 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000095627b0 @error=nil, @return_url="http://localhost:3000/orders/44/confirm", @cancel_url="http://localhost:3000/orders/44/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009e3ede8 @base=#<Payment:0x00000004075400 ...>, @messages={}>, @request_id="7553a96f-716a-4032-8409-08c97b33708a", @header={}, @id="PAY-56K1992957110070NKSSYKIA", @create_time="2015-01-01T17:34:24Z", @update_time="2015-01-01T17:34:25Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009eef788 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-56K1992957110070NKSSYKIA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009eedde8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-1EF57336UK813481L", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009eec678 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-56K1992957110070NKSSYKIA/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T17:34:25.952543 #10344]  INFO -- : #<Payment:0x00000004075400 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009f54f20 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009f542f0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009f0fb28 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009f0eb10 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009f0e458 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009f0d378 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009f07ea0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009f06f50 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000095627b0 @error=nil, @return_url="http://localhost:3000/orders/44/confirm", @cancel_url="http://localhost:3000/orders/44/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009e3ede8 @base=#<Payment:0x00000004075400 ...>, @messages={}>, @request_id="7553a96f-716a-4032-8409-08c97b33708a", @header={}, @id="PAY-56K1992957110070NKSSYKIA", @create_time="2015-01-01T17:34:24Z", @update_time="2015-01-01T17:34:25Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009eef788 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-56K1992957110070NKSSYKIA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009eedde8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-1EF57336UK813481L", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009eec678 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-56K1992957110070NKSSYKIA/execute", @rel="execute", @method="POST">]>
D, [2015-01-01T17:34:26.155343 #10344] DEBUG -- :   [1m[36m (171.6ms)[0m  [1mcommit transaction[0m
I, [2015-01-01T17:34:26.186543 #10344]  INFO -- : about to approve url
I, [2015-01-01T17:34:27.123545 #10344]  INFO -- : #<Payment:0x00000004075400 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009f54f20 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009f542f0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009f0fb28 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009f0eb10 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009f0e458 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009f0d378 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009f07ea0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009f06f50 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000095627b0 @error=nil, @return_url="http://localhost:3000/orders/44/confirm", @cancel_url="http://localhost:3000/orders/44/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009e3ede8 @base=#<Payment:0x00000004075400 ...>, @messages={}>, @request_id="7553a96f-716a-4032-8409-08c97b33708a", @header={}, @id="PAY-56K1992957110070NKSSYKIA", @create_time="2015-01-01T17:34:24Z", @update_time="2015-01-01T17:34:25Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009eef788 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-56K1992957110070NKSSYKIA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009eedde8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-1EF57336UK813481L", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009eec678 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-56K1992957110070NKSSYKIA/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T17:34:28.031347 #10344]  INFO -- : #<Payment:0x00000004075400 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009f54f20 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009f542f0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009f0fb28 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009f0eb10 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009f0e458 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009f0d378 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009f07ea0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009f06f50 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000095627b0 @error=nil, @return_url="http://localhost:3000/orders/44/confirm", @cancel_url="http://localhost:3000/orders/44/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009e3ede8 @base=#<Payment:0x00000004075400 ...>, @messages={}>, @request_id="7553a96f-716a-4032-8409-08c97b33708a", @header={}, @id="PAY-56K1992957110070NKSSYKIA", @create_time="2015-01-01T17:34:24Z", @update_time="2015-01-01T17:34:25Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009eef788 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-56K1992957110070NKSSYKIA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009eedde8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-1EF57336UK813481L", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009eec678 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-56K1992957110070NKSSYKIA/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T17:34:28.093747 #10344]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-1EF57336UK813481L
I, [2015-01-01T17:34:29.066949 #10344]  INFO -- : #<Payment:0x00000004075400 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009f54f20 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009f542f0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009f0fb28 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009f0eb10 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009f0e458 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009f0d378 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009f07ea0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009f06f50 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000095627b0 @error=nil, @return_url="http://localhost:3000/orders/44/confirm", @cancel_url="http://localhost:3000/orders/44/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009e3ede8 @base=#<Payment:0x00000004075400 ...>, @messages={}>, @request_id="7553a96f-716a-4032-8409-08c97b33708a", @header={}, @id="PAY-56K1992957110070NKSSYKIA", @create_time="2015-01-01T17:34:24Z", @update_time="2015-01-01T17:34:25Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009eef788 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-56K1992957110070NKSSYKIA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009eedde8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-1EF57336UK813481L", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009eec678 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-56K1992957110070NKSSYKIA/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T17:34:29.144949 #10344]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-1EF57336UK813481L
I, [2015-01-01T17:34:29.191749 #10344]  INFO -- : Completed 403 Forbidden in 18647ms (ActiveRecord: 202.8ms)
D, [2015-01-01T17:35:09.473049 #10344] DEBUG -- : 
D, [2015-01-01T17:35:09.490050 #10344] DEBUG -- : 
I, [2015-01-01T17:35:09.539053 #10344]  INFO -- : Started GET "/orders/44/cancel?token=EC-1EF57336UK813481L" for 127.0.0.1 at 2015-01-01 17:35:09 +0000
I, [2015-01-01T17:35:09.650059 #10344]  INFO -- : Processing by OrdersController#cancel as HTML
I, [2015-01-01T17:35:09.684061 #10344]  INFO -- :   Parameters: {"token"=>"EC-1EF57336UK813481L", "order_id"=>"44"}
I, [2015-01-01T17:35:09.831069 #10344]  INFO -- : Completed 500 Internal Server Error in 117ms
F, [2015-01-01T17:35:10.061082 #10344] FATAL -- : 
NameError (undefined local variable or method `current_user' for #<OrdersController:0x000000096c7970>):
  app/controllers/orders_controller.rb:110:in `cancel'


I, [2015-01-01T17:35:10.637115 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (48.0ms)
I, [2015-01-01T17:35:10.821126 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (67.0ms)
I, [2015-01-01T17:35:10.991136 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (62.0ms)
I, [2015-01-01T17:35:11.048139 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (688.0ms)
D, [2015-01-01T17:35:19.336422 #10344] DEBUG -- : 
D, [2015-01-01T17:35:19.367622 #10344] DEBUG -- : 
I, [2015-01-01T17:35:19.413224 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 17:35:19 +0000
I, [2015-01-01T17:35:19.524230 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T17:35:19.598234 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:35:19.696240 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-01T17:35:19.772244 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (4.0ms)
I, [2015-01-01T17:35:19.815247 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (145.0ms)
D, [2015-01-01T17:35:20.031259 #10344] DEBUG -- :   [1m[35mLineItem Exists (1.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:35:20.114264 #10344] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:35:20.147266 #10344]  INFO -- :   Rendered collection (1.0ms)
I, [2015-01-01T17:35:20.215270 #10344]  INFO -- :   Rendered carts/_cart.html.erb (140.0ms)
I, [2015-01-01T17:35:20.280273 #10344]  INFO -- : Completed 200 OK in 713ms (Views: 626.0ms | ActiveRecord: 7.0ms)
D, [2015-01-01T17:35:20.595291 #10344] DEBUG -- : 
D, [2015-01-01T17:35:20.607292 #10344] DEBUG -- : 
I, [2015-01-01T17:35:20.642294 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 17:35:20 +0000
D, [2015-01-01T17:35:20.720298 #10344] DEBUG -- : 
D, [2015-01-01T17:35:20.738300 #10344] DEBUG -- : 
I, [2015-01-01T17:35:20.775302 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 17:35:20 +0000
D, [2015-01-01T17:35:20.832305 #10344] DEBUG -- : 
D, [2015-01-01T17:35:20.850306 #10344] DEBUG -- : 
I, [2015-01-01T17:35:20.886308 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 17:35:20 +0000
D, [2015-01-01T17:35:20.992314 #10344] DEBUG -- : 
D, [2015-01-01T17:35:21.006315 #10344] DEBUG -- : 
I, [2015-01-01T17:35:21.042317 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 17:35:21 +0000
D, [2015-01-01T17:35:21.102320 #10344] DEBUG -- : 
D, [2015-01-01T17:35:21.131322 #10344] DEBUG -- : 
I, [2015-01-01T17:35:21.170324 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 17:35:21 +0000
D, [2015-01-01T17:35:21.227327 #10344] DEBUG -- : 
D, [2015-01-01T17:35:21.242328 #10344] DEBUG -- : 
I, [2015-01-01T17:35:21.278330 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 17:35:21 +0000
D, [2015-01-01T17:35:21.340334 #10344] DEBUG -- : 
D, [2015-01-01T17:35:21.357335 #10344] DEBUG -- : 
I, [2015-01-01T17:35:21.392337 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 17:35:21 +0000
D, [2015-01-01T17:35:21.450340 #10344] DEBUG -- : 
D, [2015-01-01T17:35:21.464341 #10344] DEBUG -- : 
I, [2015-01-01T17:35:21.502343 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 17:35:21 +0000
D, [2015-01-01T17:35:21.556346 #10344] DEBUG -- : 
D, [2015-01-01T17:35:21.570347 #10344] DEBUG -- : 
I, [2015-01-01T17:35:21.608349 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 17:35:21 +0000
D, [2015-01-01T17:35:21.667353 #10344] DEBUG -- : 
D, [2015-01-01T17:35:21.682354 #10344] DEBUG -- : 
I, [2015-01-01T17:35:21.717356 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 17:35:21 +0000
D, [2015-01-01T17:35:21.770359 #10344] DEBUG -- : 
D, [2015-01-01T17:35:21.789360 #10344] DEBUG -- : 
I, [2015-01-01T17:35:21.827362 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 17:35:21 +0000
D, [2015-01-01T17:35:21.877365 #10344] DEBUG -- : 
D, [2015-01-01T17:35:21.892366 #10344] DEBUG -- : 
I, [2015-01-01T17:35:21.929368 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 17:35:21 +0000
D, [2015-01-01T17:35:21.996371 #10344] DEBUG -- : 
D, [2015-01-01T17:35:22.022373 #10344] DEBUG -- : 
I, [2015-01-01T17:35:22.088377 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 17:35:22 +0000
D, [2015-01-01T17:35:22.168381 #10344] DEBUG -- : 
D, [2015-01-01T17:35:22.193383 #10344] DEBUG -- : 
I, [2015-01-01T17:35:22.262387 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 17:35:22 +0000
D, [2015-01-01T17:35:22.353392 #10344] DEBUG -- : 
D, [2015-01-01T17:35:22.377393 #10344] DEBUG -- : 
I, [2015-01-01T17:35:22.440397 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 17:35:22 +0000
D, [2015-01-01T17:35:22.516401 #10344] DEBUG -- : 
D, [2015-01-01T17:35:22.543403 #10344] DEBUG -- : 
I, [2015-01-01T17:35:22.611407 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 17:35:22 +0000
D, [2015-01-01T17:35:22.688411 #10344] DEBUG -- : 
D, [2015-01-01T17:35:22.711412 #10344] DEBUG -- : 
I, [2015-01-01T17:35:22.770416 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 17:35:22 +0000
D, [2015-01-01T17:35:22.847420 #10344] DEBUG -- : 
D, [2015-01-01T17:35:22.873422 #10344] DEBUG -- : 
I, [2015-01-01T17:35:22.937425 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 17:35:22 +0000
D, [2015-01-01T17:35:23.029431 #10344] DEBUG -- : 
D, [2015-01-01T17:35:23.056432 #10344] DEBUG -- : 
I, [2015-01-01T17:35:23.128436 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 17:35:23 +0000
D, [2015-01-01T17:35:23.203441 #10344] DEBUG -- : 
D, [2015-01-01T17:35:23.228442 #10344] DEBUG -- : 
I, [2015-01-01T17:35:23.290445 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 17:35:23 +0000
D, [2015-01-01T17:35:23.365450 #10344] DEBUG -- : 
D, [2015-01-01T17:35:23.388451 #10344] DEBUG -- : 
I, [2015-01-01T17:35:23.451455 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 17:35:23 +0000
D, [2015-01-01T17:35:23.535459 #10344] DEBUG -- : 
D, [2015-01-01T17:35:23.563461 #10344] DEBUG -- : 
I, [2015-01-01T17:35:23.630465 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 17:35:23 +0000
D, [2015-01-01T17:35:23.706469 #10344] DEBUG -- : 
D, [2015-01-01T17:35:23.732471 #10344] DEBUG -- : 
I, [2015-01-01T17:35:23.798475 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 17:35:23 +0000
D, [2015-01-01T17:35:23.871479 #10344] DEBUG -- : 
D, [2015-01-01T17:35:23.895480 #10344] DEBUG -- : 
I, [2015-01-01T17:35:23.957484 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 17:35:23 +0000
D, [2015-01-01T17:35:24.038488 #10344] DEBUG -- : 
D, [2015-01-01T17:35:24.065490 #10344] DEBUG -- : 
I, [2015-01-01T17:35:24.132494 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 17:35:24 +0000
D, [2015-01-01T17:35:24.206498 #10344] DEBUG -- : 
D, [2015-01-01T17:35:24.230499 #10344] DEBUG -- : 
I, [2015-01-01T17:35:24.295503 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 17:35:24 +0000
D, [2015-01-01T17:35:24.383508 #10344] DEBUG -- : 
D, [2015-01-01T17:35:24.401509 #10344] DEBUG -- : 
I, [2015-01-01T17:35:24.465513 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 17:35:24 +0000
D, [2015-01-01T17:35:24.541517 #10344] DEBUG -- : 
D, [2015-01-01T17:35:24.564518 #10344] DEBUG -- : 
I, [2015-01-01T17:35:24.627522 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 17:35:24 +0000
D, [2015-01-01T17:35:24.699526 #10344] DEBUG -- : 
D, [2015-01-01T17:35:24.722527 #10344] DEBUG -- : 
I, [2015-01-01T17:35:24.778531 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 17:35:24 +0000
D, [2015-01-01T17:35:24.853535 #10344] DEBUG -- : 
D, [2015-01-01T17:35:24.875536 #10344] DEBUG -- : 
I, [2015-01-01T17:35:24.929539 #10344]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-01 17:35:24 +0000
D, [2015-01-01T17:35:46.823658 #10344] DEBUG -- : 
D, [2015-01-01T17:35:46.854858 #10344] DEBUG -- : 
I, [2015-01-01T17:35:46.901658 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 17:35:46 +0000
I, [2015-01-01T17:35:47.053460 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T17:35:47.120861 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T17:35:47.201861 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:35:47.279861 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-01T17:35:47.389061 #10344] DEBUG -- :   [1m[35mLineItem Load (15.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:35:47.482661 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T17:35:47.529461 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T17:35:47.740262 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 17:35:47 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:9bbca98,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 17:35:47 UTC +00:00]]
D, [2015-01-01T17:35:47.904065 #10344] DEBUG -- :   [1m[35m (124.6ms)[0m  commit transaction
D, [2015-01-01T17:35:48.013265 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:35:48.106667 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (33.2ms)
I, [2015-01-01T17:35:48.184667 #10344]  INFO -- :   Rendered carts/_cart.html.erb (202.6ms)
I, [2015-01-01T17:35:48.231467 #10344]  INFO -- :   Rendered line_items/create.js.erb (265.0ms)
I, [2015-01-01T17:35:48.278267 #10344]  INFO -- : Completed 200 OK in 1109ms (Views: 327.4ms | ActiveRecord: 140.2ms)
D, [2015-01-01T17:35:48.325067 #10344] DEBUG -- : 
D, [2015-01-01T17:35:48.340667 #10344] DEBUG -- : 
I, [2015-01-01T17:35:48.393269 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 17:35:48 +0000
I, [2015-01-01T17:35:48.495275 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T17:35:48.557279 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T17:35:48.640283 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:35:48.723288 #10344] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-01T17:35:48.836295 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:35:48.945301 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T17:35:49.010305 #10344] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2015-01-01T17:35:49.212316 #10344] DEBUG -- :   [1m[36mSQL (10.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 17:35:49 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:82b6c60,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 17:35:49 UTC +00:00]]
D, [2015-01-01T17:35:49.386326 #10344] DEBUG -- :   [1m[35m (134.0ms)[0m  commit transaction
D, [2015-01-01T17:35:49.501729 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-01T17:35:49.642130 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-01T17:35:49.720130 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (156.0ms)
I, [2015-01-01T17:35:49.799130 #10344]  INFO -- :   Rendered carts/_cart.html.erb (335.6ms)
I, [2015-01-01T17:35:49.845930 #10344]  INFO -- :   Rendered line_items/create.js.erb (395.4ms)
I, [2015-01-01T17:35:49.892730 #10344]  INFO -- : Completed 200 OK in 1287ms (Views: 453.6ms | ActiveRecord: 156.0ms)
D, [2015-01-01T17:35:49.939530 #10344] DEBUG -- : 
D, [2015-01-01T17:35:49.969131 #10344] DEBUG -- : 
I, [2015-01-01T17:35:50.023134 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 17:35:49 +0000
I, [2015-01-01T17:35:50.131140 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T17:35:50.194144 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T17:35:50.285149 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T17:35:50.368154 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-01T17:35:50.486160 #10344] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T17:35:50.534163 #10344] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2015-01-01T17:35:50.665171 #10344] DEBUG -- :   [1m[36mSQL (8.0ms)[0m  [1mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = 46[0m  [["quantity", 2], ["updated_at", Thu, 01 Jan 2015 17:35:50 UTC +00:00]]
D, [2015-01-01T17:35:50.800178 #10344] DEBUG -- :   [1m[35m (95.0ms)[0m  commit transaction
D, [2015-01-01T17:35:50.930186 #10344] DEBUG -- :   [1m[36mLineItem Load (3.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-01T17:35:51.050188 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T17:35:51.162389 #10344] DEBUG -- :   [1m[36mProduct Load (15.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
I, [2015-01-01T17:35:51.240389 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (246.4ms)
I, [2015-01-01T17:35:51.318389 #10344]  INFO -- :   Rendered carts/_cart.html.erb (427.4ms)
I, [2015-01-01T17:35:51.349589 #10344]  INFO -- :   Rendered line_items/create.js.erb (486.2ms)
I, [2015-01-01T17:35:51.411989 #10344]  INFO -- : Completed 200 OK in 1169ms (Views: 540.4ms | ActiveRecord: 131.6ms)
D, [2015-01-01T17:35:54.162254 #10344] DEBUG -- : 
D, [2015-01-01T17:35:54.193454 #10344] DEBUG -- : 
I, [2015-01-01T17:35:54.240254 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 17:35:54 +0000
I, [2015-01-01T17:35:54.349454 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T17:35:54.443054 #10344] DEBUG -- :   [1m[35mUser Load (15.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T17:35:54.521055 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T17:35:54.614655 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:35:54.723855 #10344] DEBUG -- :   [1m[36mLineItem Load (15.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:35:54.879855 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T17:36:01.480671 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T17:36:01.589871 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 17:36:01 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 17:36:01 UTC +00:00]]
D, [2015-01-01T17:36:01.699072 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 46  [["cart_id", nil], ["order_id", 45], ["updated_at", Thu, 01 Jan 2015 17:36:01 UTC +00:00]]
D, [2015-01-01T17:36:01.810272 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 47[0m  [["cart_id", nil], ["order_id", 45], ["updated_at", Thu, 01 Jan 2015 17:36:01 UTC +00:00]]
I, [2015-01-01T17:36:01.841472 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T17:36:01.935072 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T17:36:02.013072 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
I, [2015-01-01T17:36:02.044272 #10344]  INFO -- : in order=
I, [2015-01-01T17:36:02.075472 #10344]  INFO -- : in payment.create
I, [2015-01-01T17:36:02.262673 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"58.97"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"58.97", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/45/confirm", "cancel_url"=>"http://localhost:3000/orders/45/cancel"}}
I, [2015-01-01T17:36:02.841874 #10344]  INFO -- : #<ActiveModel::Errors:0x00000008425f10 @base=#<Payment:0x00000008672f98 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000086721b0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000084bd658 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000084bcf50 @error=nil, @total="58.97", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000084af918 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000084aed88 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="58.97", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000084a7d30 @error=nil, @return_url="http://localhost:3000/orders/45/confirm", @cancel_url="http://localhost:3000/orders/45/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008425f10 ...>>, @messages={}>
I, [2015-01-01T17:36:02.873074 #10344]  INFO -- : got past invalid
I, [2015-01-01T17:36:02.966674 #10344]  INFO -- : PayPal-Request-Id: 077f2b07-9963-4586-ad27-362149f9c037
I, [2015-01-01T17:36:02.997874 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T17:36:04.279076 #10344]  INFO -- : Response[201]: Created, Duration: 1.234s
I, [2015-01-01T17:36:04.310276 #10344]  INFO -- : back from super
I, [2015-01-01T17:36:04.811477 #10344]  INFO -- : {"id"=>"PAY-3SM73050ML576964AKSSYLBQ", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"58.97", "details"=>{"subtotal"=>"58.97"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"58.97", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/45/confirm", "cancel_url"=>"http://localhost:3000/orders/45/cancel"}, "create_time"=>"2015-01-01T17:36:06Z", "update_time"=>"2015-01-01T17:36:06Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-3SM73050ML576964AKSSYLBQ", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-98D29269H4127043J", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-3SM73050ML576964AKSSYLBQ/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-01T17:36:05.001678 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "orders" SET "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ? WHERE "orders"."id" = 45  [["created_at", Thu, 01 Jan 2015 17:36:01 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 17:36:01 UTC +00:00], ["id", 45], ["payment_id", "PAY-3SM73050ML576964AKSSYLBQ"], ["state", "created"]]
I, [2015-01-01T17:36:05.048478 #10344]  INFO -- : @payment save just done
I, [2015-01-01T17:36:05.876279 #10344]  INFO -- : #<Payment:0x00000008672f98 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000816b630 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x0000000816a9d8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x0000000816a258 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008169178 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000008168a98 @error=nil, @total="58.97", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000081639a8 @error=nil, @subtotal="58.97">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008162828 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008161c70 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="58.97", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000084a7d30 @error=nil, @return_url="http://localhost:3000/orders/45/confirm", @cancel_url="http://localhost:3000/orders/45/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008425f10 @base=#<Payment:0x00000008672f98 ...>, @messages={}>, @request_id="077f2b07-9963-4586-ad27-362149f9c037", @header={}, @id="PAY-3SM73050ML576964AKSSYLBQ", @create_time="2015-01-01T17:36:06Z", @update_time="2015-01-01T17:36:06Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x0000000815ac18 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3SM73050ML576964AKSSYLBQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008159408 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-98D29269H4127043J", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008153d78 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3SM73050ML576964AKSSYLBQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T17:36:06.406680 #10344]  INFO -- : #<Payment:0x00000008672f98 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000816b630 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x0000000816a9d8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x0000000816a258 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008169178 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000008168a98 @error=nil, @total="58.97", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000081639a8 @error=nil, @subtotal="58.97">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008162828 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008161c70 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="58.97", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000084a7d30 @error=nil, @return_url="http://localhost:3000/orders/45/confirm", @cancel_url="http://localhost:3000/orders/45/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008425f10 @base=#<Payment:0x00000008672f98 ...>, @messages={}>, @request_id="077f2b07-9963-4586-ad27-362149f9c037", @header={}, @id="PAY-3SM73050ML576964AKSSYLBQ", @create_time="2015-01-01T17:36:06Z", @update_time="2015-01-01T17:36:06Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x0000000815ac18 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3SM73050ML576964AKSSYLBQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008159408 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-98D29269H4127043J", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008153d78 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3SM73050ML576964AKSSYLBQ/execute", @rel="execute", @method="POST">]>
D, [2015-01-01T17:36:06.547081 #10344] DEBUG -- :   [1m[36m (124.8ms)[0m  [1mcommit transaction[0m
I, [2015-01-01T17:36:06.562681 #10344]  INFO -- : about to approve url
I, [2015-01-01T17:36:07.202282 #10344]  INFO -- : #<Payment:0x00000008672f98 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000816b630 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x0000000816a9d8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x0000000816a258 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008169178 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000008168a98 @error=nil, @total="58.97", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000081639a8 @error=nil, @subtotal="58.97">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008162828 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008161c70 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="58.97", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000084a7d30 @error=nil, @return_url="http://localhost:3000/orders/45/confirm", @cancel_url="http://localhost:3000/orders/45/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008425f10 @base=#<Payment:0x00000008672f98 ...>, @messages={}>, @request_id="077f2b07-9963-4586-ad27-362149f9c037", @header={}, @id="PAY-3SM73050ML576964AKSSYLBQ", @create_time="2015-01-01T17:36:06Z", @update_time="2015-01-01T17:36:06Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x0000000815ac18 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3SM73050ML576964AKSSYLBQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008159408 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-98D29269H4127043J", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008153d78 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3SM73050ML576964AKSSYLBQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T17:36:07.812683 #10344]  INFO -- : #<Payment:0x00000008672f98 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000816b630 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x0000000816a9d8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x0000000816a258 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008169178 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000008168a98 @error=nil, @total="58.97", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000081639a8 @error=nil, @subtotal="58.97">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008162828 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008161c70 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="58.97", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000084a7d30 @error=nil, @return_url="http://localhost:3000/orders/45/confirm", @cancel_url="http://localhost:3000/orders/45/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008425f10 @base=#<Payment:0x00000008672f98 ...>, @messages={}>, @request_id="077f2b07-9963-4586-ad27-362149f9c037", @header={}, @id="PAY-3SM73050ML576964AKSSYLBQ", @create_time="2015-01-01T17:36:06Z", @update_time="2015-01-01T17:36:06Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x0000000815ac18 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3SM73050ML576964AKSSYLBQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008159408 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-98D29269H4127043J", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008153d78 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3SM73050ML576964AKSSYLBQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T17:36:07.843883 #10344]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-98D29269H4127043J
I, [2015-01-01T17:36:08.467884 #10344]  INFO -- : #<Payment:0x00000008672f98 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000816b630 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x0000000816a9d8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x0000000816a258 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008169178 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000008168a98 @error=nil, @total="58.97", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000081639a8 @error=nil, @subtotal="58.97">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008162828 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008161c70 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="58.97", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000084a7d30 @error=nil, @return_url="http://localhost:3000/orders/45/confirm", @cancel_url="http://localhost:3000/orders/45/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008425f10 @base=#<Payment:0x00000008672f98 ...>, @messages={}>, @request_id="077f2b07-9963-4586-ad27-362149f9c037", @header={}, @id="PAY-3SM73050ML576964AKSSYLBQ", @create_time="2015-01-01T17:36:06Z", @update_time="2015-01-01T17:36:06Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x0000000815ac18 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3SM73050ML576964AKSSYLBQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008159408 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-98D29269H4127043J", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008153d78 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3SM73050ML576964AKSSYLBQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T17:36:08.514684 #10344]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-98D29269H4127043J
I, [2015-01-01T17:36:08.545884 #10344]  INFO -- : Completed 403 Forbidden in 14165ms (ActiveRecord: 187.2ms)
D, [2015-01-01T17:38:26.213623 #10344] DEBUG -- : 
D, [2015-01-01T17:38:26.229223 #10344] DEBUG -- : 
I, [2015-01-01T17:38:26.269824 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 17:38:26 +0000
I, [2015-01-01T17:38:28.658961 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T17:38:28.793969 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:38:29.023982 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-01T17:38:29.277996 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (4.0ms)
I, [2015-01-01T17:38:29.322999 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (323.0ms)
D, [2015-01-01T17:38:29.624016 #10344] DEBUG -- :   [1m[35mLineItem Exists (2.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:38:29.710021 #10344] DEBUG -- :   [1m[36mLineItem Load (3.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:38:29.743023 #10344]  INFO -- :   Rendered collection (1.0ms)
I, [2015-01-01T17:38:29.896032 #10344]  INFO -- :   Rendered carts/_cart.html.erb (226.0ms)
I, [2015-01-01T17:38:29.968036 #10344]  INFO -- : Completed 200 OK in 1264ms (Views: 965.1ms | ActiveRecord: 32.0ms)
D, [2015-01-01T17:38:30.315056 #10344] DEBUG -- : 
D, [2015-01-01T17:38:30.365058 #10344] DEBUG -- : 
I, [2015-01-01T17:38:30.407061 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 17:38:30 +0000
D, [2015-01-01T17:38:30.455064 #10344] DEBUG -- : 
D, [2015-01-01T17:38:30.474065 #10344] DEBUG -- : 
I, [2015-01-01T17:38:30.510067 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 17:38:30 +0000
D, [2015-01-01T17:38:30.572070 #10344] DEBUG -- : 
D, [2015-01-01T17:38:30.585071 #10344] DEBUG -- : 
I, [2015-01-01T17:38:30.620073 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 17:38:30 +0000
D, [2015-01-01T17:38:30.680076 #10344] DEBUG -- : 
D, [2015-01-01T17:38:30.694077 #10344] DEBUG -- : 
I, [2015-01-01T17:38:30.730079 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 17:38:30 +0000
D, [2015-01-01T17:38:30.787083 #10344] DEBUG -- : 
D, [2015-01-01T17:38:30.801083 #10344] DEBUG -- : 
I, [2015-01-01T17:38:30.838085 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 17:38:30 +0000
D, [2015-01-01T17:38:30.896089 #10344] DEBUG -- : 
D, [2015-01-01T17:38:30.910090 #10344] DEBUG -- : 
I, [2015-01-01T17:38:30.948092 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 17:38:30 +0000
D, [2015-01-01T17:38:31.002095 #10344] DEBUG -- : 
D, [2015-01-01T17:38:31.017096 #10344] DEBUG -- : 
I, [2015-01-01T17:38:31.058098 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 17:38:31 +0000
D, [2015-01-01T17:38:31.109101 #10344] DEBUG -- : 
D, [2015-01-01T17:38:31.124102 #10344] DEBUG -- : 
I, [2015-01-01T17:38:31.166104 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 17:38:31 +0000
D, [2015-01-01T17:38:31.242109 #10344] DEBUG -- : 
D, [2015-01-01T17:38:31.265110 #10344] DEBUG -- : 
I, [2015-01-01T17:38:31.323113 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 17:38:31 +0000
D, [2015-01-01T17:38:31.404118 #10344] DEBUG -- : 
D, [2015-01-01T17:38:31.427119 #10344] DEBUG -- : 
I, [2015-01-01T17:38:31.488123 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 17:38:31 +0000
D, [2015-01-01T17:38:31.566127 #10344] DEBUG -- : 
D, [2015-01-01T17:38:31.590128 #10344] DEBUG -- : 
I, [2015-01-01T17:38:31.655132 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 17:38:31 +0000
D, [2015-01-01T17:38:31.734137 #10344] DEBUG -- : 
D, [2015-01-01T17:38:31.762138 #10344] DEBUG -- : 
I, [2015-01-01T17:38:31.830142 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 17:38:31 +0000
D, [2015-01-01T17:38:31.922147 #10344] DEBUG -- : 
D, [2015-01-01T17:38:31.947149 #10344] DEBUG -- : 
I, [2015-01-01T17:38:32.010152 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 17:38:31 +0000
D, [2015-01-01T17:38:32.087157 #10344] DEBUG -- : 
D, [2015-01-01T17:38:32.111158 #10344] DEBUG -- : 
I, [2015-01-01T17:38:32.181162 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 17:38:32 +0000
D, [2015-01-01T17:38:32.257167 #10344] DEBUG -- : 
D, [2015-01-01T17:38:32.281168 #10344] DEBUG -- : 
I, [2015-01-01T17:38:32.341171 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 17:38:32 +0000
D, [2015-01-01T17:38:32.422176 #10344] DEBUG -- : 
D, [2015-01-01T17:38:32.447177 #10344] DEBUG -- : 
I, [2015-01-01T17:38:32.508181 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 17:38:32 +0000
D, [2015-01-01T17:38:32.584185 #10344] DEBUG -- : 
D, [2015-01-01T17:38:32.609187 #10344] DEBUG -- : 
I, [2015-01-01T17:38:32.674190 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 17:38:32 +0000
D, [2015-01-01T17:38:32.750195 #10344] DEBUG -- : 
D, [2015-01-01T17:38:32.777196 #10344] DEBUG -- : 
I, [2015-01-01T17:38:32.843200 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 17:38:32 +0000
D, [2015-01-01T17:38:32.918204 #10344] DEBUG -- : 
D, [2015-01-01T17:38:32.946206 #10344] DEBUG -- : 
I, [2015-01-01T17:38:33.014210 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 17:38:32 +0000
D, [2015-01-01T17:38:33.088214 #10344] DEBUG -- : 
D, [2015-01-01T17:38:33.113216 #10344] DEBUG -- : 
I, [2015-01-01T17:38:33.174219 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 17:38:33 +0000
D, [2015-01-01T17:38:33.250223 #10344] DEBUG -- : 
D, [2015-01-01T17:38:33.275225 #10344] DEBUG -- : 
I, [2015-01-01T17:38:33.335228 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 17:38:33 +0000
D, [2015-01-01T17:38:33.425233 #10344] DEBUG -- : 
D, [2015-01-01T17:38:33.449235 #10344] DEBUG -- : 
I, [2015-01-01T17:38:33.510238 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 17:38:33 +0000
D, [2015-01-01T17:38:33.583242 #10344] DEBUG -- : 
D, [2015-01-01T17:38:33.608244 #10344] DEBUG -- : 
I, [2015-01-01T17:38:33.670247 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 17:38:33 +0000
D, [2015-01-01T17:38:33.745252 #10344] DEBUG -- : 
D, [2015-01-01T17:38:33.768253 #10344] DEBUG -- : 
I, [2015-01-01T17:38:33.836257 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 17:38:33 +0000
D, [2015-01-01T17:38:33.913261 #10344] DEBUG -- : 
D, [2015-01-01T17:38:33.937263 #10344] DEBUG -- : 
I, [2015-01-01T17:38:34.001266 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 17:38:33 +0000
D, [2015-01-01T17:38:34.076271 #10344] DEBUG -- : 
D, [2015-01-01T17:38:34.102272 #10344] DEBUG -- : 
I, [2015-01-01T17:38:34.168276 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 17:38:34 +0000
D, [2015-01-01T17:38:34.257281 #10344] DEBUG -- : 
D, [2015-01-01T17:38:34.282282 #10344] DEBUG -- : 
I, [2015-01-01T17:38:34.338286 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 17:38:34 +0000
D, [2015-01-01T17:38:34.435291 #10344] DEBUG -- : 
D, [2015-01-01T17:38:34.462293 #10344] DEBUG -- : 
I, [2015-01-01T17:38:34.532297 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 17:38:34 +0000
D, [2015-01-01T17:38:34.603301 #10344] DEBUG -- : 
D, [2015-01-01T17:38:34.625302 #10344] DEBUG -- : 
I, [2015-01-01T17:38:34.681305 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 17:38:34 +0000
D, [2015-01-01T17:38:37.564754 #10344] DEBUG -- : 
D, [2015-01-01T17:38:37.580354 #10344] DEBUG -- : 
I, [2015-01-01T17:38:37.644755 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 17:38:37 +0000
I, [2015-01-01T17:38:37.800755 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T17:38:37.880755 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T17:38:37.978756 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:38:38.072356 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-01T17:38:38.197157 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:38:38.563958 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T17:38:38.610758 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T17:38:38.860358 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 17:38:38 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7fc1d20,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 17:38:38 UTC +00:00]]
D, [2015-01-01T17:38:39.118162 #10344] DEBUG -- :   [1m[35m (201.6ms)[0m  commit transaction
D, [2015-01-01T17:38:39.259562 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:38:39.353162 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T17:38:39.446762 #10344]  INFO -- :   Rendered carts/_cart.html.erb (249.6ms)
I, [2015-01-01T17:38:39.493562 #10344]  INFO -- :   Rendered line_items/create.js.erb (296.4ms)
I, [2015-01-01T17:38:39.555963 #10344]  INFO -- : Completed 200 OK in 1613ms (Views: 374.4ms | ActiveRecord: 205.6ms)
D, [2015-01-01T17:38:39.603763 #10344] DEBUG -- : 
D, [2015-01-01T17:38:39.630363 #10344] DEBUG -- : 
I, [2015-01-01T17:38:39.692367 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 17:38:39 +0000
I, [2015-01-01T17:38:39.821374 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T17:38:39.904379 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T17:38:40.006385 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:38:40.106391 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-01T17:38:40.265400 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:38:40.399407 #10344] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T17:38:40.454411 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-01T17:38:40.705425 #10344] DEBUG -- :   [1m[36mSQL (9.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 17:38:40 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:a110f58,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 17:38:40 UTC +00:00]]
D, [2015-01-01T17:38:40.872426 #10344] DEBUG -- :   [1m[35m (113.2ms)[0m  commit transaction
D, [2015-01-01T17:38:41.012826 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-01T17:38:41.171826 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-01T17:38:41.266427 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (158.0ms)
I, [2015-01-01T17:38:41.344427 #10344]  INFO -- :   Rendered carts/_cart.html.erb (378.4ms)
I, [2015-01-01T17:38:41.406827 #10344]  INFO -- :   Rendered line_items/create.js.erb (456.4ms)
I, [2015-01-01T17:38:41.469227 #10344]  INFO -- : Completed 200 OK in 1500ms (Views: 518.8ms | ActiveRecord: 133.2ms)
D, [2015-01-01T17:38:41.516027 #10344] DEBUG -- : 
D, [2015-01-01T17:38:41.545628 #10344] DEBUG -- : 
I, [2015-01-01T17:38:41.607632 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 17:38:41 +0000
I, [2015-01-01T17:38:41.713638 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T17:38:41.784642 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T17:38:41.881647 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T17:38:41.970652 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-01T17:38:42.097660 #10344] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T17:38:42.149663 #10344] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2015-01-01T17:38:42.290671 #10344] DEBUG -- :   [1m[36mSQL (7.0ms)[0m  [1mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = 49[0m  [["quantity", 2], ["updated_at", Thu, 01 Jan 2015 17:38:42 UTC +00:00]]
D, [2015-01-01T17:38:42.546685 #10344] DEBUG -- :   [1m[35m (210.0ms)[0m  commit transaction
D, [2015-01-01T17:38:42.674486 #10344] DEBUG -- :   [1m[36mLineItem Load (15.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-01T17:38:42.799286 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T17:38:42.939686 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
I, [2015-01-01T17:38:43.002086 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (265.2ms)
I, [2015-01-01T17:38:43.080086 #10344]  INFO -- :   Rendered carts/_cart.html.erb (468.0ms)
I, [2015-01-01T17:38:43.126886 #10344]  INFO -- :   Rendered line_items/create.js.erb (530.4ms)
I, [2015-01-01T17:38:43.189287 #10344]  INFO -- : Completed 200 OK in 1356ms (Views: 577.2ms | ActiveRecord: 240.6ms)
D, [2015-01-01T17:38:45.411750 #10344] DEBUG -- : 
D, [2015-01-01T17:38:45.442950 #10344] DEBUG -- : 
I, [2015-01-01T17:38:45.492750 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 17:38:45 +0000
I, [2015-01-01T17:38:45.711150 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T17:38:45.835951 #10344] DEBUG -- :   [1m[35mUser Load (15.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T17:38:46.054351 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T17:38:46.132351 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:38:46.319551 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:38:46.459952 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T17:39:54.156306 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T17:39:54.561907 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 17:39:54 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 17:39:54 UTC +00:00]]
D, [2015-01-01T17:39:54.733507 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 48  [["cart_id", nil], ["order_id", 46], ["updated_at", Thu, 01 Jan 2015 17:39:54 UTC +00:00]]
D, [2015-01-01T17:39:54.889508 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 49[0m  [["cart_id", nil], ["order_id", 46], ["updated_at", Thu, 01 Jan 2015 17:39:54 UTC +00:00]]
I, [2015-01-01T17:39:54.920708 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T17:39:55.076708 #10344] DEBUG -- :   [1m[35mProduct Load (31.2ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T17:39:55.185908 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T17:39:55.341908 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 46]]
I, [2015-01-01T17:39:55.373109 #10344]  INFO -- : in order=
I, [2015-01-01T17:39:55.388709 #10344]  INFO -- : in payment.create
I, [2015-01-01T17:39:55.529109 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"57.97"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"57.97", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/46/confirm", "cancel_url"=>"http://localhost:3000/orders/46/cancel"}}
I, [2015-01-01T17:39:55.903509 #10344]  INFO -- : #<ActiveModel::Errors:0x00000009f75f90 @base=#<Payment:0x00000004064a38 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000004053350 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a027dd0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a027650 @error=nil, @total="57.97", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a025aa8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a024d10 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="57.97", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000a01cdb8 @error=nil, @return_url="http://localhost:3000/orders/46/confirm", @cancel_url="http://localhost:3000/orders/46/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009f75f90 ...>>, @messages={}>
I, [2015-01-01T17:39:55.919109 #10344]  INFO -- : got past invalid
I, [2015-01-01T17:39:55.997110 #10344]  INFO -- : PayPal-Request-Id: 825336e8-aad1-46df-b491-352f09958756
I, [2015-01-01T17:39:56.028310 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T17:39:56.980911 #10344]  INFO -- : Response[400]: Bad Request, Duration: 0.937s
I, [2015-01-01T17:39:57.012111 #10344]  INFO -- :  in error=
I, [2015-01-01T17:39:57.027711 #10344]  INFO -- : back from super
I, [2015-01-01T17:39:57.199312 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"57.97"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"57.97", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/46/confirm", "cancel_url"=>"http://localhost:3000/orders/46/cancel"}}
I, [2015-01-01T17:39:57.339712 #10344]  INFO -- : @payment save just done
I, [2015-01-01T17:39:57.994913 #10344]  INFO -- : #<Payment:0x00000004064a38 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"b84790fe76ce3"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000004053350 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a027dd0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a027650 @error=nil, @total="57.97", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a025aa8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a024d10 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="57.97", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000a01cdb8 @error=nil, @return_url="http://localhost:3000/orders/46/confirm", @cancel_url="http://localhost:3000/orders/46/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009f75f90 @base=#<Payment:0x00000004064a38 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="825336e8-aad1-46df-b491-352f09958756", @header={}>
I, [2015-01-01T17:39:58.681314 #10344]  INFO -- : #<Payment:0x00000004064a38 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"b84790fe76ce3"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000004053350 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a027dd0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a027650 @error=nil, @total="57.97", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a025aa8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a024d10 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="57.97", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000a01cdb8 @error=nil, @return_url="http://localhost:3000/orders/46/confirm", @cancel_url="http://localhost:3000/orders/46/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009f75f90 @base=#<Payment:0x00000004064a38 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="825336e8-aad1-46df-b491-352f09958756", @header={}>
D, [2015-01-01T17:39:58.821715 #10344] DEBUG -- :   [1m[36m (109.2ms)[0m  [1mcommit transaction[0m
I, [2015-01-01T17:39:58.852915 #10344]  INFO -- : about to approve url
I, [2015-01-01T17:39:59.555916 #10344]  INFO -- : #<Payment:0x00000004064a38 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"b84790fe76ce3"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000004053350 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a027dd0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a027650 @error=nil, @total="57.97", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a025aa8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a024d10 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="57.97", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000a01cdb8 @error=nil, @return_url="http://localhost:3000/orders/46/confirm", @cancel_url="http://localhost:3000/orders/46/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009f75f90 @base=#<Payment:0x00000004064a38 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="825336e8-aad1-46df-b491-352f09958756", @header={}>
I, [2015-01-01T17:39:59.602716 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T17:39:59.649516 #10344]  INFO -- : Completed 302 Found in 73892ms (ActiveRecord: 187.2ms)
D, [2015-01-01T17:39:59.680716 #10344] DEBUG -- : 
D, [2015-01-01T17:39:59.696316 #10344] DEBUG -- : 
I, [2015-01-01T17:39:59.743116 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 17:39:59 +0000
I, [2015-01-01T17:39:59.852316 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T17:39:59.930317 #10344] DEBUG -- :   [1m[35mUser Load (15.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T17:39:59.992717 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T17:40:00.055117 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:40:00.148717 #10344] DEBUG -- :   [1m[36mLineItem Load (15.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:40:00.257917 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T17:40:01.337319 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T17:40:01.493319 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 17:40:01 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 17:40:01 UTC +00:00]]
I, [2015-01-01T17:40:01.540120 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T17:40:01.649320 #10344] DEBUG -- :   [1m[35mLineItem Load (15.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 47]]
D, [2015-01-01T17:40:01.760520 #10344] DEBUG -- :   [1m[36m (15.6ms)[0m  [1mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 47]]
I, [2015-01-01T17:40:01.791720 #10344]  INFO -- : in order=
I, [2015-01-01T17:40:01.838520 #10344]  INFO -- : in payment.create
I, [2015-01-01T17:40:02.056921 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"0"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"0", "name"=>"Tee Shirts", "price"=>"0", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/47/confirm", "cancel_url"=>"http://localhost:3000/orders/47/cancel"}}
I, [2015-01-01T17:40:02.760922 #10344]  INFO -- : #<ActiveModel::Errors:0x000000057098b0 @base=#<Payment:0x00000007f9bb98 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007f9adb0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007e25048 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007e24800 @error=nil, @total="0", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007e1ed88 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007e1d988 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="0", @currency="GBP", @quantity="0">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007e0f8d8 @error=nil, @return_url="http://localhost:3000/orders/47/confirm", @cancel_url="http://localhost:3000/orders/47/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000057098b0 ...>>, @messages={}>
I, [2015-01-01T17:40:02.792122 #10344]  INFO -- : got past invalid
I, [2015-01-01T17:40:02.885722 #10344]  INFO -- : PayPal-Request-Id: e9533a15-118a-4334-b530-66890c732bc9
I, [2015-01-01T17:40:02.948122 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T17:40:03.931924 #10344]  INFO -- : Response[400]: Bad Request, Duration: 0.937s
I, [2015-01-01T17:40:03.963124 #10344]  INFO -- :  in error=
I, [2015-01-01T17:40:03.995324 #10344]  INFO -- : back from super
I, [2015-01-01T17:40:04.229325 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"0"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"0", "name"=>"Tee Shirts", "price"=>"0", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/47/confirm", "cancel_url"=>"http://localhost:3000/orders/47/cancel"}}
I, [2015-01-01T17:40:04.400925 #10344]  INFO -- : @payment save just done
I, [2015-01-01T17:40:05.214126 #10344]  INFO -- : #<Payment:0x00000007f9bb98 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions[0].item_list.items[0].quantity", "issue"=>"Must be a positive integer"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"400bb67876b8f"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007f9adb0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007e25048 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007e24800 @error=nil, @total="0", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007e1ed88 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007e1d988 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="0", @currency="GBP", @quantity="0">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007e0f8d8 @error=nil, @return_url="http://localhost:3000/orders/47/confirm", @cancel_url="http://localhost:3000/orders/47/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000057098b0 @base=#<Payment:0x00000007f9bb98 ...>, @messages={:"transactions[0].item_list.items[0].quantity"=>["Must be a positive integer"]}>, @request_id="e9533a15-118a-4334-b530-66890c732bc9", @header={}>
I, [2015-01-01T17:40:05.884147 #10344]  INFO -- : #<Payment:0x00000007f9bb98 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions[0].item_list.items[0].quantity", "issue"=>"Must be a positive integer"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"400bb67876b8f"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007f9adb0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007e25048 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007e24800 @error=nil, @total="0", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007e1ed88 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007e1d988 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="0", @currency="GBP", @quantity="0">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007e0f8d8 @error=nil, @return_url="http://localhost:3000/orders/47/confirm", @cancel_url="http://localhost:3000/orders/47/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000057098b0 @base=#<Payment:0x00000007f9bb98 ...>, @messages={:"transactions[0].item_list.items[0].quantity"=>["Must be a positive integer"]}>, @request_id="e9533a15-118a-4334-b530-66890c732bc9", @header={}>
D, [2015-01-01T17:40:06.034156 #10344] DEBUG -- :   [1m[35m (116.0ms)[0m  commit transaction
I, [2015-01-01T17:40:06.057157 #10344]  INFO -- : about to approve url
I, [2015-01-01T17:40:06.607978 #10344]  INFO -- : #<Payment:0x00000007f9bb98 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions[0].item_list.items[0].quantity", "issue"=>"Must be a positive integer"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"400bb67876b8f"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007f9adb0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007e25048 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007e24800 @error=nil, @total="0", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007e1ed88 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007e1d988 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="0", @currency="GBP", @quantity="0">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007e0f8d8 @error=nil, @return_url="http://localhost:3000/orders/47/confirm", @cancel_url="http://localhost:3000/orders/47/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000057098b0 @base=#<Payment:0x00000007f9bb98 ...>, @messages={:"transactions[0].item_list.items[0].quantity"=>["Must be a positive integer"]}>, @request_id="e9533a15-118a-4334-b530-66890c732bc9", @header={}>
I, [2015-01-01T17:40:06.639178 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T17:40:06.685978 #10344]  INFO -- : Completed 302 Found in 6802ms (ActiveRecord: 194.0ms)
D, [2015-01-01T17:40:06.748378 #10344] DEBUG -- : 
D, [2015-01-01T17:40:06.763978 #10344] DEBUG -- : 
I, [2015-01-01T17:40:06.795178 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 17:40:06 +0000
I, [2015-01-01T17:40:06.888778 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T17:40:06.951178 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T17:40:07.044778 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T17:40:07.107178 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (0.0ms)
I, [2015-01-01T17:40:07.153979 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (124.8ms)
D, [2015-01-01T17:40:07.325579 #10344] DEBUG -- :   [1m[36mLineItem Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T17:40:07.403579 #10344] DEBUG -- :   [1m[35mLineItem Load (15.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T17:40:07.419179 #10344]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-01T17:40:07.481579 #10344]  INFO -- :   Rendered carts/_cart.html.erb (109.2ms)
I, [2015-01-01T17:40:07.543979 #10344]  INFO -- : Completed 200 OK in 608ms (Views: 530.4ms | ActiveRecord: 15.6ms)
D, [2015-01-01T17:40:18.244839 #10344] DEBUG -- : 
D, [2015-01-01T17:40:18.261840 #10344] DEBUG -- : 
I, [2015-01-01T17:40:18.298842 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 17:40:18 +0000
I, [2015-01-01T17:40:18.361846 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T17:40:18.418849 #10344] DEBUG -- :   [1m[36mCart Load (1.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T17:40:18.487853 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T17:40:18.543856 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (3.0ms)
I, [2015-01-01T17:40:18.585859 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (109.0ms)
D, [2015-01-01T17:40:18.793871 #10344] DEBUG -- :   [1m[36mLineItem Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T17:40:18.854874 #10344] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T17:40:18.880876 #10344]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-01T17:40:18.936879 #10344]  INFO -- :   Rendered carts/_cart.html.erb (108.0ms)
I, [2015-01-01T17:40:19.010883 #10344]  INFO -- : Completed 200 OK in 607ms (Views: 540.0ms | ActiveRecord: 6.0ms)
D, [2015-01-01T17:40:19.164892 #10344] DEBUG -- : 
D, [2015-01-01T17:40:19.193894 #10344] DEBUG -- : 
I, [2015-01-01T17:40:19.236896 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 17:40:19 +0000
D, [2015-01-01T17:40:19.313901 #10344] DEBUG -- : 
D, [2015-01-01T17:40:19.336902 #10344] DEBUG -- : 
I, [2015-01-01T17:40:19.396905 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 17:40:19 +0000
D, [2015-01-01T17:40:19.458909 #10344] DEBUG -- : 
D, [2015-01-01T17:40:19.474910 #10344] DEBUG -- : 
I, [2015-01-01T17:40:19.507912 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 17:40:19 +0000
D, [2015-01-01T17:40:19.564915 #10344] DEBUG -- : 
D, [2015-01-01T17:40:19.576916 #10344] DEBUG -- : 
I, [2015-01-01T17:40:19.607917 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 17:40:19 +0000
D, [2015-01-01T17:40:19.658920 #10344] DEBUG -- : 
D, [2015-01-01T17:40:19.669921 #10344] DEBUG -- : 
I, [2015-01-01T17:40:19.696922 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 17:40:19 +0000
D, [2015-01-01T17:40:19.744925 #10344] DEBUG -- : 
D, [2015-01-01T17:40:19.756926 #10344] DEBUG -- : 
I, [2015-01-01T17:40:19.794928 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 17:40:19 +0000
D, [2015-01-01T17:40:19.849931 #10344] DEBUG -- : 
D, [2015-01-01T17:40:19.861932 #10344] DEBUG -- : 
I, [2015-01-01T17:40:19.894934 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 17:40:19 +0000
D, [2015-01-01T17:40:19.939936 #10344] DEBUG -- : 
D, [2015-01-01T17:40:19.951937 #10344] DEBUG -- : 
I, [2015-01-01T17:40:19.998940 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 17:40:19 +0000
D, [2015-01-01T17:40:20.049943 #10344] DEBUG -- : 
D, [2015-01-01T17:40:20.062943 #10344] DEBUG -- : 
I, [2015-01-01T17:40:20.093945 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 17:40:20 +0000
D, [2015-01-01T17:40:20.142948 #10344] DEBUG -- : 
D, [2015-01-01T17:40:20.155949 #10344] DEBUG -- : 
I, [2015-01-01T17:40:20.185950 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 17:40:20 +0000
D, [2015-01-01T17:40:20.233953 #10344] DEBUG -- : 
D, [2015-01-01T17:40:20.245954 #10344] DEBUG -- : 
I, [2015-01-01T17:40:20.279956 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 17:40:20 +0000
D, [2015-01-01T17:40:20.372961 #10344] DEBUG -- : 
D, [2015-01-01T17:40:20.396962 #10344] DEBUG -- : 
I, [2015-01-01T17:40:20.459966 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 17:40:20 +0000
D, [2015-01-01T17:40:20.536970 #10344] DEBUG -- : 
D, [2015-01-01T17:40:20.556972 #10344] DEBUG -- : 
I, [2015-01-01T17:40:20.621975 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 17:40:20 +0000
D, [2015-01-01T17:40:20.698980 #10344] DEBUG -- : 
D, [2015-01-01T17:40:20.722981 #10344] DEBUG -- : 
I, [2015-01-01T17:40:20.794985 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 17:40:20 +0000
D, [2015-01-01T17:40:20.888991 #10344] DEBUG -- : 
D, [2015-01-01T17:40:20.914992 #10344] DEBUG -- : 
I, [2015-01-01T17:40:20.983996 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 17:40:20 +0000
D, [2015-01-01T17:40:21.066001 #10344] DEBUG -- : 
D, [2015-01-01T17:40:21.093002 #10344] DEBUG -- : 
I, [2015-01-01T17:40:21.163006 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 17:40:21 +0000
D, [2015-01-01T17:40:21.235010 #10344] DEBUG -- : 
D, [2015-01-01T17:40:21.263012 #10344] DEBUG -- : 
I, [2015-01-01T17:40:21.325016 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 17:40:21 +0000
D, [2015-01-01T17:40:21.400020 #10344] DEBUG -- : 
D, [2015-01-01T17:40:21.424021 #10344] DEBUG -- : 
I, [2015-01-01T17:40:21.489025 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 17:40:21 +0000
D, [2015-01-01T17:40:21.564029 #10344] DEBUG -- : 
D, [2015-01-01T17:40:21.588031 #10344] DEBUG -- : 
I, [2015-01-01T17:40:21.654034 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 17:40:21 +0000
D, [2015-01-01T17:40:21.728039 #10344] DEBUG -- : 
D, [2015-01-01T17:40:21.753040 #10344] DEBUG -- : 
I, [2015-01-01T17:40:21.816044 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 17:40:21 +0000
D, [2015-01-01T17:40:21.891048 #10344] DEBUG -- : 
D, [2015-01-01T17:40:21.918049 #10344] DEBUG -- : 
I, [2015-01-01T17:40:21.991054 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 17:40:21 +0000
D, [2015-01-01T17:40:22.075058 #10344] DEBUG -- : 
D, [2015-01-01T17:40:22.110060 #10344] DEBUG -- : 
I, [2015-01-01T17:40:22.179064 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 17:40:22 +0000
D, [2015-01-01T17:40:22.253069 #10344] DEBUG -- : 
D, [2015-01-01T17:40:22.279070 #10344] DEBUG -- : 
I, [2015-01-01T17:40:22.347074 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 17:40:22 +0000
D, [2015-01-01T17:40:22.421078 #10344] DEBUG -- : 
D, [2015-01-01T17:40:22.446080 #10344] DEBUG -- : 
I, [2015-01-01T17:40:22.509083 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 17:40:22 +0000
D, [2015-01-01T17:40:22.584088 #10344] DEBUG -- : 
D, [2015-01-01T17:40:22.609089 #10344] DEBUG -- : 
I, [2015-01-01T17:40:22.669092 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 17:40:22 +0000
D, [2015-01-01T17:40:22.744097 #10344] DEBUG -- : 
D, [2015-01-01T17:40:22.769098 #10344] DEBUG -- : 
I, [2015-01-01T17:40:22.838102 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 17:40:22 +0000
D, [2015-01-01T17:40:22.931107 #10344] DEBUG -- : 
D, [2015-01-01T17:40:22.954109 #10344] DEBUG -- : 
I, [2015-01-01T17:40:23.012112 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 17:40:22 +0000
D, [2015-01-01T17:40:23.095117 #10344] DEBUG -- : 
D, [2015-01-01T17:40:23.121118 #10344] DEBUG -- : 
I, [2015-01-01T17:40:23.188122 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 17:40:23 +0000
D, [2015-01-01T17:40:23.263126 #10344] DEBUG -- : 
D, [2015-01-01T17:40:23.288128 #10344] DEBUG -- : 
I, [2015-01-01T17:40:23.350131 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 17:40:23 +0000
D, [2015-01-01T17:40:33.143767 #10344] DEBUG -- : 
D, [2015-01-01T17:40:33.159367 #10344] DEBUG -- : 
I, [2015-01-01T17:40:33.222767 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 17:40:33 +0000
I, [2015-01-01T17:40:33.331968 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T17:40:33.409968 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T17:40:33.505568 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T17:40:33.591970 #10344] DEBUG -- :   [1m[35mProduct Load (15.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-01T17:40:33.719770 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T17:40:33.828970 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T17:40:33.891370 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T17:40:34.157571 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 17:40:33 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:990c1b8,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 17:40:33 UTC +00:00]]
D, [2015-01-01T17:40:34.351772 #10344] DEBUG -- :   [1m[36m (140.4ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T17:40:34.492172 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T17:40:34.596773 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T17:40:34.675574 #10344]  INFO -- :   Rendered carts/_cart.html.erb (230.2ms)
I, [2015-01-01T17:40:34.744376 #10344]  INFO -- :   Rendered line_items/create.js.erb (292.6ms)
I, [2015-01-01T17:40:34.791176 #10344]  INFO -- : Completed 200 OK in 1334ms (Views: 392.6ms | ActiveRecord: 156.0ms)
D, [2015-01-01T17:40:34.837976 #10344] DEBUG -- : 
D, [2015-01-01T17:40:34.874176 #10344] DEBUG -- : 
I, [2015-01-01T17:40:34.936180 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 17:40:34 +0000
I, [2015-01-01T17:40:35.032185 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T17:40:35.104189 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T17:40:35.191194 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T17:40:35.266199 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-01T17:40:35.371205 #10344] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T17:40:35.470210 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-01T17:40:35.524213 #10344] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T17:40:35.748226 #10344] DEBUG -- :   [1m[35mSQL (14.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 17:40:35 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:7f14288,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 17:40:35 UTC +00:00]]
D, [2015-01-01T17:40:35.902235 #10344] DEBUG -- :   [1m[36m (113.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T17:40:35.990637 #10344] DEBUG -- :   [1m[35mLineItem Load (15.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-01T17:40:36.068637 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-01T17:40:36.131037 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (93.6ms)
I, [2015-01-01T17:40:36.193437 #10344]  INFO -- :   Rendered carts/_cart.html.erb (234.0ms)
I, [2015-01-01T17:40:36.224637 #10344]  INFO -- :   Rendered line_items/create.js.erb (268.2ms)
I, [2015-01-01T17:40:36.255837 #10344]  INFO -- : Completed 200 OK in 1118ms (Views: 302.8ms | ActiveRecord: 151.6ms)
D, [2015-01-01T17:40:36.302637 #10344] DEBUG -- : 
D, [2015-01-01T17:40:36.326238 #10344] DEBUG -- : 
I, [2015-01-01T17:40:36.372240 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 17:40:36 +0000
I, [2015-01-01T17:40:36.453245 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T17:40:36.499248 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T17:40:36.560251 #10344] DEBUG -- :   [1m[35mCart Load (3.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:40:36.635255 #10344] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-01T17:40:36.716260 #10344] DEBUG -- :   [1m[35mLineItem Load (1.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:40:36.749262 #10344] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T17:40:36.850268 #10344] DEBUG -- :   [1m[35mSQL (5.0ms)[0m  UPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = 51  [["quantity", 2], ["updated_at", Thu, 01 Jan 2015 17:40:36 UTC +00:00]]
D, [2015-01-01T17:40:37.069280 #10344] DEBUG -- :   [1m[36m (187.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T17:40:37.160285 #10344] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-01T17:40:37.267292 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T17:40:37.344296 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
I, [2015-01-01T17:40:37.375496 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (185.6ms)
I, [2015-01-01T17:40:37.437896 #10344]  INFO -- :   Rendered carts/_cart.html.erb (304.4ms)
I, [2015-01-01T17:40:37.469096 #10344]  INFO -- :   Rendered line_items/create.js.erb (345.6ms)
I, [2015-01-01T17:40:37.500296 #10344]  INFO -- : Completed 200 OK in 968ms (Views: 389.8ms | ActiveRecord: 205.0ms)
D, [2015-01-01T17:40:37.531496 #10344] DEBUG -- : 
D, [2015-01-01T17:40:37.564696 #10344] DEBUG -- : 
I, [2015-01-01T17:40:37.603699 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 17:40:37 +0000
I, [2015-01-01T17:40:37.678703 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T17:40:37.726706 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T17:40:37.791709 #10344] DEBUG -- :   [1m[36mCart Load (1.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T17:40:37.853713 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-01T17:40:37.935718 #10344] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T17:40:37.969720 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-01T17:40:38.060725 #10344] DEBUG -- :   [1m[36mSQL (5.0ms)[0m  [1mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = 51[0m  [["quantity", 3], ["updated_at", Thu, 01 Jan 2015 17:40:37 UTC +00:00]]
D, [2015-01-01T17:40:38.224734 #10344] DEBUG -- :   [1m[35m (132.0ms)[0m  commit transaction
D, [2015-01-01T17:40:38.317740 #10344] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-01T17:40:38.403744 #10344] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T17:40:38.490749 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
I, [2015-01-01T17:40:38.536752 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (175.0ms)
I, [2015-01-01T17:40:38.594755 #10344]  INFO -- :   Rendered carts/_cart.html.erb (313.0ms)
I, [2015-01-01T17:40:38.625955 #10344]  INFO -- :   Rendered line_items/create.js.erb (347.0ms)
I, [2015-01-01T17:40:38.657155 #10344]  INFO -- : Completed 200 OK in 898ms (Views: 392.2ms | ActiveRecord: 147.0ms)
D, [2015-01-01T17:40:40.175216 #10344] DEBUG -- : 
D, [2015-01-01T17:40:40.190816 #10344] DEBUG -- : 
I, [2015-01-01T17:40:40.237616 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 17:40:40 +0000
I, [2015-01-01T17:40:40.331217 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T17:40:40.393617 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T17:40:40.471617 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T17:40:40.534017 #10344] DEBUG -- :   [1m[35mCart Load (15.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:40:40.644217 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:40:40.784617 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T17:40:53.206671 #10344] DEBUG -- :   [1m[35m (15.6ms)[0m  begin transaction
D, [2015-01-01T17:40:53.362671 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 17:40:53 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 17:40:53 UTC +00:00]]
D, [2015-01-01T17:40:53.534271 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 50  [["cart_id", nil], ["order_id", 48], ["updated_at", Thu, 01 Jan 2015 17:40:53 UTC +00:00]]
D, [2015-01-01T17:40:53.752671 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 51[0m  [["cart_id", nil], ["order_id", 48], ["updated_at", Thu, 01 Jan 2015 17:40:53 UTC +00:00]]
I, [2015-01-01T17:40:53.799472 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T17:40:53.909672 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T17:40:54.034472 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T17:40:54.143672 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 48]]
I, [2015-01-01T17:40:54.174872 #10344]  INFO -- : in order=
I, [2015-01-01T17:40:54.221672 #10344]  INFO -- : in payment.create
I, [2015-01-01T17:40:54.440073 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"76.96"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"76.96", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/48/confirm", "cancel_url"=>"http://localhost:3000/orders/48/cancel"}}
I, [2015-01-01T17:40:55.017274 #10344]  INFO -- : #<ActiveModel::Errors:0x000000097ee240 @base=#<Payment:0x00000009c05ae0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009befb28 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000098a1110 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000098a0850 @error=nil, @total="76.96", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000989ae28 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009899f28 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="76.96", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000098913a0 @error=nil, @return_url="http://localhost:3000/orders/48/confirm", @cancel_url="http://localhost:3000/orders/48/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000097ee240 ...>>, @messages={}>
I, [2015-01-01T17:40:55.048474 #10344]  INFO -- : got past invalid
I, [2015-01-01T17:40:55.126474 #10344]  INFO -- : PayPal-Request-Id: f43cf48a-5b13-45af-b867-c84f5fc08a79
I, [2015-01-01T17:40:55.157674 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T17:40:56.097676 #10344]  INFO -- : Response[400]: Bad Request, Duration: 0.909s
I, [2015-01-01T17:40:56.128876 #10344]  INFO -- :  in error=
I, [2015-01-01T17:40:56.160076 #10344]  INFO -- : back from super
I, [2015-01-01T17:40:56.362876 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"76.96"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"76.96", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/48/confirm", "cancel_url"=>"http://localhost:3000/orders/48/cancel"}}
I, [2015-01-01T17:40:56.503277 #10344]  INFO -- : @payment save just done
I, [2015-01-01T17:40:57.252078 #10344]  INFO -- : #<Payment:0x00000009c05ae0 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"2f3332aa45fb0"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009befb28 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000098a1110 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000098a0850 @error=nil, @total="76.96", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000989ae28 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009899f28 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="76.96", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000098913a0 @error=nil, @return_url="http://localhost:3000/orders/48/confirm", @cancel_url="http://localhost:3000/orders/48/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000097ee240 @base=#<Payment:0x00000009c05ae0 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="f43cf48a-5b13-45af-b867-c84f5fc08a79", @header={}>
I, [2015-01-01T17:40:57.969679 #10344]  INFO -- : #<Payment:0x00000009c05ae0 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"2f3332aa45fb0"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009befb28 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000098a1110 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000098a0850 @error=nil, @total="76.96", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000989ae28 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009899f28 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="76.96", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000098913a0 @error=nil, @return_url="http://localhost:3000/orders/48/confirm", @cancel_url="http://localhost:3000/orders/48/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000097ee240 @base=#<Payment:0x00000009c05ae0 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="f43cf48a-5b13-45af-b867-c84f5fc08a79", @header={}>
D, [2015-01-01T17:40:58.125679 #10344] DEBUG -- :   [1m[36m (109.2ms)[0m  [1mcommit transaction[0m
I, [2015-01-01T17:40:58.156879 #10344]  INFO -- : about to approve url
I, [2015-01-01T17:40:58.954481 #10344]  INFO -- : #<Payment:0x00000009c05ae0 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"2f3332aa45fb0"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009befb28 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000098a1110 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000098a0850 @error=nil, @total="76.96", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000989ae28 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009899f28 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="76.96", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000098913a0 @error=nil, @return_url="http://localhost:3000/orders/48/confirm", @cancel_url="http://localhost:3000/orders/48/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000097ee240 @base=#<Payment:0x00000009c05ae0 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="f43cf48a-5b13-45af-b867-c84f5fc08a79", @header={}>
I, [2015-01-01T17:40:59.001281 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T17:40:59.048081 #10344]  INFO -- : Completed 302 Found in 18670ms (ActiveRecord: 171.6ms)
D, [2015-01-01T17:40:59.141681 #10344] DEBUG -- : 
D, [2015-01-01T17:40:59.157281 #10344] DEBUG -- : 
I, [2015-01-01T17:40:59.204081 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 17:40:59 +0000
I, [2015-01-01T17:40:59.297682 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T17:40:59.375682 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:40:59.500482 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-01T17:40:59.578482 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (15.6ms)
I, [2015-01-01T17:40:59.625282 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (171.6ms)
D, [2015-01-01T17:40:59.874883 #10344] DEBUG -- :   [1m[35mLineItem Exists (0.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:40:59.968483 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:40:59.999683 #10344]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-01T17:41:00.077683 #10344]  INFO -- :   Rendered carts/_cart.html.erb (156.0ms)
I, [2015-01-01T17:41:00.140083 #10344]  INFO -- : Completed 200 OK in 811ms (Views: 717.6ms | ActiveRecord: 0.0ms)
D, [2015-01-01T17:50:31.247523 #10344] DEBUG -- : 
D, [2015-01-01T17:50:31.267524 #10344] DEBUG -- : 
I, [2015-01-01T17:50:31.308527 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 17:50:31 +0000
I, [2015-01-01T17:50:34.308698 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T17:50:34.472708 #10344] DEBUG -- :   [1m[35mCart Load (3.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:50:34.745723 #10344] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-01T17:50:35.015739 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (4.0ms)
I, [2015-01-01T17:50:35.072742 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (368.0ms)
D, [2015-01-01T17:50:35.405761 #10344] DEBUG -- :   [1m[35mLineItem Exists (3.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:50:35.506767 #10344] DEBUG -- :   [1m[36mLineItem Load (4.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:50:35.571770 #10344]  INFO -- :   Rendered collection (1.0ms)
I, [2015-01-01T17:50:35.693777 #10344]  INFO -- :   Rendered carts/_cart.html.erb (236.0ms)
I, [2015-01-01T17:50:35.771782 #10344]  INFO -- : Completed 200 OK in 1414ms (Views: 1071.1ms | ActiveRecord: 36.0ms)
D, [2015-01-01T17:50:36.039797 #10344] DEBUG -- : 
D, [2015-01-01T17:50:36.075799 #10344] DEBUG -- : 
I, [2015-01-01T17:50:36.169805 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 17:50:36 +0000
D, [2015-01-01T17:50:36.233808 #10344] DEBUG -- : 
D, [2015-01-01T17:50:36.249809 #10344] DEBUG -- : 
I, [2015-01-01T17:50:36.288811 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 17:50:36 +0000
D, [2015-01-01T17:50:36.353815 #10344] DEBUG -- : 
D, [2015-01-01T17:50:36.367816 #10344] DEBUG -- : 
I, [2015-01-01T17:50:36.406818 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 17:50:36 +0000
D, [2015-01-01T17:50:36.466822 #10344] DEBUG -- : 
D, [2015-01-01T17:50:36.481822 #10344] DEBUG -- : 
I, [2015-01-01T17:50:36.520825 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 17:50:36 +0000
D, [2015-01-01T17:50:36.587828 #10344] DEBUG -- : 
D, [2015-01-01T17:50:36.602829 #10344] DEBUG -- : 
I, [2015-01-01T17:50:36.642832 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 17:50:36 +0000
D, [2015-01-01T17:50:36.704835 #10344] DEBUG -- : 
D, [2015-01-01T17:50:36.720836 #10344] DEBUG -- : 
I, [2015-01-01T17:50:36.760838 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 17:50:36 +0000
D, [2015-01-01T17:50:36.819842 #10344] DEBUG -- : 
D, [2015-01-01T17:50:36.833843 #10344] DEBUG -- : 
I, [2015-01-01T17:50:36.873845 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 17:50:36 +0000
D, [2015-01-01T17:50:36.934848 #10344] DEBUG -- : 
D, [2015-01-01T17:50:36.948849 #10344] DEBUG -- : 
I, [2015-01-01T17:50:37.011853 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 17:50:36 +0000
D, [2015-01-01T17:50:37.078857 #10344] DEBUG -- : 
D, [2015-01-01T17:50:37.093857 #10344] DEBUG -- : 
I, [2015-01-01T17:50:37.128859 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 17:50:37 +0000
D, [2015-01-01T17:50:37.203864 #10344] DEBUG -- : 
D, [2015-01-01T17:50:37.218865 #10344] DEBUG -- : 
I, [2015-01-01T17:50:37.254867 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 17:50:37 +0000
D, [2015-01-01T17:50:37.315870 #10344] DEBUG -- : 
D, [2015-01-01T17:50:37.329871 #10344] DEBUG -- : 
I, [2015-01-01T17:50:37.368873 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 17:50:37 +0000
D, [2015-01-01T17:50:37.432877 #10344] DEBUG -- : 
D, [2015-01-01T17:50:37.449878 #10344] DEBUG -- : 
I, [2015-01-01T17:50:37.487880 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 17:50:37 +0000
D, [2015-01-01T17:50:37.573885 #10344] DEBUG -- : 
D, [2015-01-01T17:50:37.598886 #10344] DEBUG -- : 
I, [2015-01-01T17:50:37.647889 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 17:50:37 +0000
D, [2015-01-01T17:50:37.718893 #10344] DEBUG -- : 
D, [2015-01-01T17:50:37.736894 #10344] DEBUG -- : 
I, [2015-01-01T17:50:37.789897 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 17:50:37 +0000
D, [2015-01-01T17:50:37.857901 #10344] DEBUG -- : 
D, [2015-01-01T17:50:37.872902 #10344] DEBUG -- : 
I, [2015-01-01T17:50:37.911904 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 17:50:37 +0000
D, [2015-01-01T17:50:37.980908 #10344] DEBUG -- : 
D, [2015-01-01T17:50:37.999909 #10344] DEBUG -- : 
I, [2015-01-01T17:50:38.038911 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 17:50:38 +0000
D, [2015-01-01T17:50:38.109916 #10344] DEBUG -- : 
D, [2015-01-01T17:50:38.135917 #10344] DEBUG -- : 
I, [2015-01-01T17:50:38.174919 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 17:50:38 +0000
D, [2015-01-01T17:50:38.235923 #10344] DEBUG -- : 
D, [2015-01-01T17:50:38.252924 #10344] DEBUG -- : 
I, [2015-01-01T17:50:38.294926 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 17:50:38 +0000
D, [2015-01-01T17:50:38.358930 #10344] DEBUG -- : 
D, [2015-01-01T17:50:38.373931 #10344] DEBUG -- : 
I, [2015-01-01T17:50:38.416933 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 17:50:38 +0000
D, [2015-01-01T17:50:38.476937 #10344] DEBUG -- : 
D, [2015-01-01T17:50:38.491937 #10344] DEBUG -- : 
I, [2015-01-01T17:50:38.528940 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 17:50:38 +0000
D, [2015-01-01T17:50:38.609944 #10344] DEBUG -- : 
D, [2015-01-01T17:50:38.624945 #10344] DEBUG -- : 
I, [2015-01-01T17:50:38.662947 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 17:50:38 +0000
D, [2015-01-01T17:50:38.731951 #10344] DEBUG -- : 
D, [2015-01-01T17:50:38.745952 #10344] DEBUG -- : 
I, [2015-01-01T17:50:38.784954 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 17:50:38 +0000
D, [2015-01-01T17:50:38.840957 #10344] DEBUG -- : 
D, [2015-01-01T17:50:38.855958 #10344] DEBUG -- : 
I, [2015-01-01T17:50:38.895961 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 17:50:38 +0000
D, [2015-01-01T17:50:38.949964 #10344] DEBUG -- : 
D, [2015-01-01T17:50:38.965965 #10344] DEBUG -- : 
I, [2015-01-01T17:50:39.016967 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 17:50:38 +0000
D, [2015-01-01T17:50:39.072971 #10344] DEBUG -- : 
D, [2015-01-01T17:50:39.087971 #10344] DEBUG -- : 
I, [2015-01-01T17:50:39.125974 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 17:50:39 +0000
D, [2015-01-01T17:50:39.181977 #10344] DEBUG -- : 
D, [2015-01-01T17:50:39.197978 #10344] DEBUG -- : 
I, [2015-01-01T17:50:39.240980 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 17:50:39 +0000
D, [2015-01-01T17:50:39.328985 #10344] DEBUG -- : 
D, [2015-01-01T17:50:39.351987 #10344] DEBUG -- : 
I, [2015-01-01T17:50:39.393989 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 17:50:39 +0000
D, [2015-01-01T17:50:39.448992 #10344] DEBUG -- : 
D, [2015-01-01T17:50:39.464993 #10344] DEBUG -- : 
I, [2015-01-01T17:50:39.502995 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 17:50:39 +0000
D, [2015-01-01T17:50:39.560999 #10344] DEBUG -- : 
D, [2015-01-01T17:50:39.578000 #10344] DEBUG -- : 
I, [2015-01-01T17:50:39.618002 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 17:50:39 +0000
D, [2015-01-01T17:50:41.553841 #10344] DEBUG -- : 
D, [2015-01-01T17:50:41.585041 #10344] DEBUG -- : 
I, [2015-01-01T17:50:41.647441 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 17:50:41 +0000
I, [2015-01-01T17:50:41.820041 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T17:50:41.898041 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T17:50:41.991642 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:50:42.112842 #10344] DEBUG -- :   [1m[36mProduct Load (15.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-01T17:50:42.253846 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:50:42.597047 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T17:50:42.643847 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T17:50:42.924647 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 17:50:42 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:9a2eac8,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 17:50:42 UTC +00:00]]
D, [2015-01-01T17:50:43.252248 #10344] DEBUG -- :   [1m[35m (265.2ms)[0m  commit transaction
D, [2015-01-01T17:50:43.408248 #10344] DEBUG -- :   [1m[36mLineItem Load (15.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:50:43.517448 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T17:50:43.595449 #10344]  INFO -- :   Rendered carts/_cart.html.erb (249.6ms)
I, [2015-01-01T17:50:43.657849 #10344]  INFO -- :   Rendered line_items/create.js.erb (327.6ms)
I, [2015-01-01T17:50:43.726650 #10344]  INFO -- : Completed 200 OK in 1760ms (Views: 390.0ms | ActiveRecord: 296.4ms)
D, [2015-01-01T17:50:48.237123 #10344] DEBUG -- : 
D, [2015-01-01T17:50:48.268323 #10344] DEBUG -- : 
I, [2015-01-01T17:50:48.315123 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 17:50:48 +0000
I, [2015-01-01T17:50:48.439923 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T17:50:48.502323 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T17:50:48.595923 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:50:48.673924 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-01T17:50:48.802125 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:50:48.911325 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T17:50:48.958125 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T17:50:49.176526 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 17:50:48 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:605ef00,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 17:50:48 UTC +00:00]]
D, [2015-01-01T17:50:49.349126 #10344] DEBUG -- :   [1m[35m (124.8ms)[0m  commit transaction
D, [2015-01-01T17:50:49.473926 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-01T17:50:49.598726 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-01T17:50:49.676726 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (124.8ms)
I, [2015-01-01T17:50:49.754727 #10344]  INFO -- :   Rendered carts/_cart.html.erb (327.6ms)
I, [2015-01-01T17:50:49.801527 #10344]  INFO -- :   Rendered line_items/create.js.erb (390.0ms)
I, [2015-01-01T17:50:49.863927 #10344]  INFO -- : Completed 200 OK in 1284ms (Views: 452.4ms | ActiveRecord: 140.4ms)
D, [2015-01-01T17:50:52.445992 #10344] DEBUG -- : 
D, [2015-01-01T17:50:52.461592 #10344] DEBUG -- : 
I, [2015-01-01T17:50:52.508392 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 17:50:52 +0000
I, [2015-01-01T17:50:52.695593 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T17:50:52.851593 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T17:50:53.069993 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T17:50:53.179194 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T17:50:53.381994 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T17:50:53.553594 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T17:51:13.678233 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T17:51:14.068233 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 01 Jan 2015 17:51:13 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 17:51:13 UTC +00:00]]
D, [2015-01-01T17:51:14.239834 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 52[0m  [["cart_id", nil], ["order_id", 49], ["updated_at", Thu, 01 Jan 2015 17:51:14 UTC +00:00]]
D, [2015-01-01T17:51:14.427034 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 53  [["cart_id", nil], ["order_id", 49], ["updated_at", Thu, 01 Jan 2015 17:51:14 UTC +00:00]]
I, [2015-01-01T17:51:14.458234 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T17:51:14.615234 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T17:51:14.724435 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-01T17:51:22.455449 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 49]]
D, [2015-01-01T17:51:26.845057 #10344] DEBUG -- :   [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 49]]
I, [2015-01-01T17:51:33.072886 #10344]  INFO -- : in order=
I, [2015-01-01T17:51:50.870918 #10344]  INFO -- : in payment.create
I, [2015-01-01T17:51:51.058118 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/49/confirm", "cancel_url"=>"http://localhost:3000/orders/49/cancel"}}
I, [2015-01-01T17:51:51.479319 #10344]  INFO -- : #<ActiveModel::Errors:0x00000009b529b8 @base=#<Payment:0x00000005b1a3a0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005b196f8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000464aa88 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000004649f70 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000046482d8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000004636e98 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000354b020 @error=nil, @return_url="http://localhost:3000/orders/49/confirm", @cancel_url="http://localhost:3000/orders/49/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009b529b8 ...>>, @messages={}>
I, [2015-01-01T17:51:51.510519 #10344]  INFO -- : got past invalid
I, [2015-01-01T17:51:51.572919 #10344]  INFO -- : PayPal-Request-Id: 6eac859e-f72e-441b-b311-0ff5ba562065
I, [2015-01-01T17:51:51.619719 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T17:51:52.713721 #10344]  INFO -- : Response[400]: Bad Request, Duration: 1.047s
I, [2015-01-01T17:51:52.744921 #10344]  INFO -- :  in error=
I, [2015-01-01T17:51:52.776121 #10344]  INFO -- : back from super
I, [2015-01-01T17:51:52.996522 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/49/confirm", "cancel_url"=>"http://localhost:3000/orders/49/cancel"}}
I, [2015-01-01T17:51:53.152522 #10344]  INFO -- : @payment save just done
I, [2015-01-01T17:51:54.135324 #10344]  INFO -- : #<Payment:0x00000005b1a3a0 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"0dc75fb625487"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005b196f8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000464aa88 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000004649f70 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000046482d8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000004636e98 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000354b020 @error=nil, @return_url="http://localhost:3000/orders/49/confirm", @cancel_url="http://localhost:3000/orders/49/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009b529b8 @base=#<Payment:0x00000005b1a3a0 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="6eac859e-f72e-441b-b311-0ff5ba562065", @header={}>
I, [2015-01-01T17:51:55.102525 #10344]  INFO -- : #<Payment:0x00000005b1a3a0 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"0dc75fb625487"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005b196f8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000464aa88 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000004649f70 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000046482d8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000004636e98 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000354b020 @error=nil, @return_url="http://localhost:3000/orders/49/confirm", @cancel_url="http://localhost:3000/orders/49/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009b529b8 @base=#<Payment:0x00000005b1a3a0 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="6eac859e-f72e-441b-b311-0ff5ba562065", @header={}>
D, [2015-01-01T17:51:55.258526 #10344] DEBUG -- :   [1m[36m (109.2ms)[0m  [1mcommit transaction[0m
I, [2015-01-01T17:51:55.289726 #10344]  INFO -- : about to approve url
I, [2015-01-01T17:51:55.978127 #10344]  INFO -- : #<Payment:0x00000005b1a3a0 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"0dc75fb625487"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005b196f8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000464aa88 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000004649f70 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000046482d8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000004636e98 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000354b020 @error=nil, @return_url="http://localhost:3000/orders/49/confirm", @cancel_url="http://localhost:3000/orders/49/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009b529b8 @base=#<Payment:0x00000005b1a3a0 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="6eac859e-f72e-441b-b311-0ff5ba562065", @header={}>
I, [2015-01-01T17:51:56.024927 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T17:51:56.071727 #10344]  INFO -- : Completed 302 Found in 63329ms (ActiveRecord: 124.8ms)
D, [2015-01-01T17:51:56.149727 #10344] DEBUG -- : 
D, [2015-01-01T17:51:56.180927 #10344] DEBUG -- : 
I, [2015-01-01T17:51:56.227727 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 17:51:56 +0000
I, [2015-01-01T17:51:56.336928 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T17:51:56.414928 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:51:56.524128 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-01T17:51:56.586528 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (0.0ms)
I, [2015-01-01T17:51:56.633328 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (156.0ms)
D, [2015-01-01T17:51:56.882928 #10344] DEBUG -- :   [1m[35mLineItem Exists (0.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:51:56.976529 #10344] DEBUG -- :   [1m[36mLineItem Load (15.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:51:57.007729 #10344]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-01T17:51:57.085729 #10344]  INFO -- :   Rendered carts/_cart.html.erb (156.0ms)
I, [2015-01-01T17:51:57.163729 #10344]  INFO -- : Completed 200 OK in 780ms (Views: 670.8ms | ActiveRecord: 15.6ms)
D, [2015-01-01T17:57:49.646495 #10344] DEBUG -- : 
D, [2015-01-01T17:57:49.677695 #10344] DEBUG -- : 
I, [2015-01-01T17:57:49.724495 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 17:57:49 +0000
I, [2015-01-01T17:57:49.818095 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T17:57:49.880495 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T17:57:49.974096 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:57:50.067696 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-01T17:57:50.161296 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:57:50.270496 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T17:57:50.317296 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T17:57:50.512299 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 17:57:50 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:5800c00,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 17:57:50 UTC +00:00]]
D, [2015-01-01T17:57:50.699499 #10344] DEBUG -- :   [1m[35m (140.4ms)[0m  commit transaction
D, [2015-01-01T17:57:50.793099 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:57:50.886699 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T17:57:50.949099 #10344]  INFO -- :   Rendered carts/_cart.html.erb (187.2ms)
I, [2015-01-01T17:57:51.011499 #10344]  INFO -- :   Rendered line_items/create.js.erb (234.0ms)
I, [2015-01-01T17:57:51.058300 #10344]  INFO -- : Completed 200 OK in 1115ms (Views: 312.0ms | ActiveRecord: 156.0ms)
D, [2015-01-01T17:57:52.770764 #10344] DEBUG -- : 
D, [2015-01-01T17:57:52.801964 #10344] DEBUG -- : 
I, [2015-01-01T17:57:52.879964 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 17:57:52 +0000
I, [2015-01-01T17:57:52.989164 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T17:57:53.067164 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T17:57:53.176364 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:57:53.269965 #10344] DEBUG -- :   [1m[36mProduct Load (15.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-01T17:57:53.412766 #10344] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:57:53.537566 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T17:57:53.599966 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T17:57:53.849567 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 17:57:53 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:9d1e080,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 17:57:53 UTC +00:00]]
D, [2015-01-01T17:57:54.037767 #10344] DEBUG -- :   [1m[35m (125.8ms)[0m  commit transaction
D, [2015-01-01T17:57:54.178167 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-01T17:57:54.318568 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-01T17:57:54.412168 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (140.4ms)
I, [2015-01-01T17:57:54.490168 #10344]  INFO -- :   Rendered carts/_cart.html.erb (374.4ms)
I, [2015-01-01T17:57:54.552969 #10344]  INFO -- :   Rendered line_items/create.js.erb (436.8ms)
I, [2015-01-01T17:57:54.615369 #10344]  INFO -- : Completed 200 OK in 1486ms (Views: 515.2ms | ActiveRecord: 143.4ms)
D, [2015-01-01T17:57:56.215029 #10344] DEBUG -- : 
D, [2015-01-01T17:57:56.230629 #10344] DEBUG -- : 
I, [2015-01-01T17:57:56.293029 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 17:57:56 +0000
I, [2015-01-01T17:57:56.404230 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T17:57:56.482230 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T17:57:56.560230 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T17:57:56.622630 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T17:57:56.716230 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T17:57:56.841030 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T17:58:45.228522 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T17:58:45.353322 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 01 Jan 2015 17:58:45 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 17:58:45 UTC +00:00]]
D, [2015-01-01T17:58:45.462522 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 54[0m  [["cart_id", nil], ["order_id", 50], ["updated_at", Thu, 01 Jan 2015 17:58:45 UTC +00:00]]
D, [2015-01-01T17:58:45.556122 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 55  [["cart_id", nil], ["order_id", 50], ["updated_at", Thu, 01 Jan 2015 17:58:45 UTC +00:00]]
I, [2015-01-01T17:58:45.587322 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T17:58:45.649722 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T17:58:45.727722 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-01T17:58:52.084934 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 50]]
I, [2015-01-01T17:58:55.566740 #10344]  INFO -- : in order=
I, [2015-01-01T17:59:17.177580 #10344]  INFO -- : in payment.create
I, [2015-01-01T17:59:17.380380 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/50/confirm", "cancel_url"=>"http://localhost:3000/orders/50/cancel"}}
I, [2015-01-01T17:59:17.926381 #10344]  INFO -- : #<ActiveModel::Errors:0x00000009f76eb8 @base=#<Payment:0x00000005dc1680 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005dc0820 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000058d03b0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000058a7b90 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000058a5b38 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000058a4940 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000057765a0 @error=nil, @return_url="http://localhost:3000/orders/50/confirm", @cancel_url="http://localhost:3000/orders/50/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009f76eb8 ...>>, @messages={}>
I, [2015-01-01T17:59:17.957581 #10344]  INFO -- : got past invalid
I, [2015-01-01T17:59:18.035581 #10344]  INFO -- : PayPal-Request-Id: 5387a7c5-317d-4865-a97d-23856af02af3
I, [2015-01-01T17:59:18.082381 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T17:59:19.127583 #10344]  INFO -- : Response[400]: Bad Request, Duration: 1.014s
I, [2015-01-01T17:59:19.143183 #10344]  INFO -- :  in error=
I, [2015-01-01T17:59:19.158783 #10344]  INFO -- : back from super
I, [2015-01-01T17:59:19.314784 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/50/confirm", "cancel_url"=>"http://localhost:3000/orders/50/cancel"}}
I, [2015-01-01T17:59:36.219032 #10344]  INFO -- : @payment save just done
I, [2015-01-01T17:59:41.064041 #10344]  INFO -- : #<Payment:0x00000005dc1680 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"4fd87b1e4847c"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005dc0820 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000058d03b0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000058a7b90 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000058a5b38 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000058a4940 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000057765a0 @error=nil, @return_url="http://localhost:3000/orders/50/confirm", @cancel_url="http://localhost:3000/orders/50/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009f76eb8 @base=#<Payment:0x00000005dc1680 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="5387a7c5-317d-4865-a97d-23856af02af3", @header={}>
I, [2015-01-01T17:59:45.526049 #10344]  INFO -- : #<Payment:0x00000005dc1680 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"4fd87b1e4847c"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005dc0820 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000058d03b0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000058a7b90 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000058a5b38 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000058a4940 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000057765a0 @error=nil, @return_url="http://localhost:3000/orders/50/confirm", @cancel_url="http://localhost:3000/orders/50/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009f76eb8 @base=#<Payment:0x00000005dc1680 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="5387a7c5-317d-4865-a97d-23856af02af3", @header={}>
D, [2015-01-01T18:00:25.573522 #10344] DEBUG -- :   [1m[35m (109.2ms)[0m  commit transaction
I, [2015-01-01T18:00:50.796568 #10344]  INFO -- : #<Payment:0x00000005dc1680 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"4fd87b1e4847c"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005dc0820 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000058d03b0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000058a7b90 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000058a5b38 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000058a4940 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000057765a0 @error=nil, @return_url="http://localhost:3000/orders/50/confirm", @cancel_url="http://localhost:3000/orders/50/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009f76eb8 @base=#<Payment:0x00000005dc1680 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="5387a7c5-317d-4865-a97d-23856af02af3", @header={}>
I, [2015-01-01T19:01:11.157137 #10344]  INFO -- : about to approve url
I, [2015-01-01T19:01:11.987939 #10344]  INFO -- : #<Payment:0x00000005dc1680 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"4fd87b1e4847c"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005dc0820 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000058d03b0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000058a7b90 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000058a5b38 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000058a4940 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000057765a0 @error=nil, @return_url="http://localhost:3000/orders/50/confirm", @cancel_url="http://localhost:3000/orders/50/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009f76eb8 @base=#<Payment:0x00000005dc1680 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="5387a7c5-317d-4865-a97d-23856af02af3", @header={}, @links=[]>
I, [2015-01-01T19:01:12.034739 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T19:01:12.081539 #10344]  INFO -- : Completed 302 Found in 3795631ms (ActiveRecord: 124.8ms)
D, [2015-01-01T19:01:12.132340 #10344] DEBUG -- : 
D, [2015-01-01T19:01:12.149940 #10344] DEBUG -- : 
I, [2015-01-01T19:01:12.196740 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 19:01:12 +0000
I, [2015-01-01T19:01:14.211143 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:01:14.304744 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T19:01:14.460744 #10344] DEBUG -- :   [1m[36mCart Load (15.6ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:01:14.695744 #10344] DEBUG -- :   [1m[35mProduct Load (15.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-01T19:01:15.007745 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T19:01:15.319745 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T19:01:15.382146 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:01:15.647346 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 19:01:15 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:99375c0,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 19:01:15 UTC +00:00]]
D, [2015-01-01T19:01:15.850146 #10344] DEBUG -- :   [1m[36m (156.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T19:01:15.990547 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T19:01:16.084147 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T19:01:16.208947 #10344]  INFO -- :   Rendered carts/_cart.html.erb (280.8ms)
I, [2015-01-01T19:01:16.255747 #10344]  INFO -- :   Rendered line_items/create.js.erb (327.6ms)
I, [2015-01-01T19:01:16.302547 #10344]  INFO -- : Completed 200 OK in 1951ms (Views: 405.6ms | ActiveRecord: 218.4ms)
D, [2015-01-01T19:01:16.333747 #10344] DEBUG -- : 
D, [2015-01-01T19:01:16.349347 #10344] DEBUG -- : 
I, [2015-01-01T19:01:16.408950 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 19:01:16 +0000
I, [2015-01-01T19:01:16.545958 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T19:01:16.673965 #10344] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T19:01:16.859976 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T19:01:16.929980 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:01:17.092989 #10344] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T19:01:17.208996 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T19:01:31.125030 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:01:31.515031 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 01 Jan 2015 19:01:31 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 19:01:31 UTC +00:00]]
D, [2015-01-01T19:01:31.672031 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 56[0m  [["cart_id", nil], ["order_id", 51], ["updated_at", Thu, 01 Jan 2015 19:01:31 UTC +00:00]]
I, [2015-01-01T19:01:31.718831 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T19:01:31.843632 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T19:01:37.868242 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 51]]
I, [2015-01-01T19:02:26.920931 #10344]  INFO -- : in order=
I, [2015-01-01T19:02:26.952131 #10344]  INFO -- : in payment.create
I, [2015-01-01T19:02:27.123731 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/51/confirm", "cancel_url"=>"http://localhost:3000/orders/51/cancel"}}
I, [2015-01-01T19:02:27.702932 #10344]  INFO -- : #<ActiveModel::Errors:0x00000007e66728 @base=#<Payment:0x00000009b403f8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009b3b8d0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000097e4c90 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000097e43f8 @error=nil, @total="19.99", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000097de890 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000097ddb48 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007ec24d8 @error=nil, @return_url="http://localhost:3000/orders/51/confirm", @cancel_url="http://localhost:3000/orders/51/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007e66728 ...>>, @messages={}>
I, [2015-01-01T19:02:27.734132 #10344]  INFO -- : got past invalid
I, [2015-01-01T19:02:27.780932 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/oauth2/token
I, [2015-01-01T19:02:29.452135 #10344]  INFO -- : Response[200]: OK, Duration: 1.640s
I, [2015-01-01T19:02:29.530135 #10344]  INFO -- : PayPal-Request-Id: 019d612b-f5d7-4c9f-b2f9-4cc5cbf170c4
I, [2015-01-01T19:02:29.576936 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T19:02:30.860138 #10344]  INFO -- : Response[201]: Created, Duration: 1.252s
I, [2015-01-01T19:02:30.906938 #10344]  INFO -- : back from super
I, [2015-01-01T19:02:31.328139 #10344]  INFO -- : {"id"=>"PAY-7CH257708M525734TKSSZTSI", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99", "details"=>{"subtotal"=>"19.99"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/51/confirm", "cancel_url"=>"http://localhost:3000/orders/51/cancel"}, "create_time"=>"2015-01-01T19:02:33Z", "update_time"=>"2015-01-01T19:02:33Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CH257708M525734TKSSZTSI", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-35Y12517S8810024X", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CH257708M525734TKSSZTSI/execute", "rel"=>"execute", "method"=>"POST"}]}
I, [2015-01-01T19:02:31.733740 #10344]  INFO -- : @payment save just done
I, [2015-01-01T19:02:32.749741 #10344]  INFO -- : #<Payment:0x00000009b403f8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005fa8bb0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000005fa37c8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000005fa2f30 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005fa19a0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005fa13b0 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000005fa03c0 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000005f5af00 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005f5a3e8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007ec24d8 @error=nil, @return_url="http://localhost:3000/orders/51/confirm", @cancel_url="http://localhost:3000/orders/51/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007e66728 @base=#<Payment:0x00000009b403f8 ...>, @messages={}>, @request_id="019d612b-f5d7-4c9f-b2f9-4cc5cbf170c4", @header={}, @id="PAY-7CH257708M525734TKSSZTSI", @create_time="2015-01-01T19:02:33Z", @update_time="2015-01-01T19:02:33Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000005f52300 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CH257708M525734TKSSZTSI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000005f47a18 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-35Y12517S8810024X", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000005f45768 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CH257708M525734TKSSZTSI/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T19:02:33.827143 #10344]  INFO -- : #<Payment:0x00000009b403f8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005fa8bb0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000005fa37c8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000005fa2f30 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005fa19a0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005fa13b0 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000005fa03c0 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000005f5af00 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005f5a3e8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007ec24d8 @error=nil, @return_url="http://localhost:3000/orders/51/confirm", @cancel_url="http://localhost:3000/orders/51/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007e66728 @base=#<Payment:0x00000009b403f8 ...>, @messages={}>, @request_id="019d612b-f5d7-4c9f-b2f9-4cc5cbf170c4", @header={}, @id="PAY-7CH257708M525734TKSSZTSI", @create_time="2015-01-01T19:02:33Z", @update_time="2015-01-01T19:02:33Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000005f52300 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CH257708M525734TKSSZTSI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000005f47a18 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-35Y12517S8810024X", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000005f45768 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CH257708M525734TKSSZTSI/execute", @rel="execute", @method="POST">]>
D, [2015-01-01T19:02:33.967544 #10344] DEBUG -- :   [1m[35m (93.6ms)[0m  commit transaction
I, [2015-01-01T19:02:34.014344 #10344]  INFO -- : about to approve url
I, [2015-01-01T19:02:35.246746 #10344]  INFO -- : #<Payment:0x00000009b403f8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005fa8bb0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000005fa37c8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000005fa2f30 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005fa19a0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005fa13b0 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000005fa03c0 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000005f5af00 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005f5a3e8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007ec24d8 @error=nil, @return_url="http://localhost:3000/orders/51/confirm", @cancel_url="http://localhost:3000/orders/51/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007e66728 @base=#<Payment:0x00000009b403f8 ...>, @messages={}>, @request_id="019d612b-f5d7-4c9f-b2f9-4cc5cbf170c4", @header={}, @id="PAY-7CH257708M525734TKSSZTSI", @create_time="2015-01-01T19:02:33Z", @update_time="2015-01-01T19:02:33Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000005f52300 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CH257708M525734TKSSZTSI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000005f47a18 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-35Y12517S8810024X", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000005f45768 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CH257708M525734TKSSZTSI/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T19:02:36.448948 #10344]  INFO -- : #<Payment:0x00000009b403f8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005fa8bb0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000005fa37c8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000005fa2f30 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005fa19a0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005fa13b0 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000005fa03c0 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000005f5af00 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005f5a3e8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007ec24d8 @error=nil, @return_url="http://localhost:3000/orders/51/confirm", @cancel_url="http://localhost:3000/orders/51/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007e66728 @base=#<Payment:0x00000009b403f8 ...>, @messages={}>, @request_id="019d612b-f5d7-4c9f-b2f9-4cc5cbf170c4", @header={}, @id="PAY-7CH257708M525734TKSSZTSI", @create_time="2015-01-01T19:02:33Z", @update_time="2015-01-01T19:02:33Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000005f52300 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CH257708M525734TKSSZTSI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000005f47a18 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-35Y12517S8810024X", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000005f45768 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CH257708M525734TKSSZTSI/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T19:02:36.511348 #10344]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-35Y12517S8810024X
I, [2015-01-01T19:02:37.260149 #10344]  INFO -- : #<Payment:0x00000009b403f8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005fa8bb0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000005fa37c8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000005fa2f30 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005fa19a0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005fa13b0 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000005fa03c0 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000005f5af00 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005f5a3e8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007ec24d8 @error=nil, @return_url="http://localhost:3000/orders/51/confirm", @cancel_url="http://localhost:3000/orders/51/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007e66728 @base=#<Payment:0x00000009b403f8 ...>, @messages={}>, @request_id="019d612b-f5d7-4c9f-b2f9-4cc5cbf170c4", @header={}, @id="PAY-7CH257708M525734TKSSZTSI", @create_time="2015-01-01T19:02:33Z", @update_time="2015-01-01T19:02:33Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000005f52300 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CH257708M525734TKSSZTSI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000005f47a18 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-35Y12517S8810024X", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000005f45768 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CH257708M525734TKSSZTSI/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T19:02:37.291349 #10344]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-35Y12517S8810024X
I, [2015-01-01T19:02:37.322549 #10344]  INFO -- : Completed 403 Forbidden in 80743ms (ActiveRecord: 117.6ms)
D, [2015-01-01T19:07:41.635010 #10344] DEBUG -- : 
D, [2015-01-01T19:07:41.650610 #10344] DEBUG -- : 
I, [2015-01-01T19:07:41.711213 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 19:07:41 +0000
I, [2015-01-01T19:07:44.780388 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T19:07:44.947398 #10344] DEBUG -- :   [1m[36mCart Load (3.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:07:45.215413 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T19:07:45.500429 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (5.0ms)
I, [2015-01-01T19:07:45.557433 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (373.0ms)
D, [2015-01-01T19:07:45.912453 #10344] DEBUG -- :   [1m[36mLineItem Exists (3.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T19:07:46.024459 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T19:07:46.071462 #10344]  INFO -- :   Rendered collection (1.0ms)
I, [2015-01-01T19:07:46.190469 #10344]  INFO -- :   Rendered carts/_cart.html.erb (227.0ms)
I, [2015-01-01T19:07:46.270473 #10344]  INFO -- : Completed 200 OK in 1440ms (Views: 1092.1ms | ActiveRecord: 34.0ms)
D, [2015-01-01T19:07:46.483486 #10344] DEBUG -- : 
D, [2015-01-01T19:07:46.512487 #10344] DEBUG -- : 
I, [2015-01-01T19:07:46.603493 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 19:07:46 +0000
D, [2015-01-01T19:07:46.669496 #10344] DEBUG -- : 
D, [2015-01-01T19:07:46.685497 #10344] DEBUG -- : 
I, [2015-01-01T19:07:46.736500 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 19:07:46 +0000
D, [2015-01-01T19:07:46.794503 #10344] DEBUG -- : 
D, [2015-01-01T19:07:46.810504 #10344] DEBUG -- : 
I, [2015-01-01T19:07:46.850507 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 19:07:46 +0000
D, [2015-01-01T19:07:46.915510 #10344] DEBUG -- : 
D, [2015-01-01T19:07:46.931511 #10344] DEBUG -- : 
I, [2015-01-01T19:07:46.983514 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 19:07:46 +0000
D, [2015-01-01T19:07:47.088520 #10344] DEBUG -- : 
D, [2015-01-01T19:07:47.110522 #10344] DEBUG -- : 
I, [2015-01-01T19:07:47.150524 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 19:07:47 +0000
D, [2015-01-01T19:07:47.209527 #10344] DEBUG -- : 
D, [2015-01-01T19:07:47.224528 #10344] DEBUG -- : 
I, [2015-01-01T19:07:47.265530 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 19:07:47 +0000
D, [2015-01-01T19:07:47.324534 #10344] DEBUG -- : 
D, [2015-01-01T19:07:47.345535 #10344] DEBUG -- : 
I, [2015-01-01T19:07:47.388537 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 19:07:47 +0000
D, [2015-01-01T19:07:47.459541 #10344] DEBUG -- : 
D, [2015-01-01T19:07:47.473542 #10344] DEBUG -- : 
I, [2015-01-01T19:07:47.513545 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 19:07:47 +0000
D, [2015-01-01T19:07:47.574548 #10344] DEBUG -- : 
D, [2015-01-01T19:07:47.588549 #10344] DEBUG -- : 
I, [2015-01-01T19:07:47.624551 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 19:07:47 +0000
D, [2015-01-01T19:07:47.682554 #10344] DEBUG -- : 
D, [2015-01-01T19:07:47.696555 #10344] DEBUG -- : 
I, [2015-01-01T19:07:47.735557 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 19:07:47 +0000
D, [2015-01-01T19:07:47.794561 #10344] DEBUG -- : 
D, [2015-01-01T19:07:47.812562 #10344] DEBUG -- : 
I, [2015-01-01T19:07:47.852564 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 19:07:47 +0000
D, [2015-01-01T19:07:47.923568 #10344] DEBUG -- : 
D, [2015-01-01T19:07:47.938569 #10344] DEBUG -- : 
I, [2015-01-01T19:07:47.982571 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 19:07:47 +0000
D, [2015-01-01T19:07:48.042575 #10344] DEBUG -- : 
D, [2015-01-01T19:07:48.056576 #10344] DEBUG -- : 
I, [2015-01-01T19:07:48.099578 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 19:07:48 +0000
D, [2015-01-01T19:07:48.163582 #10344] DEBUG -- : 
D, [2015-01-01T19:07:48.177583 #10344] DEBUG -- : 
I, [2015-01-01T19:07:48.220585 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 19:07:48 +0000
D, [2015-01-01T19:07:48.274588 #10344] DEBUG -- : 
D, [2015-01-01T19:07:48.292589 #10344] DEBUG -- : 
I, [2015-01-01T19:07:48.334592 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 19:07:48 +0000
D, [2015-01-01T19:07:48.389595 #10344] DEBUG -- : 
D, [2015-01-01T19:07:48.405596 #10344] DEBUG -- : 
I, [2015-01-01T19:07:48.444598 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 19:07:48 +0000
D, [2015-01-01T19:07:48.500601 #10344] DEBUG -- : 
D, [2015-01-01T19:07:48.515602 #10344] DEBUG -- : 
I, [2015-01-01T19:07:48.555604 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 19:07:48 +0000
D, [2015-01-01T19:07:48.628608 #10344] DEBUG -- : 
D, [2015-01-01T19:07:48.672611 #10344] DEBUG -- : 
I, [2015-01-01T19:07:48.729614 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 19:07:48 +0000
D, [2015-01-01T19:07:48.786617 #10344] DEBUG -- : 
D, [2015-01-01T19:07:48.799618 #10344] DEBUG -- : 
I, [2015-01-01T19:07:48.836620 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 19:07:48 +0000
D, [2015-01-01T19:07:48.900624 #10344] DEBUG -- : 
D, [2015-01-01T19:07:48.924625 #10344] DEBUG -- : 
I, [2015-01-01T19:07:48.965628 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 19:07:48 +0000
D, [2015-01-01T19:07:49.041632 #10344] DEBUG -- : 
D, [2015-01-01T19:07:49.066633 #10344] DEBUG -- : 
I, [2015-01-01T19:07:49.111636 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 19:07:49 +0000
D, [2015-01-01T19:07:49.177640 #10344] DEBUG -- : 
D, [2015-01-01T19:07:49.192641 #10344] DEBUG -- : 
I, [2015-01-01T19:07:49.233643 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 19:07:49 +0000
D, [2015-01-01T19:07:49.286646 #10344] DEBUG -- : 
D, [2015-01-01T19:07:49.299647 #10344] DEBUG -- : 
I, [2015-01-01T19:07:49.337649 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 19:07:49 +0000
D, [2015-01-01T19:07:49.390652 #10344] DEBUG -- : 
D, [2015-01-01T19:07:49.406653 #10344] DEBUG -- : 
I, [2015-01-01T19:07:49.448655 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 19:07:49 +0000
D, [2015-01-01T19:07:49.503658 #10344] DEBUG -- : 
D, [2015-01-01T19:07:49.517659 #10344] DEBUG -- : 
I, [2015-01-01T19:07:49.559662 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 19:07:49 +0000
D, [2015-01-01T19:07:49.619665 #10344] DEBUG -- : 
D, [2015-01-01T19:07:49.637666 #10344] DEBUG -- : 
I, [2015-01-01T19:07:49.679668 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 19:07:49 +0000
D, [2015-01-01T19:07:50.393709 #10344] DEBUG -- : 
D, [2015-01-01T19:07:50.416711 #10344] DEBUG -- : 
I, [2015-01-01T19:07:50.462713 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 19:07:50 +0000
D, [2015-01-01T19:07:50.550718 #10344] DEBUG -- : 
D, [2015-01-01T19:07:50.580720 #10344] DEBUG -- : 
I, [2015-01-01T19:07:50.662725 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 19:07:50 +0000
D, [2015-01-01T19:07:50.760730 #10344] DEBUG -- : 
D, [2015-01-01T19:07:50.779731 #10344] DEBUG -- : 
I, [2015-01-01T19:07:50.833734 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 19:07:50 +0000
D, [2015-01-01T19:07:52.717355 #10344] DEBUG -- : 
D, [2015-01-01T19:07:52.748555 #10344] DEBUG -- : 
I, [2015-01-01T19:07:52.810955 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 19:07:52 +0000
I, [2015-01-01T19:07:52.982555 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:07:53.060555 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T19:07:53.169756 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:07:53.271356 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-01T19:07:53.421757 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T19:07:53.748159 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T19:07:53.810559 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:07:54.080161 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 19:07:53 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:9ffd788,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 19:07:53 UTC +00:00]]
D, [2015-01-01T19:07:54.454562 #10344] DEBUG -- :   [1m[36m (327.6ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T19:07:54.597363 #10344] DEBUG -- :   [1m[35mLineItem Load (17.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T19:07:54.729564 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T19:07:54.823165 #10344]  INFO -- :   Rendered carts/_cart.html.erb (275.0ms)
I, [2015-01-01T19:07:54.885565 #10344]  INFO -- :   Rendered line_items/create.js.erb (353.0ms)
I, [2015-01-01T19:07:54.947965 #10344]  INFO -- : Completed 200 OK in 1825ms (Views: 413.4ms | ActiveRecord: 345.2ms)
D, [2015-01-01T19:07:54.994765 #10344] DEBUG -- : 
D, [2015-01-01T19:07:55.025965 #10344] DEBUG -- : 
I, [2015-01-01T19:07:55.095568 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 19:07:55 +0000
I, [2015-01-01T19:07:55.231576 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:07:55.315581 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T19:07:55.420587 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:07:55.522592 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-01T19:07:55.662600 #10344] DEBUG -- :   [1m[36mLineItem Load (3.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T19:07:55.795608 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-01T19:07:55.858612 #10344] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:07:56.107626 #10344] DEBUG -- :   [1m[35mSQL (9.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 19:07:55 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:84ce458,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 19:07:55 UTC +00:00]]
D, [2015-01-01T19:07:56.383827 #10344] DEBUG -- :   [1m[36m (238.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T19:07:56.511627 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-01T19:07:56.652028 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-01T19:07:56.730028 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (140.4ms)
I, [2015-01-01T19:07:56.808028 #10344]  INFO -- :   Rendered carts/_cart.html.erb (346.2ms)
I, [2015-01-01T19:07:56.854828 #10344]  INFO -- :   Rendered line_items/create.js.erb (408.6ms)
I, [2015-01-01T19:07:56.901628 #10344]  INFO -- : Completed 200 OK in 1538ms (Views: 455.4ms | ActiveRecord: 258.0ms)
D, [2015-01-01T19:07:58.828092 #10344] DEBUG -- : 
D, [2015-01-01T19:07:58.859292 #10344] DEBUG -- : 
I, [2015-01-01T19:07:58.906092 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 19:07:58 +0000
I, [2015-01-01T19:07:59.077692 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T19:07:59.218092 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T19:07:59.422893 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T19:07:59.517295 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:07:59.735695 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T19:07:59.876095 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T19:08:00.156896 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T19:08:00.546896 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 19:08:00 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 19:08:00 UTC +00:00]]
D, [2015-01-01T19:08:00.702897 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 57  [["cart_id", nil], ["order_id", 52], ["updated_at", Thu, 01 Jan 2015 19:08:00 UTC +00:00]]
D, [2015-01-01T19:08:00.843297 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 58[0m  [["cart_id", nil], ["order_id", 52], ["updated_at", Thu, 01 Jan 2015 19:08:00 UTC +00:00]]
I, [2015-01-01T19:08:00.874497 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T19:08:01.031898 #10344] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T19:08:01.126498 #10344] DEBUG -- :   [1m[36mProduct Load (15.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T19:08:04.574104 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 52]]
W, [2015-01-01T19:08:04.636505 #10344]  WARN -- : undefined method `transctions' for #<Payment:0x0000000836f4b8>
I, [2015-01-01T19:08:04.683305 #10344]  INFO -- : in payment.create
I, [2015-01-01T19:08:04.854905 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}]}
I, [2015-01-01T19:08:05.495506 #10344]  INFO -- : #<ActiveModel::Errors:0x00000007f351b8 @base=#<Payment:0x0000000836f4b8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000836e838 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007fb5c00 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007fb56b0 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007fafd28 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007faf238 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007f351b8 ...>>, @messages={}>
I, [2015-01-01T19:08:05.526706 #10344]  INFO -- : got past invalid
I, [2015-01-01T19:08:05.620306 #10344]  INFO -- : PayPal-Request-Id: f5939ab2-28b2-4d6b-a55f-a857f5c66c8c
I, [2015-01-01T19:08:05.682706 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T19:08:06.712308 #10344]  INFO -- : Response[400]: Bad Request, Duration: 0.983s
I, [2015-01-01T19:08:06.743508 #10344]  INFO -- :  in error=
I, [2015-01-01T19:08:06.774708 #10344]  INFO -- :  in error=
I, [2015-01-01T19:08:06.805908 #10344]  INFO -- : back from super
I, [2015-01-01T19:08:06.946309 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}]}
I, [2015-01-01T19:08:09.380913 #10344]  INFO -- : @payment save just done
I, [2015-01-01T19:08:10.020514 #10344]  INFO -- : #<Payment:0x0000000836f4b8 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"4940901378703"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000836e838 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007fb5c00 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007fb56b0 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007fafd28 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007faf238 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007f351b8 @base=#<Payment:0x0000000836f4b8 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="f5939ab2-28b2-4d6b-a55f-a857f5c66c8c", @header={}>
I, [2015-01-01T19:08:10.505115 #10344]  INFO -- : #<Payment:0x0000000836f4b8 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"4940901378703"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000836e838 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007fb5c00 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007fb56b0 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007fafd28 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007faf238 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007f351b8 @base=#<Payment:0x0000000836f4b8 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="f5939ab2-28b2-4d6b-a55f-a857f5c66c8c", @header={}>
D, [2015-01-01T19:08:11.535717 #10344] DEBUG -- :   [1m[36m (983.8ms)[0m  [1mcommit transaction[0m
I, [2015-01-01T19:08:11.566917 #10344]  INFO -- : about to approve url
I, [2015-01-01T19:08:12.240718 #10344]  INFO -- : #<Payment:0x0000000836f4b8 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"4940901378703"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000836e838 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007fb5c00 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007fb56b0 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007fafd28 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007faf238 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007f351b8 @base=#<Payment:0x0000000836f4b8 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="f5939ab2-28b2-4d6b-a55f-a857f5c66c8c", @header={}>
I, [2015-01-01T19:08:12.271918 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T19:08:12.318718 #10344]  INFO -- : Completed 302 Found in 13210ms (ActiveRecord: 1047.2ms)
D, [2015-01-01T19:08:12.396718 #10344] DEBUG -- : 
D, [2015-01-01T19:08:12.412319 #10344] DEBUG -- : 
I, [2015-01-01T19:08:12.443519 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 19:08:12 +0000
I, [2015-01-01T19:08:12.521519 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T19:08:12.583919 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:08:12.677519 #10344] DEBUG -- :   [1m[36mProduct Load (15.6ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-01T19:08:12.755519 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (0.0ms)
I, [2015-01-01T19:08:12.802319 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (140.4ms)
D, [2015-01-01T19:08:12.989520 #10344] DEBUG -- :   [1m[35mLineItem Exists (0.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T19:08:13.098720 #10344] DEBUG -- :   [1m[36mLineItem Load (15.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T19:08:13.145520 #10344]  INFO -- :   Rendered collection (15.6ms)
I, [2015-01-01T19:08:13.239120 #10344]  INFO -- :   Rendered carts/_cart.html.erb (187.2ms)
I, [2015-01-01T19:08:13.317120 #10344]  INFO -- : Completed 200 OK in 733ms (Views: 624.0ms | ActiveRecord: 31.2ms)
D, [2015-01-01T19:08:46.363616 #10344] DEBUG -- : 
D, [2015-01-01T19:08:46.394816 #10344] DEBUG -- : 
I, [2015-01-01T19:08:46.441616 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 19:08:46 +0000
I, [2015-01-01T19:08:48.929030 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:08:48.991430 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T19:08:49.131830 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:08:49.381430 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-01T19:08:49.662231 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T19:08:49.958631 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T19:08:50.036632 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T19:08:50.223832 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 19:08:50 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:8142f50,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 19:08:50 UTC +00:00]]
D, [2015-01-01T19:08:50.473432 #10344] DEBUG -- :   [1m[35m (218.4ms)[0m  commit transaction
D, [2015-01-01T19:08:50.598233 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T19:08:50.692833 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (16.6ms)
I, [2015-01-01T19:08:50.798434 #10344]  INFO -- :   Rendered carts/_cart.html.erb (247.0ms)
I, [2015-01-01T19:08:50.846234 #10344]  INFO -- :   Rendered line_items/create.js.erb (293.8ms)
I, [2015-01-01T19:08:50.893034 #10344]  INFO -- : Completed 200 OK in 1855ms (Views: 372.8ms | ActiveRecord: 249.6ms)
D, [2015-01-01T19:08:50.939834 #10344] DEBUG -- : 
D, [2015-01-01T19:08:50.963434 #10344] DEBUG -- : 
I, [2015-01-01T19:08:51.019438 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 19:08:50 +0000
I, [2015-01-01T19:08:51.136444 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:08:51.201448 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T19:08:51.276452 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:08:51.351457 #10344] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-01T19:08:51.446462 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T19:08:51.541467 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T19:08:51.583470 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-01T19:08:51.776481 #10344] DEBUG -- :   [1m[36mSQL (10.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 19:08:51 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:48a1e58,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 19:08:51 UTC +00:00]]
D, [2015-01-01T19:08:52.032496 #10344] DEBUG -- :   [1m[35m (213.0ms)[0m  commit transaction
D, [2015-01-01T19:08:52.172896 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-01T19:08:52.282096 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-01T19:08:52.360096 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (124.8ms)
I, [2015-01-01T19:08:52.438096 #10344]  INFO -- :   Rendered carts/_cart.html.erb (312.0ms)
I, [2015-01-01T19:08:52.484896 #10344]  INFO -- :   Rendered line_items/create.js.erb (390.0ms)
I, [2015-01-01T19:08:52.531696 #10344]  INFO -- : Completed 200 OK in 1281ms (Views: 452.4ms | ActiveRecord: 232.0ms)
D, [2015-01-01T19:08:54.775760 #10344] DEBUG -- : 
D, [2015-01-01T19:08:54.806960 #10344] DEBUG -- : 
I, [2015-01-01T19:08:54.869360 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 19:08:54 +0000
I, [2015-01-01T19:08:55.056560 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T19:08:55.181361 #10344] DEBUG -- :   [1m[36mUser Load (15.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T19:08:55.384161 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T19:08:55.477761 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:08:55.649361 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T19:08:55.820962 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T19:09:02.436977 #10344] DEBUG -- :   [1m[36m (15.6ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:09:02.795777 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 01 Jan 2015 19:09:02 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 19:09:02 UTC +00:00]]
D, [2015-01-01T19:09:02.926578 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 59[0m  [["cart_id", nil], ["order_id", 53], ["updated_at", Thu, 01 Jan 2015 19:09:02 UTC +00:00]]
D, [2015-01-01T19:09:03.035778 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 60  [["cart_id", nil], ["order_id", 53], ["updated_at", Thu, 01 Jan 2015 19:09:02 UTC +00:00]]
I, [2015-01-01T19:09:03.066978 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T19:09:21.512612 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T19:09:21.606212 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-01T19:09:25.646619 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 53]]
W, [2015-01-01T19:11:24.445867 #10344]  WARN -- : undefined method `transctions' for #<Payment:0x00000009ed6a30>
I, [2015-01-01T19:11:24.477067 #10344]  INFO -- : in payment.create
I, [2015-01-01T19:11:24.648667 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}]}
I, [2015-01-01T19:11:25.210268 #10344]  INFO -- : #<ActiveModel::Errors:0x00000005c518e0 @base=#<Payment:0x00000009ed6a30 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009ed5c70 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009511b58 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000095112c0 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000094bbeb0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000094bb1b8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005c518e0 ...>>, @messages={}>
I, [2015-01-01T19:11:25.241468 #10344]  INFO -- : got past invalid
I, [2015-01-01T19:11:25.319468 #10344]  INFO -- : PayPal-Request-Id: eeb938aa-568a-4f58-a241-93074d45fe55
I, [2015-01-01T19:11:25.366268 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T19:11:26.334470 #10344]  INFO -- : Response[400]: Bad Request, Duration: 0.937s
I, [2015-01-01T19:11:26.381270 #10344]  INFO -- :  in error=
I, [2015-01-01T19:11:26.396870 #10344]  INFO -- :  in error=
I, [2015-01-01T19:11:26.428070 #10344]  INFO -- : back from super
I, [2015-01-01T19:11:26.568470 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}]}
I, [2015-01-01T19:11:28.580874 #10344]  INFO -- : @payment save just done
I, [2015-01-01T19:11:29.282875 #10344]  INFO -- : #<Payment:0x00000009ed6a30 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"992f5377ab66c"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009ed5c70 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009511b58 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000095112c0 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000094bbeb0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000094bb1b8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005c518e0 @base=#<Payment:0x00000009ed6a30 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="eeb938aa-568a-4f58-a241-93074d45fe55", @header={}>
I, [2015-01-01T19:11:29.875676 #10344]  INFO -- : #<Payment:0x00000009ed6a30 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"992f5377ab66c"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009ed5c70 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009511b58 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000095112c0 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000094bbeb0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000094bb1b8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005c518e0 @base=#<Payment:0x00000009ed6a30 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="eeb938aa-568a-4f58-a241-93074d45fe55", @header={}>
D, [2015-01-01T19:11:30.047276 #10344] DEBUG -- :   [1m[35m (156.0ms)[0m  commit transaction
I, [2015-01-01T19:11:30.078476 #10344]  INFO -- : about to approve url
I, [2015-01-01T19:11:30.626477 #10344]  INFO -- : #<Payment:0x00000009ed6a30 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"992f5377ab66c"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009ed5c70 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009511b58 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000095112c0 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000094bbeb0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000094bb1b8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005c518e0 @base=#<Payment:0x00000009ed6a30 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="eeb938aa-568a-4f58-a241-93074d45fe55", @header={}>
I, [2015-01-01T19:11:30.657678 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T19:11:30.688878 #10344]  INFO -- : Completed 302 Found in 155601ms (ActiveRecord: 218.4ms)
D, [2015-01-01T19:11:30.813678 #10344] DEBUG -- : 
D, [2015-01-01T19:11:30.829278 #10344] DEBUG -- : 
I, [2015-01-01T19:11:30.860478 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 19:11:30 +0000
I, [2015-01-01T19:11:33.481282 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T19:11:33.623683 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:11:33.888883 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T19:11:34.138484 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (0.0ms)
I, [2015-01-01T19:11:34.202884 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (343.2ms)
D, [2015-01-01T19:11:34.514884 #10344] DEBUG -- :   [1m[36mLineItem Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T19:11:34.624085 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T19:11:34.670885 #10344]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-01T19:11:34.780085 #10344]  INFO -- :   Rendered carts/_cart.html.erb (202.8ms)
I, [2015-01-01T19:11:34.858085 #10344]  INFO -- : Completed 200 OK in 1314ms (Views: 969.2ms | ActiveRecord: 62.4ms)
D, [2015-01-01T19:11:37.609298 #10344] DEBUG -- : 
D, [2015-01-01T19:11:37.624898 #10344] DEBUG -- : 
I, [2015-01-01T19:11:37.687298 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 19:11:37 +0000
I, [2015-01-01T19:11:37.812098 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:11:37.874498 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T19:11:37.957900 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:11:38.051500 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-01T19:11:38.145100 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T19:11:38.459502 #10344] DEBUG -- :   [1m[35mProduct Load (15.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T19:11:38.506302 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:11:38.725702 #10344] DEBUG -- :   [1m[35mSQL (16.6ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 19:11:38 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:9d25768,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 19:11:38 UTC +00:00]]
D, [2015-01-01T19:11:38.954504 #10344] DEBUG -- :   [1m[36m (182.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T19:11:39.119505 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T19:11:39.244305 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T19:11:39.306705 #10344]  INFO -- :   Rendered carts/_cart.html.erb (234.0ms)
I, [2015-01-01T19:11:39.353505 #10344]  INFO -- :   Rendered line_items/create.js.erb (296.4ms)
I, [2015-01-01T19:11:39.400305 #10344]  INFO -- : Completed 200 OK in 1463ms (Views: 399.0ms | ActiveRecord: 214.2ms)
D, [2015-01-01T19:11:39.447105 #10344] DEBUG -- : 
D, [2015-01-01T19:11:39.478706 #10344] DEBUG -- : 
I, [2015-01-01T19:11:39.529709 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 19:11:39 +0000
I, [2015-01-01T19:11:39.645716 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:11:39.704719 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T19:11:39.787724 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:11:39.861728 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-01T19:11:39.959734 #10344] DEBUG -- :   [1m[36mLineItem Load (3.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T19:11:40.068740 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-01T19:11:40.118743 #10344] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:11:40.394759 #10344] DEBUG -- :   [1m[35mSQL (9.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 19:11:40 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:805dea0,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 19:11:40 UTC +00:00]]
D, [2015-01-01T19:11:40.682766 #10344] DEBUG -- :   [1m[36m (234.2ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T19:11:40.776367 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-01T19:11:40.869967 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-01T19:11:40.932367 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (93.6ms)
I, [2015-01-01T19:11:41.010367 #10344]  INFO -- :   Rendered carts/_cart.html.erb (265.2ms)
I, [2015-01-01T19:11:41.057167 #10344]  INFO -- :   Rendered line_items/create.js.erb (312.0ms)
I, [2015-01-01T19:11:41.103967 #10344]  INFO -- : Completed 200 OK in 1351ms (Views: 374.4ms | ActiveRecord: 254.2ms)
D, [2015-01-01T19:11:43.670631 #10344] DEBUG -- : 
D, [2015-01-01T19:11:43.701831 #10344] DEBUG -- : 
I, [2015-01-01T19:11:43.748631 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 19:11:43 +0000
I, [2015-01-01T19:11:43.951431 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T19:11:44.107432 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T19:11:44.341432 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T19:11:44.419432 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:11:44.639833 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T19:11:44.803833 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T19:11:49.237845 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T19:11:49.647446 #10344] DEBUG -- :   [1m[36mSQL (31.2ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 19:11:49 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 19:11:49 UTC +00:00]]
D, [2015-01-01T19:11:49.772246 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 61  [["cart_id", nil], ["order_id", 54], ["updated_at", Thu, 01 Jan 2015 19:11:49 UTC +00:00]]
D, [2015-01-01T19:11:49.881446 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 62[0m  [["cart_id", nil], ["order_id", 54], ["updated_at", Thu, 01 Jan 2015 19:11:49 UTC +00:00]]
I, [2015-01-01T19:11:49.897046 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T19:11:54.306254 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T19:11:54.431055 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T19:11:56.771059 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 54]]
W, [2015-01-01T19:11:56.817859 #10344]  WARN -- : undefined method `tranasctions' for #<Payment:0x00000005913430>
I, [2015-01-01T19:11:56.833459 #10344]  INFO -- : in payment.create
I, [2015-01-01T19:11:56.942659 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}]}
I, [2015-01-01T19:11:57.317060 #10344]  INFO -- : #<ActiveModel::Errors:0x0000000a111390 @base=#<Payment:0x00000005913430 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005911ab8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a2152f0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a214620 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a1e64a0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a1e4e70 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000a111390 ...>>, @messages={}>
I, [2015-01-01T19:11:57.332660 #10344]  INFO -- : got past invalid
I, [2015-01-01T19:11:57.410660 #10344]  INFO -- : PayPal-Request-Id: 6ae64151-c1f5-42e3-9844-2fa7360d1524
I, [2015-01-01T19:11:57.441860 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T19:11:58.398462 #10344]  INFO -- : Response[400]: Bad Request, Duration: 0.925s
I, [2015-01-01T19:11:58.414062 #10344]  INFO -- :  in error=
I, [2015-01-01T19:11:58.429662 #10344]  INFO -- :  in error=
I, [2015-01-01T19:11:58.460862 #10344]  INFO -- : back from super
I, [2015-01-01T19:11:58.554462 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}]}
I, [2015-01-01T19:13:52.817890 #10344]  INFO -- : @payment save just done
I, [2015-01-01T19:13:53.568691 #10344]  INFO -- : #<Payment:0x00000005913430 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"44537254b30a2"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005911ab8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a2152f0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a214620 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a1e64a0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a1e4e70 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000a111390 @base=#<Payment:0x00000005913430 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="6ae64151-c1f5-42e3-9844-2fa7360d1524", @header={}>
I, [2015-01-01T19:13:54.535893 #10344]  INFO -- : #<Payment:0x00000005913430 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"44537254b30a2"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005911ab8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a2152f0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a214620 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a1e64a0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a1e4e70 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000a111390 @base=#<Payment:0x00000005913430 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="6ae64151-c1f5-42e3-9844-2fa7360d1524", @header={}>
D, [2015-01-01T19:13:54.754293 #10344] DEBUG -- :   [1m[36m (140.4ms)[0m  [1mcommit transaction[0m
I, [2015-01-01T19:13:54.785493 #10344]  INFO -- : about to approve url
I, [2015-01-01T19:13:55.737095 #10344]  INFO -- : #<Payment:0x00000005913430 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"44537254b30a2"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005911ab8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a2152f0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a214620 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a1e64a0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a1e4e70 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000a111390 @base=#<Payment:0x00000005913430 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="6ae64151-c1f5-42e3-9844-2fa7360d1524", @header={}>
I, [2015-01-01T19:13:55.783895 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T19:13:55.846295 #10344]  INFO -- : Completed 302 Found in 131848ms (ActiveRecord: 202.8ms)
D, [2015-01-01T19:13:55.893095 #10344] DEBUG -- : 
D, [2015-01-01T19:13:55.924295 #10344] DEBUG -- : 
I, [2015-01-01T19:13:55.986695 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 19:13:55 +0000
I, [2015-01-01T19:13:58.715101 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T19:13:58.872101 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T19:13:59.043701 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T19:13:59.184102 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:13:59.527302 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T19:13:59.636502 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T19:14:01.434506 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T19:14:02.011707 #10344] DEBUG -- :   [1m[36mSQL (46.8ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 19:14:01 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 19:14:01 UTC +00:00]]
I, [2015-01-01T19:14:02.042907 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T19:14:06.309715 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 55]]
D, [2015-01-01T19:14:07.996518 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 55]]
W, [2015-01-01T19:25:26.143097 #10344]  WARN -- : undefined method `item_list' for #<PayPal::SDK::Core::API::DataTypes::ArrayWithBlock:0x00000008267bd8>
I, [2015-01-01T19:25:26.174297 #10344]  INFO -- : in payment.create
I, [2015-01-01T19:25:26.314697 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"0"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"0", "name"=>"Tee Shirts", "price"=>"0", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}]}
I, [2015-01-01T19:25:26.877298 #10344]  INFO -- : #<ActiveModel::Errors:0x00000006078180 @base=#<Payment:0x00000009520d60 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009513570 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008267638 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000008266fa8 @error=nil, @total="0", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008265bd0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008264c80 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="0", @currency="GBP", @quantity="0">]>, @description="King Clothing">, #<PayPal::SDK::REST::DataTypes::Transaction:0x000000062782c8 @error=nil, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000006278160 @error=nil>>, #<PayPal::SDK::REST::DataTypes::Transaction:0x0000000844d998 @error=nil, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000844d880 @error=nil>>], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000006078180 ...>>, @messages={}>
I, [2015-01-01T19:25:26.908498 #10344]  INFO -- : got past invalid
I, [2015-01-01T19:25:26.970898 #10344]  INFO -- : PayPal-Request-Id: f38193e4-e57d-4a7e-aadf-abbce387b913
I, [2015-01-01T19:25:27.017698 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T19:25:28.078500 #10344]  INFO -- : Response[400]: Bad Request, Duration: 1.030s
I, [2015-01-01T19:25:28.094100 #10344]  INFO -- :  in error=
I, [2015-01-01T19:25:28.109700 #10344]  INFO -- :  in error=
I, [2015-01-01T19:25:28.140900 #10344]  INFO -- : back from super
I, [2015-01-01T19:25:28.250100 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"0"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"0", "name"=>"Tee Shirts", "price"=>"0", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}]}
I, [2015-01-01T19:25:30.935305 #10344]  INFO -- : @payment save just done
I, [2015-01-01T19:25:31.795307 #10344]  INFO -- : #<Payment:0x00000009520d60 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions[0].item_list.items[0].quantity", "issue"=>"Must be a positive integer"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"6ccc601d7ea7c"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009513570 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008267638 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000008266fa8 @error=nil, @total="0", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008265bd0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008264c80 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="0", @currency="GBP", @quantity="0">]>, @description="King Clothing">, #<PayPal::SDK::REST::DataTypes::Transaction:0x000000062782c8 @error=nil, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000006278160 @error=nil>>, #<PayPal::SDK::REST::DataTypes::Transaction:0x0000000844d998 @error=nil, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000844d880 @error=nil>>], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000006078180 @base=#<Payment:0x00000009520d60 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :"transactions[0].item_list.items[0].quantity"=>["Must be a positive integer"]}>, @request_id="f38193e4-e57d-4a7e-aadf-abbce387b913", @header={}>
I, [2015-01-01T19:25:32.622108 #10344]  INFO -- : #<Payment:0x00000009520d60 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions[0].item_list.items[0].quantity", "issue"=>"Must be a positive integer"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"6ccc601d7ea7c"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009513570 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008267638 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000008266fa8 @error=nil, @total="0", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008265bd0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008264c80 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="0", @currency="GBP", @quantity="0">]>, @description="King Clothing">, #<PayPal::SDK::REST::DataTypes::Transaction:0x000000062782c8 @error=nil, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000006278160 @error=nil>>, #<PayPal::SDK::REST::DataTypes::Transaction:0x0000000844d998 @error=nil, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000844d880 @error=nil>>], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000006078180 @base=#<Payment:0x00000009520d60 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :"transactions[0].item_list.items[0].quantity"=>["Must be a positive integer"]}>, @request_id="f38193e4-e57d-4a7e-aadf-abbce387b913", @header={}>
D, [2015-01-01T19:25:32.824909 #10344] DEBUG -- :   [1m[35m (140.4ms)[0m  commit transaction
I, [2015-01-01T19:25:32.856109 #10344]  INFO -- : about to approve url
I, [2015-01-01T19:25:33.886710 #10344]  INFO -- : #<Payment:0x00000009520d60 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions[0].item_list.items[0].quantity", "issue"=>"Must be a positive integer"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"6ccc601d7ea7c"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009513570 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008267638 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000008266fa8 @error=nil, @total="0", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008265bd0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008264c80 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="0", @currency="GBP", @quantity="0">]>, @description="King Clothing">, #<PayPal::SDK::REST::DataTypes::Transaction:0x000000062782c8 @error=nil, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000006278160 @error=nil>>, #<PayPal::SDK::REST::DataTypes::Transaction:0x0000000844d998 @error=nil, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000844d880 @error=nil>>], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000006078180 @base=#<Payment:0x00000009520d60 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :"transactions[0].item_list.items[0].quantity"=>["Must be a positive integer"]}>, @request_id="f38193e4-e57d-4a7e-aadf-abbce387b913", @header={}>
I, [2015-01-01T19:25:33.933511 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T19:25:33.980311 #10344]  INFO -- : Completed 302 Found in 695218ms (ActiveRecord: 218.4ms)
D, [2015-01-01T19:25:34.058311 #10344] DEBUG -- : 
D, [2015-01-01T19:25:34.089511 #10344] DEBUG -- : 
I, [2015-01-01T19:25:34.136311 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 19:25:34 +0000
I, [2015-01-01T19:25:36.572915 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T19:25:36.683116 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:25:36.979516 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T19:25:37.229116 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (46.8ms)
I, [2015-01-01T19:25:37.275917 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (327.6ms)
D, [2015-01-01T19:25:37.650317 #10344] DEBUG -- :   [1m[36mLineItem Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T19:25:37.759517 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T19:25:37.775117 #10344]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-01T19:25:37.884318 #10344]  INFO -- :   Rendered carts/_cart.html.erb (156.0ms)
I, [2015-01-01T19:25:37.946718 #10344]  INFO -- : Completed 200 OK in 1327ms (Views: 1060.8ms | ActiveRecord: 15.6ms)
D, [2015-01-01T19:25:55.273955 #10344] DEBUG -- : 
D, [2015-01-01T19:25:55.305156 #10344] DEBUG -- : 
I, [2015-01-01T19:25:55.367556 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 19:25:55 +0000
I, [2015-01-01T19:25:55.539156 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:25:55.617156 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T19:25:55.725158 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:25:55.808559 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-01T19:25:55.933359 #10344] DEBUG -- :   [1m[36mLineItem Load (15.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T19:25:56.207560 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T19:25:56.270361 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:25:56.478162 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 19:25:56 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7f35d48,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 19:25:56 UTC +00:00]]
D, [2015-01-01T19:25:56.634162 #10344] DEBUG -- :   [1m[36m (93.6ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T19:25:56.759963 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T19:25:56.868965 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T19:25:56.939766 #10344]  INFO -- :   Rendered carts/_cart.html.erb (227.6ms)
I, [2015-01-01T19:25:56.970966 #10344]  INFO -- :   Rendered line_items/create.js.erb (274.4ms)
I, [2015-01-01T19:25:57.064566 #10344]  INFO -- : Completed 200 OK in 1401ms (Views: 368.0ms | ActiveRecord: 124.8ms)
D, [2015-01-01T19:25:57.150369 #10344] DEBUG -- : 
D, [2015-01-01T19:25:57.172370 #10344] DEBUG -- : 
I, [2015-01-01T19:25:57.218372 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 19:25:57 +0000
I, [2015-01-01T19:25:57.338379 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:25:57.402383 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T19:25:57.486388 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:25:57.566392 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-01T19:25:57.677399 #10344] DEBUG -- :   [1m[36mLineItem Load (3.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T19:25:57.781405 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-01T19:25:57.827407 #10344] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:25:58.030419 #10344] DEBUG -- :   [1m[35mSQL (10.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 19:25:57 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:4b27600,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 19:25:57 UTC +00:00]]
D, [2015-01-01T19:25:58.158426 #10344] DEBUG -- :   [1m[36m (95.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T19:25:58.283226 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-01T19:25:58.423627 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-01T19:25:58.486027 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (140.4ms)
I, [2015-01-01T19:25:58.579627 #10344]  INFO -- :   Rendered carts/_cart.html.erb (343.2ms)
I, [2015-01-01T19:25:58.626427 #10344]  INFO -- :   Rendered line_items/create.js.erb (405.6ms)
I, [2015-01-01T19:25:58.688827 #10344]  INFO -- : Completed 200 OK in 1238ms (Views: 452.4ms | ActiveRecord: 115.0ms)
D, [2015-01-01T19:26:00.224488 #10344] DEBUG -- : 
D, [2015-01-01T19:26:00.240088 #10344] DEBUG -- : 
I, [2015-01-01T19:26:00.286888 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 19:26:00 +0000
I, [2015-01-01T19:26:00.442889 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T19:26:00.567689 #10344] DEBUG -- :   [1m[35mUser Load (15.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T19:26:00.754889 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T19:26:00.832889 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:26:01.004489 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T19:26:01.144890 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T19:26:09.687510 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T19:26:10.000511 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 19:26:09 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 19:26:09 UTC +00:00]]
D, [2015-01-01T19:26:10.140911 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 63  [["cart_id", nil], ["order_id", 56], ["updated_at", Thu, 01 Jan 2015 19:26:10 UTC +00:00]]
D, [2015-01-01T19:26:10.265711 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 64[0m  [["cart_id", nil], ["order_id", 56], ["updated_at", Thu, 01 Jan 2015 19:26:10 UTC +00:00]]
I, [2015-01-01T19:26:10.312511 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T19:26:13.403317 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T19:26:13.496917 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T19:26:15.634121 #10344] DEBUG -- :   [1m[35m (15.6ms)[0m  SELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 56]]
D, [2015-01-01T19:26:15.712121 #10344] DEBUG -- :   [1m[36m (15.6ms)[0m  [1mrollback transaction[0m
I, [2015-01-01T19:26:15.758921 #10344]  INFO -- : Completed 500 Internal Server Error in 15269ms
F, [2015-01-01T19:26:15.961721 #10344] FATAL -- : 
NameError (undefined local variable or method `quantity' for #<Payment:0x000000059e4a30>):
  app/models/payment.rb:53:in `order='
  app/models/order.rb:41:in `new'
  app/models/order.rb:41:in `create_payment'
  app/controllers/orders_controller.rb:155:in `ppcheckout'


I, [2015-01-01T19:26:16.429722 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (0.0ms)
I, [2015-01-01T19:26:16.587723 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (17.6ms)
I, [2015-01-01T19:26:16.743723 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (15.6ms)
I, [2015-01-01T19:26:16.837323 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (454.4ms)
D, [2015-01-01T19:26:16.970727 #10344] DEBUG -- : 
D, [2015-01-01T19:26:16.987728 #10344] DEBUG -- : 
I, [2015-01-01T19:26:17.034731 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 19:26:16 +0000
I, [2015-01-01T19:26:17.143737 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T19:26:17.210741 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T19:26:17.279745 #10344] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T19:26:17.346749 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:26:17.437754 #10344] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T19:26:17.553761 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T19:28:00.321639 #10344] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2015-01-01T19:28:00.433645 #10344] DEBUG -- :   [1m[36mSQL (7.0ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 19:28:00 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 19:28:00 UTC +00:00]]
D, [2015-01-01T19:28:00.556652 #10344] DEBUG -- :   [1m[35mSQL (4.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 63  [["cart_id", nil], ["order_id", 56], ["updated_at", Thu, 01 Jan 2015 19:28:00 UTC +00:00]]
D, [2015-01-01T19:28:00.679659 #10344] DEBUG -- :   [1m[36mSQL (3.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 64[0m  [["cart_id", nil], ["order_id", 56], ["updated_at", Thu, 01 Jan 2015 19:28:00 UTC +00:00]]
I, [2015-01-01T19:28:00.711661 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T19:28:01.583711 #10344] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T19:28:01.672716 #10344] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T19:28:02.580768 #10344] DEBUG -- :   [1m[35m (2.0ms)[0m  SELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 56]]
D, [2015-01-01T19:28:02.629771 #10344] DEBUG -- :   [1m[36m (13.0ms)[0m  [1mrollback transaction[0m
I, [2015-01-01T19:28:02.666773 #10344]  INFO -- : Completed 500 Internal Server Error in 105489ms
F, [2015-01-01T19:28:02.803781 #10344] FATAL -- : 
NameError (undefined local variable or method `quantity' for #<Payment:0x0000000592cfe8>):
  app/models/payment.rb:53:in `order='
  app/models/order.rb:41:in `new'
  app/models/order.rb:41:in `create_payment'
  app/controllers/orders_controller.rb:155:in `ppcheckout'


I, [2015-01-01T19:28:03.108798 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (12.0ms)
I, [2015-01-01T19:28:03.234805 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (16.0ms)
I, [2015-01-01T19:28:03.361812 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (11.0ms)
I, [2015-01-01T19:28:03.444817 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (379.0ms)
D, [2015-01-01T19:28:03.501820 #10344] DEBUG -- : 
D, [2015-01-01T19:28:03.524822 #10344] DEBUG -- : 
I, [2015-01-01T19:28:03.575825 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 19:28:03 +0000
I, [2015-01-01T19:28:05.967250 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T19:28:06.107650 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T19:28:06.280250 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T19:28:06.405051 #10344] DEBUG -- :   [1m[35mCart Load (15.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:28:06.685851 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T19:28:06.998852 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T19:28:17.714273 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T19:28:18.057474 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 19:28:17 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 19:28:17 UTC +00:00]]
D, [2015-01-01T19:28:18.197874 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 63  [["cart_id", nil], ["order_id", 56], ["updated_at", Thu, 01 Jan 2015 19:28:18 UTC +00:00]]
D, [2015-01-01T19:28:18.338274 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 64[0m  [["cart_id", nil], ["order_id", 56], ["updated_at", Thu, 01 Jan 2015 19:28:18 UTC +00:00]]
I, [2015-01-01T19:28:18.369474 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T19:28:19.368876 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T19:28:19.587276 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T19:28:20.304878 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 56]]
I, [2015-01-01T19:28:21.305279 #10344]  INFO -- : in order=
I, [2015-01-01T19:28:21.336479 #10344]  INFO -- : in payment.create
I, [2015-01-01T19:28:21.554880 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/56/confirm", "cancel_url"=>"http://localhost:3000/orders/56/cancel"}}
I, [2015-01-01T19:28:22.178881 #10344]  INFO -- : #<ActiveModel::Errors:0x00000005a2c470 @base=#<Payment:0x000000085961d8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008595580 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005cced40 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005ccdb98 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000005cc65f0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005cc53d0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000005b12150 @error=nil, @return_url="http://localhost:3000/orders/56/confirm", @cancel_url="http://localhost:3000/orders/56/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005a2c470 ...>>, @messages={}>
I, [2015-01-01T19:28:22.210081 #10344]  INFO -- : got past invalid
I, [2015-01-01T19:28:22.288081 #10344]  INFO -- : PayPal-Request-Id: 330a683f-fda9-4ac8-b222-9465fb55b65b
I, [2015-01-01T19:28:22.319281 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T19:28:23.258283 #10344]  INFO -- : Response[400]: Bad Request, Duration: 0.892s
I, [2015-01-01T19:28:23.289483 #10344]  INFO -- : back from super
I, [2015-01-01T19:28:23.570284 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/56/confirm", "cancel_url"=>"http://localhost:3000/orders/56/cancel"}}
I, [2015-01-01T19:28:24.023684 #10344]  INFO -- : @payment save just done
I, [2015-01-01T19:28:24.902286 #10344]  INFO -- : #<Payment:0x000000085961d8 @error={"name"=>"MALFORMED_REQUEST", "message"=>"Incoming JSON request does not map to API request", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#MALFORMED_REQUEST", "debug_id"=>"c9916333a340b"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008595580 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005cced40 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005ccdb98 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000005cc65f0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005cc53d0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000005b12150 @error=nil, @return_url="http://localhost:3000/orders/56/confirm", @cancel_url="http://localhost:3000/orders/56/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005a2c470 @base=#<Payment:0x000000085961d8 ...>, @messages={}>, @request_id="330a683f-fda9-4ac8-b222-9465fb55b65b", @header={}>
I, [2015-01-01T19:28:25.635487 #10344]  INFO -- : #<Payment:0x000000085961d8 @error={"name"=>"MALFORMED_REQUEST", "message"=>"Incoming JSON request does not map to API request", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#MALFORMED_REQUEST", "debug_id"=>"c9916333a340b"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008595580 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005cced40 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005ccdb98 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000005cc65f0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005cc53d0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000005b12150 @error=nil, @return_url="http://localhost:3000/orders/56/confirm", @cancel_url="http://localhost:3000/orders/56/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005a2c470 @base=#<Payment:0x000000085961d8 ...>, @messages={}>, @request_id="330a683f-fda9-4ac8-b222-9465fb55b65b", @header={}>
D, [2015-01-01T19:28:25.775888 #10344] DEBUG -- :   [1m[36m (93.6ms)[0m  [1mcommit transaction[0m
I, [2015-01-01T19:28:25.807088 #10344]  INFO -- : about to approve url
I, [2015-01-01T19:28:26.446689 #10344]  INFO -- : #<Payment:0x000000085961d8 @error={"name"=>"MALFORMED_REQUEST", "message"=>"Incoming JSON request does not map to API request", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#MALFORMED_REQUEST", "debug_id"=>"c9916333a340b"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008595580 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005cced40 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005ccdb98 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000005cc65f0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005cc53d0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000005b12150 @error=nil, @return_url="http://localhost:3000/orders/56/confirm", @cancel_url="http://localhost:3000/orders/56/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005a2c470 @base=#<Payment:0x000000085961d8 ...>, @messages={}>, @request_id="330a683f-fda9-4ac8-b222-9465fb55b65b", @header={}>
I, [2015-01-01T19:28:26.477889 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T19:28:26.540289 #10344]  INFO -- : Completed 302 Found in 20526ms (ActiveRecord: 171.6ms)
D, [2015-01-01T19:28:38.254948 #10344] DEBUG -- : 
D, [2015-01-01T19:28:38.278549 #10344] DEBUG -- : 
I, [2015-01-01T19:28:38.327552 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 19:28:38 +0000
I, [2015-01-01T19:28:38.467560 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T19:28:38.561565 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:28:38.681572 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-01T19:28:38.775577 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (5.0ms)
I, [2015-01-01T19:28:38.830580 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (182.0ms)
D, [2015-01-01T19:28:39.093595 #10344] DEBUG -- :   [1m[35mLineItem Exists (2.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T19:28:39.201602 #10344] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T19:28:39.244604 #10344]  INFO -- :   Rendered collection (1.0ms)
I, [2015-01-01T19:28:39.369611 #10344]  INFO -- :   Rendered carts/_cart.html.erb (220.0ms)
I, [2015-01-01T19:28:39.452616 #10344]  INFO -- : Completed 200 OK in 931ms (Views: 822.0ms | ActiveRecord: 8.0ms)
D, [2015-01-01T19:28:39.624626 #10344] DEBUG -- : 
D, [2015-01-01T19:28:39.731632 #10344] DEBUG -- : 
I, [2015-01-01T19:28:39.802636 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 19:28:39 +0000
D, [2015-01-01T19:28:39.888641 #10344] DEBUG -- : 
D, [2015-01-01T19:28:39.912642 #10344] DEBUG -- : 
I, [2015-01-01T19:28:39.979646 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 19:28:39 +0000
D, [2015-01-01T19:28:40.058651 #10344] DEBUG -- : 
D, [2015-01-01T19:28:40.082652 #10344] DEBUG -- : 
I, [2015-01-01T19:28:40.145656 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 19:28:40 +0000
D, [2015-01-01T19:28:40.223660 #10344] DEBUG -- : 
D, [2015-01-01T19:28:40.252662 #10344] DEBUG -- : 
I, [2015-01-01T19:28:40.322666 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 19:28:40 +0000
D, [2015-01-01T19:28:40.398670 #10344] DEBUG -- : 
D, [2015-01-01T19:28:40.422671 #10344] DEBUG -- : 
I, [2015-01-01T19:28:40.483675 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 19:28:40 +0000
D, [2015-01-01T19:28:40.560679 #10344] DEBUG -- : 
D, [2015-01-01T19:28:40.587681 #10344] DEBUG -- : 
I, [2015-01-01T19:28:40.657685 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 19:28:40 +0000
D, [2015-01-01T19:28:40.732689 #10344] DEBUG -- : 
D, [2015-01-01T19:28:40.757691 #10344] DEBUG -- : 
I, [2015-01-01T19:28:40.821694 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 19:28:40 +0000
D, [2015-01-01T19:28:40.903699 #10344] DEBUG -- : 
D, [2015-01-01T19:28:40.928700 #10344] DEBUG -- : 
I, [2015-01-01T19:28:40.992704 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 19:28:40 +0000
D, [2015-01-01T19:28:41.067708 #10344] DEBUG -- : 
D, [2015-01-01T19:28:41.089710 #10344] DEBUG -- : 
I, [2015-01-01T19:28:41.154713 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 19:28:41 +0000
D, [2015-01-01T19:28:41.245719 #10344] DEBUG -- : 
D, [2015-01-01T19:28:41.271720 #10344] DEBUG -- : 
I, [2015-01-01T19:28:41.338724 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 19:28:41 +0000
D, [2015-01-01T19:28:41.413728 #10344] DEBUG -- : 
D, [2015-01-01T19:28:41.437730 #10344] DEBUG -- : 
I, [2015-01-01T19:28:41.504733 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 19:28:41 +0000
D, [2015-01-01T19:28:41.584738 #10344] DEBUG -- : 
D, [2015-01-01T19:28:41.613740 #10344] DEBUG -- : 
I, [2015-01-01T19:28:41.682744 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 19:28:41 +0000
D, [2015-01-01T19:28:41.756748 #10344] DEBUG -- : 
D, [2015-01-01T19:28:41.783749 #10344] DEBUG -- : 
I, [2015-01-01T19:28:41.839753 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 19:28:41 +0000
D, [2015-01-01T19:28:41.922757 #10344] DEBUG -- : 
D, [2015-01-01T19:28:41.943758 #10344] DEBUG -- : 
I, [2015-01-01T19:28:42.001762 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 19:28:41 +0000
D, [2015-01-01T19:28:42.078766 #10344] DEBUG -- : 
D, [2015-01-01T19:28:42.101768 #10344] DEBUG -- : 
I, [2015-01-01T19:28:42.165771 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 19:28:42 +0000
D, [2015-01-01T19:28:42.235775 #10344] DEBUG -- : 
D, [2015-01-01T19:28:42.270777 #10344] DEBUG -- : 
I, [2015-01-01T19:28:42.336781 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 19:28:42 +0000
D, [2015-01-01T19:28:42.415785 #10344] DEBUG -- : 
D, [2015-01-01T19:28:42.438787 #10344] DEBUG -- : 
I, [2015-01-01T19:28:42.494790 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 19:28:42 +0000
D, [2015-01-01T19:28:42.569794 #10344] DEBUG -- : 
D, [2015-01-01T19:28:42.597796 #10344] DEBUG -- : 
I, [2015-01-01T19:28:42.667800 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 19:28:42 +0000
D, [2015-01-01T19:28:42.742804 #10344] DEBUG -- : 
D, [2015-01-01T19:28:42.766806 #10344] DEBUG -- : 
I, [2015-01-01T19:28:42.830809 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 19:28:42 +0000
D, [2015-01-01T19:28:42.911814 #10344] DEBUG -- : 
D, [2015-01-01T19:28:42.936815 #10344] DEBUG -- : 
I, [2015-01-01T19:28:42.999819 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 19:28:42 +0000
D, [2015-01-01T19:28:43.073823 #10344] DEBUG -- : 
D, [2015-01-01T19:28:43.098825 #10344] DEBUG -- : 
I, [2015-01-01T19:28:43.163828 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 19:28:43 +0000
D, [2015-01-01T19:28:43.249833 #10344] DEBUG -- : 
D, [2015-01-01T19:28:43.276835 #10344] DEBUG -- : 
I, [2015-01-01T19:28:43.343839 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 19:28:43 +0000
D, [2015-01-01T19:28:43.419843 #10344] DEBUG -- : 
D, [2015-01-01T19:28:43.443844 #10344] DEBUG -- : 
I, [2015-01-01T19:28:43.506848 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 19:28:43 +0000
D, [2015-01-01T19:28:43.584852 #10344] DEBUG -- : 
D, [2015-01-01T19:28:43.611854 #10344] DEBUG -- : 
I, [2015-01-01T19:28:43.678858 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 19:28:43 +0000
D, [2015-01-01T19:28:43.751862 #10344] DEBUG -- : 
D, [2015-01-01T19:28:43.774863 #10344] DEBUG -- : 
I, [2015-01-01T19:28:43.835867 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 19:28:43 +0000
D, [2015-01-01T19:28:43.918871 #10344] DEBUG -- : 
D, [2015-01-01T19:28:43.944873 #10344] DEBUG -- : 
I, [2015-01-01T19:28:44.007877 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 19:28:43 +0000
D, [2015-01-01T19:28:44.100882 #10344] DEBUG -- : 
D, [2015-01-01T19:28:44.124883 #10344] DEBUG -- : 
I, [2015-01-01T19:28:44.183887 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 19:28:44 +0000
D, [2015-01-01T19:28:44.257891 #10344] DEBUG -- : 
D, [2015-01-01T19:28:44.278892 #10344] DEBUG -- : 
I, [2015-01-01T19:28:44.352896 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 19:28:44 +0000
D, [2015-01-01T19:28:44.435901 #10344] DEBUG -- : 
D, [2015-01-01T19:28:44.462903 #10344] DEBUG -- : 
I, [2015-01-01T19:28:44.521906 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 19:28:44 +0000
D, [2015-01-01T19:28:47.250971 #10344] DEBUG -- : 
D, [2015-01-01T19:28:47.282171 #10344] DEBUG -- : 
I, [2015-01-01T19:28:47.360171 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 19:28:47 +0000
I, [2015-01-01T19:28:47.516573 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:28:47.594573 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T19:28:47.688173 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:28:47.797373 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-01T19:28:47.922173 #10344] DEBUG -- :   [1m[35mLineItem Load (15.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T19:28:48.062974 #10344] DEBUG -- :   [1m[36mProduct Load (18.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T19:28:48.109774 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T19:28:48.362375 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 19:28:48 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:962d438,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 19:28:48 UTC +00:00]]
D, [2015-01-01T19:28:48.516578 #10344] DEBUG -- :   [1m[35m (93.0ms)[0m  commit transaction
D, [2015-01-01T19:28:48.656978 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T19:28:48.750578 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T19:28:48.844178 #10344]  INFO -- :   Rendered carts/_cart.html.erb (234.0ms)
I, [2015-01-01T19:28:48.907579 #10344]  INFO -- :   Rendered line_items/create.js.erb (312.0ms)
I, [2015-01-01T19:28:48.965379 #10344]  INFO -- : Completed 200 OK in 1317ms (Views: 392.0ms | ActiveRecord: 142.8ms)
D, [2015-01-01T19:28:49.012179 #10344] DEBUG -- : 
D, [2015-01-01T19:28:49.027779 #10344] DEBUG -- : 
I, [2015-01-01T19:28:49.096382 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 19:28:49 +0000
I, [2015-01-01T19:28:49.226390 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:28:49.288393 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T19:28:49.375398 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:28:49.460403 #10344] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-01T19:28:49.574410 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T19:28:49.687416 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T19:28:49.735419 #10344] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2015-01-01T19:28:49.964432 #10344] DEBUG -- :   [1m[36mSQL (9.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 19:28:49 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:5719788,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 19:28:49 UTC +00:00]]
D, [2015-01-01T19:28:50.108440 #10344] DEBUG -- :   [1m[35m (96.0ms)[0m  commit transaction
D, [2015-01-01T19:28:50.227641 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-01T19:28:50.383641 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-01T19:28:50.462642 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (157.0ms)
I, [2015-01-01T19:28:50.556242 #10344]  INFO -- :   Rendered carts/_cart.html.erb (359.8ms)
I, [2015-01-01T19:28:50.605042 #10344]  INFO -- :   Rendered line_items/create.js.erb (422.2ms)
I, [2015-01-01T19:28:50.651842 #10344]  INFO -- : Completed 200 OK in 1315ms (Views: 491.6ms | ActiveRecord: 117.0ms)
D, [2015-01-01T19:28:52.044103 #10344] DEBUG -- : 
D, [2015-01-01T19:28:52.075303 #10344] DEBUG -- : 
I, [2015-01-01T19:28:52.137703 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 19:28:52 +0000
I, [2015-01-01T19:28:52.262503 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T19:28:52.356103 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T19:28:52.434103 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T19:28:52.527703 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:28:52.636904 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T19:28:52.777304 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T19:29:03.440326 #10344] DEBUG -- :   [1m[36m (15.6ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:29:03.549526 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 01 Jan 2015 19:29:03 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 19:29:03 UTC +00:00]]
D, [2015-01-01T19:29:03.658726 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 65[0m  [["cart_id", nil], ["order_id", 57], ["updated_at", Thu, 01 Jan 2015 19:29:03 UTC +00:00]]
D, [2015-01-01T19:29:03.799126 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 66  [["cart_id", nil], ["order_id", 57], ["updated_at", Thu, 01 Jan 2015 19:29:03 UTC +00:00]]
I, [2015-01-01T19:29:03.830326 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T19:29:05.360129 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T19:29:05.454729 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-01T19:29:06.734931 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 57]]
I, [2015-01-01T19:29:30.897175 #10344]  INFO -- : in order=
I, [2015-01-01T19:29:30.912775 #10344]  INFO -- : in payment.create
I, [2015-01-01T19:29:31.146776 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/57/confirm", "cancel_url"=>"http://localhost:3000/orders/57/cancel"}}
I, [2015-01-01T19:29:31.755177 #10344]  INFO -- : #<ActiveModel::Errors:0x000000080c75d0 @base=#<Payment:0x00000009ccb088 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009cca2c8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000096ade58 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000096ad750 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000096a7da0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000096a6f18 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008142230 @error=nil, @return_url="http://localhost:3000/orders/57/confirm", @cancel_url="http://localhost:3000/orders/57/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000080c75d0 ...>>, @messages={}>
I, [2015-01-01T19:29:31.786377 #10344]  INFO -- : got past invalid
I, [2015-01-01T19:29:31.879977 #10344]  INFO -- : PayPal-Request-Id: dd8fa366-7aee-4fc0-8da4-7c4285066f5c
I, [2015-01-01T19:29:31.927777 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T19:29:32.881379 #10344]  INFO -- : Response[400]: Bad Request, Duration: 0.922s
I, [2015-01-01T19:29:32.896979 #10344]  INFO -- : back from super
I, [2015-01-01T19:29:33.068579 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/57/confirm", "cancel_url"=>"http://localhost:3000/orders/57/cancel"}}
I, [2015-01-01T19:29:35.257583 #10344]  INFO -- : @payment save just done
I, [2015-01-01T19:29:36.054185 #10344]  INFO -- : #<Payment:0x00000009ccb088 @error={"name"=>"MALFORMED_REQUEST", "message"=>"Incoming JSON request does not map to API request", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#MALFORMED_REQUEST", "debug_id"=>"425ecbafb2ee2"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009cca2c8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000096ade58 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000096ad750 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000096a7da0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000096a6f18 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008142230 @error=nil, @return_url="http://localhost:3000/orders/57/confirm", @cancel_url="http://localhost:3000/orders/57/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000080c75d0 @base=#<Payment:0x00000009ccb088 ...>, @messages={}>, @request_id="dd8fa366-7aee-4fc0-8da4-7c4285066f5c", @header={}>
I, [2015-01-01T19:29:36.787386 #10344]  INFO -- : #<Payment:0x00000009ccb088 @error={"name"=>"MALFORMED_REQUEST", "message"=>"Incoming JSON request does not map to API request", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#MALFORMED_REQUEST", "debug_id"=>"425ecbafb2ee2"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009cca2c8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000096ade58 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000096ad750 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000096a7da0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000096a6f18 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008142230 @error=nil, @return_url="http://localhost:3000/orders/57/confirm", @cancel_url="http://localhost:3000/orders/57/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000080c75d0 @base=#<Payment:0x00000009ccb088 ...>, @messages={}>, @request_id="dd8fa366-7aee-4fc0-8da4-7c4285066f5c", @header={}>
D, [2015-01-01T19:29:36.943386 #10344] DEBUG -- :   [1m[35m (124.8ms)[0m  commit transaction
I, [2015-01-01T19:29:36.974586 #10344]  INFO -- : about to approve url
I, [2015-01-01T19:29:37.660987 #10344]  INFO -- : #<Payment:0x00000009ccb088 @error={"name"=>"MALFORMED_REQUEST", "message"=>"Incoming JSON request does not map to API request", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#MALFORMED_REQUEST", "debug_id"=>"425ecbafb2ee2"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009cca2c8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000096ade58 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000096ad750 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000096a7da0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000096a6f18 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008142230 @error=nil, @return_url="http://localhost:3000/orders/57/confirm", @cancel_url="http://localhost:3000/orders/57/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000080c75d0 @base=#<Payment:0x00000009ccb088 ...>, @messages={}>, @request_id="dd8fa366-7aee-4fc0-8da4-7c4285066f5c", @header={}>
I, [2015-01-01T19:29:37.692188 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T19:29:37.738988 #10344]  INFO -- : Completed 302 Found in 45430ms (ActiveRecord: 156.0ms)
D, [2015-01-01T19:29:37.816988 #10344] DEBUG -- : 
D, [2015-01-01T19:29:37.848188 #10344] DEBUG -- : 
I, [2015-01-01T19:29:37.894988 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 19:29:37 +0000
I, [2015-01-01T19:29:38.004188 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T19:29:38.100788 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:29:38.194389 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T19:29:38.272389 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (0.0ms)
I, [2015-01-01T19:29:38.334789 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (140.4ms)
D, [2015-01-01T19:29:38.584389 #10344] DEBUG -- :   [1m[36mLineItem Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T19:29:38.693589 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T19:29:38.724789 #10344]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-01T19:29:38.802790 #10344]  INFO -- :   Rendered carts/_cart.html.erb (171.6ms)
I, [2015-01-01T19:29:38.880790 #10344]  INFO -- : Completed 200 OK in 830ms (Views: 733.2ms | ActiveRecord: 0.0ms)
D, [2015-01-01T19:32:50.503989 #10344] DEBUG -- : 
D, [2015-01-01T19:32:50.535189 #10344] DEBUG -- : 
I, [2015-01-01T19:32:50.581989 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 19:32:50 +0000
I, [2015-01-01T19:32:50.675589 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:32:50.738990 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T19:32:50.816990 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:32:50.894990 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-01T19:32:51.004190 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T19:32:51.097790 #10344] DEBUG -- :   [1m[35mProduct Load (15.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T19:32:51.144590 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:32:51.354792 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 19:32:51 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:95105f0,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 19:32:51 UTC +00:00]]
D, [2015-01-01T19:32:51.510792 #10344] DEBUG -- :   [1m[36m (124.8ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T19:32:51.619992 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T19:32:51.713593 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T19:32:51.775993 #10344]  INFO -- :   Rendered carts/_cart.html.erb (187.2ms)
I, [2015-01-01T19:32:51.822793 #10344]  INFO -- :   Rendered line_items/create.js.erb (249.6ms)
I, [2015-01-01T19:32:51.885193 #10344]  INFO -- : Completed 200 OK in 1084ms (Views: 296.4ms | ActiveRecord: 140.4ms)
D, [2015-01-01T19:32:54.224684 #10344] DEBUG -- : 
D, [2015-01-01T19:32:54.255884 #10344] DEBUG -- : 
I, [2015-01-01T19:32:54.318285 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 19:32:54 +0000
I, [2015-01-01T19:32:54.427485 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:32:54.505485 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T19:32:54.599085 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:32:54.692685 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-01T19:32:54.817485 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T19:32:54.938686 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-01T19:32:55.001086 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:32:55.235087 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 19:32:55 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:6282570,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 19:32:55 UTC +00:00]]
D, [2015-01-01T19:32:55.406687 #10344] DEBUG -- :   [1m[36m (124.8ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T19:32:55.547087 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-01T19:32:55.687488 #10344] DEBUG -- :   [1m[36mProduct Load (15.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-01T19:32:55.765488 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (156.0ms)
I, [2015-01-01T19:32:55.843488 #10344]  INFO -- :   Rendered carts/_cart.html.erb (358.8ms)
I, [2015-01-01T19:32:55.905888 #10344]  INFO -- :   Rendered line_items/create.js.erb (421.2ms)
I, [2015-01-01T19:32:55.969288 #10344]  INFO -- : Completed 200 OK in 1400ms (Views: 483.6ms | ActiveRecord: 156.0ms)
D, [2015-01-01T19:32:57.772555 #10344] DEBUG -- : 
D, [2015-01-01T19:32:57.788155 #10344] DEBUG -- : 
I, [2015-01-01T19:32:57.834955 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 19:32:57 +0000
I, [2015-01-01T19:32:57.928555 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T19:32:58.022155 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T19:32:58.100155 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T19:32:58.178156 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:32:58.271756 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T19:32:58.396556 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T19:33:03.198571 #10344] DEBUG -- :   [1m[35m (15.6ms)[0m  begin transaction
D, [2015-01-01T19:33:03.292171 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 19:33:03 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 19:33:03 UTC +00:00]]
D, [2015-01-01T19:33:03.432571 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 67  [["cart_id", nil], ["order_id", 58], ["updated_at", Thu, 01 Jan 2015 19:33:03 UTC +00:00]]
D, [2015-01-01T19:33:03.558372 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 68[0m  [["cart_id", nil], ["order_id", 58], ["updated_at", Thu, 01 Jan 2015 19:33:03 UTC +00:00]]
I, [2015-01-01T19:33:03.606172 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T19:33:09.990583 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T19:33:10.099783 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T19:33:12.942988 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 58]]
I, [2015-01-01T19:37:37.418763 #10344]  INFO -- : in order=
I, [2015-01-01T19:37:37.434363 #10344]  INFO -- : in payment.create
I, [2015-01-01T19:37:37.699564 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/58/confirm", "cancel_url"=>"http://localhost:3000/orders/58/cancel"}}
I, [2015-01-01T19:37:38.276765 #10344]  INFO -- : #<ActiveModel::Errors:0x00000005f1d8d0 @base=#<Payment:0x00000009a9dc20 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009a9c758 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000938e100 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000938d8e0 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009387738 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009386568 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007d90768 @error=nil, @return_url="http://localhost:3000/orders/58/confirm", @cancel_url="http://localhost:3000/orders/58/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005f1d8d0 ...>>, @messages={}>
I, [2015-01-01T19:37:38.307965 #10344]  INFO -- : got past invalid
I, [2015-01-01T19:37:38.401565 #10344]  INFO -- : PayPal-Request-Id: 55e2cfe3-59fd-4835-b309-572687609eed
I, [2015-01-01T19:37:38.448365 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T19:37:39.416567 #10344]  INFO -- : Response[400]: Bad Request, Duration: 0.937s
I, [2015-01-01T19:37:39.432167 #10344]  INFO -- : back from super
I, [2015-01-01T19:37:39.603767 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/58/confirm", "cancel_url"=>"http://localhost:3000/orders/58/cancel"}}
I, [2015-01-01T19:37:41.901971 #10344]  INFO -- : @payment save just done
I, [2015-01-01T19:37:42.575773 #10344]  INFO -- : #<Payment:0x00000009a9dc20 @error={"name"=>"MALFORMED_REQUEST", "message"=>"Incoming JSON request does not map to API request", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#MALFORMED_REQUEST", "debug_id"=>"e0f357352b82e"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009a9c758 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000938e100 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000938d8e0 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009387738 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009386568 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007d90768 @error=nil, @return_url="http://localhost:3000/orders/58/confirm", @cancel_url="http://localhost:3000/orders/58/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005f1d8d0 @base=#<Payment:0x00000009a9dc20 ...>, @messages={}>, @request_id="55e2cfe3-59fd-4835-b309-572687609eed", @header={}>
I, [2015-01-01T19:37:43.279774 #10344]  INFO -- : #<Payment:0x00000009a9dc20 @error={"name"=>"MALFORMED_REQUEST", "message"=>"Incoming JSON request does not map to API request", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#MALFORMED_REQUEST", "debug_id"=>"e0f357352b82e"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009a9c758 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000938e100 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000938d8e0 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009387738 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009386568 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007d90768 @error=nil, @return_url="http://localhost:3000/orders/58/confirm", @cancel_url="http://localhost:3000/orders/58/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005f1d8d0 @base=#<Payment:0x00000009a9dc20 ...>, @messages={}>, @request_id="55e2cfe3-59fd-4835-b309-572687609eed", @header={}>
D, [2015-01-01T19:37:43.451374 #10344] DEBUG -- :   [1m[36m (109.2ms)[0m  [1mcommit transaction[0m
I, [2015-01-01T19:37:43.498175 #10344]  INFO -- : about to approve url
I, [2015-01-01T19:37:44.372776 #10344]  INFO -- : #<Payment:0x00000009a9dc20 @error={"name"=>"MALFORMED_REQUEST", "message"=>"Incoming JSON request does not map to API request", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#MALFORMED_REQUEST", "debug_id"=>"e0f357352b82e"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009a9c758 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000938e100 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000938d8e0 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009387738 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009386568 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007d90768 @error=nil, @return_url="http://localhost:3000/orders/58/confirm", @cancel_url="http://localhost:3000/orders/58/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005f1d8d0 @base=#<Payment:0x00000009a9dc20 ...>, @messages={}>, @request_id="55e2cfe3-59fd-4835-b309-572687609eed", @header={}>
I, [2015-01-01T19:37:44.419576 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T19:37:44.481976 #10344]  INFO -- : Completed 302 Found in 286491ms (ActiveRecord: 140.4ms)
D, [2015-01-01T19:37:44.528776 #10344] DEBUG -- : 
D, [2015-01-01T19:37:44.559976 #10344] DEBUG -- : 
I, [2015-01-01T19:37:44.622377 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 19:37:44 +0000
I, [2015-01-01T19:37:47.073581 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:37:47.120381 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T19:37:47.229581 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:37:47.447982 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-01T19:37:47.713182 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T19:37:48.028183 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T19:37:48.059383 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T19:37:48.230983 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 19:37:48 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:9fef660,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 19:37:48 UTC +00:00]]
D, [2015-01-01T19:37:48.386983 #10344] DEBUG -- :   [1m[35m (109.2ms)[0m  commit transaction
D, [2015-01-01T19:37:48.512784 #10344] DEBUG -- :   [1m[36mLineItem Load (16.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T19:37:48.606384 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T19:37:48.715584 #10344]  INFO -- :   Rendered carts/_cart.html.erb (235.0ms)
I, [2015-01-01T19:37:48.762384 #10344]  INFO -- :   Rendered line_items/create.js.erb (297.4ms)
I, [2015-01-01T19:37:48.809184 #10344]  INFO -- : Completed 200 OK in 1642ms (Views: 358.8ms | ActiveRecord: 157.0ms)
D, [2015-01-01T19:37:48.840384 #10344] DEBUG -- : 
D, [2015-01-01T19:37:48.855984 #10344] DEBUG -- : 
I, [2015-01-01T19:37:48.920587 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 19:37:48 +0000
I, [2015-01-01T19:37:49.046594 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:37:49.097597 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T19:37:49.172602 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:37:49.244606 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-01T19:37:49.343611 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T19:37:49.439617 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T19:37:49.479619 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-01T19:37:49.653629 #10344] DEBUG -- :   [1m[36mSQL (8.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 19:37:49 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:82b79a8,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 19:37:49 UTC +00:00]]
D, [2015-01-01T19:37:49.794637 #10344] DEBUG -- :   [1m[35m (101.0ms)[0m  commit transaction
D, [2015-01-01T19:37:49.912243 #10344] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-01T19:37:50.021443 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
I, [2015-01-01T19:37:50.083843 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (109.2ms)
I, [2015-01-01T19:37:50.161843 #10344]  INFO -- :   Rendered carts/_cart.html.erb (294.0ms)
I, [2015-01-01T19:37:50.208643 #10344]  INFO -- :   Rendered line_items/create.js.erb (351.8ms)
I, [2015-01-01T19:37:50.255444 #10344]  INFO -- : Completed 200 OK in 1109ms (Views: 408.0ms | ActiveRecord: 121.0ms)
D, [2015-01-01T19:37:50.302244 #10344] DEBUG -- : 
D, [2015-01-01T19:37:50.319844 #10344] DEBUG -- : 
I, [2015-01-01T19:37:50.368847 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 19:37:50 +0000
I, [2015-01-01T19:37:50.510855 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T19:37:50.633862 #10344] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T19:37:50.819872 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T19:37:50.890876 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:37:51.078887 #10344] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T19:37:51.207895 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T19:37:54.096508 #10344] DEBUG -- :   [1m[36m (15.6ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:37:54.470908 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 01 Jan 2015 19:37:54 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 19:37:54 UTC +00:00]]
D, [2015-01-01T19:37:54.642508 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 69[0m  [["cart_id", nil], ["order_id", 59], ["updated_at", Thu, 01 Jan 2015 19:37:54 UTC +00:00]]
D, [2015-01-01T19:37:54.798509 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 70  [["cart_id", nil], ["order_id", 59], ["updated_at", Thu, 01 Jan 2015 19:37:54 UTC +00:00]]
I, [2015-01-01T19:37:54.845309 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T19:37:54.938909 #10344] DEBUG -- :   [1m[36m (31.2ms)[0m  [1mrollback transaction[0m
I, [2015-01-01T19:37:55.001309 #10344]  INFO -- : Completed 500 Internal Server Error in 4442ms
F, [2015-01-01T19:37:55.172909 #10344] FATAL -- : 
SyntaxError (c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:61: syntax error, unexpected tIDENTIFIER, expecting '}'):
  app/models/order.rb:41:in `create_payment'
  app/controllers/orders_controller.rb:155:in `ppcheckout'


I, [2015-01-01T19:37:55.516110 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (15.6ms)
I, [2015-01-01T19:37:55.656510 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (15.6ms)
I, [2015-01-01T19:37:55.796911 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (15.6ms)
I, [2015-01-01T19:37:55.874911 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (436.8ms)
D, [2015-01-01T19:37:55.977313 #10344] DEBUG -- : 
D, [2015-01-01T19:37:55.994314 #10344] DEBUG -- : 
I, [2015-01-01T19:37:56.042317 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 19:37:55 +0000
I, [2015-01-01T19:37:56.155323 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T19:37:56.242328 #10344] DEBUG -- :   [1m[35mUser Load (3.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T19:37:56.306332 #10344] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T19:37:56.369335 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:37:56.462341 #10344] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T19:37:56.576347 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T19:37:59.508515 #10344] DEBUG -- :   [1m[35m (3.0ms)[0m  begin transaction
D, [2015-01-01T19:37:59.620521 #10344] DEBUG -- :   [1m[36mSQL (8.0ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 19:37:59 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 19:37:59 UTC +00:00]]
D, [2015-01-01T19:37:59.749529 #10344] DEBUG -- :   [1m[35mSQL (5.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 69  [["cart_id", nil], ["order_id", 59], ["updated_at", Thu, 01 Jan 2015 19:37:59 UTC +00:00]]
D, [2015-01-01T19:37:59.878536 #10344] DEBUG -- :   [1m[36mSQL (3.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 70[0m  [["cart_id", nil], ["order_id", 59], ["updated_at", Thu, 01 Jan 2015 19:37:59 UTC +00:00]]
I, [2015-01-01T19:37:59.908538 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T19:37:59.984542 #10344] DEBUG -- :   [1m[35m (26.0ms)[0m  rollback transaction
I, [2015-01-01T19:38:00.033545 #10344]  INFO -- : Completed 500 Internal Server Error in 3843ms
F, [2015-01-01T19:38:00.173553 #10344] FATAL -- : 
SyntaxError (c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:61: syntax error, unexpected tIDENTIFIER, expecting '}'):
  app/models/order.rb:41:in `create_payment'
  app/controllers/orders_controller.rb:155:in `ppcheckout'


I, [2015-01-01T19:38:00.498572 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (14.0ms)
I, [2015-01-01T19:38:00.624579 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (20.0ms)
I, [2015-01-01T19:38:00.746586 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (13.0ms)
I, [2015-01-01T19:38:00.827590 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (376.0ms)
D, [2015-01-01T19:38:14.147872 #10344] DEBUG -- : 
D, [2015-01-01T19:38:14.180072 #10344] DEBUG -- : 
I, [2015-01-01T19:38:14.222074 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 19:38:14 +0000
I, [2015-01-01T19:38:14.373083 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T19:38:14.473088 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:38:14.591095 #10344] DEBUG -- :   [1m[35mProduct Load (3.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T19:38:14.683100 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (4.0ms)
I, [2015-01-01T19:38:14.744104 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (179.0ms)
D, [2015-01-01T19:38:15.030120 #10344] DEBUG -- :   [1m[36mLineItem Exists (3.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T19:38:15.139126 #10344] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-01T19:38:15.275134 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T19:38:15.412142 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-01T19:38:15.481146 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (277.0ms)
I, [2015-01-01T19:38:15.570151 #10344]  INFO -- :   Rendered carts/_cart.html.erb (482.0ms)
I, [2015-01-01T19:38:15.655156 #10344]  INFO -- : Completed 200 OK in 1225ms (Views: 1103.1ms | ActiveRecord: 14.0ms)
D, [2015-01-01T19:38:15.901170 #10344] DEBUG -- : 
D, [2015-01-01T19:38:15.956173 #10344] DEBUG -- : 
I, [2015-01-01T19:38:16.032178 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 19:38:15 +0000
D, [2015-01-01T19:38:16.117182 #10344] DEBUG -- : 
D, [2015-01-01T19:38:16.143184 #10344] DEBUG -- : 
I, [2015-01-01T19:38:16.204187 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 19:38:16 +0000
D, [2015-01-01T19:38:16.284192 #10344] DEBUG -- : 
D, [2015-01-01T19:38:16.308193 #10344] DEBUG -- : 
I, [2015-01-01T19:38:16.376197 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 19:38:16 +0000
D, [2015-01-01T19:38:16.452202 #10344] DEBUG -- : 
D, [2015-01-01T19:38:16.478203 #10344] DEBUG -- : 
I, [2015-01-01T19:38:16.551207 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 19:38:16 +0000
D, [2015-01-01T19:38:16.633212 #10344] DEBUG -- : 
D, [2015-01-01T19:38:16.660213 #10344] DEBUG -- : 
I, [2015-01-01T19:38:16.725217 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 19:38:16 +0000
D, [2015-01-01T19:38:16.802222 #10344] DEBUG -- : 
D, [2015-01-01T19:38:16.827223 #10344] DEBUG -- : 
I, [2015-01-01T19:38:16.891227 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 19:38:16 +0000
D, [2015-01-01T19:38:16.969231 #10344] DEBUG -- : 
D, [2015-01-01T19:38:16.997233 #10344] DEBUG -- : 
I, [2015-01-01T19:38:17.062236 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 19:38:16 +0000
D, [2015-01-01T19:38:17.146241 #10344] DEBUG -- : 
D, [2015-01-01T19:38:17.170243 #10344] DEBUG -- : 
I, [2015-01-01T19:38:17.234246 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 19:38:17 +0000
D, [2015-01-01T19:38:17.317251 #10344] DEBUG -- : 
D, [2015-01-01T19:38:17.343253 #10344] DEBUG -- : 
I, [2015-01-01T19:38:17.405256 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 19:38:17 +0000
D, [2015-01-01T19:38:17.483261 #10344] DEBUG -- : 
D, [2015-01-01T19:38:17.507262 #10344] DEBUG -- : 
I, [2015-01-01T19:38:17.575266 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 19:38:17 +0000
D, [2015-01-01T19:38:17.675272 #10344] DEBUG -- : 
D, [2015-01-01T19:38:17.702273 #10344] DEBUG -- : 
I, [2015-01-01T19:38:17.775277 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 19:38:17 +0000
D, [2015-01-01T19:38:17.860282 #10344] DEBUG -- : 
D, [2015-01-01T19:38:17.885284 #10344] DEBUG -- : 
I, [2015-01-01T19:38:17.950287 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 19:38:17 +0000
D, [2015-01-01T19:38:18.028292 #10344] DEBUG -- : 
D, [2015-01-01T19:38:18.056293 #10344] DEBUG -- : 
I, [2015-01-01T19:38:18.124297 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 19:38:18 +0000
D, [2015-01-01T19:38:18.197301 #10344] DEBUG -- : 
D, [2015-01-01T19:38:18.231303 #10344] DEBUG -- : 
I, [2015-01-01T19:38:18.299307 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 19:38:18 +0000
D, [2015-01-01T19:38:18.384312 #10344] DEBUG -- : 
D, [2015-01-01T19:38:18.408313 #10344] DEBUG -- : 
I, [2015-01-01T19:38:18.473317 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 19:38:18 +0000
D, [2015-01-01T19:38:18.549322 #10344] DEBUG -- : 
D, [2015-01-01T19:38:18.577323 #10344] DEBUG -- : 
I, [2015-01-01T19:38:18.648327 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 19:38:18 +0000
D, [2015-01-01T19:38:18.732332 #10344] DEBUG -- : 
D, [2015-01-01T19:38:18.763334 #10344] DEBUG -- : 
I, [2015-01-01T19:38:18.834338 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 19:38:18 +0000
D, [2015-01-01T19:38:18.907342 #10344] DEBUG -- : 
D, [2015-01-01T19:38:18.935344 #10344] DEBUG -- : 
I, [2015-01-01T19:38:18.992347 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 19:38:18 +0000
D, [2015-01-01T19:38:19.068351 #10344] DEBUG -- : 
D, [2015-01-01T19:38:19.095353 #10344] DEBUG -- : 
I, [2015-01-01T19:38:19.161357 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 19:38:19 +0000
D, [2015-01-01T19:38:19.242361 #10344] DEBUG -- : 
D, [2015-01-01T19:38:19.269363 #10344] DEBUG -- : 
I, [2015-01-01T19:38:19.330366 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 19:38:19 +0000
D, [2015-01-01T19:38:19.420371 #10344] DEBUG -- : 
D, [2015-01-01T19:38:19.442373 #10344] DEBUG -- : 
I, [2015-01-01T19:38:19.504376 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 19:38:19 +0000
D, [2015-01-01T19:38:19.593381 #10344] DEBUG -- : 
D, [2015-01-01T19:38:19.620383 #10344] DEBUG -- : 
I, [2015-01-01T19:38:19.690387 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 19:38:19 +0000
D, [2015-01-01T19:38:19.774392 #10344] DEBUG -- : 
D, [2015-01-01T19:38:19.801393 #10344] DEBUG -- : 
I, [2015-01-01T19:38:19.872397 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 19:38:19 +0000
D, [2015-01-01T19:38:19.967403 #10344] DEBUG -- : 
D, [2015-01-01T19:38:19.991404 #10344] DEBUG -- : 
I, [2015-01-01T19:38:20.102410 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 19:38:19 +0000
D, [2015-01-01T19:38:20.185415 #10344] DEBUG -- : 
D, [2015-01-01T19:38:20.214417 #10344] DEBUG -- : 
I, [2015-01-01T19:38:20.287421 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 19:38:20 +0000
D, [2015-01-01T19:38:20.368426 #10344] DEBUG -- : 
D, [2015-01-01T19:38:20.393427 #10344] DEBUG -- : 
I, [2015-01-01T19:38:20.456431 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 19:38:20 +0000
D, [2015-01-01T19:38:20.571437 #10344] DEBUG -- : 
D, [2015-01-01T19:38:20.605439 #10344] DEBUG -- : 
I, [2015-01-01T19:38:20.691444 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 19:38:20 +0000
D, [2015-01-01T19:38:20.764448 #10344] DEBUG -- : 
D, [2015-01-01T19:38:20.785449 #10344] DEBUG -- : 
I, [2015-01-01T19:38:20.841453 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 19:38:20 +0000
D, [2015-01-01T19:38:20.919457 #10344] DEBUG -- : 
D, [2015-01-01T19:38:20.941458 #10344] DEBUG -- : 
I, [2015-01-01T19:38:21.031464 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 19:38:20 +0000
D, [2015-01-01T19:38:21.110468 #10344] DEBUG -- : 
D, [2015-01-01T19:38:21.133469 #10344] DEBUG -- : 
I, [2015-01-01T19:38:21.191473 #10344]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-01 19:38:21 +0000
D, [2015-01-01T19:38:24.312491 #10344] DEBUG -- : 
D, [2015-01-01T19:38:24.343691 #10344] DEBUG -- : 
I, [2015-01-01T19:38:24.406091 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 19:38:24 +0000
I, [2015-01-01T19:38:24.499691 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:38:24.578092 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T19:38:24.671693 #10344] DEBUG -- :   [1m[36mCart Load (15.6ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:38:24.765293 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-01T19:38:24.874493 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T19:38:24.921293 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T19:38:25.030493 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = 70[0m  [["quantity", 2], ["updated_at", Thu, 01 Jan 2015 19:38:24 UTC +00:00]]
D, [2015-01-01T19:38:25.391695 #10344] DEBUG -- :   [1m[35m (314.4ms)[0m  commit transaction
D, [2015-01-01T19:38:25.511297 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-01T19:38:25.628898 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-01T19:38:25.755099 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-01T19:38:25.833099 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (259.4ms)
I, [2015-01-01T19:38:25.926700 #10344]  INFO -- :   Rendered carts/_cart.html.erb (457.0ms)
I, [2015-01-01T19:38:25.973500 #10344]  INFO -- :   Rendered line_items/create.js.erb (519.4ms)
I, [2015-01-01T19:38:26.028300 #10344]  INFO -- : Completed 200 OK in 1395ms (Views: 581.8ms | ActiveRecord: 345.6ms)
D, [2015-01-01T19:38:26.075100 #10344] DEBUG -- : 
D, [2015-01-01T19:38:26.101701 #10344] DEBUG -- : 
I, [2015-01-01T19:38:26.176705 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 19:38:26 +0000
I, [2015-01-01T19:38:26.284711 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:38:26.354715 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T19:38:26.446721 #10344] DEBUG -- :   [1m[35mCart Load (3.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:38:26.537726 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-01T19:38:26.652732 #10344] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T19:38:26.701735 #10344] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:38:26.837743 #10344] DEBUG -- :   [1m[35mSQL (8.0ms)[0m  UPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = 69  [["quantity", 2], ["updated_at", Thu, 01 Jan 2015 19:38:26 UTC +00:00]]
D, [2015-01-01T19:38:27.030754 #10344] DEBUG -- :   [1m[36m (131.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T19:38:27.142959 #10344] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-01T19:38:27.259961 #10344] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T19:38:27.384761 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-01T19:38:27.447161 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (241.8ms)
I, [2015-01-01T19:38:27.531162 #10344]  INFO -- :   Rendered carts/_cart.html.erb (405.6ms)
I, [2015-01-01T19:38:27.564362 #10344]  INFO -- :   Rendered line_items/create.js.erb (468.4ms)
I, [2015-01-01T19:38:27.612162 #10344]  INFO -- : Completed 200 OK in 1208ms (Views: 523.6ms | ActiveRecord: 152.0ms)
D, [2015-01-01T19:38:28.194592 #10344] DEBUG -- : 
D, [2015-01-01T19:38:28.218593 #10344] DEBUG -- : 
I, [2015-01-01T19:38:28.272597 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 19:38:28 +0000
I, [2015-01-01T19:38:28.379603 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T19:38:28.470608 #10344] DEBUG -- :   [1m[36mUser Load (4.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T19:38:28.562613 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T19:38:28.648618 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:38:28.742822 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T19:38:28.867622 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T19:38:33.810434 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:38:33.950834 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 01 Jan 2015 19:38:33 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 19:38:33 UTC +00:00]]
D, [2015-01-01T19:38:34.108835 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 69[0m  [["cart_id", nil], ["order_id", 59], ["updated_at", Thu, 01 Jan 2015 19:38:33 UTC +00:00]]
D, [2015-01-01T19:38:34.264835 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 70  [["cart_id", nil], ["order_id", 59], ["updated_at", Thu, 01 Jan 2015 19:38:34 UTC +00:00]]
I, [2015-01-01T19:38:34.311635 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T19:38:34.389635 #10344] DEBUG -- :   [1m[36m (15.6ms)[0m  [1mrollback transaction[0m
I, [2015-01-01T19:38:34.436435 #10344]  INFO -- : Completed 500 Internal Server Error in 6008ms
F, [2015-01-01T19:38:34.608035 #10344] FATAL -- : 
SyntaxError (c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:61: syntax error, unexpected tIDENTIFIER, expecting '}'):
  app/models/order.rb:41:in `create_payment'
  app/controllers/orders_controller.rb:155:in `ppcheckout'


I, [2015-01-01T19:38:34.966836 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (15.6ms)
I, [2015-01-01T19:38:35.107236 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (31.2ms)
I, [2015-01-01T19:38:35.232036 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (15.6ms)
I, [2015-01-01T19:38:35.325637 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (405.6ms)
D, [2015-01-01T19:38:35.417038 #10344] DEBUG -- : 
D, [2015-01-01T19:38:35.436039 #10344] DEBUG -- : 
I, [2015-01-01T19:38:35.486042 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 19:38:35 +0000
I, [2015-01-01T19:38:35.598049 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T19:38:35.673053 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T19:38:35.747057 #10344] DEBUG -- :   [1m[36mUser Load (3.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T19:38:35.823062 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:38:35.920067 #10344] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T19:38:36.047074 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T19:38:37.871179 #10344] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2015-01-01T19:38:37.988185 #10344] DEBUG -- :   [1m[36mSQL (8.0ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 19:38:37 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 19:38:37 UTC +00:00]]
D, [2015-01-01T19:38:38.120193 #10344] DEBUG -- :   [1m[35mSQL (5.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 69  [["cart_id", nil], ["order_id", 59], ["updated_at", Thu, 01 Jan 2015 19:38:38 UTC +00:00]]
D, [2015-01-01T19:38:38.246200 #10344] DEBUG -- :   [1m[36mSQL (4.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 70[0m  [["cart_id", nil], ["order_id", 59], ["updated_at", Thu, 01 Jan 2015 19:38:38 UTC +00:00]]
I, [2015-01-01T19:38:38.279202 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T19:38:38.343206 #10344] DEBUG -- :   [1m[35m (12.0ms)[0m  rollback transaction
I, [2015-01-01T19:38:38.383208 #10344]  INFO -- : Completed 500 Internal Server Error in 2747ms
F, [2015-01-01T19:38:38.523216 #10344] FATAL -- : 
SyntaxError (c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:61: syntax error, unexpected tIDENTIFIER, expecting '}'):
  app/models/order.rb:41:in `create_payment'
  app/controllers/orders_controller.rb:155:in `ppcheckout'


I, [2015-01-01T19:38:38.882237 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (16.0ms)
I, [2015-01-01T19:38:39.006244 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (21.0ms)
I, [2015-01-01T19:38:39.133251 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (14.0ms)
I, [2015-01-01T19:38:39.206255 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (384.0ms)
D, [2015-01-01T19:40:04.980701 #10344] DEBUG -- : 
D, [2015-01-01T19:40:05.004702 #10344] DEBUG -- : 
I, [2015-01-01T19:40:05.054705 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 19:40:05 +0000
I, [2015-01-01T19:40:08.251888 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T19:40:08.404897 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:40:08.678913 #10344] DEBUG -- :   [1m[35mProduct Load (3.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T19:40:08.960929 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (5.0ms)
I, [2015-01-01T19:40:09.010932 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (357.0ms)
D, [2015-01-01T19:40:09.392953 #10344] DEBUG -- :   [1m[36mLineItem Exists (3.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T19:40:09.485959 #10344] DEBUG -- :   [1m[35mLineItem Load (4.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-01T19:40:09.831978 #10344] DEBUG -- :   [1m[36mProduct Load (4.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T19:40:09.949985 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-01T19:40:10.032990 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (260.0ms)
I, [2015-01-01T19:40:10.156997 #10344]  INFO -- :   Rendered carts/_cart.html.erb (714.0ms)
I, [2015-01-01T19:40:10.238002 #10344]  INFO -- : Completed 200 OK in 1935ms (Views: 1577.1ms | ActiveRecord: 43.0ms)
D, [2015-01-01T19:40:10.462015 #10344] DEBUG -- : 
D, [2015-01-01T19:40:10.542019 #10344] DEBUG -- : 
I, [2015-01-01T19:40:10.594022 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 19:40:10 +0000
D, [2015-01-01T19:40:10.683027 #10344] DEBUG -- : 
D, [2015-01-01T19:40:10.708029 #10344] DEBUG -- : 
I, [2015-01-01T19:40:10.762032 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 19:40:10 +0000
D, [2015-01-01T19:40:10.844036 #10344] DEBUG -- : 
D, [2015-01-01T19:40:10.866038 #10344] DEBUG -- : 
I, [2015-01-01T19:40:10.919041 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 19:40:10 +0000
D, [2015-01-01T19:40:11.020046 #10344] DEBUG -- : 
D, [2015-01-01T19:40:11.040048 #10344] DEBUG -- : 
I, [2015-01-01T19:40:11.101051 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 19:40:11 +0000
D, [2015-01-01T19:40:11.184056 #10344] DEBUG -- : 
D, [2015-01-01T19:40:11.204057 #10344] DEBUG -- : 
I, [2015-01-01T19:40:11.257060 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 19:40:11 +0000
D, [2015-01-01T19:40:11.359066 #10344] DEBUG -- : 
D, [2015-01-01T19:40:11.380067 #10344] DEBUG -- : 
I, [2015-01-01T19:40:11.434070 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 19:40:11 +0000
D, [2015-01-01T19:40:11.517075 #10344] DEBUG -- : 
D, [2015-01-01T19:40:11.541076 #10344] DEBUG -- : 
I, [2015-01-01T19:40:11.595079 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 19:40:11 +0000
D, [2015-01-01T19:40:11.684084 #10344] DEBUG -- : 
D, [2015-01-01T19:40:11.707086 #10344] DEBUG -- : 
I, [2015-01-01T19:40:11.769089 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 19:40:11 +0000
D, [2015-01-01T19:40:11.851094 #10344] DEBUG -- : 
D, [2015-01-01T19:40:11.872095 #10344] DEBUG -- : 
I, [2015-01-01T19:40:11.920098 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 19:40:11 +0000
D, [2015-01-01T19:40:12.018104 #10344] DEBUG -- : 
D, [2015-01-01T19:40:12.043105 #10344] DEBUG -- : 
I, [2015-01-01T19:40:12.096108 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 19:40:12 +0000
D, [2015-01-01T19:40:12.177113 #10344] DEBUG -- : 
D, [2015-01-01T19:40:12.197114 #10344] DEBUG -- : 
I, [2015-01-01T19:40:12.249117 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 19:40:12 +0000
D, [2015-01-01T19:40:12.335122 #10344] DEBUG -- : 
D, [2015-01-01T19:40:12.356123 #10344] DEBUG -- : 
I, [2015-01-01T19:40:12.408126 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 19:40:12 +0000
D, [2015-01-01T19:40:12.502131 #10344] DEBUG -- : 
D, [2015-01-01T19:40:12.534133 #10344] DEBUG -- : 
I, [2015-01-01T19:40:12.589136 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 19:40:12 +0000
D, [2015-01-01T19:40:12.672141 #10344] DEBUG -- : 
D, [2015-01-01T19:40:12.698142 #10344] DEBUG -- : 
I, [2015-01-01T19:40:12.760146 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 19:40:12 +0000
D, [2015-01-01T19:40:12.836150 #10344] DEBUG -- : 
D, [2015-01-01T19:40:12.860152 #10344] DEBUG -- : 
I, [2015-01-01T19:40:12.925155 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 19:40:12 +0000
D, [2015-01-01T19:40:13.004160 #10344] DEBUG -- : 
D, [2015-01-01T19:40:13.031161 #10344] DEBUG -- : 
I, [2015-01-01T19:40:13.100165 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 19:40:13 +0000
D, [2015-01-01T19:40:13.177170 #10344] DEBUG -- : 
D, [2015-01-01T19:40:13.201171 #10344] DEBUG -- : 
I, [2015-01-01T19:40:13.265175 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 19:40:13 +0000
D, [2015-01-01T19:40:13.341179 #10344] DEBUG -- : 
D, [2015-01-01T19:40:13.369181 #10344] DEBUG -- : 
I, [2015-01-01T19:40:13.439185 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 19:40:13 +0000
D, [2015-01-01T19:40:13.522190 #10344] DEBUG -- : 
D, [2015-01-01T19:40:13.557192 #10344] DEBUG -- : 
I, [2015-01-01T19:40:13.619195 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 19:40:13 +0000
D, [2015-01-01T19:40:13.701200 #10344] DEBUG -- : 
D, [2015-01-01T19:40:13.726201 #10344] DEBUG -- : 
I, [2015-01-01T19:40:13.788205 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 19:40:13 +0000
D, [2015-01-01T19:40:13.865209 #10344] DEBUG -- : 
D, [2015-01-01T19:40:13.889211 #10344] DEBUG -- : 
I, [2015-01-01T19:40:13.951214 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 19:40:13 +0000
D, [2015-01-01T19:40:14.042219 #10344] DEBUG -- : 
D, [2015-01-01T19:40:14.065221 #10344] DEBUG -- : 
I, [2015-01-01T19:40:14.135225 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 19:40:14 +0000
D, [2015-01-01T19:40:14.211229 #10344] DEBUG -- : 
D, [2015-01-01T19:40:14.234230 #10344] DEBUG -- : 
I, [2015-01-01T19:40:14.301234 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 19:40:14 +0000
D, [2015-01-01T19:40:14.376238 #10344] DEBUG -- : 
D, [2015-01-01T19:40:14.404240 #10344] DEBUG -- : 
I, [2015-01-01T19:40:14.470244 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 19:40:14 +0000
D, [2015-01-01T19:40:14.548248 #10344] DEBUG -- : 
D, [2015-01-01T19:40:14.572250 #10344] DEBUG -- : 
I, [2015-01-01T19:40:14.631253 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 19:40:14 +0000
D, [2015-01-01T19:40:14.713258 #10344] DEBUG -- : 
D, [2015-01-01T19:40:14.737259 #10344] DEBUG -- : 
I, [2015-01-01T19:40:14.809263 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 19:40:14 +0000
D, [2015-01-01T19:40:14.925270 #10344] DEBUG -- : 
D, [2015-01-01T19:40:14.960272 #10344] DEBUG -- : 
I, [2015-01-01T19:40:15.043277 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 19:40:14 +0000
D, [2015-01-01T19:40:15.121281 #10344] DEBUG -- : 
D, [2015-01-01T19:40:15.146282 #10344] DEBUG -- : 
I, [2015-01-01T19:40:15.206286 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 19:40:15 +0000
D, [2015-01-01T19:40:15.287291 #10344] DEBUG -- : 
D, [2015-01-01T19:40:15.314292 #10344] DEBUG -- : 
I, [2015-01-01T19:40:15.383296 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 19:40:15 +0000
D, [2015-01-01T19:40:15.461300 #10344] DEBUG -- : 
D, [2015-01-01T19:40:15.489302 #10344] DEBUG -- : 
I, [2015-01-01T19:40:15.557306 #10344]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-01 19:40:15 +0000
D, [2015-01-01T19:47:36.647630 #10344] DEBUG -- : 
D, [2015-01-01T19:47:36.665631 #10344] DEBUG -- : 
I, [2015-01-01T19:47:36.722634 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 19:47:36 +0000
I, [2015-01-01T19:47:36.883643 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T19:47:37.053653 #10344] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T19:47:37.269665 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T19:47:37.347670 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:47:37.514679 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T19:47:37.667688 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T19:47:42.154673 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:47:42.560274 #10344] DEBUG -- :   [1m[35mSQL (31.2ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 01 Jan 2015 19:47:42 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 19:47:42 UTC +00:00]]
D, [2015-01-01T19:47:42.685074 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 69[0m  [["cart_id", nil], ["order_id", 59], ["updated_at", Thu, 01 Jan 2015 19:47:42 UTC +00:00]]
D, [2015-01-01T19:47:42.794274 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 70  [["cart_id", nil], ["order_id", 59], ["updated_at", Thu, 01 Jan 2015 19:47:42 UTC +00:00]]
I, [2015-01-01T19:47:42.841074 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T19:47:55.627519 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T19:47:55.736719 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T19:47:57.251922 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 59]]
I, [2015-01-01T19:49:05.648872 #10344]  INFO -- : in order=
I, [2015-01-01T19:49:05.680072 #10344]  INFO -- : in payment.create
I, [2015-01-01T19:49:05.993073 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"77.96"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"77.96", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}, {:amount=>{:total=>#<BigDecimal:865b528,'0.7796E2',18(27)>, :currency=>"GBP"}, :item_list=>{:items=>{:name=>"penknife", :sku=>"PK1", :price=>14.99, :currency=>"GBP", :quantity=>1}}, :description=>"King Clothing"}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/59/confirm", "cancel_url"=>"http://localhost:3000/orders/59/cancel"}}
I, [2015-01-01T19:49:06.852074 #10344]  INFO -- : #<ActiveModel::Errors:0x00000009934870 @base=#<Payment:0x00000009e35b08 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009e34848 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008679dc0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000086796e0 @error=nil, @total="77.96", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008678100 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008673420 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="77.96", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:amount=>{:total=>#<BigDecimal:865b528,'0.7796E2',18(27)>, :currency=>"GBP"}, :item_list=>{:items=>{:name=>"penknife", :sku=>"PK1", :price=>14.99, :currency=>"GBP", :quantity=>1}}, :description=>"King Clothing"}, #<PayPal::SDK::REST::DataTypes::Transaction:0x0000000462eec8 @error=nil>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000099d4d98 @error=nil, @return_url="http://localhost:3000/orders/59/confirm", @cancel_url="http://localhost:3000/orders/59/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009934870 ...>>, @messages={}>
I, [2015-01-01T19:49:06.883275 #10344]  INFO -- : got past invalid
I, [2015-01-01T19:49:06.992475 #10344]  INFO -- : PayPal-Request-Id: 76f38daa-b41f-4d74-90e8-b26d778ebf1e
I, [2015-01-01T19:49:07.040275 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T19:49:08.085477 #10344]  INFO -- : Response[400]: Bad Request, Duration: 1.014s
I, [2015-01-01T19:49:08.116677 #10344]  INFO -- : back from super
I, [2015-01-01T19:49:08.366277 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"77.96"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"77.96", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}, {:amount=>{:total=>#<BigDecimal:865b528,'0.7796E2',18(27)>, :currency=>"GBP"}, :item_list=>{:items=>{:name=>"penknife", :sku=>"PK1", :price=>14.99, :currency=>"GBP", :quantity=>1}}, :description=>"King Clothing"}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/59/confirm", "cancel_url"=>"http://localhost:3000/orders/59/cancel"}}
I, [2015-01-01T19:59:27.293952 #10344]  INFO -- : @payment save just done
I, [2015-01-01T19:59:28.059353 #10344]  INFO -- : #<Payment:0x00000009e35b08 @error={"name"=>"MALFORMED_REQUEST", "message"=>"Incoming JSON request does not map to API request", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#MALFORMED_REQUEST", "debug_id"=>"f8c28b4a93d25"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009e34848 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008679dc0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000086796e0 @error=nil, @total="77.96", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008678100 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008673420 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="77.96", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:amount=>{:total=>#<BigDecimal:865b528,'0.7796E2',18(27)>, :currency=>"GBP"}, :item_list=>{:items=>{:name=>"penknife", :sku=>"PK1", :price=>14.99, :currency=>"GBP", :quantity=>1}}, :description=>"King Clothing"}, #<PayPal::SDK::REST::DataTypes::Transaction:0x0000000462eec8 @error=nil>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000099d4d98 @error=nil, @return_url="http://localhost:3000/orders/59/confirm", @cancel_url="http://localhost:3000/orders/59/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009934870 @base=#<Payment:0x00000009e35b08 ...>, @messages={}>, @request_id="76f38daa-b41f-4d74-90e8-b26d778ebf1e", @header={}>
I, [2015-01-01T19:59:28.811155 #10344]  INFO -- : #<Payment:0x00000009e35b08 @error={"name"=>"MALFORMED_REQUEST", "message"=>"Incoming JSON request does not map to API request", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#MALFORMED_REQUEST", "debug_id"=>"f8c28b4a93d25"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009e34848 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008679dc0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000086796e0 @error=nil, @total="77.96", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008678100 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008673420 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="77.96", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:amount=>{:total=>#<BigDecimal:865b528,'0.7796E2',18(27)>, :currency=>"GBP"}, :item_list=>{:items=>{:name=>"penknife", :sku=>"PK1", :price=>14.99, :currency=>"GBP", :quantity=>1}}, :description=>"King Clothing"}, #<PayPal::SDK::REST::DataTypes::Transaction:0x0000000462eec8 @error=nil>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000099d4d98 @error=nil, @return_url="http://localhost:3000/orders/59/confirm", @cancel_url="http://localhost:3000/orders/59/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009934870 @base=#<Payment:0x00000009e35b08 ...>, @messages={}>, @request_id="76f38daa-b41f-4d74-90e8-b26d778ebf1e", @header={}>
D, [2015-01-01T19:59:28.951555 #10344] DEBUG -- :   [1m[35m (93.6ms)[0m  commit transaction
I, [2015-01-01T19:59:28.982755 #10344]  INFO -- : about to approve url
I, [2015-01-01T19:59:29.747156 #10344]  INFO -- : #<Payment:0x00000009e35b08 @error={"name"=>"MALFORMED_REQUEST", "message"=>"Incoming JSON request does not map to API request", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#MALFORMED_REQUEST", "debug_id"=>"f8c28b4a93d25"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009e34848 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008679dc0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000086796e0 @error=nil, @total="77.96", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008678100 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008673420 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="77.96", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:amount=>{:total=>#<BigDecimal:865b528,'0.7796E2',18(27)>, :currency=>"GBP"}, :item_list=>{:items=>{:name=>"penknife", :sku=>"PK1", :price=>14.99, :currency=>"GBP", :quantity=>1}}, :description=>"King Clothing"}, #<PayPal::SDK::REST::DataTypes::Transaction:0x0000000462eec8 @error=nil>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000099d4d98 @error=nil, @return_url="http://localhost:3000/orders/59/confirm", @cancel_url="http://localhost:3000/orders/59/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009934870 @base=#<Payment:0x00000009e35b08 ...>, @messages={}>, @request_id="76f38daa-b41f-4d74-90e8-b26d778ebf1e", @header={}>
I, [2015-01-01T19:59:29.793956 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T19:59:29.840757 #10344]  INFO -- : Completed 302 Found in 712925ms (ActiveRecord: 149.8ms)
D, [2015-01-01T19:59:29.887557 #10344] DEBUG -- : 
D, [2015-01-01T19:59:29.903157 #10344] DEBUG -- : 
I, [2015-01-01T19:59:29.965557 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 19:59:29 +0000
I, [2015-01-01T19:59:32.215961 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T19:59:32.325161 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T19:59:32.512361 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T19:59:32.621562 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:59:32.902362 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T19:59:32.980362 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T19:59:34.555965 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:59:34.884566 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 01 Jan 2015 19:59:34 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 19:59:34 UTC +00:00]]
I, [2015-01-01T19:59:34.915766 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T19:59:35.979568 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 60]]
D, [2015-01-01T19:59:40.489976 #10344] DEBUG -- :   [1m[35m (15.6ms)[0m  SELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 60]]
W, [2015-01-01T19:59:40.536776 #10344]  WARN -- : undefined method `item_list' for #<PayPal::SDK::Core::API::DataTypes::ArrayWithBlock:0x0000000a0b3da8>
I, [2015-01-01T19:59:40.567976 #10344]  INFO -- : in payment.create
I, [2015-01-01T19:59:40.661576 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"0"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"0", "name"=>"Tee Shirts", "price"=>"0", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}]}
I, [2015-01-01T19:59:40.973576 #10344]  INFO -- : #<ActiveModel::Errors:0x0000000a017ca0 @base=#<Payment:0x0000000594a6d8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005948608 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a0b3420 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a0b2c28 @error=nil, @total="0", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a0b1670 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a0b05b8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="0", @currency="GBP", @quantity="0">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000a017ca0 ...>>, @messages={}>
I, [2015-01-01T19:59:40.989177 #10344]  INFO -- : got past invalid
I, [2015-01-01T19:59:41.067177 #10344]  INFO -- : PayPal-Request-Id: 2ef29b22-d89c-4ced-950c-763a386e110d
I, [2015-01-01T19:59:41.113977 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T19:59:42.096778 #10344]  INFO -- : Response[400]: Bad Request, Duration: 0.936s
I, [2015-01-01T19:59:42.127979 #10344]  INFO -- :  in error=
I, [2015-01-01T19:59:42.159179 #10344]  INFO -- :  in error=
I, [2015-01-01T19:59:42.190379 #10344]  INFO -- : back from super
I, [2015-01-01T19:59:42.361979 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"0"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"0", "name"=>"Tee Shirts", "price"=>"0", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}]}
I, [2015-01-01T20:00:15.118838 #10344]  INFO -- : @payment save just done
I, [2015-01-01T20:00:15.820839 #10344]  INFO -- : #<Payment:0x0000000594a6d8 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions[0].item_list.items[0].quantity", "issue"=>"Must be a positive integer"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"0616a10c742ed"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005948608 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a0b3420 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a0b2c28 @error=nil, @total="0", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a0b1670 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a0b05b8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="0", @currency="GBP", @quantity="0">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000a017ca0 @base=#<Payment:0x0000000594a6d8 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :"transactions[0].item_list.items[0].quantity"=>["Must be a positive integer"]}>, @request_id="2ef29b22-d89c-4ced-950c-763a386e110d", @header={}>
I, [2015-01-01T20:00:16.399040 #10344]  INFO -- : #<Payment:0x0000000594a6d8 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions[0].item_list.items[0].quantity", "issue"=>"Must be a positive integer"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"0616a10c742ed"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005948608 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a0b3420 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a0b2c28 @error=nil, @total="0", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a0b1670 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a0b05b8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="0", @currency="GBP", @quantity="0">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000a017ca0 @base=#<Payment:0x0000000594a6d8 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :"transactions[0].item_list.items[0].quantity"=>["Must be a positive integer"]}>, @request_id="2ef29b22-d89c-4ced-950c-763a386e110d", @header={}>
D, [2015-01-01T20:00:16.523840 #10344] DEBUG -- :   [1m[36m (93.6ms)[0m  [1mcommit transaction[0m
I, [2015-01-01T20:00:16.539440 #10344]  INFO -- : about to approve url
I, [2015-01-01T20:00:17.072841 #10344]  INFO -- : #<Payment:0x0000000594a6d8 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions[0].item_list.items[0].quantity", "issue"=>"Must be a positive integer"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"0616a10c742ed"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005948608 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a0b3420 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a0b2c28 @error=nil, @total="0", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a0b1670 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a0b05b8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="0", @currency="GBP", @quantity="0">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000a017ca0 @base=#<Payment:0x0000000594a6d8 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :"transactions[0].item_list.items[0].quantity"=>["Must be a positive integer"]}>, @request_id="2ef29b22-d89c-4ced-950c-763a386e110d", @header={}>
I, [2015-01-01T20:00:17.104041 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T20:00:17.135241 #10344]  INFO -- : Completed 302 Found in 44888ms (ActiveRecord: 140.4ms)
D, [2015-01-01T20:01:24.468575 #10344] DEBUG -- : 
D, [2015-01-01T20:01:24.499775 #10344] DEBUG -- : 
I, [2015-01-01T20:01:24.540377 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 20:01:24 +0000
I, [2015-01-01T20:01:24.758777 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T20:01:24.821177 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T20:01:24.961578 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T20:01:25.132579 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-01T20:01:25.366579 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T20:01:25.662980 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T20:01:25.694180 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T20:01:25.912580 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 20:01:25 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:84d42b8,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 20:01:25 UTC +00:00]]
D, [2015-01-01T20:01:26.099780 #10344] DEBUG -- :   [1m[35m (140.4ms)[0m  commit transaction
D, [2015-01-01T20:01:26.208981 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T20:01:26.303581 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T20:01:26.412781 #10344]  INFO -- :   Rendered carts/_cart.html.erb (219.4ms)
I, [2015-01-01T20:01:26.443981 #10344]  INFO -- :   Rendered line_items/create.js.erb (281.8ms)
I, [2015-01-01T20:01:26.504782 #10344]  INFO -- : Completed 200 OK in 1623ms (Views: 344.2ms | ActiveRecord: 156.0ms)
D, [2015-01-01T20:01:29.088848 #10344] DEBUG -- : 
D, [2015-01-01T20:01:29.104448 #10344] DEBUG -- : 
I, [2015-01-01T20:01:29.151248 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 20:01:29 +0000
I, [2015-01-01T20:01:29.276048 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T20:01:29.338448 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T20:01:29.416448 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T20:01:29.487849 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-01T20:01:29.597049 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T20:01:29.706249 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T20:01:29.753049 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T20:01:29.940250 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 20:01:29 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:5b2ab10,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 20:01:29 UTC +00:00]]
D, [2015-01-01T20:01:30.158650 #10344] DEBUG -- :   [1m[35m (156.0ms)[0m  commit transaction
D, [2015-01-01T20:01:30.267850 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-01T20:01:30.408250 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-01T20:01:30.486251 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (140.4ms)
I, [2015-01-01T20:01:30.564251 #10344]  INFO -- :   Rendered carts/_cart.html.erb (343.2ms)
I, [2015-01-01T20:01:30.611051 #10344]  INFO -- :   Rendered line_items/create.js.erb (390.0ms)
I, [2015-01-01T20:01:30.673451 #10344]  INFO -- : Completed 200 OK in 1288ms (Views: 468.0ms | ActiveRecord: 171.6ms)
D, [2015-01-01T20:01:32.468114 #10344] DEBUG -- : 
D, [2015-01-01T20:01:32.499314 #10344] DEBUG -- : 
I, [2015-01-01T20:01:32.546114 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 20:01:32 +0000
I, [2015-01-01T20:01:32.670914 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T20:01:32.780114 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T20:01:32.858114 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T20:01:32.939916 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T20:01:33.049117 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T20:01:33.173917 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T20:01:37.803974 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T20:01:37.897574 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 01 Jan 2015 20:01:37 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 20:01:37 UTC +00:00]]
D, [2015-01-01T20:01:38.037974 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 71[0m  [["cart_id", nil], ["order_id", 61], ["updated_at", Thu, 01 Jan 2015 20:01:37 UTC +00:00]]
D, [2015-01-01T20:01:38.162775 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 72  [["cart_id", nil], ["order_id", 61], ["updated_at", Thu, 01 Jan 2015 20:01:38 UTC +00:00]]
I, [2015-01-01T20:01:38.193975 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T20:01:42.284182 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T20:01:42.393382 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-01T20:01:43.828585 #10344] DEBUG -- :   [1m[36m (15.6ms)[0m  [1mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 61]]
W, [2015-01-01T20:01:43.906585 #10344]  WARN -- : undefined method `item_list' for #<PayPal::SDK::Core::API::DataTypes::ArrayWithBlock:0x0000000926eb30>
I, [2015-01-01T20:01:43.922185 #10344]  INFO -- : in payment.create
I, [2015-01-01T20:01:44.046985 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}]}
I, [2015-01-01T20:01:44.530586 #10344]  INFO -- : #<ActiveModel::Errors:0x000000086c6aa8 @base=#<Payment:0x0000000984c598 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009847930 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000926e540 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000926de60 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000926c970 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009267e48 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000086c6aa8 ...>>, @messages={}>
I, [2015-01-01T20:01:44.561786 #10344]  INFO -- : got past invalid
I, [2015-01-01T20:01:44.639786 #10344]  INFO -- : PayPal-Request-Id: f1ee4b98-91f2-4dee-9065-195adb479141
I, [2015-01-01T20:01:44.670986 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T20:01:45.606988 #10344]  INFO -- : Response[400]: Bad Request, Duration: 0.905s
I, [2015-01-01T20:01:45.638188 #10344]  INFO -- :  in error=
I, [2015-01-01T20:01:45.669388 #10344]  INFO -- :  in error=
I, [2015-01-01T20:01:45.684988 #10344]  INFO -- : back from super
I, [2015-01-01T20:01:45.825388 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}]}
I, [2015-01-01T20:04:04.879236 #10344]  INFO -- : @payment save just done
I, [2015-01-01T20:04:05.629038 #10344]  INFO -- : #<Payment:0x0000000984c598 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"fe9a50ba49730"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009847930 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000926e540 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000926de60 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000926c970 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009267e48 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x00000008051d58 @error=nil>]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000086c6aa8 @base=#<Payment:0x0000000984c598 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="f1ee4b98-91f2-4dee-9065-195adb479141", @header={}>
I, [2015-01-01T20:04:06.362239 #10344]  INFO -- : #<Payment:0x0000000984c598 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"fe9a50ba49730"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009847930 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000926e540 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000926de60 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000926c970 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009267e48 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x00000008051d58 @error=nil>]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000086c6aa8 @base=#<Payment:0x0000000984c598 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="f1ee4b98-91f2-4dee-9065-195adb479141", @header={}>
D, [2015-01-01T20:04:06.502639 #10344] DEBUG -- :   [1m[35m (93.6ms)[0m  commit transaction
I, [2015-01-01T20:04:06.518239 #10344]  INFO -- : about to approve url
I, [2015-01-01T20:04:07.282641 #10344]  INFO -- : #<Payment:0x0000000984c598 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"fe9a50ba49730"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009847930 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000926e540 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000926de60 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000926c970 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009267e48 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x00000008051d58 @error=nil>]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000086c6aa8 @base=#<Payment:0x0000000984c598 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="f1ee4b98-91f2-4dee-9065-195adb479141", @header={}>
I, [2015-01-01T20:04:07.329441 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T20:04:07.376241 #10344]  INFO -- : Completed 302 Found in 154659ms (ActiveRecord: 124.8ms)
D, [2015-01-01T20:04:07.454241 #10344] DEBUG -- : 
D, [2015-01-01T20:04:07.485441 #10344] DEBUG -- : 
I, [2015-01-01T20:04:07.516641 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 20:04:07 +0000
I, [2015-01-01T20:04:09.920045 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T20:04:10.060445 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T20:04:10.294446 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T20:04:10.528446 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (15.6ms)
I, [2015-01-01T20:04:10.575246 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (296.4ms)
D, [2015-01-01T20:04:10.887247 #10344] DEBUG -- :   [1m[36mLineItem Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T20:04:10.980847 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T20:04:11.027647 #10344]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-01T20:04:11.136847 #10344]  INFO -- :   Rendered carts/_cart.html.erb (187.2ms)
I, [2015-01-01T20:04:11.199247 #10344]  INFO -- : Completed 200 OK in 1232ms (Views: 951.6ms | ActiveRecord: 0.0ms)
D, [2015-01-01T20:04:13.397459 #10344] DEBUG -- : 
D, [2015-01-01T20:04:13.413059 #10344] DEBUG -- : 
I, [2015-01-01T20:04:13.459859 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 20:04:13 +0000
I, [2015-01-01T20:04:13.600259 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T20:04:13.662659 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T20:04:13.741660 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T20:04:13.819660 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-01T20:04:13.933261 #10344] DEBUG -- :   [1m[36mLineItem Load (15.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T20:04:14.196862 #10344] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T20:04:14.243662 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T20:04:14.462063 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 20:04:14 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:57e8088,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 20:04:14 UTC +00:00]]
D, [2015-01-01T20:04:14.618063 #10344] DEBUG -- :   [1m[36m (124.8ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T20:04:14.728664 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T20:04:14.815066 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (13.0ms)
I, [2015-01-01T20:04:14.893066 #10344]  INFO -- :   Rendered carts/_cart.html.erb (184.0ms)
I, [2015-01-01T20:04:14.924266 #10344]  INFO -- :   Rendered line_items/create.js.erb (240.8ms)
I, [2015-01-01T20:04:14.986666 #10344]  INFO -- : Completed 200 OK in 1277ms (Views: 321.8ms | ActiveRecord: 157.0ms)
D, [2015-01-01T20:04:15.080469 #10344] DEBUG -- : 
D, [2015-01-01T20:04:15.105470 #10344] DEBUG -- : 
I, [2015-01-01T20:04:15.155473 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 20:04:15 +0000
I, [2015-01-01T20:04:15.270480 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T20:04:15.331483 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T20:04:15.413488 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T20:04:15.488492 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-01T20:04:15.596498 #10344] DEBUG -- :   [1m[36mLineItem Load (3.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T20:04:15.697504 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-01T20:04:15.740507 #10344] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T20:04:15.928517 #10344] DEBUG -- :   [1m[35mSQL (9.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 20:04:15 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:9b0b770,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 20:04:15 UTC +00:00]]
D, [2015-01-01T20:04:16.116528 #10344] DEBUG -- :   [1m[36m (152.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T20:04:16.241328 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-01T20:04:16.351529 #10344] DEBUG -- :   [1m[36mProduct Load (15.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-01T20:04:16.429529 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (124.8ms)
I, [2015-01-01T20:04:16.491929 #10344]  INFO -- :   Rendered carts/_cart.html.erb (297.4ms)
I, [2015-01-01T20:04:16.538729 #10344]  INFO -- :   Rendered line_items/create.js.erb (359.8ms)
I, [2015-01-01T20:04:16.585529 #10344]  INFO -- : Completed 200 OK in 1206ms (Views: 406.6ms | ActiveRecord: 186.6ms)
D, [2015-01-01T20:04:18.002390 #10344] DEBUG -- : 
D, [2015-01-01T20:04:18.033590 #10344] DEBUG -- : 
I, [2015-01-01T20:04:18.080390 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 20:04:18 +0000
I, [2015-01-01T20:04:18.220790 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T20:04:18.345591 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T20:04:18.532791 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T20:04:18.595191 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T20:04:18.773193 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T20:04:18.907993 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T20:04:22.616601 #10344] DEBUG -- :   [1m[35m (15.6ms)[0m  begin transaction
D, [2015-01-01T20:04:22.993002 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 20:04:22 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 20:04:22 UTC +00:00]]
D, [2015-01-01T20:04:23.134402 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 73  [["cart_id", nil], ["order_id", 62], ["updated_at", Thu, 01 Jan 2015 20:04:23 UTC +00:00]]
D, [2015-01-01T20:04:23.259203 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 74[0m  [["cart_id", nil], ["order_id", 62], ["updated_at", Thu, 01 Jan 2015 20:04:23 UTC +00:00]]
I, [2015-01-01T20:04:23.306003 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T20:04:25.318406 #10344] DEBUG -- :   [1m[35mProduct Load (15.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T20:04:25.396406 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T20:04:27.192410 #10344] DEBUG -- :   [1m[35m (15.6ms)[0m  SELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 62]]
W, [2015-01-01T20:04:27.254810 #10344]  WARN -- : undefined method `item_list' for #<PayPal::SDK::Core::API::DataTypes::ArrayWithBlock:0x00000009834718>
I, [2015-01-01T20:04:27.286010 #10344]  INFO -- : in payment.create
I, [2015-01-01T20:04:27.426410 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}]}
I, [2015-01-01T20:04:27.910011 #10344]  INFO -- : #<ActiveModel::Errors:0x000000097b3bb8 @base=#<Payment:0x00000009e45b70 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009e44ea0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009834290 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000982fc90 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000982dad0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000982cef0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000097b3bb8 ...>>, @messages={}>
I, [2015-01-01T20:04:27.941211 #10344]  INFO -- : got past invalid
I, [2015-01-01T20:04:28.003611 #10344]  INFO -- : PayPal-Request-Id: 72e2776c-0aa9-4c9d-842c-abeeb29e6e2b
I, [2015-01-01T20:04:28.050411 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T20:04:29.002013 #10344]  INFO -- : Response[400]: Bad Request, Duration: 0.920s
I, [2015-01-01T20:04:29.033213 #10344]  INFO -- :  in error=
I, [2015-01-01T20:04:29.048813 #10344]  INFO -- :  in error=
I, [2015-01-01T20:04:29.080013 #10344]  INFO -- : back from super
I, [2015-01-01T20:04:29.236013 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}]}
I, [2015-01-01T20:05:42.218174 #10344]  INFO -- : @payment save just done
I, [2015-01-01T20:05:43.091775 #10344]  INFO -- : #<Payment:0x00000009e45b70 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"c94a046eb1527"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009e44ea0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009834290 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000982fc90 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000982dad0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000982cef0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x00000008160f28 @error=nil>]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000097b3bb8 @base=#<Payment:0x00000009e45b70 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="72e2776c-0aa9-4c9d-842c-abeeb29e6e2b", @header={}>
I, [2015-01-01T20:05:43.965377 #10344]  INFO -- : #<Payment:0x00000009e45b70 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"c94a046eb1527"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009e44ea0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009834290 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000982fc90 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000982dad0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000982cef0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x00000008160f28 @error=nil>]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000097b3bb8 @base=#<Payment:0x00000009e45b70 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="72e2776c-0aa9-4c9d-842c-abeeb29e6e2b", @header={}>
D, [2015-01-01T20:05:44.136977 #10344] DEBUG -- :   [1m[36m (124.8ms)[0m  [1mcommit transaction[0m
I, [2015-01-01T20:05:44.183777 #10344]  INFO -- : about to approve url
I, [2015-01-01T20:05:45.057379 #10344]  INFO -- : #<Payment:0x00000009e45b70 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"c94a046eb1527"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009e44ea0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009834290 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000982fc90 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000982dad0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000982cef0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x00000008160f28 @error=nil>]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000097b3bb8 @base=#<Payment:0x00000009e45b70 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="72e2776c-0aa9-4c9d-842c-abeeb29e6e2b", @header={}>
I, [2015-01-01T20:05:45.119779 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T20:05:45.166579 #10344]  INFO -- : Completed 302 Found in 86899ms (ActiveRecord: 218.4ms)
D, [2015-01-01T20:05:45.244579 #10344] DEBUG -- : 
D, [2015-01-01T20:05:45.275779 #10344] DEBUG -- : 
I, [2015-01-01T20:05:45.322579 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 20:05:45 +0000
I, [2015-01-01T20:05:47.679183 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T20:05:47.803983 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T20:05:48.006784 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-01T20:05:48.225184 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (0.0ms)
I, [2015-01-01T20:05:48.271984 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (280.8ms)
D, [2015-01-01T20:05:48.552785 #10344] DEBUG -- :   [1m[35mLineItem Exists (0.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T20:05:48.661985 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T20:05:48.708785 #10344]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-01T20:05:48.817985 #10344]  INFO -- :   Rendered carts/_cart.html.erb (202.8ms)
I, [2015-01-01T20:05:48.880385 #10344]  INFO -- : Completed 200 OK in 1154ms (Views: 904.8ms | ActiveRecord: 0.0ms)
D, [2015-01-01T20:05:56.202204 #10344] DEBUG -- : 
D, [2015-01-01T20:05:56.217804 #10344] DEBUG -- : 
I, [2015-01-01T20:05:56.280204 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 20:05:56 +0000
I, [2015-01-01T20:05:56.405004 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T20:05:56.479405 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T20:05:56.541805 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T20:05:56.619805 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-01T20:05:56.729005 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T20:05:56.993606 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T20:05:57.040406 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T20:05:57.243207 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 20:05:57 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:9276498,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 20:05:57 UTC +00:00]]
D, [2015-01-01T20:05:57.433808 #10344] DEBUG -- :   [1m[35m (140.4ms)[0m  commit transaction
D, [2015-01-01T20:05:57.548410 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T20:05:57.624811 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T20:05:57.687211 #10344]  INFO -- :   Rendered carts/_cart.html.erb (194.6ms)
I, [2015-01-01T20:05:57.734011 #10344]  INFO -- :   Rendered line_items/create.js.erb (241.4ms)
I, [2015-01-01T20:05:57.780811 #10344]  INFO -- : Completed 200 OK in 1255ms (Views: 296.2ms | ActiveRecord: 156.0ms)
D, [2015-01-01T20:05:57.843211 #10344] DEBUG -- : 
D, [2015-01-01T20:05:57.873812 #10344] DEBUG -- : 
I, [2015-01-01T20:05:57.922815 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 20:05:57 +0000
I, [2015-01-01T20:05:58.040821 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T20:05:58.102825 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T20:05:58.178829 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T20:05:58.254834 #10344] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-01T20:05:58.355839 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T20:05:58.453845 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T20:05:58.494847 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-01T20:05:58.677858 #10344] DEBUG -- :   [1m[36mSQL (10.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 20:05:58 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:5d37728,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 20:05:58 UTC +00:00]]
D, [2015-01-01T20:05:58.836867 #10344] DEBUG -- :   [1m[35m (121.0ms)[0m  commit transaction
D, [2015-01-01T20:05:58.928471 #10344] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-01T20:05:59.053271 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-01T20:05:59.115672 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (124.8ms)
I, [2015-01-01T20:05:59.178072 #10344]  INFO -- :   Rendered carts/_cart.html.erb (270.0ms)
I, [2015-01-01T20:05:59.224872 #10344]  INFO -- :   Rendered line_items/create.js.erb (313.2ms)
I, [2015-01-01T20:05:59.271672 #10344]  INFO -- : Completed 200 OK in 1121ms (Views: 382.0ms | ActiveRecord: 143.0ms)
D, [2015-01-01T20:06:00.640733 #10344] DEBUG -- : 
D, [2015-01-01T20:06:00.671933 #10344] DEBUG -- : 
I, [2015-01-01T20:06:00.718733 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 20:06:00 +0000
I, [2015-01-01T20:06:00.890333 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T20:06:01.015133 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T20:06:01.211735 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T20:06:01.290735 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T20:06:01.462336 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T20:06:01.618336 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T20:06:06.432546 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T20:06:06.760146 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 01 Jan 2015 20:06:06 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 20:06:06 UTC +00:00]]
D, [2015-01-01T20:06:06.900547 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 75[0m  [["cart_id", nil], ["order_id", 63], ["updated_at", Thu, 01 Jan 2015 20:06:06 UTC +00:00]]
D, [2015-01-01T20:06:07.025347 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 76  [["cart_id", nil], ["order_id", 63], ["updated_at", Thu, 01 Jan 2015 20:06:06 UTC +00:00]]
I, [2015-01-01T20:06:07.072147 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T20:06:07.134547 #10344] DEBUG -- :   [1m[36m (15.6ms)[0m  [1mrollback transaction[0m
I, [2015-01-01T20:06:07.181347 #10344]  INFO -- : Completed 500 Internal Server Error in 6244ms
F, [2015-01-01T20:06:07.352947 #10344] FATAL -- : 
SyntaxError (c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:54: syntax error, unexpected =>, expecting keyword_end
...sactions.item_list << :items => { :name => "penknife", :sku ...
...                               ^):
  app/models/order.rb:41:in `create_payment'
  app/controllers/orders_controller.rb:155:in `ppcheckout'


I, [2015-01-01T20:06:07.665948 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (15.6ms)
I, [2015-01-01T20:06:07.759548 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (15.6ms)
I, [2015-01-01T20:06:07.899948 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (15.6ms)
I, [2015-01-01T20:06:07.962348 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (358.8ms)
D, [2015-01-01T20:06:08.090951 #10344] DEBUG -- : 
D, [2015-01-01T20:06:08.107952 #10344] DEBUG -- : 
I, [2015-01-01T20:06:08.144954 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 20:06:08 +0000
I, [2015-01-01T20:06:08.244959 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T20:06:08.305963 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T20:06:08.363966 #10344] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T20:06:08.421970 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T20:06:08.495974 #10344] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T20:06:08.592979 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T20:06:09.781047 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-01T20:06:09.885053 #10344] DEBUG -- :   [1m[36mSQL (7.0ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 20:06:09 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 20:06:09 UTC +00:00]]
D, [2015-01-01T20:06:10.002060 #10344] DEBUG -- :   [1m[35mSQL (4.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 75  [["cart_id", nil], ["order_id", 63], ["updated_at", Thu, 01 Jan 2015 20:06:09 UTC +00:00]]
D, [2015-01-01T20:06:10.141068 #10344] DEBUG -- :   [1m[36mSQL (3.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 76[0m  [["cart_id", nil], ["order_id", 63], ["updated_at", Thu, 01 Jan 2015 20:06:10 UTC +00:00]]
I, [2015-01-01T20:06:10.175070 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T20:06:10.243074 #10344] DEBUG -- :   [1m[35m (12.0ms)[0m  rollback transaction
I, [2015-01-01T20:06:10.290076 #10344]  INFO -- : Completed 500 Internal Server Error in 2001ms
F, [2015-01-01T20:06:10.493088 #10344] FATAL -- : 
SyntaxError (c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:54: syntax error, unexpected =>, expecting keyword_end
...sactions.item_list << :items => { :name => "penknife", :sku ...
...                               ^):
  app/models/order.rb:41:in `create_payment'
  app/controllers/orders_controller.rb:155:in `ppcheckout'


I, [2015-01-01T20:06:10.807106 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (13.0ms)
I, [2015-01-01T20:06:10.940114 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (18.0ms)
I, [2015-01-01T20:06:11.078122 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (12.0ms)
I, [2015-01-01T20:06:11.176127 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (412.0ms)
D, [2015-01-01T20:07:14.947491 #10344] DEBUG -- : 
D, [2015-01-01T20:07:14.979092 #10344] DEBUG -- : 
I, [2015-01-01T20:07:15.037095 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 20:07:14 +0000
I, [2015-01-01T20:07:18.093270 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T20:07:18.240278 #10344] DEBUG -- :   [1m[36mCart Load (3.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T20:07:18.499293 #10344] DEBUG -- :   [1m[35mProduct Load (3.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T20:07:18.758308 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (5.0ms)
I, [2015-01-01T20:07:18.805311 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (339.0ms)
D, [2015-01-01T20:07:19.139330 #10344] DEBUG -- :   [1m[36mLineItem Exists (3.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T20:07:19.234335 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-01T20:07:19.571355 #10344] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T20:07:19.686361 #10344] DEBUG -- :   [1m[35mProduct Load (3.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
I, [2015-01-01T20:07:19.748365 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (253.0ms)
I, [2015-01-01T20:07:19.897373 #10344]  INFO -- :   Rendered carts/_cart.html.erb (707.0ms)
I, [2015-01-01T20:07:19.974378 #10344]  INFO -- : Completed 200 OK in 1836ms (Views: 1501.1ms | ActiveRecord: 45.0ms)
D, [2015-01-01T20:07:20.378401 #10344] DEBUG -- : 
D, [2015-01-01T20:07:20.418403 #10344] DEBUG -- : 
I, [2015-01-01T20:07:20.489407 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 20:07:20 +0000
D, [2015-01-01T20:07:20.571412 #10344] DEBUG -- : 
D, [2015-01-01T20:07:20.595413 #10344] DEBUG -- : 
I, [2015-01-01T20:07:20.657417 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 20:07:20 +0000
D, [2015-01-01T20:07:20.731421 #10344] DEBUG -- : 
D, [2015-01-01T20:07:20.755422 #10344] DEBUG -- : 
I, [2015-01-01T20:07:20.817426 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 20:07:20 +0000
D, [2015-01-01T20:07:20.893430 #10344] DEBUG -- : 
D, [2015-01-01T20:07:20.919432 #10344] DEBUG -- : 
I, [2015-01-01T20:07:20.989436 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 20:07:20 +0000
D, [2015-01-01T20:07:21.066440 #10344] DEBUG -- : 
D, [2015-01-01T20:07:21.091442 #10344] DEBUG -- : 
I, [2015-01-01T20:07:21.154445 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 20:07:21 +0000
D, [2015-01-01T20:07:21.231450 #10344] DEBUG -- : 
D, [2015-01-01T20:07:21.258451 #10344] DEBUG -- : 
I, [2015-01-01T20:07:21.329455 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 20:07:21 +0000
D, [2015-01-01T20:07:21.405459 #10344] DEBUG -- : 
D, [2015-01-01T20:07:21.429461 #10344] DEBUG -- : 
I, [2015-01-01T20:07:21.490464 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 20:07:21 +0000
D, [2015-01-01T20:07:21.572469 #10344] DEBUG -- : 
D, [2015-01-01T20:07:21.598471 #10344] DEBUG -- : 
I, [2015-01-01T20:07:21.662474 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 20:07:21 +0000
D, [2015-01-01T20:07:21.738479 #10344] DEBUG -- : 
D, [2015-01-01T20:07:21.763480 #10344] DEBUG -- : 
I, [2015-01-01T20:07:21.827484 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 20:07:21 +0000
D, [2015-01-01T20:07:21.904488 #10344] DEBUG -- : 
D, [2015-01-01T20:07:21.929489 #10344] DEBUG -- : 
I, [2015-01-01T20:07:22.002494 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 20:07:21 +0000
D, [2015-01-01T20:07:22.077498 #10344] DEBUG -- : 
D, [2015-01-01T20:07:22.103499 #10344] DEBUG -- : 
I, [2015-01-01T20:07:22.171503 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 20:07:22 +0000
D, [2015-01-01T20:07:22.250508 #10344] DEBUG -- : 
D, [2015-01-01T20:07:22.276509 #10344] DEBUG -- : 
I, [2015-01-01T20:07:22.335513 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 20:07:22 +0000
D, [2015-01-01T20:07:22.414517 #10344] DEBUG -- : 
D, [2015-01-01T20:07:22.432518 #10344] DEBUG -- : 
I, [2015-01-01T20:07:22.482521 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 20:07:22 +0000
D, [2015-01-01T20:07:22.580527 #10344] DEBUG -- : 
D, [2015-01-01T20:07:22.611528 #10344] DEBUG -- : 
I, [2015-01-01T20:07:22.680532 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 20:07:22 +0000
D, [2015-01-01T20:07:22.756537 #10344] DEBUG -- : 
D, [2015-01-01T20:07:22.779538 #10344] DEBUG -- : 
I, [2015-01-01T20:07:22.846542 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 20:07:22 +0000
D, [2015-01-01T20:07:22.921546 #10344] DEBUG -- : 
D, [2015-01-01T20:07:22.946548 #10344] DEBUG -- : 
I, [2015-01-01T20:07:23.022552 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 20:07:22 +0000
D, [2015-01-01T20:07:23.101557 #10344] DEBUG -- : 
D, [2015-01-01T20:07:23.135558 #10344] DEBUG -- : 
I, [2015-01-01T20:07:23.192562 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 20:07:23 +0000
D, [2015-01-01T20:07:23.270566 #10344] DEBUG -- : 
D, [2015-01-01T20:07:23.291567 #10344] DEBUG -- : 
I, [2015-01-01T20:07:23.343570 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 20:07:23 +0000
D, [2015-01-01T20:07:23.423575 #10344] DEBUG -- : 
D, [2015-01-01T20:07:23.444576 #10344] DEBUG -- : 
I, [2015-01-01T20:07:23.500579 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 20:07:23 +0000
D, [2015-01-01T20:07:23.582584 #10344] DEBUG -- : 
D, [2015-01-01T20:07:23.606585 #10344] DEBUG -- : 
I, [2015-01-01T20:07:23.656588 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 20:07:23 +0000
D, [2015-01-01T20:07:23.739593 #10344] DEBUG -- : 
D, [2015-01-01T20:07:23.755594 #10344] DEBUG -- : 
I, [2015-01-01T20:07:23.803597 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 20:07:23 +0000
D, [2015-01-01T20:07:23.916603 #10344] DEBUG -- : 
D, [2015-01-01T20:07:23.938604 #10344] DEBUG -- : 
I, [2015-01-01T20:07:24.015609 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 20:07:23 +0000
D, [2015-01-01T20:07:24.103614 #10344] DEBUG -- : 
D, [2015-01-01T20:07:24.134616 #10344] DEBUG -- : 
I, [2015-01-01T20:07:24.202619 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 20:07:24 +0000
D, [2015-01-01T20:07:24.301625 #10344] DEBUG -- : 
D, [2015-01-01T20:07:24.326627 #10344] DEBUG -- : 
I, [2015-01-01T20:07:24.384630 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 20:07:24 +0000
D, [2015-01-01T20:07:24.465635 #10344] DEBUG -- : 
D, [2015-01-01T20:07:24.486636 #10344] DEBUG -- : 
I, [2015-01-01T20:07:24.537639 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 20:07:24 +0000
D, [2015-01-01T20:07:24.623644 #10344] DEBUG -- : 
D, [2015-01-01T20:07:24.643645 #10344] DEBUG -- : 
I, [2015-01-01T20:07:24.698648 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 20:07:24 +0000
D, [2015-01-01T20:07:24.803654 #10344] DEBUG -- : 
D, [2015-01-01T20:07:24.841656 #10344] DEBUG -- : 
I, [2015-01-01T20:07:24.901659 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 20:07:24 +0000
D, [2015-01-01T20:07:25.011666 #10344] DEBUG -- : 
D, [2015-01-01T20:07:25.035667 #10344] DEBUG -- : 
I, [2015-01-01T20:07:25.090670 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 20:07:25 +0000
D, [2015-01-01T20:07:25.166675 #10344] DEBUG -- : 
D, [2015-01-01T20:07:25.187676 #10344] DEBUG -- : 
I, [2015-01-01T20:07:25.242679 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 20:07:25 +0000
D, [2015-01-01T20:07:26.476094 #10344] DEBUG -- : 
D, [2015-01-01T20:07:26.507294 #10344] DEBUG -- : 
I, [2015-01-01T20:07:26.554094 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 20:07:26 +0000
I, [2015-01-01T20:07:26.739695 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T20:07:26.786495 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T20:07:26.880096 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T20:07:26.958096 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-01T20:07:27.075296 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T20:07:27.122096 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T20:07:27.262497 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = 75[0m  [["quantity", 2], ["updated_at", Thu, 01 Jan 2015 20:07:27 UTC +00:00]]
D, [2015-01-01T20:07:27.387297 #10344] DEBUG -- :   [1m[35m (93.6ms)[0m  commit transaction
D, [2015-01-01T20:07:27.512097 #10344] DEBUG -- :   [1m[36mLineItem Load (15.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-01T20:07:27.622099 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T20:07:27.739701 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
I, [2015-01-01T20:07:27.802101 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (227.6ms)
I, [2015-01-01T20:07:27.880101 #10344]  INFO -- :   Rendered carts/_cart.html.erb (414.8ms)
I, [2015-01-01T20:07:27.926901 #10344]  INFO -- :   Rendered line_items/create.js.erb (461.6ms)
I, [2015-01-01T20:07:27.973701 #10344]  INFO -- : Completed 200 OK in 1125ms (Views: 520.0ms | ActiveRecord: 128.8ms)
D, [2015-01-01T20:07:28.020501 #10344] DEBUG -- : 
D, [2015-01-01T20:07:28.036101 #10344] DEBUG -- : 
I, [2015-01-01T20:07:28.097704 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 20:07:28 +0000
I, [2015-01-01T20:07:28.224711 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T20:07:28.291715 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T20:07:28.378720 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T20:07:28.469725 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-01T20:07:28.585732 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T20:07:28.638735 #10344] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T20:07:28.770742 #10344] DEBUG -- :   [1m[35mSQL (8.0ms)[0m  UPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = 76  [["quantity", 2], ["updated_at", Thu, 01 Jan 2015 20:07:28 UTC +00:00]]
D, [2015-01-01T20:07:28.916751 #10344] DEBUG -- :   [1m[36m (103.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T20:07:29.065759 #10344] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-01T20:07:29.173761 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T20:07:29.282961 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
I, [2015-01-01T20:07:29.345361 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (229.4ms)
I, [2015-01-01T20:07:29.438962 #10344]  INFO -- :   Rendered carts/_cart.html.erb (427.4ms)
I, [2015-01-01T20:07:29.470162 #10344]  INFO -- :   Rendered line_items/create.js.erb (488.2ms)
I, [2015-01-01T20:07:29.529962 #10344]  INFO -- : Completed 200 OK in 1176ms (Views: 546.4ms | ActiveRecord: 121.0ms)
D, [2015-01-01T20:07:30.233201 #10344] DEBUG -- : 
D, [2015-01-01T20:07:30.257202 #10344] DEBUG -- : 
I, [2015-01-01T20:07:30.308205 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 20:07:30 +0000
I, [2015-01-01T20:07:30.472215 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T20:07:30.608222 #10344] DEBUG -- :   [1m[36mUser Load (3.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T20:07:30.826623 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T20:07:30.908425 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T20:07:31.095625 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T20:07:31.238026 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T20:07:34.469433 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T20:07:34.859434 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 01 Jan 2015 20:07:34 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 20:07:34 UTC +00:00]]
D, [2015-01-01T20:07:34.999834 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 75[0m  [["cart_id", nil], ["order_id", 63], ["updated_at", Thu, 01 Jan 2015 20:07:34 UTC +00:00]]
D, [2015-01-01T20:07:35.155834 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 76  [["cart_id", nil], ["order_id", 63], ["updated_at", Thu, 01 Jan 2015 20:07:35 UTC +00:00]]
I, [2015-01-01T20:07:35.187034 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T20:07:36.655437 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T20:07:36.764637 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-01T20:07:38.403640 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 63]]
W, [2015-01-01T20:07:38.466040 #10344]  WARN -- : undefined method `item_list' for #<PayPal::SDK::Core::API::DataTypes::ArrayWithBlock:0x00000005a05fa0>
I, [2015-01-01T20:07:38.497240 #10344]  INFO -- : in payment.create
I, [2015-01-01T20:07:38.637641 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"77.96"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"77.96", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}]}
I, [2015-01-01T20:07:39.183642 #10344]  INFO -- : #<ActiveModel::Errors:0x0000000596caf8 @base=#<Payment:0x00000007d93c10 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007d92ba8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005a05870 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005a04dd0 @error=nil, @total="77.96", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000059ef2a0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000059ee080 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="77.96", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000596caf8 ...>>, @messages={}>
I, [2015-01-01T20:07:39.214842 #10344]  INFO -- : got past invalid
I, [2015-01-01T20:07:39.308442 #10344]  INFO -- : PayPal-Request-Id: 86b7bdb7-c50d-475c-9826-3128b6df1f80
I, [2015-01-01T20:07:39.355242 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T20:07:40.431644 #10344]  INFO -- : Response[400]: Bad Request, Duration: 1.030s
I, [2015-01-01T20:07:40.447244 #10344]  INFO -- :  in error=
I, [2015-01-01T20:07:40.478444 #10344]  INFO -- :  in error=
I, [2015-01-01T20:07:40.509644 #10344]  INFO -- : back from super
I, [2015-01-01T20:07:40.665644 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"77.96"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"77.96", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}]}
I, [2015-01-01T23:23:52.765413 #10344]  INFO -- : @payment save just done
I, [2015-01-01T23:23:53.420614 #10344]  INFO -- : #<Payment:0x00000007d93c10 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"d5a4c461e3649"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007d92ba8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005a05870 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005a04dd0 @error=nil, @total="77.96", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000059ef2a0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000059ee080 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="77.96", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:name=>"fred"}], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000596caf8 @base=#<Payment:0x00000007d93c10 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="86b7bdb7-c50d-475c-9826-3128b6df1f80", @header={}>
I, [2015-01-01T23:23:53.935415 #10344]  INFO -- : #<Payment:0x00000007d93c10 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"d5a4c461e3649"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007d92ba8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005a05870 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005a04dd0 @error=nil, @total="77.96", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000059ef2a0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000059ee080 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="77.96", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:name=>"fred"}], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000596caf8 @base=#<Payment:0x00000007d93c10 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="86b7bdb7-c50d-475c-9826-3128b6df1f80", @header={}>
D, [2015-01-01T23:23:54.122615 #10344] DEBUG -- :   [1m[35m (171.6ms)[0m  commit transaction
I, [2015-01-01T23:23:54.138215 #10344]  INFO -- : about to approve url
I, [2015-01-01T23:23:54.481416 #10344]  INFO -- : #<Payment:0x00000007d93c10 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"d5a4c461e3649"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007d92ba8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005a05870 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005a04dd0 @error=nil, @total="77.96", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000059ef2a0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000059ee080 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="77.96", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:name=>"fred"}], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000596caf8 @base=#<Payment:0x00000007d93c10 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="86b7bdb7-c50d-475c-9826-3128b6df1f80", @header={}>
I, [2015-01-01T23:23:54.512616 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T23:23:54.528216 #10344]  INFO -- : Completed 302 Found in 11784038ms (ActiveRecord: 190.2ms)
D, [2015-01-01T23:24:03.200833 #10344] DEBUG -- : 
D, [2015-01-01T23:24:03.232033 #10344] DEBUG -- : 
I, [2015-01-01T23:24:03.294433 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 23:24:03 +0000
I, [2015-01-01T23:24:05.643838 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T23:24:05.706238 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T23:24:05.846638 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T23:24:06.080638 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-01T23:24:06.377039 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T23:24:06.707139 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T23:24:06.753940 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T23:24:06.972340 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 23:24:06 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:9bd06d8,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 23:24:06 UTC +00:00]]
D, [2015-01-01T23:24:07.175140 #10344] DEBUG -- :   [1m[36m (156.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T23:24:07.299940 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T23:24:07.393541 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T23:24:07.502741 #10344]  INFO -- :   Rendered carts/_cart.html.erb (249.6ms)
I, [2015-01-01T23:24:07.549541 #10344]  INFO -- :   Rendered line_items/create.js.erb (296.4ms)
I, [2015-01-01T23:24:07.596341 #10344]  INFO -- : Completed 200 OK in 1843ms (Views: 374.4ms | ActiveRecord: 171.6ms)
D, [2015-01-01T23:24:10.710162 #10344] DEBUG -- : 
D, [2015-01-01T23:24:10.741362 #10344] DEBUG -- : 
I, [2015-01-01T23:24:10.788162 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 23:24:10 +0000
I, [2015-01-01T23:24:10.928562 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T23:24:10.990962 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T23:24:11.084562 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T23:24:11.162562 #10344] DEBUG -- :   [1m[35mProduct Load (15.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-01T23:24:11.287363 #10344] DEBUG -- :   [1m[36mLineItem Load (15.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T23:24:11.396563 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-01T23:24:11.443363 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T23:24:11.646163 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 23:24:11 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:7ea63f0,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 23:24:11 UTC +00:00]]
D, [2015-01-01T23:24:11.817764 #10344] DEBUG -- :   [1m[36m (109.2ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T23:24:11.926964 #10344] DEBUG -- :   [1m[35mLineItem Load (15.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-01T23:24:12.067364 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-01T23:24:12.129764 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (140.4ms)
I, [2015-01-01T23:24:12.207764 #10344]  INFO -- :   Rendered carts/_cart.html.erb (327.6ms)
I, [2015-01-01T23:24:12.254564 #10344]  INFO -- :   Rendered line_items/create.js.erb (390.0ms)
I, [2015-01-01T23:24:12.301364 #10344]  INFO -- : Completed 200 OK in 1264ms (Views: 421.2ms | ActiveRecord: 171.6ms)
D, [2015-01-01T23:24:15.305885 #10344] DEBUG -- : 
D, [2015-01-01T23:24:15.321485 #10344] DEBUG -- : 
I, [2015-01-01T23:24:15.368285 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 23:24:15 +0000
I, [2015-01-01T23:24:15.508685 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T23:24:15.664686 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T23:24:15.836286 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T23:24:15.898686 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T23:24:16.039086 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T23:24:16.163887 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T23:24:23.546601 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T23:24:23.874201 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 23:24:23 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 23:24:23 UTC +00:00]]
D, [2015-01-01T23:24:23.983402 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 77  [["cart_id", nil], ["order_id", 64], ["updated_at", Thu, 01 Jan 2015 23:24:23 UTC +00:00]]
D, [2015-01-01T23:24:24.077002 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 78[0m  [["cart_id", nil], ["order_id", 64], ["updated_at", Thu, 01 Jan 2015 23:24:23 UTC +00:00]]
I, [2015-01-01T23:24:24.108202 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T23:24:27.620708 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T23:24:27.714308 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T23:24:30.056812 #10344] DEBUG -- :   [1m[35m (15.6ms)[0m  SELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 64]]
I, [2015-01-01T23:25:38.016332 #10344]  INFO -- : in order=
I, [2015-01-01T23:25:38.031932 #10344]  INFO -- : in payment.create
I, [2015-01-01T23:25:38.281533 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}, {:item_list=>{:items=>{:name=>"penknife", :sku=>"PK1", :price=>14.99, :currency=>"GBP", :quantity=>1}}, :description=>"King Clothing"}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/64/confirm", "cancel_url"=>"http://localhost:3000/orders/64/cancel"}}
I, [2015-01-01T23:25:38.905534 #10344]  INFO -- : #<ActiveModel::Errors:0x000000056d5768 @base=#<Payment:0x0000000592f860 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000592cf70 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a130358 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a12b308 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a128e50 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a123e00 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:item_list=>{:items=>{:name=>"penknife", :sku=>"PK1", :price=>14.99, :currency=>"GBP", :quantity=>1}}, :description=>"King Clothing"}], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000057b95d0 @error=nil, @return_url="http://localhost:3000/orders/64/confirm", @cancel_url="http://localhost:3000/orders/64/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000056d5768 ...>>, @messages={}>
I, [2015-01-01T23:25:38.936734 #10344]  INFO -- : got past invalid
I, [2015-01-01T23:25:39.045934 #10344]  INFO -- : PayPal-Request-Id: 49754bac-9f50-494b-9c52-b200ac29f256
I, [2015-01-01T23:25:39.092734 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T23:25:40.458437 #10344]  INFO -- : Response[400]: Bad Request, Duration: 1.335s
I, [2015-01-01T23:25:40.474037 #10344]  INFO -- : back from super
I, [2015-01-01T23:25:40.708037 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}, {:item_list=>{:items=>{:name=>"penknife", :sku=>"PK1", :price=>14.99, :currency=>"GBP", :quantity=>1}}, :description=>"King Clothing"}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/64/confirm", "cancel_url"=>"http://localhost:3000/orders/64/cancel"}}
I, [2015-01-02T08:18:55.322143 #10344]  INFO -- : @payment save just done
I, [2015-01-02T08:18:56.102144 #10344]  INFO -- : #<Payment:0x0000000592f860 @error={"name"=>"MALFORMED_REQUEST", "message"=>"Incoming JSON request does not map to API request", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#MALFORMED_REQUEST", "debug_id"=>"4765a7d73cb15"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000592cf70 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a130358 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a12b308 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a128e50 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a123e00 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x000000086be858 @error=nil>]>, @description="King Clothing">, {:item_list=>{:items=>{:name=>"penknife", :sku=>"PK1", :price=>14.99, :currency=>"GBP", :quantity=>1}}, :description=>"King Clothing"}], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000057b95d0 @error=nil, @return_url="http://localhost:3000/orders/64/confirm", @cancel_url="http://localhost:3000/orders/64/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000056d5768 @base=#<Payment:0x0000000592f860 ...>, @messages={}>, @request_id="49754bac-9f50-494b-9c52-b200ac29f256", @header={}>
I, [2015-01-02T08:18:56.835345 #10344]  INFO -- : #<Payment:0x0000000592f860 @error={"name"=>"MALFORMED_REQUEST", "message"=>"Incoming JSON request does not map to API request", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#MALFORMED_REQUEST", "debug_id"=>"4765a7d73cb15"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000592cf70 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a130358 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a12b308 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a128e50 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a123e00 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x000000086be858 @error=nil>]>, @description="King Clothing">, {:item_list=>{:items=>{:name=>"penknife", :sku=>"PK1", :price=>14.99, :currency=>"GBP", :quantity=>1}}, :description=>"King Clothing"}], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000057b95d0 @error=nil, @return_url="http://localhost:3000/orders/64/confirm", @cancel_url="http://localhost:3000/orders/64/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000056d5768 @base=#<Payment:0x0000000592f860 ...>, @messages={}>, @request_id="49754bac-9f50-494b-9c52-b200ac29f256", @header={}>
D, [2015-01-02T08:18:57.022545 #10344] DEBUG -- :   [1m[36m (156.0ms)[0m  [1mcommit transaction[0m
I, [2015-01-02T08:18:57.053746 #10344]  INFO -- : about to approve url
I, [2015-01-02T08:18:57.849347 #10344]  INFO -- : #<Payment:0x0000000592f860 @error={"name"=>"MALFORMED_REQUEST", "message"=>"Incoming JSON request does not map to API request", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#MALFORMED_REQUEST", "debug_id"=>"4765a7d73cb15"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000592cf70 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a130358 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a12b308 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a128e50 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a123e00 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x000000086be858 @error=nil>]>, @description="King Clothing">, {:item_list=>{:items=>{:name=>"penknife", :sku=>"PK1", :price=>14.99, :currency=>"GBP", :quantity=>1}}, :description=>"King Clothing"}], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000057b95d0 @error=nil, @return_url="http://localhost:3000/orders/64/confirm", @cancel_url="http://localhost:3000/orders/64/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000056d5768 @base=#<Payment:0x0000000592f860 ...>, @messages={}>, @request_id="49754bac-9f50-494b-9c52-b200ac29f256", @header={}>
I, [2015-01-02T08:18:57.896147 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-02T08:18:57.958547 #10344]  INFO -- : Completed 302 Found in 32082387ms (ActiveRecord: 218.4ms)
D, [2015-01-02T08:18:58.005347 #10344] DEBUG -- : 
D, [2015-01-02T08:18:58.020947 #10344] DEBUG -- : 
I, [2015-01-02T08:18:58.083347 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-02 08:18:58 +0000
I, [2015-01-02T08:19:00.439952 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-02T08:19:00.564752 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-02T08:19:00.751952 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-02T08:19:00.892352 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T08:19:01.174153 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-02T08:19:01.298953 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-02T08:19:03.921758 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-02T08:19:04.296158 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Fri, 02 Jan 2015 08:19:04 UTC +00:00], ["updated_at", Fri, 02 Jan 2015 08:19:04 UTC +00:00]]
I, [2015-01-02T08:19:04.342958 #10344]  INFO -- : about to @payment.create
D, [2015-01-02T08:19:04.405359 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  rollback transaction
I, [2015-01-02T08:19:04.452159 #10344]  INFO -- : Completed 500 Internal Server Error in 3965ms
F, [2015-01-02T08:19:04.966960 #10344] FATAL -- : 
SyntaxError (c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:49: syntax error, unexpected tSYMBEG, expecting '}'
          :name2 => "Pen knife", :sku2 =...
           ^
c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:49: syntax error, unexpected ',', expecting keyword_end
...         :name2 => "Pen knife", :sku2 => "Pen knife", :price...
...                               ^
c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:49: syntax error, unexpected ',', expecting keyword_end
...n knife", :sku2 => "Pen knife", :price2 => 2.99, :currency2 ...
...                               ^
c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:49: syntax error, unexpected ',', expecting keyword_end
...2 => 2.99, :currency2 => "GBP", :quantity2 => 1 }
...                               ^
c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:53: syntax error, unexpected '}', expecting keyword_end):
  app/models/order.rb:41:in `create_payment'
  app/controllers/orders_controller.rb:155:in `ppcheckout'


I, [2015-01-02T08:19:05.278960 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (15.6ms)
I, [2015-01-02T08:19:05.388160 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (15.6ms)
I, [2015-01-02T08:19:05.512961 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (15.6ms)
I, [2015-01-02T08:19:05.606561 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (343.2ms)
D, [2015-01-02T08:19:05.758367 #10344] DEBUG -- : 
D, [2015-01-02T08:19:05.778368 #10344] DEBUG -- : 
I, [2015-01-02T08:19:05.825371 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-02 08:19:05 +0000
I, [2015-01-02T08:19:05.933377 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-02T08:19:06.020382 #10344] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-02T08:19:06.087386 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-02T08:19:06.152389 #10344] DEBUG -- :   [1m[36mCart Load (1.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-02T08:19:06.243395 #10344] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-02T08:19:06.359401 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-02T08:19:08.947549 #10344] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-02T08:19:09.097558 #10344] DEBUG -- :   [1m[35mSQL (6.0ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Fri, 02 Jan 2015 08:19:08 UTC +00:00], ["updated_at", Fri, 02 Jan 2015 08:19:08 UTC +00:00]]
I, [2015-01-02T08:19:09.135560 #10344]  INFO -- : about to @payment.create
D, [2015-01-02T08:19:09.204564 #10344] DEBUG -- :   [1m[36m (12.0ms)[0m  [1mrollback transaction[0m
I, [2015-01-02T08:19:09.250567 #10344]  INFO -- : Completed 500 Internal Server Error in 3274ms
F, [2015-01-02T08:19:09.755595 #10344] FATAL -- : 
SyntaxError (c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:49: syntax error, unexpected tSYMBEG, expecting '}'
          :name2 => "Pen knife", :sku2 =...
           ^
c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:49: syntax error, unexpected ',', expecting keyword_end
...         :name2 => "Pen knife", :sku2 => "Pen knife", :price...
...                               ^
c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:49: syntax error, unexpected ',', expecting keyword_end
...n knife", :sku2 => "Pen knife", :price2 => 2.99, :currency2 ...
...                               ^
c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:49: syntax error, unexpected ',', expecting keyword_end
...2 => 2.99, :currency2 => "GBP", :quantity2 => 1 }
...                               ^
c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:53: syntax error, unexpected '}', expecting keyword_end):
  app/models/order.rb:41:in `create_payment'
  app/controllers/orders_controller.rb:155:in `ppcheckout'


I, [2015-01-02T08:19:10.066613 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (13.0ms)
I, [2015-01-02T08:19:10.197621 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (18.0ms)
I, [2015-01-02T08:19:10.337629 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (11.0ms)
I, [2015-01-02T08:19:10.435634 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (409.0ms)
D, [2015-01-02T08:19:54.537774 #10344] DEBUG -- : 
D, [2015-01-02T08:19:54.564374 #10344] DEBUG -- : 
I, [2015-01-02T08:19:54.601376 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-02 08:19:54 +0000
I, [2015-01-02T08:19:57.233527 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-02T08:19:57.367535 #10344] DEBUG -- :   [1m[35mCart Load (3.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T08:19:57.624549 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-02T08:19:57.863563 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (4.0ms)
I, [2015-01-02T08:19:57.904565 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (308.0ms)
D, [2015-01-02T08:19:58.205582 #10344] DEBUG -- :   [1m[35mLineItem Exists (2.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 36]]
D, [2015-01-02T08:19:58.291587 #10344] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-02T08:19:58.322589 #10344]  INFO -- :   Rendered collection (1.0ms)
I, [2015-01-02T08:19:58.431595 #10344]  INFO -- :   Rendered carts/_cart.html.erb (183.0ms)
I, [2015-01-02T08:19:58.500599 #10344]  INFO -- : Completed 200 OK in 1224ms (Views: 907.1ms | ActiveRecord: 31.0ms)
D, [2015-01-02T08:19:58.833618 #10344] DEBUG -- : 
D, [2015-01-02T08:19:58.887621 #10344] DEBUG -- : 
I, [2015-01-02T08:19:58.956625 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-02 08:19:58 +0000
D, [2015-01-02T08:19:59.021629 #10344] DEBUG -- : 
D, [2015-01-02T08:19:59.036630 #10344] DEBUG -- : 
I, [2015-01-02T08:19:59.071632 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-02 08:19:59 +0000
D, [2015-01-02T08:19:59.154637 #10344] DEBUG -- : 
D, [2015-01-02T08:19:59.168638 #10344] DEBUG -- : 
I, [2015-01-02T08:19:59.203640 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-02 08:19:59 +0000
D, [2015-01-02T08:19:59.261643 #10344] DEBUG -- : 
D, [2015-01-02T08:19:59.277644 #10344] DEBUG -- : 
I, [2015-01-02T08:19:59.320646 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-02 08:19:59 +0000
D, [2015-01-02T08:19:59.388650 #10344] DEBUG -- : 
D, [2015-01-02T08:19:59.402651 #10344] DEBUG -- : 
I, [2015-01-02T08:19:59.444653 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-02 08:19:59 +0000
D, [2015-01-02T08:19:59.508657 #10344] DEBUG -- : 
D, [2015-01-02T08:19:59.528658 #10344] DEBUG -- : 
I, [2015-01-02T08:19:59.563660 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-02 08:19:59 +0000
D, [2015-01-02T08:19:59.610663 #10344] DEBUG -- : 
D, [2015-01-02T08:19:59.621663 #10344] DEBUG -- : 
I, [2015-01-02T08:19:59.652665 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-02 08:19:59 +0000
D, [2015-01-02T08:19:59.700668 #10344] DEBUG -- : 
D, [2015-01-02T08:19:59.712669 #10344] DEBUG -- : 
I, [2015-01-02T08:19:59.743670 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-02 08:19:59 +0000
D, [2015-01-02T08:19:59.789673 #10344] DEBUG -- : 
D, [2015-01-02T08:19:59.800674 #10344] DEBUG -- : 
I, [2015-01-02T08:19:59.829675 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-02 08:19:59 +0000
D, [2015-01-02T08:19:59.873678 #10344] DEBUG -- : 
D, [2015-01-02T08:19:59.887679 #10344] DEBUG -- : 
I, [2015-01-02T08:19:59.922681 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-02 08:19:59 +0000
D, [2015-01-02T08:19:59.973684 #10344] DEBUG -- : 
D, [2015-01-02T08:19:59.991685 #10344] DEBUG -- : 
I, [2015-01-02T08:20:00.053688 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-02 08:19:59 +0000
D, [2015-01-02T08:20:00.126692 #10344] DEBUG -- : 
D, [2015-01-02T08:20:00.149694 #10344] DEBUG -- : 
I, [2015-01-02T08:20:00.210697 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-02 08:20:00 +0000
D, [2015-01-02T08:20:00.287702 #10344] DEBUG -- : 
D, [2015-01-02T08:20:00.308703 #10344] DEBUG -- : 
I, [2015-01-02T08:20:00.375707 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-02 08:20:00 +0000
D, [2015-01-02T08:20:00.540716 #10344] DEBUG -- : 
D, [2015-01-02T08:20:00.566717 #10344] DEBUG -- : 
I, [2015-01-02T08:20:00.635721 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-02 08:20:00 +0000
D, [2015-01-02T08:20:00.725727 #10344] DEBUG -- : 
D, [2015-01-02T08:20:00.749728 #10344] DEBUG -- : 
I, [2015-01-02T08:20:00.811732 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-02 08:20:00 +0000
D, [2015-01-02T08:20:00.887736 #10344] DEBUG -- : 
D, [2015-01-02T08:20:00.915737 #10344] DEBUG -- : 
I, [2015-01-02T08:20:00.983741 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-02 08:20:00 +0000
D, [2015-01-02T08:20:01.060746 #10344] DEBUG -- : 
D, [2015-01-02T08:20:01.081747 #10344] DEBUG -- : 
I, [2015-01-02T08:20:01.157751 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-02 08:20:01 +0000
D, [2015-01-02T08:20:01.236756 #10344] DEBUG -- : 
D, [2015-01-02T08:20:01.260757 #10344] DEBUG -- : 
I, [2015-01-02T08:20:01.322761 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-02 08:20:01 +0000
D, [2015-01-02T08:20:01.400765 #10344] DEBUG -- : 
D, [2015-01-02T08:20:01.427767 #10344] DEBUG -- : 
I, [2015-01-02T08:20:01.493771 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-02 08:20:01 +0000
D, [2015-01-02T08:20:01.579775 #10344] DEBUG -- : 
D, [2015-01-02T08:20:01.605777 #10344] DEBUG -- : 
I, [2015-01-02T08:20:01.667780 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-02 08:20:01 +0000
D, [2015-01-02T08:20:01.746785 #10344] DEBUG -- : 
D, [2015-01-02T08:20:01.770786 #10344] DEBUG -- : 
I, [2015-01-02T08:20:01.832790 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-02 08:20:01 +0000
D, [2015-01-02T08:20:01.909794 #10344] DEBUG -- : 
D, [2015-01-02T08:20:01.941796 #10344] DEBUG -- : 
I, [2015-01-02T08:20:02.011800 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-02 08:20:01 +0000
D, [2015-01-02T08:20:02.089805 #10344] DEBUG -- : 
D, [2015-01-02T08:20:02.115806 #10344] DEBUG -- : 
I, [2015-01-02T08:20:02.184810 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-02 08:20:02 +0000
D, [2015-01-02T08:20:02.282816 #10344] DEBUG -- : 
D, [2015-01-02T08:20:02.307817 #10344] DEBUG -- : 
I, [2015-01-02T08:20:02.369821 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-02 08:20:02 +0000
D, [2015-01-02T08:20:02.446825 #10344] DEBUG -- : 
D, [2015-01-02T08:20:02.474827 #10344] DEBUG -- : 
I, [2015-01-02T08:20:02.534830 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-02 08:20:02 +0000
D, [2015-01-02T08:20:02.618835 #10344] DEBUG -- : 
D, [2015-01-02T08:20:02.643836 #10344] DEBUG -- : 
I, [2015-01-02T08:20:02.707840 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-02 08:20:02 +0000
D, [2015-01-02T08:20:02.785844 #10344] DEBUG -- : 
D, [2015-01-02T08:20:02.822847 #10344] DEBUG -- : 
I, [2015-01-02T08:20:02.906851 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-02 08:20:02 +0000
D, [2015-01-02T08:20:02.996856 #10344] DEBUG -- : 
D, [2015-01-02T08:20:03.020858 #10344] DEBUG -- : 
I, [2015-01-02T08:20:03.090862 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-02 08:20:03 +0000
D, [2015-01-02T08:20:03.169866 #10344] DEBUG -- : 
D, [2015-01-02T08:20:03.194868 #10344] DEBUG -- : 
I, [2015-01-02T08:20:03.252871 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-02 08:20:03 +0000
D, [2015-01-02T08:20:03.337876 #10344] DEBUG -- : 
D, [2015-01-02T08:20:03.360877 #10344] DEBUG -- : 
I, [2015-01-02T08:20:03.416881 #10344]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-02 08:20:03 +0000
D, [2015-01-02T08:20:05.583306 #10344] DEBUG -- : 
D, [2015-01-02T08:20:05.614506 #10344] DEBUG -- : 
I, [2015-01-02T08:20:05.661306 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-02 08:20:05 +0000
I, [2015-01-02T08:20:05.817306 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-02T08:20:05.879706 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-02T08:20:05.973306 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T08:20:06.059109 #10344] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-02T08:20:06.160709 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-02T08:20:06.488310 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-02T08:20:06.535110 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-02T08:20:06.753510 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Fri, 02 Jan 2015 08:20:06 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:9cca098,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 02 Jan 2015 08:20:06 UTC +00:00]]
D, [2015-01-02T08:20:06.910912 #10344] DEBUG -- :   [1m[35m (126.2ms)[0m  commit transaction
D, [2015-01-02T08:20:07.035712 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-02T08:20:07.131312 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-02T08:20:07.209312 #10344]  INFO -- :   Rendered carts/_cart.html.erb (204.8ms)
I, [2015-01-02T08:20:07.240512 #10344]  INFO -- :   Rendered line_items/create.js.erb (267.2ms)
I, [2015-01-02T08:20:07.300714 #10344]  INFO -- : Completed 200 OK in 1361ms (Views: 329.6ms | ActiveRecord: 144.8ms)
D, [2015-01-02T08:20:07.487320 #10344] DEBUG -- : 
D, [2015-01-02T08:20:07.510321 #10344] DEBUG -- : 
I, [2015-01-02T08:20:07.563324 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-02 08:20:07 +0000
I, [2015-01-02T08:20:07.686331 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-02T08:20:07.750335 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-02T08:20:07.831339 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T08:20:07.912344 #10344] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-02T08:20:08.021350 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-02T08:20:08.132356 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-02T08:20:08.177359 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-02T08:20:08.373370 #10344] DEBUG -- :   [1m[36mSQL (10.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Fri, 02 Jan 2015 08:20:08 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:8486680,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 02 Jan 2015 08:20:08 UTC +00:00]]
D, [2015-01-02T08:20:08.558174 #10344] DEBUG -- :   [1m[35m (146.6ms)[0m  commit transaction
D, [2015-01-02T08:20:08.682974 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-02T08:20:08.823374 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-02T08:20:08.901374 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (124.8ms)
I, [2015-01-02T08:20:08.979375 #10344]  INFO -- :   Rendered carts/_cart.html.erb (343.2ms)
I, [2015-01-02T08:20:09.026175 #10344]  INFO -- :   Rendered line_items/create.js.erb (405.6ms)
I, [2015-01-02T08:20:09.072975 #10344]  INFO -- : Completed 200 OK in 1274ms (Views: 452.4ms | ActiveRecord: 167.6ms)
D, [2015-01-02T08:20:10.944638 #10344] DEBUG -- : 
D, [2015-01-02T08:20:10.960238 #10344] DEBUG -- : 
I, [2015-01-02T08:20:11.022638 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-02 08:20:10 +0000
I, [2015-01-02T08:20:11.178638 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-02T08:20:11.319038 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-02T08:20:11.537439 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-02T08:20:11.631039 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-02T08:20:11.818239 #10344] DEBUG -- :   [1m[35mLineItem Load (15.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-02T08:20:11.989840 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-02T08:21:32.857790 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-02T08:21:33.233191 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Fri, 02 Jan 2015 08:21:33 UTC +00:00], ["updated_at", Fri, 02 Jan 2015 08:21:33 UTC +00:00]]
D, [2015-01-02T08:21:33.389191 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 79[0m  [["cart_id", nil], ["order_id", 65], ["updated_at", Fri, 02 Jan 2015 08:21:33 UTC +00:00]]
D, [2015-01-02T08:21:33.545191 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 80  [["cart_id", nil], ["order_id", 65], ["updated_at", Fri, 02 Jan 2015 08:21:33 UTC +00:00]]
I, [2015-01-02T08:21:33.591991 #10344]  INFO -- : about to @payment.create
D, [2015-01-02T08:21:39.107801 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-02T08:21:39.217002 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-02T08:21:40.965205 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 65]]
W, [2015-01-02T08:21:41.043205 #10344]  WARN -- : undefined method `name1=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000005b223e8>
W, [2015-01-02T08:21:41.090005 #10344]  WARN -- : undefined method `sku1=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000005b223e8>
W, [2015-01-02T08:21:41.168005 #10344]  WARN -- : undefined method `price1=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000005b223e8>
W, [2015-01-02T08:21:41.230405 #10344]  WARN -- : undefined method `currency1=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000005b223e8>
W, [2015-01-02T08:21:41.292805 #10344]  WARN -- : undefined method `quantity1=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000005b223e8>
W, [2015-01-02T08:21:41.355205 #10344]  WARN -- : undefined method `name2=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000005b223e8>
W, [2015-01-02T08:21:41.417605 #10344]  WARN -- : undefined method `sku2=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000005b223e8>
W, [2015-01-02T08:21:41.495606 #10344]  WARN -- : undefined method `price2=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000005b223e8>
W, [2015-01-02T08:21:41.558006 #10344]  WARN -- : undefined method `currency2=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000005b223e8>
W, [2015-01-02T08:21:41.620406 #10344]  WARN -- : undefined method `quantity2=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000005b223e8>
I, [2015-01-02T08:22:38.369507 #10344]  INFO -- : in order=
I, [2015-01-02T08:22:38.400707 #10344]  INFO -- : in payment.create
I, [2015-01-02T08:22:38.509907 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing"}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/65/confirm", "cancel_url"=>"http://localhost:3000/orders/65/cancel"}}
I, [2015-01-02T08:22:38.993508 #10344]  INFO -- : #<ActiveModel::Errors:0x00000009528858 @base=#<Payment:0x00000007e9db10 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007e9ce90 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005b2a4a8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005b29bc0 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000005b231f8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005b223e8 @error=nil, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>>]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009569e48 @error=nil, @return_url="http://localhost:3000/orders/65/confirm", @cancel_url="http://localhost:3000/orders/65/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009528858 ...>>, @messages={}>
I, [2015-01-02T08:22:39.009108 #10344]  INFO -- : got past invalid
I, [2015-01-02T08:22:39.055908 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/oauth2/token
I, [2015-01-02T08:22:42.129114 #10344]  INFO -- : Response[200]: OK, Duration: 3.042s
I, [2015-01-02T08:22:42.207114 #10344]  INFO -- : PayPal-Request-Id: a8e31a25-2f72-4ff9-85f9-e4c6695f8879
I, [2015-01-02T08:22:42.269514 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-02T08:22:43.626716 #10344]  INFO -- : Response[201]: Created, Duration: 1.310s
I, [2015-01-02T08:22:43.657916 #10344]  INFO -- : back from super
I, [2015-01-02T08:22:44.110317 #10344]  INFO -- : {"id"=>"PAY-8WU145493P2869220KSTFKVI", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98", "details"=>{"subtotal"=>"38.98"}}, "description"=>"King Clothing"}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/65/confirm", "cancel_url"=>"http://localhost:3000/orders/65/cancel"}, "create_time"=>"2015-01-02T08:22:45Z", "update_time"=>"2015-01-02T08:22:45Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-8WU145493P2869220KSTFKVI", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-98696994YM0974523", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-8WU145493P2869220KSTFKVI/execute", "rel"=>"execute", "method"=>"POST"}]}
I, [2015-01-02T08:22:46.403521 #10344]  INFO -- : @payment save just done
I, [2015-01-02T08:22:47.200123 #10344]  INFO -- : #<Payment:0x00000007e9db10 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008700820 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000086fbd70 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000086fb7d0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000086fa8f8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000086fa380 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000086f94d0 @error=nil, @subtotal="38.98">>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009569e48 @error=nil, @return_url="http://localhost:3000/orders/65/confirm", @cancel_url="http://localhost:3000/orders/65/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009528858 @base=#<Payment:0x00000007e9db10 ...>, @messages={}>, @request_id="a8e31a25-2f72-4ff9-85f9-e4c6695f8879", @header={}, @id="PAY-8WU145493P2869220KSTFKVI", @create_time="2015-01-02T08:22:45Z", @update_time="2015-01-02T08:22:45Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000086f3670 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8WU145493P2869220KSTFKVI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086f2518 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-98696994YM0974523", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086f1258 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8WU145493P2869220KSTFKVI/execute", @rel="execute", @method="POST">]>
I, [2015-01-02T08:22:47.871924 #10344]  INFO -- : #<Payment:0x00000007e9db10 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008700820 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000086fbd70 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000086fb7d0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000086fa8f8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000086fa380 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000086f94d0 @error=nil, @subtotal="38.98">>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009569e48 @error=nil, @return_url="http://localhost:3000/orders/65/confirm", @cancel_url="http://localhost:3000/orders/65/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009528858 @base=#<Payment:0x00000007e9db10 ...>, @messages={}>, @request_id="a8e31a25-2f72-4ff9-85f9-e4c6695f8879", @header={}, @id="PAY-8WU145493P2869220KSTFKVI", @create_time="2015-01-02T08:22:45Z", @update_time="2015-01-02T08:22:45Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000086f3670 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8WU145493P2869220KSTFKVI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086f2518 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-98696994YM0974523", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086f1258 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8WU145493P2869220KSTFKVI/execute", @rel="execute", @method="POST">]>
D, [2015-01-02T08:22:48.043524 #10344] DEBUG -- :   [1m[35m (124.8ms)[0m  commit transaction
I, [2015-01-02T08:22:48.059124 #10344]  INFO -- : about to approve url
I, [2015-01-02T08:22:48.706726 #10344]  INFO -- : #<Payment:0x00000007e9db10 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008700820 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000086fbd70 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000086fb7d0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000086fa8f8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000086fa380 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000086f94d0 @error=nil, @subtotal="38.98">>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009569e48 @error=nil, @return_url="http://localhost:3000/orders/65/confirm", @cancel_url="http://localhost:3000/orders/65/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009528858 @base=#<Payment:0x00000007e9db10 ...>, @messages={}>, @request_id="a8e31a25-2f72-4ff9-85f9-e4c6695f8879", @header={}, @id="PAY-8WU145493P2869220KSTFKVI", @create_time="2015-01-02T08:22:45Z", @update_time="2015-01-02T08:22:45Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000086f3670 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8WU145493P2869220KSTFKVI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086f2518 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-98696994YM0974523", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086f1258 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8WU145493P2869220KSTFKVI/execute", @rel="execute", @method="POST">]>
I, [2015-01-02T08:22:49.534527 #10344]  INFO -- : #<Payment:0x00000007e9db10 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008700820 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000086fbd70 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000086fb7d0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000086fa8f8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000086fa380 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000086f94d0 @error=nil, @subtotal="38.98">>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009569e48 @error=nil, @return_url="http://localhost:3000/orders/65/confirm", @cancel_url="http://localhost:3000/orders/65/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009528858 @base=#<Payment:0x00000007e9db10 ...>, @messages={}>, @request_id="a8e31a25-2f72-4ff9-85f9-e4c6695f8879", @header={}, @id="PAY-8WU145493P2869220KSTFKVI", @create_time="2015-01-02T08:22:45Z", @update_time="2015-01-02T08:22:45Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000086f3670 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8WU145493P2869220KSTFKVI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086f2518 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-98696994YM0974523", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086f1258 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8WU145493P2869220KSTFKVI/execute", @rel="execute", @method="POST">]>
I, [2015-01-02T08:22:49.596927 #10344]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-98696994YM0974523
I, [2015-01-02T08:22:50.454929 #10344]  INFO -- : #<Payment:0x00000007e9db10 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008700820 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000086fbd70 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000086fb7d0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000086fa8f8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000086fa380 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000086f94d0 @error=nil, @subtotal="38.98">>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009569e48 @error=nil, @return_url="http://localhost:3000/orders/65/confirm", @cancel_url="http://localhost:3000/orders/65/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009528858 @base=#<Payment:0x00000007e9db10 ...>, @messages={}>, @request_id="a8e31a25-2f72-4ff9-85f9-e4c6695f8879", @header={}, @id="PAY-8WU145493P2869220KSTFKVI", @create_time="2015-01-02T08:22:45Z", @update_time="2015-01-02T08:22:45Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000086f3670 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8WU145493P2869220KSTFKVI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086f2518 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-98696994YM0974523", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086f1258 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8WU145493P2869220KSTFKVI/execute", @rel="execute", @method="POST">]>
I, [2015-01-02T08:22:50.517329 #10344]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-98696994YM0974523
I, [2015-01-02T08:22:50.564129 #10344]  INFO -- : Completed 403 Forbidden in 159354ms (ActiveRecord: 187.2ms)
D, [2015-01-02T08:27:49.648646 #10344] DEBUG -- : 
D, [2015-01-02T08:27:49.664246 #10344] DEBUG -- : 
I, [2015-01-02T08:27:49.711046 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-02 08:27:49 +0000
I, [2015-01-02T08:27:49.820246 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-02T08:27:49.867046 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-02T08:27:49.963047 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-02T08:27:50.041048 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-02T08:27:50.165848 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-02T08:27:50.259448 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-02T08:27:50.306248 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-02T08:27:50.518049 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Fri, 02 Jan 2015 08:27:50 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:5b77438,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 02 Jan 2015 08:27:50 UTC +00:00]]
D, [2015-01-02T08:27:50.658449 #10344] DEBUG -- :   [1m[36m (109.2ms)[0m  [1mcommit transaction[0m
D, [2015-01-02T08:27:50.767649 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-02T08:27:50.861250 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-02T08:27:50.946651 #10344]  INFO -- :   Rendered carts/_cart.html.erb (207.2ms)
I, [2015-01-02T08:27:50.993451 #10344]  INFO -- :   Rendered line_items/create.js.erb (257.0ms)
I, [2015-01-02T08:27:51.055054 #10344]  INFO -- : Completed 200 OK in 1111ms (Views: 335.0ms | ActiveRecord: 124.8ms)
D, [2015-01-02T08:27:51.125058 #10344] DEBUG -- : 
D, [2015-01-02T08:27:51.149059 #10344] DEBUG -- : 
I, [2015-01-02T08:27:51.213063 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-02 08:27:51 +0000
I, [2015-01-02T08:27:51.314069 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-02T08:27:51.392073 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-02T08:27:51.490079 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-02T08:27:51.598085 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-02T08:27:51.726092 #10344] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-02T08:27:51.848099 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-02T08:27:51.904102 #10344] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-02T08:27:52.131115 #10344] DEBUG -- :   [1m[35mSQL (9.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Fri, 02 Jan 2015 08:27:51 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:a0353b8,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 02 Jan 2015 08:27:51 UTC +00:00]]
D, [2015-01-02T08:27:52.291719 #10344] DEBUG -- :   [1m[36m (106.8ms)[0m  [1mcommit transaction[0m
D, [2015-01-02T08:27:52.416519 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-02T08:27:52.572520 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-02T08:27:52.650520 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (156.0ms)
I, [2015-01-02T08:27:52.744120 #10344]  INFO -- :   Rendered carts/_cart.html.erb (374.4ms)
I, [2015-01-02T08:27:52.790920 #10344]  INFO -- :   Rendered line_items/create.js.erb (436.8ms)
I, [2015-01-02T08:27:52.853320 #10344]  INFO -- : Completed 200 OK in 1398ms (Views: 499.2ms | ActiveRecord: 125.8ms)
D, [2015-01-02T08:27:54.397982 #10344] DEBUG -- : 
D, [2015-01-02T08:27:54.429182 #10344] DEBUG -- : 
I, [2015-01-02T08:27:54.491582 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-02 08:27:54 +0000
I, [2015-01-02T08:27:54.631982 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-02T08:27:54.709982 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-02T08:27:54.803582 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-02T08:27:54.881583 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T08:27:55.006383 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-02T08:27:55.146783 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-02T08:28:00.891197 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-02T08:28:01.000397 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Fri, 02 Jan 2015 08:28:00 UTC +00:00], ["updated_at", Fri, 02 Jan 2015 08:28:00 UTC +00:00]]
D, [2015-01-02T08:28:01.140797 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 81  [["cart_id", nil], ["order_id", 66], ["updated_at", Fri, 02 Jan 2015 08:28:01 UTC +00:00]]
D, [2015-01-02T08:28:01.265597 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 82[0m  [["cart_id", nil], ["order_id", 66], ["updated_at", Fri, 02 Jan 2015 08:28:01 UTC +00:00]]
I, [2015-01-02T08:28:01.312397 #10344]  INFO -- : about to @payment.create
D, [2015-01-02T09:13:26.080572 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-02T09:13:26.189772 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-02T09:13:27.205774 #10344] DEBUG -- :   [1m[35m (15.6ms)[0m  SELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 66]]
W, [2015-01-02T09:13:27.253574 #10344]  WARN -- : undefined method `name1=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000009d6ca78>
W, [2015-01-02T09:13:27.317974 #10344]  WARN -- : undefined method `sku1=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000009d6ca78>
W, [2015-01-02T09:13:27.380374 #10344]  WARN -- : undefined method `price1=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000009d6ca78>
W, [2015-01-02T09:13:27.427174 #10344]  WARN -- : undefined method `currency1=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000009d6ca78>
W, [2015-01-02T09:13:27.489575 #10344]  WARN -- : undefined method `quantity1=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000009d6ca78>
W, [2015-01-02T09:13:27.551975 #10344]  WARN -- : undefined method `name2=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000009d6ca78>
W, [2015-01-02T09:13:27.614375 #10344]  WARN -- : undefined method `sku2=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000009d6ca78>
W, [2015-01-02T09:13:27.692375 #10344]  WARN -- : undefined method `price2=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000009d6ca78>
W, [2015-01-02T09:13:27.754775 #10344]  WARN -- : undefined method `currency2=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000009d6ca78>
W, [2015-01-02T09:13:27.818175 #10344]  WARN -- : undefined method `quantity2=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000009d6ca78>
I, [2015-01-02T09:13:28.832177 #10344]  INFO -- : in order=
I, [2015-01-02T09:13:28.863377 #10344]  INFO -- : in payment.create
I, [2015-01-02T09:13:28.988177 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing"}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/66/confirm", "cancel_url"=>"http://localhost:3000/orders/66/cancel"}}
I, [2015-01-02T09:13:29.424978 #10344]  INFO -- : #<ActiveModel::Errors:0x00000009a4ed78 @base=#<Payment:0x00000008136250 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008135648 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009d6f368 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009d6ecb0 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009d6dc48 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009d6ca78 @error=nil, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>>]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009afb398 @error=nil, @return_url="http://localhost:3000/orders/66/confirm", @cancel_url="http://localhost:3000/orders/66/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009a4ed78 ...>>, @messages={}>
I, [2015-01-02T09:13:29.440578 #10344]  INFO -- : got past invalid
I, [2015-01-02T09:13:29.471778 #10344]  INFO -- : PayPal-Request-Id: fedb8b9b-4acf-4ae6-82c0-bc415f27de97
I, [2015-01-02T09:13:29.502978 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-02T09:13:31.109781 #10344]  INFO -- : Response[201]: Created, Duration: 1.560s
I, [2015-01-02T09:13:31.140981 #10344]  INFO -- : back from super
I, [2015-01-02T09:13:31.593382 #10344]  INFO -- : {"id"=>"PAY-256455325L246281RKSTGCPI", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98", "details"=>{"subtotal"=>"38.98"}}, "description"=>"King Clothing"}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/66/confirm", "cancel_url"=>"http://localhost:3000/orders/66/cancel"}, "create_time"=>"2015-01-02T09:13:33Z", "update_time"=>"2015-01-02T09:13:33Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-256455325L246281RKSTGCPI", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-3MR386158B275522M", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-256455325L246281RKSTGCPI/execute", "rel"=>"execute", "method"=>"POST"}]}
I, [2015-01-02T09:13:32.888184 #10344]  INFO -- : @payment save just done
I, [2015-01-02T09:13:33.764786 #10344]  INFO -- : #<Payment:0x00000008136250 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000098a2858 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000098a1908 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000098a12c8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000098a02d8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000989bcb0 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x0000000989aec8 @error=nil, @subtotal="38.98">>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009afb398 @error=nil, @return_url="http://localhost:3000/orders/66/confirm", @cancel_url="http://localhost:3000/orders/66/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009a4ed78 @base=#<Payment:0x00000008136250 ...>, @messages={}>, @request_id="fedb8b9b-4acf-4ae6-82c0-bc415f27de97", @header={}, @id="PAY-256455325L246281RKSTGCPI", @create_time="2015-01-02T09:13:33Z", @update_time="2015-01-02T09:13:33Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009899230 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-256455325L246281RKSTGCPI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009893e98 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-3MR386158B275522M", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000098926d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-256455325L246281RKSTGCPI/execute", @rel="execute", @method="POST">]>
I, [2015-01-02T09:13:34.685187 #10344]  INFO -- : #<Payment:0x00000008136250 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000098a2858 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000098a1908 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000098a12c8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000098a02d8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000989bcb0 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x0000000989aec8 @error=nil, @subtotal="38.98">>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009afb398 @error=nil, @return_url="http://localhost:3000/orders/66/confirm", @cancel_url="http://localhost:3000/orders/66/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009a4ed78 @base=#<Payment:0x00000008136250 ...>, @messages={}>, @request_id="fedb8b9b-4acf-4ae6-82c0-bc415f27de97", @header={}, @id="PAY-256455325L246281RKSTGCPI", @create_time="2015-01-02T09:13:33Z", @update_time="2015-01-02T09:13:33Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009899230 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-256455325L246281RKSTGCPI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009893e98 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-3MR386158B275522M", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000098926d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-256455325L246281RKSTGCPI/execute", @rel="execute", @method="POST">]>
D, [2015-01-02T09:13:34.872388 #10344] DEBUG -- :   [1m[36m (140.4ms)[0m  [1mcommit transaction[0m
I, [2015-01-02T09:13:34.887988 #10344]  INFO -- : about to approve url
I, [2015-01-02T09:13:35.699189 #10344]  INFO -- : #<Payment:0x00000008136250 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000098a2858 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000098a1908 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000098a12c8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000098a02d8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000989bcb0 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x0000000989aec8 @error=nil, @subtotal="38.98">>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009afb398 @error=nil, @return_url="http://localhost:3000/orders/66/confirm", @cancel_url="http://localhost:3000/orders/66/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009a4ed78 @base=#<Payment:0x00000008136250 ...>, @messages={}>, @request_id="fedb8b9b-4acf-4ae6-82c0-bc415f27de97", @header={}, @id="PAY-256455325L246281RKSTGCPI", @create_time="2015-01-02T09:13:33Z", @update_time="2015-01-02T09:13:33Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009899230 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-256455325L246281RKSTGCPI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009893e98 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-3MR386158B275522M", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000098926d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-256455325L246281RKSTGCPI/execute", @rel="execute", @method="POST">]>
I, [2015-01-02T09:13:36.495790 #10344]  INFO -- : #<Payment:0x00000008136250 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000098a2858 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000098a1908 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000098a12c8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000098a02d8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000989bcb0 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x0000000989aec8 @error=nil, @subtotal="38.98">>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009afb398 @error=nil, @return_url="http://localhost:3000/orders/66/confirm", @cancel_url="http://localhost:3000/orders/66/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009a4ed78 @base=#<Payment:0x00000008136250 ...>, @messages={}>, @request_id="fedb8b9b-4acf-4ae6-82c0-bc415f27de97", @header={}, @id="PAY-256455325L246281RKSTGCPI", @create_time="2015-01-02T09:13:33Z", @update_time="2015-01-02T09:13:33Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009899230 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-256455325L246281RKSTGCPI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009893e98 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-3MR386158B275522M", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000098926d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-256455325L246281RKSTGCPI/execute", @rel="execute", @method="POST">]>
I, [2015-01-02T09:13:36.558191 #10344]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-3MR386158B275522M
I, [2015-01-02T09:13:37.261192 #10344]  INFO -- : #<Payment:0x00000008136250 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000098a2858 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000098a1908 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000098a12c8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000098a02d8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000989bcb0 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x0000000989aec8 @error=nil, @subtotal="38.98">>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009afb398 @error=nil, @return_url="http://localhost:3000/orders/66/confirm", @cancel_url="http://localhost:3000/orders/66/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009a4ed78 @base=#<Payment:0x00000008136250 ...>, @messages={}>, @request_id="fedb8b9b-4acf-4ae6-82c0-bc415f27de97", @header={}, @id="PAY-256455325L246281RKSTGCPI", @create_time="2015-01-02T09:13:33Z", @update_time="2015-01-02T09:13:33Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009899230 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-256455325L246281RKSTGCPI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009893e98 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-3MR386158B275522M", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000098926d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-256455325L246281RKSTGCPI/execute", @rel="execute", @method="POST">]>
I, [2015-01-02T09:13:37.307992 #10344]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-3MR386158B275522M
I, [2015-01-02T09:13:37.339192 #10344]  INFO -- : Completed 403 Forbidden in 2742676ms (ActiveRecord: 171.6ms)
D, [2015-01-02T09:14:12.170904 #10344] DEBUG -- : 
D, [2015-01-02T09:14:12.202104 #10344] DEBUG -- : 
I, [2015-01-02T09:14:12.264504 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-02 09:14:12 +0000
I, [2015-01-02T09:14:15.001311 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-02T09:14:15.048111 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-02T09:14:15.204111 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T09:14:15.438112 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-02T09:14:15.765712 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-02T09:14:16.077713 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-02T09:14:16.124513 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-02T09:14:16.328313 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Fri, 02 Jan 2015 09:14:16 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:95f2158,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 02 Jan 2015 09:14:16 UTC +00:00]]
D, [2015-01-02T09:14:16.468713 #10344] DEBUG -- :   [1m[35m (93.6ms)[0m  commit transaction
D, [2015-01-02T09:14:16.593514 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-02T09:14:16.687114 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-02T09:14:16.811914 #10344]  INFO -- :   Rendered carts/_cart.html.erb (249.6ms)
I, [2015-01-02T09:14:16.843114 #10344]  INFO -- :   Rendered line_items/create.js.erb (312.0ms)
I, [2015-01-02T09:14:16.905514 #10344]  INFO -- : Completed 200 OK in 1811ms (Views: 374.4ms | ActiveRecord: 109.2ms)
D, [2015-01-02T09:14:18.634579 #10344] DEBUG -- : 
D, [2015-01-02T09:14:18.665779 #10344] DEBUG -- : 
I, [2015-01-02T09:14:18.712579 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-02 09:14:18 +0000
I, [2015-01-02T09:14:18.837379 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-02T09:14:18.899779 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-02T09:14:19.008979 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T09:14:19.084380 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-02T09:14:19.193580 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-02T09:14:19.302780 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-02T09:14:19.349581 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-02T09:14:19.567981 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Fri, 02 Jan 2015 09:14:19 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:602b5d8,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 02 Jan 2015 09:14:19 UTC +00:00]]
D, [2015-01-02T09:14:19.708381 #10344] DEBUG -- :   [1m[35m (93.6ms)[0m  commit transaction
D, [2015-01-02T09:14:19.833181 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-02T09:14:19.958982 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-02T09:14:20.036982 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (125.8ms)
I, [2015-01-02T09:14:20.114982 #10344]  INFO -- :   Rendered carts/_cart.html.erb (344.2ms)
I, [2015-01-02T09:14:20.161782 #10344]  INFO -- :   Rendered line_items/create.js.erb (375.4ms)
I, [2015-01-02T09:14:20.208582 #10344]  INFO -- : Completed 200 OK in 1262ms (Views: 453.4ms | ActiveRecord: 95.6ms)
D, [2015-01-02T09:14:21.728242 #10344] DEBUG -- : 
D, [2015-01-02T09:14:21.759442 #10344] DEBUG -- : 
I, [2015-01-02T09:14:21.821842 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-02 09:14:21 +0000
I, [2015-01-02T09:14:21.993443 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-02T09:14:22.149443 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-02T09:14:22.363046 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-02T09:14:22.456646 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-02T09:14:22.643846 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-02T09:14:22.799846 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-02T09:14:27.674857 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-02T09:14:28.002458 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Fri, 02 Jan 2015 09:14:27 UTC +00:00], ["updated_at", Fri, 02 Jan 2015 09:14:27 UTC +00:00]]
D, [2015-01-02T09:14:28.142858 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 83[0m  [["cart_id", nil], ["order_id", 67], ["updated_at", Fri, 02 Jan 2015 09:14:28 UTC +00:00]]
D, [2015-01-02T09:14:28.267658 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 84  [["cart_id", nil], ["order_id", 67], ["updated_at", Fri, 02 Jan 2015 09:14:28 UTC +00:00]]
I, [2015-01-02T09:14:28.298858 #10344]  INFO -- : about to @payment.create
D, [2015-01-02T09:14:28.361258 #10344] DEBUG -- :   [1m[36m (15.6ms)[0m  [1mrollback transaction[0m
I, [2015-01-02T09:14:28.408058 #10344]  INFO -- : Completed 500 Internal Server Error in 6383ms
F, [2015-01-02T09:14:28.579659 #10344] FATAL -- : 
SyntaxError (c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:53: syntax error, unexpected keyword_self, expecting keyword_end
     }self.transactions[0].item_list.me...
          ^):
  app/models/order.rb:41:in `create_payment'
  app/controllers/orders_controller.rb:155:in `ppcheckout'


I, [2015-01-02T09:14:28.861459 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (15.6ms)
I, [2015-01-02T09:14:28.970659 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (15.6ms)
I, [2015-01-02T09:14:29.095460 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.0ms)
I, [2015-01-02T09:14:29.189060 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (344.2ms)
D, [2015-01-02T09:14:29.285462 #10344] DEBUG -- : 
D, [2015-01-02T09:14:29.300463 #10344] DEBUG -- : 
I, [2015-01-02T09:14:29.340465 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-02 09:14:29 +0000
I, [2015-01-02T09:14:29.442471 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-02T09:14:29.507474 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-02T09:14:29.564478 #10344] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-02T09:14:29.624481 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T09:14:29.698485 #10344] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-02T09:14:29.799491 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-02T09:14:31.601594 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-02T09:14:31.736602 #10344] DEBUG -- :   [1m[36mSQL (6.0ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Fri, 02 Jan 2015 09:14:31 UTC +00:00], ["updated_at", Fri, 02 Jan 2015 09:14:31 UTC +00:00]]
D, [2015-01-02T09:14:31.885610 #10344] DEBUG -- :   [1m[35mSQL (3.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 83  [["cart_id", nil], ["order_id", 67], ["updated_at", Fri, 02 Jan 2015 09:14:31 UTC +00:00]]
D, [2015-01-02T09:14:32.022618 #10344] DEBUG -- :   [1m[36mSQL (3.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 84[0m  [["cart_id", nil], ["order_id", 67], ["updated_at", Fri, 02 Jan 2015 09:14:31 UTC +00:00]]
I, [2015-01-02T09:14:32.060620 #10344]  INFO -- : about to @payment.create
D, [2015-01-02T09:14:32.133625 #10344] DEBUG -- :   [1m[35m (13.0ms)[0m  rollback transaction
I, [2015-01-02T09:14:32.183628 #10344]  INFO -- : Completed 500 Internal Server Error in 2693ms
F, [2015-01-02T09:14:32.372638 #10344] FATAL -- : 
SyntaxError (c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:53: syntax error, unexpected keyword_self, expecting keyword_end
     }self.transactions[0].item_list.me...
          ^):
  app/models/order.rb:41:in `create_payment'
  app/controllers/orders_controller.rb:155:in `ppcheckout'


I, [2015-01-02T09:14:32.688656 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (13.0ms)
I, [2015-01-02T09:14:32.856666 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (49.0ms)
I, [2015-01-02T09:14:32.988674 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (11.0ms)
I, [2015-01-02T09:14:33.085679 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (445.0ms)
D, [2015-01-02T09:15:07.541393 #10344] DEBUG -- : 
D, [2015-01-02T09:15:07.560395 #10344] DEBUG -- : 
I, [2015-01-02T09:15:07.608397 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-02 09:15:07 +0000
I, [2015-01-02T09:15:10.431817 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-02T09:15:10.556617 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-02T09:15:10.743817 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-02T09:15:10.884218 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-02T09:15:11.210426 #10344] DEBUG -- :   [1m[35mLineItem Load (4.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-02T09:15:11.555428 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-02T09:15:16.143845 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-02T09:15:16.518246 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Fri, 02 Jan 2015 09:15:16 UTC +00:00], ["updated_at", Fri, 02 Jan 2015 09:15:16 UTC +00:00]]
D, [2015-01-02T09:15:16.658646 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 83[0m  [["cart_id", nil], ["order_id", 67], ["updated_at", Fri, 02 Jan 2015 09:15:16 UTC +00:00]]
D, [2015-01-02T09:15:16.799046 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 84  [["cart_id", nil], ["order_id", 67], ["updated_at", Fri, 02 Jan 2015 09:15:16 UTC +00:00]]
I, [2015-01-02T09:15:16.830246 #10344]  INFO -- : about to @payment.create
D, [2015-01-02T09:15:19.783652 #10344] DEBUG -- :   [1m[36mProduct Load (15.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-02T09:15:19.986452 #10344] DEBUG -- :   [1m[35mProduct Load (15.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-02T09:15:21.485055 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 67]]
W, [2015-01-02T09:15:21.531855 #10344]  WARN -- : undefined method `name=' for #<PayPal::SDK::REST::DataTypes::ItemList:0x0000000570a300>
W, [2015-01-02T09:15:21.595255 #10344]  WARN -- : undefined method `sku=' for #<PayPal::SDK::REST::DataTypes::ItemList:0x0000000570a300>
W, [2015-01-02T09:15:21.657655 #10344]  WARN -- : undefined method `price=' for #<PayPal::SDK::REST::DataTypes::ItemList:0x0000000570a300>
W, [2015-01-02T09:15:21.735655 #10344]  WARN -- : undefined method `currency=' for #<PayPal::SDK::REST::DataTypes::ItemList:0x0000000570a300>
W, [2015-01-02T09:15:21.798055 #10344]  WARN -- : undefined method `quantity=' for #<PayPal::SDK::REST::DataTypes::ItemList:0x0000000570a300>
I, [2015-01-02T09:15:53.810130 #10344]  INFO -- : in order=
I, [2015-01-02T09:15:53.825730 #10344]  INFO -- : in payment.create
I, [2015-01-02T09:15:54.012931 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/67/confirm", "cancel_url"=>"http://localhost:3000/orders/67/cancel"}}
I, [2015-01-02T09:15:54.747132 #10344]  INFO -- : #<ActiveModel::Errors:0x00000009c68e38 @base=#<Payment:0x000000098a3d48 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000098a28f8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000571a0e8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005719620 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000570a300 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005708b40 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009d17d48 @error=nil, @return_url="http://localhost:3000/orders/67/confirm", @cancel_url="http://localhost:3000/orders/67/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009c68e38 ...>>, @messages={}>
I, [2015-01-02T09:15:54.778332 #10344]  INFO -- : got past invalid
I, [2015-01-02T09:15:54.856332 #10344]  INFO -- : PayPal-Request-Id: 2e332af2-75db-4e77-aab0-eea961a0bb7e
I, [2015-01-02T09:15:54.887532 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-02T09:15:55.886934 #10344]  INFO -- : Response[400]: Bad Request, Duration: 0.968s
I, [2015-01-02T09:15:55.902534 #10344]  INFO -- :  in error=
I, [2015-01-02T09:15:55.919134 #10344]  INFO -- : back from super
I, [2015-01-02T09:15:56.043934 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/67/confirm", "cancel_url"=>"http://localhost:3000/orders/67/cancel"}}
I, [2015-01-02T09:15:57.464537 #10344]  INFO -- : @payment save just done
I, [2015-01-02T09:15:58.354738 #10344]  INFO -- : #<Payment:0x000000098a3d48 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"9a7e4273ca85e"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000098a28f8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000571a0e8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005719620 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000570a300 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005708b40 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009d17d48 @error=nil, @return_url="http://localhost:3000/orders/67/confirm", @cancel_url="http://localhost:3000/orders/67/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009c68e38 @base=#<Payment:0x000000098a3d48 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="2e332af2-75db-4e77-aab0-eea961a0bb7e", @header={}>
I, [2015-01-02T09:15:59.259540 #10344]  INFO -- : #<Payment:0x000000098a3d48 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"9a7e4273ca85e"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000098a28f8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000571a0e8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005719620 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000570a300 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005708b40 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009d17d48 @error=nil, @return_url="http://localhost:3000/orders/67/confirm", @cancel_url="http://localhost:3000/orders/67/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009c68e38 @base=#<Payment:0x000000098a3d48 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="2e332af2-75db-4e77-aab0-eea961a0bb7e", @header={}>
D, [2015-01-02T09:15:59.415540 #10344] DEBUG -- :   [1m[35m (109.2ms)[0m  commit transaction
I, [2015-01-02T09:15:59.446740 #10344]  INFO -- : about to approve url
I, [2015-01-02T09:16:00.292142 #10344]  INFO -- : #<Payment:0x000000098a3d48 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"9a7e4273ca85e"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000098a28f8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000571a0e8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005719620 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000570a300 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005708b40 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009d17d48 @error=nil, @return_url="http://localhost:3000/orders/67/confirm", @cancel_url="http://localhost:3000/orders/67/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009c68e38 @base=#<Payment:0x000000098a3d48 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="2e332af2-75db-4e77-aab0-eea961a0bb7e", @header={}>
I, [2015-01-02T09:16:00.323342 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-02T09:16:00.370142 #10344]  INFO -- : Completed 302 Found in 49892ms (ActiveRecord: 230.4ms)
D, [2015-01-02T09:16:14.289044 #10344] DEBUG -- : 
D, [2015-01-02T09:16:14.309045 #10344] DEBUG -- : 
I, [2015-01-02T09:16:14.352047 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-02 09:16:14 +0000
I, [2015-01-02T09:16:14.489055 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-02T09:16:14.576060 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-02T09:16:14.687066 #10344] DEBUG -- :   [1m[35mProduct Load (3.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-02T09:16:14.771071 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (5.0ms)
I, [2015-01-02T09:16:14.823074 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (162.0ms)
D, [2015-01-02T09:16:15.094090 #10344] DEBUG -- :   [1m[36mLineItem Exists (2.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-02T09:16:15.186095 #10344] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-02T09:16:15.222097 #10344]  INFO -- :   Rendered collection (1.0ms)
I, [2015-01-02T09:16:15.343104 #10344]  INFO -- :   Rendered carts/_cart.html.erb (198.0ms)
I, [2015-01-02T09:16:15.418108 #10344]  INFO -- : Completed 200 OK in 883ms (Views: 779.0ms | ActiveRecord: 9.0ms)
D, [2015-01-02T09:16:15.726126 #10344] DEBUG -- : 
D, [2015-01-02T09:16:15.751127 #10344] DEBUG -- : 
I, [2015-01-02T09:16:15.828132 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-02 09:16:15 +0000
D, [2015-01-02T09:16:15.903136 #10344] DEBUG -- : 
D, [2015-01-02T09:16:15.928137 #10344] DEBUG -- : 
I, [2015-01-02T09:16:15.970140 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-02 09:16:15 +0000
D, [2015-01-02T09:16:16.049144 #10344] DEBUG -- : 
D, [2015-01-02T09:16:16.067145 #10344] DEBUG -- : 
I, [2015-01-02T09:16:16.118148 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-02 09:16:16 +0000
D, [2015-01-02T09:16:16.198153 #10344] DEBUG -- : 
D, [2015-01-02T09:16:16.226154 #10344] DEBUG -- : 
I, [2015-01-02T09:16:16.269157 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-02 09:16:16 +0000
D, [2015-01-02T09:16:16.349161 #10344] DEBUG -- : 
D, [2015-01-02T09:16:16.380163 #10344] DEBUG -- : 
I, [2015-01-02T09:16:16.430166 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-02 09:16:16 +0000
D, [2015-01-02T09:16:16.507171 #10344] DEBUG -- : 
D, [2015-01-02T09:16:16.529172 #10344] DEBUG -- : 
I, [2015-01-02T09:16:16.583175 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-02 09:16:16 +0000
D, [2015-01-02T09:16:16.677180 #10344] DEBUG -- : 
D, [2015-01-02T09:16:16.706182 #10344] DEBUG -- : 
I, [2015-01-02T09:16:16.787187 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-02 09:16:16 +0000
D, [2015-01-02T09:16:16.871191 #10344] DEBUG -- : 
D, [2015-01-02T09:16:16.890192 #10344] DEBUG -- : 
I, [2015-01-02T09:16:16.938195 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-02 09:16:16 +0000
D, [2015-01-02T09:16:17.034201 #10344] DEBUG -- : 
D, [2015-01-02T09:16:17.055202 #10344] DEBUG -- : 
I, [2015-01-02T09:16:17.107205 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-02 09:16:17 +0000
D, [2015-01-02T09:16:17.186209 #10344] DEBUG -- : 
D, [2015-01-02T09:16:17.205210 #10344] DEBUG -- : 
I, [2015-01-02T09:16:17.261214 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-02 09:16:17 +0000
D, [2015-01-02T09:16:17.340218 #10344] DEBUG -- : 
D, [2015-01-02T09:16:17.366220 #10344] DEBUG -- : 
I, [2015-01-02T09:16:17.416222 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-02 09:16:17 +0000
D, [2015-01-02T09:16:17.500227 #10344] DEBUG -- : 
D, [2015-01-02T09:16:17.522229 #10344] DEBUG -- : 
I, [2015-01-02T09:16:17.576232 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-02 09:16:17 +0000
D, [2015-01-02T09:16:17.657236 #10344] DEBUG -- : 
D, [2015-01-02T09:16:17.674237 #10344] DEBUG -- : 
I, [2015-01-02T09:16:17.728240 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-02 09:16:17 +0000
D, [2015-01-02T09:16:17.810245 #10344] DEBUG -- : 
D, [2015-01-02T09:16:17.829246 #10344] DEBUG -- : 
I, [2015-01-02T09:16:17.889250 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-02 09:16:17 +0000
D, [2015-01-02T09:16:17.979255 #10344] DEBUG -- : 
D, [2015-01-02T09:16:18.000256 #10344] DEBUG -- : 
I, [2015-01-02T09:16:18.052259 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-02 09:16:18 +0000
D, [2015-01-02T09:16:18.134264 #10344] DEBUG -- : 
D, [2015-01-02T09:16:18.154265 #10344] DEBUG -- : 
I, [2015-01-02T09:16:18.207268 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-02 09:16:18 +0000
D, [2015-01-02T09:16:18.313274 #10344] DEBUG -- : 
D, [2015-01-02T09:16:18.343276 #10344] DEBUG -- : 
I, [2015-01-02T09:16:18.397279 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-02 09:16:18 +0000
D, [2015-01-02T09:16:18.476283 #10344] DEBUG -- : 
D, [2015-01-02T09:16:18.497284 #10344] DEBUG -- : 
I, [2015-01-02T09:16:18.553288 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-02 09:16:18 +0000
D, [2015-01-02T09:16:18.633292 #10344] DEBUG -- : 
D, [2015-01-02T09:16:18.657293 #10344] DEBUG -- : 
I, [2015-01-02T09:16:18.712297 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-02 09:16:18 +0000
D, [2015-01-02T09:16:18.790301 #10344] DEBUG -- : 
D, [2015-01-02T09:16:18.811302 #10344] DEBUG -- : 
I, [2015-01-02T09:16:18.864305 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-02 09:16:18 +0000
D, [2015-01-02T09:16:18.943310 #10344] DEBUG -- : 
D, [2015-01-02T09:16:18.964311 #10344] DEBUG -- : 
I, [2015-01-02T09:16:19.047316 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-02 09:16:18 +0000
D, [2015-01-02T09:16:19.130321 #10344] DEBUG -- : 
D, [2015-01-02T09:16:19.158322 #10344] DEBUG -- : 
I, [2015-01-02T09:16:19.212325 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-02 09:16:19 +0000
D, [2015-01-02T09:16:19.291330 #10344] DEBUG -- : 
D, [2015-01-02T09:16:19.311331 #10344] DEBUG -- : 
I, [2015-01-02T09:16:19.364334 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-02 09:16:19 +0000
D, [2015-01-02T09:16:19.440338 #10344] DEBUG -- : 
D, [2015-01-02T09:16:19.463340 #10344] DEBUG -- : 
I, [2015-01-02T09:16:19.515343 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-02 09:16:19 +0000
D, [2015-01-02T09:16:19.589347 #10344] DEBUG -- : 
D, [2015-01-02T09:16:19.611348 #10344] DEBUG -- : 
I, [2015-01-02T09:16:19.666351 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-02 09:16:19 +0000
D, [2015-01-02T09:16:19.739355 #10344] DEBUG -- : 
D, [2015-01-02T09:16:19.759357 #10344] DEBUG -- : 
I, [2015-01-02T09:16:19.812360 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-02 09:16:19 +0000
D, [2015-01-02T09:16:19.906365 #10344] DEBUG -- : 
D, [2015-01-02T09:16:19.936367 #10344] DEBUG -- : 
I, [2015-01-02T09:16:19.994370 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-02 09:16:19 +0000
D, [2015-01-02T09:16:20.088375 #10344] DEBUG -- : 
D, [2015-01-02T09:16:20.118377 #10344] DEBUG -- : 
I, [2015-01-02T09:16:20.176380 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-02 09:16:20 +0000
D, [2015-01-02T09:16:20.251385 #10344] DEBUG -- : 
D, [2015-01-02T09:16:20.271386 #10344] DEBUG -- : 
I, [2015-01-02T09:16:20.315388 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-02 09:16:20 +0000
D, [2015-01-02T09:16:22.665229 #10344] DEBUG -- : 
D, [2015-01-02T09:16:22.696429 #10344] DEBUG -- : 
I, [2015-01-02T09:16:22.758829 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-02 09:16:22 +0000
I, [2015-01-02T09:16:22.914830 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-02T09:16:22.982631 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-02T09:16:23.091831 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-02T09:16:23.185431 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-02T09:16:23.310232 #10344] DEBUG -- :   [1m[36mLineItem Load (15.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-02T09:16:23.450632 #10344] DEBUG -- :   [1m[35mProduct Load (15.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-02T09:16:23.513032 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-02T09:16:23.742433 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Fri, 02 Jan 2015 09:16:23 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:a18beb0,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 02 Jan 2015 09:16:23 UTC +00:00]]
D, [2015-01-02T09:16:23.914033 #10344] DEBUG -- :   [1m[36m (109.2ms)[0m  [1mcommit transaction[0m
D, [2015-01-02T09:16:24.038833 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-02T09:16:24.130834 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-02T09:16:24.208835 #10344]  INFO -- :   Rendered carts/_cart.html.erb (232.4ms)
I, [2015-01-02T09:16:24.271036 #10344]  INFO -- :   Rendered line_items/create.js.erb (279.2ms)
I, [2015-01-02T09:16:24.313638 #10344]  INFO -- : Completed 200 OK in 1283ms (Views: 365.0ms | ActiveRecord: 156.0ms)
D, [2015-01-02T09:16:24.360438 #10344] DEBUG -- : 
D, [2015-01-02T09:16:24.376038 #10344] DEBUG -- : 
I, [2015-01-02T09:16:24.437240 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-02 09:16:24 +0000
I, [2015-01-02T09:16:24.563247 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-02T09:16:24.630251 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-02T09:16:24.716256 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-02T09:16:24.802261 #10344] DEBUG -- :   [1m[35mProduct Load (3.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-02T09:16:24.917267 #10344] DEBUG -- :   [1m[36mLineItem Load (3.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-02T09:16:25.049275 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-02T09:16:25.100278 #10344] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-02T09:16:25.311290 #10344] DEBUG -- :   [1m[35mSQL (10.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Fri, 02 Jan 2015 09:16:25 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:86e1178,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 02 Jan 2015 09:16:25 UTC +00:00]]
D, [2015-01-02T09:16:25.482300 #10344] DEBUG -- :   [1m[36m (131.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-02T09:16:25.607100 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-02T09:16:25.747500 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-02T09:16:25.825500 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (140.4ms)
I, [2015-01-02T09:16:25.903500 #10344]  INFO -- :   Rendered carts/_cart.html.erb (343.2ms)
I, [2015-01-02T09:16:25.950300 #10344]  INFO -- :   Rendered line_items/create.js.erb (405.6ms)
I, [2015-01-02T09:16:26.033301 #10344]  INFO -- : Completed 200 OK in 1334ms (Views: 468.0ms | ActiveRecord: 153.0ms)
D, [2015-01-02T09:16:27.489582 #10344] DEBUG -- : 
D, [2015-01-02T09:16:27.521584 #10344] DEBUG -- : 
I, [2015-01-02T09:16:27.557785 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-02 09:16:27 +0000
I, [2015-01-02T09:16:27.698185 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-02T09:16:27.776185 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-02T09:16:27.854185 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-02T09:16:27.932185 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T09:16:28.042385 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-02T09:16:28.167186 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-02T09:16:32.819395 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-02T09:16:32.975395 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Fri, 02 Jan 2015 09:16:32 UTC +00:00], ["updated_at", Fri, 02 Jan 2015 09:16:32 UTC +00:00]]
D, [2015-01-02T09:16:33.162595 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 85  [["cart_id", nil], ["order_id", 68], ["updated_at", Fri, 02 Jan 2015 09:16:33 UTC +00:00]]
D, [2015-01-02T09:16:33.334196 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 86[0m  [["cart_id", nil], ["order_id", 68], ["updated_at", Fri, 02 Jan 2015 09:16:33 UTC +00:00]]
I, [2015-01-02T09:16:33.380996 #10344]  INFO -- : about to @payment.create
D, [2015-01-02T09:16:34.379398 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-02T09:16:34.472998 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-02T09:16:35.677433 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 68]]
W, [2015-01-02T09:16:35.739833 #10344]  WARN -- : undefined method `name=' for #<PayPal::SDK::REST::DataTypes::ItemList:0x000000099cf488>
W, [2015-01-02T09:16:35.802233 #10344]  WARN -- : undefined method `sku=' for #<PayPal::SDK::REST::DataTypes::ItemList:0x000000099cf488>
W, [2015-01-02T09:16:35.864633 #10344]  WARN -- : undefined method `price=' for #<PayPal::SDK::REST::DataTypes::ItemList:0x000000099cf488>
W, [2015-01-02T09:16:35.927033 #10344]  WARN -- : undefined method `currency=' for #<PayPal::SDK::REST::DataTypes::ItemList:0x000000099cf488>
W, [2015-01-02T09:16:35.973833 #10344]  WARN -- : undefined method `quantity=' for #<PayPal::SDK::REST::DataTypes::ItemList:0x000000099cf488>
I, [2015-01-02T09:16:45.898051 #10344]  INFO -- : in order=
I, [2015-01-02T09:16:45.915651 #10344]  INFO -- : in payment.create
I, [2015-01-02T09:16:46.118451 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/68/confirm", "cancel_url"=>"http://localhost:3000/orders/68/cancel"}}
I, [2015-01-02T09:16:46.867253 #10344]  INFO -- : #<ActiveModel::Errors:0x00000009512a58 @base=#<Payment:0x00000002adb310 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000002a973b8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000099d4f78 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000099d4938 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000099cf488 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000099ce8d0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009568a20 @error=nil, @return_url="http://localhost:3000/orders/68/confirm", @cancel_url="http://localhost:3000/orders/68/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009512a58 ...>>, @messages={}>
I, [2015-01-02T09:16:46.882853 #10344]  INFO -- : got past invalid
I, [2015-01-02T09:16:46.978453 #10344]  INFO -- : PayPal-Request-Id: 7241ddf1-351b-47da-b2ab-625b193c8afe
I, [2015-01-02T09:16:47.009653 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-02T09:16:48.054855 #10344]  INFO -- : Response[400]: Bad Request, Duration: 1.014s
I, [2015-01-02T09:16:48.070455 #10344]  INFO -- :  in error=
I, [2015-01-02T09:16:48.086055 #10344]  INFO -- : back from super
I, [2015-01-02T09:16:48.274255 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/68/confirm", "cancel_url"=>"http://localhost:3000/orders/68/cancel"}}
I, [2015-01-02T09:16:49.601258 #10344]  INFO -- : @payment save just done
I, [2015-01-02T09:16:50.538259 #10344]  INFO -- : #<Payment:0x00000002adb310 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"1629c38dc447f"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000002a973b8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000099d4f78 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000099d4938 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000099cf488 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000099ce8d0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009568a20 @error=nil, @return_url="http://localhost:3000/orders/68/confirm", @cancel_url="http://localhost:3000/orders/68/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009512a58 @base=#<Payment:0x00000002adb310 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="7241ddf1-351b-47da-b2ab-625b193c8afe", @header={}>
I, [2015-01-02T09:16:51.536661 #10344]  INFO -- : #<Payment:0x00000002adb310 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"1629c38dc447f"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000002a973b8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000099d4f78 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000099d4938 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000099cf488 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000099ce8d0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009568a20 @error=nil, @return_url="http://localhost:3000/orders/68/confirm", @cancel_url="http://localhost:3000/orders/68/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009512a58 @base=#<Payment:0x00000002adb310 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="7241ddf1-351b-47da-b2ab-625b193c8afe", @header={}>
D, [2015-01-02T09:16:51.709261 #10344] DEBUG -- :   [1m[36m (110.2ms)[0m  [1mcommit transaction[0m
I, [2015-01-02T09:16:51.740461 #10344]  INFO -- : about to approve url
I, [2015-01-02T09:16:52.941664 #10344]  INFO -- : #<Payment:0x00000002adb310 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"1629c38dc447f"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000002a973b8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000099d4f78 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000099d4938 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000099cf488 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000099ce8d0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009568a20 @error=nil, @return_url="http://localhost:3000/orders/68/confirm", @cancel_url="http://localhost:3000/orders/68/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009512a58 @base=#<Payment:0x00000002adb310 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="7241ddf1-351b-47da-b2ab-625b193c8afe", @header={}>
I, [2015-01-02T09:16:52.988464 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-02T09:16:53.052864 #10344]  INFO -- : Completed 302 Found in 25308ms (ActiveRecord: 125.8ms)
D, [2015-01-02T09:16:53.193264 #10344] DEBUG -- : 
D, [2015-01-02T09:16:53.224464 #10344] DEBUG -- : 
I, [2015-01-02T09:16:53.271264 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-02 09:16:53 +0000
I, [2015-01-02T09:16:53.411664 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-02T09:16:53.505265 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T09:16:53.645665 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-02T09:16:53.739265 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (0.0ms)
I, [2015-01-02T09:16:53.801665 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (202.8ms)
D, [2015-01-02T09:16:54.066866 #10344] DEBUG -- :   [1m[35mLineItem Exists (0.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 36]]
D, [2015-01-02T09:16:54.160466 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-02T09:16:54.207266 #10344]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-02T09:16:54.285266 #10344]  INFO -- :   Rendered carts/_cart.html.erb (171.6ms)
I, [2015-01-02T09:16:54.378866 #10344]  INFO -- : Completed 200 OK in 920ms (Views: 811.2ms | ActiveRecord: 0.0ms)
D, [2015-01-02T09:18:37.772150 #10344] DEBUG -- : 
D, [2015-01-02T09:18:37.803350 #10344] DEBUG -- : 
I, [2015-01-02T09:18:37.850150 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-02 09:18:37 +0000
I, [2015-01-02T09:18:37.943750 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-02T09:18:37.992951 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-02T09:18:38.070951 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T09:18:38.148951 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-02T09:18:38.242552 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-02T09:18:38.336152 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-02T09:18:38.367352 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-02T09:18:38.554552 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Fri, 02 Jan 2015 09:18:38 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:98a03f0,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 02 Jan 2015 09:18:38 UTC +00:00]]
D, [2015-01-02T09:18:38.694952 #10344] DEBUG -- :   [1m[35m (109.2ms)[0m  commit transaction
D, [2015-01-02T09:18:38.804152 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-02T09:18:38.882153 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-02T09:18:38.944553 #10344]  INFO -- :   Rendered carts/_cart.html.erb (187.2ms)
I, [2015-01-02T09:18:39.006953 #10344]  INFO -- :   Rendered line_items/create.js.erb (234.0ms)
I, [2015-01-02T09:18:39.053753 #10344]  INFO -- : Completed 200 OK in 998ms (Views: 312.0ms | ActiveRecord: 109.2ms)
D, [2015-01-02T09:18:40.775420 #10344] DEBUG -- : 
D, [2015-01-02T09:18:40.791020 #10344] DEBUG -- : 
I, [2015-01-02T09:18:40.853420 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-02 09:18:40 +0000
I, [2015-01-02T09:18:40.947021 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-02T09:18:41.009421 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-02T09:18:41.087421 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T09:18:41.172421 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-02T09:18:41.270022 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-02T09:18:41.363622 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-02T09:18:41.426022 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-02T09:18:41.644422 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Fri, 02 Jan 2015 09:18:41 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:7f8c698,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 02 Jan 2015 09:18:41 UTC +00:00]]
D, [2015-01-02T09:18:41.831623 #10344] DEBUG -- :   [1m[35m (140.4ms)[0m  commit transaction
D, [2015-01-02T09:18:41.956423 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-02T09:18:42.096823 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-02T09:18:42.174823 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (140.4ms)
I, [2015-01-02T09:18:42.245224 #10344]  INFO -- :   Rendered carts/_cart.html.erb (343.2ms)
I, [2015-01-02T09:18:42.294024 #10344]  INFO -- :   Rendered line_items/create.js.erb (414.6ms)
I, [2015-01-02T09:18:42.358424 #10344]  INFO -- : Completed 200 OK in 1300ms (Views: 478.0ms | ActiveRecord: 140.4ms)
D, [2015-01-02T09:18:43.776285 #10344] DEBUG -- : 
D, [2015-01-02T09:18:43.791886 #10344] DEBUG -- : 
I, [2015-01-02T09:18:43.854286 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-02 09:18:43 +0000
I, [2015-01-02T09:18:43.963486 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-02T09:18:44.041486 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-02T09:18:44.103886 #10344] DEBUG -- :   [1m[35mUser Load (15.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-02T09:18:44.181886 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-02T09:18:44.275486 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-02T09:18:44.415887 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-02T09:18:51.647902 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-02T09:18:51.772703 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Fri, 02 Jan 2015 09:18:51 UTC +00:00], ["updated_at", Fri, 02 Jan 2015 09:18:51 UTC +00:00]]
D, [2015-01-02T09:18:51.913103 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 87[0m  [["cart_id", nil], ["order_id", 69], ["updated_at", Fri, 02 Jan 2015 09:18:51 UTC +00:00]]
D, [2015-01-02T09:18:52.037903 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 88  [["cart_id", nil], ["order_id", 69], ["updated_at", Fri, 02 Jan 2015 09:18:51 UTC +00:00]]
I, [2015-01-02T09:18:52.069103 #10344]  INFO -- : about to @payment.create
D, [2015-01-02T09:18:58.741315 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-02T09:18:58.834915 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-02T09:19:00.879519 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 69]]
W, [2015-01-02T09:19:00.926319 #10344]  WARN -- : undefined method `name=' for #<PayPal::SDK::REST::DataTypes::ItemList:0x000000092c7370>
W, [2015-01-02T09:19:00.957519 #10344]  WARN -- : undefined method `sku=' for #<PayPal::SDK::REST::DataTypes::ItemList:0x000000092c7370>
W, [2015-01-02T09:19:01.019919 #10344]  WARN -- : undefined method `price=' for #<PayPal::SDK::REST::DataTypes::ItemList:0x000000092c7370>
W, [2015-01-02T09:19:01.066719 #10344]  WARN -- : undefined method `currency=' for #<PayPal::SDK::REST::DataTypes::ItemList:0x000000092c7370>
W, [2015-01-02T09:19:01.129120 #10344]  WARN -- : undefined method `quantity=' for #<PayPal::SDK::REST::DataTypes::ItemList:0x000000092c7370>
I, [2015-01-02T09:20:05.508634 #10344]  INFO -- : in order=
I, [2015-01-02T09:20:05.524234 #10344]  INFO -- : in payment.create
I, [2015-01-02T09:20:05.680235 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/69/confirm", "cancel_url"=>"http://localhost:3000/orders/69/cancel"}}
I, [2015-01-02T09:20:06.257436 #10344]  INFO -- : #<ActiveModel::Errors:0x00000009e8f4c8 @base=#<Payment:0x00000009b1d218 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009b1c3e0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009315228 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009314a58 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000092c7370 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000092c67e0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009f06cd0 @error=nil, @return_url="http://localhost:3000/orders/69/confirm", @cancel_url="http://localhost:3000/orders/69/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009e8f4c8 ...>>, @messages={}>
I, [2015-01-02T09:20:06.288636 #10344]  INFO -- : got past invalid
I, [2015-01-02T09:20:06.366636 #10344]  INFO -- : PayPal-Request-Id: 65c7cd8b-f97b-42e3-80f8-a54cba3df9bc
I, [2015-01-02T09:20:06.397836 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-02T09:20:07.521038 #10344]  INFO -- : Response[400]: Bad Request, Duration: 1.076s
I, [2015-01-02T09:20:07.536638 #10344]  INFO -- :  in error=
I, [2015-01-02T09:20:07.552238 #10344]  INFO -- : back from super
I, [2015-01-02T09:20:07.708238 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/69/confirm", "cancel_url"=>"http://localhost:3000/orders/69/cancel"}}
I, [2015-01-02T09:20:08.067039 #10344]  INFO -- : @payment save just done
I, [2015-01-02T09:20:08.987440 #10344]  INFO -- : #<Payment:0x00000009b1d218 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"9f38191b37ee6"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009b1c3e0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009315228 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009314a58 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000092c7370 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000092c67e0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009f06cd0 @error=nil, @return_url="http://localhost:3000/orders/69/confirm", @cancel_url="http://localhost:3000/orders/69/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009e8f4c8 @base=#<Payment:0x00000009b1d218 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="65c7cd8b-f97b-42e3-80f8-a54cba3df9bc", @header={}>
I, [2015-01-02T09:20:09.893242 #10344]  INFO -- : #<Payment:0x00000009b1d218 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"9f38191b37ee6"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009b1c3e0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009315228 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009314a58 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000092c7370 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000092c67e0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009f06cd0 @error=nil, @return_url="http://localhost:3000/orders/69/confirm", @cancel_url="http://localhost:3000/orders/69/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009e8f4c8 @base=#<Payment:0x00000009b1d218 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="65c7cd8b-f97b-42e3-80f8-a54cba3df9bc", @header={}>
D, [2015-01-02T09:20:10.018042 #10344] DEBUG -- :   [1m[35m (93.6ms)[0m  commit transaction
I, [2015-01-02T09:20:10.050242 #10344]  INFO -- : about to approve url
I, [2015-01-02T09:20:10.939444 #10344]  INFO -- : #<Payment:0x00000009b1d218 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"9f38191b37ee6"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009b1c3e0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009315228 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009314a58 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000092c7370 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000092c67e0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009f06cd0 @error=nil, @return_url="http://localhost:3000/orders/69/confirm", @cancel_url="http://localhost:3000/orders/69/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009e8f4c8 @base=#<Payment:0x00000009b1d218 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="65c7cd8b-f97b-42e3-80f8-a54cba3df9bc", @header={}>
I, [2015-01-02T09:20:10.970644 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-02T09:20:11.001844 #10344]  INFO -- : Completed 302 Found in 87007ms (ActiveRecord: 124.8ms)
D, [2015-01-02T09:20:11.080844 #10344] DEBUG -- : 
D, [2015-01-02T09:20:11.096444 #10344] DEBUG -- : 
I, [2015-01-02T09:20:11.143244 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-02 09:20:11 +0000
I, [2015-01-02T09:20:13.549649 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-02T09:20:13.674449 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-02T09:20:13.892849 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-02T09:20:14.111250 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (15.6ms)
I, [2015-01-02T09:20:14.142450 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (296.4ms)
D, [2015-01-02T09:20:14.423250 #10344] DEBUG -- :   [1m[36mLineItem Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-02T09:20:14.516850 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-02T09:20:14.548050 #10344]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-02T09:20:14.657251 #10344]  INFO -- :   Rendered carts/_cart.html.erb (187.2ms)
I, [2015-01-02T09:20:14.719651 #10344]  INFO -- : Completed 200 OK in 1123ms (Views: 842.4ms | ActiveRecord: 31.2ms)
D, [2015-01-02T09:20:21.105467 #10344] DEBUG -- : 
D, [2015-01-02T09:20:21.121067 #10344] DEBUG -- : 
I, [2015-01-02T09:20:21.183467 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-02 09:20:21 +0000
I, [2015-01-02T09:20:21.308268 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-02T09:20:21.370668 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-02T09:20:21.454069 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-02T09:20:21.532069 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-02T09:20:21.641269 #10344] DEBUG -- :   [1m[36mLineItem Load (15.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-02T09:20:21.915470 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-02T09:20:21.977871 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-02T09:20:22.211871 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Fri, 02 Jan 2015 09:20:21 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:83b1318,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 02 Jan 2015 09:20:21 UTC +00:00]]
D, [2015-01-02T09:20:22.437073 #10344] DEBUG -- :   [1m[36m (171.4ms)[0m  [1mcommit transaction[0m
D, [2015-01-02T09:20:22.564275 #10344] DEBUG -- :   [1m[35mLineItem Load (15.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-02T09:20:22.642275 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-02T09:20:22.720275 #10344]  INFO -- :   Rendered carts/_cart.html.erb (202.8ms)
I, [2015-01-02T09:20:22.767075 #10344]  INFO -- :   Rendered line_items/create.js.erb (265.2ms)
I, [2015-01-02T09:20:22.813875 #10344]  INFO -- : Completed 200 OK in 1396ms (Views: 310.4ms | ActiveRecord: 204.6ms)
D, [2015-01-02T09:20:22.855076 #10344] DEBUG -- : 
D, [2015-01-02T09:20:22.890677 #10344] DEBUG -- : 
I, [2015-01-02T09:20:22.954681 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-02 09:20:22 +0000
I, [2015-01-02T09:20:23.071687 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-02T09:20:23.166693 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-02T09:20:23.263698 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-02T09:20:23.355703 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-02T09:20:23.484711 #10344] DEBUG -- :   [1m[36mLineItem Load (3.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-02T09:20:23.604718 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-02T09:20:23.659721 #10344] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-02T09:20:23.895734 #10344] DEBUG -- :   [1m[35mSQL (9.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Fri, 02 Jan 2015 09:20:23 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:492afa0,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 02 Jan 2015 09:20:23 UTC +00:00]]
D, [2015-01-02T09:20:24.078736 #10344] DEBUG -- :   [1m[36m (130.2ms)[0m  [1mcommit transaction[0m
D, [2015-01-02T09:20:24.234736 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-02T09:20:24.375137 #10344] DEBUG -- :   [1m[36mProduct Load (15.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-02T09:20:24.453137 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (156.0ms)
I, [2015-01-02T09:20:24.543939 #10344]  INFO -- :   Rendered carts/_cart.html.erb (358.8ms)
I, [2015-01-02T09:20:24.591140 #10344]  INFO -- :   Rendered line_items/create.js.erb (437.0ms)
I, [2015-01-02T09:20:24.653541 #10344]  INFO -- : Completed 200 OK in 1422ms (Views: 496.8ms | ActiveRecord: 164.8ms)
D, [2015-01-02T09:20:26.081402 #10344] DEBUG -- : 
D, [2015-01-02T09:20:26.112602 #10344] DEBUG -- : 
I, [2015-01-02T09:20:26.175002 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-02 09:20:26 +0000
I, [2015-01-02T09:20:26.331003 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-02T09:20:26.467804 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-02T09:20:26.672604 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-02T09:20:26.750604 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T09:20:26.937805 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-02T09:20:27.093805 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-02T09:20:30.425012 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-02T09:20:30.815013 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Fri, 02 Jan 2015 09:20:30 UTC +00:00], ["updated_at", Fri, 02 Jan 2015 09:20:30 UTC +00:00]]
D, [2015-01-02T09:20:30.971013 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 89  [["cart_id", nil], ["order_id", 70], ["updated_at", Fri, 02 Jan 2015 09:20:30 UTC +00:00]]
D, [2015-01-02T09:20:31.142613 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 90[0m  [["cart_id", nil], ["order_id", 70], ["updated_at", Fri, 02 Jan 2015 09:20:30 UTC +00:00]]
I, [2015-01-02T09:20:31.173813 #10344]  INFO -- : about to @payment.create
D, [2015-01-02T09:20:32.281415 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-02T09:20:32.390615 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-02T09:20:33.404617 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 70]]
I, [2015-01-02T09:20:49.422246 #10344]  INFO -- : in order=
I, [2015-01-02T09:20:49.453446 #10344]  INFO -- : in payment.create
I, [2015-01-02T09:20:49.718646 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}, {"quantity"=>"1", "name"=>"penknife", "price"=>"2", "currency"=>"GBP", "sku"=>"PK1"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/70/confirm", "cancel_url"=>"http://localhost:3000/orders/70/cancel"}}
I, [2015-01-02T09:20:50.451848 #10344]  INFO -- : #<ActiveModel::Errors:0x00000004aac248 @base=#<Payment:0x000000099df9c8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000099de730 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000929aff0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000929a438 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009298c50 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000928fe98 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000926c088 @error=nil, @name="penknife", @sku="PK1", @price="2", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000004c5a810 @error=nil, @return_url="http://localhost:3000/orders/70/confirm", @cancel_url="http://localhost:3000/orders/70/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000004aac248 ...>>, @messages={}>
I, [2015-01-02T09:20:50.483048 #10344]  INFO -- : got past invalid
I, [2015-01-02T09:20:50.592248 #10344]  INFO -- : PayPal-Request-Id: dae907ec-6062-4f7d-bc4e-f0905ed497d8
I, [2015-01-02T09:20:50.639048 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-02T09:20:51.653050 #10344]  INFO -- : Response[400]: Bad Request, Duration: 0.967s
I, [2015-01-02T09:20:51.684250 #10344]  INFO -- :  in error=
I, [2015-01-02T09:20:51.715450 #10344]  INFO -- : back from super
I, [2015-01-02T09:20:51.980650 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}, {"quantity"=>"1", "name"=>"penknife", "price"=>"2", "currency"=>"GBP", "sku"=>"PK1"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/70/confirm", "cancel_url"=>"http://localhost:3000/orders/70/cancel"}}
I, [2015-01-02T09:20:54.369454 #10344]  INFO -- : @payment save just done
I, [2015-01-02T09:20:55.367856 #10344]  INFO -- : #<Payment:0x000000099df9c8 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"fbf2867b03576"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000099de730 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000929aff0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000929a438 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009298c50 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000928fe98 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000926c088 @error=nil, @name="penknife", @sku="PK1", @price="2", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000004c5a810 @error=nil, @return_url="http://localhost:3000/orders/70/confirm", @cancel_url="http://localhost:3000/orders/70/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000004aac248 @base=#<Payment:0x000000099df9c8 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="dae907ec-6062-4f7d-bc4e-f0905ed497d8", @header={}>
I, [2015-01-02T09:20:56.352658 #10344]  INFO -- : #<Payment:0x000000099df9c8 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"fbf2867b03576"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000099de730 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000929aff0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000929a438 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009298c50 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000928fe98 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000926c088 @error=nil, @name="penknife", @sku="PK1", @price="2", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000004c5a810 @error=nil, @return_url="http://localhost:3000/orders/70/confirm", @cancel_url="http://localhost:3000/orders/70/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000004aac248 @base=#<Payment:0x000000099df9c8 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="dae907ec-6062-4f7d-bc4e-f0905ed497d8", @header={}>
D, [2015-01-02T09:20:56.508658 #10344] DEBUG -- :   [1m[36m (109.2ms)[0m  [1mcommit transaction[0m
I, [2015-01-02T09:20:56.539858 #10344]  INFO -- : about to approve url
I, [2015-01-02T09:20:57.555860 #10344]  INFO -- : #<Payment:0x000000099df9c8 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"fbf2867b03576"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000099de730 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000929aff0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000929a438 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009298c50 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000928fe98 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000926c088 @error=nil, @name="penknife", @sku="PK1", @price="2", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000004c5a810 @error=nil, @return_url="http://localhost:3000/orders/70/confirm", @cancel_url="http://localhost:3000/orders/70/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000004aac248 @base=#<Payment:0x000000099df9c8 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="dae907ec-6062-4f7d-bc4e-f0905ed497d8", @header={}>
I, [2015-01-02T09:20:57.602660 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-02T09:20:57.665060 #10344]  INFO -- : Completed 302 Found in 31272ms (ActiveRecord: 109.2ms)
D, [2015-01-02T09:20:57.758661 #10344] DEBUG -- : 
D, [2015-01-02T09:20:57.774261 #10344] DEBUG -- : 
I, [2015-01-02T09:20:57.836661 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-02 09:20:57 +0000
I, [2015-01-02T09:20:57.945861 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-02T09:20:58.039461 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T09:20:58.148661 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-02T09:20:58.242261 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (0.0ms)
I, [2015-01-02T09:20:58.304662 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (187.2ms)
D, [2015-01-02T09:20:58.523062 #10344] DEBUG -- :   [1m[35mLineItem Exists (0.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 36]]
D, [2015-01-02T09:20:58.632262 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-02T09:20:58.663462 #10344]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-02T09:20:58.741462 #10344]  INFO -- :   Rendered carts/_cart.html.erb (156.0ms)
I, [2015-01-02T09:20:58.819462 #10344]  INFO -- : Completed 200 OK in 811ms (Views: 733.2ms | ActiveRecord: 0.0ms)
D, [2015-01-02T09:25:26.641631 #10344] DEBUG -- : 
D, [2015-01-02T09:25:26.657231 #10344] DEBUG -- : 
I, [2015-01-02T09:25:26.719631 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-02 09:25:26 +0000
I, [2015-01-02T09:25:26.793432 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-02T09:25:26.871433 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-02T09:25:26.949433 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T09:25:27.058633 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-02T09:25:27.167833 #10344] DEBUG -- :   [1m[35mLineItem Load (15.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-02T09:25:27.261433 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-02T09:25:27.308233 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-02T09:25:27.543036 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Fri, 02 Jan 2015 09:25:27 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:45b73a0,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 02 Jan 2015 09:25:27 UTC +00:00]]
D, [2015-01-02T09:25:27.761436 #10344] DEBUG -- :   [1m[35m (187.2ms)[0m  commit transaction
D, [2015-01-02T09:25:27.870636 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-02T09:25:27.948636 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-02T09:25:28.026636 #10344]  INFO -- :   Rendered carts/_cart.html.erb (187.2ms)
I, [2015-01-02T09:25:28.057836 #10344]  INFO -- :   Rendered line_items/create.js.erb (234.0ms)
I, [2015-01-02T09:25:28.120237 #10344]  INFO -- : Completed 200 OK in 1202ms (Views: 312.0ms | ActiveRecord: 218.4ms)
D, [2015-01-02T09:26:42.052037 #10344] DEBUG -- : 
D, [2015-01-02T09:26:42.067637 #10344] DEBUG -- : 
I, [2015-01-02T09:26:42.124438 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-02 09:26:42 +0000
I, [2015-01-02T09:26:44.466442 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-02T09:26:44.528842 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-02T09:26:44.669243 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T09:26:44.887643 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-02T09:26:45.184044 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-02T09:26:45.496044 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-02T09:26:45.542844 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-02T09:26:45.730045 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Fri, 02 Jan 2015 09:26:45 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:9b9a9c0,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 02 Jan 2015 09:26:45 UTC +00:00]]
D, [2015-01-02T09:26:45.917245 #10344] DEBUG -- :   [1m[35m (140.4ms)[0m  commit transaction
D, [2015-01-02T09:26:46.042045 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-02T09:26:46.166845 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-02T09:26:46.244845 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (124.8ms)
I, [2015-01-02T09:26:46.338446 #10344]  INFO -- :   Rendered carts/_cart.html.erb (343.2ms)
I, [2015-01-02T09:26:46.385246 #10344]  INFO -- :   Rendered line_items/create.js.erb (390.0ms)
I, [2015-01-02T09:26:46.416446 #10344]  INFO -- : Completed 200 OK in 1856ms (Views: 468.0ms | ActiveRecord: 171.6ms)
D, [2015-01-02T09:26:48.301709 #10344] DEBUG -- : 
D, [2015-01-02T09:26:48.317309 #10344] DEBUG -- : 
I, [2015-01-02T09:26:48.379709 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-02 09:26:48 +0000
I, [2015-01-02T09:26:48.520109 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-02T09:26:48.629309 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-02T09:26:48.817510 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-02T09:26:48.895510 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-02T09:26:49.082710 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-02T09:26:49.238710 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-02T09:26:54.007327 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-02T09:26:54.334928 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Fri, 02 Jan 2015 09:26:54 UTC +00:00], ["updated_at", Fri, 02 Jan 2015 09:26:54 UTC +00:00]]
D, [2015-01-02T09:26:54.461728 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 91[0m  [["cart_id", nil], ["order_id", 71], ["updated_at", Fri, 02 Jan 2015 09:26:54 UTC +00:00]]
D, [2015-01-02T09:26:54.602128 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 92  [["cart_id", nil], ["order_id", 71], ["updated_at", Fri, 02 Jan 2015 09:26:54 UTC +00:00]]
I, [2015-01-02T09:26:54.633328 #10344]  INFO -- : about to @payment.create
D, [2015-01-02T09:26:55.740930 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-02T09:26:55.803330 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
I, [2015-01-02T09:26:56.927532 #10344]  INFO -- : in order=
I, [2015-01-02T09:26:56.958732 #10344]  INFO -- : in payment.create
I, [2015-01-02T09:26:57.145933 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"18.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}, {"quantity"=>"1", "name"=>"penknife", "price"=>"19.99", "currency"=>"GBP", "sku"=>"PK1"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/71/confirm", "cancel_url"=>"http://localhost:3000/orders/71/cancel"}}
I, [2015-01-02T09:26:57.738734 #10344]  INFO -- : #<ActiveModel::Errors:0x00000004aa4d40 @base=#<Payment:0x00000006292f10 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000062905a8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005b515a8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005b50770 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000005b44268 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005b30f10 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="18.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x00000005b1acb0 @error=nil, @name="penknife", @sku="PK1", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000057b32e8 @error=nil, @return_url="http://localhost:3000/orders/71/confirm", @cancel_url="http://localhost:3000/orders/71/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000004aa4d40 ...>>, @messages={}>
I, [2015-01-02T09:26:57.754334 #10344]  INFO -- : got past invalid
I, [2015-01-02T09:26:57.847934 #10344]  INFO -- : PayPal-Request-Id: edf60972-21da-4c85-9ab9-fb07361ca820
I, [2015-01-02T09:26:57.894734 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-02T09:26:59.269536 #10344]  INFO -- : Response[201]: Created, Duration: 1.344s
I, [2015-01-02T09:26:59.331937 #10344]  INFO -- : back from super
I, [2015-01-02T09:26:59.799937 #10344]  INFO -- : {"id"=>"PAY-9XR684230P627874WKSTGIZI", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98", "details"=>{"subtotal"=>"38.98"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"18.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}, {"quantity"=>"1", "name"=>"penknife", "price"=>"19.99", "currency"=>"GBP", "sku"=>"PK1"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/71/confirm", "cancel_url"=>"http://localhost:3000/orders/71/cancel"}, "create_time"=>"2015-01-02T09:27:01Z", "update_time"=>"2015-01-02T09:27:01Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-9XR684230P627874WKSTGIZI", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-46667371TM384891X", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-9XR684230P627874WKSTGIZI/execute", "rel"=>"execute", "method"=>"POST"}]}
I, [2015-01-02T09:27:02.146942 #10344]  INFO -- : @payment save just done
I, [2015-01-02T09:27:03.162944 #10344]  INFO -- : #<Payment:0x00000006292f10 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000035beac0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000035b4868 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000035af200 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000003587818 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000035846b8 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000003507078 @error=nil, @subtotal="38.98">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000034f4e50 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000002d9f7e0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="18.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x00000002ad9c40 @error=nil, @name="penknife", @sku="PK1", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000057b32e8 @error=nil, @return_url="http://localhost:3000/orders/71/confirm", @cancel_url="http://localhost:3000/orders/71/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000004aa4d40 @base=#<Payment:0x00000006292f10 ...>, @messages={}>, @request_id="edf60972-21da-4c85-9ab9-fb07361ca820", @header={}, @id="PAY-9XR684230P627874WKSTGIZI", @create_time="2015-01-02T09:27:01Z", @update_time="2015-01-02T09:27:01Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000083aa2c0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9XR684230P627874WKSTGIZI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000083a8060 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-46667371TM384891X", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009e95698 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9XR684230P627874WKSTGIZI/execute", @rel="execute", @method="POST">]>
I, [2015-01-02T09:27:04.397747 #10344]  INFO -- : #<Payment:0x00000006292f10 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000035beac0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000035b4868 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000035af200 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000003587818 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000035846b8 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000003507078 @error=nil, @subtotal="38.98">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000034f4e50 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000002d9f7e0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="18.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x00000002ad9c40 @error=nil, @name="penknife", @sku="PK1", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000057b32e8 @error=nil, @return_url="http://localhost:3000/orders/71/confirm", @cancel_url="http://localhost:3000/orders/71/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000004aa4d40 @base=#<Payment:0x00000006292f10 ...>, @messages={}>, @request_id="edf60972-21da-4c85-9ab9-fb07361ca820", @header={}, @id="PAY-9XR684230P627874WKSTGIZI", @create_time="2015-01-02T09:27:01Z", @update_time="2015-01-02T09:27:01Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000083aa2c0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9XR684230P627874WKSTGIZI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000083a8060 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-46667371TM384891X", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009e95698 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9XR684230P627874WKSTGIZI/execute", @rel="execute", @method="POST">]>
D, [2015-01-02T09:27:04.569347 #10344] DEBUG -- :   [1m[36m (124.8ms)[0m  [1mcommit transaction[0m
I, [2015-01-02T09:27:04.616147 #10344]  INFO -- : about to approve url
I, [2015-01-02T09:27:05.832949 #10344]  INFO -- : #<Payment:0x00000006292f10 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000035beac0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000035b4868 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000035af200 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000003587818 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000035846b8 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000003507078 @error=nil, @subtotal="38.98">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000034f4e50 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000002d9f7e0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="18.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x00000002ad9c40 @error=nil, @name="penknife", @sku="PK1", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000057b32e8 @error=nil, @return_url="http://localhost:3000/orders/71/confirm", @cancel_url="http://localhost:3000/orders/71/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000004aa4d40 @base=#<Payment:0x00000006292f10 ...>, @messages={}>, @request_id="edf60972-21da-4c85-9ab9-fb07361ca820", @header={}, @id="PAY-9XR684230P627874WKSTGIZI", @create_time="2015-01-02T09:27:01Z", @update_time="2015-01-02T09:27:01Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000083aa2c0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9XR684230P627874WKSTGIZI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000083a8060 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-46667371TM384891X", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009e95698 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9XR684230P627874WKSTGIZI/execute", @rel="execute", @method="POST">]>
I, [2015-01-02T09:27:07.065351 #10344]  INFO -- : #<Payment:0x00000006292f10 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000035beac0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000035b4868 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000035af200 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000003587818 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000035846b8 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000003507078 @error=nil, @subtotal="38.98">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000034f4e50 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000002d9f7e0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="18.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x00000002ad9c40 @error=nil, @name="penknife", @sku="PK1", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000057b32e8 @error=nil, @return_url="http://localhost:3000/orders/71/confirm", @cancel_url="http://localhost:3000/orders/71/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000004aa4d40 @base=#<Payment:0x00000006292f10 ...>, @messages={}>, @request_id="edf60972-21da-4c85-9ab9-fb07361ca820", @header={}, @id="PAY-9XR684230P627874WKSTGIZI", @create_time="2015-01-02T09:27:01Z", @update_time="2015-01-02T09:27:01Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000083aa2c0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9XR684230P627874WKSTGIZI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000083a8060 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-46667371TM384891X", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009e95698 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9XR684230P627874WKSTGIZI/execute", @rel="execute", @method="POST">]>
I, [2015-01-02T09:27:07.143352 #10344]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-46667371TM384891X
I, [2015-01-02T09:27:08.423554 #10344]  INFO -- : #<Payment:0x00000006292f10 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000035beac0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000035b4868 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000035af200 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000003587818 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000035846b8 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000003507078 @error=nil, @subtotal="38.98">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000034f4e50 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000002d9f7e0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="18.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x00000002ad9c40 @error=nil, @name="penknife", @sku="PK1", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000057b32e8 @error=nil, @return_url="http://localhost:3000/orders/71/confirm", @cancel_url="http://localhost:3000/orders/71/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000004aa4d40 @base=#<Payment:0x00000006292f10 ...>, @messages={}>, @request_id="edf60972-21da-4c85-9ab9-fb07361ca820", @header={}, @id="PAY-9XR684230P627874WKSTGIZI", @create_time="2015-01-02T09:27:01Z", @update_time="2015-01-02T09:27:01Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000083aa2c0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9XR684230P627874WKSTGIZI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000083a8060 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-46667371TM384891X", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009e95698 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9XR684230P627874WKSTGIZI/execute", @rel="execute", @method="POST">]>
I, [2015-01-02T09:27:08.501554 #10344]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-46667371TM384891X
I, [2015-01-02T09:27:08.548354 #10344]  INFO -- : Completed 403 Forbidden in 19981ms (ActiveRecord: 156.0ms)
D, [2015-01-02T09:29:41.050313 #10344] DEBUG -- : 
D, [2015-01-02T09:29:41.065913 #10344] DEBUG -- : 
I, [2015-01-02T09:29:41.128313 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-02 09:29:41 +0000
I, [2015-01-02T09:29:44.178121 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-02T09:29:44.240521 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-02T09:29:44.396521 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T09:29:44.646122 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-02T09:29:44.975722 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-02T09:29:45.334523 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-02T09:29:45.381323 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-02T09:29:45.584123 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Fri, 02 Jan 2015 09:29:45 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:a1cf1b0,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 02 Jan 2015 09:29:45 UTC +00:00]]
D, [2015-01-02T09:29:45.771324 #10344] DEBUG -- :   [1m[35m (140.4ms)[0m  commit transaction
D, [2015-01-02T09:29:45.896124 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-02T09:29:45.989724 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-02T09:29:46.114524 #10344]  INFO -- :   Rendered carts/_cart.html.erb (265.2ms)
I, [2015-01-02T09:29:46.161324 #10344]  INFO -- :   Rendered line_items/create.js.erb (312.0ms)
I, [2015-01-02T09:29:46.208124 #10344]  INFO -- : Completed 200 OK in 1921ms (Views: 374.4ms | ActiveRecord: 187.2ms)
D, [2015-01-02T09:29:46.254924 #10344] DEBUG -- : 
D, [2015-01-02T09:29:46.286525 #10344] DEBUG -- : 
I, [2015-01-02T09:29:46.335528 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-02 09:29:46 +0000
I, [2015-01-02T09:29:46.455535 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-02T09:29:46.517539 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-02T09:29:46.599543 #10344] DEBUG -- :   [1m[35mCart Load (3.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T09:29:46.682548 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-02T09:29:46.792554 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-02T09:29:46.900561 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-02T09:29:46.941563 #10344] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2015-01-02T09:29:47.157575 #10344] DEBUG -- :   [1m[36mSQL (10.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Fri, 02 Jan 2015 09:29:46 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:93b26e0,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 02 Jan 2015 09:29:46 UTC +00:00]]
D, [2015-01-02T09:29:47.333585 #10344] DEBUG -- :   [1m[35m (134.0ms)[0m  commit transaction
D, [2015-01-02T09:29:47.444587 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-02T09:29:47.584988 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-02T09:29:47.662988 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (140.4ms)
I, [2015-01-02T09:29:47.740988 #10344]  INFO -- :   Rendered carts/_cart.html.erb (327.6ms)
I, [2015-01-02T09:29:47.772188 #10344]  INFO -- :   Rendered line_items/create.js.erb (376.4ms)
I, [2015-01-02T09:29:47.834588 #10344]  INFO -- : Completed 200 OK in 1268ms (Views: 449.2ms | ActiveRecord: 156.0ms)
D, [2015-01-02T09:29:51.330055 #10344] DEBUG -- : 
D, [2015-01-02T09:29:51.345655 #10344] DEBUG -- : 
I, [2015-01-02T09:29:51.408055 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-02 09:29:51 +0000
I, [2015-01-02T09:29:51.564055 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-02T09:29:51.720055 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-02T09:29:51.922856 #10344] DEBUG -- :   [1m[35mUser Load (15.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-02T09:29:52.000856 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-02T09:29:52.188056 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-02T09:29:52.344057 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-02T09:30:01.940875 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-02T09:30:02.315276 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Fri, 02 Jan 2015 09:30:02 UTC +00:00], ["updated_at", Fri, 02 Jan 2015 09:30:02 UTC +00:00]]
D, [2015-01-02T09:30:02.471276 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 93[0m  [["cart_id", nil], ["order_id", 72], ["updated_at", Fri, 02 Jan 2015 09:30:02 UTC +00:00]]
D, [2015-01-02T09:30:02.611676 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 94  [["cart_id", nil], ["order_id", 72], ["updated_at", Fri, 02 Jan 2015 09:30:02 UTC +00:00]]
I, [2015-01-02T09:30:02.658476 #10344]  INFO -- : about to @payment.create
D, [2015-01-02T09:30:05.531882 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-02T09:30:05.641082 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
I, [2015-01-02T09:30:31.239127 #10344]  INFO -- : in order=
I, [2015-01-02T09:30:31.270327 #10344]  INFO -- : in payment.create
I, [2015-01-02T09:30:31.504328 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"penknife", "price"=>"19.99", "currency"=>"GBP", "sku"=>"PK1"}, {"quantity"=>"1", "name"=>"tee shirt", "price"=>"18.99", "currency"=>"GBP", "sku"=>"ts1"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/72/confirm", "cancel_url"=>"http://localhost:3000/orders/72/cancel"}}
I, [2015-01-02T09:30:32.114729 #10344]  INFO -- : #<ActiveModel::Errors:0x00000005826e28 @base=#<Payment:0x00000009738fd0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000972fde0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009385eb0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000093858c0 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000935f7b0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000935e680 @error=nil, @name="penknife", @sku="PK1", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000934f9a0 @error=nil, @name="tee shirt", @sku="ts1", @price="18.99", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000058a7f50 @error=nil, @return_url="http://localhost:3000/orders/72/confirm", @cancel_url="http://localhost:3000/orders/72/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005826e28 ...>>, @messages={}>
I, [2015-01-02T09:30:32.145929 #10344]  INFO -- : got past invalid
I, [2015-01-02T09:30:32.255129 #10344]  INFO -- : PayPal-Request-Id: d86e0583-59e5-40ff-b4bd-47aecf465ec3
I, [2015-01-02T09:30:32.286329 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-02T09:30:33.724532 #10344]  INFO -- : Response[201]: Created, Duration: 1.391s
I, [2015-01-02T09:30:33.755732 #10344]  INFO -- : back from super
I, [2015-01-02T09:30:34.270533 #10344]  INFO -- : {"id"=>"PAY-0CL31985DC2927826KSTGKOY", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98", "details"=>{"subtotal"=>"38.98"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"penknife", "price"=>"19.99", "currency"=>"GBP", "sku"=>"PK1"}, {"quantity"=>"1", "name"=>"tee shirt", "price"=>"18.99", "currency"=>"GBP", "sku"=>"ts1"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/72/confirm", "cancel_url"=>"http://localhost:3000/orders/72/cancel"}, "create_time"=>"2015-01-02T09:30:35Z", "update_time"=>"2015-01-02T09:30:35Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL31985DC2927826KSTGKOY", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-34V48946N5400001S", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL31985DC2927826KSTGKOY/execute", "rel"=>"execute", "method"=>"POST"}]}
I, [2015-01-02T09:30:35.660935 #10344]  INFO -- : @payment save just done
I, [2015-01-02T09:30:36.629137 #10344]  INFO -- : #<Payment:0x00000009738fd0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000049d2db8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000049bbc80 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000049baf60 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000049b9ac0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000049b8c60 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000049a2d48 @error=nil, @subtotal="38.98">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000049a1948 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000049a0db8 @error=nil, @name="penknife", @sku="PK1", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000499a210 @error=nil, @name="tee shirt", @sku="ts1", @price="18.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000058a7f50 @error=nil, @return_url="http://localhost:3000/orders/72/confirm", @cancel_url="http://localhost:3000/orders/72/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005826e28 @base=#<Payment:0x00000009738fd0 ...>, @messages={}>, @request_id="d86e0583-59e5-40ff-b4bd-47aecf465ec3", @header={}, @id="PAY-0CL31985DC2927826KSTGKOY", @create_time="2015-01-02T09:30:35Z", @update_time="2015-01-02T09:30:35Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000049926a0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL31985DC2927826KSTGKOY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000004990e68 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-34V48946N5400001S", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000498a4f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL31985DC2927826KSTGKOY/execute", @rel="execute", @method="POST">]>
I, [2015-01-02T09:30:37.596339 #10344]  INFO -- : #<Payment:0x00000009738fd0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000049d2db8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000049bbc80 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000049baf60 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000049b9ac0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000049b8c60 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000049a2d48 @error=nil, @subtotal="38.98">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000049a1948 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000049a0db8 @error=nil, @name="penknife", @sku="PK1", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000499a210 @error=nil, @name="tee shirt", @sku="ts1", @price="18.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000058a7f50 @error=nil, @return_url="http://localhost:3000/orders/72/confirm", @cancel_url="http://localhost:3000/orders/72/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005826e28 @base=#<Payment:0x00000009738fd0 ...>, @messages={}>, @request_id="d86e0583-59e5-40ff-b4bd-47aecf465ec3", @header={}, @id="PAY-0CL31985DC2927826KSTGKOY", @create_time="2015-01-02T09:30:35Z", @update_time="2015-01-02T09:30:35Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000049926a0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL31985DC2927826KSTGKOY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000004990e68 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-34V48946N5400001S", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000498a4f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL31985DC2927826KSTGKOY/execute", @rel="execute", @method="POST">]>
D, [2015-01-02T09:30:37.767939 #10344] DEBUG -- :   [1m[36m (124.8ms)[0m  [1mcommit transaction[0m
I, [2015-01-02T09:30:37.799139 #10344]  INFO -- : about to approve url
I, [2015-01-02T09:30:38.831741 #10344]  INFO -- : #<Payment:0x00000009738fd0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000049d2db8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000049bbc80 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000049baf60 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000049b9ac0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000049b8c60 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000049a2d48 @error=nil, @subtotal="38.98">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000049a1948 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000049a0db8 @error=nil, @name="penknife", @sku="PK1", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000499a210 @error=nil, @name="tee shirt", @sku="ts1", @price="18.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000058a7f50 @error=nil, @return_url="http://localhost:3000/orders/72/confirm", @cancel_url="http://localhost:3000/orders/72/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005826e28 @base=#<Payment:0x00000009738fd0 ...>, @messages={}>, @request_id="d86e0583-59e5-40ff-b4bd-47aecf465ec3", @header={}, @id="PAY-0CL31985DC2927826KSTGKOY", @create_time="2015-01-02T09:30:35Z", @update_time="2015-01-02T09:30:35Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000049926a0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL31985DC2927826KSTGKOY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000004990e68 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-34V48946N5400001S", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000498a4f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL31985DC2927826KSTGKOY/execute", @rel="execute", @method="POST">]>
I, [2015-01-02T09:30:39.846743 #10344]  INFO -- : #<Payment:0x00000009738fd0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000049d2db8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000049bbc80 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000049baf60 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000049b9ac0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000049b8c60 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000049a2d48 @error=nil, @subtotal="38.98">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000049a1948 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000049a0db8 @error=nil, @name="penknife", @sku="PK1", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000499a210 @error=nil, @name="tee shirt", @sku="ts1", @price="18.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000058a7f50 @error=nil, @return_url="http://localhost:3000/orders/72/confirm", @cancel_url="http://localhost:3000/orders/72/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005826e28 @base=#<Payment:0x00000009738fd0 ...>, @messages={}>, @request_id="d86e0583-59e5-40ff-b4bd-47aecf465ec3", @header={}, @id="PAY-0CL31985DC2927826KSTGKOY", @create_time="2015-01-02T09:30:35Z", @update_time="2015-01-02T09:30:35Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000049926a0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL31985DC2927826KSTGKOY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000004990e68 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-34V48946N5400001S", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000498a4f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL31985DC2927826KSTGKOY/execute", @rel="execute", @method="POST">]>
I, [2015-01-02T09:30:39.909143 #10344]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-34V48946N5400001S
I, [2015-01-02T09:30:40.846145 #10344]  INFO -- : #<Payment:0x00000009738fd0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000049d2db8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000049bbc80 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000049baf60 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000049b9ac0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000049b8c60 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000049a2d48 @error=nil, @subtotal="38.98">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000049a1948 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000049a0db8 @error=nil, @name="penknife", @sku="PK1", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000499a210 @error=nil, @name="tee shirt", @sku="ts1", @price="18.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000058a7f50 @error=nil, @return_url="http://localhost:3000/orders/72/confirm", @cancel_url="http://localhost:3000/orders/72/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005826e28 @base=#<Payment:0x00000009738fd0 ...>, @messages={}>, @request_id="d86e0583-59e5-40ff-b4bd-47aecf465ec3", @header={}, @id="PAY-0CL31985DC2927826KSTGKOY", @create_time="2015-01-02T09:30:35Z", @update_time="2015-01-02T09:30:35Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000049926a0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL31985DC2927826KSTGKOY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000004990e68 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-34V48946N5400001S", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000498a4f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL31985DC2927826KSTGKOY/execute", @rel="execute", @method="POST">]>
I, [2015-01-02T09:30:40.892945 #10344]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-34V48946N5400001S
I, [2015-01-02T09:30:40.924145 #10344]  INFO -- : Completed 403 Forbidden in 49329ms (ActiveRecord: 171.6ms)
