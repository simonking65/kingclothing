D, [2014-12-29T15:54:40.838461 #14508] DEBUG -- : 
D, [2014-12-29T15:54:40.866463 #14508] DEBUG -- : 
I, [2014-12-29T15:54:40.921466 #14508]  INFO -- : Started GET "/" for 127.0.0.1 at 2014-12-29 15:54:40 +0000
D, [2014-12-29T15:54:41.856519 #14508] DEBUG -- :   [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
I, [2014-12-29T15:54:42.095533 #14508]  INFO -- : Processing by StoreController#index as HTML
D, [2014-12-29T15:54:42.206539 #14508] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2014-12-29T15:54:42.387550 #14508] DEBUG -- :   [1m[36mSQL (23.0ms)[0m  [1mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Mon, 29 Dec 2014 15:54:42 UTC +00:00], ["updated_at", Mon, 29 Dec 2014 15:54:42 UTC +00:00]]
D, [2014-12-29T15:54:42.566560 #14508] DEBUG -- :   [1m[35m (135.0ms)[0m  commit transaction
D, [2014-12-29T15:54:42.753571 #14508] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2014-12-29T15:54:42.908579 #14508]  INFO -- : Cache digest for store/index.html: a93d4e2e981ab3dfce98a095c3b6c059
I, [2014-12-29T15:54:42.998585 #14508]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (8.0ms)
I, [2014-12-29T15:54:43.060588 #14508]  INFO -- :   Rendered store/index.html.erb within layouts/application (340.0ms)
D, [2014-12-29T15:54:43.711625 #14508] DEBUG -- :   [1m[35mLineItem Exists (1.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 30]]
D, [2014-12-29T15:54:43.823632 #14508] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 30]]
I, [2014-12-29T15:54:43.865634 #14508]  INFO -- :   Rendered collection (0.0ms)
I, [2014-12-29T15:54:43.933638 #14508]  INFO -- :   Rendered carts/_cart.html.erb (159.0ms)
I, [2014-12-29T15:54:43.999642 #14508]  INFO -- : Completed 200 OK in 1842ms (Views: 1338.1ms | ActiveRecord: 170.0ms)
D, [2014-12-29T15:54:44.361663 #14508] DEBUG -- : 
D, [2014-12-29T15:54:44.385664 #14508] DEBUG -- : 
I, [2014-12-29T15:54:44.453668 #14508]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-29 15:54:44 +0000
D, [2014-12-29T15:54:44.505671 #14508] DEBUG -- : 
D, [2014-12-29T15:54:44.528672 #14508] DEBUG -- : 
I, [2014-12-29T15:54:44.592676 #14508]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-29 15:54:44 +0000
D, [2014-12-29T15:54:44.643679 #14508] DEBUG -- : 
D, [2014-12-29T15:54:44.668680 #14508] DEBUG -- : 
I, [2014-12-29T15:54:44.731684 #14508]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-29 15:54:44 +0000
D, [2014-12-29T15:54:44.783687 #14508] DEBUG -- : 
D, [2014-12-29T15:54:44.807688 #14508] DEBUG -- : 
I, [2014-12-29T15:54:44.867691 #14508]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-29 15:54:44 +0000
D, [2014-12-29T15:54:44.922695 #14508] DEBUG -- : 
D, [2014-12-29T15:54:44.944696 #14508] DEBUG -- : 
I, [2014-12-29T15:54:45.010700 #14508]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-29 15:54:44 +0000
D, [2014-12-29T15:54:45.062703 #14508] DEBUG -- : 
D, [2014-12-29T15:54:45.088704 #14508] DEBUG -- : 
I, [2014-12-29T15:54:45.152708 #14508]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-29 15:54:45 +0000
D, [2014-12-29T15:54:45.206711 #14508] DEBUG -- : 
D, [2014-12-29T15:54:45.231712 #14508] DEBUG -- : 
I, [2014-12-29T15:54:45.299716 #14508]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-29 15:54:45 +0000
D, [2014-12-29T15:54:45.350719 #14508] DEBUG -- : 
D, [2014-12-29T15:54:45.374720 #14508] DEBUG -- : 
I, [2014-12-29T15:54:45.440724 #14508]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-29 15:54:45 +0000
D, [2014-12-29T15:54:45.491727 #14508] DEBUG -- : 
D, [2014-12-29T15:54:45.516729 #14508] DEBUG -- : 
I, [2014-12-29T15:54:45.578732 #14508]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-29 15:54:45 +0000
D, [2014-12-29T15:54:45.628735 #14508] DEBUG -- : 
D, [2014-12-29T15:54:45.651736 #14508] DEBUG -- : 
I, [2014-12-29T15:54:45.711740 #14508]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-29 15:54:45 +0000
D, [2014-12-29T15:54:45.764743 #14508] DEBUG -- : 
D, [2014-12-29T15:54:45.791744 #14508] DEBUG -- : 
I, [2014-12-29T15:54:45.861748 #14508]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-29 15:54:45 +0000
D, [2014-12-29T15:54:45.950753 #14508] DEBUG -- : 
D, [2014-12-29T15:54:45.974755 #14508] DEBUG -- : 
I, [2014-12-29T15:54:46.031758 #14508]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-29 15:54:45 +0000
D, [2014-12-29T15:54:46.089761 #14508] DEBUG -- : 
D, [2014-12-29T15:54:46.111763 #14508] DEBUG -- : 
I, [2014-12-29T15:54:46.178766 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-29 15:54:46 +0000
D, [2014-12-29T15:54:46.234770 #14508] DEBUG -- : 
D, [2014-12-29T15:54:46.254771 #14508] DEBUG -- : 
I, [2014-12-29T15:54:46.321775 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-29 15:54:46 +0000
D, [2014-12-29T15:54:46.384778 #14508] DEBUG -- : 
D, [2014-12-29T15:54:46.409780 #14508] DEBUG -- : 
I, [2014-12-29T15:54:46.473783 #14508]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-29 15:54:46 +0000
D, [2014-12-29T15:54:46.528786 #14508] DEBUG -- : 
D, [2014-12-29T15:54:46.551788 #14508] DEBUG -- : 
I, [2014-12-29T15:54:46.613791 #14508]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-29 15:54:46 +0000
D, [2014-12-29T15:54:46.668794 #14508] DEBUG -- : 
D, [2014-12-29T15:54:46.691796 #14508] DEBUG -- : 
I, [2014-12-29T15:54:46.752799 #14508]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-29 15:54:46 +0000
D, [2014-12-29T15:54:46.802802 #14508] DEBUG -- : 
D, [2014-12-29T15:54:46.826804 #14508] DEBUG -- : 
I, [2014-12-29T15:54:46.887807 #14508]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-29 15:54:46 +0000
D, [2014-12-29T15:54:46.939810 #14508] DEBUG -- : 
D, [2014-12-29T15:54:46.966812 #14508] DEBUG -- : 
I, [2014-12-29T15:54:47.029815 #14508]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-29 15:54:46 +0000
D, [2014-12-29T15:54:47.078818 #14508] DEBUG -- : 
D, [2014-12-29T15:54:47.101819 #14508] DEBUG -- : 
I, [2014-12-29T15:54:47.161823 #14508]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-29 15:54:47 +0000
D, [2014-12-29T15:54:47.210825 #14508] DEBUG -- : 
D, [2014-12-29T15:54:47.234827 #14508] DEBUG -- : 
I, [2014-12-29T15:54:47.296830 #14508]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-29 15:54:47 +0000
D, [2014-12-29T15:54:47.416837 #14508] DEBUG -- : 
D, [2014-12-29T15:54:47.438839 #14508] DEBUG -- : 
I, [2014-12-29T15:54:47.498842 #14508]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-29 15:54:47 +0000
D, [2014-12-29T15:54:47.552845 #14508] DEBUG -- : 
D, [2014-12-29T15:54:47.579847 #14508] DEBUG -- : 
I, [2014-12-29T15:54:47.647850 #14508]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-29 15:54:47 +0000
D, [2014-12-29T15:54:47.702854 #14508] DEBUG -- : 
D, [2014-12-29T15:54:47.725855 #14508] DEBUG -- : 
I, [2014-12-29T15:54:47.788859 #14508]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-29 15:54:47 +0000
D, [2014-12-29T15:54:47.843862 #14508] DEBUG -- : 
D, [2014-12-29T15:54:47.868863 #14508] DEBUG -- : 
I, [2014-12-29T15:54:47.934867 #14508]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-29 15:54:47 +0000
D, [2014-12-29T15:54:47.985870 #14508] DEBUG -- : 
D, [2014-12-29T15:54:48.009871 #14508] DEBUG -- : 
I, [2014-12-29T15:54:48.072875 #14508]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-29 15:54:48 +0000
D, [2014-12-29T15:54:48.177881 #14508] DEBUG -- : 
D, [2014-12-29T15:54:48.195882 #14508] DEBUG -- : 
I, [2014-12-29T15:54:48.249885 #14508]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-29 15:54:48 +0000
D, [2014-12-29T15:54:48.305888 #14508] DEBUG -- : 
D, [2014-12-29T15:54:48.331890 #14508] DEBUG -- : 
I, [2014-12-29T15:54:48.392893 #14508]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2014-12-29 15:54:48 +0000
D, [2014-12-29T15:54:48.506900 #14508] DEBUG -- : 
D, [2014-12-29T15:54:48.527901 #14508] DEBUG -- : 
I, [2014-12-29T15:54:48.586904 #14508]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2014-12-29 15:54:48 +0000
D, [2014-12-29T15:54:48.766914 #14508] DEBUG -- : 
D, [2014-12-29T15:54:48.787916 #14508] DEBUG -- : 
I, [2014-12-29T15:54:48.841919 #14508]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2014-12-29 15:54:48 +0000
D, [2014-12-29T15:54:51.850375 #14508] DEBUG -- : 
D, [2014-12-29T15:54:51.881575 #14508] DEBUG -- : 
I, [2014-12-29T15:54:51.943975 #14508]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2014-12-29 15:54:51 +0000
I, [2014-12-29T15:54:52.021975 #14508]  INFO -- : Processing by LineItemsController#create as JS
I, [2014-12-29T15:54:52.099975 #14508]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2014-12-29T15:54:52.177976 #14508] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 30]]
D, [2014-12-29T15:54:52.272576 #14508] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2014-12-29T15:54:52.397376 #14508] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 30]]
D, [2014-12-29T15:54:52.576977 #14508] DEBUG -- :   [1m[36mProduct Load (15.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2014-12-29T15:54:52.608177 #14508] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2014-12-29T15:54:52.842177 #14508] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 30], ["created_at", Mon, 29 Dec 2014 15:54:52 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:83ec6e8,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Mon, 29 Dec 2014 15:54:52 UTC +00:00]]
D, [2014-12-29T15:54:53.013777 #14508] DEBUG -- :   [1m[35m (124.8ms)[0m  commit transaction
D, [2014-12-29T15:54:53.122978 #14508] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 30]]
I, [2014-12-29T15:54:53.185378 #14508]  INFO -- :   Rendered line_items/_line_item.html.erb (0.0ms)
I, [2014-12-29T15:54:53.232178 #14508]  INFO -- :   Rendered carts/_cart.html.erb (156.0ms)
I, [2014-12-29T15:54:53.278978 #14508]  INFO -- :   Rendered line_items/create.js.erb (202.8ms)
I, [2014-12-29T15:54:53.341378 #14508]  INFO -- : Completed 200 OK in 1179ms (Views: 265.2ms | ActiveRecord: 140.4ms)
D, [2014-12-29T15:54:59.515653 #14508] DEBUG -- : 
D, [2014-12-29T15:54:59.539654 #14508] DEBUG -- : 
I, [2014-12-29T15:54:59.597657 #14508]  INFO -- : Started GET "/orders/new" for 127.0.0.1 at 2014-12-29 15:54:59 +0000
I, [2014-12-29T15:54:59.680662 #14508]  INFO -- : Processing by OrdersController#new as HTML
D, [2014-12-29T15:54:59.756666 #14508] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 30]]
D, [2014-12-29T15:54:59.843671 #14508] DEBUG -- :   [1m[36mLineItem Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 30]]
I, [2014-12-29T15:55:00.088685 #14508]  INFO -- :   Rendered orders/_form.html.erb (158.0ms)
I, [2014-12-29T15:55:00.144689 #14508]  INFO -- :   Rendered orders/new.html.erb within layouts/application (210.0ms)
D, [2014-12-29T15:55:00.253695 #14508] DEBUG -- :   [1m[35mCACHE (0.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 30]]
D, [2014-12-29T15:55:00.339700 #14508] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 30]]
D, [2014-12-29T15:55:00.432705 #14508] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2014-12-29T15:55:00.482708 #14508]  INFO -- :   Rendered line_items/_line_item.html.erb (90.0ms)
I, [2014-12-29T15:55:00.530711 #14508]  INFO -- :   Rendered carts/_cart.html.erb (228.0ms)
I, [2014-12-29T15:55:00.588714 #14508]  INFO -- : Completed 200 OK in 854ms (Views: 667.0ms | ActiveRecord: 3.0ms)
D, [2014-12-29T15:55:00.891731 #14508] DEBUG -- : 
D, [2014-12-29T15:55:00.922733 #14508] DEBUG -- : 
I, [2014-12-29T15:55:00.979736 #14508]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-29 15:55:00 +0000
D, [2014-12-29T15:55:01.025739 #14508] DEBUG -- : 
D, [2014-12-29T15:55:01.049740 #14508] DEBUG -- : 
I, [2014-12-29T15:55:01.115744 #14508]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-29 15:55:01 +0000
D, [2014-12-29T15:55:01.160747 #14508] DEBUG -- : 
D, [2014-12-29T15:55:01.186748 #14508] DEBUG -- : 
I, [2014-12-29T15:55:01.250752 #14508]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-29 15:55:01 +0000
D, [2014-12-29T15:55:01.293754 #14508] DEBUG -- : 
D, [2014-12-29T15:55:01.317756 #14508] DEBUG -- : 
I, [2014-12-29T15:55:01.377759 #14508]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-29 15:55:01 +0000
D, [2014-12-29T15:55:01.423762 #14508] DEBUG -- : 
D, [2014-12-29T15:55:01.450763 #14508] DEBUG -- : 
I, [2014-12-29T15:55:01.519767 #14508]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-29 15:55:01 +0000
D, [2014-12-29T15:55:01.561770 #14508] DEBUG -- : 
D, [2014-12-29T15:55:01.583771 #14508] DEBUG -- : 
I, [2014-12-29T15:55:01.642774 #14508]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-29 15:55:01 +0000
D, [2014-12-29T15:55:01.697777 #14508] DEBUG -- : 
D, [2014-12-29T15:55:01.717779 #14508] DEBUG -- : 
I, [2014-12-29T15:55:01.771782 #14508]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-29 15:55:01 +0000
D, [2014-12-29T15:55:01.812784 #14508] DEBUG -- : 
D, [2014-12-29T15:55:01.831785 #14508] DEBUG -- : 
I, [2014-12-29T15:55:01.884788 #14508]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-29 15:55:01 +0000
D, [2014-12-29T15:55:01.928791 #14508] DEBUG -- : 
D, [2014-12-29T15:55:01.949792 #14508] DEBUG -- : 
I, [2014-12-29T15:55:02.008795 #14508]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-29 15:55:01 +0000
D, [2014-12-29T15:55:02.049798 #14508] DEBUG -- : 
D, [2014-12-29T15:55:02.073799 #14508] DEBUG -- : 
I, [2014-12-29T15:55:02.132802 #14508]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-29 15:55:02 +0000
D, [2014-12-29T15:55:02.176805 #14508] DEBUG -- : 
D, [2014-12-29T15:55:02.202806 #14508] DEBUG -- : 
I, [2014-12-29T15:55:02.272810 #14508]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-29 15:55:02 +0000
D, [2014-12-29T15:55:02.319813 #14508] DEBUG -- : 
D, [2014-12-29T15:55:02.344814 #14508] DEBUG -- : 
I, [2014-12-29T15:55:02.409818 #14508]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-29 15:55:02 +0000
D, [2014-12-29T15:55:02.451821 #14508] DEBUG -- : 
D, [2014-12-29T15:55:02.472822 #14508] DEBUG -- : 
I, [2014-12-29T15:55:02.535825 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-29 15:55:02 +0000
D, [2014-12-29T15:55:02.580828 #14508] DEBUG -- : 
D, [2014-12-29T15:55:02.605829 #14508] DEBUG -- : 
I, [2014-12-29T15:55:02.675833 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-29 15:55:02 +0000
D, [2014-12-29T15:55:02.719836 #14508] DEBUG -- : 
D, [2014-12-29T15:55:02.744837 #14508] DEBUG -- : 
I, [2014-12-29T15:55:02.808841 #14508]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-29 15:55:02 +0000
D, [2014-12-29T15:55:02.850843 #14508] DEBUG -- : 
D, [2014-12-29T15:55:02.873845 #14508] DEBUG -- : 
I, [2014-12-29T15:55:02.932848 #14508]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-29 15:55:02 +0000
D, [2014-12-29T15:55:02.974850 #14508] DEBUG -- : 
D, [2014-12-29T15:55:03.013853 #14508] DEBUG -- : 
I, [2014-12-29T15:55:03.081857 #14508]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-29 15:55:03 +0000
D, [2014-12-29T15:55:03.128859 #14508] DEBUG -- : 
D, [2014-12-29T15:55:03.154861 #14508] DEBUG -- : 
I, [2014-12-29T15:55:03.220865 #14508]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-29 15:55:03 +0000
D, [2014-12-29T15:55:03.264867 #14508] DEBUG -- : 
D, [2014-12-29T15:55:03.288868 #14508] DEBUG -- : 
I, [2014-12-29T15:55:03.352872 #14508]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-29 15:55:03 +0000
D, [2014-12-29T15:55:03.397875 #14508] DEBUG -- : 
D, [2014-12-29T15:55:03.422876 #14508] DEBUG -- : 
I, [2014-12-29T15:55:03.485880 #14508]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-29 15:55:03 +0000
D, [2014-12-29T15:55:03.528882 #14508] DEBUG -- : 
D, [2014-12-29T15:55:03.552884 #14508] DEBUG -- : 
I, [2014-12-29T15:55:03.616887 #14508]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-29 15:55:03 +0000
D, [2014-12-29T15:55:03.658890 #14508] DEBUG -- : 
D, [2014-12-29T15:55:03.681891 #14508] DEBUG -- : 
I, [2014-12-29T15:55:03.739894 #14508]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-29 15:55:03 +0000
D, [2014-12-29T15:55:03.786897 #14508] DEBUG -- : 
D, [2014-12-29T15:55:03.813898 #14508] DEBUG -- : 
I, [2014-12-29T15:55:03.885903 #14508]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-29 15:55:03 +0000
D, [2014-12-29T15:55:03.932905 #14508] DEBUG -- : 
D, [2014-12-29T15:55:03.959907 #14508] DEBUG -- : 
I, [2014-12-29T15:55:04.026911 #14508]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-29 15:55:03 +0000
D, [2014-12-29T15:55:04.068913 #14508] DEBUG -- : 
D, [2014-12-29T15:55:04.091914 #14508] DEBUG -- : 
I, [2014-12-29T15:55:04.153918 #14508]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-29 15:55:04 +0000
D, [2014-12-29T15:55:04.199921 #14508] DEBUG -- : 
D, [2014-12-29T15:55:04.224922 #14508] DEBUG -- : 
I, [2014-12-29T15:55:04.289926 #14508]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-29 15:55:04 +0000
D, [2014-12-29T15:55:04.332928 #14508] DEBUG -- : 
D, [2014-12-29T15:55:04.355929 #14508] DEBUG -- : 
I, [2014-12-29T15:55:04.406932 #14508]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-29 15:55:04 +0000
D, [2014-12-29T15:55:23.509086 #14508] DEBUG -- : 
D, [2014-12-29T15:55:23.530088 #14508] DEBUG -- : 
I, [2014-12-29T15:55:23.581090 #14508]  INFO -- : Started POST "/orders" for 127.0.0.1 at 2014-12-29 15:55:23 +0000
I, [2014-12-29T15:55:23.642094 #14508]  INFO -- : Processing by OrdersController#create as HTML
I, [2014-12-29T15:55:23.756100 #14508]  INFO -- :   Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order"=>{"name"=>"s", "address"=>"s", "shipping_address1"=>"s", "email"=>"simon.king65@gmail.com", "pay_type"=>"Paypal"}, "commit"=>"Place Order"}
D, [2014-12-29T15:55:23.819104 #14508] DEBUG -- :   [1m[36mCart Load (1.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 30]]
I, [2014-12-29T15:55:23.843105 #14508]  INFO -- : log info
D, [2014-12-29T15:55:23.881108 #14508] DEBUG -- : Unpermitted parameters: shipping_address1
D, [2014-12-29T15:55:23.950112 #14508] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 30]]
I, [2014-12-29T15:55:23.993114 #14508]  INFO -- : just about to payment_method and save
I, [2014-12-29T15:55:24.097120 #14508]  INFO -- : #<Order id: nil, name: "s", address: "s", email: "simon.king65@gmail.com", pay_type: "Paypal", created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2014-12-29T15:55:24.133122 #14508] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2014-12-29T15:55:24.288131 #14508] DEBUG -- :   [1m[35mSQL (5.0ms)[0m  INSERT INTO "orders" ("address", "created_at", "email", "name", "pay_type", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "s"], ["created_at", Mon, 29 Dec 2014 15:55:24 UTC +00:00], ["email", "simon.king65@gmail.com"], ["name", "s"], ["pay_type", "Paypal"], ["updated_at", Mon, 29 Dec 2014 15:55:24 UTC +00:00]]
D, [2014-12-29T15:55:24.396137 #14508] DEBUG -- :   [1m[36mSQL (2.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 35[0m  [["cart_id", nil], ["order_id", 34], ["updated_at", Mon, 29 Dec 2014 15:55:24 UTC +00:00]]
I, [2014-12-29T15:55:24.425139 #14508]  INFO -- : about to @payment.create
D, [2014-12-29T15:55:24.507143 #14508] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2014-12-29T15:55:24.541145 #14508]  INFO -- : in order=
I, [2014-12-29T15:55:24.567147 #14508]  INFO -- : in payment.create
I, [2014-12-29T15:55:24.748157 #14508]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/34/confirm", "cancel_url"=>"http://localhost:3000/orders/34/cancel"}}
I, [2014-12-29T15:55:25.309189 #14508]  INFO -- : #<ActiveModel::Errors:0x00000009da5c88 @base=#<Payment:0x00000009e194f8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009e192a0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009db4a80 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009db4968 @error=nil, @total="19.99", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009db44b8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009db4198 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009daeea0 @error=nil, @return_url="http://localhost:3000/orders/34/confirm", @cancel_url="http://localhost:3000/orders/34/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009da5c88 ...>>, @messages={}>
I, [2014-12-29T15:55:25.335191 #14508]  INFO -- : got past invalid
I, [2014-12-29T15:55:25.459198 #14508]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/oauth2/token
I, [2014-12-29T15:55:26.682268 #14508]  INFO -- : Response[200]: OK, Duration: 1.189s
I, [2014-12-29T15:55:26.726270 #14508]  INFO -- : PayPal-Request-Id: 5cd3adcd-dcda-4135-999d-794dd1c2b48b
I, [2014-12-29T15:55:26.772273 #14508]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2014-12-29T15:55:27.896337 #14508]  INFO -- : Response[201]: Created, Duration: 1.080s
I, [2014-12-29T15:55:27.927339 #14508]  INFO -- : back from super
I, [2014-12-29T15:55:28.432368 #14508]  INFO -- : {"id"=>"PAY-0CL07334EW936040CKSQXS4A", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99", "details"=>{"subtotal"=>"19.99"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/34/confirm", "cancel_url"=>"http://localhost:3000/orders/34/cancel"}, "create_time"=>"2014-12-29T15:55:28Z", "update_time"=>"2014-12-29T15:55:28Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL07334EW936040CKSQXS4A", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-92K58545TM7584841", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL07334EW936040CKSQXS4A/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2014-12-29T15:55:28.682382 #14508] DEBUG -- :   [1m[36mSQL (4.0ms)[0m  [1mUPDATE "orders" SET "name" = ?, "address" = ?, "email" = ?, "pay_type" = ?, "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ? WHERE "orders"."id" = 34[0m  [["name", "s"], ["address", "s"], ["email", "simon.king65@gmail.com"], ["pay_type", "Paypal"], ["created_at", Mon, 29 Dec 2014 15:55:24 UTC +00:00], ["updated_at", Mon, 29 Dec 2014 15:55:24 UTC +00:00], ["id", 34], ["payment_id", "PAY-0CL07334EW936040CKSQXS4A"], ["state", "created"]]
I, [2014-12-29T15:55:28.718384 #14508]  INFO -- : @payment save just done
I, [2014-12-29T15:55:29.889451 #14508]  INFO -- : #<Payment:0x00000009e194f8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009c043c0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009c04230 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009c04190 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009c04e38 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009bfff78 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009bffd98 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009bff938 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009bff7f8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009daeea0 @error=nil, @return_url="http://localhost:3000/orders/34/confirm", @cancel_url="http://localhost:3000/orders/34/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009da5c88 @base=#<Payment:0x00000009e194f8 ...>, @messages={}>, @request_id="5cd3adcd-dcda-4135-999d-794dd1c2b48b", @header={}, @id="PAY-0CL07334EW936040CKSQXS4A", @create_time="2014-12-29T15:55:28Z", @update_time="2014-12-29T15:55:28Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009bff280 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL07334EW936040CKSQXS4A", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009bff028 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-92K58545TM7584841", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009bfed30 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL07334EW936040CKSQXS4A/execute", @rel="execute", @method="POST">]>
I, [2014-12-29T15:55:30.907510 #14508]  INFO -- : #<Payment:0x00000009e194f8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009c043c0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009c04230 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009c04190 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009c04e38 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009bfff78 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009bffd98 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009bff938 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009bff7f8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009daeea0 @error=nil, @return_url="http://localhost:3000/orders/34/confirm", @cancel_url="http://localhost:3000/orders/34/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009da5c88 @base=#<Payment:0x00000009e194f8 ...>, @messages={}>, @request_id="5cd3adcd-dcda-4135-999d-794dd1c2b48b", @header={}, @id="PAY-0CL07334EW936040CKSQXS4A", @create_time="2014-12-29T15:55:28Z", @update_time="2014-12-29T15:55:28Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009bff280 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL07334EW936040CKSQXS4A", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009bff028 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-92K58545TM7584841", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009bfed30 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL07334EW936040CKSQXS4A/execute", @rel="execute", @method="POST">]>
D, [2014-12-29T15:55:31.104521 #14508] DEBUG -- :   [1m[35m (164.0ms)[0m  commit transaction
I, [2014-12-29T15:55:31.133522 #14508]  INFO -- : about to approve url
I, [2014-12-29T15:55:32.155581 #14508]  INFO -- : #<Payment:0x00000009e194f8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009c043c0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009c04230 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009c04190 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009c04e38 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009bfff78 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009bffd98 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009bff938 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009bff7f8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009daeea0 @error=nil, @return_url="http://localhost:3000/orders/34/confirm", @cancel_url="http://localhost:3000/orders/34/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009da5c88 @base=#<Payment:0x00000009e194f8 ...>, @messages={}>, @request_id="5cd3adcd-dcda-4135-999d-794dd1c2b48b", @header={}, @id="PAY-0CL07334EW936040CKSQXS4A", @create_time="2014-12-29T15:55:28Z", @update_time="2014-12-29T15:55:28Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009bff280 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL07334EW936040CKSQXS4A", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009bff028 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-92K58545TM7584841", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009bfed30 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL07334EW936040CKSQXS4A/execute", @rel="execute", @method="POST">]>
I, [2014-12-29T15:55:33.149638 #14508]  INFO -- : #<Payment:0x00000009e194f8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009c043c0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009c04230 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009c04190 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009c04e38 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009bfff78 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009bffd98 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009bff938 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009bff7f8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009daeea0 @error=nil, @return_url="http://localhost:3000/orders/34/confirm", @cancel_url="http://localhost:3000/orders/34/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009da5c88 @base=#<Payment:0x00000009e194f8 ...>, @messages={}>, @request_id="5cd3adcd-dcda-4135-999d-794dd1c2b48b", @header={}, @id="PAY-0CL07334EW936040CKSQXS4A", @create_time="2014-12-29T15:55:28Z", @update_time="2014-12-29T15:55:28Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009bff280 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL07334EW936040CKSQXS4A", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009bff028 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-92K58545TM7584841", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009bfed30 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL07334EW936040CKSQXS4A/execute", @rel="execute", @method="POST">]>
I, [2014-12-29T15:55:33.198641 #14508]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-92K58545TM7584841
I, [2014-12-29T15:55:33.890680 #14508]  INFO -- : #<Payment:0x00000009e194f8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009c043c0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009c04230 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009c04190 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009c04e38 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009bfff78 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009bffd98 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009bff938 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009bff7f8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009daeea0 @error=nil, @return_url="http://localhost:3000/orders/34/confirm", @cancel_url="http://localhost:3000/orders/34/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009da5c88 @base=#<Payment:0x00000009e194f8 ...>, @messages={}>, @request_id="5cd3adcd-dcda-4135-999d-794dd1c2b48b", @header={}, @id="PAY-0CL07334EW936040CKSQXS4A", @create_time="2014-12-29T15:55:28Z", @update_time="2014-12-29T15:55:28Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009bff280 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL07334EW936040CKSQXS4A", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009bff028 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-92K58545TM7584841", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009bfed30 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL07334EW936040CKSQXS4A/execute", @rel="execute", @method="POST">]>
I, [2014-12-29T15:55:33.936683 #14508]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-92K58545TM7584841
I, [2014-12-29T15:55:33.964684 #14508]  INFO -- : Completed 302 Found in 10181ms (ActiveRecord: 176.0ms)
D, [2014-12-29T15:56:06.245531 #14508] DEBUG -- : 
D, [2014-12-29T15:56:06.265532 #14508] DEBUG -- : 
I, [2014-12-29T15:56:06.345536 #14508]  INFO -- : Started GET "/orders/34/confirm?paymentId=PAY-0CL07334EW936040CKSQXS4A&token=EC-92K58545TM7584841&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2014-12-29 15:56:06 +0000
I, [2014-12-29T15:56:06.399540 #14508]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2014-12-29T15:56:06.470544 #14508]  INFO -- :   Parameters: {"paymentId"=>"PAY-0CL07334EW936040CKSQXS4A", "token"=>"EC-92K58545TM7584841", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"34"}
D, [2014-12-29T15:56:06.542548 #14508] DEBUG -- :   [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2014-12-29T15:56:06.638553 #14508] DEBUG -- :   [1m[35mUser Load (1.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2014-12-29T15:56:06.692556 #14508] DEBUG -- :   [1m[36mOrder Load (1.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "34"]]
I, [2014-12-29T15:56:13.268932 #14508]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL07334EW936040CKSQXS4A
I, [2014-12-29T15:56:14.553006 #14508]  INFO -- : Response[200]: OK, Duration: 1.242s
D, [2014-12-29T15:56:16.044091 #14508] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2014-12-29T15:56:16.186099 #14508] DEBUG -- :   [1m[36mSQL (6.0ms)[0m  [1mUPDATE "orders" SET "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 34[0m  [["shipping_address1", "1 Main Terrace"], ["updated_at", Mon, 29 Dec 2014 15:56:16 UTC +00:00]]
D, [2014-12-29T15:56:16.341108 #14508] DEBUG -- :   [1m[35m (110.0ms)[0m  commit transaction
I, [2014-12-29T15:56:16.521118 #14508]  INFO -- :   Rendered orders/_form.html.erb (103.0ms)
I, [2014-12-29T15:56:16.591122 #14508]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (170.0ms)
I, [2014-12-29T15:56:16.772133 #14508]  INFO -- : Completed 200 OK in 10243ms (Views: 368.0ms | ActiveRecord: 123.0ms)
D, [2014-12-29T15:56:17.124153 #14508] DEBUG -- : 
D, [2014-12-29T15:56:17.143154 #14508] DEBUG -- : 
I, [2014-12-29T15:56:17.196157 #14508]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-29 15:56:17 +0000
D, [2014-12-29T15:56:17.294163 #14508] DEBUG -- : 
D, [2014-12-29T15:56:17.318164 #14508] DEBUG -- : 
I, [2014-12-29T15:56:17.383168 #14508]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-29 15:56:17 +0000
D, [2014-12-29T15:56:17.475173 #14508] DEBUG -- : 
D, [2014-12-29T15:56:17.518176 #14508] DEBUG -- : 
I, [2014-12-29T15:56:17.575179 #14508]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-29 15:56:17 +0000
D, [2014-12-29T15:56:17.649183 #14508] DEBUG -- : 
D, [2014-12-29T15:56:17.676185 #14508] DEBUG -- : 
I, [2014-12-29T15:56:17.746189 #14508]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-29 15:56:17 +0000
D, [2014-12-29T15:56:17.816193 #14508] DEBUG -- : 
D, [2014-12-29T15:56:17.843194 #14508] DEBUG -- : 
I, [2014-12-29T15:56:17.902197 #14508]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-29 15:56:17 +0000
D, [2014-12-29T15:56:17.994203 #14508] DEBUG -- : 
D, [2014-12-29T15:56:18.018204 #14508] DEBUG -- : 
I, [2014-12-29T15:56:18.083208 #14508]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-29 15:56:18 +0000
D, [2014-12-29T15:56:18.155212 #14508] DEBUG -- : 
D, [2014-12-29T15:56:18.181213 #14508] DEBUG -- : 
I, [2014-12-29T15:56:18.244217 #14508]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-29 15:56:18 +0000
D, [2014-12-29T15:56:18.315221 #14508] DEBUG -- : 
D, [2014-12-29T15:56:18.339222 #14508] DEBUG -- : 
I, [2014-12-29T15:56:18.400226 #14508]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-29 15:56:18 +0000
D, [2014-12-29T15:56:18.472230 #14508] DEBUG -- : 
D, [2014-12-29T15:56:18.495231 #14508] DEBUG -- : 
I, [2014-12-29T15:56:18.558235 #14508]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-29 15:56:18 +0000
D, [2014-12-29T15:56:18.632239 #14508] DEBUG -- : 
D, [2014-12-29T15:56:18.658241 #14508] DEBUG -- : 
I, [2014-12-29T15:56:18.725245 #14508]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-29 15:56:18 +0000
D, [2014-12-29T15:56:18.797249 #14508] DEBUG -- : 
D, [2014-12-29T15:56:18.822250 #14508] DEBUG -- : 
I, [2014-12-29T15:56:18.888254 #14508]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-29 15:56:18 +0000
D, [2014-12-29T15:56:18.970259 #14508] DEBUG -- : 
D, [2014-12-29T15:56:19.028262 #14508] DEBUG -- : 
I, [2014-12-29T15:56:19.091265 #14508]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-29 15:56:19 +0000
D, [2014-12-29T15:56:19.164270 #14508] DEBUG -- : 
D, [2014-12-29T15:56:19.187271 #14508] DEBUG -- : 
I, [2014-12-29T15:56:19.240274 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-29 15:56:19 +0000
D, [2014-12-29T15:56:19.314278 #14508] DEBUG -- : 
D, [2014-12-29T15:56:19.338280 #14508] DEBUG -- : 
I, [2014-12-29T15:56:19.405283 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-29 15:56:19 +0000
D, [2014-12-29T15:56:19.479288 #14508] DEBUG -- : 
D, [2014-12-29T15:56:19.502289 #14508] DEBUG -- : 
I, [2014-12-29T15:56:19.564293 #14508]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-29 15:56:19 +0000
D, [2014-12-29T15:56:19.637297 #14508] DEBUG -- : 
D, [2014-12-29T15:56:19.663298 #14508] DEBUG -- : 
I, [2014-12-29T15:56:19.733302 #14508]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-29 15:56:19 +0000
D, [2014-12-29T15:56:19.806306 #14508] DEBUG -- : 
D, [2014-12-29T15:56:19.824307 #14508] DEBUG -- : 
I, [2014-12-29T15:56:19.882311 #14508]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-29 15:56:19 +0000
D, [2014-12-29T15:56:19.960315 #14508] DEBUG -- : 
D, [2014-12-29T15:56:19.980316 #14508] DEBUG -- : 
I, [2014-12-29T15:56:20.028319 #14508]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-29 15:56:19 +0000
D, [2014-12-29T15:56:20.097323 #14508] DEBUG -- : 
D, [2014-12-29T15:56:20.123325 #14508] DEBUG -- : 
I, [2014-12-29T15:56:20.174327 #14508]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-29 15:56:20 +0000
D, [2014-12-29T15:56:20.252332 #14508] DEBUG -- : 
D, [2014-12-29T15:56:20.284334 #14508] DEBUG -- : 
I, [2014-12-29T15:56:20.333337 #14508]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-29 15:56:20 +0000
D, [2014-12-29T15:56:20.407341 #14508] DEBUG -- : 
D, [2014-12-29T15:56:20.429342 #14508] DEBUG -- : 
I, [2014-12-29T15:56:20.480345 #14508]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-29 15:56:20 +0000
D, [2014-12-29T15:56:20.578351 #14508] DEBUG -- : 
D, [2014-12-29T15:56:20.598352 #14508] DEBUG -- : 
I, [2014-12-29T15:56:20.650355 #14508]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-29 15:56:20 +0000
D, [2014-12-29T15:56:20.717358 #14508] DEBUG -- : 
D, [2014-12-29T15:56:20.737360 #14508] DEBUG -- : 
I, [2014-12-29T15:56:20.791363 #14508]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-29 15:56:20 +0000
D, [2014-12-29T15:56:20.864367 #14508] DEBUG -- : 
D, [2014-12-29T15:56:20.883368 #14508] DEBUG -- : 
I, [2014-12-29T15:56:20.930371 #14508]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-29 15:56:20 +0000
D, [2014-12-29T15:56:21.000375 #14508] DEBUG -- : 
D, [2014-12-29T15:56:21.019376 #14508] DEBUG -- : 
I, [2014-12-29T15:56:21.066378 #14508]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-29 15:56:21 +0000
D, [2014-12-29T15:56:21.133382 #14508] DEBUG -- : 
D, [2014-12-29T15:56:21.149383 #14508] DEBUG -- : 
I, [2014-12-29T15:56:21.194386 #14508]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-29 15:56:21 +0000
D, [2014-12-29T15:56:21.264390 #14508] DEBUG -- : 
D, [2014-12-29T15:56:21.280391 #14508] DEBUG -- : 
I, [2014-12-29T15:56:21.320393 #14508]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-29 15:56:21 +0000
D, [2014-12-29T15:56:27.170433 #14508] DEBUG -- : 
D, [2014-12-29T15:56:27.189435 #14508] DEBUG -- : 
I, [2014-12-29T15:56:27.244438 #14508]  INFO -- : Started POST "/orders/34/execute/34/2VZ7YQDDDPPC4" for 127.0.0.1 at 2014-12-29 15:56:27 +0000
I, [2014-12-29T15:56:27.340443 #14508]  INFO -- : Processing by OrdersController#execute as HTML
I, [2014-12-29T15:56:27.422448 #14508]  INFO -- :   Parameters: {"authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order_id"=>"34", "payer_id"=>"2VZ7YQDDDPPC4"}
D, [2014-12-29T15:56:27.517453 #14508] DEBUG -- :   [1m[36mOrder Load (2.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "34"]]
I, [2014-12-29T15:56:38.532083 #14508]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL07334EW936040CKSQXS4A
I, [2014-12-29T15:56:39.592144 #14508]  INFO -- : Response[200]: OK, Duration: 1.027s
I, [2014-12-29T15:56:39.656148 #14508]  INFO -- : PayPal-Request-Id: 44010d38-9fc0-4bab-99f0-d41e1c363872
I, [2014-12-29T15:56:39.712151 #14508]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL07334EW936040CKSQXS4A/execute
I, [2014-12-29T15:56:42.092287 #14508]  INFO -- : Response[200]: OK, Duration: 2.345s
D, [2014-12-29T15:56:42.146290 #14508] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2014-12-29T15:56:42.261297 #14508] DEBUG -- :   [1m[36mSQL (7.0ms)[0m  [1mUPDATE "orders" SET "state" = ?, "updated_at" = ? WHERE "orders"."id" = 34[0m  [["state", "approved"], ["updated_at", Mon, 29 Dec 2014 15:56:42 UTC +00:00]]
D, [2014-12-29T15:56:42.388304 #14508] DEBUG -- :   [1m[35m (92.0ms)[0m  commit transaction
D, [2014-12-29T15:56:42.459308 #14508] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 30]]
D, [2014-12-29T15:56:42.497310 #14508] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2014-12-29T15:56:42.581315 #14508] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 30]]
D, [2014-12-29T15:56:42.644319 #14508] DEBUG -- :   [1m[35mSQL (5.0ms)[0m  DELETE FROM "carts" WHERE "carts"."id" = ?  [["id", 30]]
D, [2014-12-29T15:56:42.826329 #14508] DEBUG -- :   [1m[36m (147.0ms)[0m  [1mcommit transaction[0m
I, [2014-12-29T15:57:01.506397 #14508]  INFO -- :   Rendered order_notifier/received.html.erb (7.0ms)
D, [2014-12-29T15:57:01.604403 #14508] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 34]]
D, [2014-12-29T15:57:01.711409 #14508] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2014-12-29T15:57:01.752411 #14508]  INFO -- :   Rendered line_items/_line_item.text.erb (97.0ms)
I, [2014-12-29T15:57:01.791414 #14508]  INFO -- :   Rendered order_notifier/received.text.erb (234.0ms)
I, [2014-12-29T15:57:23.988683 #14508]  INFO -- : 
Sent mail to simon.king65@gmail.com (894.1ms)
D, [2014-12-29T15:57:24.363705 #14508] DEBUG -- : Date: Mon, 29 Dec 2014 15:57:23 +0000

From: Simon King <simon.king65@gmail.com>

To: simon.king65@gmail.com

Message-ID: <54a179e327764_38ac401599c3572c@Simon-PC.mail>

Subject: King Clothing Order Confirmation

Mime-Version: 1.0

Content-Type: multipart/alternative;

 boundary="--==_mimepart_54a179cdcc728_38ac401599c3562d";

 charset=UTF-8

Content-Transfer-Encoding: 7bit





----==_mimepart_54a179cdcc728_38ac401599c3562d

Content-Type: text/plain;

 charset=UTF-8

Content-Transfer-Encoding: 7bit



Dear s



Thank you for your recent order from King Clothing.



You ordered the following items:



 1 x Camo Print Tee

We'll send you a separate e-mail when your order ships.

----==_mimepart_54a179cdcc728_38ac401599c3562d

Content-Type: text/html;

 charset=UTF-8

Content-Transfer-Encoding: 7bit



<h1>OrderNotifier#received</h1>



<p>

  , thank you for your order, we will email you again once your order has been despatched. We hope you enjoy wearing your King Clothing brand tee-shirt.

</p>



----==_mimepart_54a179cdcc728_38ac401599c3562d--


I, [2014-12-29T15:57:37.612463 #14508]  INFO -- : Redirected to http://localhost:3000/
I, [2014-12-29T15:57:37.666466 #14508]  INFO -- : Completed 302 Found in 70193ms (ActiveRecord: 265.0ms)
D, [2014-12-29T15:57:37.757471 #14508] DEBUG -- : 
D, [2014-12-29T15:57:37.782472 #14508] DEBUG -- : 
I, [2014-12-29T15:57:37.832475 #14508]  INFO -- : Started GET "/" for 127.0.0.1 at 2014-12-29 15:57:37 +0000
I, [2014-12-29T15:57:37.967483 #14508]  INFO -- : Processing by StoreController#index as HTML
D, [2014-12-29T15:57:38.024486 #14508] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2014-12-29T15:57:38.161494 #14508] DEBUG -- :   [1m[36mSQL (8.0ms)[0m  [1mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Mon, 29 Dec 2014 15:57:38 UTC +00:00], ["updated_at", Mon, 29 Dec 2014 15:57:38 UTC +00:00]]
D, [2014-12-29T15:57:38.352505 #14508] DEBUG -- :   [1m[35m (147.0ms)[0m  commit transaction
D, [2014-12-29T15:57:38.469512 #14508] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2014-12-29T15:57:38.556517 #14508]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (4.0ms)
I, [2014-12-29T15:57:38.614520 #14508]  INFO -- :   Rendered store/index.html.erb within layouts/application (179.0ms)
D, [2014-12-29T15:57:38.860534 #14508] DEBUG -- :   [1m[35mLineItem Exists (2.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 31]]
D, [2014-12-29T15:57:38.967540 #14508] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 31]]
I, [2014-12-29T15:57:39.010542 #14508]  INFO -- :   Rendered collection (1.0ms)
I, [2014-12-29T15:57:39.084547 #14508]  INFO -- :   Rendered carts/_cart.html.erb (167.0ms)
I, [2014-12-29T15:57:39.163551 #14508]  INFO -- : Completed 200 OK in 1144ms (Views: 745.0ms | ActiveRecord: 163.0ms)
D, [2014-12-29T15:57:39.517571 #14508] DEBUG -- : 
D, [2014-12-29T15:57:39.549573 #14508] DEBUG -- : 
I, [2014-12-29T15:57:39.611577 #14508]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-29 15:57:39 +0000
D, [2014-12-29T15:57:39.688581 #14508] DEBUG -- : 
D, [2014-12-29T15:57:39.713583 #14508] DEBUG -- : 
I, [2014-12-29T15:57:39.780587 #14508]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-29 15:57:39 +0000
D, [2014-12-29T15:57:39.856591 #14508] DEBUG -- : 
D, [2014-12-29T15:57:39.881592 #14508] DEBUG -- : 
I, [2014-12-29T15:57:39.946596 #14508]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-29 15:57:39 +0000
D, [2014-12-29T15:57:40.020600 #14508] DEBUG -- : 
D, [2014-12-29T15:57:40.042602 #14508] DEBUG -- : 
I, [2014-12-29T15:57:40.099605 #14508]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-29 15:57:40 +0000
D, [2014-12-29T15:57:40.173609 #14508] DEBUG -- : 
D, [2014-12-29T15:57:40.192610 #14508] DEBUG -- : 
I, [2014-12-29T15:57:40.243613 #14508]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-29 15:57:40 +0000
D, [2014-12-29T15:57:40.318617 #14508] DEBUG -- : 
D, [2014-12-29T15:57:40.337618 #14508] DEBUG -- : 
I, [2014-12-29T15:57:40.389621 #14508]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-29 15:57:40 +0000
D, [2014-12-29T15:57:40.459625 #14508] DEBUG -- : 
D, [2014-12-29T15:57:40.484627 #14508] DEBUG -- : 
I, [2014-12-29T15:57:40.535630 #14508]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-29 15:57:40 +0000
D, [2014-12-29T15:57:40.618634 #14508] DEBUG -- : 
D, [2014-12-29T15:57:40.635635 #14508] DEBUG -- : 
I, [2014-12-29T15:57:40.687638 #14508]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-29 15:57:40 +0000
D, [2014-12-29T15:57:40.769643 #14508] DEBUG -- : 
D, [2014-12-29T15:57:40.786644 #14508] DEBUG -- : 
I, [2014-12-29T15:57:40.830647 #14508]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-29 15:57:40 +0000
D, [2014-12-29T15:57:40.922652 #14508] DEBUG -- : 
D, [2014-12-29T15:57:40.939653 #14508] DEBUG -- : 
I, [2014-12-29T15:57:40.994656 #14508]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-29 15:57:40 +0000
D, [2014-12-29T15:57:41.068660 #14508] DEBUG -- : 
D, [2014-12-29T15:57:41.087661 #14508] DEBUG -- : 
I, [2014-12-29T15:57:41.138664 #14508]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-29 15:57:41 +0000
D, [2014-12-29T15:57:41.216669 #14508] DEBUG -- : 
D, [2014-12-29T15:57:41.236670 #14508] DEBUG -- : 
I, [2014-12-29T15:57:41.288673 #14508]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-29 15:57:41 +0000
D, [2014-12-29T15:57:41.365677 #14508] DEBUG -- : 
D, [2014-12-29T15:57:41.383678 #14508] DEBUG -- : 
I, [2014-12-29T15:57:41.431681 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-29 15:57:41 +0000
D, [2014-12-29T15:57:41.513686 #14508] DEBUG -- : 
D, [2014-12-29T15:57:41.533687 #14508] DEBUG -- : 
I, [2014-12-29T15:57:41.585690 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-29 15:57:41 +0000
D, [2014-12-29T15:57:41.667694 #14508] DEBUG -- : 
D, [2014-12-29T15:57:41.686696 #14508] DEBUG -- : 
I, [2014-12-29T15:57:41.740699 #14508]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-29 15:57:41 +0000
D, [2014-12-29T15:57:41.821703 #14508] DEBUG -- : 
D, [2014-12-29T15:57:41.840704 #14508] DEBUG -- : 
I, [2014-12-29T15:57:41.895708 #14508]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-29 15:57:41 +0000
D, [2014-12-29T15:57:41.970712 #14508] DEBUG -- : 
D, [2014-12-29T15:57:42.013714 #14508] DEBUG -- : 
I, [2014-12-29T15:57:42.061717 #14508]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-29 15:57:42 +0000
D, [2014-12-29T15:57:42.140722 #14508] DEBUG -- : 
D, [2014-12-29T15:57:42.158723 #14508] DEBUG -- : 
I, [2014-12-29T15:57:42.205725 #14508]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-29 15:57:42 +0000
D, [2014-12-29T15:57:42.280730 #14508] DEBUG -- : 
D, [2014-12-29T15:57:42.305731 #14508] DEBUG -- : 
I, [2014-12-29T15:57:42.355734 #14508]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-29 15:57:42 +0000
D, [2014-12-29T15:57:42.437739 #14508] DEBUG -- : 
D, [2014-12-29T15:57:42.459740 #14508] DEBUG -- : 
I, [2014-12-29T15:57:42.510743 #14508]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-29 15:57:42 +0000
D, [2014-12-29T15:57:42.590747 #14508] DEBUG -- : 
D, [2014-12-29T15:57:42.613749 #14508] DEBUG -- : 
I, [2014-12-29T15:57:42.660751 #14508]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-29 15:57:42 +0000
D, [2014-12-29T15:57:42.740756 #14508] DEBUG -- : 
D, [2014-12-29T15:57:42.765757 #14508] DEBUG -- : 
I, [2014-12-29T15:57:42.811760 #14508]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-29 15:57:42 +0000
D, [2014-12-29T15:57:42.887764 #14508] DEBUG -- : 
D, [2014-12-29T15:57:42.903765 #14508] DEBUG -- : 
I, [2014-12-29T15:57:42.948768 #14508]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-29 15:57:42 +0000
D, [2014-12-29T15:57:43.018772 #14508] DEBUG -- : 
D, [2014-12-29T15:57:43.034773 #14508] DEBUG -- : 
I, [2014-12-29T15:57:43.075775 #14508]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-29 15:57:43 +0000
D, [2014-12-29T15:57:43.142779 #14508] DEBUG -- : 
D, [2014-12-29T15:57:43.158780 #14508] DEBUG -- : 
I, [2014-12-29T15:57:43.202782 #14508]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-29 15:57:43 +0000
D, [2014-12-29T15:57:43.277787 #14508] DEBUG -- : 
D, [2014-12-29T15:57:43.294788 #14508] DEBUG -- : 
I, [2014-12-29T15:57:43.339790 #14508]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-29 15:57:43 +0000
D, [2014-12-29T15:57:43.464797 #14508] DEBUG -- : 
D, [2014-12-29T15:57:43.486799 #14508] DEBUG -- : 
I, [2014-12-29T15:57:43.526801 #14508]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-29 15:57:43 +0000
D, [2014-12-29T15:57:43.597805 #14508] DEBUG -- : 
D, [2014-12-29T15:57:43.612806 #14508] DEBUG -- : 
I, [2014-12-29T15:57:43.658808 #14508]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2014-12-29 15:57:43 +0000
D, [2014-12-29T15:57:43.733813 #14508] DEBUG -- : 
D, [2014-12-29T15:57:43.752814 #14508] DEBUG -- : 
I, [2014-12-29T15:57:43.798816 #14508]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2014-12-29 15:57:43 +0000
D, [2014-12-29T16:26:39.589396 #14508] DEBUG -- : 
D, [2014-12-29T16:26:39.604996 #14508] DEBUG -- : 
I, [2014-12-29T16:26:39.620596 #14508]  INFO -- : Started GET "/" for 127.0.0.1 at 2014-12-29 16:26:39 +0000
I, [2014-12-29T16:26:39.667397 #14508]  INFO -- : Processing by StoreController#index as HTML
D, [2014-12-29T16:26:39.698597 #14508] DEBUG -- :   [1m[35mCart Load (15.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 31]]
D, [2014-12-29T16:26:39.760997 #14508] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2014-12-29T16:26:39.792197 #14508]  INFO -- : Cache digest for store/index.xml: a93d4e2e981ab3dfce98a095c3b6c059
I, [2014-12-29T16:26:39.823397 #14508]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (0.0ms)
I, [2014-12-29T16:26:39.854597 #14508]  INFO -- :   Rendered store/index.html.erb within layouts/application (109.2ms)
D, [2014-12-29T16:26:39.948197 #14508] DEBUG -- :   [1m[35mLineItem Exists (0.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 31]]
D, [2014-12-29T16:26:39.994997 #14508] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 31]]
I, [2014-12-29T16:26:40.026197 #14508]  INFO -- :   Rendered collection (0.0ms)
I, [2014-12-29T16:26:40.057397 #14508]  INFO -- :   Rendered carts/_cart.html.erb (78.0ms)
I, [2014-12-29T16:26:40.088597 #14508]  INFO -- : Completed 200 OK in 406ms (Views: 358.8ms | ActiveRecord: 15.6ms)
D, [2014-12-29T16:31:09.242121 #14508] DEBUG -- : 
D, [2014-12-29T16:31:09.257721 #14508] DEBUG -- : 
I, [2014-12-29T16:31:09.335722 #14508]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2014-12-29 16:31:09 +0000
I, [2014-12-29T16:31:09.444922 #14508]  INFO -- : Processing by LineItemsController#create as JS
I, [2014-12-29T16:31:09.522922 #14508]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2014-12-29T16:31:09.632122 #14508] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 31]]
D, [2014-12-29T16:31:09.725722 #14508] DEBUG -- :   [1m[36mProduct Load (15.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2014-12-29T16:31:09.867123 #14508] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 31]]
D, [2014-12-29T16:31:09.976323 #14508] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2014-12-29T16:31:10.038723 #14508] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2014-12-29T16:31:10.257123 #14508] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 31], ["created_at", Mon, 29 Dec 2014 16:31:10 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:5932f38,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Mon, 29 Dec 2014 16:31:10 UTC +00:00]]
D, [2014-12-29T16:31:10.444324 #14508] DEBUG -- :   [1m[35m (140.4ms)[0m  commit transaction
D, [2014-12-29T16:31:10.569124 #14508] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 31]]
I, [2014-12-29T16:31:10.662724 #14508]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2014-12-29T16:31:10.741724 #14508]  INFO -- :   Rendered carts/_cart.html.erb (218.4ms)
I, [2014-12-29T16:31:10.789524 #14508]  INFO -- :   Rendered line_items/create.js.erb (282.8ms)
I, [2014-12-29T16:31:10.851924 #14508]  INFO -- : Completed 200 OK in 1267ms (Views: 345.2ms | ActiveRecord: 156.0ms)
D, [2014-12-29T16:31:20.436005 #14508] DEBUG -- : 
D, [2014-12-29T16:31:20.463007 #14508] DEBUG -- : 
I, [2014-12-29T16:31:20.525010 #14508]  INFO -- : Started GET "/orders/new" for 127.0.0.1 at 2014-12-29 16:31:20 +0000
I, [2014-12-29T16:31:20.637017 #14508]  INFO -- : Processing by OrdersController#new as HTML
D, [2014-12-29T16:31:20.732022 #14508] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 31]]
D, [2014-12-29T16:31:20.852029 #14508] DEBUG -- :   [1m[36mLineItem Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 31]]
I, [2014-12-29T16:31:21.032039 #14508]  INFO -- :   Rendered orders/_form.html.erb (97.0ms)
I, [2014-12-29T16:31:21.094043 #14508]  INFO -- :   Rendered orders/new.html.erb within layouts/application (155.0ms)
D, [2014-12-29T16:31:21.300055 #14508] DEBUG -- :   [1m[35mCACHE (1.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 31]]
D, [2014-12-29T16:31:21.409061 #14508] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 31]]
D, [2014-12-29T16:31:21.532068 #14508] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2014-12-29T16:31:21.602072 #14508]  INFO -- :   Rendered line_items/_line_item.html.erb (127.0ms)
I, [2014-12-29T16:31:21.673076 #14508]  INFO -- :   Rendered carts/_cart.html.erb (315.0ms)
I, [2014-12-29T16:31:21.754081 #14508]  INFO -- : Completed 200 OK in 1057ms (Views: 829.0ms | ActiveRecord: 8.0ms)
D, [2014-12-29T16:31:22.116101 #14508] DEBUG -- : 
D, [2014-12-29T16:31:22.143103 #14508] DEBUG -- : 
I, [2014-12-29T16:31:22.210107 #14508]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-29 16:31:22 +0000
D, [2014-12-29T16:31:22.309113 #14508] DEBUG -- : 
D, [2014-12-29T16:31:22.335114 #14508] DEBUG -- : 
I, [2014-12-29T16:31:22.407118 #14508]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-29 16:31:22 +0000
D, [2014-12-29T16:31:22.488123 #14508] DEBUG -- : 
D, [2014-12-29T16:31:22.535125 #14508] DEBUG -- : 
I, [2014-12-29T16:31:22.618130 #14508]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-29 16:31:22 +0000
D, [2014-12-29T16:31:22.692134 #14508] DEBUG -- : 
D, [2014-12-29T16:31:22.715136 #14508] DEBUG -- : 
I, [2014-12-29T16:31:22.776139 #14508]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-29 16:31:22 +0000
D, [2014-12-29T16:31:22.851144 #14508] DEBUG -- : 
D, [2014-12-29T16:31:22.877145 #14508] DEBUG -- : 
I, [2014-12-29T16:31:22.948149 #14508]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-29 16:31:22 +0000
D, [2014-12-29T16:31:23.022153 #14508] DEBUG -- : 
D, [2014-12-29T16:31:23.048155 #14508] DEBUG -- : 
I, [2014-12-29T16:31:23.112158 #14508]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-29 16:31:23 +0000
D, [2014-12-29T16:31:23.186163 #14508] DEBUG -- : 
D, [2014-12-29T16:31:23.214164 #14508] DEBUG -- : 
I, [2014-12-29T16:31:23.287168 #14508]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-29 16:31:23 +0000
D, [2014-12-29T16:31:23.379174 #14508] DEBUG -- : 
D, [2014-12-29T16:31:23.403175 #14508] DEBUG -- : 
I, [2014-12-29T16:31:23.458178 #14508]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-29 16:31:23 +0000
D, [2014-12-29T16:31:23.554184 #14508] DEBUG -- : 
D, [2014-12-29T16:31:23.578185 #14508] DEBUG -- : 
I, [2014-12-29T16:31:23.640189 #14508]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-29 16:31:23 +0000
D, [2014-12-29T16:31:23.712193 #14508] DEBUG -- : 
D, [2014-12-29T16:31:23.737194 #14508] DEBUG -- : 
I, [2014-12-29T16:31:23.796198 #14508]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-29 16:31:23 +0000
D, [2014-12-29T16:31:23.869202 #14508] DEBUG -- : 
D, [2014-12-29T16:31:23.896203 #14508] DEBUG -- : 
I, [2014-12-29T16:31:23.970208 #14508]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-29 16:31:23 +0000
D, [2014-12-29T16:31:24.047212 #14508] DEBUG -- : 
D, [2014-12-29T16:31:24.070213 #14508] DEBUG -- : 
I, [2014-12-29T16:31:24.133217 #14508]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-29 16:31:24 +0000
D, [2014-12-29T16:31:24.206221 #14508] DEBUG -- : 
D, [2014-12-29T16:31:24.229222 #14508] DEBUG -- : 
I, [2014-12-29T16:31:24.303227 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-29 16:31:24 +0000
D, [2014-12-29T16:31:24.382231 #14508] DEBUG -- : 
D, [2014-12-29T16:31:24.406232 #14508] DEBUG -- : 
I, [2014-12-29T16:31:24.473236 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-29 16:31:24 +0000
D, [2014-12-29T16:31:24.547241 #14508] DEBUG -- : 
D, [2014-12-29T16:31:24.573242 #14508] DEBUG -- : 
I, [2014-12-29T16:31:24.636246 #14508]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-29 16:31:24 +0000
D, [2014-12-29T16:31:24.708250 #14508] DEBUG -- : 
D, [2014-12-29T16:31:24.733251 #14508] DEBUG -- : 
I, [2014-12-29T16:31:24.796255 #14508]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-29 16:31:24 +0000
D, [2014-12-29T16:31:24.869259 #14508] DEBUG -- : 
D, [2014-12-29T16:31:24.893260 #14508] DEBUG -- : 
I, [2014-12-29T16:31:24.964264 #14508]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-29 16:31:24 +0000
D, [2014-12-29T16:31:25.037269 #14508] DEBUG -- : 
D, [2014-12-29T16:31:25.063270 #14508] DEBUG -- : 
I, [2014-12-29T16:31:25.125274 #14508]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-29 16:31:25 +0000
D, [2014-12-29T16:31:25.199278 #14508] DEBUG -- : 
D, [2014-12-29T16:31:25.226279 #14508] DEBUG -- : 
I, [2014-12-29T16:31:25.295283 #14508]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-29 16:31:25 +0000
D, [2014-12-29T16:31:25.373288 #14508] DEBUG -- : 
D, [2014-12-29T16:31:25.397289 #14508] DEBUG -- : 
I, [2014-12-29T16:31:25.463293 #14508]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-29 16:31:25 +0000
D, [2014-12-29T16:31:25.535297 #14508] DEBUG -- : 
D, [2014-12-29T16:31:25.560298 #14508] DEBUG -- : 
I, [2014-12-29T16:31:25.622302 #14508]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-29 16:31:25 +0000
D, [2014-12-29T16:31:25.699306 #14508] DEBUG -- : 
D, [2014-12-29T16:31:25.727308 #14508] DEBUG -- : 
I, [2014-12-29T16:31:25.789312 #14508]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-29 16:31:25 +0000
D, [2014-12-29T16:31:25.865316 #14508] DEBUG -- : 
D, [2014-12-29T16:31:25.894318 #14508] DEBUG -- : 
I, [2014-12-29T16:31:25.966322 #14508]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-29 16:31:25 +0000
D, [2014-12-29T16:31:26.055327 #14508] DEBUG -- : 
D, [2014-12-29T16:31:26.080328 #14508] DEBUG -- : 
I, [2014-12-29T16:31:26.143332 #14508]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-29 16:31:26 +0000
D, [2014-12-29T16:31:26.219336 #14508] DEBUG -- : 
D, [2014-12-29T16:31:26.246338 #14508] DEBUG -- : 
I, [2014-12-29T16:31:26.315342 #14508]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-29 16:31:26 +0000
D, [2014-12-29T16:31:26.392346 #14508] DEBUG -- : 
D, [2014-12-29T16:31:26.416347 #14508] DEBUG -- : 
I, [2014-12-29T16:31:26.479351 #14508]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-29 16:31:26 +0000
D, [2014-12-29T16:31:26.556355 #14508] DEBUG -- : 
D, [2014-12-29T16:31:26.578357 #14508] DEBUG -- : 
I, [2014-12-29T16:31:26.638360 #14508]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-29 16:31:26 +0000
D, [2014-12-29T16:31:48.656702 #14508] DEBUG -- : 
D, [2014-12-29T16:31:48.677703 #14508] DEBUG -- : 
I, [2014-12-29T16:31:48.720706 #14508]  INFO -- : Started POST "/orders" for 127.0.0.1 at 2014-12-29 16:31:48 +0000
I, [2014-12-29T16:31:48.811711 #14508]  INFO -- : Processing by OrdersController#create as HTML
I, [2014-12-29T16:31:48.931718 #14508]  INFO -- :   Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order"=>{"name"=>"s", "address"=>"s", "shipping_address1"=>"s", "email"=>"simon.king65@gmail.com", "pay_type"=>"Paypal"}, "commit"=>"Place Order"}
D, [2014-12-29T16:31:49.010722 #14508] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 31]]
I, [2014-12-29T16:31:49.037724 #14508]  INFO -- : log info
D, [2014-12-29T16:31:49.084726 #14508] DEBUG -- : Unpermitted parameters: shipping_address1
D, [2014-12-29T16:31:49.179732 #14508] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 31]]
I, [2014-12-29T16:31:49.237735 #14508]  INFO -- : just about to payment_method and save
I, [2014-12-29T16:31:49.351742 #14508]  INFO -- : #<Order id: nil, name: "s", address: "s", email: "simon.king65@gmail.com", pay_type: "Paypal", created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2014-12-29T16:31:49.391744 #14508] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2014-12-29T16:31:49.576754 #14508] DEBUG -- :   [1m[35mSQL (10.0ms)[0m  INSERT INTO "orders" ("address", "created_at", "email", "name", "pay_type", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "s"], ["created_at", Mon, 29 Dec 2014 16:31:49 UTC +00:00], ["email", "simon.king65@gmail.com"], ["name", "s"], ["pay_type", "Paypal"], ["updated_at", Mon, 29 Dec 2014 16:31:49 UTC +00:00]]
D, [2014-12-29T16:31:49.712762 #14508] DEBUG -- :   [1m[36mSQL (5.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 36[0m  [["cart_id", nil], ["order_id", 35], ["updated_at", Mon, 29 Dec 2014 16:31:49 UTC +00:00]]
I, [2014-12-29T16:31:49.744764 #14508]  INFO -- : about to @payment.create
D, [2014-12-29T16:31:49.837769 #14508] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2014-12-29T16:31:49.872771 #14508]  INFO -- : in order=
I, [2014-12-29T16:31:49.900773 #14508]  INFO -- : in payment.create
I, [2014-12-29T16:31:50.093784 #14508]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/35/confirm", "cancel_url"=>"http://localhost:3000/orders/35/cancel"}}
I, [2014-12-29T16:31:50.682818 #14508]  INFO -- : #<ActiveModel::Errors:0x00000008213998 @base=#<Payment:0x00000008477ab8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008476910 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000834c030 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000008337518 @error=nil, @total="19.99", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008334980 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000832b128 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000083163b8 @error=nil, @return_url="http://localhost:3000/orders/35/confirm", @cancel_url="http://localhost:3000/orders/35/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008213998 ...>>, @messages={}>
I, [2014-12-29T16:31:50.714820 #14508]  INFO -- : got past invalid
I, [2014-12-29T16:31:50.812825 #14508]  INFO -- : PayPal-Request-Id: 07df39ab-4d92-40bb-932a-d6ad87e8f370
I, [2014-12-29T16:31:50.868828 #14508]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2014-12-29T16:31:52.492921 #14508]  INFO -- : Response[201]: Created, Duration: 1.581s
I, [2014-12-29T16:31:52.534924 #14508]  INFO -- : back from super
I, [2014-12-29T16:31:53.036952 #14508]  INFO -- : {"id"=>"PAY-69729268G8113631LKSQYD6I", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99", "details"=>{"subtotal"=>"19.99"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/35/confirm", "cancel_url"=>"http://localhost:3000/orders/35/cancel"}, "create_time"=>"2014-12-29T16:31:53Z", "update_time"=>"2014-12-29T16:31:53Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-69729268G8113631LKSQYD6I", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6ST288910C964943K", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-69729268G8113631LKSQYD6I/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2014-12-29T16:31:53.297967 #14508] DEBUG -- :   [1m[36mSQL (10.0ms)[0m  [1mUPDATE "orders" SET "name" = ?, "address" = ?, "email" = ?, "pay_type" = ?, "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ? WHERE "orders"."id" = 35[0m  [["name", "s"], ["address", "s"], ["email", "simon.king65@gmail.com"], ["pay_type", "Paypal"], ["created_at", Mon, 29 Dec 2014 16:31:49 UTC +00:00], ["updated_at", Mon, 29 Dec 2014 16:31:49 UTC +00:00], ["id", 35], ["payment_id", "PAY-69729268G8113631LKSQYD6I"], ["state", "created"]]
I, [2014-12-29T16:31:53.335969 #14508]  INFO -- : @payment save just done
I, [2014-12-29T16:31:54.321026 #14508]  INFO -- : #<Payment:0x00000008477ab8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007f64210 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000007f5f580 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000007f5ed10 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007f5df00 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007f5d708 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000007f5c5d8 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007f46f30 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007f45f40 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000083163b8 @error=nil, @return_url="http://localhost:3000/orders/35/confirm", @cancel_url="http://localhost:3000/orders/35/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008213998 @base=#<Payment:0x00000008477ab8 ...>, @messages={}>, @request_id="07df39ab-4d92-40bb-932a-d6ad87e8f370", @header={}, @id="PAY-69729268G8113631LKSQYD6I", @create_time="2014-12-29T16:31:53Z", @update_time="2014-12-29T16:31:53Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000007f2d8f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-69729268G8113631LKSQYD6I", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007f2c090 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6ST288910C964943K", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007f26af0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-69729268G8113631LKSQYD6I/execute", @rel="execute", @method="POST">]>
I, [2014-12-29T16:31:55.294081 #14508]  INFO -- : #<Payment:0x00000008477ab8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007f64210 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000007f5f580 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000007f5ed10 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007f5df00 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007f5d708 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000007f5c5d8 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007f46f30 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007f45f40 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000083163b8 @error=nil, @return_url="http://localhost:3000/orders/35/confirm", @cancel_url="http://localhost:3000/orders/35/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008213998 @base=#<Payment:0x00000008477ab8 ...>, @messages={}>, @request_id="07df39ab-4d92-40bb-932a-d6ad87e8f370", @header={}, @id="PAY-69729268G8113631LKSQYD6I", @create_time="2014-12-29T16:31:53Z", @update_time="2014-12-29T16:31:53Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000007f2d8f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-69729268G8113631LKSQYD6I", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007f2c090 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6ST288910C964943K", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007f26af0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-69729268G8113631LKSQYD6I/execute", @rel="execute", @method="POST">]>
D, [2014-12-29T16:31:55.484092 #14508] DEBUG -- :   [1m[35m (153.0ms)[0m  commit transaction
I, [2014-12-29T16:31:55.515094 #14508]  INFO -- : about to approve url
I, [2014-12-29T16:31:56.492150 #14508]  INFO -- : #<Payment:0x00000008477ab8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007f64210 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000007f5f580 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000007f5ed10 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007f5df00 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007f5d708 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000007f5c5d8 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007f46f30 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007f45f40 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000083163b8 @error=nil, @return_url="http://localhost:3000/orders/35/confirm", @cancel_url="http://localhost:3000/orders/35/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008213998 @base=#<Payment:0x00000008477ab8 ...>, @messages={}>, @request_id="07df39ab-4d92-40bb-932a-d6ad87e8f370", @header={}, @id="PAY-69729268G8113631LKSQYD6I", @create_time="2014-12-29T16:31:53Z", @update_time="2014-12-29T16:31:53Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000007f2d8f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-69729268G8113631LKSQYD6I", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007f2c090 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6ST288910C964943K", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007f26af0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-69729268G8113631LKSQYD6I/execute", @rel="execute", @method="POST">]>
I, [2014-12-29T16:31:57.473206 #14508]  INFO -- : #<Payment:0x00000008477ab8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007f64210 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000007f5f580 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000007f5ed10 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007f5df00 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007f5d708 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000007f5c5d8 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007f46f30 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007f45f40 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000083163b8 @error=nil, @return_url="http://localhost:3000/orders/35/confirm", @cancel_url="http://localhost:3000/orders/35/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008213998 @base=#<Payment:0x00000008477ab8 ...>, @messages={}>, @request_id="07df39ab-4d92-40bb-932a-d6ad87e8f370", @header={}, @id="PAY-69729268G8113631LKSQYD6I", @create_time="2014-12-29T16:31:53Z", @update_time="2014-12-29T16:31:53Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000007f2d8f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-69729268G8113631LKSQYD6I", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007f2c090 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6ST288910C964943K", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007f26af0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-69729268G8113631LKSQYD6I/execute", @rel="execute", @method="POST">]>
I, [2014-12-29T16:31:57.530209 #14508]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6ST288910C964943K
I, [2014-12-29T16:31:58.497265 #14508]  INFO -- : #<Payment:0x00000008477ab8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007f64210 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000007f5f580 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000007f5ed10 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007f5df00 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007f5d708 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000007f5c5d8 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007f46f30 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007f45f40 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000083163b8 @error=nil, @return_url="http://localhost:3000/orders/35/confirm", @cancel_url="http://localhost:3000/orders/35/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008213998 @base=#<Payment:0x00000008477ab8 ...>, @messages={}>, @request_id="07df39ab-4d92-40bb-932a-d6ad87e8f370", @header={}, @id="PAY-69729268G8113631LKSQYD6I", @create_time="2014-12-29T16:31:53Z", @update_time="2014-12-29T16:31:53Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000007f2d8f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-69729268G8113631LKSQYD6I", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007f2c090 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6ST288910C964943K", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007f26af0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-69729268G8113631LKSQYD6I/execute", @rel="execute", @method="POST">]>
I, [2014-12-29T16:31:58.564269 #14508]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6ST288910C964943K
I, [2014-12-29T16:31:58.607271 #14508]  INFO -- : Completed 302 Found in 9634ms (ActiveRecord: 186.0ms)
D, [2014-12-29T16:32:33.336257 #14508] DEBUG -- : 
D, [2014-12-29T16:32:33.361259 #14508] DEBUG -- : 
I, [2014-12-29T16:32:33.457264 #14508]  INFO -- : Started GET "/orders/35/confirm?paymentId=PAY-69729268G8113631LKSQYD6I&token=EC-6ST288910C964943K&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2014-12-29 16:32:33 +0000
I, [2014-12-29T16:32:33.561270 #14508]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2014-12-29T16:32:33.648275 #14508]  INFO -- :   Parameters: {"paymentId"=>"PAY-69729268G8113631LKSQYD6I", "token"=>"EC-6ST288910C964943K", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"35"}
D, [2014-12-29T16:32:33.728280 #14508] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2014-12-29T16:32:33.808284 #14508] DEBUG -- :   [1m[35mUser Load (1.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2014-12-29T16:32:33.895289 #14508] DEBUG -- :   [1m[36mOrder Load (1.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "35"]]
I, [2014-12-29T16:32:36.456436 #14508]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-69729268G8113631LKSQYD6I
I, [2014-12-29T16:32:37.511496 #14508]  INFO -- : Response[200]: OK, Duration: 1.023s
D, [2014-12-29T16:32:38.510553 #14508] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2014-12-29T16:32:38.638561 #14508] DEBUG -- :   [1m[36mSQL (6.0ms)[0m  [1mUPDATE "orders" SET "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 35[0m  [["shipping_address1", "1 Main Terrace"], ["updated_at", Mon, 29 Dec 2014 16:32:38 UTC +00:00]]
D, [2014-12-29T16:32:38.818571 #14508] DEBUG -- :   [1m[35m (134.0ms)[0m  commit transaction
I, [2014-12-29T16:32:38.991581 #14508]  INFO -- :   Rendered orders/_form.html.erb (104.0ms)
I, [2014-12-29T16:32:39.063585 #14508]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (166.0ms)
I, [2014-12-29T16:32:39.257596 #14508]  INFO -- : Completed 200 OK in 5551ms (Views: 378.0ms | ActiveRecord: 145.0ms)
D, [2014-12-29T16:32:39.575614 #14508] DEBUG -- : 
D, [2014-12-29T16:32:39.590615 #14508] DEBUG -- : 
I, [2014-12-29T16:32:39.633618 #14508]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-29 16:32:39 +0000
D, [2014-12-29T16:32:39.699621 #14508] DEBUG -- : 
D, [2014-12-29T16:32:39.723623 #14508] DEBUG -- : 
I, [2014-12-29T16:32:39.788626 #14508]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-29 16:32:39 +0000
D, [2014-12-29T16:32:39.857630 #14508] DEBUG -- : 
D, [2014-12-29T16:32:39.882632 #14508] DEBUG -- : 
I, [2014-12-29T16:32:39.943635 #14508]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-29 16:32:39 +0000
D, [2014-12-29T16:32:40.021640 #14508] DEBUG -- : 
D, [2014-12-29T16:32:40.046641 #14508] DEBUG -- : 
I, [2014-12-29T16:32:40.110645 #14508]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-29 16:32:40 +0000
D, [2014-12-29T16:32:40.189649 #14508] DEBUG -- : 
D, [2014-12-29T16:32:40.214651 #14508] DEBUG -- : 
I, [2014-12-29T16:32:40.277654 #14508]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-29 16:32:40 +0000
D, [2014-12-29T16:32:40.351659 #14508] DEBUG -- : 
D, [2014-12-29T16:32:40.378660 #14508] DEBUG -- : 
I, [2014-12-29T16:32:40.447664 #14508]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-29 16:32:40 +0000
D, [2014-12-29T16:32:40.518668 #14508] DEBUG -- : 
D, [2014-12-29T16:32:40.545670 #14508] DEBUG -- : 
I, [2014-12-29T16:32:40.611674 #14508]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-29 16:32:40 +0000
D, [2014-12-29T16:32:40.683678 #14508] DEBUG -- : 
D, [2014-12-29T16:32:40.708679 #14508] DEBUG -- : 
I, [2014-12-29T16:32:40.771683 #14508]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-29 16:32:40 +0000
D, [2014-12-29T16:32:40.858688 #14508] DEBUG -- : 
D, [2014-12-29T16:32:40.882689 #14508] DEBUG -- : 
I, [2014-12-29T16:32:40.945693 #14508]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-29 16:32:40 +0000
D, [2014-12-29T16:32:41.018697 #14508] DEBUG -- : 
D, [2014-12-29T16:32:41.043698 #14508] DEBUG -- : 
I, [2014-12-29T16:32:41.108702 #14508]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-29 16:32:41 +0000
D, [2014-12-29T16:32:41.185706 #14508] DEBUG -- : 
D, [2014-12-29T16:32:41.210708 #14508] DEBUG -- : 
I, [2014-12-29T16:32:41.273711 #14508]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-29 16:32:41 +0000
D, [2014-12-29T16:32:41.349716 #14508] DEBUG -- : 
D, [2014-12-29T16:32:41.376717 #14508] DEBUG -- : 
I, [2014-12-29T16:32:41.445721 #14508]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-29 16:32:41 +0000
D, [2014-12-29T16:32:41.513725 #14508] DEBUG -- : 
D, [2014-12-29T16:32:41.539727 #14508] DEBUG -- : 
I, [2014-12-29T16:32:41.608731 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-29 16:32:41 +0000
D, [2014-12-29T16:32:41.681735 #14508] DEBUG -- : 
D, [2014-12-29T16:32:41.706736 #14508] DEBUG -- : 
I, [2014-12-29T16:32:41.777740 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-29 16:32:41 +0000
D, [2014-12-29T16:32:41.850744 #14508] DEBUG -- : 
D, [2014-12-29T16:32:41.875746 #14508] DEBUG -- : 
I, [2014-12-29T16:32:41.939749 #14508]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-29 16:32:41 +0000
D, [2014-12-29T16:32:42.014754 #14508] DEBUG -- : 
D, [2014-12-29T16:32:42.040755 #14508] DEBUG -- : 
I, [2014-12-29T16:32:42.107759 #14508]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-29 16:32:42 +0000
D, [2014-12-29T16:32:42.183763 #14508] DEBUG -- : 
D, [2014-12-29T16:32:42.203765 #14508] DEBUG -- : 
I, [2014-12-29T16:32:42.260768 #14508]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-29 16:32:42 +0000
D, [2014-12-29T16:32:42.332772 #14508] DEBUG -- : 
D, [2014-12-29T16:32:42.359773 #14508] DEBUG -- : 
I, [2014-12-29T16:32:42.425777 #14508]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-29 16:32:42 +0000
D, [2014-12-29T16:32:42.498781 #14508] DEBUG -- : 
D, [2014-12-29T16:32:42.523783 #14508] DEBUG -- : 
I, [2014-12-29T16:32:42.587787 #14508]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-29 16:32:42 +0000
D, [2014-12-29T16:32:42.660791 #14508] DEBUG -- : 
D, [2014-12-29T16:32:42.686792 #14508] DEBUG -- : 
I, [2014-12-29T16:32:42.748796 #14508]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-29 16:32:42 +0000
D, [2014-12-29T16:32:42.821800 #14508] DEBUG -- : 
D, [2014-12-29T16:32:42.844801 #14508] DEBUG -- : 
I, [2014-12-29T16:32:42.908805 #14508]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-29 16:32:42 +0000
D, [2014-12-29T16:32:42.994810 #14508] DEBUG -- : 
D, [2014-12-29T16:32:43.012811 #14508] DEBUG -- : 
I, [2014-12-29T16:32:43.062814 #14508]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-29 16:32:43 +0000
D, [2014-12-29T16:32:43.130818 #14508] DEBUG -- : 
D, [2014-12-29T16:32:43.146819 #14508] DEBUG -- : 
I, [2014-12-29T16:32:43.191821 #14508]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-29 16:32:43 +0000
D, [2014-12-29T16:32:43.257825 #14508] DEBUG -- : 
D, [2014-12-29T16:32:43.273826 #14508] DEBUG -- : 
I, [2014-12-29T16:32:43.317828 #14508]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-29 16:32:43 +0000
D, [2014-12-29T16:32:43.392833 #14508] DEBUG -- : 
D, [2014-12-29T16:32:43.406833 #14508] DEBUG -- : 
I, [2014-12-29T16:32:43.441835 #14508]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-29 16:32:43 +0000
D, [2014-12-29T16:32:43.494838 #14508] DEBUG -- : 
D, [2014-12-29T16:32:43.505839 #14508] DEBUG -- : 
I, [2014-12-29T16:32:43.552842 #14508]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-29 16:32:43 +0000
D, [2014-12-29T16:32:43.610845 #14508] DEBUG -- : 
D, [2014-12-29T16:32:43.622846 #14508] DEBUG -- : 
I, [2014-12-29T16:32:43.654848 #14508]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-29 16:32:43 +0000
D, [2014-12-29T16:33:21.296680 #14508] DEBUG -- : 
D, [2014-12-29T16:33:21.320681 #14508] DEBUG -- : 
I, [2014-12-29T16:33:21.384685 #14508]  INFO -- : Started POST "/orders/35/execute/35/2VZ7YQDDDPPC4" for 127.0.0.1 at 2014-12-29 16:33:21 +0000
I, [2014-12-29T16:33:21.469690 #14508]  INFO -- : Processing by OrdersController#execute as HTML
I, [2014-12-29T16:33:21.546694 #14508]  INFO -- :   Parameters: {"authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order_id"=>"35", "payer_id"=>"2VZ7YQDDDPPC4"}
D, [2014-12-29T16:33:21.637699 #14508] DEBUG -- :   [1m[36mOrder Load (2.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "35"]]
I, [2014-12-29T16:33:28.742106 #14508]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-69729268G8113631LKSQYD6I
I, [2014-12-29T16:33:29.841169 #14508]  INFO -- : Response[200]: OK, Duration: 1.072s
I, [2014-12-29T16:33:29.893172 #14508]  INFO -- : PayPal-Request-Id: 90cd530c-4b4c-493d-98a2-ba63602d7567
I, [2014-12-29T16:33:29.940174 #14508]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-69729268G8113631LKSQYD6I/execute
I, [2014-12-29T16:33:31.885286 #14508]  INFO -- : Response[200]: OK, Duration: 1.905s
D, [2014-12-29T16:33:31.943289 #14508] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2014-12-29T16:33:32.073296 #14508] DEBUG -- :   [1m[36mSQL (7.0ms)[0m  [1mUPDATE "orders" SET "state" = ?, "updated_at" = ? WHERE "orders"."id" = 35[0m  [["state", "approved"], ["updated_at", Mon, 29 Dec 2014 16:33:31 UTC +00:00]]
D, [2014-12-29T16:33:32.228305 #14508] DEBUG -- :   [1m[35m (118.0ms)[0m  commit transaction
D, [2014-12-29T16:33:32.306310 #14508] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 31]]
D, [2014-12-29T16:33:32.352312 #14508] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2014-12-29T16:33:32.443317 #14508] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 31]]
D, [2014-12-29T16:33:32.512321 #14508] DEBUG -- :   [1m[35mSQL (4.0ms)[0m  DELETE FROM "carts" WHERE "carts"."id" = ?  [["id", 31]]
D, [2014-12-29T16:33:32.711333 #14508] DEBUG -- :   [1m[36m (156.0ms)[0m  [1mcommit transaction[0m
I, [2014-12-29T16:33:34.502435 #14508]  INFO -- :   Rendered order_notifier/received.html.erb (1.0ms)
D, [2014-12-29T16:33:34.586440 #14508] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 35]]
D, [2014-12-29T16:33:34.677445 #14508] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2014-12-29T16:33:34.721448 #14508]  INFO -- :   Rendered line_items/_line_item.text.erb (86.0ms)
I, [2014-12-29T16:33:34.756450 #14508]  INFO -- :   Rendered order_notifier/received.text.erb (210.0ms)
I, [2014-12-29T16:33:35.781508 #14508]  INFO -- : 
Sent mail to simon.king65@gmail.com (815.0ms)
D, [2014-12-29T16:33:36.130528 #14508] DEBUG -- : Date: Mon, 29 Dec 2014 16:33:35 +0000

From: Simon King <simon.king65@gmail.com>

To: simon.king65@gmail.com

Message-ID: <54a1825f3c69_38ac550733c359ef@Simon-PC.mail>

Subject: King Clothing Order Confirmation

Mime-Version: 1.0

Content-Type: multipart/alternative;

 boundary="--==_mimepart_54a1825ec0bcc_38ac550733c35819";

 charset=UTF-8

Content-Transfer-Encoding: 7bit





----==_mimepart_54a1825ec0bcc_38ac550733c35819

Content-Type: text/plain;

 charset=UTF-8

Content-Transfer-Encoding: 7bit



Dear s



Thank you for your recent order from King Clothing.



You ordered the following items:



 1 x Camo Print Tee

We'll send you a separate e-mail when your order ships.

----==_mimepart_54a1825ec0bcc_38ac550733c35819

Content-Type: text/html;

 charset=UTF-8

Content-Transfer-Encoding: 7bit



<h1>OrderNotifier#received</h1>



<p>

  , thank you for your order, we will email you again once your order has been despatched. We hope you enjoy wearing your King Clothing brand tee-shirt.

</p>



----==_mimepart_54a1825ec0bcc_38ac550733c35819--


I, [2014-12-29T16:33:36.171531 #14508]  INFO -- : Redirected to http://localhost:3000/
I, [2014-12-29T16:33:36.209533 #14508]  INFO -- : Completed 302 Found in 14627ms (ActiveRecord: 297.0ms)
D, [2014-12-29T16:33:36.274537 #14508] DEBUG -- : 
D, [2014-12-29T16:33:36.292538 #14508] DEBUG -- : 
I, [2014-12-29T16:33:36.330540 #14508]  INFO -- : Started GET "/" for 127.0.0.1 at 2014-12-29 16:33:36 +0000
I, [2014-12-29T16:33:36.409544 #14508]  INFO -- : Processing by StoreController#index as HTML
D, [2014-12-29T16:33:36.451547 #14508] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2014-12-29T16:33:36.559553 #14508] DEBUG -- :   [1m[36mSQL (7.0ms)[0m  [1mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Mon, 29 Dec 2014 16:33:36 UTC +00:00], ["updated_at", Mon, 29 Dec 2014 16:33:36 UTC +00:00]]
D, [2014-12-29T16:33:36.723562 #14508] DEBUG -- :   [1m[35m (127.0ms)[0m  commit transaction
D, [2014-12-29T16:33:36.810567 #14508] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2014-12-29T16:33:36.877571 #14508]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (4.0ms)
I, [2014-12-29T16:33:36.922574 #14508]  INFO -- :   Rendered store/index.html.erb within layouts/application (131.0ms)
D, [2014-12-29T16:33:37.117585 #14508] DEBUG -- :   [1m[35mLineItem Exists (1.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 32]]
D, [2014-12-29T16:33:37.201590 #14508] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 32]]
I, [2014-12-29T16:33:37.234592 #14508]  INFO -- :   Rendered collection (1.0ms)
I, [2014-12-29T16:33:37.293595 #14508]  INFO -- :   Rendered carts/_cart.html.erb (132.0ms)
I, [2014-12-29T16:33:37.355598 #14508]  INFO -- : Completed 200 OK in 906ms (Views: 581.0ms | ActiveRecord: 140.0ms)
D, [2014-12-29T16:33:37.663616 #14508] DEBUG -- : 
D, [2014-12-29T16:33:37.675617 #14508] DEBUG -- : 
I, [2014-12-29T16:33:37.711619 #14508]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-29 16:33:37 +0000
D, [2014-12-29T16:33:37.799624 #14508] DEBUG -- : 
D, [2014-12-29T16:33:37.813625 #14508] DEBUG -- : 
I, [2014-12-29T16:33:37.853627 #14508]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-29 16:33:37 +0000
D, [2014-12-29T16:33:37.945632 #14508] DEBUG -- : 
D, [2014-12-29T16:33:37.965633 #14508] DEBUG -- : 
I, [2014-12-29T16:33:38.017636 #14508]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-29 16:33:37 +0000
D, [2014-12-29T16:33:38.092641 #14508] DEBUG -- : 
D, [2014-12-29T16:33:38.116642 #14508] DEBUG -- : 
I, [2014-12-29T16:33:38.159644 #14508]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-29 16:33:38 +0000
D, [2014-12-29T16:33:38.227648 #14508] DEBUG -- : 
D, [2014-12-29T16:33:38.244649 #14508] DEBUG -- : 
I, [2014-12-29T16:33:38.289652 #14508]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-29 16:33:38 +0000
D, [2014-12-29T16:33:38.358656 #14508] DEBUG -- : 
D, [2014-12-29T16:33:38.376657 #14508] DEBUG -- : 
I, [2014-12-29T16:33:38.418659 #14508]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-29 16:33:38 +0000
D, [2014-12-29T16:33:38.487663 #14508] DEBUG -- : 
D, [2014-12-29T16:33:38.504664 #14508] DEBUG -- : 
I, [2014-12-29T16:33:38.550667 #14508]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-29 16:33:38 +0000
D, [2014-12-29T16:33:38.618671 #14508] DEBUG -- : 
D, [2014-12-29T16:33:38.633672 #14508] DEBUG -- : 
I, [2014-12-29T16:33:38.677674 #14508]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-29 16:33:38 +0000
D, [2014-12-29T16:33:38.747678 #14508] DEBUG -- : 
D, [2014-12-29T16:33:38.764679 #14508] DEBUG -- : 
I, [2014-12-29T16:33:38.802681 #14508]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-29 16:33:38 +0000
D, [2014-12-29T16:33:38.877686 #14508] DEBUG -- : 
D, [2014-12-29T16:33:38.894686 #14508] DEBUG -- : 
I, [2014-12-29T16:33:38.930689 #14508]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-29 16:33:38 +0000
D, [2014-12-29T16:33:38.997692 #14508] DEBUG -- : 
D, [2014-12-29T16:33:39.015693 #14508] DEBUG -- : 
I, [2014-12-29T16:33:39.060696 #14508]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-29 16:33:39 +0000
D, [2014-12-29T16:33:39.128700 #14508] DEBUG -- : 
D, [2014-12-29T16:33:39.151701 #14508] DEBUG -- : 
I, [2014-12-29T16:33:39.197704 #14508]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-29 16:33:39 +0000
D, [2014-12-29T16:33:39.257707 #14508] DEBUG -- : 
D, [2014-12-29T16:33:39.276708 #14508] DEBUG -- : 
I, [2014-12-29T16:33:39.315711 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-29 16:33:39 +0000
D, [2014-12-29T16:33:39.380714 #14508] DEBUG -- : 
D, [2014-12-29T16:33:39.396715 #14508] DEBUG -- : 
I, [2014-12-29T16:33:39.432717 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-29 16:33:39 +0000
D, [2014-12-29T16:33:39.499721 #14508] DEBUG -- : 
D, [2014-12-29T16:33:39.518722 #14508] DEBUG -- : 
I, [2014-12-29T16:33:39.565725 #14508]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-29 16:33:39 +0000
D, [2014-12-29T16:33:39.640729 #14508] DEBUG -- : 
D, [2014-12-29T16:33:39.659730 #14508] DEBUG -- : 
I, [2014-12-29T16:33:39.701733 #14508]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-29 16:33:39 +0000
D, [2014-12-29T16:33:39.763736 #14508] DEBUG -- : 
D, [2014-12-29T16:33:39.789738 #14508] DEBUG -- : 
I, [2014-12-29T16:33:39.835740 #14508]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-29 16:33:39 +0000
D, [2014-12-29T16:33:39.921745 #14508] DEBUG -- : 
D, [2014-12-29T16:33:39.941746 #14508] DEBUG -- : 
I, [2014-12-29T16:33:39.992749 #14508]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-29 16:33:39 +0000
D, [2014-12-29T16:33:40.050753 #14508] DEBUG -- : 
D, [2014-12-29T16:33:40.076754 #14508] DEBUG -- : 
I, [2014-12-29T16:33:40.123757 #14508]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-29 16:33:40 +0000
D, [2014-12-29T16:33:40.176760 #14508] DEBUG -- : 
D, [2014-12-29T16:33:40.196761 #14508] DEBUG -- : 
I, [2014-12-29T16:33:40.242764 #14508]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-29 16:33:40 +0000
D, [2014-12-29T16:33:40.311768 #14508] DEBUG -- : 
D, [2014-12-29T16:33:40.331769 #14508] DEBUG -- : 
I, [2014-12-29T16:33:40.382772 #14508]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-29 16:33:40 +0000
D, [2014-12-29T16:33:40.467776 #14508] DEBUG -- : 
D, [2014-12-29T16:33:40.490778 #14508] DEBUG -- : 
I, [2014-12-29T16:33:40.549781 #14508]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-29 16:33:40 +0000
D, [2014-12-29T16:33:40.619785 #14508] DEBUG -- : 
D, [2014-12-29T16:33:40.643787 #14508] DEBUG -- : 
I, [2014-12-29T16:33:40.708790 #14508]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-29 16:33:40 +0000
D, [2014-12-29T16:33:40.781794 #14508] DEBUG -- : 
D, [2014-12-29T16:33:40.808796 #14508] DEBUG -- : 
I, [2014-12-29T16:33:40.868799 #14508]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-29 16:33:40 +0000
D, [2014-12-29T16:33:40.944804 #14508] DEBUG -- : 
D, [2014-12-29T16:33:40.968805 #14508] DEBUG -- : 
I, [2014-12-29T16:33:41.031809 #14508]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-29 16:33:40 +0000
D, [2014-12-29T16:33:41.106813 #14508] DEBUG -- : 
D, [2014-12-29T16:33:41.129814 #14508] DEBUG -- : 
I, [2014-12-29T16:33:41.194818 #14508]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-29 16:33:41 +0000
D, [2014-12-29T16:33:41.285823 #14508] DEBUG -- : 
D, [2014-12-29T16:33:41.307824 #14508] DEBUG -- : 
I, [2014-12-29T16:33:41.361828 #14508]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-29 16:33:41 +0000
D, [2014-12-29T16:33:41.430832 #14508] DEBUG -- : 
D, [2014-12-29T16:33:41.454833 #14508] DEBUG -- : 
I, [2014-12-29T16:33:41.521837 #14508]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2014-12-29 16:33:41 +0000
D, [2014-12-29T16:33:41.589841 #14508] DEBUG -- : 
D, [2014-12-29T16:33:41.612842 #14508] DEBUG -- : 
I, [2014-12-29T16:33:41.679846 #14508]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2014-12-29 16:33:41 +0000
D, [2014-12-29T16:39:25.005661 #14508] DEBUG -- : 
D, [2014-12-29T16:39:25.021261 #14508] DEBUG -- : 
I, [2014-12-29T16:39:25.068061 #14508]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2014-12-29 16:39:25 +0000
I, [2014-12-29T16:39:25.146061 #14508]  INFO -- : Processing by LineItemsController#create as JS
I, [2014-12-29T16:39:25.192861 #14508]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2014-12-29T16:39:25.255261 #14508] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 32]]
D, [2014-12-29T16:39:25.317662 #14508] DEBUG -- :   [1m[36mProduct Load (15.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2014-12-29T16:39:25.395662 #14508] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 32]]
D, [2014-12-29T16:39:25.489262 #14508] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2014-12-29T16:39:25.520462 #14508] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2014-12-29T16:39:25.692062 #14508] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 32], ["created_at", Mon, 29 Dec 2014 16:39:25 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:4665a18,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Mon, 29 Dec 2014 16:39:25 UTC +00:00]]
D, [2014-12-29T16:39:25.879263 #14508] DEBUG -- :   [1m[35m (156.0ms)[0m  commit transaction
D, [2014-12-29T16:39:25.988463 #14508] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 32]]
I, [2014-12-29T16:39:26.050863 #14508]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2014-12-29T16:39:26.113263 #14508]  INFO -- :   Rendered carts/_cart.html.erb (171.6ms)
I, [2014-12-29T16:39:26.160063 #14508]  INFO -- :   Rendered line_items/create.js.erb (202.8ms)
I, [2014-12-29T16:39:26.206863 #14508]  INFO -- : Completed 200 OK in 967ms (Views: 265.2ms | ActiveRecord: 187.2ms)
D, [2014-12-29T16:39:29.312135 #14508] DEBUG -- : 
D, [2014-12-29T16:39:29.334136 #14508] DEBUG -- : 
I, [2014-12-29T16:39:29.382139 #14508]  INFO -- : Started GET "/orders/new" for 127.0.0.1 at 2014-12-29 16:39:29 +0000
I, [2014-12-29T16:39:29.469144 #14508]  INFO -- : Processing by OrdersController#new as HTML
D, [2014-12-29T16:39:29.545149 #14508] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 32]]
D, [2014-12-29T16:39:29.641154 #14508] DEBUG -- :   [1m[36mLineItem Exists (2.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 32]]
I, [2014-12-29T16:39:29.825165 #14508]  INFO -- :   Rendered orders/_form.html.erb (109.0ms)
I, [2014-12-29T16:39:29.873167 #14508]  INFO -- :   Rendered orders/new.html.erb within layouts/application (158.0ms)
D, [2014-12-29T16:39:30.079179 #14508] DEBUG -- :   [1m[35mCACHE (0.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 32]]
D, [2014-12-29T16:39:30.171184 #14508] DEBUG -- :   [1m[36mLineItem Load (3.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 32]]
D, [2014-12-29T16:39:30.295191 #14508] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2014-12-29T16:39:30.361195 #14508]  INFO -- :   Rendered line_items/_line_item.html.erb (129.0ms)
I, [2014-12-29T16:39:30.432199 #14508]  INFO -- :   Rendered carts/_cart.html.erb (296.0ms)
I, [2014-12-29T16:39:30.514204 #14508]  INFO -- : Completed 200 OK in 984ms (Views: 800.0ms | ActiveRecord: 9.0ms)
D, [2014-12-29T16:39:30.848223 #14508] DEBUG -- : 
D, [2014-12-29T16:39:30.871224 #14508] DEBUG -- : 
I, [2014-12-29T16:39:30.929228 #14508]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-29 16:39:30 +0000
D, [2014-12-29T16:39:30.994231 #14508] DEBUG -- : 
D, [2014-12-29T16:39:31.020233 #14508] DEBUG -- : 
I, [2014-12-29T16:39:31.091237 #14508]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-29 16:39:31 +0000
D, [2014-12-29T16:39:31.187242 #14508] DEBUG -- : 
D, [2014-12-29T16:39:31.234245 #14508] DEBUG -- : 
I, [2014-12-29T16:39:31.294249 #14508]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-29 16:39:31 +0000
D, [2014-12-29T16:39:31.375253 #14508] DEBUG -- : 
D, [2014-12-29T16:39:31.408255 #14508] DEBUG -- : 
I, [2014-12-29T16:39:31.472259 #14508]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-29 16:39:31 +0000
D, [2014-12-29T16:39:31.546263 #14508] DEBUG -- : 
D, [2014-12-29T16:39:31.571264 #14508] DEBUG -- : 
I, [2014-12-29T16:39:31.637268 #14508]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-29 16:39:31 +0000
D, [2014-12-29T16:39:31.712272 #14508] DEBUG -- : 
D, [2014-12-29T16:39:31.740274 #14508] DEBUG -- : 
I, [2014-12-29T16:39:31.810278 #14508]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-29 16:39:31 +0000
D, [2014-12-29T16:39:31.890283 #14508] DEBUG -- : 
D, [2014-12-29T16:39:31.917284 #14508] DEBUG -- : 
I, [2014-12-29T16:39:31.990288 #14508]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-29 16:39:31 +0000
D, [2014-12-29T16:39:32.066293 #14508] DEBUG -- : 
D, [2014-12-29T16:39:32.089294 #14508] DEBUG -- : 
I, [2014-12-29T16:39:32.149297 #14508]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-29 16:39:32 +0000
D, [2014-12-29T16:39:32.222302 #14508] DEBUG -- : 
D, [2014-12-29T16:39:32.248303 #14508] DEBUG -- : 
I, [2014-12-29T16:39:32.313307 #14508]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-29 16:39:32 +0000
D, [2014-12-29T16:39:32.384311 #14508] DEBUG -- : 
D, [2014-12-29T16:39:32.409312 #14508] DEBUG -- : 
I, [2014-12-29T16:39:32.475316 #14508]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-29 16:39:32 +0000
D, [2014-12-29T16:39:32.548320 #14508] DEBUG -- : 
D, [2014-12-29T16:39:32.571322 #14508] DEBUG -- : 
I, [2014-12-29T16:39:32.633325 #14508]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-29 16:39:32 +0000
D, [2014-12-29T16:39:32.713330 #14508] DEBUG -- : 
D, [2014-12-29T16:39:32.741331 #14508] DEBUG -- : 
I, [2014-12-29T16:39:32.810335 #14508]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-29 16:39:32 +0000
D, [2014-12-29T16:39:32.886340 #14508] DEBUG -- : 
D, [2014-12-29T16:39:32.912341 #14508] DEBUG -- : 
I, [2014-12-29T16:39:32.978345 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-29 16:39:32 +0000
D, [2014-12-29T16:39:33.056349 #14508] DEBUG -- : 
D, [2014-12-29T16:39:33.080351 #14508] DEBUG -- : 
I, [2014-12-29T16:39:33.142354 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-29 16:39:33 +0000
D, [2014-12-29T16:39:33.216359 #14508] DEBUG -- : 
D, [2014-12-29T16:39:33.242360 #14508] DEBUG -- : 
I, [2014-12-29T16:39:33.298363 #14508]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-29 16:39:33 +0000
D, [2014-12-29T16:39:33.375368 #14508] DEBUG -- : 
D, [2014-12-29T16:39:33.396369 #14508] DEBUG -- : 
I, [2014-12-29T16:39:33.450372 #14508]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-29 16:39:33 +0000
D, [2014-12-29T16:39:33.529376 #14508] DEBUG -- : 
D, [2014-12-29T16:39:33.554378 #14508] DEBUG -- : 
I, [2014-12-29T16:39:33.604381 #14508]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-29 16:39:33 +0000
D, [2014-12-29T16:39:33.678385 #14508] DEBUG -- : 
D, [2014-12-29T16:39:33.704386 #14508] DEBUG -- : 
I, [2014-12-29T16:39:33.758390 #14508]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-29 16:39:33 +0000
D, [2014-12-29T16:39:33.862395 #14508] DEBUG -- : 
D, [2014-12-29T16:39:33.882397 #14508] DEBUG -- : 
I, [2014-12-29T16:39:33.939400 #14508]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-29 16:39:33 +0000
D, [2014-12-29T16:39:34.021405 #14508] DEBUG -- : 
D, [2014-12-29T16:39:34.042406 #14508] DEBUG -- : 
I, [2014-12-29T16:39:34.097409 #14508]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-29 16:39:34 +0000
D, [2014-12-29T16:39:34.177413 #14508] DEBUG -- : 
D, [2014-12-29T16:39:34.199415 #14508] DEBUG -- : 
I, [2014-12-29T16:39:34.252418 #14508]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-29 16:39:34 +0000
D, [2014-12-29T16:39:34.337423 #14508] DEBUG -- : 
D, [2014-12-29T16:39:34.359424 #14508] DEBUG -- : 
I, [2014-12-29T16:39:34.414427 #14508]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-29 16:39:34 +0000
D, [2014-12-29T16:39:34.487431 #14508] DEBUG -- : 
D, [2014-12-29T16:39:34.508432 #14508] DEBUG -- : 
I, [2014-12-29T16:39:34.562436 #14508]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-29 16:39:34 +0000
D, [2014-12-29T16:39:34.636440 #14508] DEBUG -- : 
D, [2014-12-29T16:39:34.660441 #14508] DEBUG -- : 
I, [2014-12-29T16:39:34.715444 #14508]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-29 16:39:34 +0000
D, [2014-12-29T16:39:34.791449 #14508] DEBUG -- : 
D, [2014-12-29T16:39:34.813450 #14508] DEBUG -- : 
I, [2014-12-29T16:39:34.869453 #14508]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-29 16:39:34 +0000
D, [2014-12-29T16:39:34.943457 #14508] DEBUG -- : 
D, [2014-12-29T16:39:34.965459 #14508] DEBUG -- : 
I, [2014-12-29T16:39:35.021462 #14508]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-29 16:39:34 +0000
D, [2014-12-29T16:39:35.099466 #14508] DEBUG -- : 
D, [2014-12-29T16:39:35.117467 #14508] DEBUG -- : 
I, [2014-12-29T16:39:35.168470 #14508]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-29 16:39:35 +0000
D, [2014-12-29T16:39:47.296360 #14508] DEBUG -- : 
D, [2014-12-29T16:39:47.317361 #14508] DEBUG -- : 
I, [2014-12-29T16:39:47.367364 #14508]  INFO -- : Started POST "/orders" for 127.0.0.1 at 2014-12-29 16:39:47 +0000
I, [2014-12-29T16:39:47.462370 #14508]  INFO -- : Processing by OrdersController#create as HTML
I, [2014-12-29T16:39:47.583376 #14508]  INFO -- :   Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order"=>{"name"=>"s", "address"=>"s", "shipping_address1"=>"s", "email"=>"simon.king65@gmail.com", "pay_type"=>"Paypal"}, "commit"=>"Place Order"}
D, [2014-12-29T16:39:47.666381 #14508] DEBUG -- :   [1m[36mCart Load (3.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 32]]
I, [2014-12-29T16:39:47.694383 #14508]  INFO -- : log info
D, [2014-12-29T16:39:47.740385 #14508] DEBUG -- : Unpermitted parameters: shipping_address1
D, [2014-12-29T16:39:47.836391 #14508] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 32]]
I, [2014-12-29T16:39:47.892394 #14508]  INFO -- : just about to payment_method and save
I, [2014-12-29T16:39:48.010401 #14508]  INFO -- : #<Order id: nil, name: "s", address: "s", email: "simon.king65@gmail.com", pay_type: "Paypal", created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2014-12-29T16:39:48.049403 #14508] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2014-12-29T16:39:48.235414 #14508] DEBUG -- :   [1m[35mSQL (9.0ms)[0m  INSERT INTO "orders" ("address", "created_at", "email", "name", "pay_type", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "s"], ["created_at", Mon, 29 Dec 2014 16:39:48 UTC +00:00], ["email", "simon.king65@gmail.com"], ["name", "s"], ["pay_type", "Paypal"], ["updated_at", Mon, 29 Dec 2014 16:39:48 UTC +00:00]]
D, [2014-12-29T16:39:48.372422 #14508] DEBUG -- :   [1m[36mSQL (6.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 37[0m  [["cart_id", nil], ["order_id", 36], ["updated_at", Mon, 29 Dec 2014 16:39:48 UTC +00:00]]
I, [2014-12-29T16:39:48.406424 #14508]  INFO -- : about to @payment.create
D, [2014-12-29T16:39:48.501429 #14508] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2014-12-29T16:39:48.536431 #14508]  INFO -- : in order=
I, [2014-12-29T16:39:48.563433 #14508]  INFO -- : in payment.create
I, [2014-12-29T16:39:48.765444 #14508]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/36/confirm", "cancel_url"=>"http://localhost:3000/orders/36/cancel"}}
I, [2014-12-29T16:39:49.351478 #14508]  INFO -- : #<ActiveModel::Errors:0x000000058e8e88 @base=#<Payment:0x00000005afd2a0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005aeed68 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000599e760 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000599d978 @error=nil, @total="19.99", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000005997258 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005995e80 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000598c538 @error=nil, @return_url="http://localhost:3000/orders/36/confirm", @cancel_url="http://localhost:3000/orders/36/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000058e8e88 ...>>, @messages={}>
I, [2014-12-29T16:39:49.376479 #14508]  INFO -- : got past invalid
I, [2014-12-29T16:39:49.470484 #14508]  INFO -- : PayPal-Request-Id: 0ce28472-a424-4e90-bef3-431f22658940
I, [2014-12-29T16:39:49.514487 #14508]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2014-12-29T16:39:50.860564 #14508]  INFO -- : Response[201]: Created, Duration: 1.301s
I, [2014-12-29T16:39:50.904566 #14508]  INFO -- : back from super
I, [2014-12-29T16:39:51.435597 #14508]  INFO -- : {"id"=>"PAY-3V97855611827540GKSQYHVY", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99", "details"=>{"subtotal"=>"19.99"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/36/confirm", "cancel_url"=>"http://localhost:3000/orders/36/cancel"}, "create_time"=>"2014-12-29T16:39:51Z", "update_time"=>"2014-12-29T16:39:51Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-3V97855611827540GKSQYHVY", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-09H86916FG831443E", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-3V97855611827540GKSQYHVY/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2014-12-29T16:39:51.730614 #14508] DEBUG -- :   [1m[36mSQL (10.0ms)[0m  [1mUPDATE "orders" SET "name" = ?, "address" = ?, "email" = ?, "pay_type" = ?, "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ? WHERE "orders"."id" = 36[0m  [["name", "s"], ["address", "s"], ["email", "simon.king65@gmail.com"], ["pay_type", "Paypal"], ["created_at", Mon, 29 Dec 2014 16:39:48 UTC +00:00], ["updated_at", Mon, 29 Dec 2014 16:39:48 UTC +00:00], ["id", 36], ["payment_id", "PAY-3V97855611827540GKSQYHVY"], ["state", "created"]]
I, [2014-12-29T16:39:51.773616 #14508]  INFO -- : @payment save just done
I, [2014-12-29T16:39:52.930682 #14508]  INFO -- : #<Payment:0x00000005afd2a0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000004ab56b8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000004aafc18 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000004aaecf0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000004aacf18 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000004aac090 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000004aa53d0 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000004a92410 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000004a90bd8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000598c538 @error=nil, @return_url="http://localhost:3000/orders/36/confirm", @cancel_url="http://localhost:3000/orders/36/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000058e8e88 @base=#<Payment:0x00000005afd2a0 ...>, @messages={}>, @request_id="0ce28472-a424-4e90-bef3-431f22658940", @header={}, @id="PAY-3V97855611827540GKSQYHVY", @create_time="2014-12-29T16:39:51Z", @update_time="2014-12-29T16:39:51Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000004a59548 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3V97855611827540GKSQYHVY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000004a521f8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-09H86916FG831443E", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000004a50718 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3V97855611827540GKSQYHVY/execute", @rel="execute", @method="POST">]>
I, [2014-12-29T16:39:53.931740 #14508]  INFO -- : #<Payment:0x00000005afd2a0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000004ab56b8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000004aafc18 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000004aaecf0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000004aacf18 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000004aac090 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000004aa53d0 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000004a92410 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000004a90bd8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000598c538 @error=nil, @return_url="http://localhost:3000/orders/36/confirm", @cancel_url="http://localhost:3000/orders/36/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000058e8e88 @base=#<Payment:0x00000005afd2a0 ...>, @messages={}>, @request_id="0ce28472-a424-4e90-bef3-431f22658940", @header={}, @id="PAY-3V97855611827540GKSQYHVY", @create_time="2014-12-29T16:39:51Z", @update_time="2014-12-29T16:39:51Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000004a59548 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3V97855611827540GKSQYHVY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000004a521f8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-09H86916FG831443E", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000004a50718 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3V97855611827540GKSQYHVY/execute", @rel="execute", @method="POST">]>
D, [2014-12-29T16:39:54.077748 #14508] DEBUG -- :   [1m[35m (108.0ms)[0m  commit transaction
I, [2014-12-29T16:39:54.124751 #14508]  INFO -- : about to approve url
I, [2014-12-29T16:39:55.130808 #14508]  INFO -- : #<Payment:0x00000005afd2a0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000004ab56b8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000004aafc18 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000004aaecf0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000004aacf18 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000004aac090 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000004aa53d0 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000004a92410 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000004a90bd8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000598c538 @error=nil, @return_url="http://localhost:3000/orders/36/confirm", @cancel_url="http://localhost:3000/orders/36/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000058e8e88 @base=#<Payment:0x00000005afd2a0 ...>, @messages={}>, @request_id="0ce28472-a424-4e90-bef3-431f22658940", @header={}, @id="PAY-3V97855611827540GKSQYHVY", @create_time="2014-12-29T16:39:51Z", @update_time="2014-12-29T16:39:51Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000004a59548 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3V97855611827540GKSQYHVY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000004a521f8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-09H86916FG831443E", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000004a50718 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3V97855611827540GKSQYHVY/execute", @rel="execute", @method="POST">]>
I, [2014-12-29T16:39:56.132865 #14508]  INFO -- : #<Payment:0x00000005afd2a0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000004ab56b8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000004aafc18 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000004aaecf0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000004aacf18 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000004aac090 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000004aa53d0 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000004a92410 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000004a90bd8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000598c538 @error=nil, @return_url="http://localhost:3000/orders/36/confirm", @cancel_url="http://localhost:3000/orders/36/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000058e8e88 @base=#<Payment:0x00000005afd2a0 ...>, @messages={}>, @request_id="0ce28472-a424-4e90-bef3-431f22658940", @header={}, @id="PAY-3V97855611827540GKSQYHVY", @create_time="2014-12-29T16:39:51Z", @update_time="2014-12-29T16:39:51Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000004a59548 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3V97855611827540GKSQYHVY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000004a521f8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-09H86916FG831443E", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000004a50718 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3V97855611827540GKSQYHVY/execute", @rel="execute", @method="POST">]>
I, [2014-12-29T16:39:56.192869 #14508]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-09H86916FG831443E
I, [2014-12-29T16:39:57.187926 #14508]  INFO -- : #<Payment:0x00000005afd2a0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000004ab56b8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000004aafc18 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000004aaecf0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000004aacf18 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000004aac090 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000004aa53d0 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000004a92410 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000004a90bd8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000598c538 @error=nil, @return_url="http://localhost:3000/orders/36/confirm", @cancel_url="http://localhost:3000/orders/36/cancel">, @logger=#<Logger:0x00000005a238e8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a238c0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a23848 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a23820 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a237d0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000058e8e88 @base=#<Payment:0x00000005afd2a0 ...>, @messages={}>, @request_id="0ce28472-a424-4e90-bef3-431f22658940", @header={}, @id="PAY-3V97855611827540GKSQYHVY", @create_time="2014-12-29T16:39:51Z", @update_time="2014-12-29T16:39:51Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000004a59548 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3V97855611827540GKSQYHVY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000004a521f8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-09H86916FG831443E", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000004a50718 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3V97855611827540GKSQYHVY/execute", @rel="execute", @method="POST">]>
I, [2014-12-29T16:39:57.258930 #14508]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-09H86916FG831443E
I, [2014-12-29T16:39:57.300932 #14508]  INFO -- : Completed 302 Found in 9678ms (ActiveRecord: 141.0ms)
D, [2014-12-29T16:40:27.145639 #14508] DEBUG -- : 
D, [2014-12-29T16:40:27.166640 #14508] DEBUG -- : 
I, [2014-12-29T16:40:27.241645 #14508]  INFO -- : Started GET "/orders/36/confirm?paymentId=PAY-3V97855611827540GKSQYHVY&token=EC-09H86916FG831443E&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2014-12-29 16:40:27 +0000
I, [2014-12-29T16:40:27.327650 #14508]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2014-12-29T16:40:27.391653 #14508]  INFO -- :   Parameters: {"paymentId"=>"PAY-3V97855611827540GKSQYHVY", "token"=>"EC-09H86916FG831443E", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"36"}
D, [2014-12-29T16:40:27.457657 #14508] DEBUG -- :   [1m[36mUser Load (3.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2014-12-29T16:40:27.518661 #14508] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2014-12-29T16:40:27.591665 #14508] DEBUG -- :   [1m[36mOrder Load (1.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "36"]]
I, [2014-12-29T16:40:32.510946 #14508]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-3V97855611827540GKSQYHVY
I, [2014-12-29T16:40:33.598008 #14508]  INFO -- : Response[200]: OK, Duration: 1.055s
D, [2014-12-29T16:40:37.395226 #14508] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2014-12-29T16:40:37.515232 #14508] DEBUG -- :   [1m[36mSQL (6.0ms)[0m  [1mUPDATE "orders" SET "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 36[0m  [["shipping_address1", "1 Main Terrace"], ["updated_at", Mon, 29 Dec 2014 16:40:37 UTC +00:00]]
D, [2014-12-29T16:40:37.690242 #14508] DEBUG -- :   [1m[35m (138.0ms)[0m  commit transaction
I, [2014-12-29T16:40:37.861252 #14508]  INFO -- :   Rendered orders/_form.html.erb (105.0ms)
I, [2014-12-29T16:40:37.919255 #14508]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (163.0ms)
I, [2014-12-29T16:40:38.108266 #14508]  INFO -- : Completed 200 OK in 10676ms (Views: 374.0ms | ActiveRecord: 151.0ms)
D, [2014-12-29T16:40:38.481288 #14508] DEBUG -- : 
D, [2014-12-29T16:40:38.496288 #14508] DEBUG -- : 
I, [2014-12-29T16:40:38.542291 #14508]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-29 16:40:38 +0000
D, [2014-12-29T16:40:38.635296 #14508] DEBUG -- : 
D, [2014-12-29T16:40:38.650297 #14508] DEBUG -- : 
I, [2014-12-29T16:40:38.695300 #14508]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-29 16:40:38 +0000
D, [2014-12-29T16:40:38.787305 #14508] DEBUG -- : 
D, [2014-12-29T16:40:38.803306 #14508] DEBUG -- : 
I, [2014-12-29T16:40:38.848309 #14508]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-29 16:40:38 +0000
D, [2014-12-29T16:40:38.980316 #14508] DEBUG -- : 
D, [2014-12-29T16:40:39.013318 #14508] DEBUG -- : 
I, [2014-12-29T16:40:39.057321 #14508]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-29 16:40:39 +0000
D, [2014-12-29T16:40:39.130325 #14508] DEBUG -- : 
D, [2014-12-29T16:40:39.153326 #14508] DEBUG -- : 
I, [2014-12-29T16:40:39.196329 #14508]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-29 16:40:39 +0000
D, [2014-12-29T16:40:39.281333 #14508] DEBUG -- : 
D, [2014-12-29T16:40:39.302335 #14508] DEBUG -- : 
I, [2014-12-29T16:40:39.344337 #14508]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-29 16:40:39 +0000
D, [2014-12-29T16:40:39.421341 #14508] DEBUG -- : 
D, [2014-12-29T16:40:39.443343 #14508] DEBUG -- : 
I, [2014-12-29T16:40:39.487345 #14508]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-29 16:40:39 +0000
D, [2014-12-29T16:40:39.560349 #14508] DEBUG -- : 
D, [2014-12-29T16:40:39.580351 #14508] DEBUG -- : 
I, [2014-12-29T16:40:39.621353 #14508]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-29 16:40:39 +0000
D, [2014-12-29T16:40:39.698357 #14508] DEBUG -- : 
D, [2014-12-29T16:40:39.714358 #14508] DEBUG -- : 
I, [2014-12-29T16:40:39.758361 #14508]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-29 16:40:39 +0000
D, [2014-12-29T16:40:39.841365 #14508] DEBUG -- : 
D, [2014-12-29T16:40:39.857366 #14508] DEBUG -- : 
I, [2014-12-29T16:40:39.891368 #14508]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-29 16:40:39 +0000
D, [2014-12-29T16:40:39.971373 #14508] DEBUG -- : 
D, [2014-12-29T16:40:40.025376 #14508] DEBUG -- : 
I, [2014-12-29T16:40:40.081379 #14508]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-29 16:40:40 +0000
D, [2014-12-29T16:40:40.171384 #14508] DEBUG -- : 
D, [2014-12-29T16:40:40.203386 #14508] DEBUG -- : 
I, [2014-12-29T16:40:40.264390 #14508]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-29 16:40:40 +0000
D, [2014-12-29T16:40:40.338394 #14508] DEBUG -- : 
D, [2014-12-29T16:40:40.364395 #14508] DEBUG -- : 
I, [2014-12-29T16:40:40.428399 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-29 16:40:40 +0000
D, [2014-12-29T16:40:40.501403 #14508] DEBUG -- : 
D, [2014-12-29T16:40:40.528405 #14508] DEBUG -- : 
I, [2014-12-29T16:40:40.603409 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-29 16:40:40 +0000
D, [2014-12-29T16:40:40.676413 #14508] DEBUG -- : 
D, [2014-12-29T16:40:40.701415 #14508] DEBUG -- : 
I, [2014-12-29T16:40:40.767418 #14508]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-29 16:40:40 +0000
D, [2014-12-29T16:40:40.839423 #14508] DEBUG -- : 
D, [2014-12-29T16:40:40.863424 #14508] DEBUG -- : 
I, [2014-12-29T16:40:40.926427 #14508]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-29 16:40:40 +0000
D, [2014-12-29T16:40:41.001432 #14508] DEBUG -- : 
D, [2014-12-29T16:40:41.022433 #14508] DEBUG -- : 
I, [2014-12-29T16:40:41.069436 #14508]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-29 16:40:41 +0000
D, [2014-12-29T16:40:41.142440 #14508] DEBUG -- : 
D, [2014-12-29T16:40:41.170441 #14508] DEBUG -- : 
I, [2014-12-29T16:40:41.231445 #14508]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-29 16:40:41 +0000
D, [2014-12-29T16:40:41.307449 #14508] DEBUG -- : 
D, [2014-12-29T16:40:41.333451 #14508] DEBUG -- : 
I, [2014-12-29T16:40:41.405455 #14508]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-29 16:40:41 +0000
D, [2014-12-29T16:40:41.479459 #14508] DEBUG -- : 
D, [2014-12-29T16:40:41.502460 #14508] DEBUG -- : 
I, [2014-12-29T16:40:41.570464 #14508]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-29 16:40:41 +0000
D, [2014-12-29T16:40:41.642468 #14508] DEBUG -- : 
D, [2014-12-29T16:40:41.666470 #14508] DEBUG -- : 
I, [2014-12-29T16:40:41.731474 #14508]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-29 16:40:41 +0000
D, [2014-12-29T16:40:41.812478 #14508] DEBUG -- : 
D, [2014-12-29T16:40:41.838480 #14508] DEBUG -- : 
I, [2014-12-29T16:40:41.902483 #14508]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-29 16:40:41 +0000
D, [2014-12-29T16:40:41.979488 #14508] DEBUG -- : 
D, [2014-12-29T16:40:42.005489 #14508] DEBUG -- : 
I, [2014-12-29T16:40:42.072493 #14508]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-29 16:40:42 +0000
D, [2014-12-29T16:40:42.148497 #14508] DEBUG -- : 
D, [2014-12-29T16:40:42.173499 #14508] DEBUG -- : 
I, [2014-12-29T16:40:42.234502 #14508]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-29 16:40:42 +0000
D, [2014-12-29T16:40:42.311507 #14508] DEBUG -- : 
D, [2014-12-29T16:40:42.338508 #14508] DEBUG -- : 
I, [2014-12-29T16:40:42.406512 #14508]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-29 16:40:42 +0000
D, [2014-12-29T16:40:42.482516 #14508] DEBUG -- : 
D, [2014-12-29T16:40:42.509518 #14508] DEBUG -- : 
I, [2014-12-29T16:40:42.578522 #14508]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-29 16:40:42 +0000
D, [2014-12-29T16:40:42.654526 #14508] DEBUG -- : 
D, [2014-12-29T16:40:42.674527 #14508] DEBUG -- : 
I, [2014-12-29T16:40:42.726530 #14508]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-29 16:40:42 +0000
D, [2014-12-29T16:40:58.090389 #14508] DEBUG -- : 
D, [2014-12-29T16:40:58.114391 #14508] DEBUG -- : 
I, [2014-12-29T16:40:58.187395 #14508]  INFO -- : Started POST "/orders/36/execute/36/2VZ7YQDDDPPC4" for 127.0.0.1 at 2014-12-29 16:40:58 +0000
I, [2014-12-29T16:40:58.288400 #14508]  INFO -- : Processing by OrdersController#execute as HTML
I, [2014-12-29T16:40:58.379406 #14508]  INFO -- :   Parameters: {"authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order_id"=>"36", "payer_id"=>"2VZ7YQDDDPPC4"}
D, [2014-12-29T16:40:58.482412 #14508] DEBUG -- :   [1m[36mOrder Load (2.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "36"]]
I, [2014-12-29T16:41:05.027786 #14508]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-3V97855611827540GKSQYHVY
I, [2014-12-29T16:41:06.071846 #14508]  INFO -- : Response[200]: OK, Duration: 1.017s
I, [2014-12-29T16:41:06.128849 #14508]  INFO -- : PayPal-Request-Id: 3b329cc2-94f0-440e-9a89-42ad46ad8e1f
I, [2014-12-29T16:41:06.175852 #14508]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-3V97855611827540GKSQYHVY/execute
I, [2014-12-29T16:41:08.389978 #14508]  INFO -- : Response[200]: OK, Duration: 2.178s
D, [2014-12-29T16:41:08.445981 #14508] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2014-12-29T16:41:08.558988 #14508] DEBUG -- :   [1m[36mSQL (7.0ms)[0m  [1mUPDATE "orders" SET "state" = ?, "updated_at" = ? WHERE "orders"."id" = 36[0m  [["state", "approved"], ["updated_at", Mon, 29 Dec 2014 16:41:08 UTC +00:00]]
D, [2014-12-29T16:41:08.726998 #14508] DEBUG -- :   [1m[35m (128.0ms)[0m  commit transaction
D, [2014-12-29T16:41:08.797002 #14508] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 32]]
D, [2014-12-29T16:41:08.836004 #14508] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2014-12-29T16:41:08.921009 #14508] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 32]]
D, [2014-12-29T16:41:08.982012 #14508] DEBUG -- :   [1m[35mSQL (5.0ms)[0m  DELETE FROM "carts" WHERE "carts"."id" = ?  [["id", 32]]
D, [2014-12-29T16:41:09.154022 #14508] DEBUG -- :   [1m[36m (133.0ms)[0m  [1mcommit transaction[0m
I, [2014-12-29T16:41:11.189138 #14508]  INFO -- :   Rendered order_notifier/received.html.erb (1.0ms)
D, [2014-12-29T16:41:11.307145 #14508] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 36]]
D, [2014-12-29T16:41:11.436152 #14508] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2014-12-29T16:41:11.486155 #14508]  INFO -- :   Rendered line_items/_line_item.text.erb (123.0ms)
I, [2014-12-29T16:41:11.530158 #14508]  INFO -- :   Rendered order_notifier/received.text.erb (285.0ms)
I, [2014-12-29T16:41:13.313260 #14508]  INFO -- : 
Sent mail to simon.king65@gmail.com (1522.1ms)
D, [2014-12-29T16:41:13.710283 #14508] DEBUG -- : Date: Mon, 29 Dec 2014 16:41:11 +0000

From: Simon King <simon.king65@gmail.com>

To: simon.king65@gmail.com

Message-ID: <54a18427d1841_38ac5051644361c0@Simon-PC.mail>

Subject: King Clothing Order Confirmation

Mime-Version: 1.0

Content-Type: multipart/alternative;

 boundary="--==_mimepart_54a184278ab60_38ac50516443604a";

 charset=UTF-8

Content-Transfer-Encoding: 7bit





----==_mimepart_54a184278ab60_38ac50516443604a

Content-Type: text/plain;

 charset=UTF-8

Content-Transfer-Encoding: 7bit



Dear s



Thank you for your recent order from King Clothing.



You ordered the following items:



 1 x Camo Print Tee

We'll send you a separate e-mail when your order ships.

----==_mimepart_54a184278ab60_38ac50516443604a

Content-Type: text/html;

 charset=UTF-8

Content-Transfer-Encoding: 7bit



<h1>OrderNotifier#received</h1>



<p>

  , thank you for your order, we will email you again once your order has been despatched. We hope you enjoy wearing your King Clothing brand tee-shirt.

</p>



----==_mimepart_54a184278ab60_38ac50516443604a--


I, [2014-12-29T16:41:13.754285 #14508]  INFO -- : Redirected to http://localhost:3000/
I, [2014-12-29T16:41:13.796287 #14508]  INFO -- : Completed 302 Found in 15375ms (ActiveRecord: 287.0ms)
D, [2014-12-29T16:41:13.882292 #14508] DEBUG -- : 
D, [2014-12-29T16:41:13.903294 #14508] DEBUG -- : 
I, [2014-12-29T16:41:13.943296 #14508]  INFO -- : Started GET "/" for 127.0.0.1 at 2014-12-29 16:41:13 +0000
I, [2014-12-29T16:41:14.030301 #14508]  INFO -- : Processing by StoreController#index as HTML
D, [2014-12-29T16:41:14.079304 #14508] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2014-12-29T16:41:14.199311 #14508] DEBUG -- :   [1m[36mSQL (8.0ms)[0m  [1mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Mon, 29 Dec 2014 16:41:14 UTC +00:00], ["updated_at", Mon, 29 Dec 2014 16:41:14 UTC +00:00]]
D, [2014-12-29T16:41:14.373320 #14508] DEBUG -- :   [1m[35m (136.0ms)[0m  commit transaction
D, [2014-12-29T16:41:14.474326 #14508] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2014-12-29T16:41:14.543330 #14508]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (6.0ms)
I, [2014-12-29T16:41:14.585333 #14508]  INFO -- :   Rendered store/index.html.erb within layouts/application (144.0ms)
D, [2014-12-29T16:41:14.826346 #14508] DEBUG -- :   [1m[35mLineItem Exists (2.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 33]]
D, [2014-12-29T16:41:14.911351 #14508] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 33]]
I, [2014-12-29T16:41:14.946353 #14508]  INFO -- :   Rendered collection (1.0ms)
I, [2014-12-29T16:41:15.013357 #14508]  INFO -- :   Rendered carts/_cart.html.erb (140.0ms)
I, [2014-12-29T16:41:15.089361 #14508]  INFO -- : Completed 200 OK in 1011ms (Views: 655.0ms | ActiveRecord: 152.0ms)
D, [2014-12-29T16:41:15.402379 #14508] DEBUG -- : 
D, [2014-12-29T16:41:15.431381 #14508] DEBUG -- : 
I, [2014-12-29T16:41:15.488384 #14508]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-29 16:41:15 +0000
D, [2014-12-29T16:41:15.579389 #14508] DEBUG -- : 
D, [2014-12-29T16:41:15.622392 #14508] DEBUG -- : 
I, [2014-12-29T16:41:15.682395 #14508]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-29 16:41:15 +0000
D, [2014-12-29T16:41:15.756400 #14508] DEBUG -- : 
D, [2014-12-29T16:41:15.775401 #14508] DEBUG -- : 
I, [2014-12-29T16:41:15.826404 #14508]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-29 16:41:15 +0000
D, [2014-12-29T16:41:15.902408 #14508] DEBUG -- : 
D, [2014-12-29T16:41:15.918409 #14508] DEBUG -- : 
I, [2014-12-29T16:41:15.965412 #14508]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-29 16:41:15 +0000
D, [2014-12-29T16:41:16.034415 #14508] DEBUG -- : 
D, [2014-12-29T16:41:16.059417 #14508] DEBUG -- : 
I, [2014-12-29T16:41:16.097419 #14508]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-29 16:41:16 +0000
D, [2014-12-29T16:41:16.176424 #14508] DEBUG -- : 
D, [2014-12-29T16:41:16.194425 #14508] DEBUG -- : 
I, [2014-12-29T16:41:16.238427 #14508]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-29 16:41:16 +0000
D, [2014-12-29T16:41:16.323432 #14508] DEBUG -- : 
D, [2014-12-29T16:41:16.341433 #14508] DEBUG -- : 
I, [2014-12-29T16:41:16.381435 #14508]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-29 16:41:16 +0000
D, [2014-12-29T16:41:16.454439 #14508] DEBUG -- : 
D, [2014-12-29T16:41:16.489441 #14508] DEBUG -- : 
I, [2014-12-29T16:41:16.532444 #14508]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-29 16:41:16 +0000
D, [2014-12-29T16:41:16.611448 #14508] DEBUG -- : 
D, [2014-12-29T16:41:16.626449 #14508] DEBUG -- : 
I, [2014-12-29T16:41:16.667452 #14508]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-29 16:41:16 +0000
D, [2014-12-29T16:41:16.744456 #14508] DEBUG -- : 
D, [2014-12-29T16:41:16.760457 #14508] DEBUG -- : 
I, [2014-12-29T16:41:16.802459 #14508]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-29 16:41:16 +0000
D, [2014-12-29T16:41:16.883464 #14508] DEBUG -- : 
D, [2014-12-29T16:41:16.898465 #14508] DEBUG -- : 
I, [2014-12-29T16:41:16.940467 #14508]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-29 16:41:16 +0000
D, [2014-12-29T16:41:17.022472 #14508] DEBUG -- : 
D, [2014-12-29T16:41:17.038473 #14508] DEBUG -- : 
I, [2014-12-29T16:41:17.081475 #14508]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-29 16:41:17 +0000
D, [2014-12-29T16:41:17.176481 #14508] DEBUG -- : 
D, [2014-12-29T16:41:17.196482 #14508] DEBUG -- : 
I, [2014-12-29T16:41:17.248485 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-29 16:41:17 +0000
D, [2014-12-29T16:41:17.331490 #14508] DEBUG -- : 
D, [2014-12-29T16:41:17.353491 #14508] DEBUG -- : 
I, [2014-12-29T16:41:17.411494 #14508]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-29 16:41:17 +0000
D, [2014-12-29T16:41:17.490499 #14508] DEBUG -- : 
D, [2014-12-29T16:41:17.515500 #14508] DEBUG -- : 
I, [2014-12-29T16:41:17.566503 #14508]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-29 16:41:17 +0000
D, [2014-12-29T16:41:17.649508 #14508] DEBUG -- : 
D, [2014-12-29T16:41:17.688510 #14508] DEBUG -- : 
I, [2014-12-29T16:41:17.739513 #14508]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-29 16:41:17 +0000
D, [2014-12-29T16:41:17.809517 #14508] DEBUG -- : 
D, [2014-12-29T16:41:17.823518 #14508] DEBUG -- : 
I, [2014-12-29T16:41:17.867520 #14508]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-29 16:41:17 +0000
D, [2014-12-29T16:41:17.941525 #14508] DEBUG -- : 
D, [2014-12-29T16:41:17.961526 #14508] DEBUG -- : 
I, [2014-12-29T16:41:18.005528 #14508]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-29 16:41:17 +0000
D, [2014-12-29T16:41:18.088533 #14508] DEBUG -- : 
D, [2014-12-29T16:41:18.106534 #14508] DEBUG -- : 
I, [2014-12-29T16:41:18.162537 #14508]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-29 16:41:18 +0000
D, [2014-12-29T16:41:18.239542 #14508] DEBUG -- : 
D, [2014-12-29T16:41:18.265543 #14508] DEBUG -- : 
I, [2014-12-29T16:41:18.315546 #14508]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-29 16:41:18 +0000
D, [2014-12-29T16:41:18.392550 #14508] DEBUG -- : 
D, [2014-12-29T16:41:18.411551 #14508] DEBUG -- : 
I, [2014-12-29T16:41:18.460554 #14508]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-29 16:41:18 +0000
D, [2014-12-29T16:41:18.529558 #14508] DEBUG -- : 
D, [2014-12-29T16:41:18.558560 #14508] DEBUG -- : 
I, [2014-12-29T16:41:18.610563 #14508]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-29 16:41:18 +0000
D, [2014-12-29T16:41:18.679567 #14508] DEBUG -- : 
D, [2014-12-29T16:41:18.697568 #14508] DEBUG -- : 
I, [2014-12-29T16:41:18.750571 #14508]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-29 16:41:18 +0000
D, [2014-12-29T16:41:18.821575 #14508] DEBUG -- : 
D, [2014-12-29T16:41:18.841576 #14508] DEBUG -- : 
I, [2014-12-29T16:41:18.890579 #14508]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-29 16:41:18 +0000
D, [2014-12-29T16:41:18.963583 #14508] DEBUG -- : 
D, [2014-12-29T16:41:18.984584 #14508] DEBUG -- : 
I, [2014-12-29T16:41:19.032587 #14508]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-29 16:41:18 +0000
D, [2014-12-29T16:41:19.105591 #14508] DEBUG -- : 
D, [2014-12-29T16:41:19.124592 #14508] DEBUG -- : 
I, [2014-12-29T16:41:19.172595 #14508]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-29 16:41:19 +0000
D, [2014-12-29T16:41:19.244599 #14508] DEBUG -- : 
D, [2014-12-29T16:41:19.270601 #14508] DEBUG -- : 
I, [2014-12-29T16:41:19.315603 #14508]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-29 16:41:19 +0000
D, [2014-12-29T16:41:19.383607 #14508] DEBUG -- : 
D, [2014-12-29T16:41:19.404608 #14508] DEBUG -- : 
I, [2014-12-29T16:41:19.454611 #14508]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2014-12-29 16:41:19 +0000
D, [2014-12-29T16:41:19.527615 #14508] DEBUG -- : 
D, [2014-12-29T16:41:19.544616 #14508] DEBUG -- : 
I, [2014-12-29T16:41:19.588619 #14508]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2014-12-29 16:41:19 +0000
D, [2014-12-29T21:26:13.415251 #3944] DEBUG -- : 
D, [2014-12-29T21:26:13.430851 #3944] DEBUG -- : 
I, [2014-12-29T21:26:13.493251 #3944]  INFO -- : Started GET "/" for 127.0.0.1 at 2014-12-29 21:26:13 +0000
D, [2014-12-29T21:26:14.452061 #3944] DEBUG -- :   [1m[36mActiveRecord::SchemaMigration Load (2.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
I, [2014-12-29T21:26:14.669564 #3944]  INFO -- : Processing by StoreController#index as HTML
D, [2014-12-29T21:26:14.827066 #3944] DEBUG -- :   [1m[35mCart Load (12.5ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 33]]
D, [2014-12-29T21:26:15.012069 #3944] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2014-12-29T21:26:15.137071 #3944]  INFO -- : Cache digest for store/index.html: a93d4e2e981ab3dfce98a095c3b6c059
I, [2014-12-29T21:26:15.219572 #3944]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (2.5ms)
I, [2014-12-29T21:26:15.282073 #3944]  INFO -- :   Rendered store/index.html.erb within layouts/application (305.0ms)
D, [2014-12-29T21:26:15.929583 #3944] DEBUG -- :   [1m[35mLineItem Exists (0.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 33]]
D, [2014-12-29T21:26:16.037085 #3944] DEBUG -- :   [1m[36mLineItem Load (2.5ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 33]]
I, [2014-12-29T21:26:16.079586 #3944]  INFO -- :   Rendered collection (0.0ms)
I, [2014-12-29T21:26:16.154587 #3944]  INFO -- :   Rendered carts/_cart.html.erb (157.5ms)
I, [2014-12-29T21:26:16.217088 #3944]  INFO -- : Completed 200 OK in 1485ms (Views: 1272.5ms | ActiveRecord: 27.5ms)
D, [2014-12-29T21:26:16.247088 #3944] DEBUG -- : 
D, [2014-12-29T21:26:16.272089 #3944] DEBUG -- : 
I, [2014-12-29T21:26:16.324589 #3944]  INFO -- : Started GET "/" for 127.0.0.1 at 2014-12-29 21:26:16 +0000
I, [2014-12-29T21:26:16.394590 #3944]  INFO -- : Processing by StoreController#index as HTML
D, [2014-12-29T21:26:16.472092 #3944] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 33]]
D, [2014-12-29T21:26:16.567093 #3944] DEBUG -- :   [1m[36mProduct Load (2.5ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2014-12-29T21:26:16.644594 #3944]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (2.5ms)
I, [2014-12-29T21:26:16.704595 #3944]  INFO -- :   Rendered store/index.html.erb within layouts/application (162.5ms)
D, [2014-12-29T21:26:16.814597 #3944] DEBUG -- :   [1m[35mLineItem Exists (2.5ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 33]]
D, [2014-12-29T21:26:16.907098 #3944] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 33]]
I, [2014-12-29T21:26:16.947099 #3944]  INFO -- :   Rendered collection (0.0ms)
I, [2014-12-29T21:26:16.992100 #3944]  INFO -- :   Rendered carts/_cart.html.erb (130.0ms)
I, [2014-12-29T21:26:17.042100 #3944]  INFO -- : Completed 200 OK in 600ms (Views: 517.5ms | ActiveRecord: 5.0ms)
D, [2014-12-29T21:26:17.354605 #3944] DEBUG -- : 
D, [2014-12-29T21:26:17.374605 #3944] DEBUG -- : 
I, [2014-12-29T21:26:17.424606 #3944]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:17 +0000
D, [2014-12-29T21:26:17.467107 #3944] DEBUG -- : 
D, [2014-12-29T21:26:17.479607 #3944] DEBUG -- : 
I, [2014-12-29T21:26:17.512108 #3944]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:17 +0000
D, [2014-12-29T21:26:17.552108 #3944] DEBUG -- : 
D, [2014-12-29T21:26:17.564608 #3944] DEBUG -- : 
I, [2014-12-29T21:26:17.599609 #3944]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:17 +0000
D, [2014-12-29T21:26:17.647110 #3944] DEBUG -- : 
D, [2014-12-29T21:26:17.664610 #3944] DEBUG -- : 
I, [2014-12-29T21:26:17.709611 #3944]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:17 +0000
D, [2014-12-29T21:26:17.749611 #3944] DEBUG -- : 
D, [2014-12-29T21:26:17.764611 #3944] DEBUG -- : 
I, [2014-12-29T21:26:17.802112 #3944]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:17 +0000
D, [2014-12-29T21:26:17.842113 #3944] DEBUG -- : 
D, [2014-12-29T21:26:17.854613 #3944] DEBUG -- : 
I, [2014-12-29T21:26:17.892113 #3944]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:17 +0000
D, [2014-12-29T21:26:17.929614 #3944] DEBUG -- : 
D, [2014-12-29T21:26:17.942114 #3944] DEBUG -- : 
I, [2014-12-29T21:26:17.977115 #3944]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:17 +0000
D, [2014-12-29T21:26:18.009615 #3944] DEBUG -- : 
D, [2014-12-29T21:26:18.022115 #3944] DEBUG -- : 
I, [2014-12-29T21:26:18.059616 #3944]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:18 +0000
D, [2014-12-29T21:26:18.094616 #3944] DEBUG -- : 
D, [2014-12-29T21:26:18.107117 #3944] DEBUG -- : 
I, [2014-12-29T21:26:18.147117 #3944]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:18 +0000
D, [2014-12-29T21:26:18.182118 #3944] DEBUG -- : 
D, [2014-12-29T21:26:18.197118 #3944] DEBUG -- : 
I, [2014-12-29T21:26:18.232119 #3944]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:18 +0000
D, [2014-12-29T21:26:18.267119 #3944] DEBUG -- : 
D, [2014-12-29T21:26:18.279619 #3944] DEBUG -- : 
I, [2014-12-29T21:26:18.319620 #3944]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:18 +0000
D, [2014-12-29T21:26:18.382121 #3944] DEBUG -- : 
D, [2014-12-29T21:26:18.397121 #3944] DEBUG -- : 
I, [2014-12-29T21:26:18.434622 #3944]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:18 +0000
D, [2014-12-29T21:26:18.474622 #3944] DEBUG -- : 
D, [2014-12-29T21:26:18.487122 #3944] DEBUG -- : 
I, [2014-12-29T21:26:18.519623 #3944]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:18 +0000
D, [2014-12-29T21:26:18.564624 #3944] DEBUG -- : 
D, [2014-12-29T21:26:18.577124 #3944] DEBUG -- : 
I, [2014-12-29T21:26:18.617124 #3944]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:18 +0000
D, [2014-12-29T21:26:18.662125 #3944] DEBUG -- : 
D, [2014-12-29T21:26:18.674625 #3944] DEBUG -- : 
I, [2014-12-29T21:26:18.709626 #3944]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:18 +0000
D, [2014-12-29T21:26:18.747126 #3944] DEBUG -- : 
D, [2014-12-29T21:26:18.762127 #3944] DEBUG -- : 
I, [2014-12-29T21:26:18.797127 #3944]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:18 +0000
D, [2014-12-29T21:26:18.832128 #3944] DEBUG -- : 
D, [2014-12-29T21:26:18.849628 #3944] DEBUG -- : 
I, [2014-12-29T21:26:18.892129 #3944]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:18 +0000
D, [2014-12-29T21:26:18.927129 #3944] DEBUG -- : 
D, [2014-12-29T21:26:18.939629 #3944] DEBUG -- : 
I, [2014-12-29T21:26:18.974630 #3944]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:18 +0000
D, [2014-12-29T21:26:19.007130 #3944] DEBUG -- : 
D, [2014-12-29T21:26:19.022131 #3944] DEBUG -- : 
I, [2014-12-29T21:26:19.057131 #3944]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:19 +0000
D, [2014-12-29T21:26:19.094632 #3944] DEBUG -- : 
D, [2014-12-29T21:26:19.107132 #3944] DEBUG -- : 
I, [2014-12-29T21:26:19.139632 #3944]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:19 +0000
D, [2014-12-29T21:26:19.239634 #3944] DEBUG -- : 
D, [2014-12-29T21:26:19.254634 #3944] DEBUG -- : 
I, [2014-12-29T21:26:19.289635 #3944]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:19 +0000
D, [2014-12-29T21:26:19.324635 #3944] DEBUG -- : 
D, [2014-12-29T21:26:19.337135 #3944] DEBUG -- : 
I, [2014-12-29T21:26:19.372136 #3944]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:19 +0000
D, [2014-12-29T21:26:19.407137 #3944] DEBUG -- : 
D, [2014-12-29T21:26:19.419637 #3944] DEBUG -- : 
I, [2014-12-29T21:26:19.457137 #3944]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:19 +0000
D, [2014-12-29T21:26:19.492138 #3944] DEBUG -- : 
D, [2014-12-29T21:26:19.507138 #3944] DEBUG -- : 
I, [2014-12-29T21:26:19.542139 #3944]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:19 +0000
D, [2014-12-29T21:26:19.574639 #3944] DEBUG -- : 
D, [2014-12-29T21:26:19.587139 #3944] DEBUG -- : 
I, [2014-12-29T21:26:19.622140 #3944]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:19 +0000
D, [2014-12-29T21:26:19.654640 #3944] DEBUG -- : 
D, [2014-12-29T21:26:19.669641 #3944] DEBUG -- : 
I, [2014-12-29T21:26:19.704641 #3944]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:19 +0000
D, [2014-12-29T21:26:19.789642 #3944] DEBUG -- : 
D, [2014-12-29T21:26:19.817143 #3944] DEBUG -- : 
I, [2014-12-29T21:26:19.864644 #3944]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-29 21:26:19 +0000
D, [2014-12-29T21:26:19.899644 #3944] DEBUG -- : 
D, [2014-12-29T21:26:19.914644 #3944] DEBUG -- : 
I, [2014-12-29T21:26:19.947145 #3944]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2014-12-29 21:26:19 +0000
D, [2014-12-29T21:26:19.982145 #3944] DEBUG -- : 
D, [2014-12-29T21:26:19.999646 #3944] DEBUG -- : 
I, [2014-12-29T21:26:20.027146 #3944]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2014-12-29 21:26:19 +0000
D, [2014-12-29T21:26:20.062147 #3944] DEBUG -- : 
D, [2014-12-29T21:26:20.072147 #3944] DEBUG -- : 
I, [2014-12-29T21:26:20.102147 #3944]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2014-12-29 21:26:20 +0000
D, [2014-12-29T21:26:37.042503 #3944] DEBUG -- : 
D, [2014-12-29T21:26:37.058103 #3944] DEBUG -- : 
I, [2014-12-29T21:26:37.120503 #3944]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2014-12-29 21:26:37 +0000
I, [2014-12-29T21:26:37.198503 #3944]  INFO -- : Processing by LineItemsController#create as JS
I, [2014-12-29T21:26:37.260903 #3944]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2014-12-29T21:26:37.322703 #3944] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 33]]
D, [2014-12-29T21:26:37.400704 #3944] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2014-12-29T21:26:37.494304 #3944] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 33]]
D, [2014-12-29T21:26:37.665904 #3944] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2014-12-29T21:26:37.712704 #3944] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2014-12-29T21:26:37.915504 #3944] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 33], ["created_at", Mon, 29 Dec 2014 21:26:37 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:84fe388,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Mon, 29 Dec 2014 21:26:37 UTC +00:00]]
D, [2014-12-29T21:26:38.149505 #3944] DEBUG -- :   [1m[35m (202.8ms)[0m  commit transaction
D, [2014-12-29T21:26:38.243105 #3944] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 33]]
I, [2014-12-29T21:26:38.305505 #3944]  INFO -- :   Rendered line_items/_line_item.html.erb (0.0ms)
I, [2014-12-29T21:26:38.336705 #3944]  INFO -- :   Rendered carts/_cart.html.erb (140.4ms)
I, [2014-12-29T21:26:38.383505 #3944]  INFO -- :   Rendered line_items/create.js.erb (171.6ms)
I, [2014-12-29T21:26:38.430305 #3944]  INFO -- : Completed 200 OK in 1123ms (Views: 234.0ms | ActiveRecord: 218.4ms)
D, [2014-12-29T21:26:48.275839 #3944] DEBUG -- : 
D, [2014-12-29T21:26:48.300839 #3944] DEBUG -- : 
I, [2014-12-29T21:26:48.358340 #3944]  INFO -- : Started GET "/orders/new" for 127.0.0.1 at 2014-12-29 21:26:48 +0000
I, [2014-12-29T21:26:48.440841 #3944]  INFO -- : Processing by OrdersController#new as HTML
D, [2014-12-29T21:26:48.520842 #3944] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 33]]
D, [2014-12-29T21:26:48.613344 #3944] DEBUG -- :   [1m[36mLineItem Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 33]]
I, [2014-12-29T21:26:48.848347 #3944]  INFO -- :   Rendered orders/_form.html.erb (157.5ms)
I, [2014-12-29T21:26:48.905848 #3944]  INFO -- :   Rendered orders/new.html.erb within layouts/application (202.5ms)
D, [2014-12-29T21:26:49.008350 #3944] DEBUG -- :   [1m[35mCACHE (0.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 33]]
D, [2014-12-29T21:26:49.100851 #3944] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 33]]
D, [2014-12-29T21:26:49.200853 #3944] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2014-12-29T21:26:49.250854 #3944]  INFO -- :   Rendered line_items/_line_item.html.erb (97.5ms)
I, [2014-12-29T21:26:49.298354 #3944]  INFO -- :   Rendered carts/_cart.html.erb (240.0ms)
I, [2014-12-29T21:26:49.358355 #3944]  INFO -- : Completed 200 OK in 860ms (Views: 665.0ms | ActiveRecord: 2.5ms)
D, [2014-12-29T21:26:49.650860 #3944] DEBUG -- : 
D, [2014-12-29T21:26:49.673360 #3944] DEBUG -- : 
I, [2014-12-29T21:26:49.733361 #3944]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:49 +0000
D, [2014-12-29T21:26:49.775862 #3944] DEBUG -- : 
D, [2014-12-29T21:26:49.798362 #3944] DEBUG -- : 
I, [2014-12-29T21:26:49.860863 #3944]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:49 +0000
D, [2014-12-29T21:26:49.905864 #3944] DEBUG -- : 
D, [2014-12-29T21:26:49.930864 #3944] DEBUG -- : 
I, [2014-12-29T21:26:49.998365 #3944]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:49 +0000
D, [2014-12-29T21:26:50.040866 #3944] DEBUG -- : 
D, [2014-12-29T21:26:50.065866 #3944] DEBUG -- : 
I, [2014-12-29T21:26:50.128367 #3944]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:50 +0000
D, [2014-12-29T21:26:50.170868 #3944] DEBUG -- : 
D, [2014-12-29T21:26:50.193368 #3944] DEBUG -- : 
I, [2014-12-29T21:26:50.270869 #3944]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:50 +0000
D, [2014-12-29T21:26:50.313370 #3944] DEBUG -- : 
D, [2014-12-29T21:26:50.338370 #3944] DEBUG -- : 
I, [2014-12-29T21:26:50.403371 #3944]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:50 +0000
D, [2014-12-29T21:26:50.448372 #3944] DEBUG -- : 
D, [2014-12-29T21:26:50.473372 #3944] DEBUG -- : 
I, [2014-12-29T21:26:50.540873 #3944]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:50 +0000
D, [2014-12-29T21:26:50.583374 #3944] DEBUG -- : 
D, [2014-12-29T21:26:50.605874 #3944] DEBUG -- : 
I, [2014-12-29T21:26:50.668375 #3944]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:50 +0000
D, [2014-12-29T21:26:50.715876 #3944] DEBUG -- : 
D, [2014-12-29T21:26:50.743376 #3944] DEBUG -- : 
I, [2014-12-29T21:26:50.810878 #3944]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:50 +0000
D, [2014-12-29T21:26:50.855878 #3944] DEBUG -- : 
D, [2014-12-29T21:26:50.878379 #3944] DEBUG -- : 
I, [2014-12-29T21:26:50.940879 #3944]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:50 +0000
D, [2014-12-29T21:26:50.983380 #3944] DEBUG -- : 
D, [2014-12-29T21:26:51.005880 #3944] DEBUG -- : 
I, [2014-12-29T21:26:51.068381 #3944]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-29 21:26:51 +0000
D, [2014-12-29T21:26:51.115882 #3944] DEBUG -- : 
D, [2014-12-29T21:26:51.140883 #3944] DEBUG -- : 
I, [2014-12-29T21:26:51.203384 #3944]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:51 +0000
D, [2014-12-29T21:26:51.243384 #3944] DEBUG -- : 
D, [2014-12-29T21:26:51.263384 #3944] DEBUG -- : 
I, [2014-12-29T21:26:51.330885 #3944]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:51 +0000
D, [2014-12-29T21:26:51.375886 #3944] DEBUG -- : 
D, [2014-12-29T21:26:51.398387 #3944] DEBUG -- : 
I, [2014-12-29T21:26:51.465888 #3944]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:51 +0000
D, [2014-12-29T21:26:51.513388 #3944] DEBUG -- : 
D, [2014-12-29T21:26:51.538389 #3944] DEBUG -- : 
I, [2014-12-29T21:26:51.608390 #3944]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:51 +0000
D, [2014-12-29T21:26:51.653390 #3944] DEBUG -- : 
D, [2014-12-29T21:26:51.678391 #3944] DEBUG -- : 
I, [2014-12-29T21:26:51.740892 #3944]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:51 +0000
D, [2014-12-29T21:26:51.780892 #3944] DEBUG -- : 
D, [2014-12-29T21:26:51.803393 #3944] DEBUG -- : 
I, [2014-12-29T21:26:51.863394 #3944]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:51 +0000
D, [2014-12-29T21:26:51.903394 #3944] DEBUG -- : 
D, [2014-12-29T21:26:51.928395 #3944] DEBUG -- : 
I, [2014-12-29T21:26:51.990896 #3944]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:51 +0000
D, [2014-12-29T21:26:52.045896 #3944] DEBUG -- : 
D, [2014-12-29T21:26:52.070897 #3944] DEBUG -- : 
I, [2014-12-29T21:26:52.135898 #3944]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:52 +0000
D, [2014-12-29T21:26:52.178398 #3944] DEBUG -- : 
D, [2014-12-29T21:26:52.200899 #3944] DEBUG -- : 
I, [2014-12-29T21:26:52.260900 #3944]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:52 +0000
D, [2014-12-29T21:26:52.305900 #3944] DEBUG -- : 
D, [2014-12-29T21:26:52.333401 #3944] DEBUG -- : 
I, [2014-12-29T21:26:52.400902 #3944]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:52 +0000
D, [2014-12-29T21:26:52.443403 #3944] DEBUG -- : 
D, [2014-12-29T21:26:52.465903 #3944] DEBUG -- : 
I, [2014-12-29T21:26:52.528404 #3944]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:52 +0000
D, [2014-12-29T21:26:52.573405 #3944] DEBUG -- : 
D, [2014-12-29T21:26:52.595905 #3944] DEBUG -- : 
I, [2014-12-29T21:26:52.658406 #3944]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:52 +0000
D, [2014-12-29T21:26:52.703406 #3944] DEBUG -- : 
D, [2014-12-29T21:26:52.728407 #3944] DEBUG -- : 
I, [2014-12-29T21:26:52.790908 #3944]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:52 +0000
D, [2014-12-29T21:26:52.835909 #3944] DEBUG -- : 
D, [2014-12-29T21:26:52.860909 #3944] DEBUG -- : 
I, [2014-12-29T21:26:52.925910 #3944]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:52 +0000
D, [2014-12-29T21:26:52.968411 #3944] DEBUG -- : 
D, [2014-12-29T21:26:52.988411 #3944] DEBUG -- : 
I, [2014-12-29T21:26:53.048412 #3944]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-29 21:26:52 +0000
D, [2014-12-29T21:26:53.098413 #3944] DEBUG -- : 
D, [2014-12-29T21:26:53.123413 #3944] DEBUG -- : 
I, [2014-12-29T21:26:53.185914 #3944]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-29 21:26:53 +0000
D, [2014-12-29T21:27:12.754368 #3944] DEBUG -- : 
D, [2014-12-29T21:27:12.781869 #3944] DEBUG -- : 
I, [2014-12-29T21:27:12.839370 #3944]  INFO -- : Started POST "/orders" for 127.0.0.1 at 2014-12-29 21:27:12 +0000
I, [2014-12-29T21:27:12.914371 #3944]  INFO -- : Processing by OrdersController#create as HTML
I, [2014-12-29T21:27:13.064373 #3944]  INFO -- :   Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order"=>{"name"=>"s", "address"=>"s", "shipping_address1"=>"s", "email"=>"simon.king65@gmail.com", "pay_type"=>"Paypal"}, "commit"=>"Place Order"}
D, [2014-12-29T21:27:13.146874 #3944] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 33]]
I, [2014-12-29T21:27:13.179375 #3944]  INFO -- : log info
D, [2014-12-29T21:27:13.226876 #3944] DEBUG -- : Unpermitted parameters: shipping_address1
D, [2014-12-29T21:27:13.321877 #3944] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 33]]
I, [2014-12-29T21:27:13.374378 #3944]  INFO -- : just about to payment_method and save
I, [2014-12-29T21:27:13.519380 #3944]  INFO -- : #<Order id: nil, name: "s", address: "s", email: "simon.king65@gmail.com", pay_type: "Paypal", created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2014-12-29T21:27:13.566881 #3944] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2014-12-29T21:27:13.776884 #3944] DEBUG -- :   [1m[35mSQL (5.0ms)[0m  INSERT INTO "orders" ("address", "created_at", "email", "name", "pay_type", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "s"], ["created_at", Mon, 29 Dec 2014 21:27:13 UTC +00:00], ["email", "simon.king65@gmail.com"], ["name", "s"], ["pay_type", "Paypal"], ["updated_at", Mon, 29 Dec 2014 21:27:13 UTC +00:00]]
D, [2014-12-29T21:27:13.919386 #3944] DEBUG -- :   [1m[36mSQL (2.5ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 38[0m  [["cart_id", nil], ["order_id", 37], ["updated_at", Mon, 29 Dec 2014 21:27:13 UTC +00:00]]
I, [2014-12-29T21:27:13.959387 #3944]  INFO -- : about to @payment.create
D, [2014-12-29T21:27:14.104389 #3944] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2014-12-29T21:27:14.141890 #3944]  INFO -- : in order=
I, [2014-12-29T21:27:14.176890 #3944]  INFO -- : in payment.create
I, [2014-12-29T21:27:14.414394 #3944]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/37/confirm", "cancel_url"=>"http://localhost:3000/orders/37/cancel"}}
I, [2014-12-29T21:27:15.137905 #3944]  INFO -- : #<ActiveModel::Errors:0x0000000a07bf20 @base=#<Payment:0x0000000a0c5198 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000a0c4fb8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a0a62e8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a0a6220 @error=nil, @total="19.99", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a0a5f00 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a0a57a8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000a0a4dd0 @error=nil, @return_url="http://localhost:3000/orders/37/confirm", @cancel_url="http://localhost:3000/orders/37/cancel">, @logger=#<Logger:0x00000005a598f8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005a59970 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005a5abb8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005a5aeb0 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005a5b1a8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000a07bf20 ...>>, @messages={}>
I, [2014-12-29T21:27:15.175405 #3944]  INFO -- : got past invalid
I, [2014-12-29T21:27:15.312908 #3944]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/oauth2/token
D, [2014-12-29T21:32:27.870577 #3944] DEBUG -- :   [1m[36m (125.0ms)[0m  [1mcommit transaction[0m
I, [2014-12-29T21:32:27.918078 #3944]  INFO -- : Completed   in 314806ms
D, [2014-12-29T21:34:00.397073 #17280] DEBUG -- : 
D, [2014-12-29T21:34:00.414573 #17280] DEBUG -- : 
I, [2014-12-29T21:34:00.462074 #17280]  INFO -- : Started GET "/" for 127.0.0.1 at 2014-12-29 21:34:00 +0000
D, [2014-12-29T21:34:01.427089 #17280] DEBUG -- :   [1m[36mActiveRecord::SchemaMigration Load (2.5ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
I, [2014-12-29T21:34:01.642092 #17280]  INFO -- : Processing by StoreController#index as HTML
D, [2014-12-29T21:34:01.784594 #17280] DEBUG -- :   [1m[35mCart Load (12.5ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 33]]
D, [2014-12-29T21:34:01.957097 #17280] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2014-12-29T21:34:02.077099 #17280]  INFO -- : Cache digest for store/index.html: a93d4e2e981ab3dfce98a095c3b6c059
I, [2014-12-29T21:34:02.142100 #17280]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (2.5ms)
I, [2014-12-29T21:34:02.189600 #17280]  INFO -- :   Rendered store/index.html.erb within layouts/application (262.5ms)
D, [2014-12-29T21:34:02.844610 #17280] DEBUG -- :   [1m[35mLineItem Exists (0.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 33]]
D, [2014-12-29T21:34:02.934612 #17280] DEBUG -- :   [1m[36mLineItem Load (2.5ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 33]]
I, [2014-12-29T21:34:02.967112 #17280]  INFO -- :   Rendered collection (0.0ms)
I, [2014-12-29T21:34:03.024613 #17280]  INFO -- :   Rendered carts/_cart.html.erb (130.0ms)
I, [2014-12-29T21:34:03.072114 #17280]  INFO -- : Completed 200 OK in 1383ms (Views: 1190.0ms | ActiveRecord: 20.0ms)
D, [2014-12-29T21:34:03.327118 #17280] DEBUG -- : 
D, [2014-12-29T21:34:03.347118 #17280] DEBUG -- : 
I, [2014-12-29T21:34:03.407119 #17280]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-29 21:34:03 +0000
D, [2014-12-29T21:34:03.449620 #17280] DEBUG -- : 
D, [2014-12-29T21:34:03.467120 #17280] DEBUG -- : 
I, [2014-12-29T21:34:03.507121 #17280]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-29 21:34:03 +0000
D, [2014-12-29T21:34:03.547121 #17280] DEBUG -- : 
D, [2014-12-29T21:34:03.562121 #17280] DEBUG -- : 
I, [2014-12-29T21:34:03.602122 #17280]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-29 21:34:03 +0000
D, [2014-12-29T21:34:03.642123 #17280] DEBUG -- : 
D, [2014-12-29T21:34:03.659623 #17280] DEBUG -- : 
I, [2014-12-29T21:34:03.704624 #17280]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-29 21:34:03 +0000
D, [2014-12-29T21:34:03.744624 #17280] DEBUG -- : 
D, [2014-12-29T21:34:03.759624 #17280] DEBUG -- : 
I, [2014-12-29T21:34:03.802125 #17280]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-29 21:34:03 +0000
D, [2014-12-29T21:34:03.842126 #17280] DEBUG -- : 
D, [2014-12-29T21:34:03.859626 #17280] DEBUG -- : 
I, [2014-12-29T21:34:03.902127 #17280]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-29 21:34:03 +0000
D, [2014-12-29T21:34:03.939627 #17280] DEBUG -- : 
D, [2014-12-29T21:34:03.957127 #17280] DEBUG -- : 
I, [2014-12-29T21:34:04.004628 #17280]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-29 21:34:03 +0000
D, [2014-12-29T21:34:04.047129 #17280] DEBUG -- : 
D, [2014-12-29T21:34:04.062129 #17280] DEBUG -- : 
I, [2014-12-29T21:34:04.107130 #17280]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-29 21:34:04 +0000
D, [2014-12-29T21:34:04.149630 #17280] DEBUG -- : 
D, [2014-12-29T21:34:04.167131 #17280] DEBUG -- : 
I, [2014-12-29T21:34:04.212131 #17280]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-29 21:34:04 +0000
D, [2014-12-29T21:34:04.254632 #17280] DEBUG -- : 
D, [2014-12-29T21:34:04.274632 #17280] DEBUG -- : 
I, [2014-12-29T21:34:04.322133 #17280]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-29 21:34:04 +0000
D, [2014-12-29T21:34:04.362134 #17280] DEBUG -- : 
D, [2014-12-29T21:34:04.387134 #17280] DEBUG -- : 
I, [2014-12-29T21:34:04.454635 #17280]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-29 21:34:04 +0000
D, [2014-12-29T21:34:04.544636 #17280] DEBUG -- : 
D, [2014-12-29T21:34:04.569637 #17280] DEBUG -- : 
I, [2014-12-29T21:34:04.629638 #17280]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-29 21:34:04 +0000
D, [2014-12-29T21:34:04.684639 #17280] DEBUG -- : 
D, [2014-12-29T21:34:04.702139 #17280] DEBUG -- : 
I, [2014-12-29T21:34:04.759640 #17280]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-29 21:34:04 +0000
D, [2014-12-29T21:34:04.817141 #17280] DEBUG -- : 
D, [2014-12-29T21:34:04.839641 #17280] DEBUG -- : 
I, [2014-12-29T21:34:04.882142 #17280]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-29 21:34:04 +0000
D, [2014-12-29T21:34:04.944643 #17280] DEBUG -- : 
D, [2014-12-29T21:34:04.969643 #17280] DEBUG -- : 
I, [2014-12-29T21:34:05.028144 #17280]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-29 21:34:04 +0000
D, [2014-12-29T21:34:05.083145 #17280] DEBUG -- : 
D, [2014-12-29T21:34:05.108145 #17280] DEBUG -- : 
I, [2014-12-29T21:34:05.173146 #17280]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-29 21:34:05 +0000
D, [2014-12-29T21:34:05.228147 #17280] DEBUG -- : 
D, [2014-12-29T21:34:05.250647 #17280] DEBUG -- : 
I, [2014-12-29T21:34:05.315648 #17280]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-29 21:34:05 +0000
D, [2014-12-29T21:34:05.368149 #17280] DEBUG -- : 
D, [2014-12-29T21:34:05.395650 #17280] DEBUG -- : 
I, [2014-12-29T21:34:05.463151 #17280]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-29 21:34:05 +0000
D, [2014-12-29T21:34:05.513151 #17280] DEBUG -- : 
D, [2014-12-29T21:34:05.538152 #17280] DEBUG -- : 
I, [2014-12-29T21:34:05.598153 #17280]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-29 21:34:05 +0000
D, [2014-12-29T21:34:05.645653 #17280] DEBUG -- : 
D, [2014-12-29T21:34:05.668154 #17280] DEBUG -- : 
I, [2014-12-29T21:34:05.730655 #17280]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-29 21:34:05 +0000
D, [2014-12-29T21:34:05.778155 #17280] DEBUG -- : 
D, [2014-12-29T21:34:05.803156 #17280] DEBUG -- : 
I, [2014-12-29T21:34:05.860657 #17280]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-29 21:34:05 +0000
D, [2014-12-29T21:34:05.910657 #17280] DEBUG -- : 
D, [2014-12-29T21:34:05.935658 #17280] DEBUG -- : 
I, [2014-12-29T21:34:05.998159 #17280]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-29 21:34:05 +0000
D, [2014-12-29T21:34:06.125661 #17280] DEBUG -- : 
D, [2014-12-29T21:34:06.153161 #17280] DEBUG -- : 
I, [2014-12-29T21:34:06.223162 #17280]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-29 21:34:06 +0000
D, [2014-12-29T21:34:06.280663 #17280] DEBUG -- : 
D, [2014-12-29T21:34:06.305663 #17280] DEBUG -- : 
I, [2014-12-29T21:34:06.373164 #17280]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-29 21:34:06 +0000
D, [2014-12-29T21:34:06.425665 #17280] DEBUG -- : 
D, [2014-12-29T21:34:06.450666 #17280] DEBUG -- : 
I, [2014-12-29T21:34:06.508167 #17280]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-29 21:34:06 +0000
D, [2014-12-29T21:34:06.560667 #17280] DEBUG -- : 
D, [2014-12-29T21:34:06.583168 #17280] DEBUG -- : 
I, [2014-12-29T21:34:06.648169 #17280]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-29 21:34:06 +0000
D, [2014-12-29T21:34:06.748170 #17280] DEBUG -- : 
D, [2014-12-29T21:34:06.775671 #17280] DEBUG -- : 
I, [2014-12-29T21:34:06.825671 #17280]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-29 21:34:06 +0000
D, [2014-12-29T21:34:06.873172 #17280] DEBUG -- : 
D, [2014-12-29T21:34:06.893172 #17280] DEBUG -- : 
I, [2014-12-29T21:34:06.950673 #17280]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2014-12-29 21:34:06 +0000
D, [2014-12-29T21:34:07.000674 #17280] DEBUG -- : 
D, [2014-12-29T21:34:07.025674 #17280] DEBUG -- : 
I, [2014-12-29T21:34:07.088175 #17280]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2014-12-29 21:34:07 +0000
D, [2014-12-29T21:43:45.295077 #17280] DEBUG -- : 
D, [2014-12-29T21:43:45.326277 #17280] DEBUG -- : 
I, [2014-12-29T21:43:45.357477 #17280]  INFO -- : Started GET "/" for 127.0.0.1 at 2014-12-29 21:43:45 +0000
I, [2014-12-29T21:43:45.435477 #17280]  INFO -- : Processing by StoreController#index as HTML
D, [2014-12-29T21:43:45.497877 #17280] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 33]]
D, [2014-12-29T21:43:45.575877 #17280] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2014-12-29T21:43:45.622677 #17280]  INFO -- : Cache digest for store/index.xml: a93d4e2e981ab3dfce98a095c3b6c059
I, [2014-12-29T21:43:45.685077 #17280]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (0.0ms)
I, [2014-12-29T21:43:45.731877 #17280]  INFO -- :   Rendered store/index.html.erb within layouts/application (187.2ms)
D, [2014-12-29T21:43:45.825478 #17280] DEBUG -- :   [1m[35mLineItem Exists (0.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 33]]
D, [2014-12-29T21:43:45.903478 #17280] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 33]]
I, [2014-12-29T21:43:45.950278 #17280]  INFO -- :   Rendered collection (0.0ms)
I, [2014-12-29T21:43:45.981478 #17280]  INFO -- :   Rendered carts/_cart.html.erb (109.2ms)
I, [2014-12-29T21:43:46.028278 #17280]  INFO -- : Completed 200 OK in 546ms (Views: 483.6ms | ActiveRecord: 0.0ms)
D, [2014-12-29T21:43:54.755896 #17280] DEBUG -- : 
D, [2014-12-29T21:43:54.765896 #17280] DEBUG -- : 
I, [2014-12-29T21:43:54.828296 #17280]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2014-12-29 21:43:54 +0000
I, [2014-12-29T21:43:54.906296 #17280]  INFO -- : Processing by LineItemsController#create as JS
I, [2014-12-29T21:43:54.968697 #17280]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2014-12-29T21:43:55.031097 #17280] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 33]]
D, [2014-12-29T21:43:55.093497 #17280] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2014-12-29T21:43:55.202697 #17280] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 33]]
D, [2014-12-29T21:43:55.358697 #17280] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2014-12-29T21:43:55.389897 #17280] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2014-12-29T21:43:55.592698 #17280] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 33], ["created_at", Mon, 29 Dec 2014 21:43:55 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:822a9b8,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Mon, 29 Dec 2014 21:43:55 UTC +00:00]]
D, [2014-12-29T21:43:55.826698 #17280] DEBUG -- :   [1m[35m (202.8ms)[0m  commit transaction
D, [2014-12-29T21:43:55.904698 #17280] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 33]]
I, [2014-12-29T21:43:55.951498 #17280]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2014-12-29T21:43:55.982698 #17280]  INFO -- :   Rendered carts/_cart.html.erb (109.2ms)
I, [2014-12-29T21:43:56.029498 #17280]  INFO -- :   Rendered line_items/create.js.erb (156.0ms)
I, [2014-12-29T21:43:56.076298 #17280]  INFO -- : Completed 200 OK in 1061ms (Views: 202.8ms | ActiveRecord: 218.4ms)
D, [2014-12-29T21:44:14.288446 #17280] DEBUG -- : 
D, [2014-12-29T21:44:14.308447 #17280] DEBUG -- : 
I, [2014-12-29T21:44:14.353447 #17280]  INFO -- : Started GET "/orders/new" for 127.0.0.1 at 2014-12-29 21:44:14 +0000
I, [2014-12-29T21:44:14.430949 #17280]  INFO -- : Processing by OrdersController#new as HTML
D, [2014-12-29T21:44:14.498450 #17280] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 33]]
D, [2014-12-29T21:44:14.570951 #17280] DEBUG -- :   [1m[36mLineItem Exists (2.5ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 33]]
I, [2014-12-29T21:44:14.813454 #17280]  INFO -- :   Rendered orders/_form.html.erb (160.0ms)
I, [2014-12-29T21:44:14.863455 #17280]  INFO -- :   Rendered orders/new.html.erb within layouts/application (205.0ms)
D, [2014-12-29T21:44:14.953457 #17280] DEBUG -- :   [1m[35mCACHE (0.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 33]]
D, [2014-12-29T21:44:15.025958 #17280] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 33]]
D, [2014-12-29T21:44:15.108459 #17280] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2014-12-29T21:44:15.150960 #17280]  INFO -- :   Rendered line_items/_line_item.html.erb (80.0ms)
I, [2014-12-29T21:44:15.190960 #17280]  INFO -- :   Rendered carts/_cart.html.erb (197.5ms)
I, [2014-12-29T21:44:15.233461 #17280]  INFO -- : Completed 200 OK in 763ms (Views: 597.5ms | ActiveRecord: 5.0ms)
D, [2014-12-29T21:44:15.535966 #17280] DEBUG -- : 
D, [2014-12-29T21:44:15.558466 #17280] DEBUG -- : 
I, [2014-12-29T21:44:15.588466 #17280]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-29 21:44:15 +0000
D, [2014-12-29T21:44:15.645967 #17280] DEBUG -- : 
D, [2014-12-29T21:44:15.665968 #17280] DEBUG -- : 
I, [2014-12-29T21:44:15.720968 #17280]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-29 21:44:15 +0000
D, [2014-12-29T21:44:15.775969 #17280] DEBUG -- : 
D, [2014-12-29T21:44:15.798470 #17280] DEBUG -- : 
I, [2014-12-29T21:44:15.850970 #17280]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-29 21:44:15 +0000
D, [2014-12-29T21:44:15.908471 #17280] DEBUG -- : 
D, [2014-12-29T21:44:15.933472 #17280] DEBUG -- : 
I, [2014-12-29T21:44:15.993473 #17280]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-29 21:44:15 +0000
D, [2014-12-29T21:44:16.035973 #17280] DEBUG -- : 
D, [2014-12-29T21:44:16.055973 #17280] DEBUG -- : 
I, [2014-12-29T21:44:16.108474 #17280]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-29 21:44:16 +0000
D, [2014-12-29T21:44:16.150975 #17280] DEBUG -- : 
D, [2014-12-29T21:44:16.173475 #17280] DEBUG -- : 
I, [2014-12-29T21:44:16.228476 #17280]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-29 21:44:16 +0000
D, [2014-12-29T21:44:16.270977 #17280] DEBUG -- : 
D, [2014-12-29T21:44:16.293477 #17280] DEBUG -- : 
I, [2014-12-29T21:44:16.348478 #17280]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-29 21:44:16 +0000
D, [2014-12-29T21:44:16.393479 #17280] DEBUG -- : 
D, [2014-12-29T21:44:16.413479 #17280] DEBUG -- : 
I, [2014-12-29T21:44:16.470980 #17280]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-29 21:44:16 +0000
D, [2014-12-29T21:44:16.508480 #17280] DEBUG -- : 
D, [2014-12-29T21:44:16.528481 #17280] DEBUG -- : 
I, [2014-12-29T21:44:16.583482 #17280]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-29 21:44:16 +0000
D, [2014-12-29T21:44:16.628482 #17280] DEBUG -- : 
D, [2014-12-29T21:44:16.648483 #17280] DEBUG -- : 
I, [2014-12-29T21:44:16.700983 #17280]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-29 21:44:16 +0000
D, [2014-12-29T21:44:16.743484 #17280] DEBUG -- : 
D, [2014-12-29T21:44:16.763484 #17280] DEBUG -- : 
I, [2014-12-29T21:44:16.810985 #17280]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-29 21:44:16 +0000
D, [2014-12-29T21:44:16.855986 #17280] DEBUG -- : 
D, [2014-12-29T21:44:16.875986 #17280] DEBUG -- : 
I, [2014-12-29T21:44:16.923487 #17280]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-29 21:44:16 +0000
D, [2014-12-29T21:44:16.975988 #17280] DEBUG -- : 
D, [2014-12-29T21:44:16.998488 #17280] DEBUG -- : 
I, [2014-12-29T21:44:17.050989 #17280]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-29 21:44:17 +0000
D, [2014-12-29T21:44:17.093489 #17280] DEBUG -- : 
D, [2014-12-29T21:44:17.113490 #17280] DEBUG -- : 
I, [2014-12-29T21:44:17.175991 #17280]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-29 21:44:17 +0000
D, [2014-12-29T21:44:17.215991 #17280] DEBUG -- : 
D, [2014-12-29T21:44:17.238492 #17280] DEBUG -- : 
I, [2014-12-29T21:44:17.288492 #17280]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-29 21:44:17 +0000
D, [2014-12-29T21:44:17.330993 #17280] DEBUG -- : 
D, [2014-12-29T21:44:17.350993 #17280] DEBUG -- : 
I, [2014-12-29T21:44:17.403494 #17280]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-29 21:44:17 +0000
D, [2014-12-29T21:44:17.445995 #17280] DEBUG -- : 
D, [2014-12-29T21:44:17.473495 #17280] DEBUG -- : 
I, [2014-12-29T21:44:17.525996 #17280]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-29 21:44:17 +0000
D, [2014-12-29T21:44:17.568497 #17280] DEBUG -- : 
D, [2014-12-29T21:44:17.588497 #17280] DEBUG -- : 
I, [2014-12-29T21:44:17.640998 #17280]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-29 21:44:17 +0000
D, [2014-12-29T21:44:17.683498 #17280] DEBUG -- : 
D, [2014-12-29T21:44:17.703499 #17280] DEBUG -- : 
I, [2014-12-29T21:44:17.756000 #17280]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-29 21:44:17 +0000
D, [2014-12-29T21:44:17.801000 #17280] DEBUG -- : 
D, [2014-12-29T21:44:17.823501 #17280] DEBUG -- : 
I, [2014-12-29T21:44:17.878501 #17280]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-29 21:44:17 +0000
D, [2014-12-29T21:44:17.921002 #17280] DEBUG -- : 
D, [2014-12-29T21:44:17.941002 #17280] DEBUG -- : 
I, [2014-12-29T21:44:17.991003 #17280]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-29 21:44:17 +0000
D, [2014-12-29T21:44:18.038504 #17280] DEBUG -- : 
D, [2014-12-29T21:44:18.058504 #17280] DEBUG -- : 
I, [2014-12-29T21:44:18.108505 #17280]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-29 21:44:18 +0000
D, [2014-12-29T21:44:18.151006 #17280] DEBUG -- : 
D, [2014-12-29T21:44:18.171006 #17280] DEBUG -- : 
I, [2014-12-29T21:44:18.223507 #17280]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-29 21:44:18 +0000
D, [2014-12-29T21:44:18.276007 #17280] DEBUG -- : 
D, [2014-12-29T21:44:18.293508 #17280] DEBUG -- : 
I, [2014-12-29T21:44:18.346009 #17280]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-29 21:44:18 +0000
D, [2014-12-29T21:44:18.388509 #17280] DEBUG -- : 
D, [2014-12-29T21:44:18.411010 #17280] DEBUG -- : 
I, [2014-12-29T21:44:18.463510 #17280]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-29 21:44:18 +0000
D, [2014-12-29T21:44:18.511011 #17280] DEBUG -- : 
D, [2014-12-29T21:44:18.533511 #17280] DEBUG -- : 
I, [2014-12-29T21:44:18.588512 #17280]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-29 21:44:18 +0000
D, [2014-12-29T21:44:18.633513 #17280] DEBUG -- : 
D, [2014-12-29T21:44:18.648513 #17280] DEBUG -- : 
I, [2014-12-29T21:44:18.693514 #17280]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-29 21:44:18 +0000
D, [2014-12-29T21:46:29.720636 #17280] DEBUG -- : 
D, [2014-12-29T21:46:29.740636 #17280] DEBUG -- : 
I, [2014-12-29T21:46:29.788137 #17280]  INFO -- : Started POST "/orders" for 127.0.0.1 at 2014-12-29 21:46:29 +0000
I, [2014-12-29T21:46:29.860638 #17280]  INFO -- : Processing by OrdersController#create as HTML
I, [2014-12-29T21:46:30.015640 #17280]  INFO -- :   Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order"=>{"name"=>"s", "address"=>"s", "shipping_address1"=>"simon.king65@gmail.com", "email"=>"simon.king65@gmail.com", "pay_type"=>"Paypal"}, "commit"=>"Place Order"}
D, [2014-12-29T21:46:30.093142 #17280] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 33]]
I, [2014-12-29T21:46:30.123142 #17280]  INFO -- : log info
D, [2014-12-29T21:46:30.170643 #17280] DEBUG -- : Unpermitted parameters: shipping_address1
D, [2014-12-29T21:46:30.258144 #17280] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 33]]
I, [2014-12-29T21:46:30.308145 #17280]  INFO -- : just about to payment_method and save
I, [2014-12-29T21:46:30.445647 #17280]  INFO -- : #<Order id: nil, name: "s", address: "s", email: "simon.king65@gmail.com", pay_type: "Paypal", created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2014-12-29T21:46:30.490648 #17280] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2014-12-29T21:46:30.688151 #17280] DEBUG -- :   [1m[35mSQL (5.0ms)[0m  INSERT INTO "orders" ("address", "created_at", "email", "name", "pay_type", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "s"], ["created_at", Mon, 29 Dec 2014 21:46:30 UTC +00:00], ["email", "simon.king65@gmail.com"], ["name", "s"], ["pay_type", "Paypal"], ["updated_at", Mon, 29 Dec 2014 21:46:30 UTC +00:00]]
D, [2014-12-29T21:46:30.818153 #17280] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 39[0m  [["cart_id", nil], ["order_id", 38], ["updated_at", Mon, 29 Dec 2014 21:46:30 UTC +00:00]]
I, [2014-12-29T21:46:30.853153 #17280]  INFO -- : about to @payment.create
D, [2014-12-29T21:46:30.958155 #17280] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2014-12-29T21:46:30.993155 #17280]  INFO -- : in order=
I, [2014-12-29T21:46:31.028156 #17280]  INFO -- : in payment.create
I, [2014-12-29T21:46:31.253159 #17280]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/38/confirm", "cancel_url"=>"http://localhost:3000/orders/38/cancel"}}
I, [2014-12-29T21:46:31.955670 #17280]  INFO -- : #<ActiveModel::Errors:0x00000009d75218 @base=#<Payment:0x00000009db7f50 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009db7d70 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009d7fec0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009d7fdf8 @error=nil, @total="19.99", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009d7fb28 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009d7f880 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009d7ef48 @error=nil, @return_url="http://localhost:3000/orders/38/confirm", @cancel_url="http://localhost:3000/orders/38/cancel">, @logger=#<Logger:0x000000059ff150 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059ff128 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059ff0d8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059ff038 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059fefc0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009d75218 ...>>, @messages={}>
I, [2014-12-29T21:46:31.983171 #17280]  INFO -- : got past invalid
I, [2014-12-29T21:46:32.128173 #17280]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/oauth2/token
I, [2014-12-29T21:46:34.163204 #17280]  INFO -- : Response[200]: OK, Duration: 1.998s
I, [2014-12-29T21:46:34.205705 #17280]  INFO -- : PayPal-Request-Id: d9f98804-5661-47a9-b36d-bdc19b632e71
I, [2014-12-29T21:46:34.255705 #17280]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2014-12-29T21:46:35.593226 #17280]  INFO -- : Response[201]: Created, Duration: 1.300s
I, [2014-12-29T21:46:35.623226 #17280]  INFO -- : back from super
I, [2014-12-29T21:46:36.065733 #17280]  INFO -- : {"id"=>"PAY-5Y629031XN2609907KSQ4XPA", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99", "details"=>{"subtotal"=>"19.99"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/38/confirm", "cancel_url"=>"http://localhost:3000/orders/38/cancel"}, "create_time"=>"2014-12-29T21:46:36Z", "update_time"=>"2014-12-29T21:46:36Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-5Y629031XN2609907KSQ4XPA", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-06L57932RY7850430", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-5Y629031XN2609907KSQ4XPA/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2014-12-29T21:46:36.283236 #17280] DEBUG -- :   [1m[36mSQL (5.0ms)[0m  [1mUPDATE "orders" SET "name" = ?, "address" = ?, "email" = ?, "pay_type" = ?, "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ? WHERE "orders"."id" = 38[0m  [["name", "s"], ["address", "s"], ["email", "simon.king65@gmail.com"], ["pay_type", "Paypal"], ["created_at", Mon, 29 Dec 2014 21:46:30 UTC +00:00], ["updated_at", Mon, 29 Dec 2014 21:46:30 UTC +00:00], ["id", 38], ["payment_id", "PAY-5Y629031XN2609907KSQ4XPA"], ["state", "created"]]
I, [2014-12-29T21:46:36.313237 #17280]  INFO -- : @payment save just done
I, [2014-12-29T21:46:37.348253 #17280]  INFO -- : #<Payment:0x00000009db7f50 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000833abf0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x0000000833ab00 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x0000000833aa88 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000833a8d0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000833a858 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x0000000833a6c8 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000833a2b8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008339e08 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009d7ef48 @error=nil, @return_url="http://localhost:3000/orders/38/confirm", @cancel_url="http://localhost:3000/orders/38/cancel">, @logger=#<Logger:0x000000059ff150 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059ff128 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059ff0d8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059ff038 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059fefc0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009d75218 @base=#<Payment:0x00000009db7f50 ...>, @messages={}>, @request_id="d9f98804-5661-47a9-b36d-bdc19b632e71", @header={}, @id="PAY-5Y629031XN2609907KSQ4XPA", @create_time="2014-12-29T21:46:36Z", @update_time="2014-12-29T21:46:36Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000083397c8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5Y629031XN2609907KSQ4XPA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008339430 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-06L57932RY7850430", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000083391d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5Y629031XN2609907KSQ4XPA/execute", @rel="execute", @method="POST">]>
I, [2014-12-29T21:46:38.386769 #17280]  INFO -- : #<Payment:0x00000009db7f50 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000833abf0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x0000000833ab00 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x0000000833aa88 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000833a8d0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000833a858 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x0000000833a6c8 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000833a2b8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008339e08 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009d7ef48 @error=nil, @return_url="http://localhost:3000/orders/38/confirm", @cancel_url="http://localhost:3000/orders/38/cancel">, @logger=#<Logger:0x000000059ff150 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059ff128 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059ff0d8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059ff038 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059fefc0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009d75218 @base=#<Payment:0x00000009db7f50 ...>, @messages={}>, @request_id="d9f98804-5661-47a9-b36d-bdc19b632e71", @header={}, @id="PAY-5Y629031XN2609907KSQ4XPA", @create_time="2014-12-29T21:46:36Z", @update_time="2014-12-29T21:46:36Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000083397c8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5Y629031XN2609907KSQ4XPA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008339430 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-06L57932RY7850430", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000083391d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5Y629031XN2609907KSQ4XPA/execute", @rel="execute", @method="POST">]>
D, [2014-12-29T21:46:38.536771 #17280] DEBUG -- :   [1m[35m (117.5ms)[0m  commit transaction
I, [2014-12-29T21:46:38.564271 #17280]  INFO -- : about to approve url
I, [2014-12-29T21:46:39.666788 #17280]  INFO -- : #<Payment:0x00000009db7f50 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000833abf0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x0000000833ab00 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x0000000833aa88 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000833a8d0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000833a858 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x0000000833a6c8 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000833a2b8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008339e08 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009d7ef48 @error=nil, @return_url="http://localhost:3000/orders/38/confirm", @cancel_url="http://localhost:3000/orders/38/cancel">, @logger=#<Logger:0x000000059ff150 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059ff128 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059ff0d8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059ff038 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059fefc0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009d75218 @base=#<Payment:0x00000009db7f50 ...>, @messages={}>, @request_id="d9f98804-5661-47a9-b36d-bdc19b632e71", @header={}, @id="PAY-5Y629031XN2609907KSQ4XPA", @create_time="2014-12-29T21:46:36Z", @update_time="2014-12-29T21:46:36Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000083397c8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5Y629031XN2609907KSQ4XPA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008339430 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-06L57932RY7850430", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000083391d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5Y629031XN2609907KSQ4XPA/execute", @rel="execute", @method="POST">]>
I, [2014-12-29T21:46:40.901807 #17280]  INFO -- : #<Payment:0x00000009db7f50 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000833abf0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x0000000833ab00 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x0000000833aa88 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000833a8d0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000833a858 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x0000000833a6c8 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000833a2b8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008339e08 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009d7ef48 @error=nil, @return_url="http://localhost:3000/orders/38/confirm", @cancel_url="http://localhost:3000/orders/38/cancel">, @logger=#<Logger:0x000000059ff150 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059ff128 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059ff0d8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059ff038 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059fefc0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009d75218 @base=#<Payment:0x00000009db7f50 ...>, @messages={}>, @request_id="d9f98804-5661-47a9-b36d-bdc19b632e71", @header={}, @id="PAY-5Y629031XN2609907KSQ4XPA", @create_time="2014-12-29T21:46:36Z", @update_time="2014-12-29T21:46:36Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000083397c8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5Y629031XN2609907KSQ4XPA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008339430 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-06L57932RY7850430", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000083391d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5Y629031XN2609907KSQ4XPA/execute", @rel="execute", @method="POST">]>
I, [2014-12-29T21:46:40.974308 #17280]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-06L57932RY7850430
I, [2014-12-29T21:46:42.174327 #17280]  INFO -- : #<Payment:0x00000009db7f50 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000833abf0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x0000000833ab00 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x0000000833aa88 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000833a8d0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000833a858 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x0000000833a6c8 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000833a2b8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008339e08 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009d7ef48 @error=nil, @return_url="http://localhost:3000/orders/38/confirm", @cancel_url="http://localhost:3000/orders/38/cancel">, @logger=#<Logger:0x000000059ff150 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059ff128 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059ff0d8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059ff038 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059fefc0>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009d75218 @base=#<Payment:0x00000009db7f50 ...>, @messages={}>, @request_id="d9f98804-5661-47a9-b36d-bdc19b632e71", @header={}, @id="PAY-5Y629031XN2609907KSQ4XPA", @create_time="2014-12-29T21:46:36Z", @update_time="2014-12-29T21:46:36Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000083397c8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5Y629031XN2609907KSQ4XPA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008339430 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-06L57932RY7850430", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000083391d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5Y629031XN2609907KSQ4XPA/execute", @rel="execute", @method="POST">]>
I, [2014-12-29T21:46:42.239328 #17280]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-06L57932RY7850430
I, [2014-12-29T21:46:42.279328 #17280]  INFO -- : Completed 302 Found in 12224ms (ActiveRecord: 127.5ms)
D, [2014-12-29T21:47:50.888380 #17280] DEBUG -- : 
D, [2014-12-29T21:47:50.910880 #17280] DEBUG -- : 
I, [2014-12-29T21:47:51.010882 #17280]  INFO -- : Started GET "/orders/38/confirm?paymentId=PAY-5Y629031XN2609907KSQ4XPA&token=EC-06L57932RY7850430&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2014-12-29 21:47:50 +0000
I, [2014-12-29T21:47:51.078383 #17280]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2014-12-29T21:47:51.165884 #17280]  INFO -- :   Parameters: {"paymentId"=>"PAY-5Y629031XN2609907KSQ4XPA", "token"=>"EC-06L57932RY7850430", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"38"}
D, [2014-12-29T21:47:51.250885 #17280] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2014-12-29T21:47:51.365887 #17280] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2014-12-29T21:47:51.440888 #17280] DEBUG -- :   [1m[36mOrder Load (2.5ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "38"]]
I, [2014-12-29T21:47:59.090505 #17280]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-5Y629031XN2609907KSQ4XPA
I, [2014-12-29T21:48:00.383025 #17280]  INFO -- : Response[200]: OK, Duration: 1.258s
D, [2014-12-29T21:48:03.066566 #17280] DEBUG -- :   [1m[35m (2.5ms)[0m  begin transaction
D, [2014-12-29T21:48:03.211569 #17280] DEBUG -- :   [1m[36mSQL (7.5ms)[0m  [1mUPDATE "orders" SET "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 38[0m  [["shipping_address1", "1 Main Terrace"], ["updated_at", Mon, 29 Dec 2014 21:48:03 UTC +00:00]]
D, [2014-12-29T21:48:03.414072 #17280] DEBUG -- :   [1m[35m (155.0ms)[0m  commit transaction
I, [2014-12-29T21:48:03.586574 #17280]  INFO -- :   Rendered orders/_form.html.erb (97.5ms)
I, [2014-12-29T21:48:03.659075 #17280]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (165.0ms)
I, [2014-12-29T21:48:03.841578 #17280]  INFO -- : Completed 200 OK in 12618ms (Views: 367.5ms | ActiveRecord: 170.0ms)
D, [2014-12-29T21:48:04.154083 #17280] DEBUG -- : 
D, [2014-12-29T21:48:04.171583 #17280] DEBUG -- : 
I, [2014-12-29T21:48:04.226584 #17280]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:04 +0000
D, [2014-12-29T21:48:04.321586 #17280] DEBUG -- : 
D, [2014-12-29T21:48:04.346586 #17280] DEBUG -- : 
I, [2014-12-29T21:48:04.411587 #17280]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:04 +0000
D, [2014-12-29T21:48:04.501588 #17280] DEBUG -- : 
D, [2014-12-29T21:48:04.524089 #17280] DEBUG -- : 
I, [2014-12-29T21:48:04.594090 #17280]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:04 +0000
D, [2014-12-29T21:48:04.666591 #17280] DEBUG -- : 
D, [2014-12-29T21:48:04.691591 #17280] DEBUG -- : 
I, [2014-12-29T21:48:04.759092 #17280]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:04 +0000
D, [2014-12-29T21:48:04.836594 #17280] DEBUG -- : 
D, [2014-12-29T21:48:04.864094 #17280] DEBUG -- : 
I, [2014-12-29T21:48:04.934095 #17280]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:04 +0000
D, [2014-12-29T21:48:05.006596 #17280] DEBUG -- : 
D, [2014-12-29T21:48:05.031597 #17280] DEBUG -- : 
I, [2014-12-29T21:48:05.101598 #17280]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:05 +0000
D, [2014-12-29T21:48:05.191599 #17280] DEBUG -- : 
D, [2014-12-29T21:48:05.216599 #17280] DEBUG -- : 
I, [2014-12-29T21:48:05.281600 #17280]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:05 +0000
D, [2014-12-29T21:48:05.351601 #17280] DEBUG -- : 
D, [2014-12-29T21:48:05.376602 #17280] DEBUG -- : 
I, [2014-12-29T21:48:05.434103 #17280]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:05 +0000
D, [2014-12-29T21:48:05.514104 #17280] DEBUG -- : 
D, [2014-12-29T21:48:05.539104 #17280] DEBUG -- : 
I, [2014-12-29T21:48:05.599105 #17280]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:05 +0000
D, [2014-12-29T21:48:05.671606 #17280] DEBUG -- : 
D, [2014-12-29T21:48:05.699107 #17280] DEBUG -- : 
I, [2014-12-29T21:48:05.766608 #17280]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:05 +0000
D, [2014-12-29T21:48:05.844109 #17280] DEBUG -- : 
D, [2014-12-29T21:48:05.869109 #17280] DEBUG -- : 
I, [2014-12-29T21:48:05.941610 #17280]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:05 +0000
D, [2014-12-29T21:48:06.019112 #17280] DEBUG -- : 
D, [2014-12-29T21:48:06.046612 #17280] DEBUG -- : 
I, [2014-12-29T21:48:06.114113 #17280]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:06 +0000
D, [2014-12-29T21:48:06.184114 #17280] DEBUG -- : 
D, [2014-12-29T21:48:06.204114 #17280] DEBUG -- : 
I, [2014-12-29T21:48:06.271616 #17280]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:06 +0000
D, [2014-12-29T21:48:06.344117 #17280] DEBUG -- : 
D, [2014-12-29T21:48:06.369117 #17280] DEBUG -- : 
I, [2014-12-29T21:48:06.439118 #17280]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:06 +0000
D, [2014-12-29T21:48:06.510119 #17280] DEBUG -- : 
D, [2014-12-29T21:48:06.532620 #17280] DEBUG -- : 
I, [2014-12-29T21:48:06.597621 #17280]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:06 +0000
D, [2014-12-29T21:48:06.667622 #17280] DEBUG -- : 
D, [2014-12-29T21:48:06.695122 #17280] DEBUG -- : 
I, [2014-12-29T21:48:06.762623 #17280]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:06 +0000
D, [2014-12-29T21:48:06.840124 #17280] DEBUG -- : 
D, [2014-12-29T21:48:06.860125 #17280] DEBUG -- : 
I, [2014-12-29T21:48:06.925126 #17280]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:06 +0000
D, [2014-12-29T21:48:06.997627 #17280] DEBUG -- : 
D, [2014-12-29T21:48:07.022627 #17280] DEBUG -- : 
I, [2014-12-29T21:48:07.090128 #17280]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:07 +0000
D, [2014-12-29T21:48:07.160129 #17280] DEBUG -- : 
D, [2014-12-29T21:48:07.185130 #17280] DEBUG -- : 
I, [2014-12-29T21:48:07.250131 #17280]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:07 +0000
D, [2014-12-29T21:48:07.322632 #17280] DEBUG -- : 
D, [2014-12-29T21:48:07.347632 #17280] DEBUG -- : 
I, [2014-12-29T21:48:07.410133 #17280]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:07 +0000
D, [2014-12-29T21:48:07.492634 #17280] DEBUG -- : 
D, [2014-12-29T21:48:07.520135 #17280] DEBUG -- : 
I, [2014-12-29T21:48:07.582636 #17280]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:07 +0000
D, [2014-12-29T21:48:07.662637 #17280] DEBUG -- : 
D, [2014-12-29T21:48:07.690137 #17280] DEBUG -- : 
I, [2014-12-29T21:48:07.757638 #17280]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:07 +0000
D, [2014-12-29T21:48:07.835139 #17280] DEBUG -- : 
D, [2014-12-29T21:48:07.862640 #17280] DEBUG -- : 
I, [2014-12-29T21:48:07.932641 #17280]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:07 +0000
D, [2014-12-29T21:48:08.000142 #17280] DEBUG -- : 
D, [2014-12-29T21:48:08.022642 #17280] DEBUG -- : 
I, [2014-12-29T21:48:08.075143 #17280]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:08 +0000
D, [2014-12-29T21:48:08.145144 #17280] DEBUG -- : 
D, [2014-12-29T21:48:08.165145 #17280] DEBUG -- : 
I, [2014-12-29T21:48:08.215145 #17280]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:08 +0000
D, [2014-12-29T21:48:08.285146 #17280] DEBUG -- : 
D, [2014-12-29T21:48:08.305147 #17280] DEBUG -- : 
I, [2014-12-29T21:48:08.357647 #17280]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:08 +0000
D, [2014-12-29T21:48:08.430149 #17280] DEBUG -- : 
D, [2014-12-29T21:48:08.447649 #17280] DEBUG -- : 
I, [2014-12-29T21:48:08.490150 #17280]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-29 21:48:08 +0000
D, [2014-12-29T21:48:08.577651 #17280] DEBUG -- : 
D, [2014-12-29T21:48:08.597651 #17280] DEBUG -- : 
I, [2014-12-29T21:48:08.652652 #17280]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2014-12-29 21:48:08 +0000
D, [2014-12-29T21:48:14.445172 #17280] DEBUG -- : 
D, [2014-12-29T21:48:14.467672 #17280] DEBUG -- : 
I, [2014-12-29T21:48:14.530173 #17280]  INFO -- : Started POST "/orders/38/execute/38/2VZ7YQDDDPPC4" for 127.0.0.1 at 2014-12-29 21:48:14 +0000
I, [2014-12-29T21:48:14.627675 #17280]  INFO -- : Processing by OrdersController#execute as HTML
I, [2014-12-29T21:48:14.705176 #17280]  INFO -- :   Parameters: {"authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order_id"=>"38", "payer_id"=>"2VZ7YQDDDPPC4"}
D, [2014-12-29T21:48:14.795177 #17280] DEBUG -- :   [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "38"]]
I, [2014-12-29T21:48:19.097743 #17280]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-5Y629031XN2609907KSQ4XPA
I, [2014-12-29T21:48:20.365263 #17280]  INFO -- : Response[200]: OK, Duration: 1.233s
I, [2014-12-29T21:48:20.430264 #17280]  INFO -- : PayPal-Request-Id: a0fda986-5a8e-425a-92a4-bdb3d8931b3a
I, [2014-12-29T21:48:20.495265 #17280]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-5Y629031XN2609907KSQ4XPA/execute
I, [2014-12-29T21:48:23.528811 #17280]  INFO -- : Response[200]: OK, Duration: 2.999s
D, [2014-12-29T21:48:23.586312 #17280] DEBUG -- :   [1m[35m (2.5ms)[0m  begin transaction
D, [2014-12-29T21:48:23.698814 #17280] DEBUG -- :   [1m[36mSQL (7.5ms)[0m  [1mUPDATE "orders" SET "state" = ?, "updated_at" = ? WHERE "orders"."id" = 38[0m  [["state", "approved"], ["updated_at", Mon, 29 Dec 2014 21:48:23 UTC +00:00]]
D, [2014-12-29T21:48:23.856316 #17280] DEBUG -- :   [1m[35m (122.5ms)[0m  commit transaction
D, [2014-12-29T21:48:23.928817 #17280] DEBUG -- :   [1m[36mCart Load (2.5ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 33]]
D, [2014-12-29T21:48:23.966318 #17280] DEBUG -- :   [1m[35m (2.5ms)[0m  begin transaction
D, [2014-12-29T21:48:24.051319 #17280] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 33]]
D, [2014-12-29T21:48:24.111320 #17280] DEBUG -- :   [1m[35mSQL (5.0ms)[0m  DELETE FROM "carts" WHERE "carts"."id" = ?  [["id", 33]]
D, [2014-12-29T21:48:24.263822 #17280] DEBUG -- :   [1m[36m (117.5ms)[0m  [1mcommit transaction[0m
I, [2014-12-29T21:48:29.682405 #17280]  INFO -- :   Rendered order_notifier/received.html.erb (7.5ms)
D, [2014-12-29T21:48:29.802407 #17280] DEBUG -- :   [1m[35mLineItem Load (2.5ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 38]]
D, [2014-12-29T21:48:29.932409 #17280] DEBUG -- :   [1m[36mProduct Load (5.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2014-12-29T21:48:29.987410 #17280]  INFO -- :   Rendered line_items/_line_item.text.erb (120.0ms)
I, [2014-12-29T21:48:30.037411 #17280]  INFO -- :   Rendered order_notifier/received.text.erb (292.5ms)
I, [2014-12-29T21:48:31.334931 #17280]  INFO -- : 
Sent mail to simon.king65@gmail.com (1005.0ms)
D, [2014-12-29T21:48:31.774937 #17280] DEBUG -- : Date: Mon, 29 Dec 2014 21:48:30 +0000

From: Simon King <simon.king65@gmail.com>

To: simon.king65@gmail.com

Message-ID: <54a1cc2e65e89_43803fd270038560@Simon-PC.mail>

Subject: King Clothing Order Confirmation

Mime-Version: 1.0

Content-Type: multipart/alternative;

 boundary="--==_mimepart_54a1cc2e14bb0_43803fd270038464";

 charset=UTF-8

Content-Transfer-Encoding: 7bit





----==_mimepart_54a1cc2e14bb0_43803fd270038464

Content-Type: text/plain;

 charset=UTF-8

Content-Transfer-Encoding: 7bit



Dear s



Thank you for your recent order from King Clothing.



You ordered the following items:



 1 x Camo Print Tee

We'll send you a separate e-mail when your order ships.

----==_mimepart_54a1cc2e14bb0_43803fd270038464

Content-Type: text/html;

 charset=UTF-8

Content-Transfer-Encoding: 7bit



<h1>OrderNotifier#received</h1>



<p>

  , thank you for your order, we will email you again once your order has been despatched. We hope you enjoy wearing your King Clothing brand tee-shirt.

</p>



----==_mimepart_54a1cc2e14bb0_43803fd270038464--


I, [2014-12-29T21:48:31.824938 #17280]  INFO -- : Redirected to http://localhost:3000/
I, [2014-12-29T21:48:31.879939 #17280]  INFO -- : Completed 302 Found in 17122ms (ActiveRecord: 267.5ms)
D, [2014-12-29T21:48:31.969940 #17280] DEBUG -- : 
D, [2014-12-29T21:48:31.994941 #17280] DEBUG -- : 
I, [2014-12-29T21:48:32.047442 #17280]  INFO -- : Started GET "/" for 127.0.0.1 at 2014-12-29 21:48:31 +0000
I, [2014-12-29T21:48:32.162443 #17280]  INFO -- : Processing by StoreController#index as HTML
D, [2014-12-29T21:48:32.222444 #17280] DEBUG -- :   [1m[35m (2.5ms)[0m  begin transaction
D, [2014-12-29T21:48:32.372447 #17280] DEBUG -- :   [1m[36mSQL (10.0ms)[0m  [1mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Mon, 29 Dec 2014 21:48:32 UTC +00:00], ["updated_at", Mon, 29 Dec 2014 21:48:32 UTC +00:00]]
D, [2014-12-29T21:48:32.554949 #17280] DEBUG -- :   [1m[35m (135.0ms)[0m  commit transaction
D, [2014-12-29T21:48:32.669951 #17280] DEBUG -- :   [1m[36mProduct Load (2.5ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2014-12-29T21:48:32.754953 #17280]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (2.5ms)
I, [2014-12-29T21:48:32.809953 #17280]  INFO -- :   Rendered store/index.html.erb within layouts/application (175.0ms)
D, [2014-12-29T21:48:33.052457 #17280] DEBUG -- :   [1m[35mLineItem Exists (2.5ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 34]]
D, [2014-12-29T21:48:33.154959 #17280] DEBUG -- :   [1m[36mLineItem Load (2.5ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 34]]
I, [2014-12-29T21:48:33.199959 #17280]  INFO -- :   Rendered collection (0.0ms)
I, [2014-12-29T21:48:33.274960 #17280]  INFO -- :   Rendered carts/_cart.html.erb (165.0ms)
I, [2014-12-29T21:48:33.357462 #17280]  INFO -- : Completed 200 OK in 1138ms (Views: 730.0ms | ActiveRecord: 155.0ms)
D, [2014-12-29T21:48:33.575965 #17280] DEBUG -- : 
D, [2014-12-29T21:48:33.598465 #17280] DEBUG -- : 
I, [2014-12-29T21:48:33.658466 #17280]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:33 +0000
D, [2014-12-29T21:48:33.783468 #17280] DEBUG -- : 
D, [2014-12-29T21:48:33.805969 #17280] DEBUG -- : 
I, [2014-12-29T21:48:33.870970 #17280]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:33 +0000
D, [2014-12-29T21:48:33.945971 #17280] DEBUG -- : 
D, [2014-12-29T21:48:33.970971 #17280] DEBUG -- : 
I, [2014-12-29T21:48:34.035972 #17280]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:33 +0000
D, [2014-12-29T21:48:34.108473 #17280] DEBUG -- : 
D, [2014-12-29T21:48:34.135974 #17280] DEBUG -- : 
I, [2014-12-29T21:48:34.203475 #17280]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:34 +0000
D, [2014-12-29T21:48:34.275976 #17280] DEBUG -- : 
D, [2014-12-29T21:48:34.303476 #17280] DEBUG -- : 
I, [2014-12-29T21:48:34.370977 #17280]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:34 +0000
D, [2014-12-29T21:48:34.448478 #17280] DEBUG -- : 
D, [2014-12-29T21:48:34.475979 #17280] DEBUG -- : 
I, [2014-12-29T21:48:34.548480 #17280]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:34 +0000
D, [2014-12-29T21:48:34.618481 #17280] DEBUG -- : 
D, [2014-12-29T21:48:34.640981 #17280] DEBUG -- : 
I, [2014-12-29T21:48:34.705982 #17280]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:34 +0000
D, [2014-12-29T21:48:34.783484 #17280] DEBUG -- : 
D, [2014-12-29T21:48:34.810984 #17280] DEBUG -- : 
I, [2014-12-29T21:48:34.873485 #17280]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:34 +0000
D, [2014-12-29T21:48:34.965986 #17280] DEBUG -- : 
D, [2014-12-29T21:48:34.985987 #17280] DEBUG -- : 
I, [2014-12-29T21:48:35.048488 #17280]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:34 +0000
D, [2014-12-29T21:48:35.120989 #17280] DEBUG -- : 
D, [2014-12-29T21:48:35.148489 #17280] DEBUG -- : 
I, [2014-12-29T21:48:35.213490 #17280]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:35 +0000
D, [2014-12-29T21:48:35.283491 #17280] DEBUG -- : 
D, [2014-12-29T21:48:35.308492 #17280] DEBUG -- : 
I, [2014-12-29T21:48:35.375993 #17280]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-29 21:48:35 +0000
D, [2014-12-29T21:48:35.455994 #17280] DEBUG -- : 
D, [2014-12-29T21:48:35.483494 #17280] DEBUG -- : 
I, [2014-12-29T21:48:35.553495 #17280]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:35 +0000
D, [2014-12-29T21:48:35.625997 #17280] DEBUG -- : 
D, [2014-12-29T21:48:35.648497 #17280] DEBUG -- : 
I, [2014-12-29T21:48:35.713498 #17280]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:35 +0000
D, [2014-12-29T21:48:35.790999 #17280] DEBUG -- : 
D, [2014-12-29T21:48:35.813499 #17280] DEBUG -- : 
I, [2014-12-29T21:48:35.886001 #17280]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:35 +0000
D, [2014-12-29T21:48:35.958502 #17280] DEBUG -- : 
D, [2014-12-29T21:48:35.983502 #17280] DEBUG -- : 
I, [2014-12-29T21:48:36.061003 #17280]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:35 +0000
D, [2014-12-29T21:48:36.133504 #17280] DEBUG -- : 
D, [2014-12-29T21:48:36.158505 #17280] DEBUG -- : 
I, [2014-12-29T21:48:36.221006 #17280]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:36 +0000
D, [2014-12-29T21:48:36.296007 #17280] DEBUG -- : 
D, [2014-12-29T21:48:36.316007 #17280] DEBUG -- : 
I, [2014-12-29T21:48:36.378508 #17280]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:36 +0000
D, [2014-12-29T21:48:36.458509 #17280] DEBUG -- : 
D, [2014-12-29T21:48:36.483510 #17280] DEBUG -- : 
I, [2014-12-29T21:48:36.551011 #17280]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:36 +0000
D, [2014-12-29T21:48:36.623512 #17280] DEBUG -- : 
D, [2014-12-29T21:48:36.648512 #17280] DEBUG -- : 
I, [2014-12-29T21:48:36.711013 #17280]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:36 +0000
D, [2014-12-29T21:48:36.788514 #17280] DEBUG -- : 
D, [2014-12-29T21:48:36.816015 #17280] DEBUG -- : 
I, [2014-12-29T21:48:36.878516 #17280]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:36 +0000
D, [2014-12-29T21:48:36.951017 #17280] DEBUG -- : 
D, [2014-12-29T21:48:36.976017 #17280] DEBUG -- : 
I, [2014-12-29T21:48:37.036018 #17280]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:36 +0000
D, [2014-12-29T21:48:37.118519 #17280] DEBUG -- : 
D, [2014-12-29T21:48:37.143520 #17280] DEBUG -- : 
I, [2014-12-29T21:48:37.203521 #17280]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:37 +0000
D, [2014-12-29T21:48:37.281022 #17280] DEBUG -- : 
D, [2014-12-29T21:48:37.306022 #17280] DEBUG -- : 
I, [2014-12-29T21:48:37.376023 #17280]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:37 +0000
D, [2014-12-29T21:48:37.456025 #17280] DEBUG -- : 
D, [2014-12-29T21:48:37.483525 #17280] DEBUG -- : 
I, [2014-12-29T21:48:37.553526 #17280]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:37 +0000
D, [2014-12-29T21:48:37.641027 #17280] DEBUG -- : 
D, [2014-12-29T21:48:37.666028 #17280] DEBUG -- : 
I, [2014-12-29T21:48:37.728529 #17280]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:37 +0000
D, [2014-12-29T21:48:37.808530 #17280] DEBUG -- : 
D, [2014-12-29T21:48:37.833530 #17280] DEBUG -- : 
I, [2014-12-29T21:48:37.901031 #17280]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-29 21:48:37 +0000
D, [2014-12-29T21:48:37.981033 #17280] DEBUG -- : 
D, [2014-12-29T21:48:38.038533 #17280] DEBUG -- : 
I, [2014-12-29T21:48:38.103534 #17280]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-29 21:48:38 +0000
D, [2014-12-29T21:48:38.173536 #17280] DEBUG -- : 
D, [2014-12-29T21:48:38.196036 #17280] DEBUG -- : 
I, [2014-12-29T21:48:38.261037 #17280]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2014-12-29 21:48:38 +0000
D, [2014-12-29T21:48:38.331038 #17280] DEBUG -- : 
D, [2014-12-29T21:48:38.356038 #17280] DEBUG -- : 
I, [2014-12-29T21:48:38.413539 #17280]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2014-12-29 21:48:38 +0000
D, [2014-12-31T17:32:41.351482 #10344] DEBUG -- : 
D, [2014-12-31T17:32:41.384484 #10344] DEBUG -- : 
I, [2014-12-31T17:32:41.419486 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2014-12-31 17:32:41 +0000
D, [2014-12-31T17:32:42.492547 #10344] DEBUG -- :   [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
I, [2014-12-31T17:32:42.886570 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2014-12-31T17:32:43.154585 #10344] DEBUG -- :   [1m[35mCart Load (38.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 34]]
D, [2014-12-31T17:32:43.490604 #10344] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2014-12-31T17:32:43.631612 #10344]  INFO -- : Cache digest for store/index.html: a93d4e2e981ab3dfce98a095c3b6c059
I, [2014-12-31T17:32:43.744619 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (26.0ms)
I, [2014-12-31T17:32:43.798622 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (360.0ms)
D, [2014-12-31T17:32:44.851682 #10344] DEBUG -- :   [1m[35mLineItem Exists (1.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 34]]
D, [2014-12-31T17:32:44.974689 #10344] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 34]]
I, [2014-12-31T17:32:45.007691 #10344]  INFO -- :   Rendered collection (0.0ms)
I, [2014-12-31T17:32:45.173701 #10344]  INFO -- :   Rendered carts/_cart.html.erb (243.0ms)
I, [2014-12-31T17:32:45.222703 #10344]  INFO -- : Completed 200 OK in 2291ms (Views: 1924.1ms | ActiveRecord: 47.0ms)
D, [2014-12-31T17:32:45.841739 #10344] DEBUG -- : 
D, [2014-12-31T17:32:45.863740 #10344] DEBUG -- : 
I, [2014-12-31T17:32:45.907742 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-31 17:32:45 +0000
D, [2014-12-31T17:32:45.955745 #10344] DEBUG -- : 
D, [2014-12-31T17:32:45.973746 #10344] DEBUG -- : 
I, [2014-12-31T17:32:46.014749 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-31 17:32:45 +0000
D, [2014-12-31T17:32:46.079752 #10344] DEBUG -- : 
D, [2014-12-31T17:32:46.094753 #10344] DEBUG -- : 
I, [2014-12-31T17:32:46.134755 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-31 17:32:46 +0000
D, [2014-12-31T17:32:46.189759 #10344] DEBUG -- : 
D, [2014-12-31T17:32:46.205760 #10344] DEBUG -- : 
I, [2014-12-31T17:32:46.250762 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-31 17:32:46 +0000
D, [2014-12-31T17:32:46.291764 #10344] DEBUG -- : 
D, [2014-12-31T17:32:46.305765 #10344] DEBUG -- : 
I, [2014-12-31T17:32:46.347768 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-31 17:32:46 +0000
D, [2014-12-31T17:32:46.387770 #10344] DEBUG -- : 
D, [2014-12-31T17:32:46.405771 #10344] DEBUG -- : 
I, [2014-12-31T17:32:46.446773 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-31 17:32:46 +0000
D, [2014-12-31T17:32:46.486776 #10344] DEBUG -- : 
D, [2014-12-31T17:32:46.504777 #10344] DEBUG -- : 
I, [2014-12-31T17:32:46.545779 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-31 17:32:46 +0000
D, [2014-12-31T17:32:46.586781 #10344] DEBUG -- : 
D, [2014-12-31T17:32:46.602782 #10344] DEBUG -- : 
I, [2014-12-31T17:32:46.647785 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-31 17:32:46 +0000
D, [2014-12-31T17:32:46.703788 #10344] DEBUG -- : 
D, [2014-12-31T17:32:46.719789 #10344] DEBUG -- : 
I, [2014-12-31T17:32:46.761791 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-31 17:32:46 +0000
D, [2014-12-31T17:32:46.802794 #10344] DEBUG -- : 
D, [2014-12-31T17:32:46.821795 #10344] DEBUG -- : 
I, [2014-12-31T17:32:46.866797 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-31 17:32:46 +0000
D, [2014-12-31T17:32:46.909800 #10344] DEBUG -- : 
D, [2014-12-31T17:32:46.925801 #10344] DEBUG -- : 
I, [2014-12-31T17:32:46.971803 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-31 17:32:46 +0000
D, [2014-12-31T17:32:47.045808 #10344] DEBUG -- : 
D, [2014-12-31T17:32:47.062809 #10344] DEBUG -- : 
I, [2014-12-31T17:32:47.100811 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-31 17:32:47 +0000
D, [2014-12-31T17:32:47.143813 #10344] DEBUG -- : 
D, [2014-12-31T17:32:47.160814 #10344] DEBUG -- : 
I, [2014-12-31T17:32:47.204817 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-31 17:32:47 +0000
D, [2014-12-31T17:32:47.252819 #10344] DEBUG -- : 
D, [2014-12-31T17:32:47.270820 #10344] DEBUG -- : 
I, [2014-12-31T17:32:47.318823 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-31 17:32:47 +0000
D, [2014-12-31T17:32:47.371826 #10344] DEBUG -- : 
D, [2014-12-31T17:32:47.388827 #10344] DEBUG -- : 
I, [2014-12-31T17:32:47.433830 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-31 17:32:47 +0000
D, [2014-12-31T17:32:47.488833 #10344] DEBUG -- : 
D, [2014-12-31T17:32:47.507834 #10344] DEBUG -- : 
I, [2014-12-31T17:32:47.553837 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-31 17:32:47 +0000
D, [2014-12-31T17:32:47.601839 #10344] DEBUG -- : 
D, [2014-12-31T17:32:47.616840 #10344] DEBUG -- : 
I, [2014-12-31T17:32:47.657843 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-31 17:32:47 +0000
D, [2014-12-31T17:32:47.702845 #10344] DEBUG -- : 
D, [2014-12-31T17:32:47.715846 #10344] DEBUG -- : 
I, [2014-12-31T17:32:47.755848 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-31 17:32:47 +0000
D, [2014-12-31T17:32:47.796851 #10344] DEBUG -- : 
D, [2014-12-31T17:32:47.812851 #10344] DEBUG -- : 
I, [2014-12-31T17:32:47.853854 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-31 17:32:47 +0000
D, [2014-12-31T17:32:47.892856 #10344] DEBUG -- : 
D, [2014-12-31T17:32:47.908857 #10344] DEBUG -- : 
I, [2014-12-31T17:32:47.978861 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-31 17:32:47 +0000
D, [2014-12-31T17:32:48.021863 #10344] DEBUG -- : 
D, [2014-12-31T17:32:48.037864 #10344] DEBUG -- : 
I, [2014-12-31T17:32:48.079867 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-31 17:32:48 +0000
D, [2014-12-31T17:32:48.120869 #10344] DEBUG -- : 
D, [2014-12-31T17:32:48.135870 #10344] DEBUG -- : 
I, [2014-12-31T17:32:48.178872 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-31 17:32:48 +0000
D, [2014-12-31T17:32:48.218875 #10344] DEBUG -- : 
D, [2014-12-31T17:32:48.232875 #10344] DEBUG -- : 
I, [2014-12-31T17:32:48.275878 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-31 17:32:48 +0000
D, [2014-12-31T17:32:48.314880 #10344] DEBUG -- : 
D, [2014-12-31T17:32:48.330881 #10344] DEBUG -- : 
I, [2014-12-31T17:32:48.370883 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-31 17:32:48 +0000
D, [2014-12-31T17:32:48.411886 #10344] DEBUG -- : 
D, [2014-12-31T17:32:48.427887 #10344] DEBUG -- : 
I, [2014-12-31T17:32:48.465889 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-31 17:32:48 +0000
D, [2014-12-31T17:32:48.508891 #10344] DEBUG -- : 
D, [2014-12-31T17:32:48.524892 #10344] DEBUG -- : 
I, [2014-12-31T17:32:48.566895 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-31 17:32:48 +0000
D, [2014-12-31T17:32:48.666900 #10344] DEBUG -- : 
D, [2014-12-31T17:32:48.687902 #10344] DEBUG -- : 
I, [2014-12-31T17:32:48.737904 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-31 17:32:48 +0000
D, [2014-12-31T17:32:48.780907 #10344] DEBUG -- : 
D, [2014-12-31T17:32:48.797908 #10344] DEBUG -- : 
I, [2014-12-31T17:32:48.832910 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2014-12-31 17:32:48 +0000
D, [2014-12-31T17:32:48.881913 #10344] DEBUG -- : 
D, [2014-12-31T17:32:48.900914 #10344] DEBUG -- : 
I, [2014-12-31T17:32:48.947916 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2014-12-31 17:32:48 +0000
D, [2014-12-31T17:32:48.995919 #10344] DEBUG -- : 
D, [2014-12-31T17:32:49.013920 #10344] DEBUG -- : 
I, [2014-12-31T17:32:49.053922 #10344]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2014-12-31 17:32:49 +0000
D, [2014-12-31T17:33:54.027325 #10344] DEBUG -- : 
D, [2014-12-31T17:33:54.042925 #10344] DEBUG -- : 
I, [2014-12-31T17:33:54.105325 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2014-12-31 17:33:54 +0000
I, [2014-12-31T17:33:54.198925 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2014-12-31T17:33:54.292525 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2014-12-31T17:33:54.370525 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 34]]
D, [2014-12-31T17:33:54.448526 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2014-12-31T17:33:54.573326 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 34]]
D, [2014-12-31T17:33:54.791726 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2014-12-31T17:33:54.838526 #10344] DEBUG -- :   [1m[35m (15.6ms)[0m  begin transaction
D, [2014-12-31T17:33:55.119327 #10344] DEBUG -- :   [1m[36mSQL (78.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 34], ["created_at", Wed, 31 Dec 2014 17:33:54 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:9c32f90,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Wed, 31 Dec 2014 17:33:54 UTC +00:00]]
D, [2014-12-31T17:33:55.306527 #10344] DEBUG -- :   [1m[35m (156.0ms)[0m  commit transaction
D, [2014-12-31T17:33:55.462527 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 34]]
I, [2014-12-31T17:33:55.556127 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2014-12-31T17:33:55.587328 #10344]  INFO -- :   Rendered carts/_cart.html.erb (140.4ms)
I, [2014-12-31T17:33:55.618528 #10344]  INFO -- :   Rendered line_items/create.js.erb (265.2ms)
I, [2014-12-31T17:33:55.665328 #10344]  INFO -- : Completed 200 OK in 1326ms (Views: 312.0ms | ActiveRecord: 249.6ms)
D, [2014-12-31T17:35:35.408498 #10344] DEBUG -- : 
D, [2014-12-31T17:35:35.428499 #10344] DEBUG -- : 
I, [2014-12-31T17:35:35.474501 #10344]  INFO -- : Started GET "/orders/new" for 127.0.0.1 at 2014-12-31 17:35:35 +0000
I, [2014-12-31T17:35:35.635511 #10344]  INFO -- : Processing by OrdersController#new as HTML
D, [2014-12-31T17:35:35.697514 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 34]]
D, [2014-12-31T17:35:35.769518 #10344] DEBUG -- :   [1m[36mLineItem Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 34]]
I, [2014-12-31T17:35:36.411555 #10344]  INFO -- :   Rendered orders/_form.html.erb (372.0ms)
I, [2014-12-31T17:35:36.455557 #10344]  INFO -- :   Rendered orders/new.html.erb within layouts/application (498.0ms)
D, [2014-12-31T17:35:36.555563 #10344] DEBUG -- :   [1m[35mCACHE (0.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 34]]
D, [2014-12-31T17:35:36.640568 #10344] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 34]]
D, [2014-12-31T17:35:36.720573 #10344] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2014-12-31T17:35:36.759575 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (77.0ms)
I, [2014-12-31T17:35:36.795577 #10344]  INFO -- :   Rendered carts/_cart.html.erb (201.0ms)
I, [2014-12-31T17:35:36.844580 #10344]  INFO -- : Completed 200 OK in 1164ms (Views: 952.1ms | ActiveRecord: 5.0ms)
D, [2014-12-31T17:35:37.238602 #10344] DEBUG -- : 
D, [2014-12-31T17:35:37.269604 #10344] DEBUG -- : 
I, [2014-12-31T17:35:37.353609 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2014-12-31 17:35:37 +0000
D, [2014-12-31T17:35:37.399611 #10344] DEBUG -- : 
D, [2014-12-31T17:35:37.417612 #10344] DEBUG -- : 
I, [2014-12-31T17:35:37.462615 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2014-12-31 17:35:37 +0000
D, [2014-12-31T17:35:37.587622 #10344] DEBUG -- : 
D, [2014-12-31T17:35:37.607623 #10344] DEBUG -- : 
I, [2014-12-31T17:35:37.660626 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2014-12-31 17:35:37 +0000
D, [2014-12-31T17:35:37.703629 #10344] DEBUG -- : 
D, [2014-12-31T17:35:37.723630 #10344] DEBUG -- : 
I, [2014-12-31T17:35:37.774633 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2014-12-31 17:35:37 +0000
D, [2014-12-31T17:35:37.842637 #10344] DEBUG -- : 
D, [2014-12-31T17:35:37.870638 #10344] DEBUG -- : 
I, [2014-12-31T17:35:37.931642 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2014-12-31 17:35:37 +0000
D, [2014-12-31T17:35:37.994645 #10344] DEBUG -- : 
D, [2014-12-31T17:35:38.027647 #10344] DEBUG -- : 
I, [2014-12-31T17:35:38.085651 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2014-12-31 17:35:38 +0000
D, [2014-12-31T17:35:38.128653 #10344] DEBUG -- : 
D, [2014-12-31T17:35:38.152655 #10344] DEBUG -- : 
I, [2014-12-31T17:35:38.200657 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2014-12-31 17:35:38 +0000
D, [2014-12-31T17:35:38.245660 #10344] DEBUG -- : 
D, [2014-12-31T17:35:38.264661 #10344] DEBUG -- : 
I, [2014-12-31T17:35:38.317664 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2014-12-31 17:35:38 +0000
D, [2014-12-31T17:35:38.368667 #10344] DEBUG -- : 
D, [2014-12-31T17:35:38.388668 #10344] DEBUG -- : 
I, [2014-12-31T17:35:38.437671 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2014-12-31 17:35:38 +0000
D, [2014-12-31T17:35:38.481673 #10344] DEBUG -- : 
D, [2014-12-31T17:35:38.503675 #10344] DEBUG -- : 
I, [2014-12-31T17:35:38.554678 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2014-12-31 17:35:38 +0000
D, [2014-12-31T17:35:38.599680 #10344] DEBUG -- : 
D, [2014-12-31T17:35:38.620681 #10344] DEBUG -- : 
I, [2014-12-31T17:35:38.700686 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2014-12-31 17:35:38 +0000
D, [2014-12-31T17:35:38.760689 #10344] DEBUG -- : 
D, [2014-12-31T17:35:38.797691 #10344] DEBUG -- : 
I, [2014-12-31T17:35:38.861695 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2014-12-31 17:35:38 +0000
D, [2014-12-31T17:35:38.909698 #10344] DEBUG -- : 
D, [2014-12-31T17:35:38.933699 #10344] DEBUG -- : 
I, [2014-12-31T17:35:39.016704 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2014-12-31 17:35:38 +0000
D, [2014-12-31T17:35:39.064707 #10344] DEBUG -- : 
D, [2014-12-31T17:35:39.082708 #10344] DEBUG -- : 
I, [2014-12-31T17:35:39.133711 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2014-12-31 17:35:39 +0000
D, [2014-12-31T17:35:39.176713 #10344] DEBUG -- : 
D, [2014-12-31T17:35:39.196714 #10344] DEBUG -- : 
I, [2014-12-31T17:35:39.252717 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2014-12-31 17:35:39 +0000
D, [2014-12-31T17:35:39.297720 #10344] DEBUG -- : 
D, [2014-12-31T17:35:39.314721 #10344] DEBUG -- : 
I, [2014-12-31T17:35:39.371724 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2014-12-31 17:35:39 +0000
D, [2014-12-31T17:35:39.415727 #10344] DEBUG -- : 
D, [2014-12-31T17:35:39.435728 #10344] DEBUG -- : 
I, [2014-12-31T17:35:39.498732 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2014-12-31 17:35:39 +0000
D, [2014-12-31T17:35:39.544734 #10344] DEBUG -- : 
D, [2014-12-31T17:35:39.562735 #10344] DEBUG -- : 
I, [2014-12-31T17:35:39.609738 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2014-12-31 17:35:39 +0000
D, [2014-12-31T17:35:39.649740 #10344] DEBUG -- : 
D, [2014-12-31T17:35:39.667741 #10344] DEBUG -- : 
I, [2014-12-31T17:35:39.712744 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2014-12-31 17:35:39 +0000
D, [2014-12-31T17:35:39.753746 #10344] DEBUG -- : 
D, [2014-12-31T17:35:39.771747 #10344] DEBUG -- : 
I, [2014-12-31T17:35:39.814750 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2014-12-31 17:35:39 +0000
D, [2014-12-31T17:35:39.858752 #10344] DEBUG -- : 
D, [2014-12-31T17:35:39.876753 #10344] DEBUG -- : 
I, [2014-12-31T17:35:39.927756 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2014-12-31 17:35:39 +0000
D, [2014-12-31T17:35:39.970759 #10344] DEBUG -- : 
D, [2014-12-31T17:35:39.988760 #10344] DEBUG -- : 
I, [2014-12-31T17:35:40.035762 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2014-12-31 17:35:39 +0000
D, [2014-12-31T17:35:40.079765 #10344] DEBUG -- : 
D, [2014-12-31T17:35:40.098766 #10344] DEBUG -- : 
I, [2014-12-31T17:35:40.146769 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2014-12-31 17:35:40 +0000
D, [2014-12-31T17:35:40.206772 #10344] DEBUG -- : 
D, [2014-12-31T17:35:40.224773 #10344] DEBUG -- : 
I, [2014-12-31T17:35:40.270776 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2014-12-31 17:35:40 +0000
D, [2014-12-31T17:35:40.314778 #10344] DEBUG -- : 
D, [2014-12-31T17:35:40.330779 #10344] DEBUG -- : 
I, [2014-12-31T17:35:40.372782 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2014-12-31 17:35:40 +0000
D, [2014-12-31T17:35:40.412784 #10344] DEBUG -- : 
D, [2014-12-31T17:35:40.430785 #10344] DEBUG -- : 
I, [2014-12-31T17:35:40.474787 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2014-12-31 17:35:40 +0000
D, [2014-12-31T17:35:40.519790 #10344] DEBUG -- : 
D, [2014-12-31T17:35:40.538791 #10344] DEBUG -- : 
I, [2014-12-31T17:35:40.581793 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2014-12-31 17:35:40 +0000
D, [2014-12-31T17:35:58.853917 #10344] DEBUG -- : 
D, [2014-12-31T17:35:58.874918 #10344] DEBUG -- : 
I, [2014-12-31T17:35:58.912921 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2014-12-31 17:35:58 +0000
I, [2014-12-31T17:35:58.977924 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2014-12-31T17:35:59.038928 #10344] DEBUG -- :   [1m[36mCart Load (1.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 34]]
D, [2014-12-31T17:35:59.138934 #10344] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2014-12-31T17:35:59.212938 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (9.0ms)
I, [2014-12-31T17:35:59.259940 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (140.0ms)
D, [2014-12-31T17:35:59.358946 #10344] DEBUG -- :   [1m[36mLineItem Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 34]]
D, [2014-12-31T17:35:59.434951 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 34]]
D, [2014-12-31T17:35:59.514955 #10344] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2014-12-31T17:35:59.556957 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (77.0ms)
I, [2014-12-31T17:35:59.596960 #10344]  INFO -- :   Rendered carts/_cart.html.erb (198.0ms)
I, [2014-12-31T17:35:59.647963 #10344]  INFO -- : Completed 200 OK in 622ms (Views: 558.0ms | ActiveRecord: 4.0ms)
D, [2014-12-31T17:39:00.445276 #10344] DEBUG -- : 
D, [2014-12-31T17:39:00.467277 #10344] DEBUG -- : 
I, [2014-12-31T17:39:00.507279 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2014-12-31 17:39:00 +0000
I, [2014-12-31T17:39:00.576283 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2014-12-31T17:39:00.638287 #10344] DEBUG -- :   [1m[35mCart Load (1.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 34]]
D, [2014-12-31T17:39:00.715291 #10344] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2014-12-31T17:39:00.780295 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (1.0ms)
I, [2014-12-31T17:39:00.829298 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (130.0ms)
D, [2014-12-31T17:39:00.947304 #10344] DEBUG -- :   [1m[35mLineItem Exists (0.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 34]]
D, [2014-12-31T17:39:01.017308 #10344] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 34]]
D, [2014-12-31T17:39:01.094313 #10344] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2014-12-31T17:39:01.135315 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (75.0ms)
I, [2014-12-31T17:39:01.173317 #10344]  INFO -- :   Rendered carts/_cart.html.erb (186.0ms)
I, [2014-12-31T17:39:01.219320 #10344]  INFO -- : Completed 200 OK in 598ms (Views: 533.0ms | ActiveRecord: 4.0ms)
D, [2014-12-31T17:52:20.730867 #10344] DEBUG -- : 
D, [2014-12-31T17:52:20.750868 #10344] DEBUG -- : 
I, [2014-12-31T17:52:20.791871 #10344]  INFO -- : Started POST "/orders" for 127.0.0.1 at 2014-12-31 17:52:20 +0000
I, [2014-12-31T17:52:20.862875 #10344]  INFO -- : Processing by OrdersController#create as HTML
I, [2014-12-31T17:52:20.968881 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order"=>{"name"=>"s", "address"=>"s", "shipping_address1"=>"s", "email"=>"s", "pay_type"=>"Paypal"}, "commit"=>"Place Order"}
D, [2014-12-31T17:52:21.029884 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 34]]
I, [2014-12-31T17:52:21.050886 #10344]  INFO -- : log info
D, [2014-12-31T17:52:21.086888 #10344] DEBUG -- : Unpermitted parameters: shipping_address1
D, [2014-12-31T17:52:21.152891 #10344] DEBUG -- :   [1m[35mLineItem Load (1.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 34]]
I, [2014-12-31T17:52:21.193894 #10344]  INFO -- : just about to payment_method and save
I, [2014-12-31T17:52:21.289899 #10344]  INFO -- : #<Order id: nil, name: "s", address: "s", email: "s", pay_type: "Paypal", created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2014-12-31T17:52:21.322901 #10344] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2014-12-31T17:52:21.465909 #10344] DEBUG -- :   [1m[35mSQL (5.0ms)[0m  INSERT INTO "orders" ("address", "created_at", "email", "name", "pay_type", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["address", "s"], ["created_at", Wed, 31 Dec 2014 17:52:21 UTC +00:00], ["email", "s"], ["name", "s"], ["pay_type", "Paypal"], ["updated_at", Wed, 31 Dec 2014 17:52:21 UTC +00:00]]
D, [2014-12-31T17:52:21.575916 #10344] DEBUG -- :   [1m[36mSQL (2.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 40[0m  [["cart_id", nil], ["order_id", 39], ["updated_at", Wed, 31 Dec 2014 17:52:21 UTC +00:00]]
I, [2014-12-31T17:52:21.603917 #10344]  INFO -- : about to @payment.create
D, [2014-12-31T17:52:21.694922 #10344] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2014-12-31T17:52:21.751926 #10344]  INFO -- : in order=
I, [2014-12-31T17:52:21.793928 #10344]  INFO -- : in payment.create
I, [2014-12-31T17:52:21.993940 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/39/confirm", "cancel_url"=>"http://localhost:3000/orders/39/cancel"}}
I, [2014-12-31T17:52:22.560972 #10344]  INFO -- : #<ActiveModel::Errors:0x000000096cdc80 @base=#<Payment:0x0000000979a168 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009799ec0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000972ce38 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000972cd98 @error=nil, @total="19.99", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000972caf0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000972c938 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000972c050 @error=nil, @return_url="http://localhost:3000/orders/39/confirm", @cancel_url="http://localhost:3000/orders/39/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000096cdc80 ...>>, @messages={}>
I, [2014-12-31T17:52:22.591974 #10344]  INFO -- : got past invalid
I, [2014-12-31T17:52:22.920993 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/oauth2/token
I, [2014-12-31T17:52:27.830273 #10344]  INFO -- : Response[200]: OK, Duration: 4.875s
I, [2014-12-31T17:52:27.869276 #10344]  INFO -- : PayPal-Request-Id: d808a2d5-d48f-4db3-aeb3-7bd5a8b404de
I, [2014-12-31T17:52:27.911278 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2014-12-31T17:52:57.143950 #10344]  INFO -- : Response[201]: Created, Duration: 3.739s
I, [2014-12-31T17:52:57.165951 #10344]  INFO -- : back from super
I, [2014-12-31T17:52:57.527972 #10344]  INFO -- : {"id"=>"PAY-43J96431M99175307KSSDPXY", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99", "details"=>{"subtotal"=>"19.99"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/39/confirm", "cancel_url"=>"http://localhost:3000/orders/39/cancel"}, "create_time"=>"2014-12-31T17:52:31Z", "update_time"=>"2014-12-31T17:52:32Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-43J96431M99175307KSSDPXY", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-5X15545440436042U", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-43J96431M99175307KSSDPXY/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2014-12-31T17:52:57.713983 #10344] DEBUG -- :   [1m[36mSQL (5.0ms)[0m  [1mUPDATE "orders" SET "name" = ?, "address" = ?, "email" = ?, "pay_type" = ?, "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ? WHERE "orders"."id" = 39[0m  [["name", "s"], ["address", "s"], ["email", "s"], ["pay_type", "Paypal"], ["created_at", Wed, 31 Dec 2014 17:52:21 UTC +00:00], ["updated_at", Wed, 31 Dec 2014 17:52:21 UTC +00:00], ["id", 39], ["payment_id", "PAY-43J96431M99175307KSSDPXY"], ["state", "created"]]
I, [2014-12-31T17:52:57.743984 #10344]  INFO -- : @payment save just done
I, [2014-12-31T17:52:58.614034 #10344]  INFO -- : #<Payment:0x0000000979a168 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000094a3888 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000094a36f8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000094a3658 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000094a3428 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000094a3360 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000094a3130 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000094a2d48 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000094a2bb8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000972c050 @error=nil, @return_url="http://localhost:3000/orders/39/confirm", @cancel_url="http://localhost:3000/orders/39/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000096cdc80 @base=#<Payment:0x0000000979a168 ...>, @messages={}>, @request_id="d808a2d5-d48f-4db3-aeb3-7bd5a8b404de", @header={}, @id="PAY-43J96431M99175307KSSDPXY", @create_time="2014-12-31T17:52:31Z", @update_time="2014-12-31T17:52:32Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000094a24b0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-43J96431M99175307KSSDPXY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000094a2190 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-5X15545440436042U", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000094a1e48 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-43J96431M99175307KSSDPXY/execute", @rel="execute", @method="POST">]>
I, [2014-12-31T17:52:59.530086 #10344]  INFO -- : #<Payment:0x0000000979a168 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000094a3888 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000094a36f8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000094a3658 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000094a3428 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000094a3360 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000094a3130 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000094a2d48 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000094a2bb8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000972c050 @error=nil, @return_url="http://localhost:3000/orders/39/confirm", @cancel_url="http://localhost:3000/orders/39/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000096cdc80 @base=#<Payment:0x0000000979a168 ...>, @messages={}>, @request_id="d808a2d5-d48f-4db3-aeb3-7bd5a8b404de", @header={}, @id="PAY-43J96431M99175307KSSDPXY", @create_time="2014-12-31T17:52:31Z", @update_time="2014-12-31T17:52:32Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000094a24b0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-43J96431M99175307KSSDPXY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000094a2190 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-5X15545440436042U", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000094a1e48 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-43J96431M99175307KSSDPXY/execute", @rel="execute", @method="POST">]>
D, [2014-12-31T17:52:59.772100 #10344] DEBUG -- :   [1m[35m (213.0ms)[0m  commit transaction
I, [2014-12-31T17:52:59.794102 #10344]  INFO -- : about to approve url
I, [2014-12-31T17:53:00.672152 #10344]  INFO -- : #<Payment:0x0000000979a168 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000094a3888 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000094a36f8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000094a3658 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000094a3428 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000094a3360 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000094a3130 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000094a2d48 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000094a2bb8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000972c050 @error=nil, @return_url="http://localhost:3000/orders/39/confirm", @cancel_url="http://localhost:3000/orders/39/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000096cdc80 @base=#<Payment:0x0000000979a168 ...>, @messages={}>, @request_id="d808a2d5-d48f-4db3-aeb3-7bd5a8b404de", @header={}, @id="PAY-43J96431M99175307KSSDPXY", @create_time="2014-12-31T17:52:31Z", @update_time="2014-12-31T17:52:32Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000094a24b0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-43J96431M99175307KSSDPXY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000094a2190 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-5X15545440436042U", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000094a1e48 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-43J96431M99175307KSSDPXY/execute", @rel="execute", @method="POST">]>
I, [2014-12-31T17:53:01.555202 #10344]  INFO -- : #<Payment:0x0000000979a168 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000094a3888 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000094a36f8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000094a3658 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000094a3428 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000094a3360 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000094a3130 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000094a2d48 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000094a2bb8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000972c050 @error=nil, @return_url="http://localhost:3000/orders/39/confirm", @cancel_url="http://localhost:3000/orders/39/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000096cdc80 @base=#<Payment:0x0000000979a168 ...>, @messages={}>, @request_id="d808a2d5-d48f-4db3-aeb3-7bd5a8b404de", @header={}, @id="PAY-43J96431M99175307KSSDPXY", @create_time="2014-12-31T17:52:31Z", @update_time="2014-12-31T17:52:32Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000094a24b0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-43J96431M99175307KSSDPXY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000094a2190 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-5X15545440436042U", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000094a1e48 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-43J96431M99175307KSSDPXY/execute", @rel="execute", @method="POST">]>
I, [2014-12-31T17:53:01.609205 #10344]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-5X15545440436042U
I, [2014-12-31T17:53:02.652265 #10344]  INFO -- : #<Payment:0x0000000979a168 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000094a3888 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000094a36f8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000094a3658 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000094a3428 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000094a3360 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000094a3130 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000094a2d48 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000094a2bb8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000972c050 @error=nil, @return_url="http://localhost:3000/orders/39/confirm", @cancel_url="http://localhost:3000/orders/39/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000096cdc80 @base=#<Payment:0x0000000979a168 ...>, @messages={}>, @request_id="d808a2d5-d48f-4db3-aeb3-7bd5a8b404de", @header={}, @id="PAY-43J96431M99175307KSSDPXY", @create_time="2014-12-31T17:52:31Z", @update_time="2014-12-31T17:52:32Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000094a24b0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-43J96431M99175307KSSDPXY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000094a2190 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-5X15545440436042U", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000094a1e48 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-43J96431M99175307KSSDPXY/execute", @rel="execute", @method="POST">]>
I, [2014-12-31T17:53:02.725269 #10344]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-5X15545440436042U
I, [2014-12-31T17:53:02.775272 #10344]  INFO -- : Completed 302 Found in 41756ms (ActiveRecord: 228.0ms)
D, [2015-01-01T09:59:35.958561 #10344] DEBUG -- : 
D, [2015-01-01T09:59:35.979562 #10344] DEBUG -- : 
I, [2015-01-01T09:59:36.022564 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 09:59:35 +0000
I, [2015-01-01T09:59:37.320639 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T09:59:37.498649 #10344] DEBUG -- :   [1m[36mCart Load (1.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 34]]
D, [2015-01-01T09:59:37.620656 #10344] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T09:59:37.771664 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (28.0ms)
I, [2015-01-01T09:59:37.817667 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (212.0ms)
D, [2015-01-01T09:59:38.046680 #10344] DEBUG -- :   [1m[36mLineItem Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 34]]
D, [2015-01-01T09:59:38.116684 #10344] DEBUG -- :   [1m[35mLineItem Load (1.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 34]]
I, [2015-01-01T09:59:38.148686 #10344]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-01T09:59:38.216690 #10344]  INFO -- :   Rendered carts/_cart.html.erb (130.0ms)
I, [2015-01-01T09:59:38.285694 #10344]  INFO -- : Completed 200 OK in 922ms (Views: 663.0ms | ActiveRecord: 32.0ms)
D, [2015-01-01T09:59:39.221747 #10344] DEBUG -- : 
D, [2015-01-01T09:59:39.240748 #10344] DEBUG -- : 
I, [2015-01-01T09:59:39.296752 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:39 +0000
D, [2015-01-01T09:59:39.335754 #10344] DEBUG -- : 
D, [2015-01-01T09:59:39.353755 #10344] DEBUG -- : 
I, [2015-01-01T09:59:39.397757 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:39 +0000
D, [2015-01-01T09:59:39.439760 #10344] DEBUG -- : 
D, [2015-01-01T09:59:39.461761 #10344] DEBUG -- : 
I, [2015-01-01T09:59:39.517764 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:39 +0000
D, [2015-01-01T09:59:39.560767 #10344] DEBUG -- : 
D, [2015-01-01T09:59:39.580768 #10344] DEBUG -- : 
I, [2015-01-01T09:59:39.631771 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:39 +0000
D, [2015-01-01T09:59:39.679773 #10344] DEBUG -- : 
D, [2015-01-01T09:59:39.695774 #10344] DEBUG -- : 
I, [2015-01-01T09:59:39.746777 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:39 +0000
D, [2015-01-01T09:59:39.796780 #10344] DEBUG -- : 
D, [2015-01-01T09:59:39.815781 #10344] DEBUG -- : 
I, [2015-01-01T09:59:39.868784 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:39 +0000
D, [2015-01-01T09:59:39.911787 #10344] DEBUG -- : 
D, [2015-01-01T09:59:39.931788 #10344] DEBUG -- : 
I, [2015-01-01T09:59:39.984791 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:39 +0000
D, [2015-01-01T09:59:40.030794 #10344] DEBUG -- : 
D, [2015-01-01T09:59:40.047795 #10344] DEBUG -- : 
I, [2015-01-01T09:59:40.095797 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:40 +0000
D, [2015-01-01T09:59:40.134800 #10344] DEBUG -- : 
D, [2015-01-01T09:59:40.150800 #10344] DEBUG -- : 
I, [2015-01-01T09:59:40.190803 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:40 +0000
D, [2015-01-01T09:59:40.223805 #10344] DEBUG -- : 
D, [2015-01-01T09:59:40.239806 #10344] DEBUG -- : 
I, [2015-01-01T09:59:40.283808 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:40 +0000
D, [2015-01-01T09:59:40.317810 #10344] DEBUG -- : 
D, [2015-01-01T09:59:40.331811 #10344] DEBUG -- : 
I, [2015-01-01T09:59:40.370813 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:40 +0000
D, [2015-01-01T09:59:40.404815 #10344] DEBUG -- : 
D, [2015-01-01T09:59:40.417816 #10344] DEBUG -- : 
I, [2015-01-01T09:59:40.452818 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:40 +0000
D, [2015-01-01T09:59:40.513821 #10344] DEBUG -- : 
D, [2015-01-01T09:59:40.527822 #10344] DEBUG -- : 
I, [2015-01-01T09:59:40.566824 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:40 +0000
D, [2015-01-01T09:59:40.600826 #10344] DEBUG -- : 
D, [2015-01-01T09:59:40.614827 #10344] DEBUG -- : 
I, [2015-01-01T09:59:40.656829 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:40 +0000
D, [2015-01-01T09:59:40.689831 #10344] DEBUG -- : 
D, [2015-01-01T09:59:40.705832 #10344] DEBUG -- : 
I, [2015-01-01T09:59:40.743834 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:40 +0000
D, [2015-01-01T09:59:40.775836 #10344] DEBUG -- : 
D, [2015-01-01T09:59:40.793837 #10344] DEBUG -- : 
I, [2015-01-01T09:59:40.831839 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:40 +0000
D, [2015-01-01T09:59:40.868841 #10344] DEBUG -- : 
D, [2015-01-01T09:59:40.883842 #10344] DEBUG -- : 
I, [2015-01-01T09:59:40.927845 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:40 +0000
D, [2015-01-01T09:59:40.960847 #10344] DEBUG -- : 
D, [2015-01-01T09:59:40.975848 #10344] DEBUG -- : 
I, [2015-01-01T09:59:41.012850 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:40 +0000
D, [2015-01-01T09:59:41.107855 #10344] DEBUG -- : 
D, [2015-01-01T09:59:41.121856 #10344] DEBUG -- : 
I, [2015-01-01T09:59:41.161858 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:41 +0000
D, [2015-01-01T09:59:41.197860 #10344] DEBUG -- : 
D, [2015-01-01T09:59:41.213861 #10344] DEBUG -- : 
I, [2015-01-01T09:59:41.257864 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:41 +0000
D, [2015-01-01T09:59:41.296866 #10344] DEBUG -- : 
D, [2015-01-01T09:59:41.312867 #10344] DEBUG -- : 
I, [2015-01-01T09:59:41.356869 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:41 +0000
D, [2015-01-01T09:59:41.391871 #10344] DEBUG -- : 
D, [2015-01-01T09:59:41.407872 #10344] DEBUG -- : 
I, [2015-01-01T09:59:41.454875 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:41 +0000
D, [2015-01-01T09:59:41.486877 #10344] DEBUG -- : 
D, [2015-01-01T09:59:41.503878 #10344] DEBUG -- : 
I, [2015-01-01T09:59:41.547880 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:41 +0000
D, [2015-01-01T09:59:41.585882 #10344] DEBUG -- : 
D, [2015-01-01T09:59:41.603884 #10344] DEBUG -- : 
I, [2015-01-01T09:59:41.642886 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:41 +0000
D, [2015-01-01T09:59:41.681888 #10344] DEBUG -- : 
D, [2015-01-01T09:59:41.699889 #10344] DEBUG -- : 
I, [2015-01-01T09:59:41.739891 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:41 +0000
D, [2015-01-01T09:59:41.776893 #10344] DEBUG -- : 
D, [2015-01-01T09:59:41.794894 #10344] DEBUG -- : 
I, [2015-01-01T09:59:41.836897 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:41 +0000
D, [2015-01-01T09:59:41.879899 #10344] DEBUG -- : 
D, [2015-01-01T09:59:41.894900 #10344] DEBUG -- : 
I, [2015-01-01T09:59:41.939903 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 09:59:41 +0000
D, [2015-01-01T09:59:41.992906 #10344] DEBUG -- : 
D, [2015-01-01T09:59:42.006907 #10344] DEBUG -- : 
I, [2015-01-01T09:59:42.055909 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 09:59:42 +0000
D, [2015-01-01T09:59:42.102912 #10344] DEBUG -- : 
D, [2015-01-01T09:59:42.121913 #10344] DEBUG -- : 
I, [2015-01-01T09:59:42.161915 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 09:59:42 +0000
D, [2015-01-01T09:59:42.195917 #10344] DEBUG -- : 
D, [2015-01-01T09:59:42.212918 #10344] DEBUG -- : 
I, [2015-01-01T09:59:42.256921 #10344]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-01 09:59:42 +0000
D, [2015-01-01T09:59:46.600371 #10344] DEBUG -- : 
D, [2015-01-01T09:59:46.615971 #10344] DEBUG -- : 
I, [2015-01-01T09:59:46.662771 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 09:59:46 +0000
I, [2015-01-01T09:59:46.740771 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T09:59:46.787572 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T09:59:46.849972 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 34]]
D, [2015-01-01T09:59:46.912372 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-01T09:59:47.005972 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 34]]
D, [2015-01-01T09:59:47.146372 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T09:59:47.177572 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T09:59:47.364173 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 34], ["created_at", Thu, 01 Jan 2015 09:59:47 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7e65e90,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 09:59:47 UTC +00:00]]
D, [2015-01-01T09:59:47.535774 #10344] DEBUG -- :   [1m[36m (124.8ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T09:59:47.613774 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 34]]
I, [2015-01-01T09:59:47.660574 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (0.0ms)
I, [2015-01-01T09:59:47.707374 #10344]  INFO -- :   Rendered carts/_cart.html.erb (124.8ms)
I, [2015-01-01T09:59:47.738574 #10344]  INFO -- :   Rendered line_items/create.js.erb (156.0ms)
I, [2015-01-01T09:59:47.785374 #10344]  INFO -- : Completed 200 OK in 951ms (Views: 202.8ms | ActiveRecord: 140.4ms)
D, [2015-01-01T09:59:51.100645 #10344] DEBUG -- : 
D, [2015-01-01T09:59:51.120646 #10344] DEBUG -- : 
I, [2015-01-01T09:59:51.169649 #10344]  INFO -- : Started GET "/orders/new" for 127.0.0.1 at 2015-01-01 09:59:51 +0000
I, [2015-01-01T09:59:51.265655 #10344]  INFO -- : Processing by OrdersController#new as HTML
D, [2015-01-01T09:59:51.330658 #10344] DEBUG -- :   [1m[36mCart Load (1.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 34]]
D, [2015-01-01T09:59:51.399662 #10344] DEBUG -- :   [1m[35mLineItem Exists (1.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 34]]
I, [2015-01-01T09:59:51.617675 #10344]  INFO -- :   Rendered orders/_form.html.erb (136.0ms)
I, [2015-01-01T09:59:51.663677 #10344]  INFO -- :   Rendered orders/new.html.erb within layouts/application (177.0ms)
D, [2015-01-01T09:59:51.754683 #10344] DEBUG -- :   [1m[36mCACHE (0.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 34]]
D, [2015-01-01T09:59:51.828687 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 34]]
D, [2015-01-01T09:59:51.908691 #10344] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-01T09:59:51.947694 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (77.0ms)
I, [2015-01-01T09:59:51.986696 #10344]  INFO -- :   Rendered carts/_cart.html.erb (191.0ms)
I, [2015-01-01T09:59:52.034699 #10344]  INFO -- : Completed 200 OK in 724ms (Views: 563.0ms | ActiveRecord: 5.0ms)
D, [2015-01-01T09:59:52.388719 #10344] DEBUG -- : 
D, [2015-01-01T09:59:52.405720 #10344] DEBUG -- : 
I, [2015-01-01T09:59:52.446722 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:52 +0000
D, [2015-01-01T09:59:52.479724 #10344] DEBUG -- : 
D, [2015-01-01T09:59:52.493725 #10344] DEBUG -- : 
I, [2015-01-01T09:59:52.529727 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:52 +0000
D, [2015-01-01T09:59:52.563729 #10344] DEBUG -- : 
D, [2015-01-01T09:59:52.578730 #10344] DEBUG -- : 
I, [2015-01-01T09:59:52.614732 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:52 +0000
D, [2015-01-01T09:59:52.647734 #10344] DEBUG -- : 
D, [2015-01-01T09:59:52.663735 #10344] DEBUG -- : 
I, [2015-01-01T09:59:52.702737 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:52 +0000
D, [2015-01-01T09:59:52.735739 #10344] DEBUG -- : 
D, [2015-01-01T09:59:52.750740 #10344] DEBUG -- : 
I, [2015-01-01T09:59:52.788742 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:52 +0000
D, [2015-01-01T09:59:52.821744 #10344] DEBUG -- : 
D, [2015-01-01T09:59:52.835744 #10344] DEBUG -- : 
I, [2015-01-01T09:59:52.873747 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:52 +0000
D, [2015-01-01T09:59:52.906749 #10344] DEBUG -- : 
D, [2015-01-01T09:59:52.920749 #10344] DEBUG -- : 
I, [2015-01-01T09:59:52.956751 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:52 +0000
D, [2015-01-01T09:59:52.989753 #10344] DEBUG -- : 
D, [2015-01-01T09:59:53.003754 #10344] DEBUG -- : 
I, [2015-01-01T09:59:53.040756 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:53 +0000
D, [2015-01-01T09:59:53.072758 #10344] DEBUG -- : 
D, [2015-01-01T09:59:53.085759 #10344] DEBUG -- : 
I, [2015-01-01T09:59:53.123761 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:53 +0000
D, [2015-01-01T09:59:53.155763 #10344] DEBUG -- : 
D, [2015-01-01T09:59:53.169764 #10344] DEBUG -- : 
I, [2015-01-01T09:59:53.204766 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:53 +0000
D, [2015-01-01T09:59:53.235767 #10344] DEBUG -- : 
D, [2015-01-01T09:59:53.249768 #10344] DEBUG -- : 
I, [2015-01-01T09:59:53.287770 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 09:59:53 +0000
D, [2015-01-01T09:59:53.322772 #10344] DEBUG -- : 
D, [2015-01-01T09:59:53.337773 #10344] DEBUG -- : 
I, [2015-01-01T09:59:53.375775 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:53 +0000
D, [2015-01-01T09:59:53.415778 #10344] DEBUG -- : 
D, [2015-01-01T09:59:53.434779 #10344] DEBUG -- : 
I, [2015-01-01T09:59:53.483782 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:53 +0000
D, [2015-01-01T09:59:53.519784 #10344] DEBUG -- : 
D, [2015-01-01T09:59:53.533784 #10344] DEBUG -- : 
I, [2015-01-01T09:59:53.574787 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:53 +0000
D, [2015-01-01T09:59:53.603788 #10344] DEBUG -- : 
D, [2015-01-01T09:59:53.617789 #10344] DEBUG -- : 
I, [2015-01-01T09:59:53.650791 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:53 +0000
D, [2015-01-01T09:59:53.683793 #10344] DEBUG -- : 
D, [2015-01-01T09:59:53.697794 #10344] DEBUG -- : 
I, [2015-01-01T09:59:53.730796 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:53 +0000
D, [2015-01-01T09:59:53.763798 #10344] DEBUG -- : 
D, [2015-01-01T09:59:53.779798 #10344] DEBUG -- : 
I, [2015-01-01T09:59:53.818801 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:53 +0000
D, [2015-01-01T09:59:53.850803 #10344] DEBUG -- : 
D, [2015-01-01T09:59:53.864803 #10344] DEBUG -- : 
I, [2015-01-01T09:59:53.897805 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:53 +0000
D, [2015-01-01T09:59:53.928807 #10344] DEBUG -- : 
D, [2015-01-01T09:59:53.941808 #10344] DEBUG -- : 
I, [2015-01-01T09:59:53.977810 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:53 +0000
D, [2015-01-01T09:59:54.006811 #10344] DEBUG -- : 
D, [2015-01-01T09:59:54.018812 #10344] DEBUG -- : 
I, [2015-01-01T09:59:54.051814 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:54 +0000
D, [2015-01-01T09:59:54.082816 #10344] DEBUG -- : 
D, [2015-01-01T09:59:54.095817 #10344] DEBUG -- : 
I, [2015-01-01T09:59:54.129818 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:54 +0000
D, [2015-01-01T09:59:54.163820 #10344] DEBUG -- : 
D, [2015-01-01T09:59:54.177821 #10344] DEBUG -- : 
I, [2015-01-01T09:59:54.211823 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:54 +0000
D, [2015-01-01T09:59:54.240825 #10344] DEBUG -- : 
D, [2015-01-01T09:59:54.254826 #10344] DEBUG -- : 
I, [2015-01-01T09:59:54.288828 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:54 +0000
D, [2015-01-01T09:59:54.318829 #10344] DEBUG -- : 
D, [2015-01-01T09:59:54.331830 #10344] DEBUG -- : 
I, [2015-01-01T09:59:54.363832 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:54 +0000
D, [2015-01-01T09:59:54.393834 #10344] DEBUG -- : 
D, [2015-01-01T09:59:54.406834 #10344] DEBUG -- : 
I, [2015-01-01T09:59:54.437836 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:54 +0000
D, [2015-01-01T09:59:54.465838 #10344] DEBUG -- : 
D, [2015-01-01T09:59:54.479838 #10344] DEBUG -- : 
I, [2015-01-01T09:59:54.513840 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 09:59:54 +0000
D, [2015-01-01T09:59:54.542842 #10344] DEBUG -- : 
D, [2015-01-01T09:59:54.553843 #10344] DEBUG -- : 
I, [2015-01-01T09:59:54.586845 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 09:59:54 +0000
D, [2015-01-01T10:00:10.007133 #10344] DEBUG -- : 
D, [2015-01-01T10:00:10.029135 #10344] DEBUG -- : 
I, [2015-01-01T10:00:10.076137 #10344]  INFO -- : Started POST "/orders" for 127.0.0.1 at 2015-01-01 10:00:10 +0000
I, [2015-01-01T10:00:10.141141 #10344]  INFO -- : Processing by OrdersController#create as HTML
I, [2015-01-01T10:00:10.247147 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order"=>{"name"=>"s", "address"=>"s", "shipping_address1"=>"s", "email"=>"s", "pay_type"=>"Paypal"}, "commit"=>"Place Order"}
D, [2015-01-01T10:00:10.306150 #10344] DEBUG -- :   [1m[35mCart Load (1.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 34]]
I, [2015-01-01T10:00:10.329152 #10344]  INFO -- : log info
D, [2015-01-01T10:00:10.367154 #10344] DEBUG -- : Unpermitted parameters: shipping_address1
D, [2015-01-01T10:00:10.434158 #10344] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 34]]
I, [2015-01-01T10:00:10.476160 #10344]  INFO -- : just about to payment_method and save
I, [2015-01-01T10:00:10.594167 #10344]  INFO -- : #<Order id: nil, name: "s", address: "s", email: "s", pay_type: "Paypal", created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T10:00:10.627169 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-01T10:00:10.780178 #10344] DEBUG -- :   [1m[36mSQL (4.0ms)[0m  [1mINSERT INTO "orders" ("address", "created_at", "email", "name", "pay_type", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["address", "s"], ["created_at", Thu, 01 Jan 2015 10:00:10 UTC +00:00], ["email", "s"], ["name", "s"], ["pay_type", "Paypal"], ["updated_at", Thu, 01 Jan 2015 10:00:10 UTC +00:00]]
D, [2015-01-01T10:00:10.881183 #10344] DEBUG -- :   [1m[35mSQL (1.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 41  [["cart_id", nil], ["order_id", 40], ["updated_at", Thu, 01 Jan 2015 10:00:10 UTC +00:00]]
I, [2015-01-01T10:00:10.911185 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T10:00:10.998190 #10344] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-01T10:00:11.023191 #10344]  INFO -- : in order=
I, [2015-01-01T10:00:11.050193 #10344]  INFO -- : in payment.create
I, [2015-01-01T10:00:11.234204 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/40/confirm", "cancel_url"=>"http://localhost:3000/orders/40/cancel"}}
I, [2015-01-01T10:00:11.815237 #10344]  INFO -- : #<ActiveModel::Errors:0x00000007f0a2d8 @base=#<Payment:0x00000007f351b8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007f34f38 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007f1d400 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007f1d338 @error=nil, @total="19.99", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007f1d068 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007f1ce38 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007f1c410 @error=nil, @return_url="http://localhost:3000/orders/40/confirm", @cancel_url="http://localhost:3000/orders/40/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007f0a2d8 ...>>, @messages={}>
I, [2015-01-01T10:00:11.845238 #10344]  INFO -- : got past invalid
I, [2015-01-01T10:00:11.892241 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/oauth2/token
I, [2015-01-01T10:00:13.988361 #10344]  INFO -- : Response[200]: OK, Duration: 2.067s
I, [2015-01-01T10:00:14.049365 #10344]  INFO -- : PayPal-Request-Id: 1797e870-a583-4bad-9216-0c64f46dc8da
I, [2015-01-01T10:00:14.090367 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T10:00:15.383441 #10344]  INFO -- : Response[201]: Created, Duration: 1.261s
I, [2015-01-01T10:00:15.407442 #10344]  INFO -- : back from super
I, [2015-01-01T10:00:15.794464 #10344]  INFO -- : {"id"=>"PAY-6KP63618HS6633843KSSRVMA", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99", "details"=>{"subtotal"=>"19.99"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/40/confirm", "cancel_url"=>"http://localhost:3000/orders/40/cancel"}, "create_time"=>"2015-01-01T10:00:16Z", "update_time"=>"2015-01-01T10:00:16Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KP63618HS6633843KSSRVMA", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-2AE44877DE457931K", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KP63618HS6633843KSSRVMA/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-01T10:00:15.980475 #10344] DEBUG -- :   [1m[35mSQL (4.0ms)[0m  UPDATE "orders" SET "name" = ?, "address" = ?, "email" = ?, "pay_type" = ?, "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ? WHERE "orders"."id" = 40  [["name", "s"], ["address", "s"], ["email", "s"], ["pay_type", "Paypal"], ["created_at", Thu, 01 Jan 2015 10:00:10 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 10:00:10 UTC +00:00], ["id", 40], ["payment_id", "PAY-6KP63618HS6633843KSSRVMA"], ["state", "created"]]
I, [2015-01-01T10:00:16.008477 #10344]  INFO -- : @payment save just done
I, [2015-01-01T10:00:16.920529 #10344]  INFO -- : #<Payment:0x00000007f351b8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007e6d410 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000007e6d320 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000007e6d2a8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007e6d190 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007e6d118 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000007e6cf88 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007e6cd80 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007e6cc68 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007f1c410 @error=nil, @return_url="http://localhost:3000/orders/40/confirm", @cancel_url="http://localhost:3000/orders/40/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007f0a2d8 @base=#<Payment:0x00000007f351b8 ...>, @messages={}>, @request_id="1797e870-a583-4bad-9216-0c64f46dc8da", @header={}, @id="PAY-6KP63618HS6633843KSSRVMA", @create_time="2015-01-01T10:00:16Z", @update_time="2015-01-01T10:00:16Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000007e6c7b8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KP63618HS6633843KSSRVMA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007e6c5d8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-2AE44877DE457931K", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007e6c3f8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KP63618HS6633843KSSRVMA/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T10:00:17.836581 #10344]  INFO -- : #<Payment:0x00000007f351b8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007e6d410 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000007e6d320 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000007e6d2a8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007e6d190 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007e6d118 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000007e6cf88 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007e6cd80 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007e6cc68 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007f1c410 @error=nil, @return_url="http://localhost:3000/orders/40/confirm", @cancel_url="http://localhost:3000/orders/40/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007f0a2d8 @base=#<Payment:0x00000007f351b8 ...>, @messages={}>, @request_id="1797e870-a583-4bad-9216-0c64f46dc8da", @header={}, @id="PAY-6KP63618HS6633843KSSRVMA", @create_time="2015-01-01T10:00:16Z", @update_time="2015-01-01T10:00:16Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000007e6c7b8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KP63618HS6633843KSSRVMA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007e6c5d8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-2AE44877DE457931K", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007e6c3f8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KP63618HS6633843KSSRVMA/execute", @rel="execute", @method="POST">]>
D, [2015-01-01T10:00:18.111597 #10344] DEBUG -- :   [1m[36m (242.0ms)[0m  [1mcommit transaction[0m
I, [2015-01-01T10:00:18.139598 #10344]  INFO -- : about to approve url
I, [2015-01-01T10:00:18.964646 #10344]  INFO -- : #<Payment:0x00000007f351b8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007e6d410 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000007e6d320 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000007e6d2a8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007e6d190 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007e6d118 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000007e6cf88 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007e6cd80 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007e6cc68 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007f1c410 @error=nil, @return_url="http://localhost:3000/orders/40/confirm", @cancel_url="http://localhost:3000/orders/40/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007f0a2d8 @base=#<Payment:0x00000007f351b8 ...>, @messages={}>, @request_id="1797e870-a583-4bad-9216-0c64f46dc8da", @header={}, @id="PAY-6KP63618HS6633843KSSRVMA", @create_time="2015-01-01T10:00:16Z", @update_time="2015-01-01T10:00:16Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000007e6c7b8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KP63618HS6633843KSSRVMA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007e6c5d8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-2AE44877DE457931K", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007e6c3f8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KP63618HS6633843KSSRVMA/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T10:01:55.644175 #10344]  INFO -- : #<Payment:0x00000007f351b8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007e6d410 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000007e6d320 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000007e6d2a8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007e6d190 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007e6d118 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000007e6cf88 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007e6cd80 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007e6cc68 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007f1c410 @error=nil, @return_url="http://localhost:3000/orders/40/confirm", @cancel_url="http://localhost:3000/orders/40/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007f0a2d8 @base=#<Payment:0x00000007f351b8 ...>, @messages={}>, @request_id="1797e870-a583-4bad-9216-0c64f46dc8da", @header={}, @id="PAY-6KP63618HS6633843KSSRVMA", @create_time="2015-01-01T10:00:16Z", @update_time="2015-01-01T10:00:16Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000007e6c7b8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KP63618HS6633843KSSRVMA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007e6c5d8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-2AE44877DE457931K", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007e6c3f8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KP63618HS6633843KSSRVMA/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T10:02:08.237896 #10344]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-2AE44877DE457931K
I, [2015-01-01T10:02:09.300957 #10344]  INFO -- : #<Payment:0x00000007f351b8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007e6d410 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000007e6d320 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000007e6d2a8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007e6d190 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007e6d118 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000007e6cf88 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007e6cd80 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007e6cc68 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007f1c410 @error=nil, @return_url="http://localhost:3000/orders/40/confirm", @cancel_url="http://localhost:3000/orders/40/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007f0a2d8 @base=#<Payment:0x00000007f351b8 ...>, @messages={}>, @request_id="1797e870-a583-4bad-9216-0c64f46dc8da", @header={}, @id="PAY-6KP63618HS6633843KSSRVMA", @create_time="2015-01-01T10:00:16Z", @update_time="2015-01-01T10:00:16Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000007e6c7b8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KP63618HS6633843KSSRVMA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007e6c5d8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-2AE44877DE457931K", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007e6c3f8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KP63618HS6633843KSSRVMA/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T10:02:13.777213 #10344]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-2AE44877DE457931K
I, [2015-01-01T10:02:13.818215 #10344]  INFO -- : Completed 302 Found in 123532ms (ActiveRecord: 255.0ms)
D, [2015-01-01T10:03:19.672982 #10344] DEBUG -- : 
D, [2015-01-01T10:03:19.692983 #10344] DEBUG -- : 
I, [2015-01-01T10:03:19.788988 #10344]  INFO -- : Started GET "/orders/40/confirm?paymentId=PAY-6KP63618HS6633843KSSRVMA&token=EC-2AE44877DE457931K&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-01 10:03:19 +0000
I, [2015-01-01T10:03:22.008115 #10344]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-01T10:03:22.094120 #10344]  INFO -- :   Parameters: {"paymentId"=>"PAY-6KP63618HS6633843KSSRVMA", "token"=>"EC-2AE44877DE457931K", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"40"}
D, [2015-01-01T10:03:22.219127 #10344] DEBUG -- :   [1m[35mUser Load (3.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T10:03:22.402138 #10344] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T10:03:22.551146 #10344] DEBUG -- :   [1m[35mOrder Load (3.0ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "40"]]
I, [2015-01-01T10:03:27.418425 #10344]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KP63618HS6633843KSSRVMA
I, [2015-01-01T10:03:28.504487 #10344]  INFO -- : Response[200]: OK, Duration: 1.043s
D, [2015-01-01T10:03:30.075577 #10344] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:03:30.197584 #10344] DEBUG -- :   [1m[35mSQL (6.0ms)[0m  UPDATE "orders" SET "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 40  [["shipping_address1", "1 Main Terrace"], ["updated_at", Thu, 01 Jan 2015 10:03:30 UTC +00:00]]
D, [2015-01-01T10:03:30.462599 #10344] DEBUG -- :   [1m[36m (230.0ms)[0m  [1mcommit transaction[0m
I, [2015-01-01T10:03:30.666610 #10344]  INFO -- :   Rendered orders/_form.html.erb (133.0ms)
I, [2015-01-01T10:03:30.715613 #10344]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (191.0ms)
I, [2015-01-01T10:03:30.898624 #10344]  INFO -- : Completed 200 OK in 8759ms (Views: 385.0ms | ActiveRecord: 259.0ms)
D, [2015-01-01T10:03:31.146638 #10344] DEBUG -- : 
D, [2015-01-01T10:03:31.161639 #10344] DEBUG -- : 
I, [2015-01-01T10:03:31.210642 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 10:03:31 +0000
D, [2015-01-01T10:03:31.341649 #10344] DEBUG -- : 
D, [2015-01-01T10:03:31.360650 #10344] DEBUG -- : 
I, [2015-01-01T10:03:31.400652 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 10:03:31 +0000
D, [2015-01-01T10:03:31.490658 #10344] DEBUG -- : 
D, [2015-01-01T10:03:31.523659 #10344] DEBUG -- : 
I, [2015-01-01T10:03:31.630666 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 10:03:31 +0000
D, [2015-01-01T10:03:31.708670 #10344] DEBUG -- : 
D, [2015-01-01T10:03:31.728671 #10344] DEBUG -- : 
I, [2015-01-01T10:03:31.781674 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 10:03:31 +0000
D, [2015-01-01T10:03:31.850678 #10344] DEBUG -- : 
D, [2015-01-01T10:03:31.876680 #10344] DEBUG -- : 
I, [2015-01-01T10:03:31.928683 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 10:03:31 +0000
D, [2015-01-01T10:03:32.018688 #10344] DEBUG -- : 
D, [2015-01-01T10:03:32.035689 #10344] DEBUG -- : 
I, [2015-01-01T10:03:32.081691 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 10:03:32 +0000
D, [2015-01-01T10:03:32.148695 #10344] DEBUG -- : 
D, [2015-01-01T10:03:32.174697 #10344] DEBUG -- : 
I, [2015-01-01T10:03:32.219699 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 10:03:32 +0000
D, [2015-01-01T10:03:32.297704 #10344] DEBUG -- : 
D, [2015-01-01T10:03:32.315705 #10344] DEBUG -- : 
I, [2015-01-01T10:03:32.371708 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 10:03:32 +0000
D, [2015-01-01T10:03:32.438712 #10344] DEBUG -- : 
D, [2015-01-01T10:03:32.466713 #10344] DEBUG -- : 
I, [2015-01-01T10:03:32.515716 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 10:03:32 +0000
D, [2015-01-01T10:03:32.591721 #10344] DEBUG -- : 
D, [2015-01-01T10:03:32.615722 #10344] DEBUG -- : 
I, [2015-01-01T10:03:32.667725 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 10:03:32 +0000
D, [2015-01-01T10:03:32.743729 #10344] DEBUG -- : 
D, [2015-01-01T10:03:32.763730 #10344] DEBUG -- : 
I, [2015-01-01T10:03:32.816733 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 10:03:32 +0000
D, [2015-01-01T10:03:32.902738 #10344] DEBUG -- : 
D, [2015-01-01T10:03:32.920739 #10344] DEBUG -- : 
I, [2015-01-01T10:03:32.969742 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 10:03:32 +0000
D, [2015-01-01T10:03:33.049747 #10344] DEBUG -- : 
D, [2015-01-01T10:03:33.066748 #10344] DEBUG -- : 
I, [2015-01-01T10:03:33.108750 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 10:03:33 +0000
D, [2015-01-01T10:03:33.191755 #10344] DEBUG -- : 
D, [2015-01-01T10:03:33.222757 #10344] DEBUG -- : 
I, [2015-01-01T10:03:33.278760 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 10:03:33 +0000
D, [2015-01-01T10:03:33.350764 #10344] DEBUG -- : 
D, [2015-01-01T10:03:33.372765 #10344] DEBUG -- : 
I, [2015-01-01T10:03:33.421768 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 10:03:33 +0000
D, [2015-01-01T10:03:33.490772 #10344] DEBUG -- : 
D, [2015-01-01T10:03:33.529774 #10344] DEBUG -- : 
I, [2015-01-01T10:03:33.579777 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 10:03:33 +0000
D, [2015-01-01T10:03:33.654781 #10344] DEBUG -- : 
D, [2015-01-01T10:03:33.668782 #10344] DEBUG -- : 
I, [2015-01-01T10:03:33.711785 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 10:03:33 +0000
D, [2015-01-01T10:03:33.792789 #10344] DEBUG -- : 
D, [2015-01-01T10:03:33.810790 #10344] DEBUG -- : 
I, [2015-01-01T10:03:33.858793 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 10:03:33 +0000
D, [2015-01-01T10:03:33.931797 #10344] DEBUG -- : 
D, [2015-01-01T10:03:33.957799 #10344] DEBUG -- : 
I, [2015-01-01T10:03:34.004801 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 10:03:33 +0000
D, [2015-01-01T10:03:34.080806 #10344] DEBUG -- : 
D, [2015-01-01T10:03:34.100807 #10344] DEBUG -- : 
I, [2015-01-01T10:03:34.151810 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 10:03:34 +0000
D, [2015-01-01T10:03:34.221814 #10344] DEBUG -- : 
D, [2015-01-01T10:03:34.247815 #10344] DEBUG -- : 
I, [2015-01-01T10:03:34.300818 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 10:03:34 +0000
D, [2015-01-01T10:03:34.384823 #10344] DEBUG -- : 
D, [2015-01-01T10:03:34.405824 #10344] DEBUG -- : 
I, [2015-01-01T10:03:34.455827 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 10:03:34 +0000
D, [2015-01-01T10:03:34.524831 #10344] DEBUG -- : 
D, [2015-01-01T10:03:34.543832 #10344] DEBUG -- : 
I, [2015-01-01T10:03:34.593835 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 10:03:34 +0000
D, [2015-01-01T10:03:34.666839 #10344] DEBUG -- : 
D, [2015-01-01T10:03:34.687840 #10344] DEBUG -- : 
I, [2015-01-01T10:03:34.740843 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 10:03:34 +0000
D, [2015-01-01T10:03:34.812848 #10344] DEBUG -- : 
D, [2015-01-01T10:03:34.832849 #10344] DEBUG -- : 
I, [2015-01-01T10:03:34.882852 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 10:03:34 +0000
D, [2015-01-01T10:03:34.953856 #10344] DEBUG -- : 
D, [2015-01-01T10:03:34.972857 #10344] DEBUG -- : 
I, [2015-01-01T10:03:35.023860 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 10:03:34 +0000
D, [2015-01-01T10:03:35.112865 #10344] DEBUG -- : 
D, [2015-01-01T10:03:35.130866 #10344] DEBUG -- : 
I, [2015-01-01T10:03:35.172868 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 10:03:35 +0000
D, [2015-01-01T10:03:35.271874 #10344] DEBUG -- : 
D, [2015-01-01T10:03:35.290875 #10344] DEBUG -- : 
I, [2015-01-01T10:03:35.343878 #10344]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-01 10:03:35 +0000
D, [2015-01-01T10:03:45.472917 #10344] DEBUG -- : 
D, [2015-01-01T10:03:45.492918 #10344] DEBUG -- : 
I, [2015-01-01T10:03:45.547921 #10344]  INFO -- : Started POST "/orders/40/execute/40/2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-01 10:03:45 +0000
I, [2015-01-01T10:03:45.673928 #10344]  INFO -- : Processing by OrdersController#execute as HTML
I, [2015-01-01T10:03:45.747932 #10344]  INFO -- :   Parameters: {"authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order_id"=>"40", "payer_id"=>"2VZ7YQDDDPPC4"}
D, [2015-01-01T10:03:45.834937 #10344] DEBUG -- :   [1m[35mOrder Load (2.0ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "40"]]
I, [2015-01-01T10:03:59.000690 #10344]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KP63618HS6633843KSSRVMA
I, [2015-01-01T10:04:00.098753 #10344]  INFO -- : Response[200]: OK, Duration: 1.067s
I, [2015-01-01T10:04:00.169757 #10344]  INFO -- : PayPal-Request-Id: 39387731-5ce1-4aaa-98a8-0dacbf3a060f
I, [2015-01-01T10:04:00.236761 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KP63618HS6633843KSSRVMA/execute
I, [2015-01-01T10:04:03.098925 #10344]  INFO -- : Response[200]: OK, Duration: 2.820s
D, [2015-01-01T10:04:03.168929 #10344] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:04:03.309937 #10344] DEBUG -- :   [1m[35mSQL (6.0ms)[0m  UPDATE "orders" SET "state" = ?, "updated_at" = ? WHERE "orders"."id" = 40  [["state", "approved"], ["updated_at", Thu, 01 Jan 2015 10:04:03 UTC +00:00]]
D, [2015-01-01T10:04:03.488947 #10344] DEBUG -- :   [1m[36m (136.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T10:04:03.639956 #10344] DEBUG -- :   [1m[35mCart Load (3.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 34]]
D, [2015-01-01T10:04:03.751962 #10344] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:04:03.924972 #10344] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 34]]
D, [2015-01-01T10:04:04.007977 #10344] DEBUG -- :   [1m[36mSQL (4.0ms)[0m  [1mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 34]]
D, [2015-01-01T10:04:04.162986 #10344] DEBUG -- :   [1m[35m (108.0ms)[0m  commit transaction
I, [2015-01-01T10:04:16.102669 #10344]  INFO -- :   Rendered order_notifier/received.html.erb (7.0ms)
D, [2015-01-01T10:04:16.251677 #10344] DEBUG -- :   [1m[36mLineItem Load (3.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 40]]
D, [2015-01-01T10:04:16.722704 #10344] DEBUG -- :   [1m[35mProduct Load (3.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-01T10:04:16.920715 #10344]  INFO -- :   Rendered line_items/_line_item.text.erb (388.0ms)
I, [2015-01-01T10:04:16.965718 #10344]  INFO -- :   Rendered order_notifier/received.text.erb (803.0ms)
I, [2015-01-01T10:04:18.150786 #10344]  INFO -- : 
Sent mail to s (900.1ms)
D, [2015-01-01T10:04:18.666815 #10344] DEBUG -- : Date: Thu, 01 Jan 2015 10:04:17 +0000

From: Simon King <simon.king65@gmail.com>

To: s

Message-ID: <54a51ba15b3ed_28684f4b218225fc@Simon-PC.mail>

Subject: King Clothing Order Confirmation

Mime-Version: 1.0

Content-Type: multipart/alternative;

 boundary="--==_mimepart_54a51ba150f1_28684f4b218224d6";

 charset=UTF-8

Content-Transfer-Encoding: 7bit





----==_mimepart_54a51ba150f1_28684f4b218224d6

Content-Type: text/plain;

 charset=UTF-8

Content-Transfer-Encoding: 7bit



Dear s



Thank you for your recent order from King Clothing.



You ordered the following items:



 1 x Camo Print Tee

We'll send you a separate e-mail when your order ships.

----==_mimepart_54a51ba150f1_28684f4b218224d6

Content-Type: text/html;

 charset=UTF-8

Content-Transfer-Encoding: 7bit



<h1>OrderNotifier#received</h1>



<p>

  , thank you for your order, we will email you again once your order has been despatched. We hope you enjoy wearing your King Clothing brand tee-shirt.

</p>



----==_mimepart_54a51ba150f1_28684f4b218224d6--


I, [2015-01-01T10:04:18.721818 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T10:04:18.779822 #10344]  INFO -- : Completed 302 Found in 32977ms (ActiveRecord: 290.0ms)
D, [2015-01-01T10:04:18.863826 #10344] DEBUG -- : 
D, [2015-01-01T10:04:18.890828 #10344] DEBUG -- : 
I, [2015-01-01T10:04:18.944831 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 10:04:18 +0000
I, [2015-01-01T10:04:19.095840 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T10:04:19.161843 #10344] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:04:19.322853 #10344] DEBUG -- :   [1m[35mSQL (8.0ms)[0m  INSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 01 Jan 2015 10:04:19 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 10:04:19 UTC +00:00]]
D, [2015-01-01T10:04:19.493862 #10344] DEBUG -- :   [1m[36m (119.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T10:04:19.618870 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T10:04:19.715875 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (4.0ms)
I, [2015-01-01T10:04:19.774879 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (193.0ms)
D, [2015-01-01T10:04:20.039894 #10344] DEBUG -- :   [1m[36mLineItem Exists (3.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 35]]
D, [2015-01-01T10:04:20.154900 #10344] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
I, [2015-01-01T10:04:20.199903 #10344]  INFO -- :   Rendered collection (1.0ms)
I, [2015-01-01T10:04:20.286908 #10344]  INFO -- :   Rendered carts/_cart.html.erb (184.0ms)
I, [2015-01-01T10:04:20.375913 #10344]  INFO -- : Completed 200 OK in 1218ms (Views: 806.0ms | ActiveRecord: 135.0ms)
D, [2015-01-01T10:04:20.593925 #10344] DEBUG -- : 
D, [2015-01-01T10:04:20.645928 #10344] DEBUG -- : 
I, [2015-01-01T10:04:20.711932 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 10:04:20 +0000
D, [2015-01-01T10:04:20.806938 #10344] DEBUG -- : 
D, [2015-01-01T10:04:20.832939 #10344] DEBUG -- : 
I, [2015-01-01T10:04:20.896943 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 10:04:20 +0000
D, [2015-01-01T10:04:20.972947 #10344] DEBUG -- : 
D, [2015-01-01T10:04:20.996948 #10344] DEBUG -- : 
I, [2015-01-01T10:04:21.057952 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 10:04:20 +0000
D, [2015-01-01T10:04:21.131956 #10344] DEBUG -- : 
D, [2015-01-01T10:04:21.158958 #10344] DEBUG -- : 
I, [2015-01-01T10:04:21.226962 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 10:04:21 +0000
D, [2015-01-01T10:04:21.306966 #10344] DEBUG -- : 
D, [2015-01-01T10:04:21.330968 #10344] DEBUG -- : 
I, [2015-01-01T10:04:21.394971 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 10:04:21 +0000
D, [2015-01-01T10:04:21.474976 #10344] DEBUG -- : 
D, [2015-01-01T10:04:21.501977 #10344] DEBUG -- : 
I, [2015-01-01T10:04:21.569981 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 10:04:21 +0000
D, [2015-01-01T10:04:21.641985 #10344] DEBUG -- : 
D, [2015-01-01T10:04:21.664987 #10344] DEBUG -- : 
I, [2015-01-01T10:04:21.729990 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 10:04:21 +0000
D, [2015-01-01T10:04:21.802995 #10344] DEBUG -- : 
D, [2015-01-01T10:04:21.826996 #10344] DEBUG -- : 
I, [2015-01-01T10:04:21.892000 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 10:04:21 +0000
D, [2015-01-01T10:04:21.965004 #10344] DEBUG -- : 
D, [2015-01-01T10:04:21.991005 #10344] DEBUG -- : 
I, [2015-01-01T10:04:22.051009 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 10:04:21 +0000
D, [2015-01-01T10:04:22.126013 #10344] DEBUG -- : 
D, [2015-01-01T10:04:22.152015 #10344] DEBUG -- : 
I, [2015-01-01T10:04:22.220018 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 10:04:22 +0000
D, [2015-01-01T10:04:22.299023 #10344] DEBUG -- : 
D, [2015-01-01T10:04:22.323024 #10344] DEBUG -- : 
I, [2015-01-01T10:04:22.389028 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 10:04:22 +0000
D, [2015-01-01T10:04:22.474033 #10344] DEBUG -- : 
D, [2015-01-01T10:04:22.502035 #10344] DEBUG -- : 
I, [2015-01-01T10:04:22.568038 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 10:04:22 +0000
D, [2015-01-01T10:04:22.641042 #10344] DEBUG -- : 
D, [2015-01-01T10:04:22.664044 #10344] DEBUG -- : 
I, [2015-01-01T10:04:22.732048 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 10:04:22 +0000
D, [2015-01-01T10:04:22.806052 #10344] DEBUG -- : 
D, [2015-01-01T10:04:22.829053 #10344] DEBUG -- : 
I, [2015-01-01T10:04:22.901057 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 10:04:22 +0000
D, [2015-01-01T10:04:22.987062 #10344] DEBUG -- : 
D, [2015-01-01T10:04:23.015064 #10344] DEBUG -- : 
I, [2015-01-01T10:04:23.077067 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 10:04:23 +0000
D, [2015-01-01T10:04:23.151072 #10344] DEBUG -- : 
D, [2015-01-01T10:04:23.176073 #10344] DEBUG -- : 
I, [2015-01-01T10:04:23.245077 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 10:04:23 +0000
D, [2015-01-01T10:04:23.318081 #10344] DEBUG -- : 
D, [2015-01-01T10:04:23.347083 #10344] DEBUG -- : 
I, [2015-01-01T10:04:23.406086 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 10:04:23 +0000
D, [2015-01-01T10:04:23.484091 #10344] DEBUG -- : 
D, [2015-01-01T10:04:23.510092 #10344] DEBUG -- : 
I, [2015-01-01T10:04:23.577096 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 10:04:23 +0000
D, [2015-01-01T10:04:23.651100 #10344] DEBUG -- : 
D, [2015-01-01T10:04:23.676102 #10344] DEBUG -- : 
I, [2015-01-01T10:04:23.741105 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 10:04:23 +0000
D, [2015-01-01T10:04:23.814110 #10344] DEBUG -- : 
D, [2015-01-01T10:04:23.839111 #10344] DEBUG -- : 
I, [2015-01-01T10:04:23.899114 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 10:04:23 +0000
D, [2015-01-01T10:04:23.973119 #10344] DEBUG -- : 
D, [2015-01-01T10:04:23.997120 #10344] DEBUG -- : 
I, [2015-01-01T10:04:24.060124 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 10:04:23 +0000
D, [2015-01-01T10:04:24.142128 #10344] DEBUG -- : 
D, [2015-01-01T10:04:24.171130 #10344] DEBUG -- : 
I, [2015-01-01T10:04:24.240134 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 10:04:24 +0000
D, [2015-01-01T10:04:24.317138 #10344] DEBUG -- : 
D, [2015-01-01T10:04:24.343140 #10344] DEBUG -- : 
I, [2015-01-01T10:04:24.405143 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 10:04:24 +0000
D, [2015-01-01T10:04:24.484148 #10344] DEBUG -- : 
D, [2015-01-01T10:04:24.512150 #10344] DEBUG -- : 
I, [2015-01-01T10:04:24.579153 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 10:04:24 +0000
D, [2015-01-01T10:04:24.652158 #10344] DEBUG -- : 
D, [2015-01-01T10:04:24.677159 #10344] DEBUG -- : 
I, [2015-01-01T10:04:24.741163 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 10:04:24 +0000
D, [2015-01-01T10:04:24.816167 #10344] DEBUG -- : 
D, [2015-01-01T10:04:24.842168 #10344] DEBUG -- : 
I, [2015-01-01T10:04:24.907172 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 10:04:24 +0000
D, [2015-01-01T10:04:24.996177 #10344] DEBUG -- : 
D, [2015-01-01T10:04:25.020179 #10344] DEBUG -- : 
I, [2015-01-01T10:04:25.075182 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 10:04:25 +0000
D, [2015-01-01T10:04:25.140185 #10344] DEBUG -- : 
D, [2015-01-01T10:04:25.169187 #10344] DEBUG -- : 
I, [2015-01-01T10:04:25.233191 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 10:04:25 +0000
D, [2015-01-01T10:04:25.302195 #10344] DEBUG -- : 
D, [2015-01-01T10:04:25.322196 #10344] DEBUG -- : 
I, [2015-01-01T10:04:25.375199 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 10:04:25 +0000
D, [2015-01-01T10:15:27.641000 #10344] DEBUG -- : 
D, [2015-01-01T10:15:27.656600 #10344] DEBUG -- : 
I, [2015-01-01T10:15:27.719000 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 10:15:27 +0000
I, [2015-01-01T10:15:29.926807 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T10:15:30.082807 #10344] DEBUG -- :   [1m[36mCart Load (15.6ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T10:15:30.344408 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T10:15:30.547209 #10344]  INFO -- : Cache digest for store/index.xml: a93d4e2e981ab3dfce98a095c3b6c059
I, [2015-01-01T10:15:30.625209 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (0.0ms)
I, [2015-01-01T10:15:30.687609 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (402.0ms)
D, [2015-01-01T10:15:30.984009 #10344] DEBUG -- :   [1m[36mLineItem Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 35]]
D, [2015-01-01T10:15:31.108810 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
I, [2015-01-01T10:15:31.155610 #10344]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-01T10:15:31.296010 #10344]  INFO -- :   Rendered carts/_cart.html.erb (265.2ms)
I, [2015-01-01T10:15:31.342810 #10344]  INFO -- : Completed 500 Internal Server Error in 1385ms
F, [2015-01-01T10:15:31.717211 #10344] FATAL -- : 
ActionView::Template::Error (No route matches {:controller=>"orders", :action=>"ppcheckout"}):
     8: 	</tr>
     9: </table>
    10:   <div class="ppbutton">
    11:     <%= link_to image_tag("https://www.paypal.com/en_US/i/btn/btn_xpressCheckout.gif"), :controller => 'orders', :action => 'ppcheckout' %>
    12:     </div>
    13: 
    14: <%= button_to "Checkout", new_order_path, method: :get %>
  app/views/carts/_cart.html.erb:11:in `_app_views_carts__cart_html_erb___1502487567_47939180'
  app/views/layouts/application.html.erb:18:in `block in _app_views_layouts_application_html_erb___1305337884_84093600'
  app/helpers/application_helper.rb:6:in `hidden_div_if'
  app/views/layouts/application.html.erb:17:in `_app_views_layouts_application_html_erb___1305337884_84093600'


I, [2015-01-01T10:15:32.281812 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (15.6ms)
I, [2015-01-01T10:15:32.437812 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (15.6ms)
I, [2015-01-01T10:15:32.515812 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (343.2ms)
D, [2015-01-01T10:15:32.686219 #10344] DEBUG -- : 
D, [2015-01-01T10:15:32.708220 #10344] DEBUG -- : 
I, [2015-01-01T10:15:32.752222 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 10:15:32 +0000
I, [2015-01-01T10:15:32.857228 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T10:15:32.931233 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T10:15:33.025238 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T10:15:33.100242 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (4.0ms)
I, [2015-01-01T10:15:33.148245 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (145.0ms)
D, [2015-01-01T10:15:33.370258 #10344] DEBUG -- :   [1m[36mLineItem Exists (3.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 35]]
D, [2015-01-01T10:15:33.458263 #10344] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
I, [2015-01-01T10:15:33.490265 #10344]  INFO -- :   Rendered collection (1.0ms)
I, [2015-01-01T10:15:33.548268 #10344]  INFO -- :   Rendered carts/_cart.html.erb (134.0ms)
I, [2015-01-01T10:15:33.584270 #10344]  INFO -- : Completed 500 Internal Server Error in 691ms
F, [2015-01-01T10:15:33.941290 #10344] FATAL -- : 
ActionView::Template::Error (No route matches {:controller=>"orders", :action=>"ppcheckout"}):
     8: 	</tr>
     9: </table>
    10:   <div class="ppbutton">
    11:     <%= link_to image_tag("https://www.paypal.com/en_US/i/btn/btn_xpressCheckout.gif"), :controller => 'orders', :action => 'ppcheckout' %>
    12:     </div>
    13: 
    14: <%= button_to "Checkout", new_order_path, method: :get %>
  app/views/carts/_cart.html.erb:11:in `_app_views_carts__cart_html_erb___1502487567_51114000'
  app/views/layouts/application.html.erb:18:in `block in _app_views_layouts_application_html_erb___1305337884_84093600'
  app/helpers/application_helper.rb:6:in `hidden_div_if'
  app/views/layouts/application.html.erb:17:in `_app_views_layouts_application_html_erb___1305337884_84093600'


I, [2015-01-01T10:15:34.353314 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (23.0ms)
I, [2015-01-01T10:15:34.496322 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (12.0ms)
I, [2015-01-01T10:15:34.586327 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/template_error.erb within rescues/layout (299.0ms)
D, [2015-01-01T10:17:23.710458 #10344] DEBUG -- : 
D, [2015-01-01T10:17:23.731459 #10344] DEBUG -- : 
I, [2015-01-01T10:17:23.774461 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 10:17:23 +0000
I, [2015-01-01T10:17:26.713629 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T10:17:26.867638 #10344] DEBUG -- :   [1m[36mCart Load (3.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T10:17:27.125653 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T10:17:27.385668 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (4.0ms)
I, [2015-01-01T10:17:27.441671 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (347.0ms)
D, [2015-01-01T10:17:27.798692 #10344] DEBUG -- :   [1m[36mLineItem Exists (3.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 35]]
D, [2015-01-01T10:17:27.906698 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
I, [2015-01-01T10:17:27.947700 #10344]  INFO -- :   Rendered collection (1.0ms)
I, [2015-01-01T10:17:28.071707 #10344]  INFO -- :   Rendered carts/_cart.html.erb (215.0ms)
I, [2015-01-01T10:17:28.155712 #10344]  INFO -- : Completed 200 OK in 1386ms (Views: 1059.1ms | ActiveRecord: 35.0ms)
D, [2015-01-01T10:17:28.346723 #10344] DEBUG -- : 
D, [2015-01-01T10:17:28.380725 #10344] DEBUG -- : 
I, [2015-01-01T10:17:28.460729 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 10:17:28 +0000
D, [2015-01-01T10:17:28.543734 #10344] DEBUG -- : 
D, [2015-01-01T10:17:28.568736 #10344] DEBUG -- : 
I, [2015-01-01T10:17:28.633739 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 10:17:28 +0000
D, [2015-01-01T10:17:28.709744 #10344] DEBUG -- : 
D, [2015-01-01T10:17:28.735745 #10344] DEBUG -- : 
I, [2015-01-01T10:17:28.799749 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 10:17:28 +0000
D, [2015-01-01T10:17:28.875753 #10344] DEBUG -- : 
D, [2015-01-01T10:17:28.898754 #10344] DEBUG -- : 
I, [2015-01-01T10:17:28.963758 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 10:17:28 +0000
D, [2015-01-01T10:17:29.040763 #10344] DEBUG -- : 
D, [2015-01-01T10:17:29.064764 #10344] DEBUG -- : 
I, [2015-01-01T10:17:29.126768 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 10:17:29 +0000
D, [2015-01-01T10:17:29.208772 #10344] DEBUG -- : 
D, [2015-01-01T10:17:29.229773 #10344] DEBUG -- : 
I, [2015-01-01T10:17:29.281776 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 10:17:29 +0000
D, [2015-01-01T10:17:29.363781 #10344] DEBUG -- : 
D, [2015-01-01T10:17:29.391783 #10344] DEBUG -- : 
I, [2015-01-01T10:17:29.445786 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 10:17:29 +0000
D, [2015-01-01T10:17:29.527790 #10344] DEBUG -- : 
D, [2015-01-01T10:17:29.548792 #10344] DEBUG -- : 
I, [2015-01-01T10:17:29.622796 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 10:17:29 +0000
D, [2015-01-01T10:17:29.702800 #10344] DEBUG -- : 
D, [2015-01-01T10:17:29.724802 #10344] DEBUG -- : 
I, [2015-01-01T10:17:29.780805 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 10:17:29 +0000
D, [2015-01-01T10:17:29.859809 #10344] DEBUG -- : 
D, [2015-01-01T10:17:29.878811 #10344] DEBUG -- : 
I, [2015-01-01T10:17:29.931814 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 10:17:29 +0000
D, [2015-01-01T10:17:30.014818 #10344] DEBUG -- : 
D, [2015-01-01T10:17:30.037820 #10344] DEBUG -- : 
I, [2015-01-01T10:17:30.096823 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 10:17:30 +0000
D, [2015-01-01T10:17:30.181828 #10344] DEBUG -- : 
D, [2015-01-01T10:17:30.203829 #10344] DEBUG -- : 
I, [2015-01-01T10:17:30.256832 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 10:17:30 +0000
D, [2015-01-01T10:17:30.342837 #10344] DEBUG -- : 
D, [2015-01-01T10:17:30.362838 #10344] DEBUG -- : 
I, [2015-01-01T10:17:30.416841 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 10:17:30 +0000
D, [2015-01-01T10:17:30.498846 #10344] DEBUG -- : 
D, [2015-01-01T10:17:30.517847 #10344] DEBUG -- : 
I, [2015-01-01T10:17:30.576850 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 10:17:30 +0000
D, [2015-01-01T10:17:30.657855 #10344] DEBUG -- : 
D, [2015-01-01T10:17:30.680856 #10344] DEBUG -- : 
I, [2015-01-01T10:17:30.734859 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 10:17:30 +0000
D, [2015-01-01T10:17:30.814864 #10344] DEBUG -- : 
D, [2015-01-01T10:17:30.836865 #10344] DEBUG -- : 
I, [2015-01-01T10:17:30.890868 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 10:17:30 +0000
D, [2015-01-01T10:17:30.981874 #10344] DEBUG -- : 
D, [2015-01-01T10:17:31.029876 #10344] DEBUG -- : 
I, [2015-01-01T10:17:31.090880 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 10:17:31 +0000
D, [2015-01-01T10:17:31.173885 #10344] DEBUG -- : 
D, [2015-01-01T10:17:31.196886 #10344] DEBUG -- : 
I, [2015-01-01T10:17:31.248889 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 10:17:31 +0000
D, [2015-01-01T10:17:31.336894 #10344] DEBUG -- : 
D, [2015-01-01T10:17:31.357895 #10344] DEBUG -- : 
I, [2015-01-01T10:17:31.408898 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 10:17:31 +0000
D, [2015-01-01T10:17:31.508904 #10344] DEBUG -- : 
D, [2015-01-01T10:17:31.528905 #10344] DEBUG -- : 
I, [2015-01-01T10:17:31.583908 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 10:17:31 +0000
D, [2015-01-01T10:17:31.662913 #10344] DEBUG -- : 
D, [2015-01-01T10:17:31.682914 #10344] DEBUG -- : 
I, [2015-01-01T10:17:31.735917 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 10:17:31 +0000
D, [2015-01-01T10:17:31.826922 #10344] DEBUG -- : 
D, [2015-01-01T10:17:31.849923 #10344] DEBUG -- : 
I, [2015-01-01T10:17:31.912927 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 10:17:31 +0000
D, [2015-01-01T10:17:31.990931 #10344] DEBUG -- : 
D, [2015-01-01T10:17:32.011933 #10344] DEBUG -- : 
I, [2015-01-01T10:17:32.068936 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 10:17:32 +0000
D, [2015-01-01T10:17:32.140940 #10344] DEBUG -- : 
D, [2015-01-01T10:17:32.161941 #10344] DEBUG -- : 
I, [2015-01-01T10:17:32.213944 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 10:17:32 +0000
D, [2015-01-01T10:17:32.292949 #10344] DEBUG -- : 
D, [2015-01-01T10:17:32.311950 #10344] DEBUG -- : 
I, [2015-01-01T10:17:32.363953 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 10:17:32 +0000
D, [2015-01-01T10:17:32.436957 #10344] DEBUG -- : 
D, [2015-01-01T10:17:32.456958 #10344] DEBUG -- : 
I, [2015-01-01T10:17:32.509961 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 10:17:32 +0000
D, [2015-01-01T10:17:32.607967 #10344] DEBUG -- : 
D, [2015-01-01T10:17:32.632968 #10344] DEBUG -- : 
I, [2015-01-01T10:17:32.699972 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 10:17:32 +0000
D, [2015-01-01T10:17:32.780977 #10344] DEBUG -- : 
D, [2015-01-01T10:17:32.800978 #10344] DEBUG -- : 
I, [2015-01-01T10:17:32.847980 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 10:17:32 +0000
D, [2015-01-01T10:17:32.921985 #10344] DEBUG -- : 
D, [2015-01-01T10:17:32.938986 #10344] DEBUG -- : 
I, [2015-01-01T10:17:32.992989 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 10:17:32 +0000
D, [2015-01-01T10:17:33.063993 #10344] DEBUG -- : 
D, [2015-01-01T10:17:33.083994 #10344] DEBUG -- : 
I, [2015-01-01T10:17:33.128996 #10344]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-01 10:17:33 +0000
D, [2015-01-01T10:17:34.641212 #10344] DEBUG -- : 
D, [2015-01-01T10:17:34.672412 #10344] DEBUG -- : 
I, [2015-01-01T10:17:34.719212 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 10:17:34 +0000
I, [2015-01-01T10:17:34.890812 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T10:17:34.968813 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T10:17:35.046813 #10344] DEBUG -- :   [1m[36mCart Load (15.6ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T10:17:35.124813 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-01T10:17:35.234013 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 35]]
D, [2015-01-01T10:17:35.532414 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T10:17:35.579214 #10344] DEBUG -- :   [1m[36m (15.6ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:17:35.782014 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 35], ["created_at", Thu, 01 Jan 2015 10:17:35 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:835ee88,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 10:17:35 UTC +00:00]]
D, [2015-01-01T10:17:36.000414 #10344] DEBUG -- :   [1m[36m (171.6ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T10:17:36.156415 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
I, [2015-01-01T10:17:36.250015 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T10:17:36.328015 #10344]  INFO -- :   Rendered carts/_cart.html.erb (249.6ms)
I, [2015-01-01T10:17:36.390415 #10344]  INFO -- :   Rendered line_items/create.js.erb (312.0ms)
I, [2015-01-01T10:17:36.437215 #10344]  INFO -- : Completed 200 OK in 1422ms (Views: 374.4ms | ActiveRecord: 218.4ms)
D, [2015-01-01T10:17:42.527494 #10344] DEBUG -- : 
D, [2015-01-01T10:17:42.558694 #10344] DEBUG -- : 
I, [2015-01-01T10:17:42.605494 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 10:17:42 +0000
I, [2015-01-01T10:17:42.778094 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T10:17:42.902894 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T10:17:43.183695 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
I, [2015-01-01T10:17:43.261695 #10344]  INFO -- : Completed 500 Internal Server Error in 437ms
F, [2015-01-01T10:17:43.386495 #10344] FATAL -- : 
NameError (undefined local variable or method `order' for #<OrdersController:0x00000005987448>):
  app/controllers/orders_controller.rb:142:in `ppcheckout'


I, [2015-01-01T10:17:43.824296 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (15.6ms)
I, [2015-01-01T10:17:43.964696 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (15.6ms)
I, [2015-01-01T10:17:44.089496 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (15.6ms)
I, [2015-01-01T10:17:44.183097 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (453.4ms)
D, [2015-01-01T10:17:44.274498 #10344] DEBUG -- : 
D, [2015-01-01T10:17:44.294500 #10344] DEBUG -- : 
I, [2015-01-01T10:17:44.343502 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 10:17:44 +0000
I, [2015-01-01T10:17:44.467509 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T10:17:44.544514 #10344] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T10:17:44.617518 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
I, [2015-01-01T10:17:44.682522 #10344]  INFO -- : Completed 500 Internal Server Error in 179ms
F, [2015-01-01T10:17:44.815529 #10344] FATAL -- : 
NameError (undefined local variable or method `order' for #<OrdersController:0x0000000934c110>):
  app/controllers/orders_controller.rb:142:in `ppcheckout'


I, [2015-01-01T10:17:45.141548 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (15.0ms)
I, [2015-01-01T10:17:45.270555 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (20.0ms)
I, [2015-01-01T10:17:45.401563 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (14.0ms)
I, [2015-01-01T10:17:45.488568 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (422.0ms)
D, [2015-01-01T10:18:35.705521 #10344] DEBUG -- : 
D, [2015-01-01T10:18:35.728523 #10344] DEBUG -- : 
I, [2015-01-01T10:18:35.776525 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 10:18:35 +0000
I, [2015-01-01T10:18:38.669691 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T10:18:38.833700 #10344] DEBUG -- :   [1m[36mCart Load (3.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T10:18:39.096715 #10344] DEBUG -- :   [1m[35mProduct Load (3.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T10:18:39.375731 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (5.0ms)
I, [2015-01-01T10:18:39.424734 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (369.0ms)
D, [2015-01-01T10:18:39.757753 #10344] DEBUG -- :   [1m[36mLineItem Exists (2.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 35]]
D, [2015-01-01T10:18:39.855759 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
D, [2015-01-01T10:18:40.185777 #10344] DEBUG -- :   [1m[36mProduct Load (4.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-01T10:18:40.248781 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (136.0ms)
I, [2015-01-01T10:18:40.371788 #10344]  INFO -- :   Rendered carts/_cart.html.erb (560.0ms)
I, [2015-01-01T10:18:40.449793 #10344]  INFO -- : Completed 200 OK in 1730ms (Views: 1386.1ms | ActiveRecord: 41.0ms)
D, [2015-01-01T10:18:40.795812 #10344] DEBUG -- : 
D, [2015-01-01T10:18:40.865816 #10344] DEBUG -- : 
I, [2015-01-01T10:18:40.931820 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 10:18:40 +0000
D, [2015-01-01T10:18:41.014825 #10344] DEBUG -- : 
D, [2015-01-01T10:18:41.035826 #10344] DEBUG -- : 
I, [2015-01-01T10:18:41.088829 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 10:18:41 +0000
D, [2015-01-01T10:18:41.166834 #10344] DEBUG -- : 
D, [2015-01-01T10:18:41.190835 #10344] DEBUG -- : 
I, [2015-01-01T10:18:41.244838 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 10:18:41 +0000
D, [2015-01-01T10:18:41.331843 #10344] DEBUG -- : 
D, [2015-01-01T10:18:41.352844 #10344] DEBUG -- : 
I, [2015-01-01T10:18:41.407847 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 10:18:41 +0000
D, [2015-01-01T10:18:41.486852 #10344] DEBUG -- : 
D, [2015-01-01T10:18:41.507853 #10344] DEBUG -- : 
I, [2015-01-01T10:18:41.564856 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 10:18:41 +0000
D, [2015-01-01T10:18:41.653861 #10344] DEBUG -- : 
D, [2015-01-01T10:18:41.676863 #10344] DEBUG -- : 
I, [2015-01-01T10:18:41.731866 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 10:18:41 +0000
D, [2015-01-01T10:18:41.813871 #10344] DEBUG -- : 
D, [2015-01-01T10:18:41.834872 #10344] DEBUG -- : 
I, [2015-01-01T10:18:41.887875 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 10:18:41 +0000
D, [2015-01-01T10:18:41.990881 #10344] DEBUG -- : 
D, [2015-01-01T10:18:42.013882 #10344] DEBUG -- : 
I, [2015-01-01T10:18:42.064885 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 10:18:42 +0000
D, [2015-01-01T10:18:42.140889 #10344] DEBUG -- : 
D, [2015-01-01T10:18:42.168891 #10344] DEBUG -- : 
I, [2015-01-01T10:18:42.225894 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 10:18:42 +0000
D, [2015-01-01T10:18:42.302899 #10344] DEBUG -- : 
D, [2015-01-01T10:18:42.322900 #10344] DEBUG -- : 
I, [2015-01-01T10:18:42.373903 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 10:18:42 +0000
D, [2015-01-01T10:18:42.452907 #10344] DEBUG -- : 
D, [2015-01-01T10:18:42.473908 #10344] DEBUG -- : 
I, [2015-01-01T10:18:42.534912 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 10:18:42 +0000
D, [2015-01-01T10:18:42.621917 #10344] DEBUG -- : 
D, [2015-01-01T10:18:42.652919 #10344] DEBUG -- : 
I, [2015-01-01T10:18:42.742924 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 10:18:42 +0000
D, [2015-01-01T10:18:42.826929 #10344] DEBUG -- : 
D, [2015-01-01T10:18:42.847930 #10344] DEBUG -- : 
I, [2015-01-01T10:18:42.904933 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 10:18:42 +0000
D, [2015-01-01T10:18:42.984938 #10344] DEBUG -- : 
D, [2015-01-01T10:18:43.003939 #10344] DEBUG -- : 
I, [2015-01-01T10:18:43.060942 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 10:18:43 +0000
D, [2015-01-01T10:18:43.140946 #10344] DEBUG -- : 
D, [2015-01-01T10:18:43.164948 #10344] DEBUG -- : 
I, [2015-01-01T10:18:43.222951 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 10:18:43 +0000
D, [2015-01-01T10:18:43.300956 #10344] DEBUG -- : 
D, [2015-01-01T10:18:43.319957 #10344] DEBUG -- : 
I, [2015-01-01T10:18:43.370960 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 10:18:43 +0000
D, [2015-01-01T10:18:43.458965 #10344] DEBUG -- : 
D, [2015-01-01T10:18:43.478966 #10344] DEBUG -- : 
I, [2015-01-01T10:18:43.560971 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 10:18:43 +0000
D, [2015-01-01T10:18:43.644975 #10344] DEBUG -- : 
D, [2015-01-01T10:18:43.662976 #10344] DEBUG -- : 
I, [2015-01-01T10:18:43.711979 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 10:18:43 +0000
D, [2015-01-01T10:18:43.788984 #10344] DEBUG -- : 
D, [2015-01-01T10:18:43.810985 #10344] DEBUG -- : 
I, [2015-01-01T10:18:43.862988 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 10:18:43 +0000
D, [2015-01-01T10:18:43.939992 #10344] DEBUG -- : 
D, [2015-01-01T10:18:43.959993 #10344] DEBUG -- : 
I, [2015-01-01T10:18:44.011996 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 10:18:43 +0000
D, [2015-01-01T10:18:44.090001 #10344] DEBUG -- : 
D, [2015-01-01T10:18:44.112002 #10344] DEBUG -- : 
I, [2015-01-01T10:18:44.167005 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 10:18:44 +0000
D, [2015-01-01T10:18:44.257010 #10344] DEBUG -- : 
D, [2015-01-01T10:18:44.277011 #10344] DEBUG -- : 
I, [2015-01-01T10:18:44.327014 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 10:18:44 +0000
D, [2015-01-01T10:18:44.403019 #10344] DEBUG -- : 
D, [2015-01-01T10:18:44.422020 #10344] DEBUG -- : 
I, [2015-01-01T10:18:44.478023 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 10:18:44 +0000
D, [2015-01-01T10:18:44.556027 #10344] DEBUG -- : 
D, [2015-01-01T10:18:44.575029 #10344] DEBUG -- : 
I, [2015-01-01T10:18:44.627031 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 10:18:44 +0000
D, [2015-01-01T10:18:44.700036 #10344] DEBUG -- : 
D, [2015-01-01T10:18:44.721037 #10344] DEBUG -- : 
I, [2015-01-01T10:18:44.776040 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 10:18:44 +0000
D, [2015-01-01T10:18:44.852044 #10344] DEBUG -- : 
D, [2015-01-01T10:18:44.872045 #10344] DEBUG -- : 
I, [2015-01-01T10:18:44.926049 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 10:18:44 +0000
D, [2015-01-01T10:18:45.035055 #10344] DEBUG -- : 
D, [2015-01-01T10:18:45.077057 #10344] DEBUG -- : 
I, [2015-01-01T10:18:45.149061 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 10:18:45 +0000
D, [2015-01-01T10:18:45.220065 #10344] DEBUG -- : 
D, [2015-01-01T10:18:45.239066 #10344] DEBUG -- : 
I, [2015-01-01T10:18:45.289069 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 10:18:45 +0000
D, [2015-01-01T10:18:45.396075 #10344] DEBUG -- : 
D, [2015-01-01T10:18:45.427077 #10344] DEBUG -- : 
I, [2015-01-01T10:18:45.484080 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 10:18:45 +0000
D, [2015-01-01T10:18:45.560085 #10344] DEBUG -- : 
D, [2015-01-01T10:18:45.579086 #10344] DEBUG -- : 
I, [2015-01-01T10:18:45.633089 #10344]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-01 10:18:45 +0000
D, [2015-01-01T10:18:49.471110 #10344] DEBUG -- : 
D, [2015-01-01T10:18:49.486710 #10344] DEBUG -- : 
I, [2015-01-01T10:18:49.549110 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 10:18:49 +0000
I, [2015-01-01T10:18:49.689510 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T10:18:49.829910 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T10:18:50.017111 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
I, [2015-01-01T10:18:50.141911 #10344]  INFO -- : Completed 500 Internal Server Error in 421ms
F, [2015-01-01T10:18:50.266711 #10344] FATAL -- : 
NoMethodError (undefined method `line_items' for nil:NilClass):
  app/models/order.rb:12:in `add_line_items_from_cart'
  app/controllers/orders_controller.rb:143:in `ppcheckout'


I, [2015-01-01T10:18:50.583712 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (15.6ms)
I, [2015-01-01T10:18:50.708512 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (15.6ms)
I, [2015-01-01T10:18:50.833312 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (15.6ms)
I, [2015-01-01T10:18:50.926912 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (395.0ms)
D, [2015-01-01T10:18:51.017715 #10344] DEBUG -- : 
D, [2015-01-01T10:18:51.038716 #10344] DEBUG -- : 
I, [2015-01-01T10:18:51.090719 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 10:18:51 +0000
I, [2015-01-01T10:18:51.215726 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T10:18:51.293731 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T10:18:51.366735 #10344] DEBUG -- :   [1m[36mUser Load (3.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
I, [2015-01-01T10:18:51.418738 #10344]  INFO -- : Completed 500 Internal Server Error in 160ms
F, [2015-01-01T10:18:51.537745 #10344] FATAL -- : 
NoMethodError (undefined method `line_items' for nil:NilClass):
  app/models/order.rb:12:in `add_line_items_from_cart'
  app/controllers/orders_controller.rb:143:in `ppcheckout'


I, [2015-01-01T10:18:51.865763 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (16.0ms)
I, [2015-01-01T10:18:51.998771 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (20.0ms)
I, [2015-01-01T10:18:52.131779 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (14.0ms)
I, [2015-01-01T10:18:52.217784 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (427.0ms)
D, [2015-01-01T10:19:08.659238 #10344] DEBUG -- : 
D, [2015-01-01T10:19:08.674838 #10344] DEBUG -- : 
I, [2015-01-01T10:19:08.737238 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 10:19:08 +0000
I, [2015-01-01T10:19:08.846439 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T10:19:08.940039 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 35]]
D, [2015-01-01T10:19:09.064839 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-01T10:19:09.164840 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (0.0ms)
I, [2015-01-01T10:19:09.217843 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (195.6ms)
D, [2015-01-01T10:19:09.463857 #10344] DEBUG -- :   [1m[35mLineItem Exists (2.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 35]]
D, [2015-01-01T10:19:09.558863 #10344] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 35]]
D, [2015-01-01T10:19:09.670869 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-01T10:19:09.734873 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (120.0ms)
I, [2015-01-01T10:19:09.813877 #10344]  INFO -- :   Rendered carts/_cart.html.erb (300.0ms)
I, [2015-01-01T10:19:09.886882 #10344]  INFO -- : Completed 200 OK in 982ms (Views: 880.2ms | ActiveRecord: 6.0ms)
D, [2015-01-01T10:19:09.933884 #10344] DEBUG -- : 
D, [2015-01-01T10:19:09.967886 #10344] DEBUG -- : 
I, [2015-01-01T10:19:10.033890 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 10:19:09 +0000
I, [2015-01-01T10:19:10.129895 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T10:19:10.212900 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T10:19:10.321906 #10344] DEBUG -- :   [1m[35mProduct Load (4.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T10:19:10.396911 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (4.0ms)
I, [2015-01-01T10:19:10.444914 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (154.0ms)
D, [2015-01-01T10:19:10.693928 #10344] DEBUG -- :   [1m[36mLineItem Exists (2.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 35]]
D, [2015-01-01T10:19:10.786933 #10344] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
D, [2015-01-01T10:19:10.897939 #10344] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-01T10:19:10.957943 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (116.0ms)
I, [2015-01-01T10:19:11.037947 #10344]  INFO -- :   Rendered carts/_cart.html.erb (293.0ms)
I, [2015-01-01T10:19:11.109952 #10344]  INFO -- : Completed 200 OK in 934ms (Views: 833.0ms | ActiveRecord: 13.0ms)
D, [2015-01-01T10:19:11.530976 #10344] DEBUG -- : 
D, [2015-01-01T10:19:11.562977 #10344] DEBUG -- : 
I, [2015-01-01T10:19:11.620981 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 10:19:11 +0000
D, [2015-01-01T10:19:11.697985 #10344] DEBUG -- : 
D, [2015-01-01T10:19:11.716986 #10344] DEBUG -- : 
I, [2015-01-01T10:19:11.771989 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 10:19:11 +0000
D, [2015-01-01T10:19:11.847994 #10344] DEBUG -- : 
D, [2015-01-01T10:19:11.903997 #10344] DEBUG -- : 
I, [2015-01-01T10:19:11.951000 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 10:19:11 +0000
D, [2015-01-01T10:19:12.034004 #10344] DEBUG -- : 
D, [2015-01-01T10:19:12.054006 #10344] DEBUG -- : 
I, [2015-01-01T10:19:12.108009 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 10:19:12 +0000
D, [2015-01-01T10:19:12.188013 #10344] DEBUG -- : 
D, [2015-01-01T10:19:12.214015 #10344] DEBUG -- : 
I, [2015-01-01T10:19:12.267018 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 10:19:12 +0000
D, [2015-01-01T10:19:12.348022 #10344] DEBUG -- : 
D, [2015-01-01T10:19:12.373024 #10344] DEBUG -- : 
I, [2015-01-01T10:19:12.433027 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 10:19:12 +0000
D, [2015-01-01T10:19:12.509032 #10344] DEBUG -- : 
D, [2015-01-01T10:19:12.530033 #10344] DEBUG -- : 
I, [2015-01-01T10:19:12.583036 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 10:19:12 +0000
D, [2015-01-01T10:19:12.661040 #10344] DEBUG -- : 
D, [2015-01-01T10:19:12.681041 #10344] DEBUG -- : 
I, [2015-01-01T10:19:12.733044 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 10:19:12 +0000
D, [2015-01-01T10:19:12.811049 #10344] DEBUG -- : 
D, [2015-01-01T10:19:12.834050 #10344] DEBUG -- : 
I, [2015-01-01T10:19:12.885053 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 10:19:12 +0000
D, [2015-01-01T10:19:12.958057 #10344] DEBUG -- : 
D, [2015-01-01T10:19:12.981059 #10344] DEBUG -- : 
I, [2015-01-01T10:19:13.032061 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 10:19:12 +0000
D, [2015-01-01T10:19:13.117066 #10344] DEBUG -- : 
D, [2015-01-01T10:19:13.138068 #10344] DEBUG -- : 
I, [2015-01-01T10:19:13.196071 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 10:19:13 +0000
D, [2015-01-01T10:19:13.283076 #10344] DEBUG -- : 
D, [2015-01-01T10:19:13.304077 #10344] DEBUG -- : 
I, [2015-01-01T10:19:13.358080 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 10:19:13 +0000
D, [2015-01-01T10:19:13.449085 #10344] DEBUG -- : 
D, [2015-01-01T10:19:13.478087 #10344] DEBUG -- : 
I, [2015-01-01T10:19:13.531090 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 10:19:13 +0000
D, [2015-01-01T10:19:13.610095 #10344] DEBUG -- : 
D, [2015-01-01T10:19:13.629096 #10344] DEBUG -- : 
I, [2015-01-01T10:19:13.688099 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 10:19:13 +0000
D, [2015-01-01T10:19:13.767104 #10344] DEBUG -- : 
D, [2015-01-01T10:19:13.789105 #10344] DEBUG -- : 
I, [2015-01-01T10:19:13.840108 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 10:19:13 +0000
D, [2015-01-01T10:19:13.917112 #10344] DEBUG -- : 
D, [2015-01-01T10:19:13.938113 #10344] DEBUG -- : 
I, [2015-01-01T10:19:13.993116 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 10:19:13 +0000
D, [2015-01-01T10:19:14.096122 #10344] DEBUG -- : 
D, [2015-01-01T10:19:14.124124 #10344] DEBUG -- : 
I, [2015-01-01T10:19:14.176127 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 10:19:14 +0000
D, [2015-01-01T10:19:14.261132 #10344] DEBUG -- : 
D, [2015-01-01T10:19:14.283133 #10344] DEBUG -- : 
I, [2015-01-01T10:19:14.335136 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 10:19:14 +0000
D, [2015-01-01T10:19:14.413140 #10344] DEBUG -- : 
D, [2015-01-01T10:19:14.434142 #10344] DEBUG -- : 
I, [2015-01-01T10:19:14.489145 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 10:19:14 +0000
D, [2015-01-01T10:19:14.568149 #10344] DEBUG -- : 
D, [2015-01-01T10:19:14.589151 #10344] DEBUG -- : 
I, [2015-01-01T10:19:14.641154 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 10:19:14 +0000
D, [2015-01-01T10:19:14.735159 #10344] DEBUG -- : 
D, [2015-01-01T10:19:14.755160 #10344] DEBUG -- : 
I, [2015-01-01T10:19:14.805163 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 10:19:14 +0000
D, [2015-01-01T10:19:14.896168 #10344] DEBUG -- : 
D, [2015-01-01T10:19:14.916169 #10344] DEBUG -- : 
I, [2015-01-01T10:19:14.970172 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 10:19:14 +0000
D, [2015-01-01T10:19:15.047177 #10344] DEBUG -- : 
D, [2015-01-01T10:19:15.069178 #10344] DEBUG -- : 
I, [2015-01-01T10:19:15.128181 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 10:19:15 +0000
D, [2015-01-01T10:19:15.206186 #10344] DEBUG -- : 
D, [2015-01-01T10:19:15.227187 #10344] DEBUG -- : 
I, [2015-01-01T10:19:15.282190 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 10:19:15 +0000
D, [2015-01-01T10:19:15.354194 #10344] DEBUG -- : 
D, [2015-01-01T10:19:15.374195 #10344] DEBUG -- : 
I, [2015-01-01T10:19:15.422198 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 10:19:15 +0000
D, [2015-01-01T10:19:15.496202 #10344] DEBUG -- : 
D, [2015-01-01T10:19:15.517204 #10344] DEBUG -- : 
I, [2015-01-01T10:19:15.570207 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 10:19:15 +0000
D, [2015-01-01T10:19:15.664212 #10344] DEBUG -- : 
D, [2015-01-01T10:19:15.690214 #10344] DEBUG -- : 
I, [2015-01-01T10:19:15.744217 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 10:19:15 +0000
D, [2015-01-01T10:19:15.815221 #10344] DEBUG -- : 
D, [2015-01-01T10:19:15.837222 #10344] DEBUG -- : 
I, [2015-01-01T10:19:15.900226 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 10:19:15 +0000
D, [2015-01-01T10:19:15.974230 #10344] DEBUG -- : 
D, [2015-01-01T10:19:16.022233 #10344] DEBUG -- : 
I, [2015-01-01T10:19:16.079236 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 10:19:16 +0000
D, [2015-01-01T10:19:16.153240 #10344] DEBUG -- : 
D, [2015-01-01T10:19:16.178241 #10344] DEBUG -- : 
I, [2015-01-01T10:19:16.236245 #10344]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-01 10:19:16 +0000
D, [2015-01-01T10:19:18.869261 #10344] DEBUG -- : 
D, [2015-01-01T10:19:18.900461 #10344] DEBUG -- : 
I, [2015-01-01T10:19:18.978461 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 10:19:18 +0000
I, [2015-01-01T10:19:19.118862 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T10:19:19.196862 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T10:19:19.274862 #10344] DEBUG -- :   [1m[35mCart Load (15.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 35]]
D, [2015-01-01T10:19:19.368462 #10344] DEBUG -- :   [1m[36mProduct Load (15.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-01T10:19:19.477662 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 35]]
D, [2015-01-01T10:19:19.524462 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:19:19.664863 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = 42  [["quantity", 2], ["updated_at", Thu, 01 Jan 2015 10:19:19 UTC +00:00]]
D, [2015-01-01T10:19:19.805263 #10344] DEBUG -- :   [1m[36m (93.6ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T10:19:19.930063 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
D, [2015-01-01T10:19:20.039263 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-01T10:19:20.101663 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (109.2ms)
I, [2015-01-01T10:19:20.179664 #10344]  INFO -- :   Rendered carts/_cart.html.erb (280.8ms)
I, [2015-01-01T10:19:20.226464 #10344]  INFO -- :   Rendered line_items/create.js.erb (343.2ms)
I, [2015-01-01T10:19:20.273264 #10344]  INFO -- : Completed 200 OK in 1030ms (Views: 421.2ms | ActiveRecord: 124.8ms)
D, [2015-01-01T10:19:23.245731 #10344] DEBUG -- : 
D, [2015-01-01T10:19:23.276931 #10344] DEBUG -- : 
I, [2015-01-01T10:19:23.323731 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 10:19:23 +0000
I, [2015-01-01T10:19:23.432931 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T10:19:23.510931 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T10:19:23.588931 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
I, [2015-01-01T10:19:23.635731 #10344]  INFO -- : Completed 500 Internal Server Error in 172ms
F, [2015-01-01T10:19:23.760532 #10344] FATAL -- : 
NoMethodError (undefined method `line_items' for nil:NilClass):
  app/models/order.rb:12:in `add_line_items_from_cart'
  app/controllers/orders_controller.rb:143:in `ppcheckout'


I, [2015-01-01T10:19:24.088132 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (15.6ms)
I, [2015-01-01T10:19:24.228533 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (31.2ms)
I, [2015-01-01T10:19:24.353333 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (15.6ms)
I, [2015-01-01T10:19:24.446933 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (405.6ms)
D, [2015-01-01T10:19:24.535334 #10344] DEBUG -- : 
D, [2015-01-01T10:19:24.557336 #10344] DEBUG -- : 
I, [2015-01-01T10:19:24.614339 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 10:19:24 +0000
I, [2015-01-01T10:19:24.711345 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T10:19:24.786349 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T10:19:24.865353 #10344] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
I, [2015-01-01T10:19:24.916356 #10344]  INFO -- : Completed 500 Internal Server Error in 163ms
F, [2015-01-01T10:19:25.038363 #10344] FATAL -- : 
NoMethodError (undefined method `line_items' for nil:NilClass):
  app/models/order.rb:12:in `add_line_items_from_cart'
  app/controllers/orders_controller.rb:143:in `ppcheckout'


I, [2015-01-01T10:19:25.345381 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (16.0ms)
I, [2015-01-01T10:19:25.485389 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (21.0ms)
I, [2015-01-01T10:19:25.620397 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (13.0ms)
I, [2015-01-01T10:19:25.709402 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (417.0ms)
D, [2015-01-01T10:19:50.436531 #10344] DEBUG -- : 
D, [2015-01-01T10:19:50.457533 #10344] DEBUG -- : 
I, [2015-01-01T10:19:50.508535 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 10:19:50 +0000
I, [2015-01-01T10:19:52.957676 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T10:19:53.080683 #10344] DEBUG -- :   [1m[35mUser Load (3.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T10:19:53.265693 #10344] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T10:19:53.408701 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 35]]
D, [2015-01-01T10:19:53.676717 #10344] DEBUG -- :   [1m[36mLineItem Load (3.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 35]]
I, [2015-01-01T10:19:53.977734 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T10:19:54.016736 #10344] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2015-01-01T10:19:54.376757 #10344] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
I, [2015-01-01T10:19:54.410759 #10344]  INFO -- : failed to order.save
I, [2015-01-01T10:19:54.456761 #10344]  INFO -- : Completed 500 Internal Server Error in 1458ms
F, [2015-01-01T10:19:54.552767 #10344] FATAL -- : 
NoMethodError (undefined method `error' for #<Order:0x00000009cb39b0>):
  app/controllers/orders_controller.rb:168:in `ppcheckout'


I, [2015-01-01T10:19:54.823782 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (13.0ms)
I, [2015-01-01T10:19:54.971791 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (38.0ms)
I, [2015-01-01T10:19:55.101798 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (12.0ms)
I, [2015-01-01T10:19:55.194803 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (413.0ms)
D, [2015-01-01T10:20:32.634184 #10344] DEBUG -- : 
D, [2015-01-01T10:20:32.653185 #10344] DEBUG -- : 
I, [2015-01-01T10:20:32.692187 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 10:20:32 +0000
I, [2015-01-01T10:20:32.821194 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T10:20:32.893199 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 35]]
D, [2015-01-01T10:20:33.069209 #10344] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-01T10:20:33.311222 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (4.0ms)
I, [2015-01-01T10:20:33.356225 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (311.0ms)
D, [2015-01-01T10:20:33.590238 #10344] DEBUG -- :   [1m[35mLineItem Exists (2.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 35]]
D, [2015-01-01T10:20:33.682244 #10344] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 35]]
D, [2015-01-01T10:20:33.802251 #10344] DEBUG -- :   [1m[35mProduct Load (3.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-01T10:20:33.863254 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (126.0ms)
I, [2015-01-01T10:20:33.982261 #10344]  INFO -- :   Rendered carts/_cart.html.erb (339.0ms)
I, [2015-01-01T10:20:34.057265 #10344]  INFO -- : Completed 200 OK in 1188ms (Views: 1013.1ms | ActiveRecord: 20.0ms)
D, [2015-01-01T10:20:34.388284 #10344] DEBUG -- : 
D, [2015-01-01T10:20:34.438287 #10344] DEBUG -- : 
I, [2015-01-01T10:20:34.510291 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 10:20:34 +0000
D, [2015-01-01T10:20:34.589296 #10344] DEBUG -- : 
D, [2015-01-01T10:20:34.615297 #10344] DEBUG -- : 
I, [2015-01-01T10:20:34.665300 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 10:20:34 +0000
D, [2015-01-01T10:20:34.740304 #10344] DEBUG -- : 
D, [2015-01-01T10:20:34.770306 #10344] DEBUG -- : 
I, [2015-01-01T10:20:34.821309 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 10:20:34 +0000
D, [2015-01-01T10:20:34.920315 #10344] DEBUG -- : 
D, [2015-01-01T10:20:34.946316 #10344] DEBUG -- : 
I, [2015-01-01T10:20:35.000319 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 10:20:34 +0000
D, [2015-01-01T10:20:35.080324 #10344] DEBUG -- : 
D, [2015-01-01T10:20:35.102325 #10344] DEBUG -- : 
I, [2015-01-01T10:20:35.156328 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 10:20:35 +0000
D, [2015-01-01T10:20:35.230332 #10344] DEBUG -- : 
D, [2015-01-01T10:20:35.254334 #10344] DEBUG -- : 
I, [2015-01-01T10:20:35.309337 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 10:20:35 +0000
D, [2015-01-01T10:20:35.390341 #10344] DEBUG -- : 
D, [2015-01-01T10:20:35.414343 #10344] DEBUG -- : 
I, [2015-01-01T10:20:35.470346 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 10:20:35 +0000
D, [2015-01-01T10:20:35.552351 #10344] DEBUG -- : 
D, [2015-01-01T10:20:35.572352 #10344] DEBUG -- : 
I, [2015-01-01T10:20:35.627355 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 10:20:35 +0000
D, [2015-01-01T10:20:35.700359 #10344] DEBUG -- : 
D, [2015-01-01T10:20:35.725361 #10344] DEBUG -- : 
I, [2015-01-01T10:20:35.789364 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 10:20:35 +0000
D, [2015-01-01T10:20:35.864369 #10344] DEBUG -- : 
D, [2015-01-01T10:20:35.889370 #10344] DEBUG -- : 
I, [2015-01-01T10:20:35.956374 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 10:20:35 +0000
D, [2015-01-01T10:20:36.031378 #10344] DEBUG -- : 
D, [2015-01-01T10:20:36.058380 #10344] DEBUG -- : 
I, [2015-01-01T10:20:36.130384 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 10:20:36 +0000
D, [2015-01-01T10:20:36.208388 #10344] DEBUG -- : 
D, [2015-01-01T10:20:36.232390 #10344] DEBUG -- : 
I, [2015-01-01T10:20:36.295393 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 10:20:36 +0000
D, [2015-01-01T10:20:36.371398 #10344] DEBUG -- : 
D, [2015-01-01T10:20:36.399399 #10344] DEBUG -- : 
I, [2015-01-01T10:20:36.468403 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 10:20:36 +0000
D, [2015-01-01T10:20:36.541407 #10344] DEBUG -- : 
D, [2015-01-01T10:20:36.569409 #10344] DEBUG -- : 
I, [2015-01-01T10:20:36.644413 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 10:20:36 +0000
D, [2015-01-01T10:20:36.719417 #10344] DEBUG -- : 
D, [2015-01-01T10:20:36.741419 #10344] DEBUG -- : 
I, [2015-01-01T10:20:36.805422 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 10:20:36 +0000
D, [2015-01-01T10:20:36.880427 #10344] DEBUG -- : 
D, [2015-01-01T10:20:36.907428 #10344] DEBUG -- : 
I, [2015-01-01T10:20:36.972432 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 10:20:36 +0000
D, [2015-01-01T10:20:37.051436 #10344] DEBUG -- : 
D, [2015-01-01T10:20:37.071438 #10344] DEBUG -- : 
I, [2015-01-01T10:20:37.135441 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 10:20:37 +0000
D, [2015-01-01T10:20:37.209445 #10344] DEBUG -- : 
D, [2015-01-01T10:20:37.233447 #10344] DEBUG -- : 
I, [2015-01-01T10:20:37.296450 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 10:20:37 +0000
D, [2015-01-01T10:20:37.377455 #10344] DEBUG -- : 
D, [2015-01-01T10:20:37.401456 #10344] DEBUG -- : 
I, [2015-01-01T10:20:37.465460 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 10:20:37 +0000
D, [2015-01-01T10:20:37.541464 #10344] DEBUG -- : 
D, [2015-01-01T10:20:37.566466 #10344] DEBUG -- : 
I, [2015-01-01T10:20:37.633470 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 10:20:37 +0000
D, [2015-01-01T10:20:37.723475 #10344] DEBUG -- : 
D, [2015-01-01T10:20:37.746476 #10344] DEBUG -- : 
I, [2015-01-01T10:20:37.807480 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 10:20:37 +0000
D, [2015-01-01T10:20:37.890484 #10344] DEBUG -- : 
D, [2015-01-01T10:20:37.915486 #10344] DEBUG -- : 
I, [2015-01-01T10:20:37.977489 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 10:20:37 +0000
D, [2015-01-01T10:20:38.053494 #10344] DEBUG -- : 
D, [2015-01-01T10:20:38.080495 #10344] DEBUG -- : 
I, [2015-01-01T10:20:38.153499 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 10:20:38 +0000
D, [2015-01-01T10:20:38.226504 #10344] DEBUG -- : 
D, [2015-01-01T10:20:38.251505 #10344] DEBUG -- : 
I, [2015-01-01T10:20:38.313509 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 10:20:38 +0000
D, [2015-01-01T10:20:38.392513 #10344] DEBUG -- : 
D, [2015-01-01T10:20:38.416514 #10344] DEBUG -- : 
I, [2015-01-01T10:20:38.478518 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 10:20:38 +0000
D, [2015-01-01T10:20:38.555522 #10344] DEBUG -- : 
D, [2015-01-01T10:20:38.582524 #10344] DEBUG -- : 
I, [2015-01-01T10:20:38.651528 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 10:20:38 +0000
D, [2015-01-01T10:20:38.732533 #10344] DEBUG -- : 
D, [2015-01-01T10:20:38.767535 #10344] DEBUG -- : 
I, [2015-01-01T10:20:38.820538 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 10:20:38 +0000
D, [2015-01-01T10:20:38.895542 #10344] DEBUG -- : 
D, [2015-01-01T10:20:38.919543 #10344] DEBUG -- : 
I, [2015-01-01T10:20:38.986547 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 10:20:38 +0000
D, [2015-01-01T10:20:39.059551 #10344] DEBUG -- : 
D, [2015-01-01T10:20:39.082553 #10344] DEBUG -- : 
I, [2015-01-01T10:20:39.130555 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 10:20:39 +0000
D, [2015-01-01T10:20:39.204560 #10344] DEBUG -- : 
D, [2015-01-01T10:20:39.222561 #10344] DEBUG -- : 
I, [2015-01-01T10:20:39.269563 #10344]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-01 10:20:39 +0000
D, [2015-01-01T10:20:42.748801 #10344] DEBUG -- : 
D, [2015-01-01T10:20:42.764401 #10344] DEBUG -- : 
I, [2015-01-01T10:20:42.811201 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 10:20:42 +0000
I, [2015-01-01T10:20:42.952601 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T10:20:43.015001 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T10:20:43.093001 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T10:20:43.171001 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T10:20:43.264601 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
I, [2015-01-01T10:20:43.389402 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T10:20:43.420602 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:20:43.561002 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  rollback transaction
I, [2015-01-01T10:20:43.607802 #10344]  INFO -- : failed to order.save
I, [2015-01-01T10:20:43.639002 #10344]  INFO -- : Completed 500 Internal Server Error in 655ms
F, [2015-01-01T10:20:43.748202 #10344] FATAL -- : 
NoMethodError (undefined method `error' for #<Order:0x00000005feaf88>):
  app/controllers/orders_controller.rb:168:in `ppcheckout'


I, [2015-01-01T10:20:44.081605 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (15.6ms)
I, [2015-01-01T10:20:44.206405 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (15.6ms)
I, [2015-01-01T10:20:44.346805 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.0ms)
I, [2015-01-01T10:20:44.424806 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (407.4ms)
D, [2015-01-01T10:20:44.541209 #10344] DEBUG -- : 
D, [2015-01-01T10:20:44.562210 #10344] DEBUG -- : 
I, [2015-01-01T10:20:44.611213 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 10:20:44 +0000
I, [2015-01-01T10:20:44.709218 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T10:20:44.789223 #10344] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T10:20:44.862227 #10344] DEBUG -- :   [1m[35mUser Load (3.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T10:20:44.938231 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T10:20:45.035237 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
I, [2015-01-01T10:20:45.159244 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T10:20:45.201247 #10344] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:20:45.350255 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  rollback transaction
I, [2015-01-01T10:20:45.381257 #10344]  INFO -- : failed to order.save
I, [2015-01-01T10:20:45.423259 #10344]  INFO -- : Completed 500 Internal Server Error in 676ms
F, [2015-01-01T10:20:45.528265 #10344] FATAL -- : 
NoMethodError (undefined method `error' for #<Order:0x0000000994ec98>):
  app/controllers/orders_controller.rb:168:in `ppcheckout'


I, [2015-01-01T10:20:45.844283 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (17.0ms)
I, [2015-01-01T10:20:45.986291 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (21.0ms)
I, [2015-01-01T10:20:46.145300 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (16.0ms)
I, [2015-01-01T10:20:46.231305 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (446.0ms)
D, [2015-01-01T10:23:15.365488 #10344] DEBUG -- : 
D, [2015-01-01T10:23:15.384489 #10344] DEBUG -- : 
I, [2015-01-01T10:23:15.434492 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 10:23:15 +0000
I, [2015-01-01T10:23:18.407662 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T10:23:18.556671 #10344] DEBUG -- :   [1m[36mUser Load (3.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T10:23:18.770683 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T10:23:18.923692 #10344] DEBUG -- :   [1m[36mCart Load (3.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T10:23:19.235710 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
I, [2015-01-01T10:23:19.578729 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T10:24:32.384893 #10344] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:24:32.550903 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  rollback transaction
D, [2015-01-01T10:26:56.459134 #10344] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:26:56.583141 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  rollback transaction
I, [2015-01-01T10:26:56.619143 #10344]  INFO -- : failed to order.save
I, [2015-01-01T10:26:56.672146 #10344]  INFO -- : Completed 500 Internal Server Error in 218214ms
F, [2015-01-01T10:26:56.786153 #10344] FATAL -- : 
NoMethodError (undefined method `error' for #<Order:0x000000082b6378>):
  app/controllers/orders_controller.rb:168:in `ppcheckout'


I, [2015-01-01T10:26:57.058168 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (12.0ms)
I, [2015-01-01T10:26:57.190176 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (16.0ms)
I, [2015-01-01T10:26:57.331184 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (10.0ms)
I, [2015-01-01T10:26:57.432190 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (420.0ms)
D, [2015-01-01T10:27:02.227842 #10344] DEBUG -- : 
D, [2015-01-01T10:27:02.258443 #10344] DEBUG -- : 
I, [2015-01-01T10:27:02.303446 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 10:27:02 +0000
I, [2015-01-01T10:27:05.491628 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T10:27:05.631636 #10344] DEBUG -- :   [1m[36mUser Load (4.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T10:27:05.844649 #10344] DEBUG -- :   [1m[35mUser Load (3.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T10:27:06.010658 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T10:27:06.331676 #10344] DEBUG -- :   [1m[35mLineItem Load (4.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
I, [2015-01-01T10:27:06.748700 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T10:27:16.089234 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:27:16.231243 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  rollback transaction
D, [2015-01-01T10:28:36.069809 #10344] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:28:36.139813 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  rollback transaction
I, [2015-01-01T10:28:36.176815 #10344]  INFO -- : failed to order.save
I, [2015-01-01T10:28:36.226818 #10344]  INFO -- : Completed 500 Internal Server Error in 90688ms
F, [2015-01-01T10:28:36.333824 #10344] FATAL -- : 
NoMethodError (undefined method `error' for #<Order:0x00000007d938a0>):
  app/controllers/orders_controller.rb:168:in `ppcheckout'


I, [2015-01-01T10:28:36.602840 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (12.0ms)
I, [2015-01-01T10:28:36.740847 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (15.0ms)
I, [2015-01-01T10:28:36.880855 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (11.0ms)
I, [2015-01-01T10:28:36.982861 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (420.0ms)
D, [2015-01-01T10:28:40.378740 #10344] DEBUG -- : 
D, [2015-01-01T10:28:40.412342 #10344] DEBUG -- : 
I, [2015-01-01T10:28:40.474345 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 10:28:40 +0000
I, [2015-01-01T10:28:43.521519 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T10:28:43.673528 #10344] DEBUG -- :   [1m[36mUser Load (4.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T10:28:43.916542 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T10:28:44.066551 #10344] DEBUG -- :   [1m[36mCart Load (3.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T10:28:44.407570 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
I, [2015-01-01T10:28:44.757590 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T10:29:00.889513 #10344] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:29:01.021520 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  rollback transaction
D, [2015-01-01T10:29:43.026923 #10344] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:29:43.081926 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  rollback transaction
I, [2015-01-01T10:29:43.112928 #10344]  INFO -- : failed to order.save
I, [2015-01-01T10:29:43.154930 #10344]  INFO -- : Completed 500 Internal Server Error in 59595ms
F, [2015-01-01T10:29:43.247936 #10344] FATAL -- : 
NoMethodError (undefined method `error' for #<Order:0x0000000a00c5d0>):
  app/controllers/orders_controller.rb:168:in `ppcheckout'


I, [2015-01-01T10:29:43.500950 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (13.0ms)
I, [2015-01-01T10:29:43.618957 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (16.0ms)
I, [2015-01-01T10:29:43.741964 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (11.0ms)
I, [2015-01-01T10:29:43.824969 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (363.0ms)
D, [2015-01-01T10:29:49.507422 #10344] DEBUG -- : 
D, [2015-01-01T10:29:49.525423 #10344] DEBUG -- : 
I, [2015-01-01T10:29:49.575426 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 10:29:49 +0000
I, [2015-01-01T10:29:52.860614 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T10:29:52.997622 #10344] DEBUG -- :   [1m[36mUser Load (3.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T10:29:53.223634 #10344] DEBUG -- :   [1m[35mUser Load (3.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T10:29:53.357642 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T10:29:53.658659 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
I, [2015-01-01T10:29:53.991678 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T10:30:00.067026 #10344] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:30:00.276038 #10344] DEBUG -- :   [1m[35mSQL (4.0ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 01 Jan 2015 10:30:00 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 10:30:00 UTC +00:00]]
D, [2015-01-01T10:30:00.361043 #10344] DEBUG -- :   [1m[36mSQL (3.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 42[0m  [["cart_id", nil], ["order_id", 41], ["updated_at", Thu, 01 Jan 2015 10:30:00 UTC +00:00]]
I, [2015-01-01T10:30:00.409045 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T10:30:00.516052 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-01T10:30:00.592056 #10344]  INFO -- : in order=
I, [2015-01-01T10:30:00.617057 #10344]  INFO -- : in payment.create
I, [2015-01-01T10:30:00.770066 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"39.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"39.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/41/confirm", "cancel_url"=>"http://localhost:3000/orders/41/cancel"}}
I, [2015-01-01T10:30:01.282095 #10344]  INFO -- : #<ActiveModel::Errors:0x000000092ab850 @base=#<Payment:0x000000097abc60 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000097aba58 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000092bbf20 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000092bbd40 @error=nil, @total="39.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000092bb7c8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000092bb4a8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="39.98", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000092ba6c0 @error=nil, @return_url="http://localhost:3000/orders/41/confirm", @cancel_url="http://localhost:3000/orders/41/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000092ab850 ...>>, @messages={}>
I, [2015-01-01T10:30:01.308097 #10344]  INFO -- : got past invalid
I, [2015-01-01T10:30:01.349099 #10344]  INFO -- : PayPal-Request-Id: ce42784e-0a5a-46ac-b7da-e95b7c896d38
I, [2015-01-01T10:30:01.386101 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T10:30:02.674175 #10344]  INFO -- : Response[201]: Created, Duration: 1.257s
I, [2015-01-01T10:30:02.699176 #10344]  INFO -- : back from super
I, [2015-01-01T10:30:03.100199 #10344]  INFO -- : {"id"=>"PAY-8AF348278S473223KKSSSDKY", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"39.98", "details"=>{"subtotal"=>"39.98"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"39.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/41/confirm", "cancel_url"=>"http://localhost:3000/orders/41/cancel"}, "create_time"=>"2015-01-01T10:30:03Z", "update_time"=>"2015-01-01T10:30:04Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-8AF348278S473223KKSSSDKY", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6PY24350072782108", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-8AF348278S473223KKSSSDKY/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-01T10:30:03.249208 #10344] DEBUG -- :   [1m[36mSQL (5.0ms)[0m  [1mUPDATE "orders" SET "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ? WHERE "orders"."id" = 41[0m  [["created_at", Thu, 01 Jan 2015 10:30:00 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 10:30:00 UTC +00:00], ["id", 41], ["payment_id", "PAY-8AF348278S473223KKSSSDKY"], ["state", "created"]]
I, [2015-01-01T10:30:03.275209 #10344]  INFO -- : @payment save just done
I, [2015-01-01T10:30:04.216263 #10344]  INFO -- : #<Payment:0x000000097abc60 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000086e96e8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000086e9530 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000086e9468 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000086e92d8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000086e9260 @error=nil, @total="39.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000086e9058 @error=nil, @subtotal="39.98">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000086e8d88 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000086e8b30 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="39.98", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000092ba6c0 @error=nil, @return_url="http://localhost:3000/orders/41/confirm", @cancel_url="http://localhost:3000/orders/41/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000092ab850 @base=#<Payment:0x000000097abc60 ...>, @messages={}>, @request_id="ce42784e-0a5a-46ac-b7da-e95b7c896d38", @header={}, @id="PAY-8AF348278S473223KKSSSDKY", @create_time="2015-01-01T10:30:03Z", @update_time="2015-01-01T10:30:04Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000086e81f8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8AF348278S473223KKSSSDKY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086e3e28 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6PY24350072782108", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086e39f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8AF348278S473223KKSSSDKY/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T10:30:05.129315 #10344]  INFO -- : #<Payment:0x000000097abc60 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000086e96e8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000086e9530 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000086e9468 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000086e92d8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000086e9260 @error=nil, @total="39.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000086e9058 @error=nil, @subtotal="39.98">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000086e8d88 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000086e8b30 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="39.98", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000092ba6c0 @error=nil, @return_url="http://localhost:3000/orders/41/confirm", @cancel_url="http://localhost:3000/orders/41/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000092ab850 @base=#<Payment:0x000000097abc60 ...>, @messages={}>, @request_id="ce42784e-0a5a-46ac-b7da-e95b7c896d38", @header={}, @id="PAY-8AF348278S473223KKSSSDKY", @create_time="2015-01-01T10:30:03Z", @update_time="2015-01-01T10:30:04Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000086e81f8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8AF348278S473223KKSSSDKY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086e3e28 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6PY24350072782108", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086e39f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8AF348278S473223KKSSSDKY/execute", @rel="execute", @method="POST">]>
D, [2015-01-01T10:30:05.277324 #10344] DEBUG -- :   [1m[35m (118.0ms)[0m  commit transaction
D, [2015-01-01T10:30:49.036827 #10344] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:30:49.080829 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  commit transaction
I, [2015-01-01T10:30:49.114831 #10344]  INFO -- : about to approve url
I, [2015-01-01T10:30:50.064886 #10344]  INFO -- : #<Payment:0x000000097abc60 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000086e96e8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000086e9530 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000086e9468 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000086e92d8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000086e9260 @error=nil, @total="39.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000086e9058 @error=nil, @subtotal="39.98">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000086e8d88 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000086e8b30 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="39.98", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000092ba6c0 @error=nil, @return_url="http://localhost:3000/orders/41/confirm", @cancel_url="http://localhost:3000/orders/41/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000092ab850 @base=#<Payment:0x000000097abc60 ...>, @messages={}>, @request_id="ce42784e-0a5a-46ac-b7da-e95b7c896d38", @header={}, @id="PAY-8AF348278S473223KKSSSDKY", @create_time="2015-01-01T10:30:03Z", @update_time="2015-01-01T10:30:04Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000086e81f8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8AF348278S473223KKSSSDKY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086e3e28 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6PY24350072782108", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086e39f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8AF348278S473223KKSSSDKY/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T10:30:50.848930 #10344]  INFO -- : #<Payment:0x000000097abc60 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000086e96e8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000086e9530 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000086e9468 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000086e92d8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000086e9260 @error=nil, @total="39.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000086e9058 @error=nil, @subtotal="39.98">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000086e8d88 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000086e8b30 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="39.98", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000092ba6c0 @error=nil, @return_url="http://localhost:3000/orders/41/confirm", @cancel_url="http://localhost:3000/orders/41/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000092ab850 @base=#<Payment:0x000000097abc60 ...>, @messages={}>, @request_id="ce42784e-0a5a-46ac-b7da-e95b7c896d38", @header={}, @id="PAY-8AF348278S473223KKSSSDKY", @create_time="2015-01-01T10:30:03Z", @update_time="2015-01-01T10:30:04Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000086e81f8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8AF348278S473223KKSSSDKY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086e3e28 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6PY24350072782108", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086e39f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8AF348278S473223KKSSSDKY/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T10:30:50.895933 #10344]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6PY24350072782108
I, [2015-01-01T10:30:51.717980 #10344]  INFO -- : #<Payment:0x000000097abc60 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000086e96e8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000086e9530 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000086e9468 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000086e92d8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000086e9260 @error=nil, @total="39.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000086e9058 @error=nil, @subtotal="39.98">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000086e8d88 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000086e8b30 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="39.98", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000092ba6c0 @error=nil, @return_url="http://localhost:3000/orders/41/confirm", @cancel_url="http://localhost:3000/orders/41/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000092ab850 @base=#<Payment:0x000000097abc60 ...>, @messages={}>, @request_id="ce42784e-0a5a-46ac-b7da-e95b7c896d38", @header={}, @id="PAY-8AF348278S473223KKSSSDKY", @create_time="2015-01-01T10:30:03Z", @update_time="2015-01-01T10:30:04Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000086e81f8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8AF348278S473223KKSSSDKY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086e3e28 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6PY24350072782108", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086e39f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8AF348278S473223KKSSSDKY/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T10:30:51.780984 #10344]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6PY24350072782108
I, [2015-01-01T10:30:51.822986 #10344]  INFO -- : Completed 302 Found in 58920ms (ActiveRecord: 175.0ms)
D, [2015-01-01T10:31:30.097175 #10344] DEBUG -- : 
D, [2015-01-01T10:31:30.122177 #10344] DEBUG -- : 
I, [2015-01-01T10:31:30.215182 #10344]  INFO -- : Started GET "/orders/41/confirm?paymentId=PAY-8AF348278S473223KKSSSDKY&token=EC-6PY24350072782108&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-01 10:31:30 +0000
I, [2015-01-01T10:31:30.320188 #10344]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-01T10:31:30.397192 #10344]  INFO -- :   Parameters: {"paymentId"=>"PAY-8AF348278S473223KKSSSDKY", "token"=>"EC-6PY24350072782108", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"41"}
D, [2015-01-01T10:31:30.472197 #10344] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T10:31:30.544201 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T10:31:30.623205 #10344] DEBUG -- :   [1m[36mOrder Load (3.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "41"]]
I, [2015-01-01T10:31:47.033144 #10344]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-8AF348278S473223KKSSSDKY
I, [2015-01-01T10:31:48.132207 #10344]  INFO -- : Response[200]: OK, Duration: 1.058s
D, [2015-01-01T10:31:51.374392 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-01T10:31:51.484399 #10344] DEBUG -- :   [1m[36mSQL (6.0ms)[0m  [1mUPDATE "orders" SET "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 41[0m  [["shipping_address1", "1 Main Terrace"], ["updated_at", Thu, 01 Jan 2015 10:31:51 UTC +00:00]]
D, [2015-01-01T10:31:51.632407 #10344] DEBUG -- :   [1m[35m (109.0ms)[0m  commit transaction
I, [2015-01-01T10:31:51.835419 #10344]  INFO -- :   Rendered orders/_form.html.erb (136.0ms)
I, [2015-01-01T10:31:51.898422 #10344]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (193.0ms)
I, [2015-01-01T10:31:52.093433 #10344]  INFO -- : Completed 200 OK in 21655ms (Views: 416.0ms | ActiveRecord: 123.0ms)
D, [2015-01-01T10:31:52.524458 #10344] DEBUG -- : 
D, [2015-01-01T10:31:52.550460 #10344] DEBUG -- : 
I, [2015-01-01T10:31:52.617463 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 10:31:52 +0000
D, [2015-01-01T10:31:52.693468 #10344] DEBUG -- : 
D, [2015-01-01T10:31:52.709469 #10344] DEBUG -- : 
I, [2015-01-01T10:31:52.757471 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 10:31:52 +0000
D, [2015-01-01T10:31:52.839476 #10344] DEBUG -- : 
D, [2015-01-01T10:31:52.863477 #10344] DEBUG -- : 
I, [2015-01-01T10:31:52.908480 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 10:31:52 +0000
D, [2015-01-01T10:31:52.985484 #10344] DEBUG -- : 
D, [2015-01-01T10:31:53.003485 #10344] DEBUG -- : 
I, [2015-01-01T10:31:53.049488 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 10:31:53 +0000
D, [2015-01-01T10:31:53.140493 #10344] DEBUG -- : 
D, [2015-01-01T10:31:53.158494 #10344] DEBUG -- : 
I, [2015-01-01T10:31:53.202497 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 10:31:53 +0000
D, [2015-01-01T10:31:53.279501 #10344] DEBUG -- : 
D, [2015-01-01T10:31:53.294502 #10344] DEBUG -- : 
I, [2015-01-01T10:31:53.334504 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 10:31:53 +0000
D, [2015-01-01T10:31:53.416509 #10344] DEBUG -- : 
D, [2015-01-01T10:31:53.432510 #10344] DEBUG -- : 
I, [2015-01-01T10:31:53.475512 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 10:31:53 +0000
D, [2015-01-01T10:31:53.555517 #10344] DEBUG -- : 
D, [2015-01-01T10:31:53.571518 #10344] DEBUG -- : 
I, [2015-01-01T10:31:53.612520 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 10:31:53 +0000
D, [2015-01-01T10:31:53.688525 #10344] DEBUG -- : 
D, [2015-01-01T10:31:53.705526 #10344] DEBUG -- : 
I, [2015-01-01T10:31:53.746528 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 10:31:53 +0000
D, [2015-01-01T10:31:53.831533 #10344] DEBUG -- : 
D, [2015-01-01T10:31:53.848534 #10344] DEBUG -- : 
I, [2015-01-01T10:31:53.890536 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 10:31:53 +0000
D, [2015-01-01T10:31:53.971541 #10344] DEBUG -- : 
D, [2015-01-01T10:31:54.012543 #10344] DEBUG -- : 
I, [2015-01-01T10:31:54.066546 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 10:31:54 +0000
D, [2015-01-01T10:31:54.149551 #10344] DEBUG -- : 
D, [2015-01-01T10:31:54.166552 #10344] DEBUG -- : 
I, [2015-01-01T10:31:54.217555 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 10:31:54 +0000
D, [2015-01-01T10:31:54.291559 #10344] DEBUG -- : 
D, [2015-01-01T10:31:54.312560 #10344] DEBUG -- : 
I, [2015-01-01T10:31:54.359563 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 10:31:54 +0000
D, [2015-01-01T10:31:54.440568 #10344] DEBUG -- : 
D, [2015-01-01T10:31:54.461569 #10344] DEBUG -- : 
I, [2015-01-01T10:31:54.520572 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 10:31:54 +0000
D, [2015-01-01T10:31:54.591576 #10344] DEBUG -- : 
D, [2015-01-01T10:31:54.615578 #10344] DEBUG -- : 
I, [2015-01-01T10:31:54.667581 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 10:31:54 +0000
D, [2015-01-01T10:31:54.754586 #10344] DEBUG -- : 
D, [2015-01-01T10:31:54.774587 #10344] DEBUG -- : 
I, [2015-01-01T10:31:54.822590 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 10:31:54 +0000
D, [2015-01-01T10:31:54.910595 #10344] DEBUG -- : 
D, [2015-01-01T10:31:54.930596 #10344] DEBUG -- : 
I, [2015-01-01T10:31:54.996599 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 10:31:54 +0000
D, [2015-01-01T10:31:55.070604 #10344] DEBUG -- : 
D, [2015-01-01T10:31:55.086605 #10344] DEBUG -- : 
I, [2015-01-01T10:31:55.131607 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 10:31:55 +0000
D, [2015-01-01T10:31:55.209612 #10344] DEBUG -- : 
D, [2015-01-01T10:31:55.230613 #10344] DEBUG -- : 
I, [2015-01-01T10:31:55.280616 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 10:31:55 +0000
D, [2015-01-01T10:31:55.357620 #10344] DEBUG -- : 
D, [2015-01-01T10:31:55.378621 #10344] DEBUG -- : 
I, [2015-01-01T10:31:55.425624 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 10:31:55 +0000
D, [2015-01-01T10:31:55.501628 #10344] DEBUG -- : 
D, [2015-01-01T10:31:55.523630 #10344] DEBUG -- : 
I, [2015-01-01T10:31:55.584633 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 10:31:55 +0000
D, [2015-01-01T10:31:55.670638 #10344] DEBUG -- : 
D, [2015-01-01T10:31:55.697640 #10344] DEBUG -- : 
I, [2015-01-01T10:31:55.767644 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 10:31:55 +0000
D, [2015-01-01T10:31:55.868649 #10344] DEBUG -- : 
D, [2015-01-01T10:31:55.896651 #10344] DEBUG -- : 
I, [2015-01-01T10:31:55.963655 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 10:31:55 +0000
D, [2015-01-01T10:31:56.038659 #10344] DEBUG -- : 
D, [2015-01-01T10:31:56.063661 #10344] DEBUG -- : 
I, [2015-01-01T10:31:56.121664 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 10:31:56 +0000
D, [2015-01-01T10:31:56.197668 #10344] DEBUG -- : 
D, [2015-01-01T10:31:56.222670 #10344] DEBUG -- : 
I, [2015-01-01T10:31:56.286673 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 10:31:56 +0000
D, [2015-01-01T10:31:56.360678 #10344] DEBUG -- : 
D, [2015-01-01T10:31:56.386679 #10344] DEBUG -- : 
I, [2015-01-01T10:31:56.451683 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 10:31:56 +0000
D, [2015-01-01T10:31:56.528687 #10344] DEBUG -- : 
D, [2015-01-01T10:31:56.550688 #10344] DEBUG -- : 
I, [2015-01-01T10:31:56.613692 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 10:31:56 +0000
D, [2015-01-01T10:31:56.687696 #10344] DEBUG -- : 
D, [2015-01-01T10:31:56.712698 #10344] DEBUG -- : 
I, [2015-01-01T10:31:56.778701 #10344]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-01 10:31:56 +0000
D, [2015-01-01T10:39:57.798311 #10344] DEBUG -- : 
D, [2015-01-01T10:39:57.829511 #10344] DEBUG -- : 
I, [2015-01-01T10:39:57.876311 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 10:39:57 +0000
I, [2015-01-01T10:39:57.985511 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T10:39:58.079111 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T10:39:58.188311 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T10:39:58.281912 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (0.0ms)
I, [2015-01-01T10:39:58.345312 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (187.2ms)
D, [2015-01-01T10:39:58.579312 #10344] DEBUG -- :   [1m[36mLineItem Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 35]]
D, [2015-01-01T10:39:58.688512 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
I, [2015-01-01T10:39:58.735312 #10344]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-01T10:39:58.813313 #10344]  INFO -- :   Rendered carts/_cart.html.erb (171.6ms)
I, [2015-01-01T10:39:58.922513 #10344]  INFO -- : Completed 200 OK in 875ms (Views: 781.0ms | ActiveRecord: 0.0ms)
D, [2015-01-01T10:39:59.052714 #10344] DEBUG -- : 
D, [2015-01-01T10:39:59.068314 #10344] DEBUG -- : 
I, [2015-01-01T10:39:59.131714 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 10:39:59 +0000
D, [2015-01-01T10:39:59.194114 #10344] DEBUG -- : 
D, [2015-01-01T10:39:59.209714 #10344] DEBUG -- : 
I, [2015-01-01T10:39:59.277317 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 10:39:59 +0000
D, [2015-01-01T10:41:01.747465 #10344] DEBUG -- : 
D, [2015-01-01T10:41:01.778665 #10344] DEBUG -- : 
I, [2015-01-01T10:41:01.825465 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 10:41:01 +0000
I, [2015-01-01T10:41:01.965865 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T10:41:02.028265 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T10:41:02.106266 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T10:41:02.184266 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-01T10:41:02.277866 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 35]]
D, [2015-01-01T10:41:02.371466 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T10:41:02.418266 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:41:02.636666 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 35], ["created_at", Thu, 01 Jan 2015 10:41:02 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:8213c40,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 10:41:02 UTC +00:00]]
D, [2015-01-01T10:41:02.808267 #10344] DEBUG -- :   [1m[36m (156.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T10:41:02.917467 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
I, [2015-01-01T10:41:03.011067 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T10:41:03.073467 #10344]  INFO -- :   Rendered carts/_cart.html.erb (187.2ms)
I, [2015-01-01T10:41:03.120267 #10344]  INFO -- :   Rendered line_items/create.js.erb (249.6ms)
I, [2015-01-01T10:41:03.167067 #10344]  INFO -- : Completed 200 OK in 1092ms (Views: 296.4ms | ActiveRecord: 171.6ms)
D, [2015-01-01T10:41:07.550938 #10344] DEBUG -- : 
D, [2015-01-01T10:41:07.566538 #10344] DEBUG -- : 
I, [2015-01-01T10:41:07.628938 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 10:41:07 +0000
I, [2015-01-01T10:41:07.722538 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T10:41:07.816139 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T10:41:07.894139 #10344] DEBUG -- :   [1m[35mUser Load (15.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T10:41:07.972139 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T10:41:08.081339 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 35]]
I, [2015-01-01T10:41:08.206139 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T10:41:16.098956 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T10:41:16.223756 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 01 Jan 2015 10:41:16 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 10:41:16 UTC +00:00]]
D, [2015-01-01T10:41:16.348556 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 43[0m  [["cart_id", nil], ["order_id", 42], ["updated_at", Thu, 01 Jan 2015 10:41:16 UTC +00:00]]
I, [2015-01-01T10:41:16.379756 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T10:41:16.473356 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-01T10:41:16.504556 #10344]  INFO -- : in order=
I, [2015-01-01T10:41:16.520156 #10344]  INFO -- : in payment.create
I, [2015-01-01T10:41:16.707357 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/42/confirm", "cancel_url"=>"http://localhost:3000/orders/42/cancel"}}
I, [2015-01-01T10:41:17.331358 #10344]  INFO -- : #<ActiveModel::Errors:0x0000000992e880 @base=#<Payment:0x00000009bd8450 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009bd2fa0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009a4f480 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009a4ea30 @error=nil, @total="19.99", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009a4c618 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009a56af0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009a2cde0 @error=nil, @return_url="http://localhost:3000/orders/42/confirm", @cancel_url="http://localhost:3000/orders/42/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000992e880 ...>>, @messages={}>
I, [2015-01-01T10:41:17.346958 #10344]  INFO -- : got past invalid
I, [2015-01-01T10:41:17.440558 #10344]  INFO -- : PayPal-Request-Id: b37d5c1a-b4d6-4a7f-af90-aa8be2596c3d
I, [2015-01-01T10:41:17.487358 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T10:41:18.875760 #10344]  INFO -- : Response[201]: Created, Duration: 1.357s
I, [2015-01-01T10:41:18.922561 #10344]  INFO -- : back from super
I, [2015-01-01T10:41:19.376961 #10344]  INFO -- : {"id"=>"PAY-40D95864853550437KSSSITY", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99", "details"=>{"subtotal"=>"19.99"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/42/confirm", "cancel_url"=>"http://localhost:3000/orders/42/cancel"}, "create_time"=>"2015-01-01T10:41:19Z", "update_time"=>"2015-01-01T10:41:20Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-4CW540145A2930528", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-01T10:41:19.548562 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mUPDATE "orders" SET "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ? WHERE "orders"."id" = 42[0m  [["created_at", Thu, 01 Jan 2015 10:41:16 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 10:41:16 UTC +00:00], ["id", 42], ["payment_id", "PAY-40D95864853550437KSSSITY"], ["state", "created"]]
I, [2015-01-01T10:41:19.579762 #10344]  INFO -- : @payment save just done
I, [2015-01-01T10:41:20.546963 #10344]  INFO -- : #<Payment:0x00000009bd8450 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000956a410 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009569510 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009568ac0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000955b640 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000955af88 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009559b38 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000954b998 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000954a930 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009a2cde0 @error=nil, @return_url="http://localhost:3000/orders/42/confirm", @cancel_url="http://localhost:3000/orders/42/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000992e880 @base=#<Payment:0x00000009bd8450 ...>, @messages={}>, @request_id="b37d5c1a-b4d6-4a7f-af90-aa8be2596c3d", @header={}, @id="PAY-40D95864853550437KSSSITY", @create_time="2015-01-01T10:41:19Z", @update_time="2015-01-01T10:41:20Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000095427f8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009540840 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-4CW540145A2930528", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000953a5d0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T10:41:21.467365 #10344]  INFO -- : #<Payment:0x00000009bd8450 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000956a410 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009569510 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009568ac0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000955b640 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000955af88 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009559b38 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000954b998 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000954a930 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009a2cde0 @error=nil, @return_url="http://localhost:3000/orders/42/confirm", @cancel_url="http://localhost:3000/orders/42/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000992e880 @base=#<Payment:0x00000009bd8450 ...>, @messages={}>, @request_id="b37d5c1a-b4d6-4a7f-af90-aa8be2596c3d", @header={}, @id="PAY-40D95864853550437KSSSITY", @create_time="2015-01-01T10:41:19Z", @update_time="2015-01-01T10:41:20Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000095427f8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009540840 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-4CW540145A2930528", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000953a5d0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY/execute", @rel="execute", @method="POST">]>
D, [2015-01-01T10:41:21.592165 #10344] DEBUG -- :   [1m[35m (93.6ms)[0m  commit transaction
I, [2015-01-01T10:41:21.623365 #10344]  INFO -- : about to approve url
I, [2015-01-01T10:41:22.559367 #10344]  INFO -- : #<Payment:0x00000009bd8450 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000956a410 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009569510 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009568ac0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000955b640 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000955af88 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009559b38 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000954b998 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000954a930 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009a2cde0 @error=nil, @return_url="http://localhost:3000/orders/42/confirm", @cancel_url="http://localhost:3000/orders/42/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000992e880 @base=#<Payment:0x00000009bd8450 ...>, @messages={}>, @request_id="b37d5c1a-b4d6-4a7f-af90-aa8be2596c3d", @header={}, @id="PAY-40D95864853550437KSSSITY", @create_time="2015-01-01T10:41:19Z", @update_time="2015-01-01T10:41:20Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000095427f8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009540840 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-4CW540145A2930528", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000953a5d0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T10:41:23.528569 #10344]  INFO -- : #<Payment:0x00000009bd8450 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000956a410 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009569510 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009568ac0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000955b640 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000955af88 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009559b38 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000954b998 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000954a930 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009a2cde0 @error=nil, @return_url="http://localhost:3000/orders/42/confirm", @cancel_url="http://localhost:3000/orders/42/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000992e880 @base=#<Payment:0x00000009bd8450 ...>, @messages={}>, @request_id="b37d5c1a-b4d6-4a7f-af90-aa8be2596c3d", @header={}, @id="PAY-40D95864853550437KSSSITY", @create_time="2015-01-01T10:41:19Z", @update_time="2015-01-01T10:41:20Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000095427f8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009540840 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-4CW540145A2930528", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000953a5d0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T10:41:23.590969 #10344]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-4CW540145A2930528
I, [2015-01-01T10:41:24.573771 #10344]  INFO -- : #<Payment:0x00000009bd8450 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000956a410 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009569510 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009568ac0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000955b640 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000955af88 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009559b38 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000954b998 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000954a930 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009a2cde0 @error=nil, @return_url="http://localhost:3000/orders/42/confirm", @cancel_url="http://localhost:3000/orders/42/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000992e880 @base=#<Payment:0x00000009bd8450 ...>, @messages={}>, @request_id="b37d5c1a-b4d6-4a7f-af90-aa8be2596c3d", @header={}, @id="PAY-40D95864853550437KSSSITY", @create_time="2015-01-01T10:41:19Z", @update_time="2015-01-01T10:41:20Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000095427f8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009540840 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-4CW540145A2930528", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000953a5d0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T10:41:24.651771 #10344]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-4CW540145A2930528
I, [2015-01-01T10:41:24.698571 #10344]  INFO -- : Completed 403 Forbidden in 16929ms (ActiveRecord: 156.0ms)
D, [2015-01-01T10:42:07.624022 #10344] DEBUG -- : 
D, [2015-01-01T10:42:07.648023 #10344] DEBUG -- : 
I, [2015-01-01T10:42:07.745029 #10344]  INFO -- : Started GET "/orders/42/confirm?paymentId=PAY-40D95864853550437KSSSITY&token=EC-4CW540145A2930528&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-01 10:42:07 +0000
I, [2015-01-01T10:42:07.830033 #10344]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-01T10:42:07.914038 #10344]  INFO -- :   Parameters: {"paymentId"=>"PAY-40D95864853550437KSSSITY", "token"=>"EC-4CW540145A2930528", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"42"}
D, [2015-01-01T10:42:08.091048 #10344] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T10:42:08.180054 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T10:42:08.264058 #10344] DEBUG -- :   [1m[36mOrder Load (2.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "42"]]
D, [2015-01-01T10:50:53.581105 #10344] DEBUG -- :   [1m[35mLineItem Load (1.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 42]]
D, [2015-01-01T10:50:57.831348 #10344] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 42]]
I, [2015-01-01T10:51:53.691543 #10344]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY
I, [2015-01-01T10:51:54.812607 #10344]  INFO -- : Response[200]: OK, Duration: 1.091s
D, [2015-01-01T10:58:36.149562 #10344] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2015-01-01T10:58:36.286570 #10344] DEBUG -- :   [1m[36mSQL (6.0ms)[0m  [1mUPDATE "orders" SET "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 42[0m  [["shipping_address1", "1 Main Terrace"], ["updated_at", Thu, 01 Jan 2015 10:58:36 UTC +00:00]]
D, [2015-01-01T10:58:36.460580 #10344] DEBUG -- :   [1m[35m (131.0ms)[0m  commit transaction
I, [2015-01-01T10:58:36.633590 #10344]  INFO -- :   Rendered orders/_form.html.erb (102.0ms)
I, [2015-01-01T10:58:36.702594 #10344]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (164.0ms)
I, [2015-01-01T10:58:36.889604 #10344]  INFO -- : Completed 200 OK in 988922ms (Views: 371.0ms | ActiveRecord: 147.0ms)
D, [2015-01-01T10:58:37.127618 #10344] DEBUG -- : 
D, [2015-01-01T10:58:37.143619 #10344] DEBUG -- : 
I, [2015-01-01T10:58:37.185621 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 10:58:37 +0000
D, [2015-01-01T10:58:37.307628 #10344] DEBUG -- : 
D, [2015-01-01T10:58:37.330630 #10344] DEBUG -- : 
I, [2015-01-01T10:58:37.392633 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 10:58:37 +0000
D, [2015-01-01T10:58:37.480638 #10344] DEBUG -- : 
D, [2015-01-01T10:58:37.505640 #10344] DEBUG -- : 
I, [2015-01-01T10:58:37.554643 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 10:58:37 +0000
D, [2015-01-01T10:58:37.635647 #10344] DEBUG -- : 
D, [2015-01-01T10:58:37.666649 #10344] DEBUG -- : 
I, [2015-01-01T10:58:37.722652 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 10:58:37 +0000
D, [2015-01-01T10:58:37.801657 #10344] DEBUG -- : 
D, [2015-01-01T10:58:37.827658 #10344] DEBUG -- : 
I, [2015-01-01T10:58:37.895662 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 10:58:37 +0000
D, [2015-01-01T10:58:37.967666 #10344] DEBUG -- : 
D, [2015-01-01T10:58:37.992668 #10344] DEBUG -- : 
I, [2015-01-01T10:58:38.057671 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 10:58:37 +0000
D, [2015-01-01T10:58:38.127675 #10344] DEBUG -- : 
D, [2015-01-01T10:58:38.152677 #10344] DEBUG -- : 
I, [2015-01-01T10:58:38.218680 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 10:58:38 +0000
D, [2015-01-01T10:58:38.290685 #10344] DEBUG -- : 
D, [2015-01-01T10:58:38.313686 #10344] DEBUG -- : 
I, [2015-01-01T10:58:38.371689 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 10:58:38 +0000
D, [2015-01-01T10:58:38.444693 #10344] DEBUG -- : 
D, [2015-01-01T10:58:38.467695 #10344] DEBUG -- : 
I, [2015-01-01T10:58:38.529698 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 10:58:38 +0000
D, [2015-01-01T10:58:38.603703 #10344] DEBUG -- : 
D, [2015-01-01T10:58:38.625704 #10344] DEBUG -- : 
I, [2015-01-01T10:58:38.687707 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 10:58:38 +0000
D, [2015-01-01T10:58:38.767712 #10344] DEBUG -- : 
D, [2015-01-01T10:58:38.793713 #10344] DEBUG -- : 
I, [2015-01-01T10:58:38.862717 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 10:58:38 +0000
D, [2015-01-01T10:58:38.937722 #10344] DEBUG -- : 
D, [2015-01-01T10:58:38.960723 #10344] DEBUG -- : 
I, [2015-01-01T10:58:39.015726 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 10:58:38 +0000
D, [2015-01-01T10:58:39.088730 #10344] DEBUG -- : 
D, [2015-01-01T10:58:39.106731 #10344] DEBUG -- : 
I, [2015-01-01T10:58:39.146734 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 10:58:39 +0000
D, [2015-01-01T10:58:39.220738 #10344] DEBUG -- : 
D, [2015-01-01T10:58:39.245739 #10344] DEBUG -- : 
I, [2015-01-01T10:58:39.299742 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 10:58:39 +0000
D, [2015-01-01T10:58:39.386747 #10344] DEBUG -- : 
D, [2015-01-01T10:58:39.406748 #10344] DEBUG -- : 
I, [2015-01-01T10:58:39.454751 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 10:58:39 +0000
D, [2015-01-01T10:58:39.533756 #10344] DEBUG -- : 
D, [2015-01-01T10:58:39.554757 #10344] DEBUG -- : 
I, [2015-01-01T10:58:39.604760 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 10:58:39 +0000
D, [2015-01-01T10:58:39.687765 #10344] DEBUG -- : 
D, [2015-01-01T10:58:39.708766 #10344] DEBUG -- : 
I, [2015-01-01T10:58:39.758769 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 10:58:39 +0000
D, [2015-01-01T10:58:39.833773 #10344] DEBUG -- : 
D, [2015-01-01T10:58:39.854774 #10344] DEBUG -- : 
I, [2015-01-01T10:58:39.907777 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 10:58:39 +0000
D, [2015-01-01T10:58:39.980781 #10344] DEBUG -- : 
D, [2015-01-01T10:58:40.006783 #10344] DEBUG -- : 
I, [2015-01-01T10:58:40.049785 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 10:58:40 +0000
D, [2015-01-01T10:58:40.129790 #10344] DEBUG -- : 
D, [2015-01-01T10:58:40.149791 #10344] DEBUG -- : 
I, [2015-01-01T10:58:40.197794 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 10:58:40 +0000
D, [2015-01-01T10:58:40.270798 #10344] DEBUG -- : 
D, [2015-01-01T10:58:40.298799 #10344] DEBUG -- : 
I, [2015-01-01T10:58:40.347802 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 10:58:40 +0000
D, [2015-01-01T10:58:40.433807 #10344] DEBUG -- : 
D, [2015-01-01T10:58:40.452808 #10344] DEBUG -- : 
I, [2015-01-01T10:58:40.498811 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 10:58:40 +0000
D, [2015-01-01T10:58:40.589816 #10344] DEBUG -- : 
D, [2015-01-01T10:58:40.605817 #10344] DEBUG -- : 
I, [2015-01-01T10:58:40.649820 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 10:58:40 +0000
D, [2015-01-01T10:58:40.717823 #10344] DEBUG -- : 
D, [2015-01-01T10:58:40.734824 #10344] DEBUG -- : 
I, [2015-01-01T10:58:40.777827 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 10:58:40 +0000
D, [2015-01-01T10:58:40.847831 #10344] DEBUG -- : 
D, [2015-01-01T10:58:40.863832 #10344] DEBUG -- : 
I, [2015-01-01T10:58:40.902834 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 10:58:40 +0000
D, [2015-01-01T10:58:40.972838 #10344] DEBUG -- : 
D, [2015-01-01T10:58:40.988839 #10344] DEBUG -- : 
I, [2015-01-01T10:58:41.041842 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 10:58:40 +0000
D, [2015-01-01T10:58:41.116846 #10344] DEBUG -- : 
D, [2015-01-01T10:58:41.133847 #10344] DEBUG -- : 
I, [2015-01-01T10:58:41.176850 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 10:58:41 +0000
D, [2015-01-01T10:58:41.267855 #10344] DEBUG -- : 
D, [2015-01-01T10:58:41.284856 #10344] DEBUG -- : 
I, [2015-01-01T10:58:41.330858 #10344]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-01 10:58:41 +0000
D, [2015-01-01T10:58:47.305091 #10344] DEBUG -- : 
D, [2015-01-01T10:58:47.329093 #10344] DEBUG -- : 
I, [2015-01-01T10:58:47.395097 #10344]  INFO -- : Started POST "/orders/42/execute/42/2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-01 10:58:47 +0000
I, [2015-01-01T10:58:47.495102 #10344]  INFO -- : Processing by OrdersController#execute as HTML
I, [2015-01-01T10:58:47.581107 #10344]  INFO -- :   Parameters: {"authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order_id"=>"42", "payer_id"=>"2VZ7YQDDDPPC4"}
D, [2015-01-01T10:58:47.677113 #10344] DEBUG -- :   [1m[36mOrder Load (2.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "42"]]
I, [2015-01-01T10:58:47.990131 #10344]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY
I, [2015-01-01T10:58:49.495217 #10344]  INFO -- : Response[200]: OK, Duration: 1.474s
I, [2015-01-01T10:58:49.557220 #10344]  INFO -- : PayPal-Request-Id: 205f3133-6526-49cb-ba6d-12a1b9d46dc7
I, [2015-01-01T10:58:49.610223 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY/execute
I, [2015-01-01T10:58:51.794348 #10344]  INFO -- : Response[200]: OK, Duration: 2.150s
D, [2015-01-01T10:58:51.852351 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-01T10:58:51.968358 #10344] DEBUG -- :   [1m[36mSQL (7.0ms)[0m  [1mUPDATE "orders" SET "state" = ?, "updated_at" = ? WHERE "orders"."id" = 42[0m  [["state", "approved"], ["updated_at", Thu, 01 Jan 2015 10:58:51 UTC +00:00]]
D, [2015-01-01T10:58:52.141368 #10344] DEBUG -- :   [1m[35m (136.0ms)[0m  commit transaction
D, [2015-01-01T10:58:52.210372 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T10:58:52.251374 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-01T10:58:52.339379 #10344] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 35]]
D, [2015-01-01T10:58:52.400383 #10344] DEBUG -- :   [1m[35mSQL (5.0ms)[0m  DELETE FROM "carts" WHERE "carts"."id" = ?  [["id", 35]]
D, [2015-01-01T10:58:52.562392 #10344] DEBUG -- :   [1m[36m (121.0ms)[0m  [1mcommit transaction[0m
I, [2015-01-01T17:25:02.314257 #10344]  INFO -- :   Rendered order_notifier/received.html.erb (44.0ms)
D, [2015-01-01T17:25:02.882290 #10344] DEBUG -- :   [1m[35mLineItem Load (146.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 42]]
D, [2015-01-01T17:25:03.420320 #10344] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-01T17:25:03.557328 #10344]  INFO -- :   Rendered line_items/_line_item.text.erb (414.0ms)
I, [2015-01-01T17:25:03.603331 #10344]  INFO -- :   Rendered order_notifier/received.text.erb (1119.1ms)
I, [2015-01-01T17:25:07.013526 #10344]  INFO -- : 
Sent mail to  (1710.1ms)
D, [2015-01-01T17:25:07.286542 #10344] DEBUG -- : Date: Thu, 01 Jan 2015 17:25:05 +0000

From: Simon King <simon.king65@gmail.com>

Message-ID: <54a582f1c84ea_2868262d5702275f@Simon-PC.mail>

Subject: King Clothing Order Confirmation

Mime-Version: 1.0

Content-Type: multipart/alternative;

 boundary="--==_mimepart_54a582f0715fc_2868262d570226eb";

 charset=UTF-8

Content-Transfer-Encoding: 7bit





----==_mimepart_54a582f0715fc_2868262d570226eb

Content-Type: text/plain;

 charset=UTF-8

Content-Transfer-Encoding: 7bit



Dear 



Thank you for your recent order from King Clothing.



You ordered the following items:



 1 x Camo Print Tee

We'll send you a separate e-mail when your order ships.

----==_mimepart_54a582f0715fc_2868262d570226eb

Content-Type: text/html;

 charset=UTF-8

Content-Transfer-Encoding: 7bit



<h1>OrderNotifier#received</h1>



<p>

  , thank you for your order, we will email you again once your order has been despatched. We hope you enjoy wearing your King Clothing brand tee-shirt.

</p>



----==_mimepart_54a582f0715fc_2868262d570226eb--


I, [2015-01-01T17:25:07.601560 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T17:25:07.633561 #10344]  INFO -- : Completed 302 Found in 23180024ms (ActiveRecord: 424.0ms)
D, [2015-01-01T17:25:08.254597 #10344] DEBUG -- : 
D, [2015-01-01T17:25:08.363603 #10344] DEBUG -- : 
I, [2015-01-01T17:25:08.418606 #10344]  INFO -- : Started POST "/orders/42/execute/42/2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-01 17:25:08 +0000
I, [2015-01-01T17:25:09.632676 #10344]  INFO -- : Processing by OrdersController#execute as HTML
I, [2015-01-01T17:25:09.688679 #10344]  INFO -- :   Parameters: {"authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order_id"=>"42", "payer_id"=>"2VZ7YQDDDPPC4"}
D, [2015-01-01T17:25:09.830687 #10344] DEBUG -- :   [1m[35mOrder Load (2.0ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "42"]]
I, [2015-01-01T17:25:57.576418 #10344]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY
I, [2015-01-01T17:26:00.170566 #10344]  INFO -- : Response[200]: OK, Duration: 2.563s
I, [2015-01-01T17:26:00.487584 #10344]  INFO -- : PayPal-Request-Id: 66f72a2c-6e9c-48ce-a713-083c76f50652
I, [2015-01-01T17:26:00.541588 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-40D95864853550437KSSSITY/execute
I, [2015-01-01T17:26:01.548645 #10344]  INFO -- : Response[400]: Bad Request, Duration: 0.971s
I, [2015-01-01T17:26:02.123678 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T17:26:02.170681 #10344]  INFO -- : Completed 302 Found in 52436ms (ActiveRecord: 2.0ms)
D, [2015-01-01T17:26:02.301688 #10344] DEBUG -- : 
D, [2015-01-01T17:26:02.325690 #10344] DEBUG -- : 
I, [2015-01-01T17:26:02.376693 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 17:26:02 +0000
I, [2015-01-01T17:26:03.589762 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T17:26:03.712769 #10344] DEBUG -- :   [1m[36mCart Load (1.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 35]]
D, [2015-01-01T17:26:03.878778 #10344] DEBUG -- :   [1m[35m (42.0ms)[0m  begin transaction
D, [2015-01-01T17:26:04.172795 #10344] DEBUG -- :   [1m[36mSQL (39.0ms)[0m  [1mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 17:26:03 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 17:26:03 UTC +00:00]]
D, [2015-01-01T17:26:04.329804 #10344] DEBUG -- :   [1m[35m (121.0ms)[0m  commit transaction
D, [2015-01-01T17:26:04.572818 #10344] DEBUG -- :   [1m[36mProduct Load (19.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-01T17:26:04.967841 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (162.0ms)
I, [2015-01-01T17:26:05.038845 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (569.0ms)
D, [2015-01-01T17:26:05.778887 #10344] DEBUG -- :   [1m[35mLineItem Exists (12.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:26:05.934896 #10344] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:26:05.965898 #10344]  INFO -- :   Rendered collection (1.0ms)
I, [2015-01-01T17:26:06.380922 #10344]  INFO -- :   Rendered carts/_cart.html.erb (469.0ms)
I, [2015-01-01T17:26:06.491928 #10344]  INFO -- : Completed 200 OK in 2856ms (Views: 2043.1ms | ActiveRecord: 236.0ms)
D, [2015-01-01T17:26:07.326976 #10344] DEBUG -- : 
D, [2015-01-01T17:26:07.340976 #10344] DEBUG -- : 
I, [2015-01-01T17:26:07.388979 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 17:26:07 +0000
D, [2015-01-01T17:26:07.549988 #10344] DEBUG -- : 
D, [2015-01-01T17:26:07.563989 #10344] DEBUG -- : 
I, [2015-01-01T17:26:07.634993 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 17:26:07 +0000
D, [2015-01-01T17:26:07.732999 #10344] DEBUG -- : 
D, [2015-01-01T17:26:07.779001 #10344] DEBUG -- : 
I, [2015-01-01T17:26:07.860006 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 17:26:07 +0000
D, [2015-01-01T17:26:07.923010 #10344] DEBUG -- : 
D, [2015-01-01T17:26:07.939011 #10344] DEBUG -- : 
I, [2015-01-01T17:26:07.983013 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 17:26:07 +0000
D, [2015-01-01T17:26:08.125021 #10344] DEBUG -- : 
D, [2015-01-01T17:26:08.173024 #10344] DEBUG -- : 
I, [2015-01-01T17:26:08.226027 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 17:26:08 +0000
D, [2015-01-01T17:26:08.315032 #10344] DEBUG -- : 
D, [2015-01-01T17:26:08.353034 #10344] DEBUG -- : 
I, [2015-01-01T17:26:08.401037 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 17:26:08 +0000
D, [2015-01-01T17:26:08.555046 #10344] DEBUG -- : 
D, [2015-01-01T17:26:08.578047 #10344] DEBUG -- : 
I, [2015-01-01T17:26:08.670052 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 17:26:08 +0000
D, [2015-01-01T17:26:08.854063 #10344] DEBUG -- : 
D, [2015-01-01T17:26:08.890065 #10344] DEBUG -- : 
I, [2015-01-01T17:26:08.942068 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 17:26:08 +0000
D, [2015-01-01T17:26:09.089076 #10344] DEBUG -- : 
D, [2015-01-01T17:26:09.115078 #10344] DEBUG -- : 
I, [2015-01-01T17:26:09.163081 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 17:26:09 +0000
D, [2015-01-01T17:26:09.238085 #10344] DEBUG -- : 
D, [2015-01-01T17:26:09.259086 #10344] DEBUG -- : 
I, [2015-01-01T17:26:09.310089 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 17:26:09 +0000
D, [2015-01-01T17:26:09.443097 #10344] DEBUG -- : 
D, [2015-01-01T17:26:09.462098 #10344] DEBUG -- : 
I, [2015-01-01T17:26:09.515101 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 17:26:09 +0000
D, [2015-01-01T17:26:09.641108 #10344] DEBUG -- : 
D, [2015-01-01T17:26:09.661109 #10344] DEBUG -- : 
I, [2015-01-01T17:26:09.715112 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 17:26:09 +0000
D, [2015-01-01T17:26:09.798117 #10344] DEBUG -- : 
D, [2015-01-01T17:26:09.823118 #10344] DEBUG -- : 
I, [2015-01-01T17:26:09.873121 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 17:26:09 +0000
D, [2015-01-01T17:26:09.950126 #10344] DEBUG -- : 
D, [2015-01-01T17:26:09.970127 #10344] DEBUG -- : 
I, [2015-01-01T17:26:10.024130 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 17:26:09 +0000
D, [2015-01-01T17:26:10.102134 #10344] DEBUG -- : 
D, [2015-01-01T17:26:10.123136 #10344] DEBUG -- : 
I, [2015-01-01T17:26:10.173138 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 17:26:10 +0000
D, [2015-01-01T17:26:10.277144 #10344] DEBUG -- : 
D, [2015-01-01T17:26:10.296145 #10344] DEBUG -- : 
I, [2015-01-01T17:26:10.348148 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 17:26:10 +0000
D, [2015-01-01T17:26:10.438154 #10344] DEBUG -- : 
D, [2015-01-01T17:26:10.458155 #10344] DEBUG -- : 
I, [2015-01-01T17:26:10.513158 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 17:26:10 +0000
D, [2015-01-01T17:26:10.609163 #10344] DEBUG -- : 
D, [2015-01-01T17:26:10.629165 #10344] DEBUG -- : 
I, [2015-01-01T17:26:10.679167 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 17:26:10 +0000
D, [2015-01-01T17:26:10.756172 #10344] DEBUG -- : 
D, [2015-01-01T17:26:10.777173 #10344] DEBUG -- : 
I, [2015-01-01T17:26:10.828176 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 17:26:10 +0000
D, [2015-01-01T17:26:10.898180 #10344] DEBUG -- : 
D, [2015-01-01T17:26:10.926182 #10344] DEBUG -- : 
I, [2015-01-01T17:26:10.979185 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 17:26:10 +0000
D, [2015-01-01T17:26:11.058189 #10344] DEBUG -- : 
D, [2015-01-01T17:26:11.077190 #10344] DEBUG -- : 
I, [2015-01-01T17:26:11.126193 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 17:26:11 +0000
D, [2015-01-01T17:26:11.203197 #10344] DEBUG -- : 
D, [2015-01-01T17:26:11.231199 #10344] DEBUG -- : 
I, [2015-01-01T17:26:11.282202 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 17:26:11 +0000
D, [2015-01-01T17:26:11.357206 #10344] DEBUG -- : 
D, [2015-01-01T17:26:11.377207 #10344] DEBUG -- : 
I, [2015-01-01T17:26:11.430210 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 17:26:11 +0000
D, [2015-01-01T17:26:11.501214 #10344] DEBUG -- : 
D, [2015-01-01T17:26:11.556218 #10344] DEBUG -- : 
I, [2015-01-01T17:26:11.603220 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 17:26:11 +0000
D, [2015-01-01T17:26:11.677224 #10344] DEBUG -- : 
D, [2015-01-01T17:26:11.700226 #10344] DEBUG -- : 
I, [2015-01-01T17:26:11.760229 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 17:26:11 +0000
D, [2015-01-01T17:26:11.835233 #10344] DEBUG -- : 
D, [2015-01-01T17:26:11.863235 #10344] DEBUG -- : 
I, [2015-01-01T17:26:11.933239 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 17:26:11 +0000
D, [2015-01-01T17:26:12.058246 #10344] DEBUG -- : 
D, [2015-01-01T17:26:12.084248 #10344] DEBUG -- : 
I, [2015-01-01T17:26:12.149251 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 17:26:12 +0000
D, [2015-01-01T17:26:12.236256 #10344] DEBUG -- : 
D, [2015-01-01T17:26:12.262258 #10344] DEBUG -- : 
I, [2015-01-01T17:26:12.331262 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 17:26:12 +0000
D, [2015-01-01T17:26:12.429267 #10344] DEBUG -- : 
D, [2015-01-01T17:26:12.449269 #10344] DEBUG -- : 
I, [2015-01-01T17:26:12.510272 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 17:26:12 +0000
D, [2015-01-01T17:26:23.528353 #10344] DEBUG -- : 
D, [2015-01-01T17:26:23.559553 #10344] DEBUG -- : 
I, [2015-01-01T17:26:23.621953 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 17:26:23 +0000
I, [2015-01-01T17:26:23.824754 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T17:26:23.902754 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T17:26:23.996354 #10344] DEBUG -- :   [1m[35mCart Load (15.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:26:24.106554 #10344] DEBUG -- :   [1m[36mProduct Load (15.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-01T17:26:24.246954 #10344] DEBUG -- :   [1m[35mLineItem Load (15.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:26:24.402955 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T17:26:24.496555 #10344] DEBUG -- :   [1m[35m (15.6ms)[0m  begin transaction
D, [2015-01-01T17:26:24.886555 #10344] DEBUG -- :   [1m[36mSQL (124.8ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 17:26:24 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:9e35018,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 17:26:24 UTC +00:00]]
D, [2015-01-01T17:26:25.089356 #10344] DEBUG -- :   [1m[35m (156.0ms)[0m  commit transaction
D, [2015-01-01T17:26:25.260956 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:26:25.386756 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (31.2ms)
I, [2015-01-01T17:26:25.464756 #10344]  INFO -- :   Rendered carts/_cart.html.erb (235.0ms)
I, [2015-01-01T17:26:25.511557 #10344]  INFO -- :   Rendered line_items/create.js.erb (297.4ms)
I, [2015-01-01T17:26:25.558357 #10344]  INFO -- : Completed 200 OK in 1609ms (Views: 406.6ms | ActiveRecord: 343.2ms)
D, [2015-01-01T17:26:28.790627 #10344] DEBUG -- : 
D, [2015-01-01T17:26:28.821827 #10344] DEBUG -- : 
I, [2015-01-01T17:26:28.868627 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 17:26:28 +0000
I, [2015-01-01T17:26:28.993428 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T17:26:29.133828 #10344] DEBUG -- :   [1m[35mUser Load (15.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T17:26:29.243028 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T17:26:29.695429 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:26:30.210230 #10344] DEBUG -- :   [1m[36mLineItem Load (15.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:26:30.678231 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T17:26:42.467661 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T17:26:42.623662 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 17:26:42 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 17:26:42 UTC +00:00]]
D, [2015-01-01T17:26:42.826462 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 44  [["cart_id", nil], ["order_id", 43], ["updated_at", Thu, 01 Jan 2015 17:26:42 UTC +00:00]]
I, [2015-01-01T17:26:42.873262 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T17:26:42.982462 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-01T17:26:43.060462 #10344]  INFO -- : in order=
I, [2015-01-01T17:26:43.091662 #10344]  INFO -- : in payment.create
I, [2015-01-01T17:26:43.325663 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/43/confirm", "cancel_url"=>"http://localhost:3000/orders/43/cancel"}}
I, [2015-01-01T17:26:43.918464 #10344]  INFO -- : #<ActiveModel::Errors:0x00000007ff3e10 @base=#<Payment:0x00000008163e08 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008163188 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008090328 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000008077350 @error=nil, @total="19.99", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008074f88 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000806fd08 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008067018 @error=nil, @return_url="http://localhost:3000/orders/43/confirm", @cancel_url="http://localhost:3000/orders/43/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007ff3e10 ...>>, @messages={}>
I, [2015-01-01T17:26:43.949664 #10344]  INFO -- : got past invalid
I, [2015-01-01T17:26:44.043264 #10344]  INFO -- : PayPal-Request-Id: 2f3d041b-e214-444f-9b07-4b168b1c2c32
I, [2015-01-01T17:26:44.105664 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T17:26:45.494067 #10344]  INFO -- : Response[201]: Created, Duration: 1.357s
I, [2015-01-01T17:26:45.540867 #10344]  INFO -- : back from super
I, [2015-01-01T17:26:45.977667 #10344]  INFO -- : {"id"=>"PAY-5A5461639M254973KKSSYGVY", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99", "details"=>{"subtotal"=>"19.99"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/43/confirm", "cancel_url"=>"http://localhost:3000/orders/43/cancel"}, "create_time"=>"2015-01-01T17:26:47Z", "update_time"=>"2015-01-01T17:26:47Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-5A5461639M254973KKSSYGVY", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-1EW18306P1794840T", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-5A5461639M254973KKSSYGVY/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-01T17:26:46.211668 #10344] DEBUG -- :   [1m[35mSQL (62.4ms)[0m  UPDATE "orders" SET "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ? WHERE "orders"."id" = 43  [["created_at", Thu, 01 Jan 2015 17:26:42 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 17:26:42 UTC +00:00], ["id", 43], ["payment_id", "PAY-5A5461639M254973KKSSYGVY"], ["state", "created"]]
I, [2015-01-01T17:26:46.242868 #10344]  INFO -- : @payment save just done
I, [2015-01-01T17:26:47.211070 #10344]  INFO -- : #<Payment:0x00000008163e08 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007de0f38 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000007de03d0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000007ddbdd0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007ddabd8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007dda688 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000007dd9238 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007dd3f90 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007dd3158 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008067018 @error=nil, @return_url="http://localhost:3000/orders/43/confirm", @cancel_url="http://localhost:3000/orders/43/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007ff3e10 @base=#<Payment:0x00000008163e08 ...>, @messages={}>, @request_id="2f3d041b-e214-444f-9b07-4b168b1c2c32", @header={}, @id="PAY-5A5461639M254973KKSSYGVY", @create_time="2015-01-01T17:26:47Z", @update_time="2015-01-01T17:26:47Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000007dd04a8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5A5461639M254973KKSSYGVY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007dcac10 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-1EW18306P1794840T", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007dc9428 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5A5461639M254973KKSSYGVY/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T17:26:48.147071 #10344]  INFO -- : #<Payment:0x00000008163e08 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007de0f38 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000007de03d0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000007ddbdd0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007ddabd8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007dda688 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000007dd9238 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007dd3f90 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007dd3158 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008067018 @error=nil, @return_url="http://localhost:3000/orders/43/confirm", @cancel_url="http://localhost:3000/orders/43/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007ff3e10 @base=#<Payment:0x00000008163e08 ...>, @messages={}>, @request_id="2f3d041b-e214-444f-9b07-4b168b1c2c32", @header={}, @id="PAY-5A5461639M254973KKSSYGVY", @create_time="2015-01-01T17:26:47Z", @update_time="2015-01-01T17:26:47Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000007dd04a8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5A5461639M254973KKSSYGVY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007dcac10 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-1EW18306P1794840T", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007dc9428 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5A5461639M254973KKSSYGVY/execute", @rel="execute", @method="POST">]>
D, [2015-01-01T17:26:48.320672 #10344] DEBUG -- :   [1m[36m (125.8ms)[0m  [1mcommit transaction[0m
I, [2015-01-01T17:26:48.351872 #10344]  INFO -- : about to approve url
I, [2015-01-01T17:26:49.319073 #10344]  INFO -- : #<Payment:0x00000008163e08 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007de0f38 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000007de03d0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000007ddbdd0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007ddabd8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007dda688 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000007dd9238 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007dd3f90 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007dd3158 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008067018 @error=nil, @return_url="http://localhost:3000/orders/43/confirm", @cancel_url="http://localhost:3000/orders/43/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007ff3e10 @base=#<Payment:0x00000008163e08 ...>, @messages={}>, @request_id="2f3d041b-e214-444f-9b07-4b168b1c2c32", @header={}, @id="PAY-5A5461639M254973KKSSYGVY", @create_time="2015-01-01T17:26:47Z", @update_time="2015-01-01T17:26:47Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000007dd04a8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5A5461639M254973KKSSYGVY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007dcac10 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-1EW18306P1794840T", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007dc9428 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5A5461639M254973KKSSYGVY/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T17:26:50.334075 #10344]  INFO -- : #<Payment:0x00000008163e08 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007de0f38 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000007de03d0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000007ddbdd0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007ddabd8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007dda688 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000007dd9238 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007dd3f90 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007dd3158 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008067018 @error=nil, @return_url="http://localhost:3000/orders/43/confirm", @cancel_url="http://localhost:3000/orders/43/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007ff3e10 @base=#<Payment:0x00000008163e08 ...>, @messages={}>, @request_id="2f3d041b-e214-444f-9b07-4b168b1c2c32", @header={}, @id="PAY-5A5461639M254973KKSSYGVY", @create_time="2015-01-01T17:26:47Z", @update_time="2015-01-01T17:26:47Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000007dd04a8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5A5461639M254973KKSSYGVY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007dcac10 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-1EW18306P1794840T", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007dc9428 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5A5461639M254973KKSSYGVY/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T17:26:50.381875 #10344]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-1EW18306P1794840T
I, [2015-01-01T17:26:51.352077 #10344]  INFO -- : #<Payment:0x00000008163e08 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007de0f38 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000007de03d0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000007ddbdd0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007ddabd8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007dda688 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000007dd9238 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007dd3f90 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007dd3158 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008067018 @error=nil, @return_url="http://localhost:3000/orders/43/confirm", @cancel_url="http://localhost:3000/orders/43/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007ff3e10 @base=#<Payment:0x00000008163e08 ...>, @messages={}>, @request_id="2f3d041b-e214-444f-9b07-4b168b1c2c32", @header={}, @id="PAY-5A5461639M254973KKSSYGVY", @create_time="2015-01-01T17:26:47Z", @update_time="2015-01-01T17:26:47Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000007dd04a8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5A5461639M254973KKSSYGVY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007dcac10 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-1EW18306P1794840T", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000007dc9428 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5A5461639M254973KKSSYGVY/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T17:26:51.430077 #10344]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-1EW18306P1794840T
I, [2015-01-01T17:26:51.539278 #10344]  INFO -- : Completed 403 Forbidden in 22483ms (ActiveRecord: 250.6ms)
D, [2015-01-01T17:29:16.876614 #10344] DEBUG -- : 
D, [2015-01-01T17:29:16.894615 #10344] DEBUG -- : 
I, [2015-01-01T17:29:16.988621 #10344]  INFO -- : Started GET "/orders/43/confirm?paymentId=PAY-5A5461639M254973KKSSYGVY&token=EC-1EW18306P1794840T&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-01 17:29:16 +0000
I, [2015-01-01T17:29:17.114628 #10344]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-01T17:29:17.194633 #10344]  INFO -- :   Parameters: {"paymentId"=>"PAY-5A5461639M254973KKSSYGVY", "token"=>"EC-1EW18306P1794840T", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"43"}
D, [2015-01-01T17:29:17.293638 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T17:29:17.363642 #10344] DEBUG -- :   [1m[36mUser Load (3.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T17:29:17.474649 #10344] DEBUG -- :   [1m[35mOrder Load (1.0ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "43"]]
I, [2015-01-01T17:29:59.152032 #10344]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-5A5461639M254973KKSSYGVY
I, [2015-01-01T17:30:00.245095 #10344]  INFO -- : Response[200]: OK, Duration: 1.061s
D, [2015-01-01T17:30:01.309156 #10344] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T17:30:01.414162 #10344] DEBUG -- :   [1m[35mSQL (7.0ms)[0m  UPDATE "orders" SET "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 43  [["shipping_address1", "1 Main Terrace"], ["updated_at", Thu, 01 Jan 2015 17:30:01 UTC +00:00]]
D, [2015-01-01T17:30:01.700178 #10344] DEBUG -- :   [1m[36m (254.0ms)[0m  [1mcommit transaction[0m
I, [2015-01-01T17:30:02.045198 #10344]  INFO -- :   Rendered orders/_form.html.erb (262.0ms)
I, [2015-01-01T17:30:02.106201 #10344]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (342.0ms)
I, [2015-01-01T17:30:02.325214 #10344]  INFO -- : Completed 200 OK in 45083ms (Views: 575.0ms | ActiveRecord: 268.0ms)
D, [2015-01-01T17:30:02.630231 #10344] DEBUG -- : 
D, [2015-01-01T17:30:02.645232 #10344] DEBUG -- : 
I, [2015-01-01T17:30:02.688235 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 17:30:02 +0000
D, [2015-01-01T17:30:06.383446 #10344] DEBUG -- : 
D, [2015-01-01T17:30:06.408447 #10344] DEBUG -- : 
I, [2015-01-01T17:30:06.460450 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 17:30:06 +0000
D, [2015-01-01T17:30:06.541455 #10344] DEBUG -- : 
D, [2015-01-01T17:30:06.561456 #10344] DEBUG -- : 
I, [2015-01-01T17:30:06.608459 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 17:30:06 +0000
D, [2015-01-01T17:30:06.682463 #10344] DEBUG -- : 
D, [2015-01-01T17:30:06.706465 #10344] DEBUG -- : 
I, [2015-01-01T17:30:06.754467 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 17:30:06 +0000
D, [2015-01-01T17:30:06.833472 #10344] DEBUG -- : 
D, [2015-01-01T17:30:06.853473 #10344] DEBUG -- : 
I, [2015-01-01T17:30:06.906476 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 17:30:06 +0000
D, [2015-01-01T17:30:06.982480 #10344] DEBUG -- : 
D, [2015-01-01T17:30:07.005482 #10344] DEBUG -- : 
I, [2015-01-01T17:30:07.059485 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 17:30:07 +0000
D, [2015-01-01T17:30:07.135489 #10344] DEBUG -- : 
D, [2015-01-01T17:30:07.155490 #10344] DEBUG -- : 
I, [2015-01-01T17:30:07.208493 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 17:30:07 +0000
D, [2015-01-01T17:30:07.293498 #10344] DEBUG -- : 
D, [2015-01-01T17:30:07.312499 #10344] DEBUG -- : 
I, [2015-01-01T17:30:07.362502 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 17:30:07 +0000
D, [2015-01-01T17:30:07.443507 #10344] DEBUG -- : 
D, [2015-01-01T17:30:07.462508 #10344] DEBUG -- : 
I, [2015-01-01T17:30:07.512511 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 17:30:07 +0000
D, [2015-01-01T17:30:07.583515 #10344] DEBUG -- : 
D, [2015-01-01T17:30:07.611516 #10344] DEBUG -- : 
I, [2015-01-01T17:30:07.664519 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 17:30:07 +0000
D, [2015-01-01T17:30:07.744524 #10344] DEBUG -- : 
D, [2015-01-01T17:30:07.764525 #10344] DEBUG -- : 
I, [2015-01-01T17:30:07.819528 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 17:30:07 +0000
D, [2015-01-01T17:30:07.901533 #10344] DEBUG -- : 
D, [2015-01-01T17:30:07.922534 #10344] DEBUG -- : 
I, [2015-01-01T17:30:07.971537 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 17:30:07 +0000
D, [2015-01-01T17:30:08.052542 #10344] DEBUG -- : 
D, [2015-01-01T17:30:08.097544 #10344] DEBUG -- : 
I, [2015-01-01T17:30:08.145547 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 17:30:08 +0000
D, [2015-01-01T17:30:08.212551 #10344] DEBUG -- : 
D, [2015-01-01T17:30:08.229552 #10344] DEBUG -- : 
I, [2015-01-01T17:30:08.270554 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 17:30:08 +0000
D, [2015-01-01T17:30:08.327557 #10344] DEBUG -- : 
D, [2015-01-01T17:30:08.342558 #10344] DEBUG -- : 
I, [2015-01-01T17:30:08.379560 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 17:30:08 +0000
D, [2015-01-01T17:30:08.432563 #10344] DEBUG -- : 
D, [2015-01-01T17:30:08.451564 #10344] DEBUG -- : 
I, [2015-01-01T17:30:08.486566 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 17:30:08 +0000
D, [2015-01-01T17:30:08.542570 #10344] DEBUG -- : 
D, [2015-01-01T17:30:08.562571 #10344] DEBUG -- : 
I, [2015-01-01T17:30:08.597573 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 17:30:08 +0000
D, [2015-01-01T17:30:08.652576 #10344] DEBUG -- : 
D, [2015-01-01T17:30:08.670577 #10344] DEBUG -- : 
I, [2015-01-01T17:30:08.708579 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 17:30:08 +0000
D, [2015-01-01T17:30:08.762582 #10344] DEBUG -- : 
D, [2015-01-01T17:30:08.782583 #10344] DEBUG -- : 
I, [2015-01-01T17:30:08.817585 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 17:30:08 +0000
D, [2015-01-01T17:30:08.878589 #10344] DEBUG -- : 
D, [2015-01-01T17:30:08.892590 #10344] DEBUG -- : 
I, [2015-01-01T17:30:08.928592 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 17:30:08 +0000
D, [2015-01-01T17:30:08.988595 #10344] DEBUG -- : 
D, [2015-01-01T17:30:09.004596 #10344] DEBUG -- : 
I, [2015-01-01T17:30:09.040598 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 17:30:09 +0000
D, [2015-01-01T17:30:09.105602 #10344] DEBUG -- : 
D, [2015-01-01T17:30:09.119603 #10344] DEBUG -- : 
I, [2015-01-01T17:30:09.155605 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 17:30:09 +0000
D, [2015-01-01T17:30:09.208608 #10344] DEBUG -- : 
D, [2015-01-01T17:30:09.221608 #10344] DEBUG -- : 
I, [2015-01-01T17:30:09.260611 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 17:30:09 +0000
D, [2015-01-01T17:30:09.312614 #10344] DEBUG -- : 
D, [2015-01-01T17:30:09.327614 #10344] DEBUG -- : 
I, [2015-01-01T17:30:09.362616 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 17:30:09 +0000
D, [2015-01-01T17:30:09.415619 #10344] DEBUG -- : 
D, [2015-01-01T17:30:09.428620 #10344] DEBUG -- : 
I, [2015-01-01T17:30:09.463622 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 17:30:09 +0000
D, [2015-01-01T17:30:09.516625 #10344] DEBUG -- : 
D, [2015-01-01T17:30:09.530626 #10344] DEBUG -- : 
I, [2015-01-01T17:30:09.569628 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 17:30:09 +0000
D, [2015-01-01T17:30:09.625631 #10344] DEBUG -- : 
D, [2015-01-01T17:30:09.638632 #10344] DEBUG -- : 
I, [2015-01-01T17:30:09.668634 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 17:30:09 +0000
D, [2015-01-01T17:30:09.739638 #10344] DEBUG -- : 
D, [2015-01-01T17:30:09.754639 #10344] DEBUG -- : 
I, [2015-01-01T17:30:09.791641 #10344]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-01 17:30:09 +0000
D, [2015-01-01T17:32:22.504702 #10344] DEBUG -- : 
D, [2015-01-01T17:32:22.520302 #10344] DEBUG -- : 
I, [2015-01-01T17:32:22.582504 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 17:32:22 +0000
I, [2015-01-01T17:32:23.132535 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T17:32:23.392550 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:32:23.782572 #10344] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-01T17:32:24.167595 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (5.0ms)
I, [2015-01-01T17:32:24.230598 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (485.0ms)
D, [2015-01-01T17:32:24.625621 #10344] DEBUG -- :   [1m[35mLineItem Exists (2.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:32:24.740627 #10344] DEBUG -- :   [1m[36mLineItem Load (3.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:32:24.784630 #10344]  INFO -- :   Rendered collection (1.0ms)
I, [2015-01-01T17:32:24.937639 #10344]  INFO -- :   Rendered carts/_cart.html.erb (250.0ms)
I, [2015-01-01T17:32:25.038644 #10344]  INFO -- : Completed 200 OK in 1845ms (Views: 1285.1ms | ActiveRecord: 38.0ms)
D, [2015-01-01T17:32:25.426667 #10344] DEBUG -- : 
D, [2015-01-01T17:32:25.481670 #10344] DEBUG -- : 
I, [2015-01-01T17:32:25.534673 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 17:32:25 +0000
D, [2015-01-01T17:32:25.645679 #10344] DEBUG -- : 
D, [2015-01-01T17:32:25.663680 #10344] DEBUG -- : 
I, [2015-01-01T17:32:25.714683 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 17:32:25 +0000
D, [2015-01-01T17:32:25.798688 #10344] DEBUG -- : 
D, [2015-01-01T17:32:25.825689 #10344] DEBUG -- : 
I, [2015-01-01T17:32:25.880692 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 17:32:25 +0000
D, [2015-01-01T17:32:25.992699 #10344] DEBUG -- : 
D, [2015-01-01T17:32:26.012700 #10344] DEBUG -- : 
I, [2015-01-01T17:32:26.066703 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 17:32:26 +0000
D, [2015-01-01T17:32:26.146708 #10344] DEBUG -- : 
D, [2015-01-01T17:32:26.172709 #10344] DEBUG -- : 
I, [2015-01-01T17:32:26.225712 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 17:32:26 +0000
D, [2015-01-01T17:32:26.309717 #10344] DEBUG -- : 
D, [2015-01-01T17:32:26.329718 #10344] DEBUG -- : 
I, [2015-01-01T17:32:26.386721 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 17:32:26 +0000
D, [2015-01-01T17:32:26.484727 #10344] DEBUG -- : 
D, [2015-01-01T17:32:26.505728 #10344] DEBUG -- : 
I, [2015-01-01T17:32:26.562731 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 17:32:26 +0000
D, [2015-01-01T17:32:26.665737 #10344] DEBUG -- : 
D, [2015-01-01T17:32:26.686739 #10344] DEBUG -- : 
I, [2015-01-01T17:32:26.741742 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 17:32:26 +0000
D, [2015-01-01T17:32:26.819746 #10344] DEBUG -- : 
D, [2015-01-01T17:32:26.840747 #10344] DEBUG -- : 
I, [2015-01-01T17:32:26.889750 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 17:32:26 +0000
D, [2015-01-01T17:32:26.979755 #10344] DEBUG -- : 
D, [2015-01-01T17:32:27.010757 #10344] DEBUG -- : 
I, [2015-01-01T17:32:27.062760 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 17:32:27 +0000
D, [2015-01-01T17:32:27.141765 #10344] DEBUG -- : 
D, [2015-01-01T17:32:27.167766 #10344] DEBUG -- : 
I, [2015-01-01T17:32:27.221769 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 17:32:27 +0000
D, [2015-01-01T17:32:27.304774 #10344] DEBUG -- : 
D, [2015-01-01T17:32:27.324775 #10344] DEBUG -- : 
I, [2015-01-01T17:32:27.375778 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 17:32:27 +0000
D, [2015-01-01T17:32:27.468783 #10344] DEBUG -- : 
D, [2015-01-01T17:32:27.487784 #10344] DEBUG -- : 
I, [2015-01-01T17:32:27.542788 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 17:32:27 +0000
D, [2015-01-01T17:32:27.625792 #10344] DEBUG -- : 
D, [2015-01-01T17:32:27.645793 #10344] DEBUG -- : 
I, [2015-01-01T17:32:27.705797 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 17:32:27 +0000
D, [2015-01-01T17:32:27.792802 #10344] DEBUG -- : 
D, [2015-01-01T17:32:27.813803 #10344] DEBUG -- : 
I, [2015-01-01T17:32:27.864806 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 17:32:27 +0000
D, [2015-01-01T17:32:27.949811 #10344] DEBUG -- : 
D, [2015-01-01T17:32:27.971812 #10344] DEBUG -- : 
I, [2015-01-01T17:32:28.028815 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 17:32:27 +0000
D, [2015-01-01T17:32:28.117820 #10344] DEBUG -- : 
D, [2015-01-01T17:32:28.142822 #10344] DEBUG -- : 
I, [2015-01-01T17:32:28.194825 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 17:32:28 +0000
D, [2015-01-01T17:32:28.273829 #10344] DEBUG -- : 
D, [2015-01-01T17:32:28.294831 #10344] DEBUG -- : 
I, [2015-01-01T17:32:28.346834 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 17:32:28 +0000
D, [2015-01-01T17:32:28.425838 #10344] DEBUG -- : 
D, [2015-01-01T17:32:28.448839 #10344] DEBUG -- : 
I, [2015-01-01T17:32:28.503843 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 17:32:28 +0000
D, [2015-01-01T17:32:28.590847 #10344] DEBUG -- : 
D, [2015-01-01T17:32:28.618849 #10344] DEBUG -- : 
I, [2015-01-01T17:32:28.672852 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 17:32:28 +0000
D, [2015-01-01T17:32:28.751857 #10344] DEBUG -- : 
D, [2015-01-01T17:32:28.772858 #10344] DEBUG -- : 
I, [2015-01-01T17:32:28.825861 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 17:32:28 +0000
D, [2015-01-01T17:32:28.914866 #10344] DEBUG -- : 
D, [2015-01-01T17:32:28.932867 #10344] DEBUG -- : 
I, [2015-01-01T17:32:29.006871 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 17:32:28 +0000
D, [2015-01-01T17:32:29.083876 #10344] DEBUG -- : 
D, [2015-01-01T17:32:29.104877 #10344] DEBUG -- : 
I, [2015-01-01T17:32:29.158880 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 17:32:29 +0000
D, [2015-01-01T17:32:29.231884 #10344] DEBUG -- : 
D, [2015-01-01T17:32:29.250885 #10344] DEBUG -- : 
I, [2015-01-01T17:32:29.298888 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 17:32:29 +0000
D, [2015-01-01T17:32:29.369892 #10344] DEBUG -- : 
D, [2015-01-01T17:32:29.388893 #10344] DEBUG -- : 
I, [2015-01-01T17:32:29.447897 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 17:32:29 +0000
D, [2015-01-01T17:32:29.522901 #10344] DEBUG -- : 
D, [2015-01-01T17:32:29.544902 #10344] DEBUG -- : 
I, [2015-01-01T17:32:29.599905 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 17:32:29 +0000
D, [2015-01-01T17:32:29.689910 #10344] DEBUG -- : 
D, [2015-01-01T17:32:29.722912 #10344] DEBUG -- : 
I, [2015-01-01T17:32:29.768915 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 17:32:29 +0000
D, [2015-01-01T17:32:29.848919 #10344] DEBUG -- : 
D, [2015-01-01T17:32:29.868921 #10344] DEBUG -- : 
I, [2015-01-01T17:32:29.918923 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 17:32:29 +0000
D, [2015-01-01T17:32:30.000928 #10344] DEBUG -- : 
D, [2015-01-01T17:32:30.019929 #10344] DEBUG -- : 
I, [2015-01-01T17:32:30.074932 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 17:32:30 +0000
D, [2015-01-01T17:34:02.538432 #10344] DEBUG -- : 
D, [2015-01-01T17:34:02.554032 #10344] DEBUG -- : 
I, [2015-01-01T17:34:02.616432 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 17:34:02 +0000
I, [2015-01-01T17:34:02.772433 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T17:34:02.850433 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T17:34:02.975233 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:34:03.053233 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-01T17:34:03.179033 #10344] DEBUG -- :   [1m[35mLineItem Load (15.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:34:03.460834 #10344] DEBUG -- :   [1m[36mProduct Load (15.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T17:34:03.507634 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T17:34:03.788434 #10344] DEBUG -- :   [1m[36mSQL (31.2ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 17:34:03 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:4625288,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 17:34:03 UTC +00:00]]
D, [2015-01-01T17:34:04.006835 #10344] DEBUG -- :   [1m[35m (187.2ms)[0m  commit transaction
D, [2015-01-01T17:34:04.116035 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:34:04.209635 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T17:34:04.287635 #10344]  INFO -- :   Rendered carts/_cart.html.erb (218.4ms)
I, [2015-01-01T17:34:04.334435 #10344]  INFO -- :   Rendered line_items/create.js.erb (280.8ms)
I, [2015-01-01T17:34:04.396835 #10344]  INFO -- : Completed 200 OK in 1500ms (Views: 343.2ms | ActiveRecord: 249.6ms)
D, [2015-01-01T17:34:10.263511 #10344] DEBUG -- : 
D, [2015-01-01T17:34:10.279111 #10344] DEBUG -- : 
I, [2015-01-01T17:34:10.341511 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 17:34:10 +0000
I, [2015-01-01T17:34:10.497511 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T17:34:10.887512 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T17:34:11.164713 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T17:34:11.227113 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:34:11.414313 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:34:11.570314 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T17:34:20.184132 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T17:34:20.605333 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 17:34:20 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 17:34:20 UTC +00:00]]
D, [2015-01-01T17:34:20.745733 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 45  [["cart_id", nil], ["order_id", 44], ["updated_at", Thu, 01 Jan 2015 17:34:20 UTC +00:00]]
I, [2015-01-01T17:34:20.776933 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T17:34:20.888134 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-01T17:34:20.966134 #10344]  INFO -- : in order=
I, [2015-01-01T17:34:20.997334 #10344]  INFO -- : in payment.create
I, [2015-01-01T17:34:21.215734 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/44/confirm", "cancel_url"=>"http://localhost:3000/orders/44/cancel"}}
I, [2015-01-01T17:34:21.652535 #10344]  INFO -- : #<ActiveModel::Errors:0x00000009e3ede8 @base=#<Payment:0x00000004075400 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000004067a08 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000002c93568 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000002c778b8 @error=nil, @total="19.99", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000002b033b0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000002ae9758 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000095627b0 @error=nil, @return_url="http://localhost:3000/orders/44/confirm", @cancel_url="http://localhost:3000/orders/44/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009e3ede8 ...>>, @messages={}>
I, [2015-01-01T17:34:21.683735 #10344]  INFO -- : got past invalid
I, [2015-01-01T17:34:21.746135 #10344]  INFO -- : PayPal-Request-Id: 7553a96f-716a-4032-8409-08c97b33708a
I, [2015-01-01T17:34:21.777335 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T17:34:23.059538 #10344]  INFO -- : Response[201]: Created, Duration: 1.251s
I, [2015-01-01T17:34:23.106338 #10344]  INFO -- : back from super
I, [2015-01-01T17:34:23.608539 #10344]  INFO -- : {"id"=>"PAY-56K1992957110070NKSSYKIA", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99", "details"=>{"subtotal"=>"19.99"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/44/confirm", "cancel_url"=>"http://localhost:3000/orders/44/cancel"}, "create_time"=>"2015-01-01T17:34:24Z", "update_time"=>"2015-01-01T17:34:25Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-56K1992957110070NKSSYKIA", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-1EF57336UK813481L", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-56K1992957110070NKSSYKIA/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-01T17:34:23.826939 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "orders" SET "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ? WHERE "orders"."id" = 44  [["created_at", Thu, 01 Jan 2015 17:34:20 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 17:34:20 UTC +00:00], ["id", 44], ["payment_id", "PAY-56K1992957110070NKSSYKIA"], ["state", "created"]]
I, [2015-01-01T17:34:23.858139 #10344]  INFO -- : @payment save just done
I, [2015-01-01T17:34:24.983341 #10344]  INFO -- : #<Payment:0x00000004075400 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009f54f20 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009f542f0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009f0fb28 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009f0eb10 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009f0e458 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009f0d378 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009f07ea0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009f06f50 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000095627b0 @error=nil, @return_url="http://localhost:3000/orders/44/confirm", @cancel_url="http://localhost:3000/orders/44/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009e3ede8 @base=#<Payment:0x00000004075400 ...>, @messages={}>, @request_id="7553a96f-716a-4032-8409-08c97b33708a", @header={}, @id="PAY-56K1992957110070NKSSYKIA", @create_time="2015-01-01T17:34:24Z", @update_time="2015-01-01T17:34:25Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009eef788 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-56K1992957110070NKSSYKIA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009eedde8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-1EF57336UK813481L", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009eec678 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-56K1992957110070NKSSYKIA/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T17:34:25.952543 #10344]  INFO -- : #<Payment:0x00000004075400 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009f54f20 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009f542f0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009f0fb28 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009f0eb10 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009f0e458 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009f0d378 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009f07ea0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009f06f50 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000095627b0 @error=nil, @return_url="http://localhost:3000/orders/44/confirm", @cancel_url="http://localhost:3000/orders/44/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009e3ede8 @base=#<Payment:0x00000004075400 ...>, @messages={}>, @request_id="7553a96f-716a-4032-8409-08c97b33708a", @header={}, @id="PAY-56K1992957110070NKSSYKIA", @create_time="2015-01-01T17:34:24Z", @update_time="2015-01-01T17:34:25Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009eef788 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-56K1992957110070NKSSYKIA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009eedde8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-1EF57336UK813481L", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009eec678 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-56K1992957110070NKSSYKIA/execute", @rel="execute", @method="POST">]>
D, [2015-01-01T17:34:26.155343 #10344] DEBUG -- :   [1m[36m (171.6ms)[0m  [1mcommit transaction[0m
I, [2015-01-01T17:34:26.186543 #10344]  INFO -- : about to approve url
I, [2015-01-01T17:34:27.123545 #10344]  INFO -- : #<Payment:0x00000004075400 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009f54f20 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009f542f0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009f0fb28 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009f0eb10 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009f0e458 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009f0d378 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009f07ea0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009f06f50 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000095627b0 @error=nil, @return_url="http://localhost:3000/orders/44/confirm", @cancel_url="http://localhost:3000/orders/44/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009e3ede8 @base=#<Payment:0x00000004075400 ...>, @messages={}>, @request_id="7553a96f-716a-4032-8409-08c97b33708a", @header={}, @id="PAY-56K1992957110070NKSSYKIA", @create_time="2015-01-01T17:34:24Z", @update_time="2015-01-01T17:34:25Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009eef788 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-56K1992957110070NKSSYKIA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009eedde8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-1EF57336UK813481L", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009eec678 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-56K1992957110070NKSSYKIA/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T17:34:28.031347 #10344]  INFO -- : #<Payment:0x00000004075400 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009f54f20 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009f542f0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009f0fb28 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009f0eb10 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009f0e458 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009f0d378 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009f07ea0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009f06f50 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000095627b0 @error=nil, @return_url="http://localhost:3000/orders/44/confirm", @cancel_url="http://localhost:3000/orders/44/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009e3ede8 @base=#<Payment:0x00000004075400 ...>, @messages={}>, @request_id="7553a96f-716a-4032-8409-08c97b33708a", @header={}, @id="PAY-56K1992957110070NKSSYKIA", @create_time="2015-01-01T17:34:24Z", @update_time="2015-01-01T17:34:25Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009eef788 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-56K1992957110070NKSSYKIA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009eedde8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-1EF57336UK813481L", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009eec678 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-56K1992957110070NKSSYKIA/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T17:34:28.093747 #10344]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-1EF57336UK813481L
I, [2015-01-01T17:34:29.066949 #10344]  INFO -- : #<Payment:0x00000004075400 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009f54f20 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009f542f0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009f0fb28 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009f0eb10 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009f0e458 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009f0d378 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009f07ea0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009f06f50 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000095627b0 @error=nil, @return_url="http://localhost:3000/orders/44/confirm", @cancel_url="http://localhost:3000/orders/44/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009e3ede8 @base=#<Payment:0x00000004075400 ...>, @messages={}>, @request_id="7553a96f-716a-4032-8409-08c97b33708a", @header={}, @id="PAY-56K1992957110070NKSSYKIA", @create_time="2015-01-01T17:34:24Z", @update_time="2015-01-01T17:34:25Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009eef788 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-56K1992957110070NKSSYKIA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009eedde8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-1EF57336UK813481L", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009eec678 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-56K1992957110070NKSSYKIA/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T17:34:29.144949 #10344]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-1EF57336UK813481L
I, [2015-01-01T17:34:29.191749 #10344]  INFO -- : Completed 403 Forbidden in 18647ms (ActiveRecord: 202.8ms)
D, [2015-01-01T17:35:09.473049 #10344] DEBUG -- : 
D, [2015-01-01T17:35:09.490050 #10344] DEBUG -- : 
I, [2015-01-01T17:35:09.539053 #10344]  INFO -- : Started GET "/orders/44/cancel?token=EC-1EF57336UK813481L" for 127.0.0.1 at 2015-01-01 17:35:09 +0000
I, [2015-01-01T17:35:09.650059 #10344]  INFO -- : Processing by OrdersController#cancel as HTML
I, [2015-01-01T17:35:09.684061 #10344]  INFO -- :   Parameters: {"token"=>"EC-1EF57336UK813481L", "order_id"=>"44"}
I, [2015-01-01T17:35:09.831069 #10344]  INFO -- : Completed 500 Internal Server Error in 117ms
F, [2015-01-01T17:35:10.061082 #10344] FATAL -- : 
NameError (undefined local variable or method `current_user' for #<OrdersController:0x000000096c7970>):
  app/controllers/orders_controller.rb:110:in `cancel'


I, [2015-01-01T17:35:10.637115 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (48.0ms)
I, [2015-01-01T17:35:10.821126 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (67.0ms)
I, [2015-01-01T17:35:10.991136 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (62.0ms)
I, [2015-01-01T17:35:11.048139 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (688.0ms)
D, [2015-01-01T17:35:19.336422 #10344] DEBUG -- : 
D, [2015-01-01T17:35:19.367622 #10344] DEBUG -- : 
I, [2015-01-01T17:35:19.413224 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 17:35:19 +0000
I, [2015-01-01T17:35:19.524230 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T17:35:19.598234 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:35:19.696240 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-01T17:35:19.772244 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (4.0ms)
I, [2015-01-01T17:35:19.815247 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (145.0ms)
D, [2015-01-01T17:35:20.031259 #10344] DEBUG -- :   [1m[35mLineItem Exists (1.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:35:20.114264 #10344] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:35:20.147266 #10344]  INFO -- :   Rendered collection (1.0ms)
I, [2015-01-01T17:35:20.215270 #10344]  INFO -- :   Rendered carts/_cart.html.erb (140.0ms)
I, [2015-01-01T17:35:20.280273 #10344]  INFO -- : Completed 200 OK in 713ms (Views: 626.0ms | ActiveRecord: 7.0ms)
D, [2015-01-01T17:35:20.595291 #10344] DEBUG -- : 
D, [2015-01-01T17:35:20.607292 #10344] DEBUG -- : 
I, [2015-01-01T17:35:20.642294 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 17:35:20 +0000
D, [2015-01-01T17:35:20.720298 #10344] DEBUG -- : 
D, [2015-01-01T17:35:20.738300 #10344] DEBUG -- : 
I, [2015-01-01T17:35:20.775302 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 17:35:20 +0000
D, [2015-01-01T17:35:20.832305 #10344] DEBUG -- : 
D, [2015-01-01T17:35:20.850306 #10344] DEBUG -- : 
I, [2015-01-01T17:35:20.886308 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 17:35:20 +0000
D, [2015-01-01T17:35:20.992314 #10344] DEBUG -- : 
D, [2015-01-01T17:35:21.006315 #10344] DEBUG -- : 
I, [2015-01-01T17:35:21.042317 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 17:35:21 +0000
D, [2015-01-01T17:35:21.102320 #10344] DEBUG -- : 
D, [2015-01-01T17:35:21.131322 #10344] DEBUG -- : 
I, [2015-01-01T17:35:21.170324 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 17:35:21 +0000
D, [2015-01-01T17:35:21.227327 #10344] DEBUG -- : 
D, [2015-01-01T17:35:21.242328 #10344] DEBUG -- : 
I, [2015-01-01T17:35:21.278330 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 17:35:21 +0000
D, [2015-01-01T17:35:21.340334 #10344] DEBUG -- : 
D, [2015-01-01T17:35:21.357335 #10344] DEBUG -- : 
I, [2015-01-01T17:35:21.392337 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 17:35:21 +0000
D, [2015-01-01T17:35:21.450340 #10344] DEBUG -- : 
D, [2015-01-01T17:35:21.464341 #10344] DEBUG -- : 
I, [2015-01-01T17:35:21.502343 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 17:35:21 +0000
D, [2015-01-01T17:35:21.556346 #10344] DEBUG -- : 
D, [2015-01-01T17:35:21.570347 #10344] DEBUG -- : 
I, [2015-01-01T17:35:21.608349 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 17:35:21 +0000
D, [2015-01-01T17:35:21.667353 #10344] DEBUG -- : 
D, [2015-01-01T17:35:21.682354 #10344] DEBUG -- : 
I, [2015-01-01T17:35:21.717356 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 17:35:21 +0000
D, [2015-01-01T17:35:21.770359 #10344] DEBUG -- : 
D, [2015-01-01T17:35:21.789360 #10344] DEBUG -- : 
I, [2015-01-01T17:35:21.827362 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 17:35:21 +0000
D, [2015-01-01T17:35:21.877365 #10344] DEBUG -- : 
D, [2015-01-01T17:35:21.892366 #10344] DEBUG -- : 
I, [2015-01-01T17:35:21.929368 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 17:35:21 +0000
D, [2015-01-01T17:35:21.996371 #10344] DEBUG -- : 
D, [2015-01-01T17:35:22.022373 #10344] DEBUG -- : 
I, [2015-01-01T17:35:22.088377 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 17:35:22 +0000
D, [2015-01-01T17:35:22.168381 #10344] DEBUG -- : 
D, [2015-01-01T17:35:22.193383 #10344] DEBUG -- : 
I, [2015-01-01T17:35:22.262387 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 17:35:22 +0000
D, [2015-01-01T17:35:22.353392 #10344] DEBUG -- : 
D, [2015-01-01T17:35:22.377393 #10344] DEBUG -- : 
I, [2015-01-01T17:35:22.440397 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 17:35:22 +0000
D, [2015-01-01T17:35:22.516401 #10344] DEBUG -- : 
D, [2015-01-01T17:35:22.543403 #10344] DEBUG -- : 
I, [2015-01-01T17:35:22.611407 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 17:35:22 +0000
D, [2015-01-01T17:35:22.688411 #10344] DEBUG -- : 
D, [2015-01-01T17:35:22.711412 #10344] DEBUG -- : 
I, [2015-01-01T17:35:22.770416 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 17:35:22 +0000
D, [2015-01-01T17:35:22.847420 #10344] DEBUG -- : 
D, [2015-01-01T17:35:22.873422 #10344] DEBUG -- : 
I, [2015-01-01T17:35:22.937425 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 17:35:22 +0000
D, [2015-01-01T17:35:23.029431 #10344] DEBUG -- : 
D, [2015-01-01T17:35:23.056432 #10344] DEBUG -- : 
I, [2015-01-01T17:35:23.128436 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 17:35:23 +0000
D, [2015-01-01T17:35:23.203441 #10344] DEBUG -- : 
D, [2015-01-01T17:35:23.228442 #10344] DEBUG -- : 
I, [2015-01-01T17:35:23.290445 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 17:35:23 +0000
D, [2015-01-01T17:35:23.365450 #10344] DEBUG -- : 
D, [2015-01-01T17:35:23.388451 #10344] DEBUG -- : 
I, [2015-01-01T17:35:23.451455 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 17:35:23 +0000
D, [2015-01-01T17:35:23.535459 #10344] DEBUG -- : 
D, [2015-01-01T17:35:23.563461 #10344] DEBUG -- : 
I, [2015-01-01T17:35:23.630465 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 17:35:23 +0000
D, [2015-01-01T17:35:23.706469 #10344] DEBUG -- : 
D, [2015-01-01T17:35:23.732471 #10344] DEBUG -- : 
I, [2015-01-01T17:35:23.798475 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 17:35:23 +0000
D, [2015-01-01T17:35:23.871479 #10344] DEBUG -- : 
D, [2015-01-01T17:35:23.895480 #10344] DEBUG -- : 
I, [2015-01-01T17:35:23.957484 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 17:35:23 +0000
D, [2015-01-01T17:35:24.038488 #10344] DEBUG -- : 
D, [2015-01-01T17:35:24.065490 #10344] DEBUG -- : 
I, [2015-01-01T17:35:24.132494 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 17:35:24 +0000
D, [2015-01-01T17:35:24.206498 #10344] DEBUG -- : 
D, [2015-01-01T17:35:24.230499 #10344] DEBUG -- : 
I, [2015-01-01T17:35:24.295503 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 17:35:24 +0000
D, [2015-01-01T17:35:24.383508 #10344] DEBUG -- : 
D, [2015-01-01T17:35:24.401509 #10344] DEBUG -- : 
I, [2015-01-01T17:35:24.465513 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 17:35:24 +0000
D, [2015-01-01T17:35:24.541517 #10344] DEBUG -- : 
D, [2015-01-01T17:35:24.564518 #10344] DEBUG -- : 
I, [2015-01-01T17:35:24.627522 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 17:35:24 +0000
D, [2015-01-01T17:35:24.699526 #10344] DEBUG -- : 
D, [2015-01-01T17:35:24.722527 #10344] DEBUG -- : 
I, [2015-01-01T17:35:24.778531 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 17:35:24 +0000
D, [2015-01-01T17:35:24.853535 #10344] DEBUG -- : 
D, [2015-01-01T17:35:24.875536 #10344] DEBUG -- : 
I, [2015-01-01T17:35:24.929539 #10344]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-01 17:35:24 +0000
D, [2015-01-01T17:35:46.823658 #10344] DEBUG -- : 
D, [2015-01-01T17:35:46.854858 #10344] DEBUG -- : 
I, [2015-01-01T17:35:46.901658 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 17:35:46 +0000
I, [2015-01-01T17:35:47.053460 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T17:35:47.120861 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T17:35:47.201861 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:35:47.279861 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-01T17:35:47.389061 #10344] DEBUG -- :   [1m[35mLineItem Load (15.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:35:47.482661 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T17:35:47.529461 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T17:35:47.740262 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 17:35:47 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:9bbca98,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 17:35:47 UTC +00:00]]
D, [2015-01-01T17:35:47.904065 #10344] DEBUG -- :   [1m[35m (124.6ms)[0m  commit transaction
D, [2015-01-01T17:35:48.013265 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:35:48.106667 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (33.2ms)
I, [2015-01-01T17:35:48.184667 #10344]  INFO -- :   Rendered carts/_cart.html.erb (202.6ms)
I, [2015-01-01T17:35:48.231467 #10344]  INFO -- :   Rendered line_items/create.js.erb (265.0ms)
I, [2015-01-01T17:35:48.278267 #10344]  INFO -- : Completed 200 OK in 1109ms (Views: 327.4ms | ActiveRecord: 140.2ms)
D, [2015-01-01T17:35:48.325067 #10344] DEBUG -- : 
D, [2015-01-01T17:35:48.340667 #10344] DEBUG -- : 
I, [2015-01-01T17:35:48.393269 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 17:35:48 +0000
I, [2015-01-01T17:35:48.495275 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T17:35:48.557279 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T17:35:48.640283 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:35:48.723288 #10344] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-01T17:35:48.836295 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:35:48.945301 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T17:35:49.010305 #10344] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2015-01-01T17:35:49.212316 #10344] DEBUG -- :   [1m[36mSQL (10.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 17:35:49 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:82b6c60,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 17:35:49 UTC +00:00]]
D, [2015-01-01T17:35:49.386326 #10344] DEBUG -- :   [1m[35m (134.0ms)[0m  commit transaction
D, [2015-01-01T17:35:49.501729 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-01T17:35:49.642130 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-01T17:35:49.720130 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (156.0ms)
I, [2015-01-01T17:35:49.799130 #10344]  INFO -- :   Rendered carts/_cart.html.erb (335.6ms)
I, [2015-01-01T17:35:49.845930 #10344]  INFO -- :   Rendered line_items/create.js.erb (395.4ms)
I, [2015-01-01T17:35:49.892730 #10344]  INFO -- : Completed 200 OK in 1287ms (Views: 453.6ms | ActiveRecord: 156.0ms)
D, [2015-01-01T17:35:49.939530 #10344] DEBUG -- : 
D, [2015-01-01T17:35:49.969131 #10344] DEBUG -- : 
I, [2015-01-01T17:35:50.023134 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 17:35:49 +0000
I, [2015-01-01T17:35:50.131140 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T17:35:50.194144 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T17:35:50.285149 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T17:35:50.368154 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-01T17:35:50.486160 #10344] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T17:35:50.534163 #10344] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2015-01-01T17:35:50.665171 #10344] DEBUG -- :   [1m[36mSQL (8.0ms)[0m  [1mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = 46[0m  [["quantity", 2], ["updated_at", Thu, 01 Jan 2015 17:35:50 UTC +00:00]]
D, [2015-01-01T17:35:50.800178 #10344] DEBUG -- :   [1m[35m (95.0ms)[0m  commit transaction
D, [2015-01-01T17:35:50.930186 #10344] DEBUG -- :   [1m[36mLineItem Load (3.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-01T17:35:51.050188 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T17:35:51.162389 #10344] DEBUG -- :   [1m[36mProduct Load (15.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
I, [2015-01-01T17:35:51.240389 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (246.4ms)
I, [2015-01-01T17:35:51.318389 #10344]  INFO -- :   Rendered carts/_cart.html.erb (427.4ms)
I, [2015-01-01T17:35:51.349589 #10344]  INFO -- :   Rendered line_items/create.js.erb (486.2ms)
I, [2015-01-01T17:35:51.411989 #10344]  INFO -- : Completed 200 OK in 1169ms (Views: 540.4ms | ActiveRecord: 131.6ms)
D, [2015-01-01T17:35:54.162254 #10344] DEBUG -- : 
D, [2015-01-01T17:35:54.193454 #10344] DEBUG -- : 
I, [2015-01-01T17:35:54.240254 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 17:35:54 +0000
I, [2015-01-01T17:35:54.349454 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T17:35:54.443054 #10344] DEBUG -- :   [1m[35mUser Load (15.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T17:35:54.521055 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T17:35:54.614655 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:35:54.723855 #10344] DEBUG -- :   [1m[36mLineItem Load (15.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:35:54.879855 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T17:36:01.480671 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T17:36:01.589871 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 17:36:01 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 17:36:01 UTC +00:00]]
D, [2015-01-01T17:36:01.699072 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 46  [["cart_id", nil], ["order_id", 45], ["updated_at", Thu, 01 Jan 2015 17:36:01 UTC +00:00]]
D, [2015-01-01T17:36:01.810272 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 47[0m  [["cart_id", nil], ["order_id", 45], ["updated_at", Thu, 01 Jan 2015 17:36:01 UTC +00:00]]
I, [2015-01-01T17:36:01.841472 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T17:36:01.935072 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T17:36:02.013072 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
I, [2015-01-01T17:36:02.044272 #10344]  INFO -- : in order=
I, [2015-01-01T17:36:02.075472 #10344]  INFO -- : in payment.create
I, [2015-01-01T17:36:02.262673 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"58.97"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"58.97", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/45/confirm", "cancel_url"=>"http://localhost:3000/orders/45/cancel"}}
I, [2015-01-01T17:36:02.841874 #10344]  INFO -- : #<ActiveModel::Errors:0x00000008425f10 @base=#<Payment:0x00000008672f98 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000086721b0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000084bd658 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000084bcf50 @error=nil, @total="58.97", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000084af918 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000084aed88 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="58.97", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000084a7d30 @error=nil, @return_url="http://localhost:3000/orders/45/confirm", @cancel_url="http://localhost:3000/orders/45/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008425f10 ...>>, @messages={}>
I, [2015-01-01T17:36:02.873074 #10344]  INFO -- : got past invalid
I, [2015-01-01T17:36:02.966674 #10344]  INFO -- : PayPal-Request-Id: 077f2b07-9963-4586-ad27-362149f9c037
I, [2015-01-01T17:36:02.997874 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T17:36:04.279076 #10344]  INFO -- : Response[201]: Created, Duration: 1.234s
I, [2015-01-01T17:36:04.310276 #10344]  INFO -- : back from super
I, [2015-01-01T17:36:04.811477 #10344]  INFO -- : {"id"=>"PAY-3SM73050ML576964AKSSYLBQ", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"58.97", "details"=>{"subtotal"=>"58.97"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"58.97", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/45/confirm", "cancel_url"=>"http://localhost:3000/orders/45/cancel"}, "create_time"=>"2015-01-01T17:36:06Z", "update_time"=>"2015-01-01T17:36:06Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-3SM73050ML576964AKSSYLBQ", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-98D29269H4127043J", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-3SM73050ML576964AKSSYLBQ/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-01T17:36:05.001678 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "orders" SET "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ? WHERE "orders"."id" = 45  [["created_at", Thu, 01 Jan 2015 17:36:01 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 17:36:01 UTC +00:00], ["id", 45], ["payment_id", "PAY-3SM73050ML576964AKSSYLBQ"], ["state", "created"]]
I, [2015-01-01T17:36:05.048478 #10344]  INFO -- : @payment save just done
I, [2015-01-01T17:36:05.876279 #10344]  INFO -- : #<Payment:0x00000008672f98 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000816b630 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x0000000816a9d8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x0000000816a258 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008169178 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000008168a98 @error=nil, @total="58.97", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000081639a8 @error=nil, @subtotal="58.97">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008162828 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008161c70 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="58.97", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000084a7d30 @error=nil, @return_url="http://localhost:3000/orders/45/confirm", @cancel_url="http://localhost:3000/orders/45/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008425f10 @base=#<Payment:0x00000008672f98 ...>, @messages={}>, @request_id="077f2b07-9963-4586-ad27-362149f9c037", @header={}, @id="PAY-3SM73050ML576964AKSSYLBQ", @create_time="2015-01-01T17:36:06Z", @update_time="2015-01-01T17:36:06Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x0000000815ac18 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3SM73050ML576964AKSSYLBQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008159408 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-98D29269H4127043J", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008153d78 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3SM73050ML576964AKSSYLBQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T17:36:06.406680 #10344]  INFO -- : #<Payment:0x00000008672f98 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000816b630 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x0000000816a9d8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x0000000816a258 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008169178 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000008168a98 @error=nil, @total="58.97", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000081639a8 @error=nil, @subtotal="58.97">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008162828 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008161c70 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="58.97", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000084a7d30 @error=nil, @return_url="http://localhost:3000/orders/45/confirm", @cancel_url="http://localhost:3000/orders/45/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008425f10 @base=#<Payment:0x00000008672f98 ...>, @messages={}>, @request_id="077f2b07-9963-4586-ad27-362149f9c037", @header={}, @id="PAY-3SM73050ML576964AKSSYLBQ", @create_time="2015-01-01T17:36:06Z", @update_time="2015-01-01T17:36:06Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x0000000815ac18 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3SM73050ML576964AKSSYLBQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008159408 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-98D29269H4127043J", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008153d78 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3SM73050ML576964AKSSYLBQ/execute", @rel="execute", @method="POST">]>
D, [2015-01-01T17:36:06.547081 #10344] DEBUG -- :   [1m[36m (124.8ms)[0m  [1mcommit transaction[0m
I, [2015-01-01T17:36:06.562681 #10344]  INFO -- : about to approve url
I, [2015-01-01T17:36:07.202282 #10344]  INFO -- : #<Payment:0x00000008672f98 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000816b630 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x0000000816a9d8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x0000000816a258 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008169178 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000008168a98 @error=nil, @total="58.97", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000081639a8 @error=nil, @subtotal="58.97">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008162828 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008161c70 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="58.97", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000084a7d30 @error=nil, @return_url="http://localhost:3000/orders/45/confirm", @cancel_url="http://localhost:3000/orders/45/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008425f10 @base=#<Payment:0x00000008672f98 ...>, @messages={}>, @request_id="077f2b07-9963-4586-ad27-362149f9c037", @header={}, @id="PAY-3SM73050ML576964AKSSYLBQ", @create_time="2015-01-01T17:36:06Z", @update_time="2015-01-01T17:36:06Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x0000000815ac18 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3SM73050ML576964AKSSYLBQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008159408 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-98D29269H4127043J", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008153d78 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3SM73050ML576964AKSSYLBQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T17:36:07.812683 #10344]  INFO -- : #<Payment:0x00000008672f98 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000816b630 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x0000000816a9d8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x0000000816a258 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008169178 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000008168a98 @error=nil, @total="58.97", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000081639a8 @error=nil, @subtotal="58.97">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008162828 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008161c70 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="58.97", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000084a7d30 @error=nil, @return_url="http://localhost:3000/orders/45/confirm", @cancel_url="http://localhost:3000/orders/45/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008425f10 @base=#<Payment:0x00000008672f98 ...>, @messages={}>, @request_id="077f2b07-9963-4586-ad27-362149f9c037", @header={}, @id="PAY-3SM73050ML576964AKSSYLBQ", @create_time="2015-01-01T17:36:06Z", @update_time="2015-01-01T17:36:06Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x0000000815ac18 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3SM73050ML576964AKSSYLBQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008159408 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-98D29269H4127043J", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008153d78 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3SM73050ML576964AKSSYLBQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T17:36:07.843883 #10344]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-98D29269H4127043J
I, [2015-01-01T17:36:08.467884 #10344]  INFO -- : #<Payment:0x00000008672f98 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000816b630 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x0000000816a9d8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x0000000816a258 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008169178 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000008168a98 @error=nil, @total="58.97", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000081639a8 @error=nil, @subtotal="58.97">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008162828 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008161c70 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="58.97", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000084a7d30 @error=nil, @return_url="http://localhost:3000/orders/45/confirm", @cancel_url="http://localhost:3000/orders/45/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008425f10 @base=#<Payment:0x00000008672f98 ...>, @messages={}>, @request_id="077f2b07-9963-4586-ad27-362149f9c037", @header={}, @id="PAY-3SM73050ML576964AKSSYLBQ", @create_time="2015-01-01T17:36:06Z", @update_time="2015-01-01T17:36:06Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x0000000815ac18 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3SM73050ML576964AKSSYLBQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008159408 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-98D29269H4127043J", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008153d78 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3SM73050ML576964AKSSYLBQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T17:36:08.514684 #10344]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-98D29269H4127043J
I, [2015-01-01T17:36:08.545884 #10344]  INFO -- : Completed 403 Forbidden in 14165ms (ActiveRecord: 187.2ms)
D, [2015-01-01T17:38:26.213623 #10344] DEBUG -- : 
D, [2015-01-01T17:38:26.229223 #10344] DEBUG -- : 
I, [2015-01-01T17:38:26.269824 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 17:38:26 +0000
I, [2015-01-01T17:38:28.658961 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T17:38:28.793969 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:38:29.023982 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-01T17:38:29.277996 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (4.0ms)
I, [2015-01-01T17:38:29.322999 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (323.0ms)
D, [2015-01-01T17:38:29.624016 #10344] DEBUG -- :   [1m[35mLineItem Exists (2.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:38:29.710021 #10344] DEBUG -- :   [1m[36mLineItem Load (3.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:38:29.743023 #10344]  INFO -- :   Rendered collection (1.0ms)
I, [2015-01-01T17:38:29.896032 #10344]  INFO -- :   Rendered carts/_cart.html.erb (226.0ms)
I, [2015-01-01T17:38:29.968036 #10344]  INFO -- : Completed 200 OK in 1264ms (Views: 965.1ms | ActiveRecord: 32.0ms)
D, [2015-01-01T17:38:30.315056 #10344] DEBUG -- : 
D, [2015-01-01T17:38:30.365058 #10344] DEBUG -- : 
I, [2015-01-01T17:38:30.407061 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 17:38:30 +0000
D, [2015-01-01T17:38:30.455064 #10344] DEBUG -- : 
D, [2015-01-01T17:38:30.474065 #10344] DEBUG -- : 
I, [2015-01-01T17:38:30.510067 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 17:38:30 +0000
D, [2015-01-01T17:38:30.572070 #10344] DEBUG -- : 
D, [2015-01-01T17:38:30.585071 #10344] DEBUG -- : 
I, [2015-01-01T17:38:30.620073 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 17:38:30 +0000
D, [2015-01-01T17:38:30.680076 #10344] DEBUG -- : 
D, [2015-01-01T17:38:30.694077 #10344] DEBUG -- : 
I, [2015-01-01T17:38:30.730079 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 17:38:30 +0000
D, [2015-01-01T17:38:30.787083 #10344] DEBUG -- : 
D, [2015-01-01T17:38:30.801083 #10344] DEBUG -- : 
I, [2015-01-01T17:38:30.838085 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 17:38:30 +0000
D, [2015-01-01T17:38:30.896089 #10344] DEBUG -- : 
D, [2015-01-01T17:38:30.910090 #10344] DEBUG -- : 
I, [2015-01-01T17:38:30.948092 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 17:38:30 +0000
D, [2015-01-01T17:38:31.002095 #10344] DEBUG -- : 
D, [2015-01-01T17:38:31.017096 #10344] DEBUG -- : 
I, [2015-01-01T17:38:31.058098 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 17:38:31 +0000
D, [2015-01-01T17:38:31.109101 #10344] DEBUG -- : 
D, [2015-01-01T17:38:31.124102 #10344] DEBUG -- : 
I, [2015-01-01T17:38:31.166104 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 17:38:31 +0000
D, [2015-01-01T17:38:31.242109 #10344] DEBUG -- : 
D, [2015-01-01T17:38:31.265110 #10344] DEBUG -- : 
I, [2015-01-01T17:38:31.323113 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 17:38:31 +0000
D, [2015-01-01T17:38:31.404118 #10344] DEBUG -- : 
D, [2015-01-01T17:38:31.427119 #10344] DEBUG -- : 
I, [2015-01-01T17:38:31.488123 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 17:38:31 +0000
D, [2015-01-01T17:38:31.566127 #10344] DEBUG -- : 
D, [2015-01-01T17:38:31.590128 #10344] DEBUG -- : 
I, [2015-01-01T17:38:31.655132 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 17:38:31 +0000
D, [2015-01-01T17:38:31.734137 #10344] DEBUG -- : 
D, [2015-01-01T17:38:31.762138 #10344] DEBUG -- : 
I, [2015-01-01T17:38:31.830142 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 17:38:31 +0000
D, [2015-01-01T17:38:31.922147 #10344] DEBUG -- : 
D, [2015-01-01T17:38:31.947149 #10344] DEBUG -- : 
I, [2015-01-01T17:38:32.010152 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 17:38:31 +0000
D, [2015-01-01T17:38:32.087157 #10344] DEBUG -- : 
D, [2015-01-01T17:38:32.111158 #10344] DEBUG -- : 
I, [2015-01-01T17:38:32.181162 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 17:38:32 +0000
D, [2015-01-01T17:38:32.257167 #10344] DEBUG -- : 
D, [2015-01-01T17:38:32.281168 #10344] DEBUG -- : 
I, [2015-01-01T17:38:32.341171 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 17:38:32 +0000
D, [2015-01-01T17:38:32.422176 #10344] DEBUG -- : 
D, [2015-01-01T17:38:32.447177 #10344] DEBUG -- : 
I, [2015-01-01T17:38:32.508181 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 17:38:32 +0000
D, [2015-01-01T17:38:32.584185 #10344] DEBUG -- : 
D, [2015-01-01T17:38:32.609187 #10344] DEBUG -- : 
I, [2015-01-01T17:38:32.674190 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 17:38:32 +0000
D, [2015-01-01T17:38:32.750195 #10344] DEBUG -- : 
D, [2015-01-01T17:38:32.777196 #10344] DEBUG -- : 
I, [2015-01-01T17:38:32.843200 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 17:38:32 +0000
D, [2015-01-01T17:38:32.918204 #10344] DEBUG -- : 
D, [2015-01-01T17:38:32.946206 #10344] DEBUG -- : 
I, [2015-01-01T17:38:33.014210 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 17:38:32 +0000
D, [2015-01-01T17:38:33.088214 #10344] DEBUG -- : 
D, [2015-01-01T17:38:33.113216 #10344] DEBUG -- : 
I, [2015-01-01T17:38:33.174219 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 17:38:33 +0000
D, [2015-01-01T17:38:33.250223 #10344] DEBUG -- : 
D, [2015-01-01T17:38:33.275225 #10344] DEBUG -- : 
I, [2015-01-01T17:38:33.335228 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 17:38:33 +0000
D, [2015-01-01T17:38:33.425233 #10344] DEBUG -- : 
D, [2015-01-01T17:38:33.449235 #10344] DEBUG -- : 
I, [2015-01-01T17:38:33.510238 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 17:38:33 +0000
D, [2015-01-01T17:38:33.583242 #10344] DEBUG -- : 
D, [2015-01-01T17:38:33.608244 #10344] DEBUG -- : 
I, [2015-01-01T17:38:33.670247 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 17:38:33 +0000
D, [2015-01-01T17:38:33.745252 #10344] DEBUG -- : 
D, [2015-01-01T17:38:33.768253 #10344] DEBUG -- : 
I, [2015-01-01T17:38:33.836257 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 17:38:33 +0000
D, [2015-01-01T17:38:33.913261 #10344] DEBUG -- : 
D, [2015-01-01T17:38:33.937263 #10344] DEBUG -- : 
I, [2015-01-01T17:38:34.001266 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 17:38:33 +0000
D, [2015-01-01T17:38:34.076271 #10344] DEBUG -- : 
D, [2015-01-01T17:38:34.102272 #10344] DEBUG -- : 
I, [2015-01-01T17:38:34.168276 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 17:38:34 +0000
D, [2015-01-01T17:38:34.257281 #10344] DEBUG -- : 
D, [2015-01-01T17:38:34.282282 #10344] DEBUG -- : 
I, [2015-01-01T17:38:34.338286 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 17:38:34 +0000
D, [2015-01-01T17:38:34.435291 #10344] DEBUG -- : 
D, [2015-01-01T17:38:34.462293 #10344] DEBUG -- : 
I, [2015-01-01T17:38:34.532297 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 17:38:34 +0000
D, [2015-01-01T17:38:34.603301 #10344] DEBUG -- : 
D, [2015-01-01T17:38:34.625302 #10344] DEBUG -- : 
I, [2015-01-01T17:38:34.681305 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 17:38:34 +0000
D, [2015-01-01T17:38:37.564754 #10344] DEBUG -- : 
D, [2015-01-01T17:38:37.580354 #10344] DEBUG -- : 
I, [2015-01-01T17:38:37.644755 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 17:38:37 +0000
I, [2015-01-01T17:38:37.800755 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T17:38:37.880755 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T17:38:37.978756 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:38:38.072356 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-01T17:38:38.197157 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:38:38.563958 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T17:38:38.610758 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T17:38:38.860358 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 17:38:38 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7fc1d20,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 17:38:38 UTC +00:00]]
D, [2015-01-01T17:38:39.118162 #10344] DEBUG -- :   [1m[35m (201.6ms)[0m  commit transaction
D, [2015-01-01T17:38:39.259562 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:38:39.353162 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T17:38:39.446762 #10344]  INFO -- :   Rendered carts/_cart.html.erb (249.6ms)
I, [2015-01-01T17:38:39.493562 #10344]  INFO -- :   Rendered line_items/create.js.erb (296.4ms)
I, [2015-01-01T17:38:39.555963 #10344]  INFO -- : Completed 200 OK in 1613ms (Views: 374.4ms | ActiveRecord: 205.6ms)
D, [2015-01-01T17:38:39.603763 #10344] DEBUG -- : 
D, [2015-01-01T17:38:39.630363 #10344] DEBUG -- : 
I, [2015-01-01T17:38:39.692367 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 17:38:39 +0000
I, [2015-01-01T17:38:39.821374 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T17:38:39.904379 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T17:38:40.006385 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:38:40.106391 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-01T17:38:40.265400 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:38:40.399407 #10344] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T17:38:40.454411 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-01T17:38:40.705425 #10344] DEBUG -- :   [1m[36mSQL (9.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 17:38:40 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:a110f58,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 17:38:40 UTC +00:00]]
D, [2015-01-01T17:38:40.872426 #10344] DEBUG -- :   [1m[35m (113.2ms)[0m  commit transaction
D, [2015-01-01T17:38:41.012826 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-01T17:38:41.171826 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-01T17:38:41.266427 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (158.0ms)
I, [2015-01-01T17:38:41.344427 #10344]  INFO -- :   Rendered carts/_cart.html.erb (378.4ms)
I, [2015-01-01T17:38:41.406827 #10344]  INFO -- :   Rendered line_items/create.js.erb (456.4ms)
I, [2015-01-01T17:38:41.469227 #10344]  INFO -- : Completed 200 OK in 1500ms (Views: 518.8ms | ActiveRecord: 133.2ms)
D, [2015-01-01T17:38:41.516027 #10344] DEBUG -- : 
D, [2015-01-01T17:38:41.545628 #10344] DEBUG -- : 
I, [2015-01-01T17:38:41.607632 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 17:38:41 +0000
I, [2015-01-01T17:38:41.713638 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T17:38:41.784642 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T17:38:41.881647 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T17:38:41.970652 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-01T17:38:42.097660 #10344] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T17:38:42.149663 #10344] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2015-01-01T17:38:42.290671 #10344] DEBUG -- :   [1m[36mSQL (7.0ms)[0m  [1mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = 49[0m  [["quantity", 2], ["updated_at", Thu, 01 Jan 2015 17:38:42 UTC +00:00]]
D, [2015-01-01T17:38:42.546685 #10344] DEBUG -- :   [1m[35m (210.0ms)[0m  commit transaction
D, [2015-01-01T17:38:42.674486 #10344] DEBUG -- :   [1m[36mLineItem Load (15.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-01T17:38:42.799286 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T17:38:42.939686 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
I, [2015-01-01T17:38:43.002086 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (265.2ms)
I, [2015-01-01T17:38:43.080086 #10344]  INFO -- :   Rendered carts/_cart.html.erb (468.0ms)
I, [2015-01-01T17:38:43.126886 #10344]  INFO -- :   Rendered line_items/create.js.erb (530.4ms)
I, [2015-01-01T17:38:43.189287 #10344]  INFO -- : Completed 200 OK in 1356ms (Views: 577.2ms | ActiveRecord: 240.6ms)
D, [2015-01-01T17:38:45.411750 #10344] DEBUG -- : 
D, [2015-01-01T17:38:45.442950 #10344] DEBUG -- : 
I, [2015-01-01T17:38:45.492750 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 17:38:45 +0000
I, [2015-01-01T17:38:45.711150 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T17:38:45.835951 #10344] DEBUG -- :   [1m[35mUser Load (15.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T17:38:46.054351 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T17:38:46.132351 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:38:46.319551 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:38:46.459952 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T17:39:54.156306 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T17:39:54.561907 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 17:39:54 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 17:39:54 UTC +00:00]]
D, [2015-01-01T17:39:54.733507 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 48  [["cart_id", nil], ["order_id", 46], ["updated_at", Thu, 01 Jan 2015 17:39:54 UTC +00:00]]
D, [2015-01-01T17:39:54.889508 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 49[0m  [["cart_id", nil], ["order_id", 46], ["updated_at", Thu, 01 Jan 2015 17:39:54 UTC +00:00]]
I, [2015-01-01T17:39:54.920708 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T17:39:55.076708 #10344] DEBUG -- :   [1m[35mProduct Load (31.2ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T17:39:55.185908 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T17:39:55.341908 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 46]]
I, [2015-01-01T17:39:55.373109 #10344]  INFO -- : in order=
I, [2015-01-01T17:39:55.388709 #10344]  INFO -- : in payment.create
I, [2015-01-01T17:39:55.529109 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"57.97"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"57.97", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/46/confirm", "cancel_url"=>"http://localhost:3000/orders/46/cancel"}}
I, [2015-01-01T17:39:55.903509 #10344]  INFO -- : #<ActiveModel::Errors:0x00000009f75f90 @base=#<Payment:0x00000004064a38 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000004053350 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a027dd0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a027650 @error=nil, @total="57.97", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a025aa8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a024d10 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="57.97", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000a01cdb8 @error=nil, @return_url="http://localhost:3000/orders/46/confirm", @cancel_url="http://localhost:3000/orders/46/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009f75f90 ...>>, @messages={}>
I, [2015-01-01T17:39:55.919109 #10344]  INFO -- : got past invalid
I, [2015-01-01T17:39:55.997110 #10344]  INFO -- : PayPal-Request-Id: 825336e8-aad1-46df-b491-352f09958756
I, [2015-01-01T17:39:56.028310 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T17:39:56.980911 #10344]  INFO -- : Response[400]: Bad Request, Duration: 0.937s
I, [2015-01-01T17:39:57.012111 #10344]  INFO -- :  in error=
I, [2015-01-01T17:39:57.027711 #10344]  INFO -- : back from super
I, [2015-01-01T17:39:57.199312 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"57.97"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"57.97", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/46/confirm", "cancel_url"=>"http://localhost:3000/orders/46/cancel"}}
I, [2015-01-01T17:39:57.339712 #10344]  INFO -- : @payment save just done
I, [2015-01-01T17:39:57.994913 #10344]  INFO -- : #<Payment:0x00000004064a38 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"b84790fe76ce3"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000004053350 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a027dd0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a027650 @error=nil, @total="57.97", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a025aa8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a024d10 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="57.97", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000a01cdb8 @error=nil, @return_url="http://localhost:3000/orders/46/confirm", @cancel_url="http://localhost:3000/orders/46/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009f75f90 @base=#<Payment:0x00000004064a38 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="825336e8-aad1-46df-b491-352f09958756", @header={}>
I, [2015-01-01T17:39:58.681314 #10344]  INFO -- : #<Payment:0x00000004064a38 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"b84790fe76ce3"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000004053350 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a027dd0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a027650 @error=nil, @total="57.97", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a025aa8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a024d10 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="57.97", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000a01cdb8 @error=nil, @return_url="http://localhost:3000/orders/46/confirm", @cancel_url="http://localhost:3000/orders/46/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009f75f90 @base=#<Payment:0x00000004064a38 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="825336e8-aad1-46df-b491-352f09958756", @header={}>
D, [2015-01-01T17:39:58.821715 #10344] DEBUG -- :   [1m[36m (109.2ms)[0m  [1mcommit transaction[0m
I, [2015-01-01T17:39:58.852915 #10344]  INFO -- : about to approve url
I, [2015-01-01T17:39:59.555916 #10344]  INFO -- : #<Payment:0x00000004064a38 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"b84790fe76ce3"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000004053350 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a027dd0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a027650 @error=nil, @total="57.97", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a025aa8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a024d10 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="57.97", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000a01cdb8 @error=nil, @return_url="http://localhost:3000/orders/46/confirm", @cancel_url="http://localhost:3000/orders/46/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009f75f90 @base=#<Payment:0x00000004064a38 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="825336e8-aad1-46df-b491-352f09958756", @header={}>
I, [2015-01-01T17:39:59.602716 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T17:39:59.649516 #10344]  INFO -- : Completed 302 Found in 73892ms (ActiveRecord: 187.2ms)
D, [2015-01-01T17:39:59.680716 #10344] DEBUG -- : 
D, [2015-01-01T17:39:59.696316 #10344] DEBUG -- : 
I, [2015-01-01T17:39:59.743116 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 17:39:59 +0000
I, [2015-01-01T17:39:59.852316 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T17:39:59.930317 #10344] DEBUG -- :   [1m[35mUser Load (15.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T17:39:59.992717 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T17:40:00.055117 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:40:00.148717 #10344] DEBUG -- :   [1m[36mLineItem Load (15.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:40:00.257917 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T17:40:01.337319 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T17:40:01.493319 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 17:40:01 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 17:40:01 UTC +00:00]]
I, [2015-01-01T17:40:01.540120 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T17:40:01.649320 #10344] DEBUG -- :   [1m[35mLineItem Load (15.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 47]]
D, [2015-01-01T17:40:01.760520 #10344] DEBUG -- :   [1m[36m (15.6ms)[0m  [1mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 47]]
I, [2015-01-01T17:40:01.791720 #10344]  INFO -- : in order=
I, [2015-01-01T17:40:01.838520 #10344]  INFO -- : in payment.create
I, [2015-01-01T17:40:02.056921 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"0"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"0", "name"=>"Tee Shirts", "price"=>"0", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/47/confirm", "cancel_url"=>"http://localhost:3000/orders/47/cancel"}}
I, [2015-01-01T17:40:02.760922 #10344]  INFO -- : #<ActiveModel::Errors:0x000000057098b0 @base=#<Payment:0x00000007f9bb98 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007f9adb0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007e25048 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007e24800 @error=nil, @total="0", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007e1ed88 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007e1d988 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="0", @currency="GBP", @quantity="0">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007e0f8d8 @error=nil, @return_url="http://localhost:3000/orders/47/confirm", @cancel_url="http://localhost:3000/orders/47/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000057098b0 ...>>, @messages={}>
I, [2015-01-01T17:40:02.792122 #10344]  INFO -- : got past invalid
I, [2015-01-01T17:40:02.885722 #10344]  INFO -- : PayPal-Request-Id: e9533a15-118a-4334-b530-66890c732bc9
I, [2015-01-01T17:40:02.948122 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T17:40:03.931924 #10344]  INFO -- : Response[400]: Bad Request, Duration: 0.937s
I, [2015-01-01T17:40:03.963124 #10344]  INFO -- :  in error=
I, [2015-01-01T17:40:03.995324 #10344]  INFO -- : back from super
I, [2015-01-01T17:40:04.229325 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"0"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"0", "name"=>"Tee Shirts", "price"=>"0", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/47/confirm", "cancel_url"=>"http://localhost:3000/orders/47/cancel"}}
I, [2015-01-01T17:40:04.400925 #10344]  INFO -- : @payment save just done
I, [2015-01-01T17:40:05.214126 #10344]  INFO -- : #<Payment:0x00000007f9bb98 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions[0].item_list.items[0].quantity", "issue"=>"Must be a positive integer"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"400bb67876b8f"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007f9adb0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007e25048 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007e24800 @error=nil, @total="0", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007e1ed88 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007e1d988 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="0", @currency="GBP", @quantity="0">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007e0f8d8 @error=nil, @return_url="http://localhost:3000/orders/47/confirm", @cancel_url="http://localhost:3000/orders/47/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000057098b0 @base=#<Payment:0x00000007f9bb98 ...>, @messages={:"transactions[0].item_list.items[0].quantity"=>["Must be a positive integer"]}>, @request_id="e9533a15-118a-4334-b530-66890c732bc9", @header={}>
I, [2015-01-01T17:40:05.884147 #10344]  INFO -- : #<Payment:0x00000007f9bb98 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions[0].item_list.items[0].quantity", "issue"=>"Must be a positive integer"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"400bb67876b8f"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007f9adb0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007e25048 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007e24800 @error=nil, @total="0", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007e1ed88 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007e1d988 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="0", @currency="GBP", @quantity="0">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007e0f8d8 @error=nil, @return_url="http://localhost:3000/orders/47/confirm", @cancel_url="http://localhost:3000/orders/47/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000057098b0 @base=#<Payment:0x00000007f9bb98 ...>, @messages={:"transactions[0].item_list.items[0].quantity"=>["Must be a positive integer"]}>, @request_id="e9533a15-118a-4334-b530-66890c732bc9", @header={}>
D, [2015-01-01T17:40:06.034156 #10344] DEBUG -- :   [1m[35m (116.0ms)[0m  commit transaction
I, [2015-01-01T17:40:06.057157 #10344]  INFO -- : about to approve url
I, [2015-01-01T17:40:06.607978 #10344]  INFO -- : #<Payment:0x00000007f9bb98 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions[0].item_list.items[0].quantity", "issue"=>"Must be a positive integer"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"400bb67876b8f"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007f9adb0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007e25048 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007e24800 @error=nil, @total="0", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007e1ed88 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007e1d988 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="0", @currency="GBP", @quantity="0">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007e0f8d8 @error=nil, @return_url="http://localhost:3000/orders/47/confirm", @cancel_url="http://localhost:3000/orders/47/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000057098b0 @base=#<Payment:0x00000007f9bb98 ...>, @messages={:"transactions[0].item_list.items[0].quantity"=>["Must be a positive integer"]}>, @request_id="e9533a15-118a-4334-b530-66890c732bc9", @header={}>
I, [2015-01-01T17:40:06.639178 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T17:40:06.685978 #10344]  INFO -- : Completed 302 Found in 6802ms (ActiveRecord: 194.0ms)
D, [2015-01-01T17:40:06.748378 #10344] DEBUG -- : 
D, [2015-01-01T17:40:06.763978 #10344] DEBUG -- : 
I, [2015-01-01T17:40:06.795178 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 17:40:06 +0000
I, [2015-01-01T17:40:06.888778 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T17:40:06.951178 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T17:40:07.044778 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T17:40:07.107178 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (0.0ms)
I, [2015-01-01T17:40:07.153979 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (124.8ms)
D, [2015-01-01T17:40:07.325579 #10344] DEBUG -- :   [1m[36mLineItem Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T17:40:07.403579 #10344] DEBUG -- :   [1m[35mLineItem Load (15.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T17:40:07.419179 #10344]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-01T17:40:07.481579 #10344]  INFO -- :   Rendered carts/_cart.html.erb (109.2ms)
I, [2015-01-01T17:40:07.543979 #10344]  INFO -- : Completed 200 OK in 608ms (Views: 530.4ms | ActiveRecord: 15.6ms)
D, [2015-01-01T17:40:18.244839 #10344] DEBUG -- : 
D, [2015-01-01T17:40:18.261840 #10344] DEBUG -- : 
I, [2015-01-01T17:40:18.298842 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 17:40:18 +0000
I, [2015-01-01T17:40:18.361846 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T17:40:18.418849 #10344] DEBUG -- :   [1m[36mCart Load (1.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T17:40:18.487853 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T17:40:18.543856 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (3.0ms)
I, [2015-01-01T17:40:18.585859 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (109.0ms)
D, [2015-01-01T17:40:18.793871 #10344] DEBUG -- :   [1m[36mLineItem Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T17:40:18.854874 #10344] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T17:40:18.880876 #10344]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-01T17:40:18.936879 #10344]  INFO -- :   Rendered carts/_cart.html.erb (108.0ms)
I, [2015-01-01T17:40:19.010883 #10344]  INFO -- : Completed 200 OK in 607ms (Views: 540.0ms | ActiveRecord: 6.0ms)
D, [2015-01-01T17:40:19.164892 #10344] DEBUG -- : 
D, [2015-01-01T17:40:19.193894 #10344] DEBUG -- : 
I, [2015-01-01T17:40:19.236896 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 17:40:19 +0000
D, [2015-01-01T17:40:19.313901 #10344] DEBUG -- : 
D, [2015-01-01T17:40:19.336902 #10344] DEBUG -- : 
I, [2015-01-01T17:40:19.396905 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 17:40:19 +0000
D, [2015-01-01T17:40:19.458909 #10344] DEBUG -- : 
D, [2015-01-01T17:40:19.474910 #10344] DEBUG -- : 
I, [2015-01-01T17:40:19.507912 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 17:40:19 +0000
D, [2015-01-01T17:40:19.564915 #10344] DEBUG -- : 
D, [2015-01-01T17:40:19.576916 #10344] DEBUG -- : 
I, [2015-01-01T17:40:19.607917 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 17:40:19 +0000
D, [2015-01-01T17:40:19.658920 #10344] DEBUG -- : 
D, [2015-01-01T17:40:19.669921 #10344] DEBUG -- : 
I, [2015-01-01T17:40:19.696922 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 17:40:19 +0000
D, [2015-01-01T17:40:19.744925 #10344] DEBUG -- : 
D, [2015-01-01T17:40:19.756926 #10344] DEBUG -- : 
I, [2015-01-01T17:40:19.794928 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 17:40:19 +0000
D, [2015-01-01T17:40:19.849931 #10344] DEBUG -- : 
D, [2015-01-01T17:40:19.861932 #10344] DEBUG -- : 
I, [2015-01-01T17:40:19.894934 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 17:40:19 +0000
D, [2015-01-01T17:40:19.939936 #10344] DEBUG -- : 
D, [2015-01-01T17:40:19.951937 #10344] DEBUG -- : 
I, [2015-01-01T17:40:19.998940 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 17:40:19 +0000
D, [2015-01-01T17:40:20.049943 #10344] DEBUG -- : 
D, [2015-01-01T17:40:20.062943 #10344] DEBUG -- : 
I, [2015-01-01T17:40:20.093945 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 17:40:20 +0000
D, [2015-01-01T17:40:20.142948 #10344] DEBUG -- : 
D, [2015-01-01T17:40:20.155949 #10344] DEBUG -- : 
I, [2015-01-01T17:40:20.185950 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 17:40:20 +0000
D, [2015-01-01T17:40:20.233953 #10344] DEBUG -- : 
D, [2015-01-01T17:40:20.245954 #10344] DEBUG -- : 
I, [2015-01-01T17:40:20.279956 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 17:40:20 +0000
D, [2015-01-01T17:40:20.372961 #10344] DEBUG -- : 
D, [2015-01-01T17:40:20.396962 #10344] DEBUG -- : 
I, [2015-01-01T17:40:20.459966 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 17:40:20 +0000
D, [2015-01-01T17:40:20.536970 #10344] DEBUG -- : 
D, [2015-01-01T17:40:20.556972 #10344] DEBUG -- : 
I, [2015-01-01T17:40:20.621975 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 17:40:20 +0000
D, [2015-01-01T17:40:20.698980 #10344] DEBUG -- : 
D, [2015-01-01T17:40:20.722981 #10344] DEBUG -- : 
I, [2015-01-01T17:40:20.794985 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 17:40:20 +0000
D, [2015-01-01T17:40:20.888991 #10344] DEBUG -- : 
D, [2015-01-01T17:40:20.914992 #10344] DEBUG -- : 
I, [2015-01-01T17:40:20.983996 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 17:40:20 +0000
D, [2015-01-01T17:40:21.066001 #10344] DEBUG -- : 
D, [2015-01-01T17:40:21.093002 #10344] DEBUG -- : 
I, [2015-01-01T17:40:21.163006 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 17:40:21 +0000
D, [2015-01-01T17:40:21.235010 #10344] DEBUG -- : 
D, [2015-01-01T17:40:21.263012 #10344] DEBUG -- : 
I, [2015-01-01T17:40:21.325016 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 17:40:21 +0000
D, [2015-01-01T17:40:21.400020 #10344] DEBUG -- : 
D, [2015-01-01T17:40:21.424021 #10344] DEBUG -- : 
I, [2015-01-01T17:40:21.489025 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 17:40:21 +0000
D, [2015-01-01T17:40:21.564029 #10344] DEBUG -- : 
D, [2015-01-01T17:40:21.588031 #10344] DEBUG -- : 
I, [2015-01-01T17:40:21.654034 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 17:40:21 +0000
D, [2015-01-01T17:40:21.728039 #10344] DEBUG -- : 
D, [2015-01-01T17:40:21.753040 #10344] DEBUG -- : 
I, [2015-01-01T17:40:21.816044 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 17:40:21 +0000
D, [2015-01-01T17:40:21.891048 #10344] DEBUG -- : 
D, [2015-01-01T17:40:21.918049 #10344] DEBUG -- : 
I, [2015-01-01T17:40:21.991054 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 17:40:21 +0000
D, [2015-01-01T17:40:22.075058 #10344] DEBUG -- : 
D, [2015-01-01T17:40:22.110060 #10344] DEBUG -- : 
I, [2015-01-01T17:40:22.179064 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 17:40:22 +0000
D, [2015-01-01T17:40:22.253069 #10344] DEBUG -- : 
D, [2015-01-01T17:40:22.279070 #10344] DEBUG -- : 
I, [2015-01-01T17:40:22.347074 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 17:40:22 +0000
D, [2015-01-01T17:40:22.421078 #10344] DEBUG -- : 
D, [2015-01-01T17:40:22.446080 #10344] DEBUG -- : 
I, [2015-01-01T17:40:22.509083 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 17:40:22 +0000
D, [2015-01-01T17:40:22.584088 #10344] DEBUG -- : 
D, [2015-01-01T17:40:22.609089 #10344] DEBUG -- : 
I, [2015-01-01T17:40:22.669092 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 17:40:22 +0000
D, [2015-01-01T17:40:22.744097 #10344] DEBUG -- : 
D, [2015-01-01T17:40:22.769098 #10344] DEBUG -- : 
I, [2015-01-01T17:40:22.838102 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 17:40:22 +0000
D, [2015-01-01T17:40:22.931107 #10344] DEBUG -- : 
D, [2015-01-01T17:40:22.954109 #10344] DEBUG -- : 
I, [2015-01-01T17:40:23.012112 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 17:40:22 +0000
D, [2015-01-01T17:40:23.095117 #10344] DEBUG -- : 
D, [2015-01-01T17:40:23.121118 #10344] DEBUG -- : 
I, [2015-01-01T17:40:23.188122 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 17:40:23 +0000
D, [2015-01-01T17:40:23.263126 #10344] DEBUG -- : 
D, [2015-01-01T17:40:23.288128 #10344] DEBUG -- : 
I, [2015-01-01T17:40:23.350131 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 17:40:23 +0000
D, [2015-01-01T17:40:33.143767 #10344] DEBUG -- : 
D, [2015-01-01T17:40:33.159367 #10344] DEBUG -- : 
I, [2015-01-01T17:40:33.222767 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 17:40:33 +0000
I, [2015-01-01T17:40:33.331968 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T17:40:33.409968 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T17:40:33.505568 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T17:40:33.591970 #10344] DEBUG -- :   [1m[35mProduct Load (15.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-01T17:40:33.719770 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T17:40:33.828970 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T17:40:33.891370 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T17:40:34.157571 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 17:40:33 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:990c1b8,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 17:40:33 UTC +00:00]]
D, [2015-01-01T17:40:34.351772 #10344] DEBUG -- :   [1m[36m (140.4ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T17:40:34.492172 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T17:40:34.596773 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T17:40:34.675574 #10344]  INFO -- :   Rendered carts/_cart.html.erb (230.2ms)
I, [2015-01-01T17:40:34.744376 #10344]  INFO -- :   Rendered line_items/create.js.erb (292.6ms)
I, [2015-01-01T17:40:34.791176 #10344]  INFO -- : Completed 200 OK in 1334ms (Views: 392.6ms | ActiveRecord: 156.0ms)
D, [2015-01-01T17:40:34.837976 #10344] DEBUG -- : 
D, [2015-01-01T17:40:34.874176 #10344] DEBUG -- : 
I, [2015-01-01T17:40:34.936180 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 17:40:34 +0000
I, [2015-01-01T17:40:35.032185 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T17:40:35.104189 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T17:40:35.191194 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T17:40:35.266199 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-01T17:40:35.371205 #10344] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T17:40:35.470210 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-01T17:40:35.524213 #10344] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T17:40:35.748226 #10344] DEBUG -- :   [1m[35mSQL (14.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 17:40:35 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:7f14288,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 17:40:35 UTC +00:00]]
D, [2015-01-01T17:40:35.902235 #10344] DEBUG -- :   [1m[36m (113.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T17:40:35.990637 #10344] DEBUG -- :   [1m[35mLineItem Load (15.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-01T17:40:36.068637 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-01T17:40:36.131037 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (93.6ms)
I, [2015-01-01T17:40:36.193437 #10344]  INFO -- :   Rendered carts/_cart.html.erb (234.0ms)
I, [2015-01-01T17:40:36.224637 #10344]  INFO -- :   Rendered line_items/create.js.erb (268.2ms)
I, [2015-01-01T17:40:36.255837 #10344]  INFO -- : Completed 200 OK in 1118ms (Views: 302.8ms | ActiveRecord: 151.6ms)
D, [2015-01-01T17:40:36.302637 #10344] DEBUG -- : 
D, [2015-01-01T17:40:36.326238 #10344] DEBUG -- : 
I, [2015-01-01T17:40:36.372240 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 17:40:36 +0000
I, [2015-01-01T17:40:36.453245 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T17:40:36.499248 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T17:40:36.560251 #10344] DEBUG -- :   [1m[35mCart Load (3.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:40:36.635255 #10344] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-01T17:40:36.716260 #10344] DEBUG -- :   [1m[35mLineItem Load (1.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:40:36.749262 #10344] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T17:40:36.850268 #10344] DEBUG -- :   [1m[35mSQL (5.0ms)[0m  UPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = 51  [["quantity", 2], ["updated_at", Thu, 01 Jan 2015 17:40:36 UTC +00:00]]
D, [2015-01-01T17:40:37.069280 #10344] DEBUG -- :   [1m[36m (187.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T17:40:37.160285 #10344] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-01T17:40:37.267292 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T17:40:37.344296 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
I, [2015-01-01T17:40:37.375496 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (185.6ms)
I, [2015-01-01T17:40:37.437896 #10344]  INFO -- :   Rendered carts/_cart.html.erb (304.4ms)
I, [2015-01-01T17:40:37.469096 #10344]  INFO -- :   Rendered line_items/create.js.erb (345.6ms)
I, [2015-01-01T17:40:37.500296 #10344]  INFO -- : Completed 200 OK in 968ms (Views: 389.8ms | ActiveRecord: 205.0ms)
D, [2015-01-01T17:40:37.531496 #10344] DEBUG -- : 
D, [2015-01-01T17:40:37.564696 #10344] DEBUG -- : 
I, [2015-01-01T17:40:37.603699 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 17:40:37 +0000
I, [2015-01-01T17:40:37.678703 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T17:40:37.726706 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T17:40:37.791709 #10344] DEBUG -- :   [1m[36mCart Load (1.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T17:40:37.853713 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-01T17:40:37.935718 #10344] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T17:40:37.969720 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-01T17:40:38.060725 #10344] DEBUG -- :   [1m[36mSQL (5.0ms)[0m  [1mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = 51[0m  [["quantity", 3], ["updated_at", Thu, 01 Jan 2015 17:40:37 UTC +00:00]]
D, [2015-01-01T17:40:38.224734 #10344] DEBUG -- :   [1m[35m (132.0ms)[0m  commit transaction
D, [2015-01-01T17:40:38.317740 #10344] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-01T17:40:38.403744 #10344] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T17:40:38.490749 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
I, [2015-01-01T17:40:38.536752 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (175.0ms)
I, [2015-01-01T17:40:38.594755 #10344]  INFO -- :   Rendered carts/_cart.html.erb (313.0ms)
I, [2015-01-01T17:40:38.625955 #10344]  INFO -- :   Rendered line_items/create.js.erb (347.0ms)
I, [2015-01-01T17:40:38.657155 #10344]  INFO -- : Completed 200 OK in 898ms (Views: 392.2ms | ActiveRecord: 147.0ms)
D, [2015-01-01T17:40:40.175216 #10344] DEBUG -- : 
D, [2015-01-01T17:40:40.190816 #10344] DEBUG -- : 
I, [2015-01-01T17:40:40.237616 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 17:40:40 +0000
I, [2015-01-01T17:40:40.331217 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T17:40:40.393617 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T17:40:40.471617 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T17:40:40.534017 #10344] DEBUG -- :   [1m[35mCart Load (15.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:40:40.644217 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:40:40.784617 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T17:40:53.206671 #10344] DEBUG -- :   [1m[35m (15.6ms)[0m  begin transaction
D, [2015-01-01T17:40:53.362671 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 17:40:53 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 17:40:53 UTC +00:00]]
D, [2015-01-01T17:40:53.534271 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 50  [["cart_id", nil], ["order_id", 48], ["updated_at", Thu, 01 Jan 2015 17:40:53 UTC +00:00]]
D, [2015-01-01T17:40:53.752671 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 51[0m  [["cart_id", nil], ["order_id", 48], ["updated_at", Thu, 01 Jan 2015 17:40:53 UTC +00:00]]
I, [2015-01-01T17:40:53.799472 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T17:40:53.909672 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T17:40:54.034472 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T17:40:54.143672 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 48]]
I, [2015-01-01T17:40:54.174872 #10344]  INFO -- : in order=
I, [2015-01-01T17:40:54.221672 #10344]  INFO -- : in payment.create
I, [2015-01-01T17:40:54.440073 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"76.96"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"76.96", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/48/confirm", "cancel_url"=>"http://localhost:3000/orders/48/cancel"}}
I, [2015-01-01T17:40:55.017274 #10344]  INFO -- : #<ActiveModel::Errors:0x000000097ee240 @base=#<Payment:0x00000009c05ae0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009befb28 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000098a1110 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000098a0850 @error=nil, @total="76.96", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000989ae28 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009899f28 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="76.96", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000098913a0 @error=nil, @return_url="http://localhost:3000/orders/48/confirm", @cancel_url="http://localhost:3000/orders/48/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000097ee240 ...>>, @messages={}>
I, [2015-01-01T17:40:55.048474 #10344]  INFO -- : got past invalid
I, [2015-01-01T17:40:55.126474 #10344]  INFO -- : PayPal-Request-Id: f43cf48a-5b13-45af-b867-c84f5fc08a79
I, [2015-01-01T17:40:55.157674 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T17:40:56.097676 #10344]  INFO -- : Response[400]: Bad Request, Duration: 0.909s
I, [2015-01-01T17:40:56.128876 #10344]  INFO -- :  in error=
I, [2015-01-01T17:40:56.160076 #10344]  INFO -- : back from super
I, [2015-01-01T17:40:56.362876 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"76.96"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"76.96", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/48/confirm", "cancel_url"=>"http://localhost:3000/orders/48/cancel"}}
I, [2015-01-01T17:40:56.503277 #10344]  INFO -- : @payment save just done
I, [2015-01-01T17:40:57.252078 #10344]  INFO -- : #<Payment:0x00000009c05ae0 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"2f3332aa45fb0"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009befb28 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000098a1110 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000098a0850 @error=nil, @total="76.96", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000989ae28 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009899f28 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="76.96", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000098913a0 @error=nil, @return_url="http://localhost:3000/orders/48/confirm", @cancel_url="http://localhost:3000/orders/48/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000097ee240 @base=#<Payment:0x00000009c05ae0 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="f43cf48a-5b13-45af-b867-c84f5fc08a79", @header={}>
I, [2015-01-01T17:40:57.969679 #10344]  INFO -- : #<Payment:0x00000009c05ae0 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"2f3332aa45fb0"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009befb28 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000098a1110 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000098a0850 @error=nil, @total="76.96", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000989ae28 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009899f28 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="76.96", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000098913a0 @error=nil, @return_url="http://localhost:3000/orders/48/confirm", @cancel_url="http://localhost:3000/orders/48/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000097ee240 @base=#<Payment:0x00000009c05ae0 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="f43cf48a-5b13-45af-b867-c84f5fc08a79", @header={}>
D, [2015-01-01T17:40:58.125679 #10344] DEBUG -- :   [1m[36m (109.2ms)[0m  [1mcommit transaction[0m
I, [2015-01-01T17:40:58.156879 #10344]  INFO -- : about to approve url
I, [2015-01-01T17:40:58.954481 #10344]  INFO -- : #<Payment:0x00000009c05ae0 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"2f3332aa45fb0"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009befb28 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000098a1110 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000098a0850 @error=nil, @total="76.96", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000989ae28 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009899f28 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="76.96", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000098913a0 @error=nil, @return_url="http://localhost:3000/orders/48/confirm", @cancel_url="http://localhost:3000/orders/48/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000097ee240 @base=#<Payment:0x00000009c05ae0 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="f43cf48a-5b13-45af-b867-c84f5fc08a79", @header={}>
I, [2015-01-01T17:40:59.001281 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T17:40:59.048081 #10344]  INFO -- : Completed 302 Found in 18670ms (ActiveRecord: 171.6ms)
D, [2015-01-01T17:40:59.141681 #10344] DEBUG -- : 
D, [2015-01-01T17:40:59.157281 #10344] DEBUG -- : 
I, [2015-01-01T17:40:59.204081 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 17:40:59 +0000
I, [2015-01-01T17:40:59.297682 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T17:40:59.375682 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:40:59.500482 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-01T17:40:59.578482 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (15.6ms)
I, [2015-01-01T17:40:59.625282 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (171.6ms)
D, [2015-01-01T17:40:59.874883 #10344] DEBUG -- :   [1m[35mLineItem Exists (0.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:40:59.968483 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:40:59.999683 #10344]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-01T17:41:00.077683 #10344]  INFO -- :   Rendered carts/_cart.html.erb (156.0ms)
I, [2015-01-01T17:41:00.140083 #10344]  INFO -- : Completed 200 OK in 811ms (Views: 717.6ms | ActiveRecord: 0.0ms)
D, [2015-01-01T17:50:31.247523 #10344] DEBUG -- : 
D, [2015-01-01T17:50:31.267524 #10344] DEBUG -- : 
I, [2015-01-01T17:50:31.308527 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 17:50:31 +0000
I, [2015-01-01T17:50:34.308698 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T17:50:34.472708 #10344] DEBUG -- :   [1m[35mCart Load (3.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:50:34.745723 #10344] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-01T17:50:35.015739 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (4.0ms)
I, [2015-01-01T17:50:35.072742 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (368.0ms)
D, [2015-01-01T17:50:35.405761 #10344] DEBUG -- :   [1m[35mLineItem Exists (3.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:50:35.506767 #10344] DEBUG -- :   [1m[36mLineItem Load (4.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:50:35.571770 #10344]  INFO -- :   Rendered collection (1.0ms)
I, [2015-01-01T17:50:35.693777 #10344]  INFO -- :   Rendered carts/_cart.html.erb (236.0ms)
I, [2015-01-01T17:50:35.771782 #10344]  INFO -- : Completed 200 OK in 1414ms (Views: 1071.1ms | ActiveRecord: 36.0ms)
D, [2015-01-01T17:50:36.039797 #10344] DEBUG -- : 
D, [2015-01-01T17:50:36.075799 #10344] DEBUG -- : 
I, [2015-01-01T17:50:36.169805 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 17:50:36 +0000
D, [2015-01-01T17:50:36.233808 #10344] DEBUG -- : 
D, [2015-01-01T17:50:36.249809 #10344] DEBUG -- : 
I, [2015-01-01T17:50:36.288811 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 17:50:36 +0000
D, [2015-01-01T17:50:36.353815 #10344] DEBUG -- : 
D, [2015-01-01T17:50:36.367816 #10344] DEBUG -- : 
I, [2015-01-01T17:50:36.406818 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 17:50:36 +0000
D, [2015-01-01T17:50:36.466822 #10344] DEBUG -- : 
D, [2015-01-01T17:50:36.481822 #10344] DEBUG -- : 
I, [2015-01-01T17:50:36.520825 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 17:50:36 +0000
D, [2015-01-01T17:50:36.587828 #10344] DEBUG -- : 
D, [2015-01-01T17:50:36.602829 #10344] DEBUG -- : 
I, [2015-01-01T17:50:36.642832 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 17:50:36 +0000
D, [2015-01-01T17:50:36.704835 #10344] DEBUG -- : 
D, [2015-01-01T17:50:36.720836 #10344] DEBUG -- : 
I, [2015-01-01T17:50:36.760838 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 17:50:36 +0000
D, [2015-01-01T17:50:36.819842 #10344] DEBUG -- : 
D, [2015-01-01T17:50:36.833843 #10344] DEBUG -- : 
I, [2015-01-01T17:50:36.873845 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 17:50:36 +0000
D, [2015-01-01T17:50:36.934848 #10344] DEBUG -- : 
D, [2015-01-01T17:50:36.948849 #10344] DEBUG -- : 
I, [2015-01-01T17:50:37.011853 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 17:50:36 +0000
D, [2015-01-01T17:50:37.078857 #10344] DEBUG -- : 
D, [2015-01-01T17:50:37.093857 #10344] DEBUG -- : 
I, [2015-01-01T17:50:37.128859 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 17:50:37 +0000
D, [2015-01-01T17:50:37.203864 #10344] DEBUG -- : 
D, [2015-01-01T17:50:37.218865 #10344] DEBUG -- : 
I, [2015-01-01T17:50:37.254867 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 17:50:37 +0000
D, [2015-01-01T17:50:37.315870 #10344] DEBUG -- : 
D, [2015-01-01T17:50:37.329871 #10344] DEBUG -- : 
I, [2015-01-01T17:50:37.368873 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 17:50:37 +0000
D, [2015-01-01T17:50:37.432877 #10344] DEBUG -- : 
D, [2015-01-01T17:50:37.449878 #10344] DEBUG -- : 
I, [2015-01-01T17:50:37.487880 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 17:50:37 +0000
D, [2015-01-01T17:50:37.573885 #10344] DEBUG -- : 
D, [2015-01-01T17:50:37.598886 #10344] DEBUG -- : 
I, [2015-01-01T17:50:37.647889 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 17:50:37 +0000
D, [2015-01-01T17:50:37.718893 #10344] DEBUG -- : 
D, [2015-01-01T17:50:37.736894 #10344] DEBUG -- : 
I, [2015-01-01T17:50:37.789897 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 17:50:37 +0000
D, [2015-01-01T17:50:37.857901 #10344] DEBUG -- : 
D, [2015-01-01T17:50:37.872902 #10344] DEBUG -- : 
I, [2015-01-01T17:50:37.911904 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 17:50:37 +0000
D, [2015-01-01T17:50:37.980908 #10344] DEBUG -- : 
D, [2015-01-01T17:50:37.999909 #10344] DEBUG -- : 
I, [2015-01-01T17:50:38.038911 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 17:50:38 +0000
D, [2015-01-01T17:50:38.109916 #10344] DEBUG -- : 
D, [2015-01-01T17:50:38.135917 #10344] DEBUG -- : 
I, [2015-01-01T17:50:38.174919 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 17:50:38 +0000
D, [2015-01-01T17:50:38.235923 #10344] DEBUG -- : 
D, [2015-01-01T17:50:38.252924 #10344] DEBUG -- : 
I, [2015-01-01T17:50:38.294926 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 17:50:38 +0000
D, [2015-01-01T17:50:38.358930 #10344] DEBUG -- : 
D, [2015-01-01T17:50:38.373931 #10344] DEBUG -- : 
I, [2015-01-01T17:50:38.416933 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 17:50:38 +0000
D, [2015-01-01T17:50:38.476937 #10344] DEBUG -- : 
D, [2015-01-01T17:50:38.491937 #10344] DEBUG -- : 
I, [2015-01-01T17:50:38.528940 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 17:50:38 +0000
D, [2015-01-01T17:50:38.609944 #10344] DEBUG -- : 
D, [2015-01-01T17:50:38.624945 #10344] DEBUG -- : 
I, [2015-01-01T17:50:38.662947 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 17:50:38 +0000
D, [2015-01-01T17:50:38.731951 #10344] DEBUG -- : 
D, [2015-01-01T17:50:38.745952 #10344] DEBUG -- : 
I, [2015-01-01T17:50:38.784954 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 17:50:38 +0000
D, [2015-01-01T17:50:38.840957 #10344] DEBUG -- : 
D, [2015-01-01T17:50:38.855958 #10344] DEBUG -- : 
I, [2015-01-01T17:50:38.895961 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 17:50:38 +0000
D, [2015-01-01T17:50:38.949964 #10344] DEBUG -- : 
D, [2015-01-01T17:50:38.965965 #10344] DEBUG -- : 
I, [2015-01-01T17:50:39.016967 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 17:50:38 +0000
D, [2015-01-01T17:50:39.072971 #10344] DEBUG -- : 
D, [2015-01-01T17:50:39.087971 #10344] DEBUG -- : 
I, [2015-01-01T17:50:39.125974 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 17:50:39 +0000
D, [2015-01-01T17:50:39.181977 #10344] DEBUG -- : 
D, [2015-01-01T17:50:39.197978 #10344] DEBUG -- : 
I, [2015-01-01T17:50:39.240980 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 17:50:39 +0000
D, [2015-01-01T17:50:39.328985 #10344] DEBUG -- : 
D, [2015-01-01T17:50:39.351987 #10344] DEBUG -- : 
I, [2015-01-01T17:50:39.393989 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 17:50:39 +0000
D, [2015-01-01T17:50:39.448992 #10344] DEBUG -- : 
D, [2015-01-01T17:50:39.464993 #10344] DEBUG -- : 
I, [2015-01-01T17:50:39.502995 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 17:50:39 +0000
D, [2015-01-01T17:50:39.560999 #10344] DEBUG -- : 
D, [2015-01-01T17:50:39.578000 #10344] DEBUG -- : 
I, [2015-01-01T17:50:39.618002 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 17:50:39 +0000
D, [2015-01-01T17:50:41.553841 #10344] DEBUG -- : 
D, [2015-01-01T17:50:41.585041 #10344] DEBUG -- : 
I, [2015-01-01T17:50:41.647441 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 17:50:41 +0000
I, [2015-01-01T17:50:41.820041 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T17:50:41.898041 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T17:50:41.991642 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:50:42.112842 #10344] DEBUG -- :   [1m[36mProduct Load (15.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-01T17:50:42.253846 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:50:42.597047 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T17:50:42.643847 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T17:50:42.924647 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 17:50:42 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:9a2eac8,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 17:50:42 UTC +00:00]]
D, [2015-01-01T17:50:43.252248 #10344] DEBUG -- :   [1m[35m (265.2ms)[0m  commit transaction
D, [2015-01-01T17:50:43.408248 #10344] DEBUG -- :   [1m[36mLineItem Load (15.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:50:43.517448 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T17:50:43.595449 #10344]  INFO -- :   Rendered carts/_cart.html.erb (249.6ms)
I, [2015-01-01T17:50:43.657849 #10344]  INFO -- :   Rendered line_items/create.js.erb (327.6ms)
I, [2015-01-01T17:50:43.726650 #10344]  INFO -- : Completed 200 OK in 1760ms (Views: 390.0ms | ActiveRecord: 296.4ms)
D, [2015-01-01T17:50:48.237123 #10344] DEBUG -- : 
D, [2015-01-01T17:50:48.268323 #10344] DEBUG -- : 
I, [2015-01-01T17:50:48.315123 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 17:50:48 +0000
I, [2015-01-01T17:50:48.439923 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T17:50:48.502323 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T17:50:48.595923 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:50:48.673924 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-01T17:50:48.802125 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:50:48.911325 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T17:50:48.958125 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T17:50:49.176526 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 17:50:48 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:605ef00,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 17:50:48 UTC +00:00]]
D, [2015-01-01T17:50:49.349126 #10344] DEBUG -- :   [1m[35m (124.8ms)[0m  commit transaction
D, [2015-01-01T17:50:49.473926 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-01T17:50:49.598726 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-01T17:50:49.676726 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (124.8ms)
I, [2015-01-01T17:50:49.754727 #10344]  INFO -- :   Rendered carts/_cart.html.erb (327.6ms)
I, [2015-01-01T17:50:49.801527 #10344]  INFO -- :   Rendered line_items/create.js.erb (390.0ms)
I, [2015-01-01T17:50:49.863927 #10344]  INFO -- : Completed 200 OK in 1284ms (Views: 452.4ms | ActiveRecord: 140.4ms)
D, [2015-01-01T17:50:52.445992 #10344] DEBUG -- : 
D, [2015-01-01T17:50:52.461592 #10344] DEBUG -- : 
I, [2015-01-01T17:50:52.508392 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 17:50:52 +0000
I, [2015-01-01T17:50:52.695593 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T17:50:52.851593 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T17:50:53.069993 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T17:50:53.179194 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T17:50:53.381994 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T17:50:53.553594 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T17:51:13.678233 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T17:51:14.068233 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 01 Jan 2015 17:51:13 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 17:51:13 UTC +00:00]]
D, [2015-01-01T17:51:14.239834 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 52[0m  [["cart_id", nil], ["order_id", 49], ["updated_at", Thu, 01 Jan 2015 17:51:14 UTC +00:00]]
D, [2015-01-01T17:51:14.427034 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 53  [["cart_id", nil], ["order_id", 49], ["updated_at", Thu, 01 Jan 2015 17:51:14 UTC +00:00]]
I, [2015-01-01T17:51:14.458234 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T17:51:14.615234 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T17:51:14.724435 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-01T17:51:22.455449 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 49]]
D, [2015-01-01T17:51:26.845057 #10344] DEBUG -- :   [1m[35mCACHE (0.0ms)[0m  SELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 49]]
I, [2015-01-01T17:51:33.072886 #10344]  INFO -- : in order=
I, [2015-01-01T17:51:50.870918 #10344]  INFO -- : in payment.create
I, [2015-01-01T17:51:51.058118 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/49/confirm", "cancel_url"=>"http://localhost:3000/orders/49/cancel"}}
I, [2015-01-01T17:51:51.479319 #10344]  INFO -- : #<ActiveModel::Errors:0x00000009b529b8 @base=#<Payment:0x00000005b1a3a0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005b196f8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000464aa88 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000004649f70 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000046482d8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000004636e98 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000354b020 @error=nil, @return_url="http://localhost:3000/orders/49/confirm", @cancel_url="http://localhost:3000/orders/49/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009b529b8 ...>>, @messages={}>
I, [2015-01-01T17:51:51.510519 #10344]  INFO -- : got past invalid
I, [2015-01-01T17:51:51.572919 #10344]  INFO -- : PayPal-Request-Id: 6eac859e-f72e-441b-b311-0ff5ba562065
I, [2015-01-01T17:51:51.619719 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T17:51:52.713721 #10344]  INFO -- : Response[400]: Bad Request, Duration: 1.047s
I, [2015-01-01T17:51:52.744921 #10344]  INFO -- :  in error=
I, [2015-01-01T17:51:52.776121 #10344]  INFO -- : back from super
I, [2015-01-01T17:51:52.996522 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/49/confirm", "cancel_url"=>"http://localhost:3000/orders/49/cancel"}}
I, [2015-01-01T17:51:53.152522 #10344]  INFO -- : @payment save just done
I, [2015-01-01T17:51:54.135324 #10344]  INFO -- : #<Payment:0x00000005b1a3a0 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"0dc75fb625487"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005b196f8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000464aa88 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000004649f70 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000046482d8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000004636e98 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000354b020 @error=nil, @return_url="http://localhost:3000/orders/49/confirm", @cancel_url="http://localhost:3000/orders/49/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009b529b8 @base=#<Payment:0x00000005b1a3a0 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="6eac859e-f72e-441b-b311-0ff5ba562065", @header={}>
I, [2015-01-01T17:51:55.102525 #10344]  INFO -- : #<Payment:0x00000005b1a3a0 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"0dc75fb625487"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005b196f8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000464aa88 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000004649f70 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000046482d8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000004636e98 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000354b020 @error=nil, @return_url="http://localhost:3000/orders/49/confirm", @cancel_url="http://localhost:3000/orders/49/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009b529b8 @base=#<Payment:0x00000005b1a3a0 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="6eac859e-f72e-441b-b311-0ff5ba562065", @header={}>
D, [2015-01-01T17:51:55.258526 #10344] DEBUG -- :   [1m[36m (109.2ms)[0m  [1mcommit transaction[0m
I, [2015-01-01T17:51:55.289726 #10344]  INFO -- : about to approve url
I, [2015-01-01T17:51:55.978127 #10344]  INFO -- : #<Payment:0x00000005b1a3a0 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"0dc75fb625487"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005b196f8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000464aa88 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000004649f70 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000046482d8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000004636e98 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000354b020 @error=nil, @return_url="http://localhost:3000/orders/49/confirm", @cancel_url="http://localhost:3000/orders/49/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009b529b8 @base=#<Payment:0x00000005b1a3a0 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="6eac859e-f72e-441b-b311-0ff5ba562065", @header={}>
I, [2015-01-01T17:51:56.024927 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T17:51:56.071727 #10344]  INFO -- : Completed 302 Found in 63329ms (ActiveRecord: 124.8ms)
D, [2015-01-01T17:51:56.149727 #10344] DEBUG -- : 
D, [2015-01-01T17:51:56.180927 #10344] DEBUG -- : 
I, [2015-01-01T17:51:56.227727 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 17:51:56 +0000
I, [2015-01-01T17:51:56.336928 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T17:51:56.414928 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:51:56.524128 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-01T17:51:56.586528 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (0.0ms)
I, [2015-01-01T17:51:56.633328 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (156.0ms)
D, [2015-01-01T17:51:56.882928 #10344] DEBUG -- :   [1m[35mLineItem Exists (0.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:51:56.976529 #10344] DEBUG -- :   [1m[36mLineItem Load (15.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:51:57.007729 #10344]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-01T17:51:57.085729 #10344]  INFO -- :   Rendered carts/_cart.html.erb (156.0ms)
I, [2015-01-01T17:51:57.163729 #10344]  INFO -- : Completed 200 OK in 780ms (Views: 670.8ms | ActiveRecord: 15.6ms)
D, [2015-01-01T17:57:49.646495 #10344] DEBUG -- : 
D, [2015-01-01T17:57:49.677695 #10344] DEBUG -- : 
I, [2015-01-01T17:57:49.724495 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 17:57:49 +0000
I, [2015-01-01T17:57:49.818095 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T17:57:49.880495 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T17:57:49.974096 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:57:50.067696 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-01T17:57:50.161296 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:57:50.270496 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T17:57:50.317296 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T17:57:50.512299 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 17:57:50 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:5800c00,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 17:57:50 UTC +00:00]]
D, [2015-01-01T17:57:50.699499 #10344] DEBUG -- :   [1m[35m (140.4ms)[0m  commit transaction
D, [2015-01-01T17:57:50.793099 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T17:57:50.886699 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T17:57:50.949099 #10344]  INFO -- :   Rendered carts/_cart.html.erb (187.2ms)
I, [2015-01-01T17:57:51.011499 #10344]  INFO -- :   Rendered line_items/create.js.erb (234.0ms)
I, [2015-01-01T17:57:51.058300 #10344]  INFO -- : Completed 200 OK in 1115ms (Views: 312.0ms | ActiveRecord: 156.0ms)
D, [2015-01-01T17:57:52.770764 #10344] DEBUG -- : 
D, [2015-01-01T17:57:52.801964 #10344] DEBUG -- : 
I, [2015-01-01T17:57:52.879964 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 17:57:52 +0000
I, [2015-01-01T17:57:52.989164 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T17:57:53.067164 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T17:57:53.176364 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T17:57:53.269965 #10344] DEBUG -- :   [1m[36mProduct Load (15.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-01T17:57:53.412766 #10344] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T17:57:53.537566 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T17:57:53.599966 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T17:57:53.849567 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 17:57:53 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:9d1e080,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 17:57:53 UTC +00:00]]
D, [2015-01-01T17:57:54.037767 #10344] DEBUG -- :   [1m[35m (125.8ms)[0m  commit transaction
D, [2015-01-01T17:57:54.178167 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-01T17:57:54.318568 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-01T17:57:54.412168 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (140.4ms)
I, [2015-01-01T17:57:54.490168 #10344]  INFO -- :   Rendered carts/_cart.html.erb (374.4ms)
I, [2015-01-01T17:57:54.552969 #10344]  INFO -- :   Rendered line_items/create.js.erb (436.8ms)
I, [2015-01-01T17:57:54.615369 #10344]  INFO -- : Completed 200 OK in 1486ms (Views: 515.2ms | ActiveRecord: 143.4ms)
D, [2015-01-01T17:57:56.215029 #10344] DEBUG -- : 
D, [2015-01-01T17:57:56.230629 #10344] DEBUG -- : 
I, [2015-01-01T17:57:56.293029 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 17:57:56 +0000
I, [2015-01-01T17:57:56.404230 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T17:57:56.482230 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T17:57:56.560230 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T17:57:56.622630 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T17:57:56.716230 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T17:57:56.841030 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T17:58:45.228522 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T17:58:45.353322 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 01 Jan 2015 17:58:45 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 17:58:45 UTC +00:00]]
D, [2015-01-01T17:58:45.462522 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 54[0m  [["cart_id", nil], ["order_id", 50], ["updated_at", Thu, 01 Jan 2015 17:58:45 UTC +00:00]]
D, [2015-01-01T17:58:45.556122 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 55  [["cart_id", nil], ["order_id", 50], ["updated_at", Thu, 01 Jan 2015 17:58:45 UTC +00:00]]
I, [2015-01-01T17:58:45.587322 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T17:58:45.649722 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T17:58:45.727722 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-01T17:58:52.084934 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 50]]
I, [2015-01-01T17:58:55.566740 #10344]  INFO -- : in order=
I, [2015-01-01T17:59:17.177580 #10344]  INFO -- : in payment.create
I, [2015-01-01T17:59:17.380380 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/50/confirm", "cancel_url"=>"http://localhost:3000/orders/50/cancel"}}
I, [2015-01-01T17:59:17.926381 #10344]  INFO -- : #<ActiveModel::Errors:0x00000009f76eb8 @base=#<Payment:0x00000005dc1680 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005dc0820 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000058d03b0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000058a7b90 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000058a5b38 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000058a4940 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000057765a0 @error=nil, @return_url="http://localhost:3000/orders/50/confirm", @cancel_url="http://localhost:3000/orders/50/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009f76eb8 ...>>, @messages={}>
I, [2015-01-01T17:59:17.957581 #10344]  INFO -- : got past invalid
I, [2015-01-01T17:59:18.035581 #10344]  INFO -- : PayPal-Request-Id: 5387a7c5-317d-4865-a97d-23856af02af3
I, [2015-01-01T17:59:18.082381 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T17:59:19.127583 #10344]  INFO -- : Response[400]: Bad Request, Duration: 1.014s
I, [2015-01-01T17:59:19.143183 #10344]  INFO -- :  in error=
I, [2015-01-01T17:59:19.158783 #10344]  INFO -- : back from super
I, [2015-01-01T17:59:19.314784 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/50/confirm", "cancel_url"=>"http://localhost:3000/orders/50/cancel"}}
I, [2015-01-01T17:59:36.219032 #10344]  INFO -- : @payment save just done
I, [2015-01-01T17:59:41.064041 #10344]  INFO -- : #<Payment:0x00000005dc1680 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"4fd87b1e4847c"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005dc0820 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000058d03b0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000058a7b90 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000058a5b38 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000058a4940 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000057765a0 @error=nil, @return_url="http://localhost:3000/orders/50/confirm", @cancel_url="http://localhost:3000/orders/50/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009f76eb8 @base=#<Payment:0x00000005dc1680 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="5387a7c5-317d-4865-a97d-23856af02af3", @header={}>
I, [2015-01-01T17:59:45.526049 #10344]  INFO -- : #<Payment:0x00000005dc1680 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"4fd87b1e4847c"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005dc0820 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000058d03b0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000058a7b90 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000058a5b38 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000058a4940 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000057765a0 @error=nil, @return_url="http://localhost:3000/orders/50/confirm", @cancel_url="http://localhost:3000/orders/50/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009f76eb8 @base=#<Payment:0x00000005dc1680 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="5387a7c5-317d-4865-a97d-23856af02af3", @header={}>
D, [2015-01-01T18:00:25.573522 #10344] DEBUG -- :   [1m[35m (109.2ms)[0m  commit transaction
I, [2015-01-01T18:00:50.796568 #10344]  INFO -- : #<Payment:0x00000005dc1680 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"4fd87b1e4847c"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005dc0820 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000058d03b0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000058a7b90 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000058a5b38 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000058a4940 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000057765a0 @error=nil, @return_url="http://localhost:3000/orders/50/confirm", @cancel_url="http://localhost:3000/orders/50/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009f76eb8 @base=#<Payment:0x00000005dc1680 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="5387a7c5-317d-4865-a97d-23856af02af3", @header={}>
I, [2015-01-01T19:01:11.157137 #10344]  INFO -- : about to approve url
I, [2015-01-01T19:01:11.987939 #10344]  INFO -- : #<Payment:0x00000005dc1680 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"4fd87b1e4847c"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005dc0820 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000058d03b0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000058a7b90 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000058a5b38 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000058a4940 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000057765a0 @error=nil, @return_url="http://localhost:3000/orders/50/confirm", @cancel_url="http://localhost:3000/orders/50/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009f76eb8 @base=#<Payment:0x00000005dc1680 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="5387a7c5-317d-4865-a97d-23856af02af3", @header={}, @links=[]>
I, [2015-01-01T19:01:12.034739 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T19:01:12.081539 #10344]  INFO -- : Completed 302 Found in 3795631ms (ActiveRecord: 124.8ms)
D, [2015-01-01T19:01:12.132340 #10344] DEBUG -- : 
D, [2015-01-01T19:01:12.149940 #10344] DEBUG -- : 
I, [2015-01-01T19:01:12.196740 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 19:01:12 +0000
I, [2015-01-01T19:01:14.211143 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:01:14.304744 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T19:01:14.460744 #10344] DEBUG -- :   [1m[36mCart Load (15.6ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:01:14.695744 #10344] DEBUG -- :   [1m[35mProduct Load (15.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-01T19:01:15.007745 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T19:01:15.319745 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T19:01:15.382146 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:01:15.647346 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 19:01:15 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:99375c0,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 19:01:15 UTC +00:00]]
D, [2015-01-01T19:01:15.850146 #10344] DEBUG -- :   [1m[36m (156.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T19:01:15.990547 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T19:01:16.084147 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T19:01:16.208947 #10344]  INFO -- :   Rendered carts/_cart.html.erb (280.8ms)
I, [2015-01-01T19:01:16.255747 #10344]  INFO -- :   Rendered line_items/create.js.erb (327.6ms)
I, [2015-01-01T19:01:16.302547 #10344]  INFO -- : Completed 200 OK in 1951ms (Views: 405.6ms | ActiveRecord: 218.4ms)
D, [2015-01-01T19:01:16.333747 #10344] DEBUG -- : 
D, [2015-01-01T19:01:16.349347 #10344] DEBUG -- : 
I, [2015-01-01T19:01:16.408950 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 19:01:16 +0000
I, [2015-01-01T19:01:16.545958 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T19:01:16.673965 #10344] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T19:01:16.859976 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T19:01:16.929980 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:01:17.092989 #10344] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T19:01:17.208996 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T19:01:31.125030 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:01:31.515031 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 01 Jan 2015 19:01:31 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 19:01:31 UTC +00:00]]
D, [2015-01-01T19:01:31.672031 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 56[0m  [["cart_id", nil], ["order_id", 51], ["updated_at", Thu, 01 Jan 2015 19:01:31 UTC +00:00]]
I, [2015-01-01T19:01:31.718831 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T19:01:31.843632 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T19:01:37.868242 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 51]]
I, [2015-01-01T19:02:26.920931 #10344]  INFO -- : in order=
I, [2015-01-01T19:02:26.952131 #10344]  INFO -- : in payment.create
I, [2015-01-01T19:02:27.123731 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/51/confirm", "cancel_url"=>"http://localhost:3000/orders/51/cancel"}}
I, [2015-01-01T19:02:27.702932 #10344]  INFO -- : #<ActiveModel::Errors:0x00000007e66728 @base=#<Payment:0x00000009b403f8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009b3b8d0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000097e4c90 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000097e43f8 @error=nil, @total="19.99", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000097de890 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000097ddb48 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007ec24d8 @error=nil, @return_url="http://localhost:3000/orders/51/confirm", @cancel_url="http://localhost:3000/orders/51/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007e66728 ...>>, @messages={}>
I, [2015-01-01T19:02:27.734132 #10344]  INFO -- : got past invalid
I, [2015-01-01T19:02:27.780932 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/oauth2/token
I, [2015-01-01T19:02:29.452135 #10344]  INFO -- : Response[200]: OK, Duration: 1.640s
I, [2015-01-01T19:02:29.530135 #10344]  INFO -- : PayPal-Request-Id: 019d612b-f5d7-4c9f-b2f9-4cc5cbf170c4
I, [2015-01-01T19:02:29.576936 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T19:02:30.860138 #10344]  INFO -- : Response[201]: Created, Duration: 1.252s
I, [2015-01-01T19:02:30.906938 #10344]  INFO -- : back from super
I, [2015-01-01T19:02:31.328139 #10344]  INFO -- : {"id"=>"PAY-7CH257708M525734TKSSZTSI", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99", "details"=>{"subtotal"=>"19.99"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/51/confirm", "cancel_url"=>"http://localhost:3000/orders/51/cancel"}, "create_time"=>"2015-01-01T19:02:33Z", "update_time"=>"2015-01-01T19:02:33Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CH257708M525734TKSSZTSI", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-35Y12517S8810024X", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CH257708M525734TKSSZTSI/execute", "rel"=>"execute", "method"=>"POST"}]}
I, [2015-01-01T19:02:31.733740 #10344]  INFO -- : @payment save just done
I, [2015-01-01T19:02:32.749741 #10344]  INFO -- : #<Payment:0x00000009b403f8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005fa8bb0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000005fa37c8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000005fa2f30 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005fa19a0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005fa13b0 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000005fa03c0 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000005f5af00 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005f5a3e8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007ec24d8 @error=nil, @return_url="http://localhost:3000/orders/51/confirm", @cancel_url="http://localhost:3000/orders/51/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007e66728 @base=#<Payment:0x00000009b403f8 ...>, @messages={}>, @request_id="019d612b-f5d7-4c9f-b2f9-4cc5cbf170c4", @header={}, @id="PAY-7CH257708M525734TKSSZTSI", @create_time="2015-01-01T19:02:33Z", @update_time="2015-01-01T19:02:33Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000005f52300 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CH257708M525734TKSSZTSI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000005f47a18 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-35Y12517S8810024X", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000005f45768 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CH257708M525734TKSSZTSI/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T19:02:33.827143 #10344]  INFO -- : #<Payment:0x00000009b403f8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005fa8bb0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000005fa37c8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000005fa2f30 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005fa19a0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005fa13b0 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000005fa03c0 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000005f5af00 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005f5a3e8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007ec24d8 @error=nil, @return_url="http://localhost:3000/orders/51/confirm", @cancel_url="http://localhost:3000/orders/51/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007e66728 @base=#<Payment:0x00000009b403f8 ...>, @messages={}>, @request_id="019d612b-f5d7-4c9f-b2f9-4cc5cbf170c4", @header={}, @id="PAY-7CH257708M525734TKSSZTSI", @create_time="2015-01-01T19:02:33Z", @update_time="2015-01-01T19:02:33Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000005f52300 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CH257708M525734TKSSZTSI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000005f47a18 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-35Y12517S8810024X", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000005f45768 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CH257708M525734TKSSZTSI/execute", @rel="execute", @method="POST">]>
D, [2015-01-01T19:02:33.967544 #10344] DEBUG -- :   [1m[35m (93.6ms)[0m  commit transaction
I, [2015-01-01T19:02:34.014344 #10344]  INFO -- : about to approve url
I, [2015-01-01T19:02:35.246746 #10344]  INFO -- : #<Payment:0x00000009b403f8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005fa8bb0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000005fa37c8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000005fa2f30 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005fa19a0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005fa13b0 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000005fa03c0 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000005f5af00 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005f5a3e8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007ec24d8 @error=nil, @return_url="http://localhost:3000/orders/51/confirm", @cancel_url="http://localhost:3000/orders/51/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007e66728 @base=#<Payment:0x00000009b403f8 ...>, @messages={}>, @request_id="019d612b-f5d7-4c9f-b2f9-4cc5cbf170c4", @header={}, @id="PAY-7CH257708M525734TKSSZTSI", @create_time="2015-01-01T19:02:33Z", @update_time="2015-01-01T19:02:33Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000005f52300 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CH257708M525734TKSSZTSI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000005f47a18 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-35Y12517S8810024X", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000005f45768 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CH257708M525734TKSSZTSI/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T19:02:36.448948 #10344]  INFO -- : #<Payment:0x00000009b403f8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005fa8bb0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000005fa37c8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000005fa2f30 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005fa19a0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005fa13b0 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000005fa03c0 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000005f5af00 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005f5a3e8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007ec24d8 @error=nil, @return_url="http://localhost:3000/orders/51/confirm", @cancel_url="http://localhost:3000/orders/51/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007e66728 @base=#<Payment:0x00000009b403f8 ...>, @messages={}>, @request_id="019d612b-f5d7-4c9f-b2f9-4cc5cbf170c4", @header={}, @id="PAY-7CH257708M525734TKSSZTSI", @create_time="2015-01-01T19:02:33Z", @update_time="2015-01-01T19:02:33Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000005f52300 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CH257708M525734TKSSZTSI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000005f47a18 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-35Y12517S8810024X", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000005f45768 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CH257708M525734TKSSZTSI/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T19:02:36.511348 #10344]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-35Y12517S8810024X
I, [2015-01-01T19:02:37.260149 #10344]  INFO -- : #<Payment:0x00000009b403f8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005fa8bb0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000005fa37c8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000005fa2f30 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005fa19a0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005fa13b0 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000005fa03c0 @error=nil, @subtotal="19.99">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000005f5af00 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005f5a3e8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007ec24d8 @error=nil, @return_url="http://localhost:3000/orders/51/confirm", @cancel_url="http://localhost:3000/orders/51/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007e66728 @base=#<Payment:0x00000009b403f8 ...>, @messages={}>, @request_id="019d612b-f5d7-4c9f-b2f9-4cc5cbf170c4", @header={}, @id="PAY-7CH257708M525734TKSSZTSI", @create_time="2015-01-01T19:02:33Z", @update_time="2015-01-01T19:02:33Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000005f52300 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CH257708M525734TKSSZTSI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000005f47a18 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-35Y12517S8810024X", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000005f45768 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CH257708M525734TKSSZTSI/execute", @rel="execute", @method="POST">]>
I, [2015-01-01T19:02:37.291349 #10344]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-35Y12517S8810024X
I, [2015-01-01T19:02:37.322549 #10344]  INFO -- : Completed 403 Forbidden in 80743ms (ActiveRecord: 117.6ms)
D, [2015-01-01T19:07:41.635010 #10344] DEBUG -- : 
D, [2015-01-01T19:07:41.650610 #10344] DEBUG -- : 
I, [2015-01-01T19:07:41.711213 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 19:07:41 +0000
I, [2015-01-01T19:07:44.780388 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T19:07:44.947398 #10344] DEBUG -- :   [1m[36mCart Load (3.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:07:45.215413 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T19:07:45.500429 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (5.0ms)
I, [2015-01-01T19:07:45.557433 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (373.0ms)
D, [2015-01-01T19:07:45.912453 #10344] DEBUG -- :   [1m[36mLineItem Exists (3.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T19:07:46.024459 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T19:07:46.071462 #10344]  INFO -- :   Rendered collection (1.0ms)
I, [2015-01-01T19:07:46.190469 #10344]  INFO -- :   Rendered carts/_cart.html.erb (227.0ms)
I, [2015-01-01T19:07:46.270473 #10344]  INFO -- : Completed 200 OK in 1440ms (Views: 1092.1ms | ActiveRecord: 34.0ms)
D, [2015-01-01T19:07:46.483486 #10344] DEBUG -- : 
D, [2015-01-01T19:07:46.512487 #10344] DEBUG -- : 
I, [2015-01-01T19:07:46.603493 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 19:07:46 +0000
D, [2015-01-01T19:07:46.669496 #10344] DEBUG -- : 
D, [2015-01-01T19:07:46.685497 #10344] DEBUG -- : 
I, [2015-01-01T19:07:46.736500 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 19:07:46 +0000
D, [2015-01-01T19:07:46.794503 #10344] DEBUG -- : 
D, [2015-01-01T19:07:46.810504 #10344] DEBUG -- : 
I, [2015-01-01T19:07:46.850507 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 19:07:46 +0000
D, [2015-01-01T19:07:46.915510 #10344] DEBUG -- : 
D, [2015-01-01T19:07:46.931511 #10344] DEBUG -- : 
I, [2015-01-01T19:07:46.983514 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 19:07:46 +0000
D, [2015-01-01T19:07:47.088520 #10344] DEBUG -- : 
D, [2015-01-01T19:07:47.110522 #10344] DEBUG -- : 
I, [2015-01-01T19:07:47.150524 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 19:07:47 +0000
D, [2015-01-01T19:07:47.209527 #10344] DEBUG -- : 
D, [2015-01-01T19:07:47.224528 #10344] DEBUG -- : 
I, [2015-01-01T19:07:47.265530 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 19:07:47 +0000
D, [2015-01-01T19:07:47.324534 #10344] DEBUG -- : 
D, [2015-01-01T19:07:47.345535 #10344] DEBUG -- : 
I, [2015-01-01T19:07:47.388537 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 19:07:47 +0000
D, [2015-01-01T19:07:47.459541 #10344] DEBUG -- : 
D, [2015-01-01T19:07:47.473542 #10344] DEBUG -- : 
I, [2015-01-01T19:07:47.513545 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 19:07:47 +0000
D, [2015-01-01T19:07:47.574548 #10344] DEBUG -- : 
D, [2015-01-01T19:07:47.588549 #10344] DEBUG -- : 
I, [2015-01-01T19:07:47.624551 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 19:07:47 +0000
D, [2015-01-01T19:07:47.682554 #10344] DEBUG -- : 
D, [2015-01-01T19:07:47.696555 #10344] DEBUG -- : 
I, [2015-01-01T19:07:47.735557 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 19:07:47 +0000
D, [2015-01-01T19:07:47.794561 #10344] DEBUG -- : 
D, [2015-01-01T19:07:47.812562 #10344] DEBUG -- : 
I, [2015-01-01T19:07:47.852564 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 19:07:47 +0000
D, [2015-01-01T19:07:47.923568 #10344] DEBUG -- : 
D, [2015-01-01T19:07:47.938569 #10344] DEBUG -- : 
I, [2015-01-01T19:07:47.982571 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 19:07:47 +0000
D, [2015-01-01T19:07:48.042575 #10344] DEBUG -- : 
D, [2015-01-01T19:07:48.056576 #10344] DEBUG -- : 
I, [2015-01-01T19:07:48.099578 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 19:07:48 +0000
D, [2015-01-01T19:07:48.163582 #10344] DEBUG -- : 
D, [2015-01-01T19:07:48.177583 #10344] DEBUG -- : 
I, [2015-01-01T19:07:48.220585 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 19:07:48 +0000
D, [2015-01-01T19:07:48.274588 #10344] DEBUG -- : 
D, [2015-01-01T19:07:48.292589 #10344] DEBUG -- : 
I, [2015-01-01T19:07:48.334592 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 19:07:48 +0000
D, [2015-01-01T19:07:48.389595 #10344] DEBUG -- : 
D, [2015-01-01T19:07:48.405596 #10344] DEBUG -- : 
I, [2015-01-01T19:07:48.444598 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 19:07:48 +0000
D, [2015-01-01T19:07:48.500601 #10344] DEBUG -- : 
D, [2015-01-01T19:07:48.515602 #10344] DEBUG -- : 
I, [2015-01-01T19:07:48.555604 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 19:07:48 +0000
D, [2015-01-01T19:07:48.628608 #10344] DEBUG -- : 
D, [2015-01-01T19:07:48.672611 #10344] DEBUG -- : 
I, [2015-01-01T19:07:48.729614 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 19:07:48 +0000
D, [2015-01-01T19:07:48.786617 #10344] DEBUG -- : 
D, [2015-01-01T19:07:48.799618 #10344] DEBUG -- : 
I, [2015-01-01T19:07:48.836620 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 19:07:48 +0000
D, [2015-01-01T19:07:48.900624 #10344] DEBUG -- : 
D, [2015-01-01T19:07:48.924625 #10344] DEBUG -- : 
I, [2015-01-01T19:07:48.965628 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 19:07:48 +0000
D, [2015-01-01T19:07:49.041632 #10344] DEBUG -- : 
D, [2015-01-01T19:07:49.066633 #10344] DEBUG -- : 
I, [2015-01-01T19:07:49.111636 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 19:07:49 +0000
D, [2015-01-01T19:07:49.177640 #10344] DEBUG -- : 
D, [2015-01-01T19:07:49.192641 #10344] DEBUG -- : 
I, [2015-01-01T19:07:49.233643 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 19:07:49 +0000
D, [2015-01-01T19:07:49.286646 #10344] DEBUG -- : 
D, [2015-01-01T19:07:49.299647 #10344] DEBUG -- : 
I, [2015-01-01T19:07:49.337649 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 19:07:49 +0000
D, [2015-01-01T19:07:49.390652 #10344] DEBUG -- : 
D, [2015-01-01T19:07:49.406653 #10344] DEBUG -- : 
I, [2015-01-01T19:07:49.448655 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 19:07:49 +0000
D, [2015-01-01T19:07:49.503658 #10344] DEBUG -- : 
D, [2015-01-01T19:07:49.517659 #10344] DEBUG -- : 
I, [2015-01-01T19:07:49.559662 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 19:07:49 +0000
D, [2015-01-01T19:07:49.619665 #10344] DEBUG -- : 
D, [2015-01-01T19:07:49.637666 #10344] DEBUG -- : 
I, [2015-01-01T19:07:49.679668 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 19:07:49 +0000
D, [2015-01-01T19:07:50.393709 #10344] DEBUG -- : 
D, [2015-01-01T19:07:50.416711 #10344] DEBUG -- : 
I, [2015-01-01T19:07:50.462713 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 19:07:50 +0000
D, [2015-01-01T19:07:50.550718 #10344] DEBUG -- : 
D, [2015-01-01T19:07:50.580720 #10344] DEBUG -- : 
I, [2015-01-01T19:07:50.662725 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 19:07:50 +0000
D, [2015-01-01T19:07:50.760730 #10344] DEBUG -- : 
D, [2015-01-01T19:07:50.779731 #10344] DEBUG -- : 
I, [2015-01-01T19:07:50.833734 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 19:07:50 +0000
D, [2015-01-01T19:07:52.717355 #10344] DEBUG -- : 
D, [2015-01-01T19:07:52.748555 #10344] DEBUG -- : 
I, [2015-01-01T19:07:52.810955 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 19:07:52 +0000
I, [2015-01-01T19:07:52.982555 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:07:53.060555 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T19:07:53.169756 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:07:53.271356 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-01T19:07:53.421757 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T19:07:53.748159 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T19:07:53.810559 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:07:54.080161 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 19:07:53 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:9ffd788,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 19:07:53 UTC +00:00]]
D, [2015-01-01T19:07:54.454562 #10344] DEBUG -- :   [1m[36m (327.6ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T19:07:54.597363 #10344] DEBUG -- :   [1m[35mLineItem Load (17.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T19:07:54.729564 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T19:07:54.823165 #10344]  INFO -- :   Rendered carts/_cart.html.erb (275.0ms)
I, [2015-01-01T19:07:54.885565 #10344]  INFO -- :   Rendered line_items/create.js.erb (353.0ms)
I, [2015-01-01T19:07:54.947965 #10344]  INFO -- : Completed 200 OK in 1825ms (Views: 413.4ms | ActiveRecord: 345.2ms)
D, [2015-01-01T19:07:54.994765 #10344] DEBUG -- : 
D, [2015-01-01T19:07:55.025965 #10344] DEBUG -- : 
I, [2015-01-01T19:07:55.095568 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 19:07:55 +0000
I, [2015-01-01T19:07:55.231576 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:07:55.315581 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T19:07:55.420587 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:07:55.522592 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-01T19:07:55.662600 #10344] DEBUG -- :   [1m[36mLineItem Load (3.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T19:07:55.795608 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-01T19:07:55.858612 #10344] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:07:56.107626 #10344] DEBUG -- :   [1m[35mSQL (9.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 19:07:55 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:84ce458,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 19:07:55 UTC +00:00]]
D, [2015-01-01T19:07:56.383827 #10344] DEBUG -- :   [1m[36m (238.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T19:07:56.511627 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-01T19:07:56.652028 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-01T19:07:56.730028 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (140.4ms)
I, [2015-01-01T19:07:56.808028 #10344]  INFO -- :   Rendered carts/_cart.html.erb (346.2ms)
I, [2015-01-01T19:07:56.854828 #10344]  INFO -- :   Rendered line_items/create.js.erb (408.6ms)
I, [2015-01-01T19:07:56.901628 #10344]  INFO -- : Completed 200 OK in 1538ms (Views: 455.4ms | ActiveRecord: 258.0ms)
D, [2015-01-01T19:07:58.828092 #10344] DEBUG -- : 
D, [2015-01-01T19:07:58.859292 #10344] DEBUG -- : 
I, [2015-01-01T19:07:58.906092 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 19:07:58 +0000
I, [2015-01-01T19:07:59.077692 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T19:07:59.218092 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T19:07:59.422893 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T19:07:59.517295 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:07:59.735695 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T19:07:59.876095 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T19:08:00.156896 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T19:08:00.546896 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 19:08:00 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 19:08:00 UTC +00:00]]
D, [2015-01-01T19:08:00.702897 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 57  [["cart_id", nil], ["order_id", 52], ["updated_at", Thu, 01 Jan 2015 19:08:00 UTC +00:00]]
D, [2015-01-01T19:08:00.843297 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 58[0m  [["cart_id", nil], ["order_id", 52], ["updated_at", Thu, 01 Jan 2015 19:08:00 UTC +00:00]]
I, [2015-01-01T19:08:00.874497 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T19:08:01.031898 #10344] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T19:08:01.126498 #10344] DEBUG -- :   [1m[36mProduct Load (15.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T19:08:04.574104 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 52]]
W, [2015-01-01T19:08:04.636505 #10344]  WARN -- : undefined method `transctions' for #<Payment:0x0000000836f4b8>
I, [2015-01-01T19:08:04.683305 #10344]  INFO -- : in payment.create
I, [2015-01-01T19:08:04.854905 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}]}
I, [2015-01-01T19:08:05.495506 #10344]  INFO -- : #<ActiveModel::Errors:0x00000007f351b8 @base=#<Payment:0x0000000836f4b8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000836e838 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007fb5c00 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007fb56b0 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007fafd28 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007faf238 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007f351b8 ...>>, @messages={}>
I, [2015-01-01T19:08:05.526706 #10344]  INFO -- : got past invalid
I, [2015-01-01T19:08:05.620306 #10344]  INFO -- : PayPal-Request-Id: f5939ab2-28b2-4d6b-a55f-a857f5c66c8c
I, [2015-01-01T19:08:05.682706 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T19:08:06.712308 #10344]  INFO -- : Response[400]: Bad Request, Duration: 0.983s
I, [2015-01-01T19:08:06.743508 #10344]  INFO -- :  in error=
I, [2015-01-01T19:08:06.774708 #10344]  INFO -- :  in error=
I, [2015-01-01T19:08:06.805908 #10344]  INFO -- : back from super
I, [2015-01-01T19:08:06.946309 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}]}
I, [2015-01-01T19:08:09.380913 #10344]  INFO -- : @payment save just done
I, [2015-01-01T19:08:10.020514 #10344]  INFO -- : #<Payment:0x0000000836f4b8 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"4940901378703"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000836e838 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007fb5c00 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007fb56b0 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007fafd28 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007faf238 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007f351b8 @base=#<Payment:0x0000000836f4b8 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="f5939ab2-28b2-4d6b-a55f-a857f5c66c8c", @header={}>
I, [2015-01-01T19:08:10.505115 #10344]  INFO -- : #<Payment:0x0000000836f4b8 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"4940901378703"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000836e838 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007fb5c00 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007fb56b0 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007fafd28 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007faf238 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007f351b8 @base=#<Payment:0x0000000836f4b8 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="f5939ab2-28b2-4d6b-a55f-a857f5c66c8c", @header={}>
D, [2015-01-01T19:08:11.535717 #10344] DEBUG -- :   [1m[36m (983.8ms)[0m  [1mcommit transaction[0m
I, [2015-01-01T19:08:11.566917 #10344]  INFO -- : about to approve url
I, [2015-01-01T19:08:12.240718 #10344]  INFO -- : #<Payment:0x0000000836f4b8 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"4940901378703"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000836e838 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000007fb5c00 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000007fb56b0 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007fafd28 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007faf238 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007f351b8 @base=#<Payment:0x0000000836f4b8 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="f5939ab2-28b2-4d6b-a55f-a857f5c66c8c", @header={}>
I, [2015-01-01T19:08:12.271918 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T19:08:12.318718 #10344]  INFO -- : Completed 302 Found in 13210ms (ActiveRecord: 1047.2ms)
D, [2015-01-01T19:08:12.396718 #10344] DEBUG -- : 
D, [2015-01-01T19:08:12.412319 #10344] DEBUG -- : 
I, [2015-01-01T19:08:12.443519 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 19:08:12 +0000
I, [2015-01-01T19:08:12.521519 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T19:08:12.583919 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:08:12.677519 #10344] DEBUG -- :   [1m[36mProduct Load (15.6ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-01T19:08:12.755519 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (0.0ms)
I, [2015-01-01T19:08:12.802319 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (140.4ms)
D, [2015-01-01T19:08:12.989520 #10344] DEBUG -- :   [1m[35mLineItem Exists (0.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T19:08:13.098720 #10344] DEBUG -- :   [1m[36mLineItem Load (15.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T19:08:13.145520 #10344]  INFO -- :   Rendered collection (15.6ms)
I, [2015-01-01T19:08:13.239120 #10344]  INFO -- :   Rendered carts/_cart.html.erb (187.2ms)
I, [2015-01-01T19:08:13.317120 #10344]  INFO -- : Completed 200 OK in 733ms (Views: 624.0ms | ActiveRecord: 31.2ms)
D, [2015-01-01T19:08:46.363616 #10344] DEBUG -- : 
D, [2015-01-01T19:08:46.394816 #10344] DEBUG -- : 
I, [2015-01-01T19:08:46.441616 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 19:08:46 +0000
I, [2015-01-01T19:08:48.929030 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:08:48.991430 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T19:08:49.131830 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:08:49.381430 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-01T19:08:49.662231 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T19:08:49.958631 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T19:08:50.036632 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T19:08:50.223832 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 19:08:50 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:8142f50,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 19:08:50 UTC +00:00]]
D, [2015-01-01T19:08:50.473432 #10344] DEBUG -- :   [1m[35m (218.4ms)[0m  commit transaction
D, [2015-01-01T19:08:50.598233 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T19:08:50.692833 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (16.6ms)
I, [2015-01-01T19:08:50.798434 #10344]  INFO -- :   Rendered carts/_cart.html.erb (247.0ms)
I, [2015-01-01T19:08:50.846234 #10344]  INFO -- :   Rendered line_items/create.js.erb (293.8ms)
I, [2015-01-01T19:08:50.893034 #10344]  INFO -- : Completed 200 OK in 1855ms (Views: 372.8ms | ActiveRecord: 249.6ms)
D, [2015-01-01T19:08:50.939834 #10344] DEBUG -- : 
D, [2015-01-01T19:08:50.963434 #10344] DEBUG -- : 
I, [2015-01-01T19:08:51.019438 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 19:08:50 +0000
I, [2015-01-01T19:08:51.136444 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:08:51.201448 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T19:08:51.276452 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:08:51.351457 #10344] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-01T19:08:51.446462 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T19:08:51.541467 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T19:08:51.583470 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-01T19:08:51.776481 #10344] DEBUG -- :   [1m[36mSQL (10.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 19:08:51 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:48a1e58,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 19:08:51 UTC +00:00]]
D, [2015-01-01T19:08:52.032496 #10344] DEBUG -- :   [1m[35m (213.0ms)[0m  commit transaction
D, [2015-01-01T19:08:52.172896 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-01T19:08:52.282096 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-01T19:08:52.360096 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (124.8ms)
I, [2015-01-01T19:08:52.438096 #10344]  INFO -- :   Rendered carts/_cart.html.erb (312.0ms)
I, [2015-01-01T19:08:52.484896 #10344]  INFO -- :   Rendered line_items/create.js.erb (390.0ms)
I, [2015-01-01T19:08:52.531696 #10344]  INFO -- : Completed 200 OK in 1281ms (Views: 452.4ms | ActiveRecord: 232.0ms)
D, [2015-01-01T19:08:54.775760 #10344] DEBUG -- : 
D, [2015-01-01T19:08:54.806960 #10344] DEBUG -- : 
I, [2015-01-01T19:08:54.869360 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 19:08:54 +0000
I, [2015-01-01T19:08:55.056560 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T19:08:55.181361 #10344] DEBUG -- :   [1m[36mUser Load (15.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T19:08:55.384161 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T19:08:55.477761 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:08:55.649361 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T19:08:55.820962 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T19:09:02.436977 #10344] DEBUG -- :   [1m[36m (15.6ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:09:02.795777 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 01 Jan 2015 19:09:02 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 19:09:02 UTC +00:00]]
D, [2015-01-01T19:09:02.926578 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 59[0m  [["cart_id", nil], ["order_id", 53], ["updated_at", Thu, 01 Jan 2015 19:09:02 UTC +00:00]]
D, [2015-01-01T19:09:03.035778 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 60  [["cart_id", nil], ["order_id", 53], ["updated_at", Thu, 01 Jan 2015 19:09:02 UTC +00:00]]
I, [2015-01-01T19:09:03.066978 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T19:09:21.512612 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T19:09:21.606212 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-01T19:09:25.646619 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 53]]
W, [2015-01-01T19:11:24.445867 #10344]  WARN -- : undefined method `transctions' for #<Payment:0x00000009ed6a30>
I, [2015-01-01T19:11:24.477067 #10344]  INFO -- : in payment.create
I, [2015-01-01T19:11:24.648667 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}]}
I, [2015-01-01T19:11:25.210268 #10344]  INFO -- : #<ActiveModel::Errors:0x00000005c518e0 @base=#<Payment:0x00000009ed6a30 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009ed5c70 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009511b58 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000095112c0 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000094bbeb0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000094bb1b8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005c518e0 ...>>, @messages={}>
I, [2015-01-01T19:11:25.241468 #10344]  INFO -- : got past invalid
I, [2015-01-01T19:11:25.319468 #10344]  INFO -- : PayPal-Request-Id: eeb938aa-568a-4f58-a241-93074d45fe55
I, [2015-01-01T19:11:25.366268 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T19:11:26.334470 #10344]  INFO -- : Response[400]: Bad Request, Duration: 0.937s
I, [2015-01-01T19:11:26.381270 #10344]  INFO -- :  in error=
I, [2015-01-01T19:11:26.396870 #10344]  INFO -- :  in error=
I, [2015-01-01T19:11:26.428070 #10344]  INFO -- : back from super
I, [2015-01-01T19:11:26.568470 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}]}
I, [2015-01-01T19:11:28.580874 #10344]  INFO -- : @payment save just done
I, [2015-01-01T19:11:29.282875 #10344]  INFO -- : #<Payment:0x00000009ed6a30 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"992f5377ab66c"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009ed5c70 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009511b58 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000095112c0 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000094bbeb0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000094bb1b8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005c518e0 @base=#<Payment:0x00000009ed6a30 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="eeb938aa-568a-4f58-a241-93074d45fe55", @header={}>
I, [2015-01-01T19:11:29.875676 #10344]  INFO -- : #<Payment:0x00000009ed6a30 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"992f5377ab66c"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009ed5c70 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009511b58 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000095112c0 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000094bbeb0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000094bb1b8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005c518e0 @base=#<Payment:0x00000009ed6a30 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="eeb938aa-568a-4f58-a241-93074d45fe55", @header={}>
D, [2015-01-01T19:11:30.047276 #10344] DEBUG -- :   [1m[35m (156.0ms)[0m  commit transaction
I, [2015-01-01T19:11:30.078476 #10344]  INFO -- : about to approve url
I, [2015-01-01T19:11:30.626477 #10344]  INFO -- : #<Payment:0x00000009ed6a30 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"992f5377ab66c"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009ed5c70 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009511b58 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000095112c0 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000094bbeb0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000094bb1b8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005c518e0 @base=#<Payment:0x00000009ed6a30 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="eeb938aa-568a-4f58-a241-93074d45fe55", @header={}>
I, [2015-01-01T19:11:30.657678 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T19:11:30.688878 #10344]  INFO -- : Completed 302 Found in 155601ms (ActiveRecord: 218.4ms)
D, [2015-01-01T19:11:30.813678 #10344] DEBUG -- : 
D, [2015-01-01T19:11:30.829278 #10344] DEBUG -- : 
I, [2015-01-01T19:11:30.860478 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 19:11:30 +0000
I, [2015-01-01T19:11:33.481282 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T19:11:33.623683 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:11:33.888883 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T19:11:34.138484 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (0.0ms)
I, [2015-01-01T19:11:34.202884 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (343.2ms)
D, [2015-01-01T19:11:34.514884 #10344] DEBUG -- :   [1m[36mLineItem Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T19:11:34.624085 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T19:11:34.670885 #10344]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-01T19:11:34.780085 #10344]  INFO -- :   Rendered carts/_cart.html.erb (202.8ms)
I, [2015-01-01T19:11:34.858085 #10344]  INFO -- : Completed 200 OK in 1314ms (Views: 969.2ms | ActiveRecord: 62.4ms)
D, [2015-01-01T19:11:37.609298 #10344] DEBUG -- : 
D, [2015-01-01T19:11:37.624898 #10344] DEBUG -- : 
I, [2015-01-01T19:11:37.687298 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 19:11:37 +0000
I, [2015-01-01T19:11:37.812098 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:11:37.874498 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T19:11:37.957900 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:11:38.051500 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-01T19:11:38.145100 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T19:11:38.459502 #10344] DEBUG -- :   [1m[35mProduct Load (15.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T19:11:38.506302 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:11:38.725702 #10344] DEBUG -- :   [1m[35mSQL (16.6ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 19:11:38 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:9d25768,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 19:11:38 UTC +00:00]]
D, [2015-01-01T19:11:38.954504 #10344] DEBUG -- :   [1m[36m (182.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T19:11:39.119505 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T19:11:39.244305 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T19:11:39.306705 #10344]  INFO -- :   Rendered carts/_cart.html.erb (234.0ms)
I, [2015-01-01T19:11:39.353505 #10344]  INFO -- :   Rendered line_items/create.js.erb (296.4ms)
I, [2015-01-01T19:11:39.400305 #10344]  INFO -- : Completed 200 OK in 1463ms (Views: 399.0ms | ActiveRecord: 214.2ms)
D, [2015-01-01T19:11:39.447105 #10344] DEBUG -- : 
D, [2015-01-01T19:11:39.478706 #10344] DEBUG -- : 
I, [2015-01-01T19:11:39.529709 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 19:11:39 +0000
I, [2015-01-01T19:11:39.645716 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:11:39.704719 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T19:11:39.787724 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:11:39.861728 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-01T19:11:39.959734 #10344] DEBUG -- :   [1m[36mLineItem Load (3.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T19:11:40.068740 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-01T19:11:40.118743 #10344] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:11:40.394759 #10344] DEBUG -- :   [1m[35mSQL (9.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 19:11:40 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:805dea0,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 19:11:40 UTC +00:00]]
D, [2015-01-01T19:11:40.682766 #10344] DEBUG -- :   [1m[36m (234.2ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T19:11:40.776367 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-01T19:11:40.869967 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-01T19:11:40.932367 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (93.6ms)
I, [2015-01-01T19:11:41.010367 #10344]  INFO -- :   Rendered carts/_cart.html.erb (265.2ms)
I, [2015-01-01T19:11:41.057167 #10344]  INFO -- :   Rendered line_items/create.js.erb (312.0ms)
I, [2015-01-01T19:11:41.103967 #10344]  INFO -- : Completed 200 OK in 1351ms (Views: 374.4ms | ActiveRecord: 254.2ms)
D, [2015-01-01T19:11:43.670631 #10344] DEBUG -- : 
D, [2015-01-01T19:11:43.701831 #10344] DEBUG -- : 
I, [2015-01-01T19:11:43.748631 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 19:11:43 +0000
I, [2015-01-01T19:11:43.951431 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T19:11:44.107432 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T19:11:44.341432 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T19:11:44.419432 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:11:44.639833 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T19:11:44.803833 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T19:11:49.237845 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T19:11:49.647446 #10344] DEBUG -- :   [1m[36mSQL (31.2ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 19:11:49 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 19:11:49 UTC +00:00]]
D, [2015-01-01T19:11:49.772246 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 61  [["cart_id", nil], ["order_id", 54], ["updated_at", Thu, 01 Jan 2015 19:11:49 UTC +00:00]]
D, [2015-01-01T19:11:49.881446 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 62[0m  [["cart_id", nil], ["order_id", 54], ["updated_at", Thu, 01 Jan 2015 19:11:49 UTC +00:00]]
I, [2015-01-01T19:11:49.897046 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T19:11:54.306254 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T19:11:54.431055 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T19:11:56.771059 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 54]]
W, [2015-01-01T19:11:56.817859 #10344]  WARN -- : undefined method `tranasctions' for #<Payment:0x00000005913430>
I, [2015-01-01T19:11:56.833459 #10344]  INFO -- : in payment.create
I, [2015-01-01T19:11:56.942659 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}]}
I, [2015-01-01T19:11:57.317060 #10344]  INFO -- : #<ActiveModel::Errors:0x0000000a111390 @base=#<Payment:0x00000005913430 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005911ab8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a2152f0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a214620 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a1e64a0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a1e4e70 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000a111390 ...>>, @messages={}>
I, [2015-01-01T19:11:57.332660 #10344]  INFO -- : got past invalid
I, [2015-01-01T19:11:57.410660 #10344]  INFO -- : PayPal-Request-Id: 6ae64151-c1f5-42e3-9844-2fa7360d1524
I, [2015-01-01T19:11:57.441860 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T19:11:58.398462 #10344]  INFO -- : Response[400]: Bad Request, Duration: 0.925s
I, [2015-01-01T19:11:58.414062 #10344]  INFO -- :  in error=
I, [2015-01-01T19:11:58.429662 #10344]  INFO -- :  in error=
I, [2015-01-01T19:11:58.460862 #10344]  INFO -- : back from super
I, [2015-01-01T19:11:58.554462 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}]}
I, [2015-01-01T19:13:52.817890 #10344]  INFO -- : @payment save just done
I, [2015-01-01T19:13:53.568691 #10344]  INFO -- : #<Payment:0x00000005913430 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"44537254b30a2"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005911ab8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a2152f0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a214620 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a1e64a0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a1e4e70 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000a111390 @base=#<Payment:0x00000005913430 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="6ae64151-c1f5-42e3-9844-2fa7360d1524", @header={}>
I, [2015-01-01T19:13:54.535893 #10344]  INFO -- : #<Payment:0x00000005913430 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"44537254b30a2"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005911ab8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a2152f0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a214620 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a1e64a0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a1e4e70 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000a111390 @base=#<Payment:0x00000005913430 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="6ae64151-c1f5-42e3-9844-2fa7360d1524", @header={}>
D, [2015-01-01T19:13:54.754293 #10344] DEBUG -- :   [1m[36m (140.4ms)[0m  [1mcommit transaction[0m
I, [2015-01-01T19:13:54.785493 #10344]  INFO -- : about to approve url
I, [2015-01-01T19:13:55.737095 #10344]  INFO -- : #<Payment:0x00000005913430 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"44537254b30a2"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005911ab8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a2152f0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a214620 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a1e64a0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a1e4e70 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000a111390 @base=#<Payment:0x00000005913430 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="6ae64151-c1f5-42e3-9844-2fa7360d1524", @header={}>
I, [2015-01-01T19:13:55.783895 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T19:13:55.846295 #10344]  INFO -- : Completed 302 Found in 131848ms (ActiveRecord: 202.8ms)
D, [2015-01-01T19:13:55.893095 #10344] DEBUG -- : 
D, [2015-01-01T19:13:55.924295 #10344] DEBUG -- : 
I, [2015-01-01T19:13:55.986695 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 19:13:55 +0000
I, [2015-01-01T19:13:58.715101 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T19:13:58.872101 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T19:13:59.043701 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T19:13:59.184102 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:13:59.527302 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T19:13:59.636502 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T19:14:01.434506 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T19:14:02.011707 #10344] DEBUG -- :   [1m[36mSQL (46.8ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 19:14:01 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 19:14:01 UTC +00:00]]
I, [2015-01-01T19:14:02.042907 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T19:14:06.309715 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 55]]
D, [2015-01-01T19:14:07.996518 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 55]]
W, [2015-01-01T19:25:26.143097 #10344]  WARN -- : undefined method `item_list' for #<PayPal::SDK::Core::API::DataTypes::ArrayWithBlock:0x00000008267bd8>
I, [2015-01-01T19:25:26.174297 #10344]  INFO -- : in payment.create
I, [2015-01-01T19:25:26.314697 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"0"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"0", "name"=>"Tee Shirts", "price"=>"0", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}]}
I, [2015-01-01T19:25:26.877298 #10344]  INFO -- : #<ActiveModel::Errors:0x00000006078180 @base=#<Payment:0x00000009520d60 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009513570 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008267638 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000008266fa8 @error=nil, @total="0", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008265bd0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008264c80 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="0", @currency="GBP", @quantity="0">]>, @description="King Clothing">, #<PayPal::SDK::REST::DataTypes::Transaction:0x000000062782c8 @error=nil, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000006278160 @error=nil>>, #<PayPal::SDK::REST::DataTypes::Transaction:0x0000000844d998 @error=nil, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000844d880 @error=nil>>], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000006078180 ...>>, @messages={}>
I, [2015-01-01T19:25:26.908498 #10344]  INFO -- : got past invalid
I, [2015-01-01T19:25:26.970898 #10344]  INFO -- : PayPal-Request-Id: f38193e4-e57d-4a7e-aadf-abbce387b913
I, [2015-01-01T19:25:27.017698 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T19:25:28.078500 #10344]  INFO -- : Response[400]: Bad Request, Duration: 1.030s
I, [2015-01-01T19:25:28.094100 #10344]  INFO -- :  in error=
I, [2015-01-01T19:25:28.109700 #10344]  INFO -- :  in error=
I, [2015-01-01T19:25:28.140900 #10344]  INFO -- : back from super
I, [2015-01-01T19:25:28.250100 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"0"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"0", "name"=>"Tee Shirts", "price"=>"0", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}]}
I, [2015-01-01T19:25:30.935305 #10344]  INFO -- : @payment save just done
I, [2015-01-01T19:25:31.795307 #10344]  INFO -- : #<Payment:0x00000009520d60 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions[0].item_list.items[0].quantity", "issue"=>"Must be a positive integer"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"6ccc601d7ea7c"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009513570 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008267638 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000008266fa8 @error=nil, @total="0", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008265bd0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008264c80 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="0", @currency="GBP", @quantity="0">]>, @description="King Clothing">, #<PayPal::SDK::REST::DataTypes::Transaction:0x000000062782c8 @error=nil, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000006278160 @error=nil>>, #<PayPal::SDK::REST::DataTypes::Transaction:0x0000000844d998 @error=nil, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000844d880 @error=nil>>], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000006078180 @base=#<Payment:0x00000009520d60 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :"transactions[0].item_list.items[0].quantity"=>["Must be a positive integer"]}>, @request_id="f38193e4-e57d-4a7e-aadf-abbce387b913", @header={}>
I, [2015-01-01T19:25:32.622108 #10344]  INFO -- : #<Payment:0x00000009520d60 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions[0].item_list.items[0].quantity", "issue"=>"Must be a positive integer"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"6ccc601d7ea7c"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009513570 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008267638 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000008266fa8 @error=nil, @total="0", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008265bd0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008264c80 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="0", @currency="GBP", @quantity="0">]>, @description="King Clothing">, #<PayPal::SDK::REST::DataTypes::Transaction:0x000000062782c8 @error=nil, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000006278160 @error=nil>>, #<PayPal::SDK::REST::DataTypes::Transaction:0x0000000844d998 @error=nil, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000844d880 @error=nil>>], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000006078180 @base=#<Payment:0x00000009520d60 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :"transactions[0].item_list.items[0].quantity"=>["Must be a positive integer"]}>, @request_id="f38193e4-e57d-4a7e-aadf-abbce387b913", @header={}>
D, [2015-01-01T19:25:32.824909 #10344] DEBUG -- :   [1m[35m (140.4ms)[0m  commit transaction
I, [2015-01-01T19:25:32.856109 #10344]  INFO -- : about to approve url
I, [2015-01-01T19:25:33.886710 #10344]  INFO -- : #<Payment:0x00000009520d60 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions[0].item_list.items[0].quantity", "issue"=>"Must be a positive integer"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"6ccc601d7ea7c"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009513570 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008267638 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000008266fa8 @error=nil, @total="0", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008265bd0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008264c80 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="0", @currency="GBP", @quantity="0">]>, @description="King Clothing">, #<PayPal::SDK::REST::DataTypes::Transaction:0x000000062782c8 @error=nil, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000006278160 @error=nil>>, #<PayPal::SDK::REST::DataTypes::Transaction:0x0000000844d998 @error=nil, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000844d880 @error=nil>>], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000006078180 @base=#<Payment:0x00000009520d60 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :"transactions[0].item_list.items[0].quantity"=>["Must be a positive integer"]}>, @request_id="f38193e4-e57d-4a7e-aadf-abbce387b913", @header={}>
I, [2015-01-01T19:25:33.933511 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T19:25:33.980311 #10344]  INFO -- : Completed 302 Found in 695218ms (ActiveRecord: 218.4ms)
D, [2015-01-01T19:25:34.058311 #10344] DEBUG -- : 
D, [2015-01-01T19:25:34.089511 #10344] DEBUG -- : 
I, [2015-01-01T19:25:34.136311 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 19:25:34 +0000
I, [2015-01-01T19:25:36.572915 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T19:25:36.683116 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:25:36.979516 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T19:25:37.229116 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (46.8ms)
I, [2015-01-01T19:25:37.275917 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (327.6ms)
D, [2015-01-01T19:25:37.650317 #10344] DEBUG -- :   [1m[36mLineItem Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T19:25:37.759517 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T19:25:37.775117 #10344]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-01T19:25:37.884318 #10344]  INFO -- :   Rendered carts/_cart.html.erb (156.0ms)
I, [2015-01-01T19:25:37.946718 #10344]  INFO -- : Completed 200 OK in 1327ms (Views: 1060.8ms | ActiveRecord: 15.6ms)
D, [2015-01-01T19:25:55.273955 #10344] DEBUG -- : 
D, [2015-01-01T19:25:55.305156 #10344] DEBUG -- : 
I, [2015-01-01T19:25:55.367556 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 19:25:55 +0000
I, [2015-01-01T19:25:55.539156 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:25:55.617156 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T19:25:55.725158 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:25:55.808559 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-01T19:25:55.933359 #10344] DEBUG -- :   [1m[36mLineItem Load (15.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T19:25:56.207560 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T19:25:56.270361 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:25:56.478162 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 19:25:56 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7f35d48,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 19:25:56 UTC +00:00]]
D, [2015-01-01T19:25:56.634162 #10344] DEBUG -- :   [1m[36m (93.6ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T19:25:56.759963 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T19:25:56.868965 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T19:25:56.939766 #10344]  INFO -- :   Rendered carts/_cart.html.erb (227.6ms)
I, [2015-01-01T19:25:56.970966 #10344]  INFO -- :   Rendered line_items/create.js.erb (274.4ms)
I, [2015-01-01T19:25:57.064566 #10344]  INFO -- : Completed 200 OK in 1401ms (Views: 368.0ms | ActiveRecord: 124.8ms)
D, [2015-01-01T19:25:57.150369 #10344] DEBUG -- : 
D, [2015-01-01T19:25:57.172370 #10344] DEBUG -- : 
I, [2015-01-01T19:25:57.218372 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 19:25:57 +0000
I, [2015-01-01T19:25:57.338379 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:25:57.402383 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T19:25:57.486388 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:25:57.566392 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-01T19:25:57.677399 #10344] DEBUG -- :   [1m[36mLineItem Load (3.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T19:25:57.781405 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-01T19:25:57.827407 #10344] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:25:58.030419 #10344] DEBUG -- :   [1m[35mSQL (10.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 19:25:57 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:4b27600,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 19:25:57 UTC +00:00]]
D, [2015-01-01T19:25:58.158426 #10344] DEBUG -- :   [1m[36m (95.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T19:25:58.283226 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-01T19:25:58.423627 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-01T19:25:58.486027 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (140.4ms)
I, [2015-01-01T19:25:58.579627 #10344]  INFO -- :   Rendered carts/_cart.html.erb (343.2ms)
I, [2015-01-01T19:25:58.626427 #10344]  INFO -- :   Rendered line_items/create.js.erb (405.6ms)
I, [2015-01-01T19:25:58.688827 #10344]  INFO -- : Completed 200 OK in 1238ms (Views: 452.4ms | ActiveRecord: 115.0ms)
D, [2015-01-01T19:26:00.224488 #10344] DEBUG -- : 
D, [2015-01-01T19:26:00.240088 #10344] DEBUG -- : 
I, [2015-01-01T19:26:00.286888 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 19:26:00 +0000
I, [2015-01-01T19:26:00.442889 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T19:26:00.567689 #10344] DEBUG -- :   [1m[35mUser Load (15.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T19:26:00.754889 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T19:26:00.832889 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:26:01.004489 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T19:26:01.144890 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T19:26:09.687510 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T19:26:10.000511 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 19:26:09 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 19:26:09 UTC +00:00]]
D, [2015-01-01T19:26:10.140911 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 63  [["cart_id", nil], ["order_id", 56], ["updated_at", Thu, 01 Jan 2015 19:26:10 UTC +00:00]]
D, [2015-01-01T19:26:10.265711 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 64[0m  [["cart_id", nil], ["order_id", 56], ["updated_at", Thu, 01 Jan 2015 19:26:10 UTC +00:00]]
I, [2015-01-01T19:26:10.312511 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T19:26:13.403317 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T19:26:13.496917 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T19:26:15.634121 #10344] DEBUG -- :   [1m[35m (15.6ms)[0m  SELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 56]]
D, [2015-01-01T19:26:15.712121 #10344] DEBUG -- :   [1m[36m (15.6ms)[0m  [1mrollback transaction[0m
I, [2015-01-01T19:26:15.758921 #10344]  INFO -- : Completed 500 Internal Server Error in 15269ms
F, [2015-01-01T19:26:15.961721 #10344] FATAL -- : 
NameError (undefined local variable or method `quantity' for #<Payment:0x000000059e4a30>):
  app/models/payment.rb:53:in `order='
  app/models/order.rb:41:in `new'
  app/models/order.rb:41:in `create_payment'
  app/controllers/orders_controller.rb:155:in `ppcheckout'


I, [2015-01-01T19:26:16.429722 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (0.0ms)
I, [2015-01-01T19:26:16.587723 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (17.6ms)
I, [2015-01-01T19:26:16.743723 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (15.6ms)
I, [2015-01-01T19:26:16.837323 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (454.4ms)
D, [2015-01-01T19:26:16.970727 #10344] DEBUG -- : 
D, [2015-01-01T19:26:16.987728 #10344] DEBUG -- : 
I, [2015-01-01T19:26:17.034731 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 19:26:16 +0000
I, [2015-01-01T19:26:17.143737 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T19:26:17.210741 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T19:26:17.279745 #10344] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T19:26:17.346749 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:26:17.437754 #10344] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T19:26:17.553761 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T19:28:00.321639 #10344] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2015-01-01T19:28:00.433645 #10344] DEBUG -- :   [1m[36mSQL (7.0ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 19:28:00 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 19:28:00 UTC +00:00]]
D, [2015-01-01T19:28:00.556652 #10344] DEBUG -- :   [1m[35mSQL (4.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 63  [["cart_id", nil], ["order_id", 56], ["updated_at", Thu, 01 Jan 2015 19:28:00 UTC +00:00]]
D, [2015-01-01T19:28:00.679659 #10344] DEBUG -- :   [1m[36mSQL (3.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 64[0m  [["cart_id", nil], ["order_id", 56], ["updated_at", Thu, 01 Jan 2015 19:28:00 UTC +00:00]]
I, [2015-01-01T19:28:00.711661 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T19:28:01.583711 #10344] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T19:28:01.672716 #10344] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T19:28:02.580768 #10344] DEBUG -- :   [1m[35m (2.0ms)[0m  SELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 56]]
D, [2015-01-01T19:28:02.629771 #10344] DEBUG -- :   [1m[36m (13.0ms)[0m  [1mrollback transaction[0m
I, [2015-01-01T19:28:02.666773 #10344]  INFO -- : Completed 500 Internal Server Error in 105489ms
F, [2015-01-01T19:28:02.803781 #10344] FATAL -- : 
NameError (undefined local variable or method `quantity' for #<Payment:0x0000000592cfe8>):
  app/models/payment.rb:53:in `order='
  app/models/order.rb:41:in `new'
  app/models/order.rb:41:in `create_payment'
  app/controllers/orders_controller.rb:155:in `ppcheckout'


I, [2015-01-01T19:28:03.108798 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (12.0ms)
I, [2015-01-01T19:28:03.234805 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (16.0ms)
I, [2015-01-01T19:28:03.361812 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (11.0ms)
I, [2015-01-01T19:28:03.444817 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (379.0ms)
D, [2015-01-01T19:28:03.501820 #10344] DEBUG -- : 
D, [2015-01-01T19:28:03.524822 #10344] DEBUG -- : 
I, [2015-01-01T19:28:03.575825 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 19:28:03 +0000
I, [2015-01-01T19:28:05.967250 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T19:28:06.107650 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T19:28:06.280250 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T19:28:06.405051 #10344] DEBUG -- :   [1m[35mCart Load (15.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:28:06.685851 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T19:28:06.998852 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T19:28:17.714273 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T19:28:18.057474 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 19:28:17 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 19:28:17 UTC +00:00]]
D, [2015-01-01T19:28:18.197874 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 63  [["cart_id", nil], ["order_id", 56], ["updated_at", Thu, 01 Jan 2015 19:28:18 UTC +00:00]]
D, [2015-01-01T19:28:18.338274 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 64[0m  [["cart_id", nil], ["order_id", 56], ["updated_at", Thu, 01 Jan 2015 19:28:18 UTC +00:00]]
I, [2015-01-01T19:28:18.369474 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T19:28:19.368876 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T19:28:19.587276 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T19:28:20.304878 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 56]]
I, [2015-01-01T19:28:21.305279 #10344]  INFO -- : in order=
I, [2015-01-01T19:28:21.336479 #10344]  INFO -- : in payment.create
I, [2015-01-01T19:28:21.554880 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/56/confirm", "cancel_url"=>"http://localhost:3000/orders/56/cancel"}}
I, [2015-01-01T19:28:22.178881 #10344]  INFO -- : #<ActiveModel::Errors:0x00000005a2c470 @base=#<Payment:0x000000085961d8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008595580 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005cced40 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005ccdb98 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000005cc65f0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005cc53d0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000005b12150 @error=nil, @return_url="http://localhost:3000/orders/56/confirm", @cancel_url="http://localhost:3000/orders/56/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005a2c470 ...>>, @messages={}>
I, [2015-01-01T19:28:22.210081 #10344]  INFO -- : got past invalid
I, [2015-01-01T19:28:22.288081 #10344]  INFO -- : PayPal-Request-Id: 330a683f-fda9-4ac8-b222-9465fb55b65b
I, [2015-01-01T19:28:22.319281 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T19:28:23.258283 #10344]  INFO -- : Response[400]: Bad Request, Duration: 0.892s
I, [2015-01-01T19:28:23.289483 #10344]  INFO -- : back from super
I, [2015-01-01T19:28:23.570284 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/56/confirm", "cancel_url"=>"http://localhost:3000/orders/56/cancel"}}
I, [2015-01-01T19:28:24.023684 #10344]  INFO -- : @payment save just done
I, [2015-01-01T19:28:24.902286 #10344]  INFO -- : #<Payment:0x000000085961d8 @error={"name"=>"MALFORMED_REQUEST", "message"=>"Incoming JSON request does not map to API request", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#MALFORMED_REQUEST", "debug_id"=>"c9916333a340b"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008595580 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005cced40 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005ccdb98 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000005cc65f0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005cc53d0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000005b12150 @error=nil, @return_url="http://localhost:3000/orders/56/confirm", @cancel_url="http://localhost:3000/orders/56/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005a2c470 @base=#<Payment:0x000000085961d8 ...>, @messages={}>, @request_id="330a683f-fda9-4ac8-b222-9465fb55b65b", @header={}>
I, [2015-01-01T19:28:25.635487 #10344]  INFO -- : #<Payment:0x000000085961d8 @error={"name"=>"MALFORMED_REQUEST", "message"=>"Incoming JSON request does not map to API request", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#MALFORMED_REQUEST", "debug_id"=>"c9916333a340b"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008595580 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005cced40 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005ccdb98 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000005cc65f0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005cc53d0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000005b12150 @error=nil, @return_url="http://localhost:3000/orders/56/confirm", @cancel_url="http://localhost:3000/orders/56/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005a2c470 @base=#<Payment:0x000000085961d8 ...>, @messages={}>, @request_id="330a683f-fda9-4ac8-b222-9465fb55b65b", @header={}>
D, [2015-01-01T19:28:25.775888 #10344] DEBUG -- :   [1m[36m (93.6ms)[0m  [1mcommit transaction[0m
I, [2015-01-01T19:28:25.807088 #10344]  INFO -- : about to approve url
I, [2015-01-01T19:28:26.446689 #10344]  INFO -- : #<Payment:0x000000085961d8 @error={"name"=>"MALFORMED_REQUEST", "message"=>"Incoming JSON request does not map to API request", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#MALFORMED_REQUEST", "debug_id"=>"c9916333a340b"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008595580 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005cced40 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005ccdb98 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000005cc65f0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005cc53d0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000005b12150 @error=nil, @return_url="http://localhost:3000/orders/56/confirm", @cancel_url="http://localhost:3000/orders/56/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005a2c470 @base=#<Payment:0x000000085961d8 ...>, @messages={}>, @request_id="330a683f-fda9-4ac8-b222-9465fb55b65b", @header={}>
I, [2015-01-01T19:28:26.477889 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T19:28:26.540289 #10344]  INFO -- : Completed 302 Found in 20526ms (ActiveRecord: 171.6ms)
D, [2015-01-01T19:28:38.254948 #10344] DEBUG -- : 
D, [2015-01-01T19:28:38.278549 #10344] DEBUG -- : 
I, [2015-01-01T19:28:38.327552 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 19:28:38 +0000
I, [2015-01-01T19:28:38.467560 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T19:28:38.561565 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:28:38.681572 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-01T19:28:38.775577 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (5.0ms)
I, [2015-01-01T19:28:38.830580 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (182.0ms)
D, [2015-01-01T19:28:39.093595 #10344] DEBUG -- :   [1m[35mLineItem Exists (2.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T19:28:39.201602 #10344] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T19:28:39.244604 #10344]  INFO -- :   Rendered collection (1.0ms)
I, [2015-01-01T19:28:39.369611 #10344]  INFO -- :   Rendered carts/_cart.html.erb (220.0ms)
I, [2015-01-01T19:28:39.452616 #10344]  INFO -- : Completed 200 OK in 931ms (Views: 822.0ms | ActiveRecord: 8.0ms)
D, [2015-01-01T19:28:39.624626 #10344] DEBUG -- : 
D, [2015-01-01T19:28:39.731632 #10344] DEBUG -- : 
I, [2015-01-01T19:28:39.802636 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 19:28:39 +0000
D, [2015-01-01T19:28:39.888641 #10344] DEBUG -- : 
D, [2015-01-01T19:28:39.912642 #10344] DEBUG -- : 
I, [2015-01-01T19:28:39.979646 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 19:28:39 +0000
D, [2015-01-01T19:28:40.058651 #10344] DEBUG -- : 
D, [2015-01-01T19:28:40.082652 #10344] DEBUG -- : 
I, [2015-01-01T19:28:40.145656 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 19:28:40 +0000
D, [2015-01-01T19:28:40.223660 #10344] DEBUG -- : 
D, [2015-01-01T19:28:40.252662 #10344] DEBUG -- : 
I, [2015-01-01T19:28:40.322666 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 19:28:40 +0000
D, [2015-01-01T19:28:40.398670 #10344] DEBUG -- : 
D, [2015-01-01T19:28:40.422671 #10344] DEBUG -- : 
I, [2015-01-01T19:28:40.483675 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 19:28:40 +0000
D, [2015-01-01T19:28:40.560679 #10344] DEBUG -- : 
D, [2015-01-01T19:28:40.587681 #10344] DEBUG -- : 
I, [2015-01-01T19:28:40.657685 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 19:28:40 +0000
D, [2015-01-01T19:28:40.732689 #10344] DEBUG -- : 
D, [2015-01-01T19:28:40.757691 #10344] DEBUG -- : 
I, [2015-01-01T19:28:40.821694 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 19:28:40 +0000
D, [2015-01-01T19:28:40.903699 #10344] DEBUG -- : 
D, [2015-01-01T19:28:40.928700 #10344] DEBUG -- : 
I, [2015-01-01T19:28:40.992704 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 19:28:40 +0000
D, [2015-01-01T19:28:41.067708 #10344] DEBUG -- : 
D, [2015-01-01T19:28:41.089710 #10344] DEBUG -- : 
I, [2015-01-01T19:28:41.154713 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 19:28:41 +0000
D, [2015-01-01T19:28:41.245719 #10344] DEBUG -- : 
D, [2015-01-01T19:28:41.271720 #10344] DEBUG -- : 
I, [2015-01-01T19:28:41.338724 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 19:28:41 +0000
D, [2015-01-01T19:28:41.413728 #10344] DEBUG -- : 
D, [2015-01-01T19:28:41.437730 #10344] DEBUG -- : 
I, [2015-01-01T19:28:41.504733 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 19:28:41 +0000
D, [2015-01-01T19:28:41.584738 #10344] DEBUG -- : 
D, [2015-01-01T19:28:41.613740 #10344] DEBUG -- : 
I, [2015-01-01T19:28:41.682744 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 19:28:41 +0000
D, [2015-01-01T19:28:41.756748 #10344] DEBUG -- : 
D, [2015-01-01T19:28:41.783749 #10344] DEBUG -- : 
I, [2015-01-01T19:28:41.839753 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 19:28:41 +0000
D, [2015-01-01T19:28:41.922757 #10344] DEBUG -- : 
D, [2015-01-01T19:28:41.943758 #10344] DEBUG -- : 
I, [2015-01-01T19:28:42.001762 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 19:28:41 +0000
D, [2015-01-01T19:28:42.078766 #10344] DEBUG -- : 
D, [2015-01-01T19:28:42.101768 #10344] DEBUG -- : 
I, [2015-01-01T19:28:42.165771 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 19:28:42 +0000
D, [2015-01-01T19:28:42.235775 #10344] DEBUG -- : 
D, [2015-01-01T19:28:42.270777 #10344] DEBUG -- : 
I, [2015-01-01T19:28:42.336781 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 19:28:42 +0000
D, [2015-01-01T19:28:42.415785 #10344] DEBUG -- : 
D, [2015-01-01T19:28:42.438787 #10344] DEBUG -- : 
I, [2015-01-01T19:28:42.494790 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 19:28:42 +0000
D, [2015-01-01T19:28:42.569794 #10344] DEBUG -- : 
D, [2015-01-01T19:28:42.597796 #10344] DEBUG -- : 
I, [2015-01-01T19:28:42.667800 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 19:28:42 +0000
D, [2015-01-01T19:28:42.742804 #10344] DEBUG -- : 
D, [2015-01-01T19:28:42.766806 #10344] DEBUG -- : 
I, [2015-01-01T19:28:42.830809 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 19:28:42 +0000
D, [2015-01-01T19:28:42.911814 #10344] DEBUG -- : 
D, [2015-01-01T19:28:42.936815 #10344] DEBUG -- : 
I, [2015-01-01T19:28:42.999819 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 19:28:42 +0000
D, [2015-01-01T19:28:43.073823 #10344] DEBUG -- : 
D, [2015-01-01T19:28:43.098825 #10344] DEBUG -- : 
I, [2015-01-01T19:28:43.163828 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 19:28:43 +0000
D, [2015-01-01T19:28:43.249833 #10344] DEBUG -- : 
D, [2015-01-01T19:28:43.276835 #10344] DEBUG -- : 
I, [2015-01-01T19:28:43.343839 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 19:28:43 +0000
D, [2015-01-01T19:28:43.419843 #10344] DEBUG -- : 
D, [2015-01-01T19:28:43.443844 #10344] DEBUG -- : 
I, [2015-01-01T19:28:43.506848 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 19:28:43 +0000
D, [2015-01-01T19:28:43.584852 #10344] DEBUG -- : 
D, [2015-01-01T19:28:43.611854 #10344] DEBUG -- : 
I, [2015-01-01T19:28:43.678858 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 19:28:43 +0000
D, [2015-01-01T19:28:43.751862 #10344] DEBUG -- : 
D, [2015-01-01T19:28:43.774863 #10344] DEBUG -- : 
I, [2015-01-01T19:28:43.835867 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 19:28:43 +0000
D, [2015-01-01T19:28:43.918871 #10344] DEBUG -- : 
D, [2015-01-01T19:28:43.944873 #10344] DEBUG -- : 
I, [2015-01-01T19:28:44.007877 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 19:28:43 +0000
D, [2015-01-01T19:28:44.100882 #10344] DEBUG -- : 
D, [2015-01-01T19:28:44.124883 #10344] DEBUG -- : 
I, [2015-01-01T19:28:44.183887 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 19:28:44 +0000
D, [2015-01-01T19:28:44.257891 #10344] DEBUG -- : 
D, [2015-01-01T19:28:44.278892 #10344] DEBUG -- : 
I, [2015-01-01T19:28:44.352896 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 19:28:44 +0000
D, [2015-01-01T19:28:44.435901 #10344] DEBUG -- : 
D, [2015-01-01T19:28:44.462903 #10344] DEBUG -- : 
I, [2015-01-01T19:28:44.521906 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 19:28:44 +0000
D, [2015-01-01T19:28:47.250971 #10344] DEBUG -- : 
D, [2015-01-01T19:28:47.282171 #10344] DEBUG -- : 
I, [2015-01-01T19:28:47.360171 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 19:28:47 +0000
I, [2015-01-01T19:28:47.516573 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:28:47.594573 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T19:28:47.688173 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:28:47.797373 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-01T19:28:47.922173 #10344] DEBUG -- :   [1m[35mLineItem Load (15.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T19:28:48.062974 #10344] DEBUG -- :   [1m[36mProduct Load (18.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T19:28:48.109774 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T19:28:48.362375 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 19:28:48 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:962d438,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 19:28:48 UTC +00:00]]
D, [2015-01-01T19:28:48.516578 #10344] DEBUG -- :   [1m[35m (93.0ms)[0m  commit transaction
D, [2015-01-01T19:28:48.656978 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T19:28:48.750578 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T19:28:48.844178 #10344]  INFO -- :   Rendered carts/_cart.html.erb (234.0ms)
I, [2015-01-01T19:28:48.907579 #10344]  INFO -- :   Rendered line_items/create.js.erb (312.0ms)
I, [2015-01-01T19:28:48.965379 #10344]  INFO -- : Completed 200 OK in 1317ms (Views: 392.0ms | ActiveRecord: 142.8ms)
D, [2015-01-01T19:28:49.012179 #10344] DEBUG -- : 
D, [2015-01-01T19:28:49.027779 #10344] DEBUG -- : 
I, [2015-01-01T19:28:49.096382 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 19:28:49 +0000
I, [2015-01-01T19:28:49.226390 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:28:49.288393 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T19:28:49.375398 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:28:49.460403 #10344] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-01T19:28:49.574410 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T19:28:49.687416 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T19:28:49.735419 #10344] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2015-01-01T19:28:49.964432 #10344] DEBUG -- :   [1m[36mSQL (9.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 19:28:49 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:5719788,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 19:28:49 UTC +00:00]]
D, [2015-01-01T19:28:50.108440 #10344] DEBUG -- :   [1m[35m (96.0ms)[0m  commit transaction
D, [2015-01-01T19:28:50.227641 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-01T19:28:50.383641 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-01T19:28:50.462642 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (157.0ms)
I, [2015-01-01T19:28:50.556242 #10344]  INFO -- :   Rendered carts/_cart.html.erb (359.8ms)
I, [2015-01-01T19:28:50.605042 #10344]  INFO -- :   Rendered line_items/create.js.erb (422.2ms)
I, [2015-01-01T19:28:50.651842 #10344]  INFO -- : Completed 200 OK in 1315ms (Views: 491.6ms | ActiveRecord: 117.0ms)
D, [2015-01-01T19:28:52.044103 #10344] DEBUG -- : 
D, [2015-01-01T19:28:52.075303 #10344] DEBUG -- : 
I, [2015-01-01T19:28:52.137703 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 19:28:52 +0000
I, [2015-01-01T19:28:52.262503 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T19:28:52.356103 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T19:28:52.434103 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T19:28:52.527703 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:28:52.636904 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T19:28:52.777304 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T19:29:03.440326 #10344] DEBUG -- :   [1m[36m (15.6ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:29:03.549526 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 01 Jan 2015 19:29:03 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 19:29:03 UTC +00:00]]
D, [2015-01-01T19:29:03.658726 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 65[0m  [["cart_id", nil], ["order_id", 57], ["updated_at", Thu, 01 Jan 2015 19:29:03 UTC +00:00]]
D, [2015-01-01T19:29:03.799126 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 66  [["cart_id", nil], ["order_id", 57], ["updated_at", Thu, 01 Jan 2015 19:29:03 UTC +00:00]]
I, [2015-01-01T19:29:03.830326 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T19:29:05.360129 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T19:29:05.454729 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-01T19:29:06.734931 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 57]]
I, [2015-01-01T19:29:30.897175 #10344]  INFO -- : in order=
I, [2015-01-01T19:29:30.912775 #10344]  INFO -- : in payment.create
I, [2015-01-01T19:29:31.146776 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/57/confirm", "cancel_url"=>"http://localhost:3000/orders/57/cancel"}}
I, [2015-01-01T19:29:31.755177 #10344]  INFO -- : #<ActiveModel::Errors:0x000000080c75d0 @base=#<Payment:0x00000009ccb088 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009cca2c8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000096ade58 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000096ad750 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000096a7da0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000096a6f18 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008142230 @error=nil, @return_url="http://localhost:3000/orders/57/confirm", @cancel_url="http://localhost:3000/orders/57/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000080c75d0 ...>>, @messages={}>
I, [2015-01-01T19:29:31.786377 #10344]  INFO -- : got past invalid
I, [2015-01-01T19:29:31.879977 #10344]  INFO -- : PayPal-Request-Id: dd8fa366-7aee-4fc0-8da4-7c4285066f5c
I, [2015-01-01T19:29:31.927777 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T19:29:32.881379 #10344]  INFO -- : Response[400]: Bad Request, Duration: 0.922s
I, [2015-01-01T19:29:32.896979 #10344]  INFO -- : back from super
I, [2015-01-01T19:29:33.068579 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/57/confirm", "cancel_url"=>"http://localhost:3000/orders/57/cancel"}}
I, [2015-01-01T19:29:35.257583 #10344]  INFO -- : @payment save just done
I, [2015-01-01T19:29:36.054185 #10344]  INFO -- : #<Payment:0x00000009ccb088 @error={"name"=>"MALFORMED_REQUEST", "message"=>"Incoming JSON request does not map to API request", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#MALFORMED_REQUEST", "debug_id"=>"425ecbafb2ee2"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009cca2c8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000096ade58 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000096ad750 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000096a7da0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000096a6f18 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008142230 @error=nil, @return_url="http://localhost:3000/orders/57/confirm", @cancel_url="http://localhost:3000/orders/57/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000080c75d0 @base=#<Payment:0x00000009ccb088 ...>, @messages={}>, @request_id="dd8fa366-7aee-4fc0-8da4-7c4285066f5c", @header={}>
I, [2015-01-01T19:29:36.787386 #10344]  INFO -- : #<Payment:0x00000009ccb088 @error={"name"=>"MALFORMED_REQUEST", "message"=>"Incoming JSON request does not map to API request", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#MALFORMED_REQUEST", "debug_id"=>"425ecbafb2ee2"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009cca2c8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000096ade58 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000096ad750 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000096a7da0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000096a6f18 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008142230 @error=nil, @return_url="http://localhost:3000/orders/57/confirm", @cancel_url="http://localhost:3000/orders/57/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000080c75d0 @base=#<Payment:0x00000009ccb088 ...>, @messages={}>, @request_id="dd8fa366-7aee-4fc0-8da4-7c4285066f5c", @header={}>
D, [2015-01-01T19:29:36.943386 #10344] DEBUG -- :   [1m[35m (124.8ms)[0m  commit transaction
I, [2015-01-01T19:29:36.974586 #10344]  INFO -- : about to approve url
I, [2015-01-01T19:29:37.660987 #10344]  INFO -- : #<Payment:0x00000009ccb088 @error={"name"=>"MALFORMED_REQUEST", "message"=>"Incoming JSON request does not map to API request", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#MALFORMED_REQUEST", "debug_id"=>"425ecbafb2ee2"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009cca2c8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000096ade58 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000096ad750 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000096a7da0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000096a6f18 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008142230 @error=nil, @return_url="http://localhost:3000/orders/57/confirm", @cancel_url="http://localhost:3000/orders/57/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000080c75d0 @base=#<Payment:0x00000009ccb088 ...>, @messages={}>, @request_id="dd8fa366-7aee-4fc0-8da4-7c4285066f5c", @header={}>
I, [2015-01-01T19:29:37.692188 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T19:29:37.738988 #10344]  INFO -- : Completed 302 Found in 45430ms (ActiveRecord: 156.0ms)
D, [2015-01-01T19:29:37.816988 #10344] DEBUG -- : 
D, [2015-01-01T19:29:37.848188 #10344] DEBUG -- : 
I, [2015-01-01T19:29:37.894988 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 19:29:37 +0000
I, [2015-01-01T19:29:38.004188 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T19:29:38.100788 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:29:38.194389 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T19:29:38.272389 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (0.0ms)
I, [2015-01-01T19:29:38.334789 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (140.4ms)
D, [2015-01-01T19:29:38.584389 #10344] DEBUG -- :   [1m[36mLineItem Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T19:29:38.693589 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T19:29:38.724789 #10344]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-01T19:29:38.802790 #10344]  INFO -- :   Rendered carts/_cart.html.erb (171.6ms)
I, [2015-01-01T19:29:38.880790 #10344]  INFO -- : Completed 200 OK in 830ms (Views: 733.2ms | ActiveRecord: 0.0ms)
D, [2015-01-01T19:32:50.503989 #10344] DEBUG -- : 
D, [2015-01-01T19:32:50.535189 #10344] DEBUG -- : 
I, [2015-01-01T19:32:50.581989 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 19:32:50 +0000
I, [2015-01-01T19:32:50.675589 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:32:50.738990 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T19:32:50.816990 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:32:50.894990 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-01T19:32:51.004190 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T19:32:51.097790 #10344] DEBUG -- :   [1m[35mProduct Load (15.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T19:32:51.144590 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:32:51.354792 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 19:32:51 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:95105f0,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 19:32:51 UTC +00:00]]
D, [2015-01-01T19:32:51.510792 #10344] DEBUG -- :   [1m[36m (124.8ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T19:32:51.619992 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T19:32:51.713593 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T19:32:51.775993 #10344]  INFO -- :   Rendered carts/_cart.html.erb (187.2ms)
I, [2015-01-01T19:32:51.822793 #10344]  INFO -- :   Rendered line_items/create.js.erb (249.6ms)
I, [2015-01-01T19:32:51.885193 #10344]  INFO -- : Completed 200 OK in 1084ms (Views: 296.4ms | ActiveRecord: 140.4ms)
D, [2015-01-01T19:32:54.224684 #10344] DEBUG -- : 
D, [2015-01-01T19:32:54.255884 #10344] DEBUG -- : 
I, [2015-01-01T19:32:54.318285 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 19:32:54 +0000
I, [2015-01-01T19:32:54.427485 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:32:54.505485 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T19:32:54.599085 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:32:54.692685 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-01T19:32:54.817485 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T19:32:54.938686 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-01T19:32:55.001086 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:32:55.235087 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 19:32:55 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:6282570,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 19:32:55 UTC +00:00]]
D, [2015-01-01T19:32:55.406687 #10344] DEBUG -- :   [1m[36m (124.8ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T19:32:55.547087 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-01T19:32:55.687488 #10344] DEBUG -- :   [1m[36mProduct Load (15.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-01T19:32:55.765488 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (156.0ms)
I, [2015-01-01T19:32:55.843488 #10344]  INFO -- :   Rendered carts/_cart.html.erb (358.8ms)
I, [2015-01-01T19:32:55.905888 #10344]  INFO -- :   Rendered line_items/create.js.erb (421.2ms)
I, [2015-01-01T19:32:55.969288 #10344]  INFO -- : Completed 200 OK in 1400ms (Views: 483.6ms | ActiveRecord: 156.0ms)
D, [2015-01-01T19:32:57.772555 #10344] DEBUG -- : 
D, [2015-01-01T19:32:57.788155 #10344] DEBUG -- : 
I, [2015-01-01T19:32:57.834955 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 19:32:57 +0000
I, [2015-01-01T19:32:57.928555 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T19:32:58.022155 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T19:32:58.100155 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T19:32:58.178156 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:32:58.271756 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T19:32:58.396556 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T19:33:03.198571 #10344] DEBUG -- :   [1m[35m (15.6ms)[0m  begin transaction
D, [2015-01-01T19:33:03.292171 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 19:33:03 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 19:33:03 UTC +00:00]]
D, [2015-01-01T19:33:03.432571 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 67  [["cart_id", nil], ["order_id", 58], ["updated_at", Thu, 01 Jan 2015 19:33:03 UTC +00:00]]
D, [2015-01-01T19:33:03.558372 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 68[0m  [["cart_id", nil], ["order_id", 58], ["updated_at", Thu, 01 Jan 2015 19:33:03 UTC +00:00]]
I, [2015-01-01T19:33:03.606172 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T19:33:09.990583 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T19:33:10.099783 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T19:33:12.942988 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 58]]
I, [2015-01-01T19:37:37.418763 #10344]  INFO -- : in order=
I, [2015-01-01T19:37:37.434363 #10344]  INFO -- : in payment.create
I, [2015-01-01T19:37:37.699564 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/58/confirm", "cancel_url"=>"http://localhost:3000/orders/58/cancel"}}
I, [2015-01-01T19:37:38.276765 #10344]  INFO -- : #<ActiveModel::Errors:0x00000005f1d8d0 @base=#<Payment:0x00000009a9dc20 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009a9c758 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000938e100 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000938d8e0 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009387738 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009386568 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007d90768 @error=nil, @return_url="http://localhost:3000/orders/58/confirm", @cancel_url="http://localhost:3000/orders/58/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005f1d8d0 ...>>, @messages={}>
I, [2015-01-01T19:37:38.307965 #10344]  INFO -- : got past invalid
I, [2015-01-01T19:37:38.401565 #10344]  INFO -- : PayPal-Request-Id: 55e2cfe3-59fd-4835-b309-572687609eed
I, [2015-01-01T19:37:38.448365 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T19:37:39.416567 #10344]  INFO -- : Response[400]: Bad Request, Duration: 0.937s
I, [2015-01-01T19:37:39.432167 #10344]  INFO -- : back from super
I, [2015-01-01T19:37:39.603767 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/58/confirm", "cancel_url"=>"http://localhost:3000/orders/58/cancel"}}
I, [2015-01-01T19:37:41.901971 #10344]  INFO -- : @payment save just done
I, [2015-01-01T19:37:42.575773 #10344]  INFO -- : #<Payment:0x00000009a9dc20 @error={"name"=>"MALFORMED_REQUEST", "message"=>"Incoming JSON request does not map to API request", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#MALFORMED_REQUEST", "debug_id"=>"e0f357352b82e"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009a9c758 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000938e100 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000938d8e0 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009387738 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009386568 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007d90768 @error=nil, @return_url="http://localhost:3000/orders/58/confirm", @cancel_url="http://localhost:3000/orders/58/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005f1d8d0 @base=#<Payment:0x00000009a9dc20 ...>, @messages={}>, @request_id="55e2cfe3-59fd-4835-b309-572687609eed", @header={}>
I, [2015-01-01T19:37:43.279774 #10344]  INFO -- : #<Payment:0x00000009a9dc20 @error={"name"=>"MALFORMED_REQUEST", "message"=>"Incoming JSON request does not map to API request", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#MALFORMED_REQUEST", "debug_id"=>"e0f357352b82e"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009a9c758 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000938e100 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000938d8e0 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009387738 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009386568 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007d90768 @error=nil, @return_url="http://localhost:3000/orders/58/confirm", @cancel_url="http://localhost:3000/orders/58/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005f1d8d0 @base=#<Payment:0x00000009a9dc20 ...>, @messages={}>, @request_id="55e2cfe3-59fd-4835-b309-572687609eed", @header={}>
D, [2015-01-01T19:37:43.451374 #10344] DEBUG -- :   [1m[36m (109.2ms)[0m  [1mcommit transaction[0m
I, [2015-01-01T19:37:43.498175 #10344]  INFO -- : about to approve url
I, [2015-01-01T19:37:44.372776 #10344]  INFO -- : #<Payment:0x00000009a9dc20 @error={"name"=>"MALFORMED_REQUEST", "message"=>"Incoming JSON request does not map to API request", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#MALFORMED_REQUEST", "debug_id"=>"e0f357352b82e"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009a9c758 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000938e100 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000938d8e0 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009387738 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009386568 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:name=>"penknife", :sku=>"PK1", :price=>2, :currency=>"GBP", :quantity=>1}], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007d90768 @error=nil, @return_url="http://localhost:3000/orders/58/confirm", @cancel_url="http://localhost:3000/orders/58/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005f1d8d0 @base=#<Payment:0x00000009a9dc20 ...>, @messages={}>, @request_id="55e2cfe3-59fd-4835-b309-572687609eed", @header={}>
I, [2015-01-01T19:37:44.419576 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T19:37:44.481976 #10344]  INFO -- : Completed 302 Found in 286491ms (ActiveRecord: 140.4ms)
D, [2015-01-01T19:37:44.528776 #10344] DEBUG -- : 
D, [2015-01-01T19:37:44.559976 #10344] DEBUG -- : 
I, [2015-01-01T19:37:44.622377 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 19:37:44 +0000
I, [2015-01-01T19:37:47.073581 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:37:47.120381 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T19:37:47.229581 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:37:47.447982 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-01T19:37:47.713182 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T19:37:48.028183 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T19:37:48.059383 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T19:37:48.230983 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 19:37:48 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:9fef660,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 19:37:48 UTC +00:00]]
D, [2015-01-01T19:37:48.386983 #10344] DEBUG -- :   [1m[35m (109.2ms)[0m  commit transaction
D, [2015-01-01T19:37:48.512784 #10344] DEBUG -- :   [1m[36mLineItem Load (16.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T19:37:48.606384 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T19:37:48.715584 #10344]  INFO -- :   Rendered carts/_cart.html.erb (235.0ms)
I, [2015-01-01T19:37:48.762384 #10344]  INFO -- :   Rendered line_items/create.js.erb (297.4ms)
I, [2015-01-01T19:37:48.809184 #10344]  INFO -- : Completed 200 OK in 1642ms (Views: 358.8ms | ActiveRecord: 157.0ms)
D, [2015-01-01T19:37:48.840384 #10344] DEBUG -- : 
D, [2015-01-01T19:37:48.855984 #10344] DEBUG -- : 
I, [2015-01-01T19:37:48.920587 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 19:37:48 +0000
I, [2015-01-01T19:37:49.046594 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:37:49.097597 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T19:37:49.172602 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:37:49.244606 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-01T19:37:49.343611 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T19:37:49.439617 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T19:37:49.479619 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-01T19:37:49.653629 #10344] DEBUG -- :   [1m[36mSQL (8.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 19:37:49 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:82b79a8,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 19:37:49 UTC +00:00]]
D, [2015-01-01T19:37:49.794637 #10344] DEBUG -- :   [1m[35m (101.0ms)[0m  commit transaction
D, [2015-01-01T19:37:49.912243 #10344] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-01T19:37:50.021443 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
I, [2015-01-01T19:37:50.083843 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (109.2ms)
I, [2015-01-01T19:37:50.161843 #10344]  INFO -- :   Rendered carts/_cart.html.erb (294.0ms)
I, [2015-01-01T19:37:50.208643 #10344]  INFO -- :   Rendered line_items/create.js.erb (351.8ms)
I, [2015-01-01T19:37:50.255444 #10344]  INFO -- : Completed 200 OK in 1109ms (Views: 408.0ms | ActiveRecord: 121.0ms)
D, [2015-01-01T19:37:50.302244 #10344] DEBUG -- : 
D, [2015-01-01T19:37:50.319844 #10344] DEBUG -- : 
I, [2015-01-01T19:37:50.368847 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 19:37:50 +0000
I, [2015-01-01T19:37:50.510855 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T19:37:50.633862 #10344] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T19:37:50.819872 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T19:37:50.890876 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:37:51.078887 #10344] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T19:37:51.207895 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T19:37:54.096508 #10344] DEBUG -- :   [1m[36m (15.6ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:37:54.470908 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 01 Jan 2015 19:37:54 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 19:37:54 UTC +00:00]]
D, [2015-01-01T19:37:54.642508 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 69[0m  [["cart_id", nil], ["order_id", 59], ["updated_at", Thu, 01 Jan 2015 19:37:54 UTC +00:00]]
D, [2015-01-01T19:37:54.798509 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 70  [["cart_id", nil], ["order_id", 59], ["updated_at", Thu, 01 Jan 2015 19:37:54 UTC +00:00]]
I, [2015-01-01T19:37:54.845309 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T19:37:54.938909 #10344] DEBUG -- :   [1m[36m (31.2ms)[0m  [1mrollback transaction[0m
I, [2015-01-01T19:37:55.001309 #10344]  INFO -- : Completed 500 Internal Server Error in 4442ms
F, [2015-01-01T19:37:55.172909 #10344] FATAL -- : 
SyntaxError (c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:61: syntax error, unexpected tIDENTIFIER, expecting '}'):
  app/models/order.rb:41:in `create_payment'
  app/controllers/orders_controller.rb:155:in `ppcheckout'


I, [2015-01-01T19:37:55.516110 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (15.6ms)
I, [2015-01-01T19:37:55.656510 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (15.6ms)
I, [2015-01-01T19:37:55.796911 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (15.6ms)
I, [2015-01-01T19:37:55.874911 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (436.8ms)
D, [2015-01-01T19:37:55.977313 #10344] DEBUG -- : 
D, [2015-01-01T19:37:55.994314 #10344] DEBUG -- : 
I, [2015-01-01T19:37:56.042317 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 19:37:55 +0000
I, [2015-01-01T19:37:56.155323 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T19:37:56.242328 #10344] DEBUG -- :   [1m[35mUser Load (3.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T19:37:56.306332 #10344] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T19:37:56.369335 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:37:56.462341 #10344] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T19:37:56.576347 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T19:37:59.508515 #10344] DEBUG -- :   [1m[35m (3.0ms)[0m  begin transaction
D, [2015-01-01T19:37:59.620521 #10344] DEBUG -- :   [1m[36mSQL (8.0ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 19:37:59 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 19:37:59 UTC +00:00]]
D, [2015-01-01T19:37:59.749529 #10344] DEBUG -- :   [1m[35mSQL (5.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 69  [["cart_id", nil], ["order_id", 59], ["updated_at", Thu, 01 Jan 2015 19:37:59 UTC +00:00]]
D, [2015-01-01T19:37:59.878536 #10344] DEBUG -- :   [1m[36mSQL (3.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 70[0m  [["cart_id", nil], ["order_id", 59], ["updated_at", Thu, 01 Jan 2015 19:37:59 UTC +00:00]]
I, [2015-01-01T19:37:59.908538 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T19:37:59.984542 #10344] DEBUG -- :   [1m[35m (26.0ms)[0m  rollback transaction
I, [2015-01-01T19:38:00.033545 #10344]  INFO -- : Completed 500 Internal Server Error in 3843ms
F, [2015-01-01T19:38:00.173553 #10344] FATAL -- : 
SyntaxError (c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:61: syntax error, unexpected tIDENTIFIER, expecting '}'):
  app/models/order.rb:41:in `create_payment'
  app/controllers/orders_controller.rb:155:in `ppcheckout'


I, [2015-01-01T19:38:00.498572 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (14.0ms)
I, [2015-01-01T19:38:00.624579 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (20.0ms)
I, [2015-01-01T19:38:00.746586 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (13.0ms)
I, [2015-01-01T19:38:00.827590 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (376.0ms)
D, [2015-01-01T19:38:14.147872 #10344] DEBUG -- : 
D, [2015-01-01T19:38:14.180072 #10344] DEBUG -- : 
I, [2015-01-01T19:38:14.222074 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 19:38:14 +0000
I, [2015-01-01T19:38:14.373083 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T19:38:14.473088 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:38:14.591095 #10344] DEBUG -- :   [1m[35mProduct Load (3.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T19:38:14.683100 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (4.0ms)
I, [2015-01-01T19:38:14.744104 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (179.0ms)
D, [2015-01-01T19:38:15.030120 #10344] DEBUG -- :   [1m[36mLineItem Exists (3.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T19:38:15.139126 #10344] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-01T19:38:15.275134 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T19:38:15.412142 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-01T19:38:15.481146 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (277.0ms)
I, [2015-01-01T19:38:15.570151 #10344]  INFO -- :   Rendered carts/_cart.html.erb (482.0ms)
I, [2015-01-01T19:38:15.655156 #10344]  INFO -- : Completed 200 OK in 1225ms (Views: 1103.1ms | ActiveRecord: 14.0ms)
D, [2015-01-01T19:38:15.901170 #10344] DEBUG -- : 
D, [2015-01-01T19:38:15.956173 #10344] DEBUG -- : 
I, [2015-01-01T19:38:16.032178 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 19:38:15 +0000
D, [2015-01-01T19:38:16.117182 #10344] DEBUG -- : 
D, [2015-01-01T19:38:16.143184 #10344] DEBUG -- : 
I, [2015-01-01T19:38:16.204187 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 19:38:16 +0000
D, [2015-01-01T19:38:16.284192 #10344] DEBUG -- : 
D, [2015-01-01T19:38:16.308193 #10344] DEBUG -- : 
I, [2015-01-01T19:38:16.376197 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 19:38:16 +0000
D, [2015-01-01T19:38:16.452202 #10344] DEBUG -- : 
D, [2015-01-01T19:38:16.478203 #10344] DEBUG -- : 
I, [2015-01-01T19:38:16.551207 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 19:38:16 +0000
D, [2015-01-01T19:38:16.633212 #10344] DEBUG -- : 
D, [2015-01-01T19:38:16.660213 #10344] DEBUG -- : 
I, [2015-01-01T19:38:16.725217 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 19:38:16 +0000
D, [2015-01-01T19:38:16.802222 #10344] DEBUG -- : 
D, [2015-01-01T19:38:16.827223 #10344] DEBUG -- : 
I, [2015-01-01T19:38:16.891227 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 19:38:16 +0000
D, [2015-01-01T19:38:16.969231 #10344] DEBUG -- : 
D, [2015-01-01T19:38:16.997233 #10344] DEBUG -- : 
I, [2015-01-01T19:38:17.062236 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 19:38:16 +0000
D, [2015-01-01T19:38:17.146241 #10344] DEBUG -- : 
D, [2015-01-01T19:38:17.170243 #10344] DEBUG -- : 
I, [2015-01-01T19:38:17.234246 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 19:38:17 +0000
D, [2015-01-01T19:38:17.317251 #10344] DEBUG -- : 
D, [2015-01-01T19:38:17.343253 #10344] DEBUG -- : 
I, [2015-01-01T19:38:17.405256 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 19:38:17 +0000
D, [2015-01-01T19:38:17.483261 #10344] DEBUG -- : 
D, [2015-01-01T19:38:17.507262 #10344] DEBUG -- : 
I, [2015-01-01T19:38:17.575266 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 19:38:17 +0000
D, [2015-01-01T19:38:17.675272 #10344] DEBUG -- : 
D, [2015-01-01T19:38:17.702273 #10344] DEBUG -- : 
I, [2015-01-01T19:38:17.775277 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 19:38:17 +0000
D, [2015-01-01T19:38:17.860282 #10344] DEBUG -- : 
D, [2015-01-01T19:38:17.885284 #10344] DEBUG -- : 
I, [2015-01-01T19:38:17.950287 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 19:38:17 +0000
D, [2015-01-01T19:38:18.028292 #10344] DEBUG -- : 
D, [2015-01-01T19:38:18.056293 #10344] DEBUG -- : 
I, [2015-01-01T19:38:18.124297 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 19:38:18 +0000
D, [2015-01-01T19:38:18.197301 #10344] DEBUG -- : 
D, [2015-01-01T19:38:18.231303 #10344] DEBUG -- : 
I, [2015-01-01T19:38:18.299307 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 19:38:18 +0000
D, [2015-01-01T19:38:18.384312 #10344] DEBUG -- : 
D, [2015-01-01T19:38:18.408313 #10344] DEBUG -- : 
I, [2015-01-01T19:38:18.473317 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 19:38:18 +0000
D, [2015-01-01T19:38:18.549322 #10344] DEBUG -- : 
D, [2015-01-01T19:38:18.577323 #10344] DEBUG -- : 
I, [2015-01-01T19:38:18.648327 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 19:38:18 +0000
D, [2015-01-01T19:38:18.732332 #10344] DEBUG -- : 
D, [2015-01-01T19:38:18.763334 #10344] DEBUG -- : 
I, [2015-01-01T19:38:18.834338 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 19:38:18 +0000
D, [2015-01-01T19:38:18.907342 #10344] DEBUG -- : 
D, [2015-01-01T19:38:18.935344 #10344] DEBUG -- : 
I, [2015-01-01T19:38:18.992347 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 19:38:18 +0000
D, [2015-01-01T19:38:19.068351 #10344] DEBUG -- : 
D, [2015-01-01T19:38:19.095353 #10344] DEBUG -- : 
I, [2015-01-01T19:38:19.161357 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 19:38:19 +0000
D, [2015-01-01T19:38:19.242361 #10344] DEBUG -- : 
D, [2015-01-01T19:38:19.269363 #10344] DEBUG -- : 
I, [2015-01-01T19:38:19.330366 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 19:38:19 +0000
D, [2015-01-01T19:38:19.420371 #10344] DEBUG -- : 
D, [2015-01-01T19:38:19.442373 #10344] DEBUG -- : 
I, [2015-01-01T19:38:19.504376 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 19:38:19 +0000
D, [2015-01-01T19:38:19.593381 #10344] DEBUG -- : 
D, [2015-01-01T19:38:19.620383 #10344] DEBUG -- : 
I, [2015-01-01T19:38:19.690387 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 19:38:19 +0000
D, [2015-01-01T19:38:19.774392 #10344] DEBUG -- : 
D, [2015-01-01T19:38:19.801393 #10344] DEBUG -- : 
I, [2015-01-01T19:38:19.872397 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 19:38:19 +0000
D, [2015-01-01T19:38:19.967403 #10344] DEBUG -- : 
D, [2015-01-01T19:38:19.991404 #10344] DEBUG -- : 
I, [2015-01-01T19:38:20.102410 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 19:38:19 +0000
D, [2015-01-01T19:38:20.185415 #10344] DEBUG -- : 
D, [2015-01-01T19:38:20.214417 #10344] DEBUG -- : 
I, [2015-01-01T19:38:20.287421 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 19:38:20 +0000
D, [2015-01-01T19:38:20.368426 #10344] DEBUG -- : 
D, [2015-01-01T19:38:20.393427 #10344] DEBUG -- : 
I, [2015-01-01T19:38:20.456431 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 19:38:20 +0000
D, [2015-01-01T19:38:20.571437 #10344] DEBUG -- : 
D, [2015-01-01T19:38:20.605439 #10344] DEBUG -- : 
I, [2015-01-01T19:38:20.691444 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 19:38:20 +0000
D, [2015-01-01T19:38:20.764448 #10344] DEBUG -- : 
D, [2015-01-01T19:38:20.785449 #10344] DEBUG -- : 
I, [2015-01-01T19:38:20.841453 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 19:38:20 +0000
D, [2015-01-01T19:38:20.919457 #10344] DEBUG -- : 
D, [2015-01-01T19:38:20.941458 #10344] DEBUG -- : 
I, [2015-01-01T19:38:21.031464 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 19:38:20 +0000
D, [2015-01-01T19:38:21.110468 #10344] DEBUG -- : 
D, [2015-01-01T19:38:21.133469 #10344] DEBUG -- : 
I, [2015-01-01T19:38:21.191473 #10344]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-01 19:38:21 +0000
D, [2015-01-01T19:38:24.312491 #10344] DEBUG -- : 
D, [2015-01-01T19:38:24.343691 #10344] DEBUG -- : 
I, [2015-01-01T19:38:24.406091 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 19:38:24 +0000
I, [2015-01-01T19:38:24.499691 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:38:24.578092 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T19:38:24.671693 #10344] DEBUG -- :   [1m[36mCart Load (15.6ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:38:24.765293 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-01T19:38:24.874493 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T19:38:24.921293 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T19:38:25.030493 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = 70[0m  [["quantity", 2], ["updated_at", Thu, 01 Jan 2015 19:38:24 UTC +00:00]]
D, [2015-01-01T19:38:25.391695 #10344] DEBUG -- :   [1m[35m (314.4ms)[0m  commit transaction
D, [2015-01-01T19:38:25.511297 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-01T19:38:25.628898 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-01T19:38:25.755099 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-01T19:38:25.833099 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (259.4ms)
I, [2015-01-01T19:38:25.926700 #10344]  INFO -- :   Rendered carts/_cart.html.erb (457.0ms)
I, [2015-01-01T19:38:25.973500 #10344]  INFO -- :   Rendered line_items/create.js.erb (519.4ms)
I, [2015-01-01T19:38:26.028300 #10344]  INFO -- : Completed 200 OK in 1395ms (Views: 581.8ms | ActiveRecord: 345.6ms)
D, [2015-01-01T19:38:26.075100 #10344] DEBUG -- : 
D, [2015-01-01T19:38:26.101701 #10344] DEBUG -- : 
I, [2015-01-01T19:38:26.176705 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 19:38:26 +0000
I, [2015-01-01T19:38:26.284711 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T19:38:26.354715 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T19:38:26.446721 #10344] DEBUG -- :   [1m[35mCart Load (3.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:38:26.537726 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-01T19:38:26.652732 #10344] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T19:38:26.701735 #10344] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:38:26.837743 #10344] DEBUG -- :   [1m[35mSQL (8.0ms)[0m  UPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = 69  [["quantity", 2], ["updated_at", Thu, 01 Jan 2015 19:38:26 UTC +00:00]]
D, [2015-01-01T19:38:27.030754 #10344] DEBUG -- :   [1m[36m (131.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T19:38:27.142959 #10344] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-01T19:38:27.259961 #10344] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T19:38:27.384761 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-01T19:38:27.447161 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (241.8ms)
I, [2015-01-01T19:38:27.531162 #10344]  INFO -- :   Rendered carts/_cart.html.erb (405.6ms)
I, [2015-01-01T19:38:27.564362 #10344]  INFO -- :   Rendered line_items/create.js.erb (468.4ms)
I, [2015-01-01T19:38:27.612162 #10344]  INFO -- : Completed 200 OK in 1208ms (Views: 523.6ms | ActiveRecord: 152.0ms)
D, [2015-01-01T19:38:28.194592 #10344] DEBUG -- : 
D, [2015-01-01T19:38:28.218593 #10344] DEBUG -- : 
I, [2015-01-01T19:38:28.272597 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 19:38:28 +0000
I, [2015-01-01T19:38:28.379603 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T19:38:28.470608 #10344] DEBUG -- :   [1m[36mUser Load (4.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T19:38:28.562613 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T19:38:28.648618 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:38:28.742822 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T19:38:28.867622 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T19:38:33.810434 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:38:33.950834 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 01 Jan 2015 19:38:33 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 19:38:33 UTC +00:00]]
D, [2015-01-01T19:38:34.108835 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 69[0m  [["cart_id", nil], ["order_id", 59], ["updated_at", Thu, 01 Jan 2015 19:38:33 UTC +00:00]]
D, [2015-01-01T19:38:34.264835 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 70  [["cart_id", nil], ["order_id", 59], ["updated_at", Thu, 01 Jan 2015 19:38:34 UTC +00:00]]
I, [2015-01-01T19:38:34.311635 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T19:38:34.389635 #10344] DEBUG -- :   [1m[36m (15.6ms)[0m  [1mrollback transaction[0m
I, [2015-01-01T19:38:34.436435 #10344]  INFO -- : Completed 500 Internal Server Error in 6008ms
F, [2015-01-01T19:38:34.608035 #10344] FATAL -- : 
SyntaxError (c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:61: syntax error, unexpected tIDENTIFIER, expecting '}'):
  app/models/order.rb:41:in `create_payment'
  app/controllers/orders_controller.rb:155:in `ppcheckout'


I, [2015-01-01T19:38:34.966836 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (15.6ms)
I, [2015-01-01T19:38:35.107236 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (31.2ms)
I, [2015-01-01T19:38:35.232036 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (15.6ms)
I, [2015-01-01T19:38:35.325637 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (405.6ms)
D, [2015-01-01T19:38:35.417038 #10344] DEBUG -- : 
D, [2015-01-01T19:38:35.436039 #10344] DEBUG -- : 
I, [2015-01-01T19:38:35.486042 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 19:38:35 +0000
I, [2015-01-01T19:38:35.598049 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T19:38:35.673053 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T19:38:35.747057 #10344] DEBUG -- :   [1m[36mUser Load (3.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T19:38:35.823062 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T19:38:35.920067 #10344] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T19:38:36.047074 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T19:38:37.871179 #10344] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2015-01-01T19:38:37.988185 #10344] DEBUG -- :   [1m[36mSQL (8.0ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 19:38:37 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 19:38:37 UTC +00:00]]
D, [2015-01-01T19:38:38.120193 #10344] DEBUG -- :   [1m[35mSQL (5.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 69  [["cart_id", nil], ["order_id", 59], ["updated_at", Thu, 01 Jan 2015 19:38:38 UTC +00:00]]
D, [2015-01-01T19:38:38.246200 #10344] DEBUG -- :   [1m[36mSQL (4.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 70[0m  [["cart_id", nil], ["order_id", 59], ["updated_at", Thu, 01 Jan 2015 19:38:38 UTC +00:00]]
I, [2015-01-01T19:38:38.279202 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T19:38:38.343206 #10344] DEBUG -- :   [1m[35m (12.0ms)[0m  rollback transaction
I, [2015-01-01T19:38:38.383208 #10344]  INFO -- : Completed 500 Internal Server Error in 2747ms
F, [2015-01-01T19:38:38.523216 #10344] FATAL -- : 
SyntaxError (c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:61: syntax error, unexpected tIDENTIFIER, expecting '}'):
  app/models/order.rb:41:in `create_payment'
  app/controllers/orders_controller.rb:155:in `ppcheckout'


I, [2015-01-01T19:38:38.882237 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (16.0ms)
I, [2015-01-01T19:38:39.006244 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (21.0ms)
I, [2015-01-01T19:38:39.133251 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (14.0ms)
I, [2015-01-01T19:38:39.206255 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (384.0ms)
D, [2015-01-01T19:40:04.980701 #10344] DEBUG -- : 
D, [2015-01-01T19:40:05.004702 #10344] DEBUG -- : 
I, [2015-01-01T19:40:05.054705 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 19:40:05 +0000
I, [2015-01-01T19:40:08.251888 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T19:40:08.404897 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:40:08.678913 #10344] DEBUG -- :   [1m[35mProduct Load (3.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T19:40:08.960929 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (5.0ms)
I, [2015-01-01T19:40:09.010932 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (357.0ms)
D, [2015-01-01T19:40:09.392953 #10344] DEBUG -- :   [1m[36mLineItem Exists (3.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T19:40:09.485959 #10344] DEBUG -- :   [1m[35mLineItem Load (4.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-01T19:40:09.831978 #10344] DEBUG -- :   [1m[36mProduct Load (4.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T19:40:09.949985 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-01T19:40:10.032990 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (260.0ms)
I, [2015-01-01T19:40:10.156997 #10344]  INFO -- :   Rendered carts/_cart.html.erb (714.0ms)
I, [2015-01-01T19:40:10.238002 #10344]  INFO -- : Completed 200 OK in 1935ms (Views: 1577.1ms | ActiveRecord: 43.0ms)
D, [2015-01-01T19:40:10.462015 #10344] DEBUG -- : 
D, [2015-01-01T19:40:10.542019 #10344] DEBUG -- : 
I, [2015-01-01T19:40:10.594022 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 19:40:10 +0000
D, [2015-01-01T19:40:10.683027 #10344] DEBUG -- : 
D, [2015-01-01T19:40:10.708029 #10344] DEBUG -- : 
I, [2015-01-01T19:40:10.762032 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 19:40:10 +0000
D, [2015-01-01T19:40:10.844036 #10344] DEBUG -- : 
D, [2015-01-01T19:40:10.866038 #10344] DEBUG -- : 
I, [2015-01-01T19:40:10.919041 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 19:40:10 +0000
D, [2015-01-01T19:40:11.020046 #10344] DEBUG -- : 
D, [2015-01-01T19:40:11.040048 #10344] DEBUG -- : 
I, [2015-01-01T19:40:11.101051 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 19:40:11 +0000
D, [2015-01-01T19:40:11.184056 #10344] DEBUG -- : 
D, [2015-01-01T19:40:11.204057 #10344] DEBUG -- : 
I, [2015-01-01T19:40:11.257060 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 19:40:11 +0000
D, [2015-01-01T19:40:11.359066 #10344] DEBUG -- : 
D, [2015-01-01T19:40:11.380067 #10344] DEBUG -- : 
I, [2015-01-01T19:40:11.434070 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 19:40:11 +0000
D, [2015-01-01T19:40:11.517075 #10344] DEBUG -- : 
D, [2015-01-01T19:40:11.541076 #10344] DEBUG -- : 
I, [2015-01-01T19:40:11.595079 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 19:40:11 +0000
D, [2015-01-01T19:40:11.684084 #10344] DEBUG -- : 
D, [2015-01-01T19:40:11.707086 #10344] DEBUG -- : 
I, [2015-01-01T19:40:11.769089 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 19:40:11 +0000
D, [2015-01-01T19:40:11.851094 #10344] DEBUG -- : 
D, [2015-01-01T19:40:11.872095 #10344] DEBUG -- : 
I, [2015-01-01T19:40:11.920098 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 19:40:11 +0000
D, [2015-01-01T19:40:12.018104 #10344] DEBUG -- : 
D, [2015-01-01T19:40:12.043105 #10344] DEBUG -- : 
I, [2015-01-01T19:40:12.096108 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 19:40:12 +0000
D, [2015-01-01T19:40:12.177113 #10344] DEBUG -- : 
D, [2015-01-01T19:40:12.197114 #10344] DEBUG -- : 
I, [2015-01-01T19:40:12.249117 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 19:40:12 +0000
D, [2015-01-01T19:40:12.335122 #10344] DEBUG -- : 
D, [2015-01-01T19:40:12.356123 #10344] DEBUG -- : 
I, [2015-01-01T19:40:12.408126 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 19:40:12 +0000
D, [2015-01-01T19:40:12.502131 #10344] DEBUG -- : 
D, [2015-01-01T19:40:12.534133 #10344] DEBUG -- : 
I, [2015-01-01T19:40:12.589136 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 19:40:12 +0000
D, [2015-01-01T19:40:12.672141 #10344] DEBUG -- : 
D, [2015-01-01T19:40:12.698142 #10344] DEBUG -- : 
I, [2015-01-01T19:40:12.760146 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 19:40:12 +0000
D, [2015-01-01T19:40:12.836150 #10344] DEBUG -- : 
D, [2015-01-01T19:40:12.860152 #10344] DEBUG -- : 
I, [2015-01-01T19:40:12.925155 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 19:40:12 +0000
D, [2015-01-01T19:40:13.004160 #10344] DEBUG -- : 
D, [2015-01-01T19:40:13.031161 #10344] DEBUG -- : 
I, [2015-01-01T19:40:13.100165 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 19:40:13 +0000
D, [2015-01-01T19:40:13.177170 #10344] DEBUG -- : 
D, [2015-01-01T19:40:13.201171 #10344] DEBUG -- : 
I, [2015-01-01T19:40:13.265175 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 19:40:13 +0000
D, [2015-01-01T19:40:13.341179 #10344] DEBUG -- : 
D, [2015-01-01T19:40:13.369181 #10344] DEBUG -- : 
I, [2015-01-01T19:40:13.439185 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 19:40:13 +0000
D, [2015-01-01T19:40:13.522190 #10344] DEBUG -- : 
D, [2015-01-01T19:40:13.557192 #10344] DEBUG -- : 
I, [2015-01-01T19:40:13.619195 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 19:40:13 +0000
D, [2015-01-01T19:40:13.701200 #10344] DEBUG -- : 
D, [2015-01-01T19:40:13.726201 #10344] DEBUG -- : 
I, [2015-01-01T19:40:13.788205 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 19:40:13 +0000
D, [2015-01-01T19:40:13.865209 #10344] DEBUG -- : 
D, [2015-01-01T19:40:13.889211 #10344] DEBUG -- : 
I, [2015-01-01T19:40:13.951214 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 19:40:13 +0000
D, [2015-01-01T19:40:14.042219 #10344] DEBUG -- : 
D, [2015-01-01T19:40:14.065221 #10344] DEBUG -- : 
I, [2015-01-01T19:40:14.135225 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 19:40:14 +0000
D, [2015-01-01T19:40:14.211229 #10344] DEBUG -- : 
D, [2015-01-01T19:40:14.234230 #10344] DEBUG -- : 
I, [2015-01-01T19:40:14.301234 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 19:40:14 +0000
D, [2015-01-01T19:40:14.376238 #10344] DEBUG -- : 
D, [2015-01-01T19:40:14.404240 #10344] DEBUG -- : 
I, [2015-01-01T19:40:14.470244 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 19:40:14 +0000
D, [2015-01-01T19:40:14.548248 #10344] DEBUG -- : 
D, [2015-01-01T19:40:14.572250 #10344] DEBUG -- : 
I, [2015-01-01T19:40:14.631253 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 19:40:14 +0000
D, [2015-01-01T19:40:14.713258 #10344] DEBUG -- : 
D, [2015-01-01T19:40:14.737259 #10344] DEBUG -- : 
I, [2015-01-01T19:40:14.809263 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 19:40:14 +0000
D, [2015-01-01T19:40:14.925270 #10344] DEBUG -- : 
D, [2015-01-01T19:40:14.960272 #10344] DEBUG -- : 
I, [2015-01-01T19:40:15.043277 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 19:40:14 +0000
D, [2015-01-01T19:40:15.121281 #10344] DEBUG -- : 
D, [2015-01-01T19:40:15.146282 #10344] DEBUG -- : 
I, [2015-01-01T19:40:15.206286 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 19:40:15 +0000
D, [2015-01-01T19:40:15.287291 #10344] DEBUG -- : 
D, [2015-01-01T19:40:15.314292 #10344] DEBUG -- : 
I, [2015-01-01T19:40:15.383296 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 19:40:15 +0000
D, [2015-01-01T19:40:15.461300 #10344] DEBUG -- : 
D, [2015-01-01T19:40:15.489302 #10344] DEBUG -- : 
I, [2015-01-01T19:40:15.557306 #10344]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-01 19:40:15 +0000
D, [2015-01-01T19:47:36.647630 #10344] DEBUG -- : 
D, [2015-01-01T19:47:36.665631 #10344] DEBUG -- : 
I, [2015-01-01T19:47:36.722634 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 19:47:36 +0000
I, [2015-01-01T19:47:36.883643 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T19:47:37.053653 #10344] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T19:47:37.269665 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T19:47:37.347670 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:47:37.514679 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T19:47:37.667688 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T19:47:42.154673 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:47:42.560274 #10344] DEBUG -- :   [1m[35mSQL (31.2ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 01 Jan 2015 19:47:42 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 19:47:42 UTC +00:00]]
D, [2015-01-01T19:47:42.685074 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 69[0m  [["cart_id", nil], ["order_id", 59], ["updated_at", Thu, 01 Jan 2015 19:47:42 UTC +00:00]]
D, [2015-01-01T19:47:42.794274 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 70  [["cart_id", nil], ["order_id", 59], ["updated_at", Thu, 01 Jan 2015 19:47:42 UTC +00:00]]
I, [2015-01-01T19:47:42.841074 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T19:47:55.627519 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T19:47:55.736719 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T19:47:57.251922 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 59]]
I, [2015-01-01T19:49:05.648872 #10344]  INFO -- : in order=
I, [2015-01-01T19:49:05.680072 #10344]  INFO -- : in payment.create
I, [2015-01-01T19:49:05.993073 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"77.96"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"77.96", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}, {:amount=>{:total=>#<BigDecimal:865b528,'0.7796E2',18(27)>, :currency=>"GBP"}, :item_list=>{:items=>{:name=>"penknife", :sku=>"PK1", :price=>14.99, :currency=>"GBP", :quantity=>1}}, :description=>"King Clothing"}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/59/confirm", "cancel_url"=>"http://localhost:3000/orders/59/cancel"}}
I, [2015-01-01T19:49:06.852074 #10344]  INFO -- : #<ActiveModel::Errors:0x00000009934870 @base=#<Payment:0x00000009e35b08 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009e34848 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008679dc0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000086796e0 @error=nil, @total="77.96", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008678100 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008673420 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="77.96", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:amount=>{:total=>#<BigDecimal:865b528,'0.7796E2',18(27)>, :currency=>"GBP"}, :item_list=>{:items=>{:name=>"penknife", :sku=>"PK1", :price=>14.99, :currency=>"GBP", :quantity=>1}}, :description=>"King Clothing"}, #<PayPal::SDK::REST::DataTypes::Transaction:0x0000000462eec8 @error=nil>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000099d4d98 @error=nil, @return_url="http://localhost:3000/orders/59/confirm", @cancel_url="http://localhost:3000/orders/59/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009934870 ...>>, @messages={}>
I, [2015-01-01T19:49:06.883275 #10344]  INFO -- : got past invalid
I, [2015-01-01T19:49:06.992475 #10344]  INFO -- : PayPal-Request-Id: 76f38daa-b41f-4d74-90e8-b26d778ebf1e
I, [2015-01-01T19:49:07.040275 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T19:49:08.085477 #10344]  INFO -- : Response[400]: Bad Request, Duration: 1.014s
I, [2015-01-01T19:49:08.116677 #10344]  INFO -- : back from super
I, [2015-01-01T19:49:08.366277 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"77.96"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"77.96", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}, {:amount=>{:total=>#<BigDecimal:865b528,'0.7796E2',18(27)>, :currency=>"GBP"}, :item_list=>{:items=>{:name=>"penknife", :sku=>"PK1", :price=>14.99, :currency=>"GBP", :quantity=>1}}, :description=>"King Clothing"}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/59/confirm", "cancel_url"=>"http://localhost:3000/orders/59/cancel"}}
I, [2015-01-01T19:59:27.293952 #10344]  INFO -- : @payment save just done
I, [2015-01-01T19:59:28.059353 #10344]  INFO -- : #<Payment:0x00000009e35b08 @error={"name"=>"MALFORMED_REQUEST", "message"=>"Incoming JSON request does not map to API request", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#MALFORMED_REQUEST", "debug_id"=>"f8c28b4a93d25"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009e34848 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008679dc0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000086796e0 @error=nil, @total="77.96", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008678100 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008673420 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="77.96", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:amount=>{:total=>#<BigDecimal:865b528,'0.7796E2',18(27)>, :currency=>"GBP"}, :item_list=>{:items=>{:name=>"penknife", :sku=>"PK1", :price=>14.99, :currency=>"GBP", :quantity=>1}}, :description=>"King Clothing"}, #<PayPal::SDK::REST::DataTypes::Transaction:0x0000000462eec8 @error=nil>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000099d4d98 @error=nil, @return_url="http://localhost:3000/orders/59/confirm", @cancel_url="http://localhost:3000/orders/59/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009934870 @base=#<Payment:0x00000009e35b08 ...>, @messages={}>, @request_id="76f38daa-b41f-4d74-90e8-b26d778ebf1e", @header={}>
I, [2015-01-01T19:59:28.811155 #10344]  INFO -- : #<Payment:0x00000009e35b08 @error={"name"=>"MALFORMED_REQUEST", "message"=>"Incoming JSON request does not map to API request", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#MALFORMED_REQUEST", "debug_id"=>"f8c28b4a93d25"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009e34848 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008679dc0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000086796e0 @error=nil, @total="77.96", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008678100 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008673420 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="77.96", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:amount=>{:total=>#<BigDecimal:865b528,'0.7796E2',18(27)>, :currency=>"GBP"}, :item_list=>{:items=>{:name=>"penknife", :sku=>"PK1", :price=>14.99, :currency=>"GBP", :quantity=>1}}, :description=>"King Clothing"}, #<PayPal::SDK::REST::DataTypes::Transaction:0x0000000462eec8 @error=nil>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000099d4d98 @error=nil, @return_url="http://localhost:3000/orders/59/confirm", @cancel_url="http://localhost:3000/orders/59/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009934870 @base=#<Payment:0x00000009e35b08 ...>, @messages={}>, @request_id="76f38daa-b41f-4d74-90e8-b26d778ebf1e", @header={}>
D, [2015-01-01T19:59:28.951555 #10344] DEBUG -- :   [1m[35m (93.6ms)[0m  commit transaction
I, [2015-01-01T19:59:28.982755 #10344]  INFO -- : about to approve url
I, [2015-01-01T19:59:29.747156 #10344]  INFO -- : #<Payment:0x00000009e35b08 @error={"name"=>"MALFORMED_REQUEST", "message"=>"Incoming JSON request does not map to API request", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#MALFORMED_REQUEST", "debug_id"=>"f8c28b4a93d25"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009e34848 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008679dc0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000086796e0 @error=nil, @total="77.96", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008678100 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008673420 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="77.96", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:amount=>{:total=>#<BigDecimal:865b528,'0.7796E2',18(27)>, :currency=>"GBP"}, :item_list=>{:items=>{:name=>"penknife", :sku=>"PK1", :price=>14.99, :currency=>"GBP", :quantity=>1}}, :description=>"King Clothing"}, #<PayPal::SDK::REST::DataTypes::Transaction:0x0000000462eec8 @error=nil>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000099d4d98 @error=nil, @return_url="http://localhost:3000/orders/59/confirm", @cancel_url="http://localhost:3000/orders/59/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009934870 @base=#<Payment:0x00000009e35b08 ...>, @messages={}>, @request_id="76f38daa-b41f-4d74-90e8-b26d778ebf1e", @header={}>
I, [2015-01-01T19:59:29.793956 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T19:59:29.840757 #10344]  INFO -- : Completed 302 Found in 712925ms (ActiveRecord: 149.8ms)
D, [2015-01-01T19:59:29.887557 #10344] DEBUG -- : 
D, [2015-01-01T19:59:29.903157 #10344] DEBUG -- : 
I, [2015-01-01T19:59:29.965557 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 19:59:29 +0000
I, [2015-01-01T19:59:32.215961 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T19:59:32.325161 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T19:59:32.512361 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T19:59:32.621562 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T19:59:32.902362 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T19:59:32.980362 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T19:59:34.555965 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T19:59:34.884566 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 01 Jan 2015 19:59:34 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 19:59:34 UTC +00:00]]
I, [2015-01-01T19:59:34.915766 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T19:59:35.979568 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 60]]
D, [2015-01-01T19:59:40.489976 #10344] DEBUG -- :   [1m[35m (15.6ms)[0m  SELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 60]]
W, [2015-01-01T19:59:40.536776 #10344]  WARN -- : undefined method `item_list' for #<PayPal::SDK::Core::API::DataTypes::ArrayWithBlock:0x0000000a0b3da8>
I, [2015-01-01T19:59:40.567976 #10344]  INFO -- : in payment.create
I, [2015-01-01T19:59:40.661576 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"0"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"0", "name"=>"Tee Shirts", "price"=>"0", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}]}
I, [2015-01-01T19:59:40.973576 #10344]  INFO -- : #<ActiveModel::Errors:0x0000000a017ca0 @base=#<Payment:0x0000000594a6d8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005948608 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a0b3420 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a0b2c28 @error=nil, @total="0", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a0b1670 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a0b05b8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="0", @currency="GBP", @quantity="0">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000a017ca0 ...>>, @messages={}>
I, [2015-01-01T19:59:40.989177 #10344]  INFO -- : got past invalid
I, [2015-01-01T19:59:41.067177 #10344]  INFO -- : PayPal-Request-Id: 2ef29b22-d89c-4ced-950c-763a386e110d
I, [2015-01-01T19:59:41.113977 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T19:59:42.096778 #10344]  INFO -- : Response[400]: Bad Request, Duration: 0.936s
I, [2015-01-01T19:59:42.127979 #10344]  INFO -- :  in error=
I, [2015-01-01T19:59:42.159179 #10344]  INFO -- :  in error=
I, [2015-01-01T19:59:42.190379 #10344]  INFO -- : back from super
I, [2015-01-01T19:59:42.361979 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"0"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"0", "name"=>"Tee Shirts", "price"=>"0", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}]}
I, [2015-01-01T20:00:15.118838 #10344]  INFO -- : @payment save just done
I, [2015-01-01T20:00:15.820839 #10344]  INFO -- : #<Payment:0x0000000594a6d8 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions[0].item_list.items[0].quantity", "issue"=>"Must be a positive integer"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"0616a10c742ed"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005948608 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a0b3420 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a0b2c28 @error=nil, @total="0", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a0b1670 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a0b05b8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="0", @currency="GBP", @quantity="0">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000a017ca0 @base=#<Payment:0x0000000594a6d8 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :"transactions[0].item_list.items[0].quantity"=>["Must be a positive integer"]}>, @request_id="2ef29b22-d89c-4ced-950c-763a386e110d", @header={}>
I, [2015-01-01T20:00:16.399040 #10344]  INFO -- : #<Payment:0x0000000594a6d8 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions[0].item_list.items[0].quantity", "issue"=>"Must be a positive integer"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"0616a10c742ed"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005948608 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a0b3420 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a0b2c28 @error=nil, @total="0", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a0b1670 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a0b05b8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="0", @currency="GBP", @quantity="0">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000a017ca0 @base=#<Payment:0x0000000594a6d8 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :"transactions[0].item_list.items[0].quantity"=>["Must be a positive integer"]}>, @request_id="2ef29b22-d89c-4ced-950c-763a386e110d", @header={}>
D, [2015-01-01T20:00:16.523840 #10344] DEBUG -- :   [1m[36m (93.6ms)[0m  [1mcommit transaction[0m
I, [2015-01-01T20:00:16.539440 #10344]  INFO -- : about to approve url
I, [2015-01-01T20:00:17.072841 #10344]  INFO -- : #<Payment:0x0000000594a6d8 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions[0].item_list.items[0].quantity", "issue"=>"Must be a positive integer"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"0616a10c742ed"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005948608 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a0b3420 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a0b2c28 @error=nil, @total="0", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a0b1670 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a0b05b8 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="0", @currency="GBP", @quantity="0">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000a017ca0 @base=#<Payment:0x0000000594a6d8 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :"transactions[0].item_list.items[0].quantity"=>["Must be a positive integer"]}>, @request_id="2ef29b22-d89c-4ced-950c-763a386e110d", @header={}>
I, [2015-01-01T20:00:17.104041 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T20:00:17.135241 #10344]  INFO -- : Completed 302 Found in 44888ms (ActiveRecord: 140.4ms)
D, [2015-01-01T20:01:24.468575 #10344] DEBUG -- : 
D, [2015-01-01T20:01:24.499775 #10344] DEBUG -- : 
I, [2015-01-01T20:01:24.540377 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 20:01:24 +0000
I, [2015-01-01T20:01:24.758777 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T20:01:24.821177 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T20:01:24.961578 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T20:01:25.132579 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-01T20:01:25.366579 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T20:01:25.662980 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T20:01:25.694180 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T20:01:25.912580 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 20:01:25 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:84d42b8,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 20:01:25 UTC +00:00]]
D, [2015-01-01T20:01:26.099780 #10344] DEBUG -- :   [1m[35m (140.4ms)[0m  commit transaction
D, [2015-01-01T20:01:26.208981 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T20:01:26.303581 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T20:01:26.412781 #10344]  INFO -- :   Rendered carts/_cart.html.erb (219.4ms)
I, [2015-01-01T20:01:26.443981 #10344]  INFO -- :   Rendered line_items/create.js.erb (281.8ms)
I, [2015-01-01T20:01:26.504782 #10344]  INFO -- : Completed 200 OK in 1623ms (Views: 344.2ms | ActiveRecord: 156.0ms)
D, [2015-01-01T20:01:29.088848 #10344] DEBUG -- : 
D, [2015-01-01T20:01:29.104448 #10344] DEBUG -- : 
I, [2015-01-01T20:01:29.151248 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 20:01:29 +0000
I, [2015-01-01T20:01:29.276048 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T20:01:29.338448 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T20:01:29.416448 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T20:01:29.487849 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-01T20:01:29.597049 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T20:01:29.706249 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T20:01:29.753049 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T20:01:29.940250 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 20:01:29 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:5b2ab10,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 20:01:29 UTC +00:00]]
D, [2015-01-01T20:01:30.158650 #10344] DEBUG -- :   [1m[35m (156.0ms)[0m  commit transaction
D, [2015-01-01T20:01:30.267850 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-01T20:01:30.408250 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-01T20:01:30.486251 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (140.4ms)
I, [2015-01-01T20:01:30.564251 #10344]  INFO -- :   Rendered carts/_cart.html.erb (343.2ms)
I, [2015-01-01T20:01:30.611051 #10344]  INFO -- :   Rendered line_items/create.js.erb (390.0ms)
I, [2015-01-01T20:01:30.673451 #10344]  INFO -- : Completed 200 OK in 1288ms (Views: 468.0ms | ActiveRecord: 171.6ms)
D, [2015-01-01T20:01:32.468114 #10344] DEBUG -- : 
D, [2015-01-01T20:01:32.499314 #10344] DEBUG -- : 
I, [2015-01-01T20:01:32.546114 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 20:01:32 +0000
I, [2015-01-01T20:01:32.670914 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T20:01:32.780114 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T20:01:32.858114 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T20:01:32.939916 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T20:01:33.049117 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T20:01:33.173917 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T20:01:37.803974 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T20:01:37.897574 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 01 Jan 2015 20:01:37 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 20:01:37 UTC +00:00]]
D, [2015-01-01T20:01:38.037974 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 71[0m  [["cart_id", nil], ["order_id", 61], ["updated_at", Thu, 01 Jan 2015 20:01:37 UTC +00:00]]
D, [2015-01-01T20:01:38.162775 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 72  [["cart_id", nil], ["order_id", 61], ["updated_at", Thu, 01 Jan 2015 20:01:38 UTC +00:00]]
I, [2015-01-01T20:01:38.193975 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T20:01:42.284182 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T20:01:42.393382 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-01T20:01:43.828585 #10344] DEBUG -- :   [1m[36m (15.6ms)[0m  [1mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 61]]
W, [2015-01-01T20:01:43.906585 #10344]  WARN -- : undefined method `item_list' for #<PayPal::SDK::Core::API::DataTypes::ArrayWithBlock:0x0000000926eb30>
I, [2015-01-01T20:01:43.922185 #10344]  INFO -- : in payment.create
I, [2015-01-01T20:01:44.046985 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}]}
I, [2015-01-01T20:01:44.530586 #10344]  INFO -- : #<ActiveModel::Errors:0x000000086c6aa8 @base=#<Payment:0x0000000984c598 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009847930 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000926e540 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000926de60 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000926c970 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009267e48 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000086c6aa8 ...>>, @messages={}>
I, [2015-01-01T20:01:44.561786 #10344]  INFO -- : got past invalid
I, [2015-01-01T20:01:44.639786 #10344]  INFO -- : PayPal-Request-Id: f1ee4b98-91f2-4dee-9065-195adb479141
I, [2015-01-01T20:01:44.670986 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T20:01:45.606988 #10344]  INFO -- : Response[400]: Bad Request, Duration: 0.905s
I, [2015-01-01T20:01:45.638188 #10344]  INFO -- :  in error=
I, [2015-01-01T20:01:45.669388 #10344]  INFO -- :  in error=
I, [2015-01-01T20:01:45.684988 #10344]  INFO -- : back from super
I, [2015-01-01T20:01:45.825388 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}]}
I, [2015-01-01T20:04:04.879236 #10344]  INFO -- : @payment save just done
I, [2015-01-01T20:04:05.629038 #10344]  INFO -- : #<Payment:0x0000000984c598 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"fe9a50ba49730"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009847930 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000926e540 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000926de60 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000926c970 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009267e48 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x00000008051d58 @error=nil>]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000086c6aa8 @base=#<Payment:0x0000000984c598 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="f1ee4b98-91f2-4dee-9065-195adb479141", @header={}>
I, [2015-01-01T20:04:06.362239 #10344]  INFO -- : #<Payment:0x0000000984c598 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"fe9a50ba49730"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009847930 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000926e540 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000926de60 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000926c970 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009267e48 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x00000008051d58 @error=nil>]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000086c6aa8 @base=#<Payment:0x0000000984c598 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="f1ee4b98-91f2-4dee-9065-195adb479141", @header={}>
D, [2015-01-01T20:04:06.502639 #10344] DEBUG -- :   [1m[35m (93.6ms)[0m  commit transaction
I, [2015-01-01T20:04:06.518239 #10344]  INFO -- : about to approve url
I, [2015-01-01T20:04:07.282641 #10344]  INFO -- : #<Payment:0x0000000984c598 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"fe9a50ba49730"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009847930 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000926e540 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000926de60 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000926c970 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009267e48 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x00000008051d58 @error=nil>]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000086c6aa8 @base=#<Payment:0x0000000984c598 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="f1ee4b98-91f2-4dee-9065-195adb479141", @header={}>
I, [2015-01-01T20:04:07.329441 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T20:04:07.376241 #10344]  INFO -- : Completed 302 Found in 154659ms (ActiveRecord: 124.8ms)
D, [2015-01-01T20:04:07.454241 #10344] DEBUG -- : 
D, [2015-01-01T20:04:07.485441 #10344] DEBUG -- : 
I, [2015-01-01T20:04:07.516641 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 20:04:07 +0000
I, [2015-01-01T20:04:09.920045 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T20:04:10.060445 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T20:04:10.294446 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T20:04:10.528446 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (15.6ms)
I, [2015-01-01T20:04:10.575246 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (296.4ms)
D, [2015-01-01T20:04:10.887247 #10344] DEBUG -- :   [1m[36mLineItem Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T20:04:10.980847 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T20:04:11.027647 #10344]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-01T20:04:11.136847 #10344]  INFO -- :   Rendered carts/_cart.html.erb (187.2ms)
I, [2015-01-01T20:04:11.199247 #10344]  INFO -- : Completed 200 OK in 1232ms (Views: 951.6ms | ActiveRecord: 0.0ms)
D, [2015-01-01T20:04:13.397459 #10344] DEBUG -- : 
D, [2015-01-01T20:04:13.413059 #10344] DEBUG -- : 
I, [2015-01-01T20:04:13.459859 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 20:04:13 +0000
I, [2015-01-01T20:04:13.600259 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T20:04:13.662659 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T20:04:13.741660 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T20:04:13.819660 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-01T20:04:13.933261 #10344] DEBUG -- :   [1m[36mLineItem Load (15.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T20:04:14.196862 #10344] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T20:04:14.243662 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T20:04:14.462063 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 20:04:14 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:57e8088,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 20:04:14 UTC +00:00]]
D, [2015-01-01T20:04:14.618063 #10344] DEBUG -- :   [1m[36m (124.8ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T20:04:14.728664 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T20:04:14.815066 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (13.0ms)
I, [2015-01-01T20:04:14.893066 #10344]  INFO -- :   Rendered carts/_cart.html.erb (184.0ms)
I, [2015-01-01T20:04:14.924266 #10344]  INFO -- :   Rendered line_items/create.js.erb (240.8ms)
I, [2015-01-01T20:04:14.986666 #10344]  INFO -- : Completed 200 OK in 1277ms (Views: 321.8ms | ActiveRecord: 157.0ms)
D, [2015-01-01T20:04:15.080469 #10344] DEBUG -- : 
D, [2015-01-01T20:04:15.105470 #10344] DEBUG -- : 
I, [2015-01-01T20:04:15.155473 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 20:04:15 +0000
I, [2015-01-01T20:04:15.270480 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T20:04:15.331483 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T20:04:15.413488 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T20:04:15.488492 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-01T20:04:15.596498 #10344] DEBUG -- :   [1m[36mLineItem Load (3.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T20:04:15.697504 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-01T20:04:15.740507 #10344] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T20:04:15.928517 #10344] DEBUG -- :   [1m[35mSQL (9.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 20:04:15 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:9b0b770,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 20:04:15 UTC +00:00]]
D, [2015-01-01T20:04:16.116528 #10344] DEBUG -- :   [1m[36m (152.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T20:04:16.241328 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-01T20:04:16.351529 #10344] DEBUG -- :   [1m[36mProduct Load (15.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-01T20:04:16.429529 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (124.8ms)
I, [2015-01-01T20:04:16.491929 #10344]  INFO -- :   Rendered carts/_cart.html.erb (297.4ms)
I, [2015-01-01T20:04:16.538729 #10344]  INFO -- :   Rendered line_items/create.js.erb (359.8ms)
I, [2015-01-01T20:04:16.585529 #10344]  INFO -- : Completed 200 OK in 1206ms (Views: 406.6ms | ActiveRecord: 186.6ms)
D, [2015-01-01T20:04:18.002390 #10344] DEBUG -- : 
D, [2015-01-01T20:04:18.033590 #10344] DEBUG -- : 
I, [2015-01-01T20:04:18.080390 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 20:04:18 +0000
I, [2015-01-01T20:04:18.220790 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T20:04:18.345591 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T20:04:18.532791 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T20:04:18.595191 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T20:04:18.773193 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T20:04:18.907993 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T20:04:22.616601 #10344] DEBUG -- :   [1m[35m (15.6ms)[0m  begin transaction
D, [2015-01-01T20:04:22.993002 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 20:04:22 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 20:04:22 UTC +00:00]]
D, [2015-01-01T20:04:23.134402 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 73  [["cart_id", nil], ["order_id", 62], ["updated_at", Thu, 01 Jan 2015 20:04:23 UTC +00:00]]
D, [2015-01-01T20:04:23.259203 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 74[0m  [["cart_id", nil], ["order_id", 62], ["updated_at", Thu, 01 Jan 2015 20:04:23 UTC +00:00]]
I, [2015-01-01T20:04:23.306003 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T20:04:25.318406 #10344] DEBUG -- :   [1m[35mProduct Load (15.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T20:04:25.396406 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T20:04:27.192410 #10344] DEBUG -- :   [1m[35m (15.6ms)[0m  SELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 62]]
W, [2015-01-01T20:04:27.254810 #10344]  WARN -- : undefined method `item_list' for #<PayPal::SDK::Core::API::DataTypes::ArrayWithBlock:0x00000009834718>
I, [2015-01-01T20:04:27.286010 #10344]  INFO -- : in payment.create
I, [2015-01-01T20:04:27.426410 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}]}
I, [2015-01-01T20:04:27.910011 #10344]  INFO -- : #<ActiveModel::Errors:0x000000097b3bb8 @base=#<Payment:0x00000009e45b70 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009e44ea0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009834290 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000982fc90 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000982dad0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000982cef0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000097b3bb8 ...>>, @messages={}>
I, [2015-01-01T20:04:27.941211 #10344]  INFO -- : got past invalid
I, [2015-01-01T20:04:28.003611 #10344]  INFO -- : PayPal-Request-Id: 72e2776c-0aa9-4c9d-842c-abeeb29e6e2b
I, [2015-01-01T20:04:28.050411 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T20:04:29.002013 #10344]  INFO -- : Response[400]: Bad Request, Duration: 0.920s
I, [2015-01-01T20:04:29.033213 #10344]  INFO -- :  in error=
I, [2015-01-01T20:04:29.048813 #10344]  INFO -- :  in error=
I, [2015-01-01T20:04:29.080013 #10344]  INFO -- : back from super
I, [2015-01-01T20:04:29.236013 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}]}
I, [2015-01-01T20:05:42.218174 #10344]  INFO -- : @payment save just done
I, [2015-01-01T20:05:43.091775 #10344]  INFO -- : #<Payment:0x00000009e45b70 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"c94a046eb1527"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009e44ea0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009834290 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000982fc90 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000982dad0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000982cef0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x00000008160f28 @error=nil>]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000097b3bb8 @base=#<Payment:0x00000009e45b70 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="72e2776c-0aa9-4c9d-842c-abeeb29e6e2b", @header={}>
I, [2015-01-01T20:05:43.965377 #10344]  INFO -- : #<Payment:0x00000009e45b70 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"c94a046eb1527"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009e44ea0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009834290 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000982fc90 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000982dad0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000982cef0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x00000008160f28 @error=nil>]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000097b3bb8 @base=#<Payment:0x00000009e45b70 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="72e2776c-0aa9-4c9d-842c-abeeb29e6e2b", @header={}>
D, [2015-01-01T20:05:44.136977 #10344] DEBUG -- :   [1m[36m (124.8ms)[0m  [1mcommit transaction[0m
I, [2015-01-01T20:05:44.183777 #10344]  INFO -- : about to approve url
I, [2015-01-01T20:05:45.057379 #10344]  INFO -- : #<Payment:0x00000009e45b70 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"c94a046eb1527"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009e44ea0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009834290 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000982fc90 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000982dad0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000982cef0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x00000008160f28 @error=nil>]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000097b3bb8 @base=#<Payment:0x00000009e45b70 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="72e2776c-0aa9-4c9d-842c-abeeb29e6e2b", @header={}>
I, [2015-01-01T20:05:45.119779 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T20:05:45.166579 #10344]  INFO -- : Completed 302 Found in 86899ms (ActiveRecord: 218.4ms)
D, [2015-01-01T20:05:45.244579 #10344] DEBUG -- : 
D, [2015-01-01T20:05:45.275779 #10344] DEBUG -- : 
I, [2015-01-01T20:05:45.322579 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 20:05:45 +0000
I, [2015-01-01T20:05:47.679183 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T20:05:47.803983 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T20:05:48.006784 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-01T20:05:48.225184 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (0.0ms)
I, [2015-01-01T20:05:48.271984 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (280.8ms)
D, [2015-01-01T20:05:48.552785 #10344] DEBUG -- :   [1m[35mLineItem Exists (0.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T20:05:48.661985 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T20:05:48.708785 #10344]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-01T20:05:48.817985 #10344]  INFO -- :   Rendered carts/_cart.html.erb (202.8ms)
I, [2015-01-01T20:05:48.880385 #10344]  INFO -- : Completed 200 OK in 1154ms (Views: 904.8ms | ActiveRecord: 0.0ms)
D, [2015-01-01T20:05:56.202204 #10344] DEBUG -- : 
D, [2015-01-01T20:05:56.217804 #10344] DEBUG -- : 
I, [2015-01-01T20:05:56.280204 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 20:05:56 +0000
I, [2015-01-01T20:05:56.405004 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T20:05:56.479405 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T20:05:56.541805 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T20:05:56.619805 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-01T20:05:56.729005 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T20:05:56.993606 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T20:05:57.040406 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T20:05:57.243207 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 20:05:57 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:9276498,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 20:05:57 UTC +00:00]]
D, [2015-01-01T20:05:57.433808 #10344] DEBUG -- :   [1m[35m (140.4ms)[0m  commit transaction
D, [2015-01-01T20:05:57.548410 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T20:05:57.624811 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T20:05:57.687211 #10344]  INFO -- :   Rendered carts/_cart.html.erb (194.6ms)
I, [2015-01-01T20:05:57.734011 #10344]  INFO -- :   Rendered line_items/create.js.erb (241.4ms)
I, [2015-01-01T20:05:57.780811 #10344]  INFO -- : Completed 200 OK in 1255ms (Views: 296.2ms | ActiveRecord: 156.0ms)
D, [2015-01-01T20:05:57.843211 #10344] DEBUG -- : 
D, [2015-01-01T20:05:57.873812 #10344] DEBUG -- : 
I, [2015-01-01T20:05:57.922815 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 20:05:57 +0000
I, [2015-01-01T20:05:58.040821 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T20:05:58.102825 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T20:05:58.178829 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T20:05:58.254834 #10344] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-01T20:05:58.355839 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T20:05:58.453845 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T20:05:58.494847 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-01T20:05:58.677858 #10344] DEBUG -- :   [1m[36mSQL (10.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 20:05:58 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:5d37728,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 20:05:58 UTC +00:00]]
D, [2015-01-01T20:05:58.836867 #10344] DEBUG -- :   [1m[35m (121.0ms)[0m  commit transaction
D, [2015-01-01T20:05:58.928471 #10344] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-01T20:05:59.053271 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-01T20:05:59.115672 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (124.8ms)
I, [2015-01-01T20:05:59.178072 #10344]  INFO -- :   Rendered carts/_cart.html.erb (270.0ms)
I, [2015-01-01T20:05:59.224872 #10344]  INFO -- :   Rendered line_items/create.js.erb (313.2ms)
I, [2015-01-01T20:05:59.271672 #10344]  INFO -- : Completed 200 OK in 1121ms (Views: 382.0ms | ActiveRecord: 143.0ms)
D, [2015-01-01T20:06:00.640733 #10344] DEBUG -- : 
D, [2015-01-01T20:06:00.671933 #10344] DEBUG -- : 
I, [2015-01-01T20:06:00.718733 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 20:06:00 +0000
I, [2015-01-01T20:06:00.890333 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T20:06:01.015133 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T20:06:01.211735 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T20:06:01.290735 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T20:06:01.462336 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T20:06:01.618336 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T20:06:06.432546 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T20:06:06.760146 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 01 Jan 2015 20:06:06 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 20:06:06 UTC +00:00]]
D, [2015-01-01T20:06:06.900547 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 75[0m  [["cart_id", nil], ["order_id", 63], ["updated_at", Thu, 01 Jan 2015 20:06:06 UTC +00:00]]
D, [2015-01-01T20:06:07.025347 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 76  [["cart_id", nil], ["order_id", 63], ["updated_at", Thu, 01 Jan 2015 20:06:06 UTC +00:00]]
I, [2015-01-01T20:06:07.072147 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T20:06:07.134547 #10344] DEBUG -- :   [1m[36m (15.6ms)[0m  [1mrollback transaction[0m
I, [2015-01-01T20:06:07.181347 #10344]  INFO -- : Completed 500 Internal Server Error in 6244ms
F, [2015-01-01T20:06:07.352947 #10344] FATAL -- : 
SyntaxError (c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:54: syntax error, unexpected =>, expecting keyword_end
...sactions.item_list << :items => { :name => "penknife", :sku ...
...                               ^):
  app/models/order.rb:41:in `create_payment'
  app/controllers/orders_controller.rb:155:in `ppcheckout'


I, [2015-01-01T20:06:07.665948 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (15.6ms)
I, [2015-01-01T20:06:07.759548 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (15.6ms)
I, [2015-01-01T20:06:07.899948 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (15.6ms)
I, [2015-01-01T20:06:07.962348 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (358.8ms)
D, [2015-01-01T20:06:08.090951 #10344] DEBUG -- : 
D, [2015-01-01T20:06:08.107952 #10344] DEBUG -- : 
I, [2015-01-01T20:06:08.144954 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 20:06:08 +0000
I, [2015-01-01T20:06:08.244959 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T20:06:08.305963 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T20:06:08.363966 #10344] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T20:06:08.421970 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T20:06:08.495974 #10344] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T20:06:08.592979 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T20:06:09.781047 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-01T20:06:09.885053 #10344] DEBUG -- :   [1m[36mSQL (7.0ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 20:06:09 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 20:06:09 UTC +00:00]]
D, [2015-01-01T20:06:10.002060 #10344] DEBUG -- :   [1m[35mSQL (4.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 75  [["cart_id", nil], ["order_id", 63], ["updated_at", Thu, 01 Jan 2015 20:06:09 UTC +00:00]]
D, [2015-01-01T20:06:10.141068 #10344] DEBUG -- :   [1m[36mSQL (3.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 76[0m  [["cart_id", nil], ["order_id", 63], ["updated_at", Thu, 01 Jan 2015 20:06:10 UTC +00:00]]
I, [2015-01-01T20:06:10.175070 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T20:06:10.243074 #10344] DEBUG -- :   [1m[35m (12.0ms)[0m  rollback transaction
I, [2015-01-01T20:06:10.290076 #10344]  INFO -- : Completed 500 Internal Server Error in 2001ms
F, [2015-01-01T20:06:10.493088 #10344] FATAL -- : 
SyntaxError (c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:54: syntax error, unexpected =>, expecting keyword_end
...sactions.item_list << :items => { :name => "penknife", :sku ...
...                               ^):
  app/models/order.rb:41:in `create_payment'
  app/controllers/orders_controller.rb:155:in `ppcheckout'


I, [2015-01-01T20:06:10.807106 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (13.0ms)
I, [2015-01-01T20:06:10.940114 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (18.0ms)
I, [2015-01-01T20:06:11.078122 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (12.0ms)
I, [2015-01-01T20:06:11.176127 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (412.0ms)
D, [2015-01-01T20:07:14.947491 #10344] DEBUG -- : 
D, [2015-01-01T20:07:14.979092 #10344] DEBUG -- : 
I, [2015-01-01T20:07:15.037095 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-01 20:07:14 +0000
I, [2015-01-01T20:07:18.093270 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-01T20:07:18.240278 #10344] DEBUG -- :   [1m[36mCart Load (3.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T20:07:18.499293 #10344] DEBUG -- :   [1m[35mProduct Load (3.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-01T20:07:18.758308 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (5.0ms)
I, [2015-01-01T20:07:18.805311 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (339.0ms)
D, [2015-01-01T20:07:19.139330 #10344] DEBUG -- :   [1m[36mLineItem Exists (3.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T20:07:19.234335 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-01T20:07:19.571355 #10344] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T20:07:19.686361 #10344] DEBUG -- :   [1m[35mProduct Load (3.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
I, [2015-01-01T20:07:19.748365 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (253.0ms)
I, [2015-01-01T20:07:19.897373 #10344]  INFO -- :   Rendered carts/_cart.html.erb (707.0ms)
I, [2015-01-01T20:07:19.974378 #10344]  INFO -- : Completed 200 OK in 1836ms (Views: 1501.1ms | ActiveRecord: 45.0ms)
D, [2015-01-01T20:07:20.378401 #10344] DEBUG -- : 
D, [2015-01-01T20:07:20.418403 #10344] DEBUG -- : 
I, [2015-01-01T20:07:20.489407 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-01 20:07:20 +0000
D, [2015-01-01T20:07:20.571412 #10344] DEBUG -- : 
D, [2015-01-01T20:07:20.595413 #10344] DEBUG -- : 
I, [2015-01-01T20:07:20.657417 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-01 20:07:20 +0000
D, [2015-01-01T20:07:20.731421 #10344] DEBUG -- : 
D, [2015-01-01T20:07:20.755422 #10344] DEBUG -- : 
I, [2015-01-01T20:07:20.817426 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-01 20:07:20 +0000
D, [2015-01-01T20:07:20.893430 #10344] DEBUG -- : 
D, [2015-01-01T20:07:20.919432 #10344] DEBUG -- : 
I, [2015-01-01T20:07:20.989436 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-01 20:07:20 +0000
D, [2015-01-01T20:07:21.066440 #10344] DEBUG -- : 
D, [2015-01-01T20:07:21.091442 #10344] DEBUG -- : 
I, [2015-01-01T20:07:21.154445 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-01 20:07:21 +0000
D, [2015-01-01T20:07:21.231450 #10344] DEBUG -- : 
D, [2015-01-01T20:07:21.258451 #10344] DEBUG -- : 
I, [2015-01-01T20:07:21.329455 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-01 20:07:21 +0000
D, [2015-01-01T20:07:21.405459 #10344] DEBUG -- : 
D, [2015-01-01T20:07:21.429461 #10344] DEBUG -- : 
I, [2015-01-01T20:07:21.490464 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-01 20:07:21 +0000
D, [2015-01-01T20:07:21.572469 #10344] DEBUG -- : 
D, [2015-01-01T20:07:21.598471 #10344] DEBUG -- : 
I, [2015-01-01T20:07:21.662474 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-01 20:07:21 +0000
D, [2015-01-01T20:07:21.738479 #10344] DEBUG -- : 
D, [2015-01-01T20:07:21.763480 #10344] DEBUG -- : 
I, [2015-01-01T20:07:21.827484 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-01 20:07:21 +0000
D, [2015-01-01T20:07:21.904488 #10344] DEBUG -- : 
D, [2015-01-01T20:07:21.929489 #10344] DEBUG -- : 
I, [2015-01-01T20:07:22.002494 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-01 20:07:21 +0000
D, [2015-01-01T20:07:22.077498 #10344] DEBUG -- : 
D, [2015-01-01T20:07:22.103499 #10344] DEBUG -- : 
I, [2015-01-01T20:07:22.171503 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-01 20:07:22 +0000
D, [2015-01-01T20:07:22.250508 #10344] DEBUG -- : 
D, [2015-01-01T20:07:22.276509 #10344] DEBUG -- : 
I, [2015-01-01T20:07:22.335513 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-01 20:07:22 +0000
D, [2015-01-01T20:07:22.414517 #10344] DEBUG -- : 
D, [2015-01-01T20:07:22.432518 #10344] DEBUG -- : 
I, [2015-01-01T20:07:22.482521 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-01 20:07:22 +0000
D, [2015-01-01T20:07:22.580527 #10344] DEBUG -- : 
D, [2015-01-01T20:07:22.611528 #10344] DEBUG -- : 
I, [2015-01-01T20:07:22.680532 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-01 20:07:22 +0000
D, [2015-01-01T20:07:22.756537 #10344] DEBUG -- : 
D, [2015-01-01T20:07:22.779538 #10344] DEBUG -- : 
I, [2015-01-01T20:07:22.846542 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-01 20:07:22 +0000
D, [2015-01-01T20:07:22.921546 #10344] DEBUG -- : 
D, [2015-01-01T20:07:22.946548 #10344] DEBUG -- : 
I, [2015-01-01T20:07:23.022552 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-01 20:07:22 +0000
D, [2015-01-01T20:07:23.101557 #10344] DEBUG -- : 
D, [2015-01-01T20:07:23.135558 #10344] DEBUG -- : 
I, [2015-01-01T20:07:23.192562 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-01 20:07:23 +0000
D, [2015-01-01T20:07:23.270566 #10344] DEBUG -- : 
D, [2015-01-01T20:07:23.291567 #10344] DEBUG -- : 
I, [2015-01-01T20:07:23.343570 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-01 20:07:23 +0000
D, [2015-01-01T20:07:23.423575 #10344] DEBUG -- : 
D, [2015-01-01T20:07:23.444576 #10344] DEBUG -- : 
I, [2015-01-01T20:07:23.500579 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-01 20:07:23 +0000
D, [2015-01-01T20:07:23.582584 #10344] DEBUG -- : 
D, [2015-01-01T20:07:23.606585 #10344] DEBUG -- : 
I, [2015-01-01T20:07:23.656588 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-01 20:07:23 +0000
D, [2015-01-01T20:07:23.739593 #10344] DEBUG -- : 
D, [2015-01-01T20:07:23.755594 #10344] DEBUG -- : 
I, [2015-01-01T20:07:23.803597 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-01 20:07:23 +0000
D, [2015-01-01T20:07:23.916603 #10344] DEBUG -- : 
D, [2015-01-01T20:07:23.938604 #10344] DEBUG -- : 
I, [2015-01-01T20:07:24.015609 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-01 20:07:23 +0000
D, [2015-01-01T20:07:24.103614 #10344] DEBUG -- : 
D, [2015-01-01T20:07:24.134616 #10344] DEBUG -- : 
I, [2015-01-01T20:07:24.202619 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-01 20:07:24 +0000
D, [2015-01-01T20:07:24.301625 #10344] DEBUG -- : 
D, [2015-01-01T20:07:24.326627 #10344] DEBUG -- : 
I, [2015-01-01T20:07:24.384630 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-01 20:07:24 +0000
D, [2015-01-01T20:07:24.465635 #10344] DEBUG -- : 
D, [2015-01-01T20:07:24.486636 #10344] DEBUG -- : 
I, [2015-01-01T20:07:24.537639 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-01 20:07:24 +0000
D, [2015-01-01T20:07:24.623644 #10344] DEBUG -- : 
D, [2015-01-01T20:07:24.643645 #10344] DEBUG -- : 
I, [2015-01-01T20:07:24.698648 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-01 20:07:24 +0000
D, [2015-01-01T20:07:24.803654 #10344] DEBUG -- : 
D, [2015-01-01T20:07:24.841656 #10344] DEBUG -- : 
I, [2015-01-01T20:07:24.901659 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-01 20:07:24 +0000
D, [2015-01-01T20:07:25.011666 #10344] DEBUG -- : 
D, [2015-01-01T20:07:25.035667 #10344] DEBUG -- : 
I, [2015-01-01T20:07:25.090670 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-01 20:07:25 +0000
D, [2015-01-01T20:07:25.166675 #10344] DEBUG -- : 
D, [2015-01-01T20:07:25.187676 #10344] DEBUG -- : 
I, [2015-01-01T20:07:25.242679 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-01 20:07:25 +0000
D, [2015-01-01T20:07:26.476094 #10344] DEBUG -- : 
D, [2015-01-01T20:07:26.507294 #10344] DEBUG -- : 
I, [2015-01-01T20:07:26.554094 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 20:07:26 +0000
I, [2015-01-01T20:07:26.739695 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T20:07:26.786495 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T20:07:26.880096 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T20:07:26.958096 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-01T20:07:27.075296 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T20:07:27.122096 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T20:07:27.262497 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = 75[0m  [["quantity", 2], ["updated_at", Thu, 01 Jan 2015 20:07:27 UTC +00:00]]
D, [2015-01-01T20:07:27.387297 #10344] DEBUG -- :   [1m[35m (93.6ms)[0m  commit transaction
D, [2015-01-01T20:07:27.512097 #10344] DEBUG -- :   [1m[36mLineItem Load (15.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-01T20:07:27.622099 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T20:07:27.739701 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
I, [2015-01-01T20:07:27.802101 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (227.6ms)
I, [2015-01-01T20:07:27.880101 #10344]  INFO -- :   Rendered carts/_cart.html.erb (414.8ms)
I, [2015-01-01T20:07:27.926901 #10344]  INFO -- :   Rendered line_items/create.js.erb (461.6ms)
I, [2015-01-01T20:07:27.973701 #10344]  INFO -- : Completed 200 OK in 1125ms (Views: 520.0ms | ActiveRecord: 128.8ms)
D, [2015-01-01T20:07:28.020501 #10344] DEBUG -- : 
D, [2015-01-01T20:07:28.036101 #10344] DEBUG -- : 
I, [2015-01-01T20:07:28.097704 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 20:07:28 +0000
I, [2015-01-01T20:07:28.224711 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T20:07:28.291715 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T20:07:28.378720 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T20:07:28.469725 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-01T20:07:28.585732 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-01T20:07:28.638735 #10344] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T20:07:28.770742 #10344] DEBUG -- :   [1m[35mSQL (8.0ms)[0m  UPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = 76  [["quantity", 2], ["updated_at", Thu, 01 Jan 2015 20:07:28 UTC +00:00]]
D, [2015-01-01T20:07:28.916751 #10344] DEBUG -- :   [1m[36m (103.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T20:07:29.065759 #10344] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-01T20:07:29.173761 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T20:07:29.282961 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
I, [2015-01-01T20:07:29.345361 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (229.4ms)
I, [2015-01-01T20:07:29.438962 #10344]  INFO -- :   Rendered carts/_cart.html.erb (427.4ms)
I, [2015-01-01T20:07:29.470162 #10344]  INFO -- :   Rendered line_items/create.js.erb (488.2ms)
I, [2015-01-01T20:07:29.529962 #10344]  INFO -- : Completed 200 OK in 1176ms (Views: 546.4ms | ActiveRecord: 121.0ms)
D, [2015-01-01T20:07:30.233201 #10344] DEBUG -- : 
D, [2015-01-01T20:07:30.257202 #10344] DEBUG -- : 
I, [2015-01-01T20:07:30.308205 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 20:07:30 +0000
I, [2015-01-01T20:07:30.472215 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T20:07:30.608222 #10344] DEBUG -- :   [1m[36mUser Load (3.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-01T20:07:30.826623 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-01T20:07:30.908425 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T20:07:31.095625 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T20:07:31.238026 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T20:07:34.469433 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T20:07:34.859434 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 01 Jan 2015 20:07:34 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 20:07:34 UTC +00:00]]
D, [2015-01-01T20:07:34.999834 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 75[0m  [["cart_id", nil], ["order_id", 63], ["updated_at", Thu, 01 Jan 2015 20:07:34 UTC +00:00]]
D, [2015-01-01T20:07:35.155834 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 76  [["cart_id", nil], ["order_id", 63], ["updated_at", Thu, 01 Jan 2015 20:07:35 UTC +00:00]]
I, [2015-01-01T20:07:35.187034 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T20:07:36.655437 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-01T20:07:36.764637 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-01T20:07:38.403640 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 63]]
W, [2015-01-01T20:07:38.466040 #10344]  WARN -- : undefined method `item_list' for #<PayPal::SDK::Core::API::DataTypes::ArrayWithBlock:0x00000005a05fa0>
I, [2015-01-01T20:07:38.497240 #10344]  INFO -- : in payment.create
I, [2015-01-01T20:07:38.637641 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"77.96"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"77.96", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}]}
I, [2015-01-01T20:07:39.183642 #10344]  INFO -- : #<ActiveModel::Errors:0x0000000596caf8 @base=#<Payment:0x00000007d93c10 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007d92ba8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005a05870 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005a04dd0 @error=nil, @total="77.96", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000059ef2a0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000059ee080 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="77.96", @currency="GBP", @quantity="2">]>, @description="King Clothing">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000596caf8 ...>>, @messages={}>
I, [2015-01-01T20:07:39.214842 #10344]  INFO -- : got past invalid
I, [2015-01-01T20:07:39.308442 #10344]  INFO -- : PayPal-Request-Id: 86b7bdb7-c50d-475c-9826-3128b6df1f80
I, [2015-01-01T20:07:39.355242 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T20:07:40.431644 #10344]  INFO -- : Response[400]: Bad Request, Duration: 1.030s
I, [2015-01-01T20:07:40.447244 #10344]  INFO -- :  in error=
I, [2015-01-01T20:07:40.478444 #10344]  INFO -- :  in error=
I, [2015-01-01T20:07:40.509644 #10344]  INFO -- : back from super
I, [2015-01-01T20:07:40.665644 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"77.96"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"77.96", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}]}
I, [2015-01-01T23:23:52.765413 #10344]  INFO -- : @payment save just done
I, [2015-01-01T23:23:53.420614 #10344]  INFO -- : #<Payment:0x00000007d93c10 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"d5a4c461e3649"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007d92ba8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005a05870 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005a04dd0 @error=nil, @total="77.96", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000059ef2a0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000059ee080 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="77.96", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:name=>"fred"}], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000596caf8 @base=#<Payment:0x00000007d93c10 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="86b7bdb7-c50d-475c-9826-3128b6df1f80", @header={}>
I, [2015-01-01T23:23:53.935415 #10344]  INFO -- : #<Payment:0x00000007d93c10 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"d5a4c461e3649"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007d92ba8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005a05870 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005a04dd0 @error=nil, @total="77.96", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000059ef2a0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000059ee080 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="77.96", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:name=>"fred"}], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000596caf8 @base=#<Payment:0x00000007d93c10 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="86b7bdb7-c50d-475c-9826-3128b6df1f80", @header={}>
D, [2015-01-01T23:23:54.122615 #10344] DEBUG -- :   [1m[35m (171.6ms)[0m  commit transaction
I, [2015-01-01T23:23:54.138215 #10344]  INFO -- : about to approve url
I, [2015-01-01T23:23:54.481416 #10344]  INFO -- : #<Payment:0x00000007d93c10 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}, {"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"d5a4c461e3649"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007d92ba8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005a05870 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005a04dd0 @error=nil, @total="77.96", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000059ef2a0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000059ee080 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="77.96", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:name=>"fred"}], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000596caf8 @base=#<Payment:0x00000007d93c10 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"], :transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="86b7bdb7-c50d-475c-9826-3128b6df1f80", @header={}>
I, [2015-01-01T23:23:54.512616 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-01T23:23:54.528216 #10344]  INFO -- : Completed 302 Found in 11784038ms (ActiveRecord: 190.2ms)
D, [2015-01-01T23:24:03.200833 #10344] DEBUG -- : 
D, [2015-01-01T23:24:03.232033 #10344] DEBUG -- : 
I, [2015-01-01T23:24:03.294433 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-01 23:24:03 +0000
I, [2015-01-01T23:24:05.643838 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T23:24:05.706238 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-01T23:24:05.846638 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T23:24:06.080638 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-01T23:24:06.377039 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T23:24:06.707139 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T23:24:06.753940 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T23:24:06.972340 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 23:24:06 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:9bd06d8,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 23:24:06 UTC +00:00]]
D, [2015-01-01T23:24:07.175140 #10344] DEBUG -- :   [1m[36m (156.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T23:24:07.299940 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-01T23:24:07.393541 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-01T23:24:07.502741 #10344]  INFO -- :   Rendered carts/_cart.html.erb (249.6ms)
I, [2015-01-01T23:24:07.549541 #10344]  INFO -- :   Rendered line_items/create.js.erb (296.4ms)
I, [2015-01-01T23:24:07.596341 #10344]  INFO -- : Completed 200 OK in 1843ms (Views: 374.4ms | ActiveRecord: 171.6ms)
D, [2015-01-01T23:24:10.710162 #10344] DEBUG -- : 
D, [2015-01-01T23:24:10.741362 #10344] DEBUG -- : 
I, [2015-01-01T23:24:10.788162 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-01 23:24:10 +0000
I, [2015-01-01T23:24:10.928562 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-01T23:24:10.990962 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-01T23:24:11.084562 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-01T23:24:11.162562 #10344] DEBUG -- :   [1m[35mProduct Load (15.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-01T23:24:11.287363 #10344] DEBUG -- :   [1m[36mLineItem Load (15.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-01T23:24:11.396563 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-01T23:24:11.443363 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-01T23:24:11.646163 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 01 Jan 2015 23:24:11 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:7ea63f0,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 01 Jan 2015 23:24:11 UTC +00:00]]
D, [2015-01-01T23:24:11.817764 #10344] DEBUG -- :   [1m[36m (109.2ms)[0m  [1mcommit transaction[0m
D, [2015-01-01T23:24:11.926964 #10344] DEBUG -- :   [1m[35mLineItem Load (15.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-01T23:24:12.067364 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-01T23:24:12.129764 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (140.4ms)
I, [2015-01-01T23:24:12.207764 #10344]  INFO -- :   Rendered carts/_cart.html.erb (327.6ms)
I, [2015-01-01T23:24:12.254564 #10344]  INFO -- :   Rendered line_items/create.js.erb (390.0ms)
I, [2015-01-01T23:24:12.301364 #10344]  INFO -- : Completed 200 OK in 1264ms (Views: 421.2ms | ActiveRecord: 171.6ms)
D, [2015-01-01T23:24:15.305885 #10344] DEBUG -- : 
D, [2015-01-01T23:24:15.321485 #10344] DEBUG -- : 
I, [2015-01-01T23:24:15.368285 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-01 23:24:15 +0000
I, [2015-01-01T23:24:15.508685 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-01T23:24:15.664686 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-01T23:24:15.836286 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-01T23:24:15.898686 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-01T23:24:16.039086 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-01T23:24:16.163887 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-01T23:24:23.546601 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-01T23:24:23.874201 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 01 Jan 2015 23:24:23 UTC +00:00], ["updated_at", Thu, 01 Jan 2015 23:24:23 UTC +00:00]]
D, [2015-01-01T23:24:23.983402 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 77  [["cart_id", nil], ["order_id", 64], ["updated_at", Thu, 01 Jan 2015 23:24:23 UTC +00:00]]
D, [2015-01-01T23:24:24.077002 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 78[0m  [["cart_id", nil], ["order_id", 64], ["updated_at", Thu, 01 Jan 2015 23:24:23 UTC +00:00]]
I, [2015-01-01T23:24:24.108202 #10344]  INFO -- : about to @payment.create
D, [2015-01-01T23:24:27.620708 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-01T23:24:27.714308 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-01T23:24:30.056812 #10344] DEBUG -- :   [1m[35m (15.6ms)[0m  SELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 64]]
I, [2015-01-01T23:25:38.016332 #10344]  INFO -- : in order=
I, [2015-01-01T23:25:38.031932 #10344]  INFO -- : in payment.create
I, [2015-01-01T23:25:38.281533 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}, {:item_list=>{:items=>{:name=>"penknife", :sku=>"PK1", :price=>14.99, :currency=>"GBP", :quantity=>1}}, :description=>"King Clothing"}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/64/confirm", "cancel_url"=>"http://localhost:3000/orders/64/cancel"}}
I, [2015-01-01T23:25:38.905534 #10344]  INFO -- : #<ActiveModel::Errors:0x000000056d5768 @base=#<Payment:0x0000000592f860 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000592cf70 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a130358 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a12b308 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a128e50 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a123e00 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">]>, @description="King Clothing">, {:item_list=>{:items=>{:name=>"penknife", :sku=>"PK1", :price=>14.99, :currency=>"GBP", :quantity=>1}}, :description=>"King Clothing"}], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000057b95d0 @error=nil, @return_url="http://localhost:3000/orders/64/confirm", @cancel_url="http://localhost:3000/orders/64/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000056d5768 ...>>, @messages={}>
I, [2015-01-01T23:25:38.936734 #10344]  INFO -- : got past invalid
I, [2015-01-01T23:25:39.045934 #10344]  INFO -- : PayPal-Request-Id: 49754bac-9f50-494b-9c52-b200ac29f256
I, [2015-01-01T23:25:39.092734 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-01T23:25:40.458437 #10344]  INFO -- : Response[400]: Bad Request, Duration: 1.335s
I, [2015-01-01T23:25:40.474037 #10344]  INFO -- : back from super
I, [2015-01-01T23:25:40.708037 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}, {:item_list=>{:items=>{:name=>"penknife", :sku=>"PK1", :price=>14.99, :currency=>"GBP", :quantity=>1}}, :description=>"King Clothing"}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/64/confirm", "cancel_url"=>"http://localhost:3000/orders/64/cancel"}}
I, [2015-01-02T08:18:55.322143 #10344]  INFO -- : @payment save just done
I, [2015-01-02T08:18:56.102144 #10344]  INFO -- : #<Payment:0x0000000592f860 @error={"name"=>"MALFORMED_REQUEST", "message"=>"Incoming JSON request does not map to API request", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#MALFORMED_REQUEST", "debug_id"=>"4765a7d73cb15"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000592cf70 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a130358 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a12b308 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a128e50 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a123e00 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x000000086be858 @error=nil>]>, @description="King Clothing">, {:item_list=>{:items=>{:name=>"penknife", :sku=>"PK1", :price=>14.99, :currency=>"GBP", :quantity=>1}}, :description=>"King Clothing"}], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000057b95d0 @error=nil, @return_url="http://localhost:3000/orders/64/confirm", @cancel_url="http://localhost:3000/orders/64/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000056d5768 @base=#<Payment:0x0000000592f860 ...>, @messages={}>, @request_id="49754bac-9f50-494b-9c52-b200ac29f256", @header={}>
I, [2015-01-02T08:18:56.835345 #10344]  INFO -- : #<Payment:0x0000000592f860 @error={"name"=>"MALFORMED_REQUEST", "message"=>"Incoming JSON request does not map to API request", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#MALFORMED_REQUEST", "debug_id"=>"4765a7d73cb15"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000592cf70 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a130358 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a12b308 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a128e50 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a123e00 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x000000086be858 @error=nil>]>, @description="King Clothing">, {:item_list=>{:items=>{:name=>"penknife", :sku=>"PK1", :price=>14.99, :currency=>"GBP", :quantity=>1}}, :description=>"King Clothing"}], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000057b95d0 @error=nil, @return_url="http://localhost:3000/orders/64/confirm", @cancel_url="http://localhost:3000/orders/64/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000056d5768 @base=#<Payment:0x0000000592f860 ...>, @messages={}>, @request_id="49754bac-9f50-494b-9c52-b200ac29f256", @header={}>
D, [2015-01-02T08:18:57.022545 #10344] DEBUG -- :   [1m[36m (156.0ms)[0m  [1mcommit transaction[0m
I, [2015-01-02T08:18:57.053746 #10344]  INFO -- : about to approve url
I, [2015-01-02T08:18:57.849347 #10344]  INFO -- : #<Payment:0x0000000592f860 @error={"name"=>"MALFORMED_REQUEST", "message"=>"Incoming JSON request does not map to API request", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#MALFORMED_REQUEST", "debug_id"=>"4765a7d73cb15"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000592cf70 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a130358 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a12b308 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a128e50 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a123e00 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x000000086be858 @error=nil>]>, @description="King Clothing">, {:item_list=>{:items=>{:name=>"penknife", :sku=>"PK1", :price=>14.99, :currency=>"GBP", :quantity=>1}}, :description=>"King Clothing"}], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000057b95d0 @error=nil, @return_url="http://localhost:3000/orders/64/confirm", @cancel_url="http://localhost:3000/orders/64/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000056d5768 @base=#<Payment:0x0000000592f860 ...>, @messages={}>, @request_id="49754bac-9f50-494b-9c52-b200ac29f256", @header={}>
I, [2015-01-02T08:18:57.896147 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-02T08:18:57.958547 #10344]  INFO -- : Completed 302 Found in 32082387ms (ActiveRecord: 218.4ms)
D, [2015-01-02T08:18:58.005347 #10344] DEBUG -- : 
D, [2015-01-02T08:18:58.020947 #10344] DEBUG -- : 
I, [2015-01-02T08:18:58.083347 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-02 08:18:58 +0000
I, [2015-01-02T08:19:00.439952 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-02T08:19:00.564752 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-02T08:19:00.751952 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-02T08:19:00.892352 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T08:19:01.174153 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-02T08:19:01.298953 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-02T08:19:03.921758 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-02T08:19:04.296158 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Fri, 02 Jan 2015 08:19:04 UTC +00:00], ["updated_at", Fri, 02 Jan 2015 08:19:04 UTC +00:00]]
I, [2015-01-02T08:19:04.342958 #10344]  INFO -- : about to @payment.create
D, [2015-01-02T08:19:04.405359 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  rollback transaction
I, [2015-01-02T08:19:04.452159 #10344]  INFO -- : Completed 500 Internal Server Error in 3965ms
F, [2015-01-02T08:19:04.966960 #10344] FATAL -- : 
SyntaxError (c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:49: syntax error, unexpected tSYMBEG, expecting '}'
          :name2 => "Pen knife", :sku2 =...
           ^
c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:49: syntax error, unexpected ',', expecting keyword_end
...         :name2 => "Pen knife", :sku2 => "Pen knife", :price...
...                               ^
c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:49: syntax error, unexpected ',', expecting keyword_end
...n knife", :sku2 => "Pen knife", :price2 => 2.99, :currency2 ...
...                               ^
c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:49: syntax error, unexpected ',', expecting keyword_end
...2 => 2.99, :currency2 => "GBP", :quantity2 => 1 }
...                               ^
c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:53: syntax error, unexpected '}', expecting keyword_end):
  app/models/order.rb:41:in `create_payment'
  app/controllers/orders_controller.rb:155:in `ppcheckout'


I, [2015-01-02T08:19:05.278960 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (15.6ms)
I, [2015-01-02T08:19:05.388160 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (15.6ms)
I, [2015-01-02T08:19:05.512961 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (15.6ms)
I, [2015-01-02T08:19:05.606561 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (343.2ms)
D, [2015-01-02T08:19:05.758367 #10344] DEBUG -- : 
D, [2015-01-02T08:19:05.778368 #10344] DEBUG -- : 
I, [2015-01-02T08:19:05.825371 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-02 08:19:05 +0000
I, [2015-01-02T08:19:05.933377 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-02T08:19:06.020382 #10344] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-02T08:19:06.087386 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-02T08:19:06.152389 #10344] DEBUG -- :   [1m[36mCart Load (1.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-02T08:19:06.243395 #10344] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-02T08:19:06.359401 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-02T08:19:08.947549 #10344] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-02T08:19:09.097558 #10344] DEBUG -- :   [1m[35mSQL (6.0ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Fri, 02 Jan 2015 08:19:08 UTC +00:00], ["updated_at", Fri, 02 Jan 2015 08:19:08 UTC +00:00]]
I, [2015-01-02T08:19:09.135560 #10344]  INFO -- : about to @payment.create
D, [2015-01-02T08:19:09.204564 #10344] DEBUG -- :   [1m[36m (12.0ms)[0m  [1mrollback transaction[0m
I, [2015-01-02T08:19:09.250567 #10344]  INFO -- : Completed 500 Internal Server Error in 3274ms
F, [2015-01-02T08:19:09.755595 #10344] FATAL -- : 
SyntaxError (c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:49: syntax error, unexpected tSYMBEG, expecting '}'
          :name2 => "Pen knife", :sku2 =...
           ^
c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:49: syntax error, unexpected ',', expecting keyword_end
...         :name2 => "Pen knife", :sku2 => "Pen knife", :price...
...                               ^
c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:49: syntax error, unexpected ',', expecting keyword_end
...n knife", :sku2 => "Pen knife", :price2 => 2.99, :currency2 ...
...                               ^
c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:49: syntax error, unexpected ',', expecting keyword_end
...2 => 2.99, :currency2 => "GBP", :quantity2 => 1 }
...                               ^
c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:53: syntax error, unexpected '}', expecting keyword_end):
  app/models/order.rb:41:in `create_payment'
  app/controllers/orders_controller.rb:155:in `ppcheckout'


I, [2015-01-02T08:19:10.066613 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (13.0ms)
I, [2015-01-02T08:19:10.197621 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (18.0ms)
I, [2015-01-02T08:19:10.337629 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (11.0ms)
I, [2015-01-02T08:19:10.435634 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (409.0ms)
D, [2015-01-02T08:19:54.537774 #10344] DEBUG -- : 
D, [2015-01-02T08:19:54.564374 #10344] DEBUG -- : 
I, [2015-01-02T08:19:54.601376 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-02 08:19:54 +0000
I, [2015-01-02T08:19:57.233527 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-02T08:19:57.367535 #10344] DEBUG -- :   [1m[35mCart Load (3.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T08:19:57.624549 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-02T08:19:57.863563 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (4.0ms)
I, [2015-01-02T08:19:57.904565 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (308.0ms)
D, [2015-01-02T08:19:58.205582 #10344] DEBUG -- :   [1m[35mLineItem Exists (2.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 36]]
D, [2015-01-02T08:19:58.291587 #10344] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-02T08:19:58.322589 #10344]  INFO -- :   Rendered collection (1.0ms)
I, [2015-01-02T08:19:58.431595 #10344]  INFO -- :   Rendered carts/_cart.html.erb (183.0ms)
I, [2015-01-02T08:19:58.500599 #10344]  INFO -- : Completed 200 OK in 1224ms (Views: 907.1ms | ActiveRecord: 31.0ms)
D, [2015-01-02T08:19:58.833618 #10344] DEBUG -- : 
D, [2015-01-02T08:19:58.887621 #10344] DEBUG -- : 
I, [2015-01-02T08:19:58.956625 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-02 08:19:58 +0000
D, [2015-01-02T08:19:59.021629 #10344] DEBUG -- : 
D, [2015-01-02T08:19:59.036630 #10344] DEBUG -- : 
I, [2015-01-02T08:19:59.071632 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-02 08:19:59 +0000
D, [2015-01-02T08:19:59.154637 #10344] DEBUG -- : 
D, [2015-01-02T08:19:59.168638 #10344] DEBUG -- : 
I, [2015-01-02T08:19:59.203640 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-02 08:19:59 +0000
D, [2015-01-02T08:19:59.261643 #10344] DEBUG -- : 
D, [2015-01-02T08:19:59.277644 #10344] DEBUG -- : 
I, [2015-01-02T08:19:59.320646 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-02 08:19:59 +0000
D, [2015-01-02T08:19:59.388650 #10344] DEBUG -- : 
D, [2015-01-02T08:19:59.402651 #10344] DEBUG -- : 
I, [2015-01-02T08:19:59.444653 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-02 08:19:59 +0000
D, [2015-01-02T08:19:59.508657 #10344] DEBUG -- : 
D, [2015-01-02T08:19:59.528658 #10344] DEBUG -- : 
I, [2015-01-02T08:19:59.563660 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-02 08:19:59 +0000
D, [2015-01-02T08:19:59.610663 #10344] DEBUG -- : 
D, [2015-01-02T08:19:59.621663 #10344] DEBUG -- : 
I, [2015-01-02T08:19:59.652665 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-02 08:19:59 +0000
D, [2015-01-02T08:19:59.700668 #10344] DEBUG -- : 
D, [2015-01-02T08:19:59.712669 #10344] DEBUG -- : 
I, [2015-01-02T08:19:59.743670 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-02 08:19:59 +0000
D, [2015-01-02T08:19:59.789673 #10344] DEBUG -- : 
D, [2015-01-02T08:19:59.800674 #10344] DEBUG -- : 
I, [2015-01-02T08:19:59.829675 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-02 08:19:59 +0000
D, [2015-01-02T08:19:59.873678 #10344] DEBUG -- : 
D, [2015-01-02T08:19:59.887679 #10344] DEBUG -- : 
I, [2015-01-02T08:19:59.922681 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-02 08:19:59 +0000
D, [2015-01-02T08:19:59.973684 #10344] DEBUG -- : 
D, [2015-01-02T08:19:59.991685 #10344] DEBUG -- : 
I, [2015-01-02T08:20:00.053688 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-02 08:19:59 +0000
D, [2015-01-02T08:20:00.126692 #10344] DEBUG -- : 
D, [2015-01-02T08:20:00.149694 #10344] DEBUG -- : 
I, [2015-01-02T08:20:00.210697 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-02 08:20:00 +0000
D, [2015-01-02T08:20:00.287702 #10344] DEBUG -- : 
D, [2015-01-02T08:20:00.308703 #10344] DEBUG -- : 
I, [2015-01-02T08:20:00.375707 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-02 08:20:00 +0000
D, [2015-01-02T08:20:00.540716 #10344] DEBUG -- : 
D, [2015-01-02T08:20:00.566717 #10344] DEBUG -- : 
I, [2015-01-02T08:20:00.635721 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-02 08:20:00 +0000
D, [2015-01-02T08:20:00.725727 #10344] DEBUG -- : 
D, [2015-01-02T08:20:00.749728 #10344] DEBUG -- : 
I, [2015-01-02T08:20:00.811732 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-02 08:20:00 +0000
D, [2015-01-02T08:20:00.887736 #10344] DEBUG -- : 
D, [2015-01-02T08:20:00.915737 #10344] DEBUG -- : 
I, [2015-01-02T08:20:00.983741 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-02 08:20:00 +0000
D, [2015-01-02T08:20:01.060746 #10344] DEBUG -- : 
D, [2015-01-02T08:20:01.081747 #10344] DEBUG -- : 
I, [2015-01-02T08:20:01.157751 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-02 08:20:01 +0000
D, [2015-01-02T08:20:01.236756 #10344] DEBUG -- : 
D, [2015-01-02T08:20:01.260757 #10344] DEBUG -- : 
I, [2015-01-02T08:20:01.322761 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-02 08:20:01 +0000
D, [2015-01-02T08:20:01.400765 #10344] DEBUG -- : 
D, [2015-01-02T08:20:01.427767 #10344] DEBUG -- : 
I, [2015-01-02T08:20:01.493771 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-02 08:20:01 +0000
D, [2015-01-02T08:20:01.579775 #10344] DEBUG -- : 
D, [2015-01-02T08:20:01.605777 #10344] DEBUG -- : 
I, [2015-01-02T08:20:01.667780 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-02 08:20:01 +0000
D, [2015-01-02T08:20:01.746785 #10344] DEBUG -- : 
D, [2015-01-02T08:20:01.770786 #10344] DEBUG -- : 
I, [2015-01-02T08:20:01.832790 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-02 08:20:01 +0000
D, [2015-01-02T08:20:01.909794 #10344] DEBUG -- : 
D, [2015-01-02T08:20:01.941796 #10344] DEBUG -- : 
I, [2015-01-02T08:20:02.011800 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-02 08:20:01 +0000
D, [2015-01-02T08:20:02.089805 #10344] DEBUG -- : 
D, [2015-01-02T08:20:02.115806 #10344] DEBUG -- : 
I, [2015-01-02T08:20:02.184810 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-02 08:20:02 +0000
D, [2015-01-02T08:20:02.282816 #10344] DEBUG -- : 
D, [2015-01-02T08:20:02.307817 #10344] DEBUG -- : 
I, [2015-01-02T08:20:02.369821 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-02 08:20:02 +0000
D, [2015-01-02T08:20:02.446825 #10344] DEBUG -- : 
D, [2015-01-02T08:20:02.474827 #10344] DEBUG -- : 
I, [2015-01-02T08:20:02.534830 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-02 08:20:02 +0000
D, [2015-01-02T08:20:02.618835 #10344] DEBUG -- : 
D, [2015-01-02T08:20:02.643836 #10344] DEBUG -- : 
I, [2015-01-02T08:20:02.707840 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-02 08:20:02 +0000
D, [2015-01-02T08:20:02.785844 #10344] DEBUG -- : 
D, [2015-01-02T08:20:02.822847 #10344] DEBUG -- : 
I, [2015-01-02T08:20:02.906851 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-02 08:20:02 +0000
D, [2015-01-02T08:20:02.996856 #10344] DEBUG -- : 
D, [2015-01-02T08:20:03.020858 #10344] DEBUG -- : 
I, [2015-01-02T08:20:03.090862 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-02 08:20:03 +0000
D, [2015-01-02T08:20:03.169866 #10344] DEBUG -- : 
D, [2015-01-02T08:20:03.194868 #10344] DEBUG -- : 
I, [2015-01-02T08:20:03.252871 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-02 08:20:03 +0000
D, [2015-01-02T08:20:03.337876 #10344] DEBUG -- : 
D, [2015-01-02T08:20:03.360877 #10344] DEBUG -- : 
I, [2015-01-02T08:20:03.416881 #10344]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-02 08:20:03 +0000
D, [2015-01-02T08:20:05.583306 #10344] DEBUG -- : 
D, [2015-01-02T08:20:05.614506 #10344] DEBUG -- : 
I, [2015-01-02T08:20:05.661306 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-02 08:20:05 +0000
I, [2015-01-02T08:20:05.817306 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-02T08:20:05.879706 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-02T08:20:05.973306 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T08:20:06.059109 #10344] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-02T08:20:06.160709 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-02T08:20:06.488310 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-02T08:20:06.535110 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-02T08:20:06.753510 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Fri, 02 Jan 2015 08:20:06 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:9cca098,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 02 Jan 2015 08:20:06 UTC +00:00]]
D, [2015-01-02T08:20:06.910912 #10344] DEBUG -- :   [1m[35m (126.2ms)[0m  commit transaction
D, [2015-01-02T08:20:07.035712 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-02T08:20:07.131312 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-02T08:20:07.209312 #10344]  INFO -- :   Rendered carts/_cart.html.erb (204.8ms)
I, [2015-01-02T08:20:07.240512 #10344]  INFO -- :   Rendered line_items/create.js.erb (267.2ms)
I, [2015-01-02T08:20:07.300714 #10344]  INFO -- : Completed 200 OK in 1361ms (Views: 329.6ms | ActiveRecord: 144.8ms)
D, [2015-01-02T08:20:07.487320 #10344] DEBUG -- : 
D, [2015-01-02T08:20:07.510321 #10344] DEBUG -- : 
I, [2015-01-02T08:20:07.563324 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-02 08:20:07 +0000
I, [2015-01-02T08:20:07.686331 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-02T08:20:07.750335 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-02T08:20:07.831339 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T08:20:07.912344 #10344] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-02T08:20:08.021350 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-02T08:20:08.132356 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-02T08:20:08.177359 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-02T08:20:08.373370 #10344] DEBUG -- :   [1m[36mSQL (10.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Fri, 02 Jan 2015 08:20:08 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:8486680,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 02 Jan 2015 08:20:08 UTC +00:00]]
D, [2015-01-02T08:20:08.558174 #10344] DEBUG -- :   [1m[35m (146.6ms)[0m  commit transaction
D, [2015-01-02T08:20:08.682974 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-02T08:20:08.823374 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-02T08:20:08.901374 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (124.8ms)
I, [2015-01-02T08:20:08.979375 #10344]  INFO -- :   Rendered carts/_cart.html.erb (343.2ms)
I, [2015-01-02T08:20:09.026175 #10344]  INFO -- :   Rendered line_items/create.js.erb (405.6ms)
I, [2015-01-02T08:20:09.072975 #10344]  INFO -- : Completed 200 OK in 1274ms (Views: 452.4ms | ActiveRecord: 167.6ms)
D, [2015-01-02T08:20:10.944638 #10344] DEBUG -- : 
D, [2015-01-02T08:20:10.960238 #10344] DEBUG -- : 
I, [2015-01-02T08:20:11.022638 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-02 08:20:10 +0000
I, [2015-01-02T08:20:11.178638 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-02T08:20:11.319038 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-02T08:20:11.537439 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-02T08:20:11.631039 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-02T08:20:11.818239 #10344] DEBUG -- :   [1m[35mLineItem Load (15.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-02T08:20:11.989840 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-02T08:21:32.857790 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-02T08:21:33.233191 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Fri, 02 Jan 2015 08:21:33 UTC +00:00], ["updated_at", Fri, 02 Jan 2015 08:21:33 UTC +00:00]]
D, [2015-01-02T08:21:33.389191 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 79[0m  [["cart_id", nil], ["order_id", 65], ["updated_at", Fri, 02 Jan 2015 08:21:33 UTC +00:00]]
D, [2015-01-02T08:21:33.545191 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 80  [["cart_id", nil], ["order_id", 65], ["updated_at", Fri, 02 Jan 2015 08:21:33 UTC +00:00]]
I, [2015-01-02T08:21:33.591991 #10344]  INFO -- : about to @payment.create
D, [2015-01-02T08:21:39.107801 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-02T08:21:39.217002 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-02T08:21:40.965205 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 65]]
W, [2015-01-02T08:21:41.043205 #10344]  WARN -- : undefined method `name1=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000005b223e8>
W, [2015-01-02T08:21:41.090005 #10344]  WARN -- : undefined method `sku1=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000005b223e8>
W, [2015-01-02T08:21:41.168005 #10344]  WARN -- : undefined method `price1=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000005b223e8>
W, [2015-01-02T08:21:41.230405 #10344]  WARN -- : undefined method `currency1=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000005b223e8>
W, [2015-01-02T08:21:41.292805 #10344]  WARN -- : undefined method `quantity1=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000005b223e8>
W, [2015-01-02T08:21:41.355205 #10344]  WARN -- : undefined method `name2=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000005b223e8>
W, [2015-01-02T08:21:41.417605 #10344]  WARN -- : undefined method `sku2=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000005b223e8>
W, [2015-01-02T08:21:41.495606 #10344]  WARN -- : undefined method `price2=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000005b223e8>
W, [2015-01-02T08:21:41.558006 #10344]  WARN -- : undefined method `currency2=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000005b223e8>
W, [2015-01-02T08:21:41.620406 #10344]  WARN -- : undefined method `quantity2=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000005b223e8>
I, [2015-01-02T08:22:38.369507 #10344]  INFO -- : in order=
I, [2015-01-02T08:22:38.400707 #10344]  INFO -- : in payment.create
I, [2015-01-02T08:22:38.509907 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing"}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/65/confirm", "cancel_url"=>"http://localhost:3000/orders/65/cancel"}}
I, [2015-01-02T08:22:38.993508 #10344]  INFO -- : #<ActiveModel::Errors:0x00000009528858 @base=#<Payment:0x00000007e9db10 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007e9ce90 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005b2a4a8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005b29bc0 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000005b231f8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005b223e8 @error=nil, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>>]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009569e48 @error=nil, @return_url="http://localhost:3000/orders/65/confirm", @cancel_url="http://localhost:3000/orders/65/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009528858 ...>>, @messages={}>
I, [2015-01-02T08:22:39.009108 #10344]  INFO -- : got past invalid
I, [2015-01-02T08:22:39.055908 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/oauth2/token
I, [2015-01-02T08:22:42.129114 #10344]  INFO -- : Response[200]: OK, Duration: 3.042s
I, [2015-01-02T08:22:42.207114 #10344]  INFO -- : PayPal-Request-Id: a8e31a25-2f72-4ff9-85f9-e4c6695f8879
I, [2015-01-02T08:22:42.269514 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-02T08:22:43.626716 #10344]  INFO -- : Response[201]: Created, Duration: 1.310s
I, [2015-01-02T08:22:43.657916 #10344]  INFO -- : back from super
I, [2015-01-02T08:22:44.110317 #10344]  INFO -- : {"id"=>"PAY-8WU145493P2869220KSTFKVI", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98", "details"=>{"subtotal"=>"38.98"}}, "description"=>"King Clothing"}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/65/confirm", "cancel_url"=>"http://localhost:3000/orders/65/cancel"}, "create_time"=>"2015-01-02T08:22:45Z", "update_time"=>"2015-01-02T08:22:45Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-8WU145493P2869220KSTFKVI", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-98696994YM0974523", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-8WU145493P2869220KSTFKVI/execute", "rel"=>"execute", "method"=>"POST"}]}
I, [2015-01-02T08:22:46.403521 #10344]  INFO -- : @payment save just done
I, [2015-01-02T08:22:47.200123 #10344]  INFO -- : #<Payment:0x00000007e9db10 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008700820 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000086fbd70 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000086fb7d0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000086fa8f8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000086fa380 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000086f94d0 @error=nil, @subtotal="38.98">>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009569e48 @error=nil, @return_url="http://localhost:3000/orders/65/confirm", @cancel_url="http://localhost:3000/orders/65/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009528858 @base=#<Payment:0x00000007e9db10 ...>, @messages={}>, @request_id="a8e31a25-2f72-4ff9-85f9-e4c6695f8879", @header={}, @id="PAY-8WU145493P2869220KSTFKVI", @create_time="2015-01-02T08:22:45Z", @update_time="2015-01-02T08:22:45Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000086f3670 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8WU145493P2869220KSTFKVI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086f2518 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-98696994YM0974523", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086f1258 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8WU145493P2869220KSTFKVI/execute", @rel="execute", @method="POST">]>
I, [2015-01-02T08:22:47.871924 #10344]  INFO -- : #<Payment:0x00000007e9db10 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008700820 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000086fbd70 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000086fb7d0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000086fa8f8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000086fa380 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000086f94d0 @error=nil, @subtotal="38.98">>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009569e48 @error=nil, @return_url="http://localhost:3000/orders/65/confirm", @cancel_url="http://localhost:3000/orders/65/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009528858 @base=#<Payment:0x00000007e9db10 ...>, @messages={}>, @request_id="a8e31a25-2f72-4ff9-85f9-e4c6695f8879", @header={}, @id="PAY-8WU145493P2869220KSTFKVI", @create_time="2015-01-02T08:22:45Z", @update_time="2015-01-02T08:22:45Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000086f3670 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8WU145493P2869220KSTFKVI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086f2518 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-98696994YM0974523", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086f1258 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8WU145493P2869220KSTFKVI/execute", @rel="execute", @method="POST">]>
D, [2015-01-02T08:22:48.043524 #10344] DEBUG -- :   [1m[35m (124.8ms)[0m  commit transaction
I, [2015-01-02T08:22:48.059124 #10344]  INFO -- : about to approve url
I, [2015-01-02T08:22:48.706726 #10344]  INFO -- : #<Payment:0x00000007e9db10 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008700820 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000086fbd70 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000086fb7d0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000086fa8f8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000086fa380 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000086f94d0 @error=nil, @subtotal="38.98">>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009569e48 @error=nil, @return_url="http://localhost:3000/orders/65/confirm", @cancel_url="http://localhost:3000/orders/65/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009528858 @base=#<Payment:0x00000007e9db10 ...>, @messages={}>, @request_id="a8e31a25-2f72-4ff9-85f9-e4c6695f8879", @header={}, @id="PAY-8WU145493P2869220KSTFKVI", @create_time="2015-01-02T08:22:45Z", @update_time="2015-01-02T08:22:45Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000086f3670 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8WU145493P2869220KSTFKVI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086f2518 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-98696994YM0974523", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086f1258 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8WU145493P2869220KSTFKVI/execute", @rel="execute", @method="POST">]>
I, [2015-01-02T08:22:49.534527 #10344]  INFO -- : #<Payment:0x00000007e9db10 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008700820 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000086fbd70 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000086fb7d0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000086fa8f8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000086fa380 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000086f94d0 @error=nil, @subtotal="38.98">>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009569e48 @error=nil, @return_url="http://localhost:3000/orders/65/confirm", @cancel_url="http://localhost:3000/orders/65/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009528858 @base=#<Payment:0x00000007e9db10 ...>, @messages={}>, @request_id="a8e31a25-2f72-4ff9-85f9-e4c6695f8879", @header={}, @id="PAY-8WU145493P2869220KSTFKVI", @create_time="2015-01-02T08:22:45Z", @update_time="2015-01-02T08:22:45Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000086f3670 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8WU145493P2869220KSTFKVI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086f2518 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-98696994YM0974523", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086f1258 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8WU145493P2869220KSTFKVI/execute", @rel="execute", @method="POST">]>
I, [2015-01-02T08:22:49.596927 #10344]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-98696994YM0974523
I, [2015-01-02T08:22:50.454929 #10344]  INFO -- : #<Payment:0x00000007e9db10 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008700820 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000086fbd70 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000086fb7d0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000086fa8f8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000086fa380 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000086f94d0 @error=nil, @subtotal="38.98">>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009569e48 @error=nil, @return_url="http://localhost:3000/orders/65/confirm", @cancel_url="http://localhost:3000/orders/65/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009528858 @base=#<Payment:0x00000007e9db10 ...>, @messages={}>, @request_id="a8e31a25-2f72-4ff9-85f9-e4c6695f8879", @header={}, @id="PAY-8WU145493P2869220KSTFKVI", @create_time="2015-01-02T08:22:45Z", @update_time="2015-01-02T08:22:45Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000086f3670 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8WU145493P2869220KSTFKVI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086f2518 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-98696994YM0974523", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000086f1258 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8WU145493P2869220KSTFKVI/execute", @rel="execute", @method="POST">]>
I, [2015-01-02T08:22:50.517329 #10344]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-98696994YM0974523
I, [2015-01-02T08:22:50.564129 #10344]  INFO -- : Completed 403 Forbidden in 159354ms (ActiveRecord: 187.2ms)
D, [2015-01-02T08:27:49.648646 #10344] DEBUG -- : 
D, [2015-01-02T08:27:49.664246 #10344] DEBUG -- : 
I, [2015-01-02T08:27:49.711046 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-02 08:27:49 +0000
I, [2015-01-02T08:27:49.820246 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-02T08:27:49.867046 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-02T08:27:49.963047 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-02T08:27:50.041048 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-02T08:27:50.165848 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-02T08:27:50.259448 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-02T08:27:50.306248 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-02T08:27:50.518049 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Fri, 02 Jan 2015 08:27:50 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:5b77438,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 02 Jan 2015 08:27:50 UTC +00:00]]
D, [2015-01-02T08:27:50.658449 #10344] DEBUG -- :   [1m[36m (109.2ms)[0m  [1mcommit transaction[0m
D, [2015-01-02T08:27:50.767649 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-02T08:27:50.861250 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-02T08:27:50.946651 #10344]  INFO -- :   Rendered carts/_cart.html.erb (207.2ms)
I, [2015-01-02T08:27:50.993451 #10344]  INFO -- :   Rendered line_items/create.js.erb (257.0ms)
I, [2015-01-02T08:27:51.055054 #10344]  INFO -- : Completed 200 OK in 1111ms (Views: 335.0ms | ActiveRecord: 124.8ms)
D, [2015-01-02T08:27:51.125058 #10344] DEBUG -- : 
D, [2015-01-02T08:27:51.149059 #10344] DEBUG -- : 
I, [2015-01-02T08:27:51.213063 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-02 08:27:51 +0000
I, [2015-01-02T08:27:51.314069 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-02T08:27:51.392073 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-02T08:27:51.490079 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-02T08:27:51.598085 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-02T08:27:51.726092 #10344] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-02T08:27:51.848099 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-02T08:27:51.904102 #10344] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-02T08:27:52.131115 #10344] DEBUG -- :   [1m[35mSQL (9.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Fri, 02 Jan 2015 08:27:51 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:a0353b8,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 02 Jan 2015 08:27:51 UTC +00:00]]
D, [2015-01-02T08:27:52.291719 #10344] DEBUG -- :   [1m[36m (106.8ms)[0m  [1mcommit transaction[0m
D, [2015-01-02T08:27:52.416519 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-02T08:27:52.572520 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-02T08:27:52.650520 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (156.0ms)
I, [2015-01-02T08:27:52.744120 #10344]  INFO -- :   Rendered carts/_cart.html.erb (374.4ms)
I, [2015-01-02T08:27:52.790920 #10344]  INFO -- :   Rendered line_items/create.js.erb (436.8ms)
I, [2015-01-02T08:27:52.853320 #10344]  INFO -- : Completed 200 OK in 1398ms (Views: 499.2ms | ActiveRecord: 125.8ms)
D, [2015-01-02T08:27:54.397982 #10344] DEBUG -- : 
D, [2015-01-02T08:27:54.429182 #10344] DEBUG -- : 
I, [2015-01-02T08:27:54.491582 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-02 08:27:54 +0000
I, [2015-01-02T08:27:54.631982 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-02T08:27:54.709982 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-02T08:27:54.803582 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-02T08:27:54.881583 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T08:27:55.006383 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-02T08:27:55.146783 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-02T08:28:00.891197 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-02T08:28:01.000397 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Fri, 02 Jan 2015 08:28:00 UTC +00:00], ["updated_at", Fri, 02 Jan 2015 08:28:00 UTC +00:00]]
D, [2015-01-02T08:28:01.140797 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 81  [["cart_id", nil], ["order_id", 66], ["updated_at", Fri, 02 Jan 2015 08:28:01 UTC +00:00]]
D, [2015-01-02T08:28:01.265597 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 82[0m  [["cart_id", nil], ["order_id", 66], ["updated_at", Fri, 02 Jan 2015 08:28:01 UTC +00:00]]
I, [2015-01-02T08:28:01.312397 #10344]  INFO -- : about to @payment.create
D, [2015-01-02T09:13:26.080572 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-02T09:13:26.189772 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-02T09:13:27.205774 #10344] DEBUG -- :   [1m[35m (15.6ms)[0m  SELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 66]]
W, [2015-01-02T09:13:27.253574 #10344]  WARN -- : undefined method `name1=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000009d6ca78>
W, [2015-01-02T09:13:27.317974 #10344]  WARN -- : undefined method `sku1=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000009d6ca78>
W, [2015-01-02T09:13:27.380374 #10344]  WARN -- : undefined method `price1=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000009d6ca78>
W, [2015-01-02T09:13:27.427174 #10344]  WARN -- : undefined method `currency1=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000009d6ca78>
W, [2015-01-02T09:13:27.489575 #10344]  WARN -- : undefined method `quantity1=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000009d6ca78>
W, [2015-01-02T09:13:27.551975 #10344]  WARN -- : undefined method `name2=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000009d6ca78>
W, [2015-01-02T09:13:27.614375 #10344]  WARN -- : undefined method `sku2=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000009d6ca78>
W, [2015-01-02T09:13:27.692375 #10344]  WARN -- : undefined method `price2=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000009d6ca78>
W, [2015-01-02T09:13:27.754775 #10344]  WARN -- : undefined method `currency2=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000009d6ca78>
W, [2015-01-02T09:13:27.818175 #10344]  WARN -- : undefined method `quantity2=' for #<PayPal::SDK::REST::DataTypes::Item:0x00000009d6ca78>
I, [2015-01-02T09:13:28.832177 #10344]  INFO -- : in order=
I, [2015-01-02T09:13:28.863377 #10344]  INFO -- : in payment.create
I, [2015-01-02T09:13:28.988177 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing"}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/66/confirm", "cancel_url"=>"http://localhost:3000/orders/66/cancel"}}
I, [2015-01-02T09:13:29.424978 #10344]  INFO -- : #<ActiveModel::Errors:0x00000009a4ed78 @base=#<Payment:0x00000008136250 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008135648 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009d6f368 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009d6ecb0 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009d6dc48 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009d6ca78 @error=nil, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>>]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009afb398 @error=nil, @return_url="http://localhost:3000/orders/66/confirm", @cancel_url="http://localhost:3000/orders/66/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009a4ed78 ...>>, @messages={}>
I, [2015-01-02T09:13:29.440578 #10344]  INFO -- : got past invalid
I, [2015-01-02T09:13:29.471778 #10344]  INFO -- : PayPal-Request-Id: fedb8b9b-4acf-4ae6-82c0-bc415f27de97
I, [2015-01-02T09:13:29.502978 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-02T09:13:31.109781 #10344]  INFO -- : Response[201]: Created, Duration: 1.560s
I, [2015-01-02T09:13:31.140981 #10344]  INFO -- : back from super
I, [2015-01-02T09:13:31.593382 #10344]  INFO -- : {"id"=>"PAY-256455325L246281RKSTGCPI", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98", "details"=>{"subtotal"=>"38.98"}}, "description"=>"King Clothing"}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/66/confirm", "cancel_url"=>"http://localhost:3000/orders/66/cancel"}, "create_time"=>"2015-01-02T09:13:33Z", "update_time"=>"2015-01-02T09:13:33Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-256455325L246281RKSTGCPI", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-3MR386158B275522M", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-256455325L246281RKSTGCPI/execute", "rel"=>"execute", "method"=>"POST"}]}
I, [2015-01-02T09:13:32.888184 #10344]  INFO -- : @payment save just done
I, [2015-01-02T09:13:33.764786 #10344]  INFO -- : #<Payment:0x00000008136250 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000098a2858 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000098a1908 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000098a12c8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000098a02d8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000989bcb0 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x0000000989aec8 @error=nil, @subtotal="38.98">>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009afb398 @error=nil, @return_url="http://localhost:3000/orders/66/confirm", @cancel_url="http://localhost:3000/orders/66/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009a4ed78 @base=#<Payment:0x00000008136250 ...>, @messages={}>, @request_id="fedb8b9b-4acf-4ae6-82c0-bc415f27de97", @header={}, @id="PAY-256455325L246281RKSTGCPI", @create_time="2015-01-02T09:13:33Z", @update_time="2015-01-02T09:13:33Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009899230 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-256455325L246281RKSTGCPI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009893e98 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-3MR386158B275522M", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000098926d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-256455325L246281RKSTGCPI/execute", @rel="execute", @method="POST">]>
I, [2015-01-02T09:13:34.685187 #10344]  INFO -- : #<Payment:0x00000008136250 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000098a2858 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000098a1908 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000098a12c8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000098a02d8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000989bcb0 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x0000000989aec8 @error=nil, @subtotal="38.98">>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009afb398 @error=nil, @return_url="http://localhost:3000/orders/66/confirm", @cancel_url="http://localhost:3000/orders/66/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009a4ed78 @base=#<Payment:0x00000008136250 ...>, @messages={}>, @request_id="fedb8b9b-4acf-4ae6-82c0-bc415f27de97", @header={}, @id="PAY-256455325L246281RKSTGCPI", @create_time="2015-01-02T09:13:33Z", @update_time="2015-01-02T09:13:33Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009899230 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-256455325L246281RKSTGCPI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009893e98 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-3MR386158B275522M", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000098926d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-256455325L246281RKSTGCPI/execute", @rel="execute", @method="POST">]>
D, [2015-01-02T09:13:34.872388 #10344] DEBUG -- :   [1m[36m (140.4ms)[0m  [1mcommit transaction[0m
I, [2015-01-02T09:13:34.887988 #10344]  INFO -- : about to approve url
I, [2015-01-02T09:13:35.699189 #10344]  INFO -- : #<Payment:0x00000008136250 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000098a2858 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000098a1908 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000098a12c8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000098a02d8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000989bcb0 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x0000000989aec8 @error=nil, @subtotal="38.98">>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009afb398 @error=nil, @return_url="http://localhost:3000/orders/66/confirm", @cancel_url="http://localhost:3000/orders/66/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009a4ed78 @base=#<Payment:0x00000008136250 ...>, @messages={}>, @request_id="fedb8b9b-4acf-4ae6-82c0-bc415f27de97", @header={}, @id="PAY-256455325L246281RKSTGCPI", @create_time="2015-01-02T09:13:33Z", @update_time="2015-01-02T09:13:33Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009899230 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-256455325L246281RKSTGCPI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009893e98 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-3MR386158B275522M", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000098926d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-256455325L246281RKSTGCPI/execute", @rel="execute", @method="POST">]>
I, [2015-01-02T09:13:36.495790 #10344]  INFO -- : #<Payment:0x00000008136250 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000098a2858 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000098a1908 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000098a12c8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000098a02d8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000989bcb0 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x0000000989aec8 @error=nil, @subtotal="38.98">>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009afb398 @error=nil, @return_url="http://localhost:3000/orders/66/confirm", @cancel_url="http://localhost:3000/orders/66/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009a4ed78 @base=#<Payment:0x00000008136250 ...>, @messages={}>, @request_id="fedb8b9b-4acf-4ae6-82c0-bc415f27de97", @header={}, @id="PAY-256455325L246281RKSTGCPI", @create_time="2015-01-02T09:13:33Z", @update_time="2015-01-02T09:13:33Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009899230 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-256455325L246281RKSTGCPI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009893e98 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-3MR386158B275522M", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000098926d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-256455325L246281RKSTGCPI/execute", @rel="execute", @method="POST">]>
I, [2015-01-02T09:13:36.558191 #10344]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-3MR386158B275522M
I, [2015-01-02T09:13:37.261192 #10344]  INFO -- : #<Payment:0x00000008136250 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000098a2858 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000098a1908 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000098a12c8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000098a02d8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000989bcb0 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x0000000989aec8 @error=nil, @subtotal="38.98">>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009afb398 @error=nil, @return_url="http://localhost:3000/orders/66/confirm", @cancel_url="http://localhost:3000/orders/66/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009a4ed78 @base=#<Payment:0x00000008136250 ...>, @messages={}>, @request_id="fedb8b9b-4acf-4ae6-82c0-bc415f27de97", @header={}, @id="PAY-256455325L246281RKSTGCPI", @create_time="2015-01-02T09:13:33Z", @update_time="2015-01-02T09:13:33Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009899230 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-256455325L246281RKSTGCPI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009893e98 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-3MR386158B275522M", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000098926d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-256455325L246281RKSTGCPI/execute", @rel="execute", @method="POST">]>
I, [2015-01-02T09:13:37.307992 #10344]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-3MR386158B275522M
I, [2015-01-02T09:13:37.339192 #10344]  INFO -- : Completed 403 Forbidden in 2742676ms (ActiveRecord: 171.6ms)
D, [2015-01-02T09:14:12.170904 #10344] DEBUG -- : 
D, [2015-01-02T09:14:12.202104 #10344] DEBUG -- : 
I, [2015-01-02T09:14:12.264504 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-02 09:14:12 +0000
I, [2015-01-02T09:14:15.001311 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-02T09:14:15.048111 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-02T09:14:15.204111 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T09:14:15.438112 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-02T09:14:15.765712 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-02T09:14:16.077713 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-02T09:14:16.124513 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-02T09:14:16.328313 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Fri, 02 Jan 2015 09:14:16 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:95f2158,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 02 Jan 2015 09:14:16 UTC +00:00]]
D, [2015-01-02T09:14:16.468713 #10344] DEBUG -- :   [1m[35m (93.6ms)[0m  commit transaction
D, [2015-01-02T09:14:16.593514 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-02T09:14:16.687114 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-02T09:14:16.811914 #10344]  INFO -- :   Rendered carts/_cart.html.erb (249.6ms)
I, [2015-01-02T09:14:16.843114 #10344]  INFO -- :   Rendered line_items/create.js.erb (312.0ms)
I, [2015-01-02T09:14:16.905514 #10344]  INFO -- : Completed 200 OK in 1811ms (Views: 374.4ms | ActiveRecord: 109.2ms)
D, [2015-01-02T09:14:18.634579 #10344] DEBUG -- : 
D, [2015-01-02T09:14:18.665779 #10344] DEBUG -- : 
I, [2015-01-02T09:14:18.712579 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-02 09:14:18 +0000
I, [2015-01-02T09:14:18.837379 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-02T09:14:18.899779 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-02T09:14:19.008979 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T09:14:19.084380 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-02T09:14:19.193580 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-02T09:14:19.302780 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-02T09:14:19.349581 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-02T09:14:19.567981 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Fri, 02 Jan 2015 09:14:19 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:602b5d8,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 02 Jan 2015 09:14:19 UTC +00:00]]
D, [2015-01-02T09:14:19.708381 #10344] DEBUG -- :   [1m[35m (93.6ms)[0m  commit transaction
D, [2015-01-02T09:14:19.833181 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-02T09:14:19.958982 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-02T09:14:20.036982 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (125.8ms)
I, [2015-01-02T09:14:20.114982 #10344]  INFO -- :   Rendered carts/_cart.html.erb (344.2ms)
I, [2015-01-02T09:14:20.161782 #10344]  INFO -- :   Rendered line_items/create.js.erb (375.4ms)
I, [2015-01-02T09:14:20.208582 #10344]  INFO -- : Completed 200 OK in 1262ms (Views: 453.4ms | ActiveRecord: 95.6ms)
D, [2015-01-02T09:14:21.728242 #10344] DEBUG -- : 
D, [2015-01-02T09:14:21.759442 #10344] DEBUG -- : 
I, [2015-01-02T09:14:21.821842 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-02 09:14:21 +0000
I, [2015-01-02T09:14:21.993443 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-02T09:14:22.149443 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-02T09:14:22.363046 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-02T09:14:22.456646 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-02T09:14:22.643846 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-02T09:14:22.799846 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-02T09:14:27.674857 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-02T09:14:28.002458 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Fri, 02 Jan 2015 09:14:27 UTC +00:00], ["updated_at", Fri, 02 Jan 2015 09:14:27 UTC +00:00]]
D, [2015-01-02T09:14:28.142858 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 83[0m  [["cart_id", nil], ["order_id", 67], ["updated_at", Fri, 02 Jan 2015 09:14:28 UTC +00:00]]
D, [2015-01-02T09:14:28.267658 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 84  [["cart_id", nil], ["order_id", 67], ["updated_at", Fri, 02 Jan 2015 09:14:28 UTC +00:00]]
I, [2015-01-02T09:14:28.298858 #10344]  INFO -- : about to @payment.create
D, [2015-01-02T09:14:28.361258 #10344] DEBUG -- :   [1m[36m (15.6ms)[0m  [1mrollback transaction[0m
I, [2015-01-02T09:14:28.408058 #10344]  INFO -- : Completed 500 Internal Server Error in 6383ms
F, [2015-01-02T09:14:28.579659 #10344] FATAL -- : 
SyntaxError (c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:53: syntax error, unexpected keyword_self, expecting keyword_end
     }self.transactions[0].item_list.me...
          ^):
  app/models/order.rb:41:in `create_payment'
  app/controllers/orders_controller.rb:155:in `ppcheckout'


I, [2015-01-02T09:14:28.861459 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (15.6ms)
I, [2015-01-02T09:14:28.970659 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (15.6ms)
I, [2015-01-02T09:14:29.095460 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (0.0ms)
I, [2015-01-02T09:14:29.189060 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (344.2ms)
D, [2015-01-02T09:14:29.285462 #10344] DEBUG -- : 
D, [2015-01-02T09:14:29.300463 #10344] DEBUG -- : 
I, [2015-01-02T09:14:29.340465 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-02 09:14:29 +0000
I, [2015-01-02T09:14:29.442471 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-02T09:14:29.507474 #10344] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-02T09:14:29.564478 #10344] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-02T09:14:29.624481 #10344] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T09:14:29.698485 #10344] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-02T09:14:29.799491 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-02T09:14:31.601594 #10344] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-02T09:14:31.736602 #10344] DEBUG -- :   [1m[36mSQL (6.0ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Fri, 02 Jan 2015 09:14:31 UTC +00:00], ["updated_at", Fri, 02 Jan 2015 09:14:31 UTC +00:00]]
D, [2015-01-02T09:14:31.885610 #10344] DEBUG -- :   [1m[35mSQL (3.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 83  [["cart_id", nil], ["order_id", 67], ["updated_at", Fri, 02 Jan 2015 09:14:31 UTC +00:00]]
D, [2015-01-02T09:14:32.022618 #10344] DEBUG -- :   [1m[36mSQL (3.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 84[0m  [["cart_id", nil], ["order_id", 67], ["updated_at", Fri, 02 Jan 2015 09:14:31 UTC +00:00]]
I, [2015-01-02T09:14:32.060620 #10344]  INFO -- : about to @payment.create
D, [2015-01-02T09:14:32.133625 #10344] DEBUG -- :   [1m[35m (13.0ms)[0m  rollback transaction
I, [2015-01-02T09:14:32.183628 #10344]  INFO -- : Completed 500 Internal Server Error in 2693ms
F, [2015-01-02T09:14:32.372638 #10344] FATAL -- : 
SyntaxError (c:/Users/Simon/rails_projects/kingclothing/app/models/payment.rb:53: syntax error, unexpected keyword_self, expecting keyword_end
     }self.transactions[0].item_list.me...
          ^):
  app/models/order.rb:41:in `create_payment'
  app/controllers/orders_controller.rb:155:in `ppcheckout'


I, [2015-01-02T09:14:32.688656 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (13.0ms)
I, [2015-01-02T09:14:32.856666 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (49.0ms)
I, [2015-01-02T09:14:32.988674 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (11.0ms)
I, [2015-01-02T09:14:33.085679 #10344]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (445.0ms)
D, [2015-01-02T09:15:07.541393 #10344] DEBUG -- : 
D, [2015-01-02T09:15:07.560395 #10344] DEBUG -- : 
I, [2015-01-02T09:15:07.608397 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-02 09:15:07 +0000
I, [2015-01-02T09:15:10.431817 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-02T09:15:10.556617 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-02T09:15:10.743817 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-02T09:15:10.884218 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-02T09:15:11.210426 #10344] DEBUG -- :   [1m[35mLineItem Load (4.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-02T09:15:11.555428 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-02T09:15:16.143845 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-02T09:15:16.518246 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Fri, 02 Jan 2015 09:15:16 UTC +00:00], ["updated_at", Fri, 02 Jan 2015 09:15:16 UTC +00:00]]
D, [2015-01-02T09:15:16.658646 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 83[0m  [["cart_id", nil], ["order_id", 67], ["updated_at", Fri, 02 Jan 2015 09:15:16 UTC +00:00]]
D, [2015-01-02T09:15:16.799046 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 84  [["cart_id", nil], ["order_id", 67], ["updated_at", Fri, 02 Jan 2015 09:15:16 UTC +00:00]]
I, [2015-01-02T09:15:16.830246 #10344]  INFO -- : about to @payment.create
D, [2015-01-02T09:15:19.783652 #10344] DEBUG -- :   [1m[36mProduct Load (15.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-02T09:15:19.986452 #10344] DEBUG -- :   [1m[35mProduct Load (15.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-02T09:15:21.485055 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 67]]
W, [2015-01-02T09:15:21.531855 #10344]  WARN -- : undefined method `name=' for #<PayPal::SDK::REST::DataTypes::ItemList:0x0000000570a300>
W, [2015-01-02T09:15:21.595255 #10344]  WARN -- : undefined method `sku=' for #<PayPal::SDK::REST::DataTypes::ItemList:0x0000000570a300>
W, [2015-01-02T09:15:21.657655 #10344]  WARN -- : undefined method `price=' for #<PayPal::SDK::REST::DataTypes::ItemList:0x0000000570a300>
W, [2015-01-02T09:15:21.735655 #10344]  WARN -- : undefined method `currency=' for #<PayPal::SDK::REST::DataTypes::ItemList:0x0000000570a300>
W, [2015-01-02T09:15:21.798055 #10344]  WARN -- : undefined method `quantity=' for #<PayPal::SDK::REST::DataTypes::ItemList:0x0000000570a300>
I, [2015-01-02T09:15:53.810130 #10344]  INFO -- : in order=
I, [2015-01-02T09:15:53.825730 #10344]  INFO -- : in payment.create
I, [2015-01-02T09:15:54.012931 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/67/confirm", "cancel_url"=>"http://localhost:3000/orders/67/cancel"}}
I, [2015-01-02T09:15:54.747132 #10344]  INFO -- : #<ActiveModel::Errors:0x00000009c68e38 @base=#<Payment:0x000000098a3d48 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000098a28f8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000571a0e8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005719620 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000570a300 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005708b40 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009d17d48 @error=nil, @return_url="http://localhost:3000/orders/67/confirm", @cancel_url="http://localhost:3000/orders/67/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009c68e38 ...>>, @messages={}>
I, [2015-01-02T09:15:54.778332 #10344]  INFO -- : got past invalid
I, [2015-01-02T09:15:54.856332 #10344]  INFO -- : PayPal-Request-Id: 2e332af2-75db-4e77-aab0-eea961a0bb7e
I, [2015-01-02T09:15:54.887532 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-02T09:15:55.886934 #10344]  INFO -- : Response[400]: Bad Request, Duration: 0.968s
I, [2015-01-02T09:15:55.902534 #10344]  INFO -- :  in error=
I, [2015-01-02T09:15:55.919134 #10344]  INFO -- : back from super
I, [2015-01-02T09:15:56.043934 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/67/confirm", "cancel_url"=>"http://localhost:3000/orders/67/cancel"}}
I, [2015-01-02T09:15:57.464537 #10344]  INFO -- : @payment save just done
I, [2015-01-02T09:15:58.354738 #10344]  INFO -- : #<Payment:0x000000098a3d48 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"9a7e4273ca85e"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000098a28f8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000571a0e8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005719620 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000570a300 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005708b40 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009d17d48 @error=nil, @return_url="http://localhost:3000/orders/67/confirm", @cancel_url="http://localhost:3000/orders/67/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009c68e38 @base=#<Payment:0x000000098a3d48 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="2e332af2-75db-4e77-aab0-eea961a0bb7e", @header={}>
I, [2015-01-02T09:15:59.259540 #10344]  INFO -- : #<Payment:0x000000098a3d48 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"9a7e4273ca85e"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000098a28f8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000571a0e8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005719620 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000570a300 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005708b40 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009d17d48 @error=nil, @return_url="http://localhost:3000/orders/67/confirm", @cancel_url="http://localhost:3000/orders/67/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009c68e38 @base=#<Payment:0x000000098a3d48 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="2e332af2-75db-4e77-aab0-eea961a0bb7e", @header={}>
D, [2015-01-02T09:15:59.415540 #10344] DEBUG -- :   [1m[35m (109.2ms)[0m  commit transaction
I, [2015-01-02T09:15:59.446740 #10344]  INFO -- : about to approve url
I, [2015-01-02T09:16:00.292142 #10344]  INFO -- : #<Payment:0x000000098a3d48 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"9a7e4273ca85e"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000098a28f8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000571a0e8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005719620 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000570a300 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005708b40 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009d17d48 @error=nil, @return_url="http://localhost:3000/orders/67/confirm", @cancel_url="http://localhost:3000/orders/67/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009c68e38 @base=#<Payment:0x000000098a3d48 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="2e332af2-75db-4e77-aab0-eea961a0bb7e", @header={}>
I, [2015-01-02T09:16:00.323342 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-02T09:16:00.370142 #10344]  INFO -- : Completed 302 Found in 49892ms (ActiveRecord: 230.4ms)
D, [2015-01-02T09:16:14.289044 #10344] DEBUG -- : 
D, [2015-01-02T09:16:14.309045 #10344] DEBUG -- : 
I, [2015-01-02T09:16:14.352047 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-02 09:16:14 +0000
I, [2015-01-02T09:16:14.489055 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-02T09:16:14.576060 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-02T09:16:14.687066 #10344] DEBUG -- :   [1m[35mProduct Load (3.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-02T09:16:14.771071 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (5.0ms)
I, [2015-01-02T09:16:14.823074 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (162.0ms)
D, [2015-01-02T09:16:15.094090 #10344] DEBUG -- :   [1m[36mLineItem Exists (2.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-02T09:16:15.186095 #10344] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-02T09:16:15.222097 #10344]  INFO -- :   Rendered collection (1.0ms)
I, [2015-01-02T09:16:15.343104 #10344]  INFO -- :   Rendered carts/_cart.html.erb (198.0ms)
I, [2015-01-02T09:16:15.418108 #10344]  INFO -- : Completed 200 OK in 883ms (Views: 779.0ms | ActiveRecord: 9.0ms)
D, [2015-01-02T09:16:15.726126 #10344] DEBUG -- : 
D, [2015-01-02T09:16:15.751127 #10344] DEBUG -- : 
I, [2015-01-02T09:16:15.828132 #10344]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-02 09:16:15 +0000
D, [2015-01-02T09:16:15.903136 #10344] DEBUG -- : 
D, [2015-01-02T09:16:15.928137 #10344] DEBUG -- : 
I, [2015-01-02T09:16:15.970140 #10344]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-02 09:16:15 +0000
D, [2015-01-02T09:16:16.049144 #10344] DEBUG -- : 
D, [2015-01-02T09:16:16.067145 #10344] DEBUG -- : 
I, [2015-01-02T09:16:16.118148 #10344]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-02 09:16:16 +0000
D, [2015-01-02T09:16:16.198153 #10344] DEBUG -- : 
D, [2015-01-02T09:16:16.226154 #10344] DEBUG -- : 
I, [2015-01-02T09:16:16.269157 #10344]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-02 09:16:16 +0000
D, [2015-01-02T09:16:16.349161 #10344] DEBUG -- : 
D, [2015-01-02T09:16:16.380163 #10344] DEBUG -- : 
I, [2015-01-02T09:16:16.430166 #10344]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-02 09:16:16 +0000
D, [2015-01-02T09:16:16.507171 #10344] DEBUG -- : 
D, [2015-01-02T09:16:16.529172 #10344] DEBUG -- : 
I, [2015-01-02T09:16:16.583175 #10344]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-02 09:16:16 +0000
D, [2015-01-02T09:16:16.677180 #10344] DEBUG -- : 
D, [2015-01-02T09:16:16.706182 #10344] DEBUG -- : 
I, [2015-01-02T09:16:16.787187 #10344]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-02 09:16:16 +0000
D, [2015-01-02T09:16:16.871191 #10344] DEBUG -- : 
D, [2015-01-02T09:16:16.890192 #10344] DEBUG -- : 
I, [2015-01-02T09:16:16.938195 #10344]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-02 09:16:16 +0000
D, [2015-01-02T09:16:17.034201 #10344] DEBUG -- : 
D, [2015-01-02T09:16:17.055202 #10344] DEBUG -- : 
I, [2015-01-02T09:16:17.107205 #10344]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-02 09:16:17 +0000
D, [2015-01-02T09:16:17.186209 #10344] DEBUG -- : 
D, [2015-01-02T09:16:17.205210 #10344] DEBUG -- : 
I, [2015-01-02T09:16:17.261214 #10344]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-02 09:16:17 +0000
D, [2015-01-02T09:16:17.340218 #10344] DEBUG -- : 
D, [2015-01-02T09:16:17.366220 #10344] DEBUG -- : 
I, [2015-01-02T09:16:17.416222 #10344]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-02 09:16:17 +0000
D, [2015-01-02T09:16:17.500227 #10344] DEBUG -- : 
D, [2015-01-02T09:16:17.522229 #10344] DEBUG -- : 
I, [2015-01-02T09:16:17.576232 #10344]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-02 09:16:17 +0000
D, [2015-01-02T09:16:17.657236 #10344] DEBUG -- : 
D, [2015-01-02T09:16:17.674237 #10344] DEBUG -- : 
I, [2015-01-02T09:16:17.728240 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-02 09:16:17 +0000
D, [2015-01-02T09:16:17.810245 #10344] DEBUG -- : 
D, [2015-01-02T09:16:17.829246 #10344] DEBUG -- : 
I, [2015-01-02T09:16:17.889250 #10344]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-02 09:16:17 +0000
D, [2015-01-02T09:16:17.979255 #10344] DEBUG -- : 
D, [2015-01-02T09:16:18.000256 #10344] DEBUG -- : 
I, [2015-01-02T09:16:18.052259 #10344]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-02 09:16:18 +0000
D, [2015-01-02T09:16:18.134264 #10344] DEBUG -- : 
D, [2015-01-02T09:16:18.154265 #10344] DEBUG -- : 
I, [2015-01-02T09:16:18.207268 #10344]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-02 09:16:18 +0000
D, [2015-01-02T09:16:18.313274 #10344] DEBUG -- : 
D, [2015-01-02T09:16:18.343276 #10344] DEBUG -- : 
I, [2015-01-02T09:16:18.397279 #10344]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-02 09:16:18 +0000
D, [2015-01-02T09:16:18.476283 #10344] DEBUG -- : 
D, [2015-01-02T09:16:18.497284 #10344] DEBUG -- : 
I, [2015-01-02T09:16:18.553288 #10344]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-02 09:16:18 +0000
D, [2015-01-02T09:16:18.633292 #10344] DEBUG -- : 
D, [2015-01-02T09:16:18.657293 #10344] DEBUG -- : 
I, [2015-01-02T09:16:18.712297 #10344]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-02 09:16:18 +0000
D, [2015-01-02T09:16:18.790301 #10344] DEBUG -- : 
D, [2015-01-02T09:16:18.811302 #10344] DEBUG -- : 
I, [2015-01-02T09:16:18.864305 #10344]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-02 09:16:18 +0000
D, [2015-01-02T09:16:18.943310 #10344] DEBUG -- : 
D, [2015-01-02T09:16:18.964311 #10344] DEBUG -- : 
I, [2015-01-02T09:16:19.047316 #10344]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-02 09:16:18 +0000
D, [2015-01-02T09:16:19.130321 #10344] DEBUG -- : 
D, [2015-01-02T09:16:19.158322 #10344] DEBUG -- : 
I, [2015-01-02T09:16:19.212325 #10344]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-02 09:16:19 +0000
D, [2015-01-02T09:16:19.291330 #10344] DEBUG -- : 
D, [2015-01-02T09:16:19.311331 #10344] DEBUG -- : 
I, [2015-01-02T09:16:19.364334 #10344]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-02 09:16:19 +0000
D, [2015-01-02T09:16:19.440338 #10344] DEBUG -- : 
D, [2015-01-02T09:16:19.463340 #10344] DEBUG -- : 
I, [2015-01-02T09:16:19.515343 #10344]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-02 09:16:19 +0000
D, [2015-01-02T09:16:19.589347 #10344] DEBUG -- : 
D, [2015-01-02T09:16:19.611348 #10344] DEBUG -- : 
I, [2015-01-02T09:16:19.666351 #10344]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-02 09:16:19 +0000
D, [2015-01-02T09:16:19.739355 #10344] DEBUG -- : 
D, [2015-01-02T09:16:19.759357 #10344] DEBUG -- : 
I, [2015-01-02T09:16:19.812360 #10344]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-02 09:16:19 +0000
D, [2015-01-02T09:16:19.906365 #10344] DEBUG -- : 
D, [2015-01-02T09:16:19.936367 #10344] DEBUG -- : 
I, [2015-01-02T09:16:19.994370 #10344]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-02 09:16:19 +0000
D, [2015-01-02T09:16:20.088375 #10344] DEBUG -- : 
D, [2015-01-02T09:16:20.118377 #10344] DEBUG -- : 
I, [2015-01-02T09:16:20.176380 #10344]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-02 09:16:20 +0000
D, [2015-01-02T09:16:20.251385 #10344] DEBUG -- : 
D, [2015-01-02T09:16:20.271386 #10344] DEBUG -- : 
I, [2015-01-02T09:16:20.315388 #10344]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-02 09:16:20 +0000
D, [2015-01-02T09:16:22.665229 #10344] DEBUG -- : 
D, [2015-01-02T09:16:22.696429 #10344] DEBUG -- : 
I, [2015-01-02T09:16:22.758829 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-02 09:16:22 +0000
I, [2015-01-02T09:16:22.914830 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-02T09:16:22.982631 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-02T09:16:23.091831 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-02T09:16:23.185431 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-02T09:16:23.310232 #10344] DEBUG -- :   [1m[36mLineItem Load (15.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-02T09:16:23.450632 #10344] DEBUG -- :   [1m[35mProduct Load (15.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-02T09:16:23.513032 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-02T09:16:23.742433 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Fri, 02 Jan 2015 09:16:23 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:a18beb0,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 02 Jan 2015 09:16:23 UTC +00:00]]
D, [2015-01-02T09:16:23.914033 #10344] DEBUG -- :   [1m[36m (109.2ms)[0m  [1mcommit transaction[0m
D, [2015-01-02T09:16:24.038833 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-02T09:16:24.130834 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-02T09:16:24.208835 #10344]  INFO -- :   Rendered carts/_cart.html.erb (232.4ms)
I, [2015-01-02T09:16:24.271036 #10344]  INFO -- :   Rendered line_items/create.js.erb (279.2ms)
I, [2015-01-02T09:16:24.313638 #10344]  INFO -- : Completed 200 OK in 1283ms (Views: 365.0ms | ActiveRecord: 156.0ms)
D, [2015-01-02T09:16:24.360438 #10344] DEBUG -- : 
D, [2015-01-02T09:16:24.376038 #10344] DEBUG -- : 
I, [2015-01-02T09:16:24.437240 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-02 09:16:24 +0000
I, [2015-01-02T09:16:24.563247 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-02T09:16:24.630251 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-02T09:16:24.716256 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-02T09:16:24.802261 #10344] DEBUG -- :   [1m[35mProduct Load (3.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-02T09:16:24.917267 #10344] DEBUG -- :   [1m[36mLineItem Load (3.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-02T09:16:25.049275 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-02T09:16:25.100278 #10344] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-02T09:16:25.311290 #10344] DEBUG -- :   [1m[35mSQL (10.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Fri, 02 Jan 2015 09:16:25 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:86e1178,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 02 Jan 2015 09:16:25 UTC +00:00]]
D, [2015-01-02T09:16:25.482300 #10344] DEBUG -- :   [1m[36m (131.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-02T09:16:25.607100 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-02T09:16:25.747500 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-02T09:16:25.825500 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (140.4ms)
I, [2015-01-02T09:16:25.903500 #10344]  INFO -- :   Rendered carts/_cart.html.erb (343.2ms)
I, [2015-01-02T09:16:25.950300 #10344]  INFO -- :   Rendered line_items/create.js.erb (405.6ms)
I, [2015-01-02T09:16:26.033301 #10344]  INFO -- : Completed 200 OK in 1334ms (Views: 468.0ms | ActiveRecord: 153.0ms)
D, [2015-01-02T09:16:27.489582 #10344] DEBUG -- : 
D, [2015-01-02T09:16:27.521584 #10344] DEBUG -- : 
I, [2015-01-02T09:16:27.557785 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-02 09:16:27 +0000
I, [2015-01-02T09:16:27.698185 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-02T09:16:27.776185 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-02T09:16:27.854185 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-02T09:16:27.932185 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T09:16:28.042385 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-02T09:16:28.167186 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-02T09:16:32.819395 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-02T09:16:32.975395 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Fri, 02 Jan 2015 09:16:32 UTC +00:00], ["updated_at", Fri, 02 Jan 2015 09:16:32 UTC +00:00]]
D, [2015-01-02T09:16:33.162595 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 85  [["cart_id", nil], ["order_id", 68], ["updated_at", Fri, 02 Jan 2015 09:16:33 UTC +00:00]]
D, [2015-01-02T09:16:33.334196 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 86[0m  [["cart_id", nil], ["order_id", 68], ["updated_at", Fri, 02 Jan 2015 09:16:33 UTC +00:00]]
I, [2015-01-02T09:16:33.380996 #10344]  INFO -- : about to @payment.create
D, [2015-01-02T09:16:34.379398 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-02T09:16:34.472998 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-02T09:16:35.677433 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 68]]
W, [2015-01-02T09:16:35.739833 #10344]  WARN -- : undefined method `name=' for #<PayPal::SDK::REST::DataTypes::ItemList:0x000000099cf488>
W, [2015-01-02T09:16:35.802233 #10344]  WARN -- : undefined method `sku=' for #<PayPal::SDK::REST::DataTypes::ItemList:0x000000099cf488>
W, [2015-01-02T09:16:35.864633 #10344]  WARN -- : undefined method `price=' for #<PayPal::SDK::REST::DataTypes::ItemList:0x000000099cf488>
W, [2015-01-02T09:16:35.927033 #10344]  WARN -- : undefined method `currency=' for #<PayPal::SDK::REST::DataTypes::ItemList:0x000000099cf488>
W, [2015-01-02T09:16:35.973833 #10344]  WARN -- : undefined method `quantity=' for #<PayPal::SDK::REST::DataTypes::ItemList:0x000000099cf488>
I, [2015-01-02T09:16:45.898051 #10344]  INFO -- : in order=
I, [2015-01-02T09:16:45.915651 #10344]  INFO -- : in payment.create
I, [2015-01-02T09:16:46.118451 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/68/confirm", "cancel_url"=>"http://localhost:3000/orders/68/cancel"}}
I, [2015-01-02T09:16:46.867253 #10344]  INFO -- : #<ActiveModel::Errors:0x00000009512a58 @base=#<Payment:0x00000002adb310 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000002a973b8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000099d4f78 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000099d4938 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000099cf488 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000099ce8d0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009568a20 @error=nil, @return_url="http://localhost:3000/orders/68/confirm", @cancel_url="http://localhost:3000/orders/68/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009512a58 ...>>, @messages={}>
I, [2015-01-02T09:16:46.882853 #10344]  INFO -- : got past invalid
I, [2015-01-02T09:16:46.978453 #10344]  INFO -- : PayPal-Request-Id: 7241ddf1-351b-47da-b2ab-625b193c8afe
I, [2015-01-02T09:16:47.009653 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-02T09:16:48.054855 #10344]  INFO -- : Response[400]: Bad Request, Duration: 1.014s
I, [2015-01-02T09:16:48.070455 #10344]  INFO -- :  in error=
I, [2015-01-02T09:16:48.086055 #10344]  INFO -- : back from super
I, [2015-01-02T09:16:48.274255 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/68/confirm", "cancel_url"=>"http://localhost:3000/orders/68/cancel"}}
I, [2015-01-02T09:16:49.601258 #10344]  INFO -- : @payment save just done
I, [2015-01-02T09:16:50.538259 #10344]  INFO -- : #<Payment:0x00000002adb310 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"1629c38dc447f"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000002a973b8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000099d4f78 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000099d4938 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000099cf488 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000099ce8d0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009568a20 @error=nil, @return_url="http://localhost:3000/orders/68/confirm", @cancel_url="http://localhost:3000/orders/68/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009512a58 @base=#<Payment:0x00000002adb310 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="7241ddf1-351b-47da-b2ab-625b193c8afe", @header={}>
I, [2015-01-02T09:16:51.536661 #10344]  INFO -- : #<Payment:0x00000002adb310 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"1629c38dc447f"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000002a973b8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000099d4f78 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000099d4938 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000099cf488 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000099ce8d0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009568a20 @error=nil, @return_url="http://localhost:3000/orders/68/confirm", @cancel_url="http://localhost:3000/orders/68/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009512a58 @base=#<Payment:0x00000002adb310 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="7241ddf1-351b-47da-b2ab-625b193c8afe", @header={}>
D, [2015-01-02T09:16:51.709261 #10344] DEBUG -- :   [1m[36m (110.2ms)[0m  [1mcommit transaction[0m
I, [2015-01-02T09:16:51.740461 #10344]  INFO -- : about to approve url
I, [2015-01-02T09:16:52.941664 #10344]  INFO -- : #<Payment:0x00000002adb310 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"1629c38dc447f"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000002a973b8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000099d4f78 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000099d4938 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000099cf488 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000099ce8d0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009568a20 @error=nil, @return_url="http://localhost:3000/orders/68/confirm", @cancel_url="http://localhost:3000/orders/68/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009512a58 @base=#<Payment:0x00000002adb310 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="7241ddf1-351b-47da-b2ab-625b193c8afe", @header={}>
I, [2015-01-02T09:16:52.988464 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-02T09:16:53.052864 #10344]  INFO -- : Completed 302 Found in 25308ms (ActiveRecord: 125.8ms)
D, [2015-01-02T09:16:53.193264 #10344] DEBUG -- : 
D, [2015-01-02T09:16:53.224464 #10344] DEBUG -- : 
I, [2015-01-02T09:16:53.271264 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-02 09:16:53 +0000
I, [2015-01-02T09:16:53.411664 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-02T09:16:53.505265 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T09:16:53.645665 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-02T09:16:53.739265 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (0.0ms)
I, [2015-01-02T09:16:53.801665 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (202.8ms)
D, [2015-01-02T09:16:54.066866 #10344] DEBUG -- :   [1m[35mLineItem Exists (0.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 36]]
D, [2015-01-02T09:16:54.160466 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-02T09:16:54.207266 #10344]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-02T09:16:54.285266 #10344]  INFO -- :   Rendered carts/_cart.html.erb (171.6ms)
I, [2015-01-02T09:16:54.378866 #10344]  INFO -- : Completed 200 OK in 920ms (Views: 811.2ms | ActiveRecord: 0.0ms)
D, [2015-01-02T09:18:37.772150 #10344] DEBUG -- : 
D, [2015-01-02T09:18:37.803350 #10344] DEBUG -- : 
I, [2015-01-02T09:18:37.850150 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-02 09:18:37 +0000
I, [2015-01-02T09:18:37.943750 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-02T09:18:37.992951 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-02T09:18:38.070951 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T09:18:38.148951 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-02T09:18:38.242552 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-02T09:18:38.336152 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-02T09:18:38.367352 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-02T09:18:38.554552 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Fri, 02 Jan 2015 09:18:38 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:98a03f0,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 02 Jan 2015 09:18:38 UTC +00:00]]
D, [2015-01-02T09:18:38.694952 #10344] DEBUG -- :   [1m[35m (109.2ms)[0m  commit transaction
D, [2015-01-02T09:18:38.804152 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-02T09:18:38.882153 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-02T09:18:38.944553 #10344]  INFO -- :   Rendered carts/_cart.html.erb (187.2ms)
I, [2015-01-02T09:18:39.006953 #10344]  INFO -- :   Rendered line_items/create.js.erb (234.0ms)
I, [2015-01-02T09:18:39.053753 #10344]  INFO -- : Completed 200 OK in 998ms (Views: 312.0ms | ActiveRecord: 109.2ms)
D, [2015-01-02T09:18:40.775420 #10344] DEBUG -- : 
D, [2015-01-02T09:18:40.791020 #10344] DEBUG -- : 
I, [2015-01-02T09:18:40.853420 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-02 09:18:40 +0000
I, [2015-01-02T09:18:40.947021 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-02T09:18:41.009421 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-02T09:18:41.087421 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T09:18:41.172421 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-02T09:18:41.270022 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-02T09:18:41.363622 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-02T09:18:41.426022 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-02T09:18:41.644422 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Fri, 02 Jan 2015 09:18:41 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:7f8c698,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 02 Jan 2015 09:18:41 UTC +00:00]]
D, [2015-01-02T09:18:41.831623 #10344] DEBUG -- :   [1m[35m (140.4ms)[0m  commit transaction
D, [2015-01-02T09:18:41.956423 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-02T09:18:42.096823 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-02T09:18:42.174823 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (140.4ms)
I, [2015-01-02T09:18:42.245224 #10344]  INFO -- :   Rendered carts/_cart.html.erb (343.2ms)
I, [2015-01-02T09:18:42.294024 #10344]  INFO -- :   Rendered line_items/create.js.erb (414.6ms)
I, [2015-01-02T09:18:42.358424 #10344]  INFO -- : Completed 200 OK in 1300ms (Views: 478.0ms | ActiveRecord: 140.4ms)
D, [2015-01-02T09:18:43.776285 #10344] DEBUG -- : 
D, [2015-01-02T09:18:43.791886 #10344] DEBUG -- : 
I, [2015-01-02T09:18:43.854286 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-02 09:18:43 +0000
I, [2015-01-02T09:18:43.963486 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-02T09:18:44.041486 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-02T09:18:44.103886 #10344] DEBUG -- :   [1m[35mUser Load (15.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-02T09:18:44.181886 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-02T09:18:44.275486 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-02T09:18:44.415887 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-02T09:18:51.647902 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-02T09:18:51.772703 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Fri, 02 Jan 2015 09:18:51 UTC +00:00], ["updated_at", Fri, 02 Jan 2015 09:18:51 UTC +00:00]]
D, [2015-01-02T09:18:51.913103 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 87[0m  [["cart_id", nil], ["order_id", 69], ["updated_at", Fri, 02 Jan 2015 09:18:51 UTC +00:00]]
D, [2015-01-02T09:18:52.037903 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 88  [["cart_id", nil], ["order_id", 69], ["updated_at", Fri, 02 Jan 2015 09:18:51 UTC +00:00]]
I, [2015-01-02T09:18:52.069103 #10344]  INFO -- : about to @payment.create
D, [2015-01-02T09:18:58.741315 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-02T09:18:58.834915 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-02T09:19:00.879519 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mSELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 69]]
W, [2015-01-02T09:19:00.926319 #10344]  WARN -- : undefined method `name=' for #<PayPal::SDK::REST::DataTypes::ItemList:0x000000092c7370>
W, [2015-01-02T09:19:00.957519 #10344]  WARN -- : undefined method `sku=' for #<PayPal::SDK::REST::DataTypes::ItemList:0x000000092c7370>
W, [2015-01-02T09:19:01.019919 #10344]  WARN -- : undefined method `price=' for #<PayPal::SDK::REST::DataTypes::ItemList:0x000000092c7370>
W, [2015-01-02T09:19:01.066719 #10344]  WARN -- : undefined method `currency=' for #<PayPal::SDK::REST::DataTypes::ItemList:0x000000092c7370>
W, [2015-01-02T09:19:01.129120 #10344]  WARN -- : undefined method `quantity=' for #<PayPal::SDK::REST::DataTypes::ItemList:0x000000092c7370>
I, [2015-01-02T09:20:05.508634 #10344]  INFO -- : in order=
I, [2015-01-02T09:20:05.524234 #10344]  INFO -- : in payment.create
I, [2015-01-02T09:20:05.680235 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/69/confirm", "cancel_url"=>"http://localhost:3000/orders/69/cancel"}}
I, [2015-01-02T09:20:06.257436 #10344]  INFO -- : #<ActiveModel::Errors:0x00000009e8f4c8 @base=#<Payment:0x00000009b1d218 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009b1c3e0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009315228 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009314a58 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000092c7370 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000092c67e0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009f06cd0 @error=nil, @return_url="http://localhost:3000/orders/69/confirm", @cancel_url="http://localhost:3000/orders/69/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009e8f4c8 ...>>, @messages={}>
I, [2015-01-02T09:20:06.288636 #10344]  INFO -- : got past invalid
I, [2015-01-02T09:20:06.366636 #10344]  INFO -- : PayPal-Request-Id: 65c7cd8b-f97b-42e3-80f8-a54cba3df9bc
I, [2015-01-02T09:20:06.397836 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-02T09:20:07.521038 #10344]  INFO -- : Response[400]: Bad Request, Duration: 1.076s
I, [2015-01-02T09:20:07.536638 #10344]  INFO -- :  in error=
I, [2015-01-02T09:20:07.552238 #10344]  INFO -- : back from super
I, [2015-01-02T09:20:07.708238 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/69/confirm", "cancel_url"=>"http://localhost:3000/orders/69/cancel"}}
I, [2015-01-02T09:20:08.067039 #10344]  INFO -- : @payment save just done
I, [2015-01-02T09:20:08.987440 #10344]  INFO -- : #<Payment:0x00000009b1d218 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"9f38191b37ee6"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009b1c3e0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009315228 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009314a58 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000092c7370 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000092c67e0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009f06cd0 @error=nil, @return_url="http://localhost:3000/orders/69/confirm", @cancel_url="http://localhost:3000/orders/69/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009e8f4c8 @base=#<Payment:0x00000009b1d218 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="65c7cd8b-f97b-42e3-80f8-a54cba3df9bc", @header={}>
I, [2015-01-02T09:20:09.893242 #10344]  INFO -- : #<Payment:0x00000009b1d218 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"9f38191b37ee6"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009b1c3e0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009315228 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009314a58 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000092c7370 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000092c67e0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009f06cd0 @error=nil, @return_url="http://localhost:3000/orders/69/confirm", @cancel_url="http://localhost:3000/orders/69/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009e8f4c8 @base=#<Payment:0x00000009b1d218 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="65c7cd8b-f97b-42e3-80f8-a54cba3df9bc", @header={}>
D, [2015-01-02T09:20:10.018042 #10344] DEBUG -- :   [1m[35m (93.6ms)[0m  commit transaction
I, [2015-01-02T09:20:10.050242 #10344]  INFO -- : about to approve url
I, [2015-01-02T09:20:10.939444 #10344]  INFO -- : #<Payment:0x00000009b1d218 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"9f38191b37ee6"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009b1c3e0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009315228 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009314a58 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000092c7370 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000092c67e0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">], @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009f06cd0 @error=nil, @return_url="http://localhost:3000/orders/69/confirm", @cancel_url="http://localhost:3000/orders/69/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009e8f4c8 @base=#<Payment:0x00000009b1d218 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="65c7cd8b-f97b-42e3-80f8-a54cba3df9bc", @header={}>
I, [2015-01-02T09:20:10.970644 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-02T09:20:11.001844 #10344]  INFO -- : Completed 302 Found in 87007ms (ActiveRecord: 124.8ms)
D, [2015-01-02T09:20:11.080844 #10344] DEBUG -- : 
D, [2015-01-02T09:20:11.096444 #10344] DEBUG -- : 
I, [2015-01-02T09:20:11.143244 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-02 09:20:11 +0000
I, [2015-01-02T09:20:13.549649 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-02T09:20:13.674449 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-02T09:20:13.892849 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-02T09:20:14.111250 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (15.6ms)
I, [2015-01-02T09:20:14.142450 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (296.4ms)
D, [2015-01-02T09:20:14.423250 #10344] DEBUG -- :   [1m[36mLineItem Exists (0.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-02T09:20:14.516850 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-02T09:20:14.548050 #10344]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-02T09:20:14.657251 #10344]  INFO -- :   Rendered carts/_cart.html.erb (187.2ms)
I, [2015-01-02T09:20:14.719651 #10344]  INFO -- : Completed 200 OK in 1123ms (Views: 842.4ms | ActiveRecord: 31.2ms)
D, [2015-01-02T09:20:21.105467 #10344] DEBUG -- : 
D, [2015-01-02T09:20:21.121067 #10344] DEBUG -- : 
I, [2015-01-02T09:20:21.183467 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-02 09:20:21 +0000
I, [2015-01-02T09:20:21.308268 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-02T09:20:21.370668 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-02T09:20:21.454069 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-02T09:20:21.532069 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-02T09:20:21.641269 #10344] DEBUG -- :   [1m[36mLineItem Load (15.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-02T09:20:21.915470 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-02T09:20:21.977871 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-02T09:20:22.211871 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Fri, 02 Jan 2015 09:20:21 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:83b1318,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 02 Jan 2015 09:20:21 UTC +00:00]]
D, [2015-01-02T09:20:22.437073 #10344] DEBUG -- :   [1m[36m (171.4ms)[0m  [1mcommit transaction[0m
D, [2015-01-02T09:20:22.564275 #10344] DEBUG -- :   [1m[35mLineItem Load (15.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-02T09:20:22.642275 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-02T09:20:22.720275 #10344]  INFO -- :   Rendered carts/_cart.html.erb (202.8ms)
I, [2015-01-02T09:20:22.767075 #10344]  INFO -- :   Rendered line_items/create.js.erb (265.2ms)
I, [2015-01-02T09:20:22.813875 #10344]  INFO -- : Completed 200 OK in 1396ms (Views: 310.4ms | ActiveRecord: 204.6ms)
D, [2015-01-02T09:20:22.855076 #10344] DEBUG -- : 
D, [2015-01-02T09:20:22.890677 #10344] DEBUG -- : 
I, [2015-01-02T09:20:22.954681 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-02 09:20:22 +0000
I, [2015-01-02T09:20:23.071687 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-02T09:20:23.166693 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-02T09:20:23.263698 #10344] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-02T09:20:23.355703 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-02T09:20:23.484711 #10344] DEBUG -- :   [1m[36mLineItem Load (3.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-02T09:20:23.604718 #10344] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-02T09:20:23.659721 #10344] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-02T09:20:23.895734 #10344] DEBUG -- :   [1m[35mSQL (9.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Fri, 02 Jan 2015 09:20:23 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:492afa0,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 02 Jan 2015 09:20:23 UTC +00:00]]
D, [2015-01-02T09:20:24.078736 #10344] DEBUG -- :   [1m[36m (130.2ms)[0m  [1mcommit transaction[0m
D, [2015-01-02T09:20:24.234736 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-02T09:20:24.375137 #10344] DEBUG -- :   [1m[36mProduct Load (15.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-02T09:20:24.453137 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (156.0ms)
I, [2015-01-02T09:20:24.543939 #10344]  INFO -- :   Rendered carts/_cart.html.erb (358.8ms)
I, [2015-01-02T09:20:24.591140 #10344]  INFO -- :   Rendered line_items/create.js.erb (437.0ms)
I, [2015-01-02T09:20:24.653541 #10344]  INFO -- : Completed 200 OK in 1422ms (Views: 496.8ms | ActiveRecord: 164.8ms)
D, [2015-01-02T09:20:26.081402 #10344] DEBUG -- : 
D, [2015-01-02T09:20:26.112602 #10344] DEBUG -- : 
I, [2015-01-02T09:20:26.175002 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-02 09:20:26 +0000
I, [2015-01-02T09:20:26.331003 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-02T09:20:26.467804 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-02T09:20:26.672604 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-02T09:20:26.750604 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T09:20:26.937805 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-02T09:20:27.093805 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-02T09:20:30.425012 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-02T09:20:30.815013 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Fri, 02 Jan 2015 09:20:30 UTC +00:00], ["updated_at", Fri, 02 Jan 2015 09:20:30 UTC +00:00]]
D, [2015-01-02T09:20:30.971013 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 89  [["cart_id", nil], ["order_id", 70], ["updated_at", Fri, 02 Jan 2015 09:20:30 UTC +00:00]]
D, [2015-01-02T09:20:31.142613 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 90[0m  [["cart_id", nil], ["order_id", 70], ["updated_at", Fri, 02 Jan 2015 09:20:30 UTC +00:00]]
I, [2015-01-02T09:20:31.173813 #10344]  INFO -- : about to @payment.create
D, [2015-01-02T09:20:32.281415 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-02T09:20:32.390615 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-02T09:20:33.404617 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  SELECT COUNT(*) FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 70]]
I, [2015-01-02T09:20:49.422246 #10344]  INFO -- : in order=
I, [2015-01-02T09:20:49.453446 #10344]  INFO -- : in payment.create
I, [2015-01-02T09:20:49.718646 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}, {"quantity"=>"1", "name"=>"penknife", "price"=>"2", "currency"=>"GBP", "sku"=>"PK1"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/70/confirm", "cancel_url"=>"http://localhost:3000/orders/70/cancel"}}
I, [2015-01-02T09:20:50.451848 #10344]  INFO -- : #<ActiveModel::Errors:0x00000004aac248 @base=#<Payment:0x000000099df9c8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000099de730 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000929aff0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000929a438 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009298c50 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000928fe98 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000926c088 @error=nil, @name="penknife", @sku="PK1", @price="2", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000004c5a810 @error=nil, @return_url="http://localhost:3000/orders/70/confirm", @cancel_url="http://localhost:3000/orders/70/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000004aac248 ...>>, @messages={}>
I, [2015-01-02T09:20:50.483048 #10344]  INFO -- : got past invalid
I, [2015-01-02T09:20:50.592248 #10344]  INFO -- : PayPal-Request-Id: dae907ec-6062-4f7d-bc4e-f0905ed497d8
I, [2015-01-02T09:20:50.639048 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-02T09:20:51.653050 #10344]  INFO -- : Response[400]: Bad Request, Duration: 0.967s
I, [2015-01-02T09:20:51.684250 #10344]  INFO -- :  in error=
I, [2015-01-02T09:20:51.715450 #10344]  INFO -- : back from super
I, [2015-01-02T09:20:51.980650 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"Tee Shirts", "price"=>"38.98", "currency"=>"GBP", "sku"=>"Tee Shirts"}, {"quantity"=>"1", "name"=>"penknife", "price"=>"2", "currency"=>"GBP", "sku"=>"PK1"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/70/confirm", "cancel_url"=>"http://localhost:3000/orders/70/cancel"}}
I, [2015-01-02T09:20:54.369454 #10344]  INFO -- : @payment save just done
I, [2015-01-02T09:20:55.367856 #10344]  INFO -- : #<Payment:0x000000099df9c8 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"fbf2867b03576"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000099de730 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000929aff0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000929a438 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009298c50 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000928fe98 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000926c088 @error=nil, @name="penknife", @sku="PK1", @price="2", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000004c5a810 @error=nil, @return_url="http://localhost:3000/orders/70/confirm", @cancel_url="http://localhost:3000/orders/70/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000004aac248 @base=#<Payment:0x000000099df9c8 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="dae907ec-6062-4f7d-bc4e-f0905ed497d8", @header={}>
I, [2015-01-02T09:20:56.352658 #10344]  INFO -- : #<Payment:0x000000099df9c8 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"fbf2867b03576"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000099de730 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000929aff0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000929a438 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009298c50 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000928fe98 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000926c088 @error=nil, @name="penknife", @sku="PK1", @price="2", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000004c5a810 @error=nil, @return_url="http://localhost:3000/orders/70/confirm", @cancel_url="http://localhost:3000/orders/70/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000004aac248 @base=#<Payment:0x000000099df9c8 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="dae907ec-6062-4f7d-bc4e-f0905ed497d8", @header={}>
D, [2015-01-02T09:20:56.508658 #10344] DEBUG -- :   [1m[36m (109.2ms)[0m  [1mcommit transaction[0m
I, [2015-01-02T09:20:56.539858 #10344]  INFO -- : about to approve url
I, [2015-01-02T09:20:57.555860 #10344]  INFO -- : #<Payment:0x000000099df9c8 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"fbf2867b03576"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000099de730 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000929aff0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000929a438 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009298c50 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000928fe98 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="38.98", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000926c088 @error=nil, @name="penknife", @sku="PK1", @price="2", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000004c5a810 @error=nil, @return_url="http://localhost:3000/orders/70/confirm", @cancel_url="http://localhost:3000/orders/70/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000004aac248 @base=#<Payment:0x000000099df9c8 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="dae907ec-6062-4f7d-bc4e-f0905ed497d8", @header={}>
I, [2015-01-02T09:20:57.602660 #10344]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-02T09:20:57.665060 #10344]  INFO -- : Completed 302 Found in 31272ms (ActiveRecord: 109.2ms)
D, [2015-01-02T09:20:57.758661 #10344] DEBUG -- : 
D, [2015-01-02T09:20:57.774261 #10344] DEBUG -- : 
I, [2015-01-02T09:20:57.836661 #10344]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-02 09:20:57 +0000
I, [2015-01-02T09:20:57.945861 #10344]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-02T09:20:58.039461 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T09:20:58.148661 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-02T09:20:58.242261 #10344]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (0.0ms)
I, [2015-01-02T09:20:58.304662 #10344]  INFO -- :   Rendered store/index.html.erb within layouts/application (187.2ms)
D, [2015-01-02T09:20:58.523062 #10344] DEBUG -- :   [1m[35mLineItem Exists (0.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 36]]
D, [2015-01-02T09:20:58.632262 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-02T09:20:58.663462 #10344]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-02T09:20:58.741462 #10344]  INFO -- :   Rendered carts/_cart.html.erb (156.0ms)
I, [2015-01-02T09:20:58.819462 #10344]  INFO -- : Completed 200 OK in 811ms (Views: 733.2ms | ActiveRecord: 0.0ms)
D, [2015-01-02T09:25:26.641631 #10344] DEBUG -- : 
D, [2015-01-02T09:25:26.657231 #10344] DEBUG -- : 
I, [2015-01-02T09:25:26.719631 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-02 09:25:26 +0000
I, [2015-01-02T09:25:26.793432 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-02T09:25:26.871433 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-02T09:25:26.949433 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T09:25:27.058633 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-02T09:25:27.167833 #10344] DEBUG -- :   [1m[35mLineItem Load (15.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-02T09:25:27.261433 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-02T09:25:27.308233 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-02T09:25:27.543036 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Fri, 02 Jan 2015 09:25:27 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:45b73a0,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 02 Jan 2015 09:25:27 UTC +00:00]]
D, [2015-01-02T09:25:27.761436 #10344] DEBUG -- :   [1m[35m (187.2ms)[0m  commit transaction
D, [2015-01-02T09:25:27.870636 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-02T09:25:27.948636 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-02T09:25:28.026636 #10344]  INFO -- :   Rendered carts/_cart.html.erb (187.2ms)
I, [2015-01-02T09:25:28.057836 #10344]  INFO -- :   Rendered line_items/create.js.erb (234.0ms)
I, [2015-01-02T09:25:28.120237 #10344]  INFO -- : Completed 200 OK in 1202ms (Views: 312.0ms | ActiveRecord: 218.4ms)
D, [2015-01-02T09:26:42.052037 #10344] DEBUG -- : 
D, [2015-01-02T09:26:42.067637 #10344] DEBUG -- : 
I, [2015-01-02T09:26:42.124438 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-02 09:26:42 +0000
I, [2015-01-02T09:26:44.466442 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-02T09:26:44.528842 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-02T09:26:44.669243 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T09:26:44.887643 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-02T09:26:45.184044 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-02T09:26:45.496044 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-02T09:26:45.542844 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-02T09:26:45.730045 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Fri, 02 Jan 2015 09:26:45 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:9b9a9c0,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 02 Jan 2015 09:26:45 UTC +00:00]]
D, [2015-01-02T09:26:45.917245 #10344] DEBUG -- :   [1m[35m (140.4ms)[0m  commit transaction
D, [2015-01-02T09:26:46.042045 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-02T09:26:46.166845 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-02T09:26:46.244845 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (124.8ms)
I, [2015-01-02T09:26:46.338446 #10344]  INFO -- :   Rendered carts/_cart.html.erb (343.2ms)
I, [2015-01-02T09:26:46.385246 #10344]  INFO -- :   Rendered line_items/create.js.erb (390.0ms)
I, [2015-01-02T09:26:46.416446 #10344]  INFO -- : Completed 200 OK in 1856ms (Views: 468.0ms | ActiveRecord: 171.6ms)
D, [2015-01-02T09:26:48.301709 #10344] DEBUG -- : 
D, [2015-01-02T09:26:48.317309 #10344] DEBUG -- : 
I, [2015-01-02T09:26:48.379709 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-02 09:26:48 +0000
I, [2015-01-02T09:26:48.520109 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-02T09:26:48.629309 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-02T09:26:48.817510 #10344] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-02T09:26:48.895510 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-02T09:26:49.082710 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-02T09:26:49.238710 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-02T09:26:54.007327 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-02T09:26:54.334928 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Fri, 02 Jan 2015 09:26:54 UTC +00:00], ["updated_at", Fri, 02 Jan 2015 09:26:54 UTC +00:00]]
D, [2015-01-02T09:26:54.461728 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 91[0m  [["cart_id", nil], ["order_id", 71], ["updated_at", Fri, 02 Jan 2015 09:26:54 UTC +00:00]]
D, [2015-01-02T09:26:54.602128 #10344] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 92  [["cart_id", nil], ["order_id", 71], ["updated_at", Fri, 02 Jan 2015 09:26:54 UTC +00:00]]
I, [2015-01-02T09:26:54.633328 #10344]  INFO -- : about to @payment.create
D, [2015-01-02T09:26:55.740930 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-02T09:26:55.803330 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
I, [2015-01-02T09:26:56.927532 #10344]  INFO -- : in order=
I, [2015-01-02T09:26:56.958732 #10344]  INFO -- : in payment.create
I, [2015-01-02T09:26:57.145933 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"18.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}, {"quantity"=>"1", "name"=>"penknife", "price"=>"19.99", "currency"=>"GBP", "sku"=>"PK1"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/71/confirm", "cancel_url"=>"http://localhost:3000/orders/71/cancel"}}
I, [2015-01-02T09:26:57.738734 #10344]  INFO -- : #<ActiveModel::Errors:0x00000004aa4d40 @base=#<Payment:0x00000006292f10 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000062905a8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005b515a8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005b50770 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000005b44268 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005b30f10 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="18.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x00000005b1acb0 @error=nil, @name="penknife", @sku="PK1", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000057b32e8 @error=nil, @return_url="http://localhost:3000/orders/71/confirm", @cancel_url="http://localhost:3000/orders/71/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000004aa4d40 ...>>, @messages={}>
I, [2015-01-02T09:26:57.754334 #10344]  INFO -- : got past invalid
I, [2015-01-02T09:26:57.847934 #10344]  INFO -- : PayPal-Request-Id: edf60972-21da-4c85-9ab9-fb07361ca820
I, [2015-01-02T09:26:57.894734 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-02T09:26:59.269536 #10344]  INFO -- : Response[201]: Created, Duration: 1.344s
I, [2015-01-02T09:26:59.331937 #10344]  INFO -- : back from super
I, [2015-01-02T09:26:59.799937 #10344]  INFO -- : {"id"=>"PAY-9XR684230P627874WKSTGIZI", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98", "details"=>{"subtotal"=>"38.98"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Tee Shirts", "price"=>"18.99", "currency"=>"GBP", "sku"=>"Tee Shirts"}, {"quantity"=>"1", "name"=>"penknife", "price"=>"19.99", "currency"=>"GBP", "sku"=>"PK1"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/71/confirm", "cancel_url"=>"http://localhost:3000/orders/71/cancel"}, "create_time"=>"2015-01-02T09:27:01Z", "update_time"=>"2015-01-02T09:27:01Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-9XR684230P627874WKSTGIZI", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-46667371TM384891X", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-9XR684230P627874WKSTGIZI/execute", "rel"=>"execute", "method"=>"POST"}]}
I, [2015-01-02T09:27:02.146942 #10344]  INFO -- : @payment save just done
I, [2015-01-02T09:27:03.162944 #10344]  INFO -- : #<Payment:0x00000006292f10 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000035beac0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000035b4868 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000035af200 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000003587818 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000035846b8 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000003507078 @error=nil, @subtotal="38.98">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000034f4e50 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000002d9f7e0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="18.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x00000002ad9c40 @error=nil, @name="penknife", @sku="PK1", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000057b32e8 @error=nil, @return_url="http://localhost:3000/orders/71/confirm", @cancel_url="http://localhost:3000/orders/71/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000004aa4d40 @base=#<Payment:0x00000006292f10 ...>, @messages={}>, @request_id="edf60972-21da-4c85-9ab9-fb07361ca820", @header={}, @id="PAY-9XR684230P627874WKSTGIZI", @create_time="2015-01-02T09:27:01Z", @update_time="2015-01-02T09:27:01Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000083aa2c0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9XR684230P627874WKSTGIZI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000083a8060 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-46667371TM384891X", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009e95698 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9XR684230P627874WKSTGIZI/execute", @rel="execute", @method="POST">]>
I, [2015-01-02T09:27:04.397747 #10344]  INFO -- : #<Payment:0x00000006292f10 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000035beac0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000035b4868 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000035af200 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000003587818 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000035846b8 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000003507078 @error=nil, @subtotal="38.98">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000034f4e50 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000002d9f7e0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="18.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x00000002ad9c40 @error=nil, @name="penknife", @sku="PK1", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000057b32e8 @error=nil, @return_url="http://localhost:3000/orders/71/confirm", @cancel_url="http://localhost:3000/orders/71/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000004aa4d40 @base=#<Payment:0x00000006292f10 ...>, @messages={}>, @request_id="edf60972-21da-4c85-9ab9-fb07361ca820", @header={}, @id="PAY-9XR684230P627874WKSTGIZI", @create_time="2015-01-02T09:27:01Z", @update_time="2015-01-02T09:27:01Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000083aa2c0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9XR684230P627874WKSTGIZI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000083a8060 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-46667371TM384891X", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009e95698 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9XR684230P627874WKSTGIZI/execute", @rel="execute", @method="POST">]>
D, [2015-01-02T09:27:04.569347 #10344] DEBUG -- :   [1m[36m (124.8ms)[0m  [1mcommit transaction[0m
I, [2015-01-02T09:27:04.616147 #10344]  INFO -- : about to approve url
I, [2015-01-02T09:27:05.832949 #10344]  INFO -- : #<Payment:0x00000006292f10 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000035beac0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000035b4868 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000035af200 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000003587818 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000035846b8 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000003507078 @error=nil, @subtotal="38.98">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000034f4e50 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000002d9f7e0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="18.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x00000002ad9c40 @error=nil, @name="penknife", @sku="PK1", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000057b32e8 @error=nil, @return_url="http://localhost:3000/orders/71/confirm", @cancel_url="http://localhost:3000/orders/71/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000004aa4d40 @base=#<Payment:0x00000006292f10 ...>, @messages={}>, @request_id="edf60972-21da-4c85-9ab9-fb07361ca820", @header={}, @id="PAY-9XR684230P627874WKSTGIZI", @create_time="2015-01-02T09:27:01Z", @update_time="2015-01-02T09:27:01Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000083aa2c0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9XR684230P627874WKSTGIZI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000083a8060 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-46667371TM384891X", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009e95698 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9XR684230P627874WKSTGIZI/execute", @rel="execute", @method="POST">]>
I, [2015-01-02T09:27:07.065351 #10344]  INFO -- : #<Payment:0x00000006292f10 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000035beac0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000035b4868 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000035af200 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000003587818 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000035846b8 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000003507078 @error=nil, @subtotal="38.98">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000034f4e50 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000002d9f7e0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="18.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x00000002ad9c40 @error=nil, @name="penknife", @sku="PK1", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000057b32e8 @error=nil, @return_url="http://localhost:3000/orders/71/confirm", @cancel_url="http://localhost:3000/orders/71/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000004aa4d40 @base=#<Payment:0x00000006292f10 ...>, @messages={}>, @request_id="edf60972-21da-4c85-9ab9-fb07361ca820", @header={}, @id="PAY-9XR684230P627874WKSTGIZI", @create_time="2015-01-02T09:27:01Z", @update_time="2015-01-02T09:27:01Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000083aa2c0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9XR684230P627874WKSTGIZI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000083a8060 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-46667371TM384891X", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009e95698 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9XR684230P627874WKSTGIZI/execute", @rel="execute", @method="POST">]>
I, [2015-01-02T09:27:07.143352 #10344]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-46667371TM384891X
I, [2015-01-02T09:27:08.423554 #10344]  INFO -- : #<Payment:0x00000006292f10 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000035beac0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000035b4868 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000035af200 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000003587818 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000035846b8 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000003507078 @error=nil, @subtotal="38.98">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000034f4e50 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000002d9f7e0 @error=nil, @name="Tee Shirts", @sku="Tee Shirts", @price="18.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x00000002ad9c40 @error=nil, @name="penknife", @sku="PK1", @price="19.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000057b32e8 @error=nil, @return_url="http://localhost:3000/orders/71/confirm", @cancel_url="http://localhost:3000/orders/71/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000004aa4d40 @base=#<Payment:0x00000006292f10 ...>, @messages={}>, @request_id="edf60972-21da-4c85-9ab9-fb07361ca820", @header={}, @id="PAY-9XR684230P627874WKSTGIZI", @create_time="2015-01-02T09:27:01Z", @update_time="2015-01-02T09:27:01Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000083aa2c0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9XR684230P627874WKSTGIZI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000083a8060 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-46667371TM384891X", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009e95698 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9XR684230P627874WKSTGIZI/execute", @rel="execute", @method="POST">]>
I, [2015-01-02T09:27:08.501554 #10344]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-46667371TM384891X
I, [2015-01-02T09:27:08.548354 #10344]  INFO -- : Completed 403 Forbidden in 19981ms (ActiveRecord: 156.0ms)
D, [2015-01-02T09:29:41.050313 #10344] DEBUG -- : 
D, [2015-01-02T09:29:41.065913 #10344] DEBUG -- : 
I, [2015-01-02T09:29:41.128313 #10344]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-02 09:29:41 +0000
I, [2015-01-02T09:29:44.178121 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-02T09:29:44.240521 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-02T09:29:44.396521 #10344] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T09:29:44.646122 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-02T09:29:44.975722 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-02T09:29:45.334523 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-02T09:29:45.381323 #10344] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-02T09:29:45.584123 #10344] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Fri, 02 Jan 2015 09:29:45 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:a1cf1b0,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 02 Jan 2015 09:29:45 UTC +00:00]]
D, [2015-01-02T09:29:45.771324 #10344] DEBUG -- :   [1m[35m (140.4ms)[0m  commit transaction
D, [2015-01-02T09:29:45.896124 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-02T09:29:45.989724 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-02T09:29:46.114524 #10344]  INFO -- :   Rendered carts/_cart.html.erb (265.2ms)
I, [2015-01-02T09:29:46.161324 #10344]  INFO -- :   Rendered line_items/create.js.erb (312.0ms)
I, [2015-01-02T09:29:46.208124 #10344]  INFO -- : Completed 200 OK in 1921ms (Views: 374.4ms | ActiveRecord: 187.2ms)
D, [2015-01-02T09:29:46.254924 #10344] DEBUG -- : 
D, [2015-01-02T09:29:46.286525 #10344] DEBUG -- : 
I, [2015-01-02T09:29:46.335528 #10344]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-02 09:29:46 +0000
I, [2015-01-02T09:29:46.455535 #10344]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-02T09:29:46.517539 #10344]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-02T09:29:46.599543 #10344] DEBUG -- :   [1m[35mCart Load (3.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-02T09:29:46.682548 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-02T09:29:46.792554 #10344] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-02T09:29:46.900561 #10344] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-02T09:29:46.941563 #10344] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2015-01-02T09:29:47.157575 #10344] DEBUG -- :   [1m[36mSQL (10.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Fri, 02 Jan 2015 09:29:46 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:93b26e0,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 02 Jan 2015 09:29:46 UTC +00:00]]
D, [2015-01-02T09:29:47.333585 #10344] DEBUG -- :   [1m[35m (134.0ms)[0m  commit transaction
D, [2015-01-02T09:29:47.444587 #10344] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-02T09:29:47.584988 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-02T09:29:47.662988 #10344]  INFO -- :   Rendered line_items/_line_item.html.erb (140.4ms)
I, [2015-01-02T09:29:47.740988 #10344]  INFO -- :   Rendered carts/_cart.html.erb (327.6ms)
I, [2015-01-02T09:29:47.772188 #10344]  INFO -- :   Rendered line_items/create.js.erb (376.4ms)
I, [2015-01-02T09:29:47.834588 #10344]  INFO -- : Completed 200 OK in 1268ms (Views: 449.2ms | ActiveRecord: 156.0ms)
D, [2015-01-02T09:29:51.330055 #10344] DEBUG -- : 
D, [2015-01-02T09:29:51.345655 #10344] DEBUG -- : 
I, [2015-01-02T09:29:51.408055 #10344]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-02 09:29:51 +0000
I, [2015-01-02T09:29:51.564055 #10344]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-02T09:29:51.720055 #10344] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-02T09:29:51.922856 #10344] DEBUG -- :   [1m[35mUser Load (15.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-02T09:29:52.000856 #10344] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-02T09:29:52.188056 #10344] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-02T09:29:52.344057 #10344]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-02T09:30:01.940875 #10344] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-02T09:30:02.315276 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Fri, 02 Jan 2015 09:30:02 UTC +00:00], ["updated_at", Fri, 02 Jan 2015 09:30:02 UTC +00:00]]
D, [2015-01-02T09:30:02.471276 #10344] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 93[0m  [["cart_id", nil], ["order_id", 72], ["updated_at", Fri, 02 Jan 2015 09:30:02 UTC +00:00]]
D, [2015-01-02T09:30:02.611676 #10344] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 94  [["cart_id", nil], ["order_id", 72], ["updated_at", Fri, 02 Jan 2015 09:30:02 UTC +00:00]]
I, [2015-01-02T09:30:02.658476 #10344]  INFO -- : about to @payment.create
D, [2015-01-02T09:30:05.531882 #10344] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-02T09:30:05.641082 #10344] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
I, [2015-01-02T09:30:31.239127 #10344]  INFO -- : in order=
I, [2015-01-02T09:30:31.270327 #10344]  INFO -- : in payment.create
I, [2015-01-02T09:30:31.504328 #10344]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"penknife", "price"=>"19.99", "currency"=>"GBP", "sku"=>"PK1"}, {"quantity"=>"1", "name"=>"tee shirt", "price"=>"18.99", "currency"=>"GBP", "sku"=>"ts1"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/72/confirm", "cancel_url"=>"http://localhost:3000/orders/72/cancel"}}
I, [2015-01-02T09:30:32.114729 #10344]  INFO -- : #<ActiveModel::Errors:0x00000005826e28 @base=#<Payment:0x00000009738fd0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000972fde0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009385eb0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000093858c0 @error=nil, @total="38.98", @currency="GBP">, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000935f7b0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000935e680 @error=nil, @name="penknife", @sku="PK1", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000934f9a0 @error=nil, @name="tee shirt", @sku="ts1", @price="18.99", @currency="GBP", @quantity="1">]>, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000058a7f50 @error=nil, @return_url="http://localhost:3000/orders/72/confirm", @cancel_url="http://localhost:3000/orders/72/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005826e28 ...>>, @messages={}>
I, [2015-01-02T09:30:32.145929 #10344]  INFO -- : got past invalid
I, [2015-01-02T09:30:32.255129 #10344]  INFO -- : PayPal-Request-Id: d86e0583-59e5-40ff-b4bd-47aecf465ec3
I, [2015-01-02T09:30:32.286329 #10344]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-02T09:30:33.724532 #10344]  INFO -- : Response[201]: Created, Duration: 1.391s
I, [2015-01-02T09:30:33.755732 #10344]  INFO -- : back from super
I, [2015-01-02T09:30:34.270533 #10344]  INFO -- : {"id"=>"PAY-0CL31985DC2927826KSTGKOY", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98", "details"=>{"subtotal"=>"38.98"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"penknife", "price"=>"19.99", "currency"=>"GBP", "sku"=>"PK1"}, {"quantity"=>"1", "name"=>"tee shirt", "price"=>"18.99", "currency"=>"GBP", "sku"=>"ts1"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/72/confirm", "cancel_url"=>"http://localhost:3000/orders/72/cancel"}, "create_time"=>"2015-01-02T09:30:35Z", "update_time"=>"2015-01-02T09:30:35Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL31985DC2927826KSTGKOY", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-34V48946N5400001S", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL31985DC2927826KSTGKOY/execute", "rel"=>"execute", "method"=>"POST"}]}
I, [2015-01-02T09:30:35.660935 #10344]  INFO -- : @payment save just done
I, [2015-01-02T09:30:36.629137 #10344]  INFO -- : #<Payment:0x00000009738fd0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000049d2db8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000049bbc80 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000049baf60 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000049b9ac0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000049b8c60 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000049a2d48 @error=nil, @subtotal="38.98">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000049a1948 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000049a0db8 @error=nil, @name="penknife", @sku="PK1", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000499a210 @error=nil, @name="tee shirt", @sku="ts1", @price="18.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000058a7f50 @error=nil, @return_url="http://localhost:3000/orders/72/confirm", @cancel_url="http://localhost:3000/orders/72/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005826e28 @base=#<Payment:0x00000009738fd0 ...>, @messages={}>, @request_id="d86e0583-59e5-40ff-b4bd-47aecf465ec3", @header={}, @id="PAY-0CL31985DC2927826KSTGKOY", @create_time="2015-01-02T09:30:35Z", @update_time="2015-01-02T09:30:35Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000049926a0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL31985DC2927826KSTGKOY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000004990e68 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-34V48946N5400001S", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000498a4f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL31985DC2927826KSTGKOY/execute", @rel="execute", @method="POST">]>
I, [2015-01-02T09:30:37.596339 #10344]  INFO -- : #<Payment:0x00000009738fd0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000049d2db8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000049bbc80 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000049baf60 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000049b9ac0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000049b8c60 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000049a2d48 @error=nil, @subtotal="38.98">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000049a1948 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000049a0db8 @error=nil, @name="penknife", @sku="PK1", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000499a210 @error=nil, @name="tee shirt", @sku="ts1", @price="18.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000058a7f50 @error=nil, @return_url="http://localhost:3000/orders/72/confirm", @cancel_url="http://localhost:3000/orders/72/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005826e28 @base=#<Payment:0x00000009738fd0 ...>, @messages={}>, @request_id="d86e0583-59e5-40ff-b4bd-47aecf465ec3", @header={}, @id="PAY-0CL31985DC2927826KSTGKOY", @create_time="2015-01-02T09:30:35Z", @update_time="2015-01-02T09:30:35Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000049926a0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL31985DC2927826KSTGKOY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000004990e68 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-34V48946N5400001S", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000498a4f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL31985DC2927826KSTGKOY/execute", @rel="execute", @method="POST">]>
D, [2015-01-02T09:30:37.767939 #10344] DEBUG -- :   [1m[36m (124.8ms)[0m  [1mcommit transaction[0m
I, [2015-01-02T09:30:37.799139 #10344]  INFO -- : about to approve url
I, [2015-01-02T09:30:38.831741 #10344]  INFO -- : #<Payment:0x00000009738fd0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000049d2db8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000049bbc80 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000049baf60 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000049b9ac0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000049b8c60 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000049a2d48 @error=nil, @subtotal="38.98">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000049a1948 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000049a0db8 @error=nil, @name="penknife", @sku="PK1", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000499a210 @error=nil, @name="tee shirt", @sku="ts1", @price="18.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000058a7f50 @error=nil, @return_url="http://localhost:3000/orders/72/confirm", @cancel_url="http://localhost:3000/orders/72/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005826e28 @base=#<Payment:0x00000009738fd0 ...>, @messages={}>, @request_id="d86e0583-59e5-40ff-b4bd-47aecf465ec3", @header={}, @id="PAY-0CL31985DC2927826KSTGKOY", @create_time="2015-01-02T09:30:35Z", @update_time="2015-01-02T09:30:35Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000049926a0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL31985DC2927826KSTGKOY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000004990e68 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-34V48946N5400001S", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000498a4f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL31985DC2927826KSTGKOY/execute", @rel="execute", @method="POST">]>
I, [2015-01-02T09:30:39.846743 #10344]  INFO -- : #<Payment:0x00000009738fd0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000049d2db8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000049bbc80 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000049baf60 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000049b9ac0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000049b8c60 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000049a2d48 @error=nil, @subtotal="38.98">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000049a1948 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000049a0db8 @error=nil, @name="penknife", @sku="PK1", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000499a210 @error=nil, @name="tee shirt", @sku="ts1", @price="18.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000058a7f50 @error=nil, @return_url="http://localhost:3000/orders/72/confirm", @cancel_url="http://localhost:3000/orders/72/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005826e28 @base=#<Payment:0x00000009738fd0 ...>, @messages={}>, @request_id="d86e0583-59e5-40ff-b4bd-47aecf465ec3", @header={}, @id="PAY-0CL31985DC2927826KSTGKOY", @create_time="2015-01-02T09:30:35Z", @update_time="2015-01-02T09:30:35Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000049926a0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL31985DC2927826KSTGKOY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000004990e68 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-34V48946N5400001S", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000498a4f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL31985DC2927826KSTGKOY/execute", @rel="execute", @method="POST">]>
I, [2015-01-02T09:30:39.909143 #10344]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-34V48946N5400001S
I, [2015-01-02T09:30:40.846145 #10344]  INFO -- : #<Payment:0x00000009738fd0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000049d2db8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000049bbc80 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000049baf60 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000049b9ac0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000049b8c60 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000049a2d48 @error=nil, @subtotal="38.98">>, @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000049a1948 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000049a0db8 @error=nil, @name="penknife", @sku="PK1", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000499a210 @error=nil, @name="tee shirt", @sku="ts1", @price="18.99", @currency="GBP", @quantity="1">]>, @description="King Clothing", @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000058a7f50 @error=nil, @return_url="http://localhost:3000/orders/72/confirm", @cancel_url="http://localhost:3000/orders/72/cancel">, @logger=#<Logger:0x000000059d73a8 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x000000059d7358 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000059d72e0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x000000059d72b8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x000000059d7218>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005826e28 @base=#<Payment:0x00000009738fd0 ...>, @messages={}>, @request_id="d86e0583-59e5-40ff-b4bd-47aecf465ec3", @header={}, @id="PAY-0CL31985DC2927826KSTGKOY", @create_time="2015-01-02T09:30:35Z", @update_time="2015-01-02T09:30:35Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000049926a0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL31985DC2927826KSTGKOY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000004990e68 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-34V48946N5400001S", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000498a4f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0CL31985DC2927826KSTGKOY/execute", @rel="execute", @method="POST">]>
I, [2015-01-02T09:30:40.892945 #10344]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-34V48946N5400001S
I, [2015-01-02T09:30:40.924145 #10344]  INFO -- : Completed 403 Forbidden in 49329ms (ActiveRecord: 171.6ms)
D, [2015-01-03T23:13:40.771736 #29877] DEBUG -- : 
D, [2015-01-03T23:13:40.783357 #29877] DEBUG -- : 
I, [2015-01-03T23:13:40.783643 #29877]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-03 23:13:40 +0000
D, [2015-01-03T23:13:42.163994 #29877] DEBUG -- :   [1m[36mActiveRecord::SchemaMigration Load (0.8ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
F, [2015-01-03T23:13:42.173902 #29877] FATAL -- : 
ActiveRecord::PendingMigrationError (Migrations are pending; run 'rake db:migrate RAILS_ENV=development' to resolve this issue.):
  activerecord (4.0.0) lib/active_record/migration.rb:379:in `check_pending!'
  activerecord (4.0.0) lib/active_record/migration.rb:366:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.0.0) lib/active_support/callbacks.rb:373:in `_run__1831120065827837334__call__callbacks'
  activesupport (4.0.0) lib/active_support/callbacks.rb:80:in `run_callbacks'
  actionpack (4.0.0) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/reloader.rb:64:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/remote_ip.rb:76:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.0.0) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.0.0) lib/rails/rack/logger.rb:23:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.5.2) lib/rack/methodoverride.rb:21:in `call'
  rack (1.5.2) lib/rack/runtime.rb:17:in `call'
  activesupport (4.0.0) lib/active_support/cache/strategy/local_cache.rb:83:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.0.0) lib/action_dispatch/middleware/static.rb:64:in `call'
  railties (4.0.0) lib/rails/engine.rb:511:in `call'
  railties (4.0.0) lib/rails/application.rb:97:in `call'
  rack (1.5.2) lib/rack/lock.rb:17:in `call'
  rack (1.5.2) lib/rack/content_length.rb:14:in `call'
  rack (1.5.2) lib/rack/handler/webrick.rb:60:in `service'
  /Users/benking/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/webrick/httpserver.rb:138:in `service'
  /Users/benking/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/webrick/httpserver.rb:94:in `run'
  /Users/benking/.rvm/rubies/ruby-2.1.5/lib/ruby/2.1.0/webrick/server.rb:295:in `block in start_thread'


I, [2015-01-03T23:13:42.312042 #29877]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (0.8ms)
I, [2015-01-03T23:13:42.320523 #29877]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.4ms)
I, [2015-01-03T23:13:42.331898 #29877]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.3ms)
I, [2015-01-03T23:13:42.332107 #29877]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (41.1ms)
D, [2015-01-03T23:14:41.910816 #29884] DEBUG -- :   [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
I, [2015-01-03T23:14:41.916270 #29884]  INFO -- : Migrating to AddShippingAddress1ToOrders (20141218192522)
D, [2015-01-03T23:14:41.933784 #29884] DEBUG -- :   [1m[35m (0.2ms)[0m  begin transaction
D, [2015-01-03T23:14:41.971794 #29884] DEBUG -- :   [1m[36m (14.7ms)[0m  [1mALTER TABLE "orders" ADD "shipping_address1" varchar(255)[0m
E, [2015-01-03T23:14:41.971924 #29884] ERROR -- : SQLite3::SQLException: duplicate column name: shipping_address1: ALTER TABLE "orders" ADD "shipping_address1" varchar(255)
D, [2015-01-03T23:14:41.972314 #29884] DEBUG -- :   [1m[35m (0.2ms)[0m  rollback transaction
D, [2015-01-03T23:17:24.239943 #29890] DEBUG -- : 
D, [2015-01-03T23:17:24.240034 #29890] DEBUG -- : 
I, [2015-01-03T23:17:24.240422 #29890]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-03 23:17:24 +0000
D, [2015-01-03T23:17:24.468574 #29890] DEBUG -- :   [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
I, [2015-01-03T23:17:24.752755 #29890]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-03T23:17:24.841033 #29890] DEBUG -- :   [1m[35m (0.1ms)[0m  begin transaction
D, [2015-01-03T23:17:24.898380 #29890] DEBUG -- :   [1m[36mSQL (39.8ms)[0m  [1mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Sat, 03 Jan 2015 23:17:24 UTC +00:00], ["updated_at", Sat, 03 Jan 2015 23:17:24 UTC +00:00]]
D, [2015-01-03T23:17:24.901776 #29890] DEBUG -- :   [1m[35m (2.9ms)[0m  commit transaction
D, [2015-01-03T23:17:24.975553 #29890] DEBUG -- :   [1m[36mProduct Load (6.9ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-03T23:17:25.024598 #29890]  INFO -- : Cache digest for store/index.html: a93d4e2e981ab3dfce98a095c3b6c059
I, [2015-01-03T23:17:25.067024 #29890]  INFO -- : Read fragment views/store/products/2-20141022062504570899000/a93d4e2e981ab3dfce98a095c3b6c059 (40.6ms)
I, [2015-01-03T23:17:25.067340 #29890]  INFO -- :   Rendered store/index.html.erb within layouts/application (102.7ms)
D, [2015-01-03T23:17:30.897915 #29890] DEBUG -- :   [1m[35mLineItem Exists (33.6ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 53]]
D, [2015-01-03T23:17:30.924479 #29890] DEBUG -- :   [1m[36mLineItem Load (0.2ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-03T23:17:30.924783 #29890]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-03T23:17:31.013508 #29890]  INFO -- :   Rendered carts/_cart.html.erb (90.7ms)
I, [2015-01-03T23:17:31.014370 #29890]  INFO -- : Completed 200 OK in 6261ms (Views: 6062.3ms | ActiveRecord: 84.8ms)
D, [2015-01-03T23:17:31.128630 #29890] DEBUG -- : 
D, [2015-01-03T23:17:31.128714 #29890] DEBUG -- : 
I, [2015-01-03T23:17:31.128981 #29890]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-03 23:17:31 +0000
D, [2015-01-03T23:17:31.158808 #29890] DEBUG -- : 
D, [2015-01-03T23:17:31.158891 #29890] DEBUG -- : 
I, [2015-01-03T23:17:31.159096 #29890]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-03 23:17:31 +0000
D, [2015-01-03T23:17:31.208537 #29890] DEBUG -- : 
D, [2015-01-03T23:17:31.208619 #29890] DEBUG -- : 
I, [2015-01-03T23:17:31.208808 #29890]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-03 23:17:31 +0000
D, [2015-01-03T23:17:31.298630 #29890] DEBUG -- : 
D, [2015-01-03T23:17:31.298814 #29890] DEBUG -- : 
I, [2015-01-03T23:17:31.299004 #29890]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-03 23:17:31 +0000
D, [2015-01-03T23:17:31.321321 #29890] DEBUG -- : 
D, [2015-01-03T23:17:31.321449 #29890] DEBUG -- : 
I, [2015-01-03T23:17:31.321636 #29890]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-03 23:17:31 +0000
D, [2015-01-03T23:17:31.340812 #29890] DEBUG -- : 
D, [2015-01-03T23:17:31.340890 #29890] DEBUG -- : 
I, [2015-01-03T23:17:31.341096 #29890]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-03 23:17:31 +0000
D, [2015-01-03T23:17:31.349181 #29890] DEBUG -- : 
D, [2015-01-03T23:17:31.349287 #29890] DEBUG -- : 
I, [2015-01-03T23:17:31.349491 #29890]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-03 23:17:31 +0000
D, [2015-01-03T23:17:31.357326 #29890] DEBUG -- : 
D, [2015-01-03T23:17:31.357403 #29890] DEBUG -- : 
I, [2015-01-03T23:17:31.357582 #29890]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-03 23:17:31 +0000
D, [2015-01-03T23:17:31.369203 #29890] DEBUG -- : 
D, [2015-01-03T23:17:31.369283 #29890] DEBUG -- : 
I, [2015-01-03T23:17:31.369470 #29890]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-03 23:17:31 +0000
D, [2015-01-03T23:17:31.379455 #29890] DEBUG -- : 
D, [2015-01-03T23:17:31.379545 #29890] DEBUG -- : 
I, [2015-01-03T23:17:31.379749 #29890]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-03 23:17:31 +0000
D, [2015-01-03T23:17:31.412407 #29890] DEBUG -- : 
D, [2015-01-03T23:17:31.412491 #29890] DEBUG -- : 
I, [2015-01-03T23:17:31.412689 #29890]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-03 23:17:31 +0000
D, [2015-01-03T23:17:31.445549 #29890] DEBUG -- : 
D, [2015-01-03T23:17:31.445633 #29890] DEBUG -- : 
I, [2015-01-03T23:17:31.445845 #29890]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-03 23:17:31 +0000
D, [2015-01-03T23:17:31.484322 #29890] DEBUG -- : 
D, [2015-01-03T23:17:31.484408 #29890] DEBUG -- : 
I, [2015-01-03T23:17:31.484632 #29890]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-03 23:17:31 +0000
D, [2015-01-03T23:17:31.499280 #29890] DEBUG -- : 
D, [2015-01-03T23:17:31.499359 #29890] DEBUG -- : 
I, [2015-01-03T23:17:31.499561 #29890]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-03 23:17:31 +0000
D, [2015-01-03T23:17:31.521154 #29890] DEBUG -- : 
D, [2015-01-03T23:17:31.521233 #29890] DEBUG -- : 
I, [2015-01-03T23:17:31.521429 #29890]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-03 23:17:31 +0000
D, [2015-01-03T23:17:31.542815 #29890] DEBUG -- : 
D, [2015-01-03T23:17:31.542891 #29890] DEBUG -- : 
I, [2015-01-03T23:17:31.543083 #29890]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-03 23:17:31 +0000
D, [2015-01-03T23:17:31.563791 #29890] DEBUG -- : 
D, [2015-01-03T23:17:31.563876 #29890] DEBUG -- : 
I, [2015-01-03T23:17:31.564051 #29890]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-03 23:17:31 +0000
D, [2015-01-03T23:17:31.587798 #29890] DEBUG -- : 
D, [2015-01-03T23:17:31.587904 #29890] DEBUG -- : 
I, [2015-01-03T23:17:31.588112 #29890]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-03 23:17:31 +0000
D, [2015-01-03T23:17:31.611333 #29890] DEBUG -- : 
D, [2015-01-03T23:17:31.611421 #29890] DEBUG -- : 
I, [2015-01-03T23:17:31.611607 #29890]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-03 23:17:31 +0000
D, [2015-01-03T23:17:31.643608 #29890] DEBUG -- : 
D, [2015-01-03T23:17:31.643689 #29890] DEBUG -- : 
I, [2015-01-03T23:17:31.643882 #29890]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-03 23:17:31 +0000
D, [2015-01-03T23:17:31.674245 #29890] DEBUG -- : 
D, [2015-01-03T23:17:31.674322 #29890] DEBUG -- : 
I, [2015-01-03T23:17:31.674515 #29890]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-03 23:17:31 +0000
D, [2015-01-03T23:17:31.684218 #29890] DEBUG -- : 
D, [2015-01-03T23:17:31.690178 #29890] DEBUG -- : 
I, [2015-01-03T23:17:31.690419 #29890]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-03 23:17:31 +0000
D, [2015-01-03T23:17:31.731458 #29890] DEBUG -- : 
D, [2015-01-03T23:17:31.731540 #29890] DEBUG -- : 
I, [2015-01-03T23:17:31.731732 #29890]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-03 23:17:31 +0000
D, [2015-01-03T23:17:31.742689 #29890] DEBUG -- : 
D, [2015-01-03T23:17:31.742766 #29890] DEBUG -- : 
I, [2015-01-03T23:17:31.742977 #29890]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-03 23:17:31 +0000
D, [2015-01-03T23:17:31.754608 #29890] DEBUG -- : 
D, [2015-01-03T23:17:31.754805 #29890] DEBUG -- : 
I, [2015-01-03T23:17:31.755044 #29890]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-03 23:17:31 +0000
D, [2015-01-03T23:17:31.763808 #29890] DEBUG -- : 
D, [2015-01-03T23:17:31.763889 #29890] DEBUG -- : 
I, [2015-01-03T23:17:31.764081 #29890]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-03 23:17:31 +0000
D, [2015-01-03T23:17:31.792694 #29890] DEBUG -- : 
D, [2015-01-03T23:17:31.792778 #29890] DEBUG -- : 
I, [2015-01-03T23:17:31.792948 #29890]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-03 23:17:31 +0000
D, [2015-01-03T23:17:31.886602 #29890] DEBUG -- : 
D, [2015-01-03T23:17:31.886686 #29890] DEBUG -- : 
I, [2015-01-03T23:17:31.886858 #29890]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-03 23:17:31 +0000
D, [2015-01-03T23:17:31.976793 #29890] DEBUG -- : 
D, [2015-01-03T23:17:31.976880 #29890] DEBUG -- : 
I, [2015-01-03T23:17:31.977094 #29890]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-03 23:17:31 +0000
D, [2015-01-03T23:17:32.122701 #29890] DEBUG -- : 
D, [2015-01-03T23:17:32.122843 #29890] DEBUG -- : 
I, [2015-01-03T23:17:32.122960 #29890]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-03 23:17:32 +0000
D, [2015-01-03T23:18:16.981035 #29890] DEBUG -- : 
D, [2015-01-03T23:18:16.981153 #29890] DEBUG -- : 
I, [2015-01-03T23:18:16.981418 #29890]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-03 23:18:16 +0000
I, [2015-01-03T23:18:17.003124 #29890]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-03T23:18:17.019055 #29890]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-03T23:18:17.021481 #29890] DEBUG -- :   [1m[35mCart Load (0.3ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-03T23:18:17.022900 #29890] DEBUG -- :   [1m[36mProduct Load (0.2ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-03T23:18:17.043904 #29890] DEBUG -- :   [1m[35mLineItem Load (0.5ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 53]]
D, [2015-01-03T23:18:17.145935 #29890] DEBUG -- :   [1m[36mProduct Load (0.3ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-03T23:18:17.160305 #29890] DEBUG -- :   [1m[35m (0.1ms)[0m  begin transaction
D, [2015-01-03T23:18:17.191140 #29890] DEBUG -- :   [1m[36mSQL (27.5ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 53], ["created_at", Sat, 03 Jan 2015 23:18:17 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7fa9c80f2390,'0.1299E2',18(36)>], ["size", "extra small"], ["updated_at", Sat, 03 Jan 2015 23:18:17 UTC +00:00]]
D, [2015-01-03T23:18:17.194515 #29890] DEBUG -- :   [1m[35m (2.8ms)[0m  commit transaction
D, [2015-01-03T23:18:17.220272 #29890] DEBUG -- :   [1m[36mLineItem Load (0.2ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-03T23:18:17.245142 #29890]  INFO -- :   Rendered line_items/_line_item.html.erb (1.6ms)
I, [2015-01-03T23:18:17.246986 #29890]  INFO -- :   Rendered carts/_cart.html.erb (28.0ms)
I, [2015-01-03T23:18:17.247349 #29890]  INFO -- :   Rendered line_items/create.js.erb (30.1ms)
I, [2015-01-03T23:18:17.247635 #29890]  INFO -- : Completed 200 OK in 228ms (Views: 52.4ms | ActiveRecord: 31.9ms)
D, [2015-01-03T23:18:19.257547 #29890] DEBUG -- : 
D, [2015-01-03T23:18:19.257631 #29890] DEBUG -- : 
I, [2015-01-03T23:18:19.257852 #29890]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-03 23:18:19 +0000
I, [2015-01-03T23:18:19.264705 #29890]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-03T23:18:19.264842 #29890]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-03T23:18:19.269689 #29890] DEBUG -- :   [1m[35mCart Load (2.4ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-03T23:18:19.271752 #29890] DEBUG -- :   [1m[36mProduct Load (0.2ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-03T23:18:19.273596 #29890] DEBUG -- :   [1m[35mLineItem Load (0.2ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 53]]
D, [2015-01-03T23:18:19.275046 #29890] DEBUG -- :   [1m[36mProduct Load (0.1ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-03T23:18:19.275660 #29890] DEBUG -- :   [1m[35m (0.1ms)[0m  begin transaction
D, [2015-01-03T23:18:19.277640 #29890] DEBUG -- :   [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 53], ["created_at", Sat, 03 Jan 2015 23:18:19 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:7fa9c802b5d8,'0.1099E2',18(36)>], ["size", "extra small"], ["updated_at", Sat, 03 Jan 2015 23:18:19 UTC +00:00]]
D, [2015-01-03T23:18:19.301391 #29890] DEBUG -- :   [1m[35m (23.3ms)[0m  commit transaction
D, [2015-01-03T23:18:19.306667 #29890] DEBUG -- :   [1m[36mLineItem Load (0.2ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
D, [2015-01-03T23:18:19.309191 #29890] DEBUG -- :   [1m[35mProduct Load (0.1ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-03T23:18:19.310364 #29890]  INFO -- :   Rendered line_items/_line_item.html.erb (2.1ms)
I, [2015-01-03T23:18:19.311964 #29890]  INFO -- :   Rendered carts/_cart.html.erb (6.0ms)
I, [2015-01-03T23:18:19.312491 #29890]  INFO -- :   Rendered line_items/create.js.erb (7.5ms)
I, [2015-01-03T23:18:19.312729 #29890]  INFO -- : Completed 200 OK in 47ms (Views: 10.6ms | ActiveRecord: 27.3ms)
D, [2015-01-03T23:18:22.600889 #29890] DEBUG -- : 
D, [2015-01-03T23:18:22.600969 #29890] DEBUG -- : 
I, [2015-01-03T23:18:22.601084 #29890]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-03 23:18:22 +0000
I, [2015-01-03T23:18:22.642598 #29890]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-03T23:18:22.668481 #29890] DEBUG -- :   [1m[36mUser Load (9.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" IS NULL LIMIT 1[0m
I, [2015-01-03T23:18:22.669493 #29890]  INFO -- : Redirected to http://localhost:3000/login
I, [2015-01-03T23:18:22.669632 #29890]  INFO -- : Filter chain halted as :authorize rendered or redirected
I, [2015-01-03T23:18:22.669800 #29890]  INFO -- : Completed 302 Found in 27ms (ActiveRecord: 9.6ms)
D, [2015-01-03T23:18:22.685205 #29890] DEBUG -- : 
D, [2015-01-03T23:18:22.685287 #29890] DEBUG -- : 
I, [2015-01-03T23:18:22.685420 #29890]  INFO -- : Started GET "/login" for 127.0.0.1 at 2015-01-03 23:18:22 +0000
I, [2015-01-03T23:18:22.694246 #29890]  INFO -- : Processing by SessionsController#new as HTML
I, [2015-01-03T23:18:22.716563 #29890]  INFO -- :   Rendered sessions/new.html.erb within layouts/application (3.2ms)
I, [2015-01-03T23:18:22.727527 #29890]  INFO -- : Completed 200 OK in 33ms (Views: 32.1ms | ActiveRecord: 0.0ms)
D, [2015-01-03T23:18:33.774232 #29890] DEBUG -- : 
D, [2015-01-03T23:18:33.774334 #29890] DEBUG -- : 
I, [2015-01-03T23:18:33.774457 #29890]  INFO -- : Started POST "/login" for 127.0.0.1 at 2015-01-03 23:18:33 +0000
I, [2015-01-03T23:18:33.782453 #29890]  INFO -- : Processing by SessionsController#create as HTML
I, [2015-01-03T23:18:33.782567 #29890]  INFO -- :   Parameters: {"utf8"=>"âœ“", "authenticity_token"=>"ohbtEjIJsyqL+SAcUq0N+GSOROzNN7MrL8IuyZOU47c=", "name"=>"Simon", "password"=>"[FILTERED]", "commit"=>"Login"}
D, [2015-01-03T23:18:33.785088 #29890] DEBUG -- :   [1m[35mUser Load (0.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Simon' LIMIT 1
I, [2015-01-03T23:18:33.912243 #29890]  INFO -- : Redirected to http://localhost:3000/admin
I, [2015-01-03T23:18:33.912539 #29890]  INFO -- : Completed 302 Found in 130ms (ActiveRecord: 0.5ms)
D, [2015-01-03T23:18:33.932086 #29890] DEBUG -- : 
D, [2015-01-03T23:18:33.932275 #29890] DEBUG -- : 
I, [2015-01-03T23:18:33.932605 #29890]  INFO -- : Started GET "/admin" for 127.0.0.1 at 2015-01-03 23:18:33 +0000
I, [2015-01-03T23:18:33.945312 #29890]  INFO -- : Processing by AdminController#index as HTML
D, [2015-01-03T23:18:33.947408 #29890] DEBUG -- :   [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1[0m
I, [2015-01-03T23:18:33.947798 #29890]  INFO -- : Filter chain halted as :authorize rendered or redirected
I, [2015-01-03T23:18:33.947957 #29890]  INFO -- : Completed 401 Unauthorized in 2ms (ActiveRecord: 0.2ms)
D, [2015-01-03T23:18:42.501691 #29890] DEBUG -- : 
D, [2015-01-03T23:18:42.501773 #29890] DEBUG -- : 
I, [2015-01-03T23:18:42.501905 #29890]  INFO -- : Started GET "/admin" for 127.0.0.1 at 2015-01-03 23:18:42 +0000
I, [2015-01-03T23:18:42.508277 #29890]  INFO -- : Processing by AdminController#index as HTML
D, [2015-01-03T23:18:42.509590 #29890] DEBUG -- :   [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 4 LIMIT 1
D, [2015-01-03T23:18:42.510902 #29890] DEBUG -- :   [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-03T23:18:42.581043 #29890] DEBUG -- :   [1m[35m (23.1ms)[0m  SELECT COUNT(*) FROM "orders"
I, [2015-01-03T23:18:42.627027 #29890]  INFO -- :   Rendered admin/index.html.erb within layouts/application (1.5ms)
I, [2015-01-03T23:18:42.639173 #29890]  INFO -- : Completed 200 OK in 131ms (Views: 57.5ms | ActiveRecord: 24.1ms)
D, [2015-01-03T23:18:42.698670 #29890] DEBUG -- : 
D, [2015-01-03T23:18:42.698758 #29890] DEBUG -- : 
I, [2015-01-03T23:18:42.699294 #29890]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-03 23:18:42 +0000
D, [2015-01-03T23:18:42.721333 #29890] DEBUG -- : 
D, [2015-01-03T23:18:42.721441 #29890] DEBUG -- : 
I, [2015-01-03T23:18:42.721636 #29890]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-03 23:18:42 +0000
D, [2015-01-03T23:18:42.726543 #29890] DEBUG -- : 
D, [2015-01-03T23:18:42.726625 #29890] DEBUG -- : 
I, [2015-01-03T23:18:42.726810 #29890]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-03 23:18:42 +0000
D, [2015-01-03T23:18:42.731927 #29890] DEBUG -- : 
D, [2015-01-03T23:18:42.732007 #29890] DEBUG -- : 
I, [2015-01-03T23:18:42.732198 #29890]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-03 23:18:42 +0000
D, [2015-01-03T23:18:42.740941 #29890] DEBUG -- : 
D, [2015-01-03T23:18:42.741026 #29890] DEBUG -- : 
I, [2015-01-03T23:18:42.741248 #29890]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-03 23:18:42 +0000
D, [2015-01-03T23:18:46.443579 #29890] DEBUG -- : 
D, [2015-01-03T23:18:46.443743 #29890] DEBUG -- : 
I, [2015-01-03T23:18:46.443857 #29890]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-03 23:18:46 +0000
I, [2015-01-03T23:18:46.450603 #29890]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-03T23:18:46.452096 #29890] DEBUG -- :   [1m[36mCart Load (0.2ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-03T23:18:46.513135 #29890] DEBUG -- :   [1m[35mProduct Load (0.3ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-03T23:18:46.514350 #29890]  INFO -- : Cache digest for store/index.xml: a93d4e2e981ab3dfce98a095c3b6c059
I, [2015-01-03T23:18:46.536693 #29890]  INFO -- : Read fragment views/store/products/2-20141022062504570899000/a93d4e2e981ab3dfce98a095c3b6c059 (21.9ms)
I, [2015-01-03T23:18:46.536960 #29890]  INFO -- :   Rendered store/index.html.erb within layouts/application (25.9ms)
D, [2015-01-03T23:18:46.548370 #29890] DEBUG -- :   [1m[36mLineItem Exists (0.1ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 53]]
D, [2015-01-03T23:18:46.574212 #29890] DEBUG -- :   [1m[35mLineItem Load (0.2ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
D, [2015-01-03T23:18:46.593030 #29890] DEBUG -- :   [1m[36mProduct Load (0.2ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-03T23:18:46.594753 #29890] DEBUG -- :   [1m[35mProduct Load (0.1ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
I, [2015-01-03T23:18:46.595569 #29890]  INFO -- :   Rendered line_items/_line_item.html.erb (5.2ms)
I, [2015-01-03T23:18:46.597678 #29890]  INFO -- :   Rendered carts/_cart.html.erb (25.1ms)
I, [2015-01-03T23:18:46.599197 #29890]  INFO -- : Completed 200 OK in 148ms (Views: 145.4ms | ActiveRecord: 1.1ms)
D, [2015-01-03T23:18:48.498195 #29890] DEBUG -- : 
D, [2015-01-03T23:18:48.498334 #29890] DEBUG -- : 
I, [2015-01-03T23:18:48.498452 #29890]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-03 23:18:48 +0000
I, [2015-01-03T23:18:48.506061 #29890]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-03T23:18:48.511193 #29890] DEBUG -- :   [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
D, [2015-01-03T23:18:48.512437 #29890] DEBUG -- :   [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-03T23:18:48.513431 #29890] DEBUG -- :   [1m[36mCart Load (0.2ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-03T23:18:48.514883 #29890] DEBUG -- :   [1m[35mLineItem Load (0.1ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
I, [2015-01-03T23:18:48.517467 #29890]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-03T23:18:55.874050 #29890] DEBUG -- :   [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
D, [2015-01-03T23:18:55.983373 #29890] DEBUG -- :   [1m[35mSQL (1.9ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Sat, 03 Jan 2015 23:18:55 UTC +00:00], ["updated_at", Sat, 03 Jan 2015 23:18:55 UTC +00:00]]
D, [2015-01-03T23:18:56.001475 #29890] DEBUG -- :   [1m[36mSQL (2.1ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 107[0m  [["cart_id", nil], ["order_id", 58], ["updated_at", Sat, 03 Jan 2015 23:18:55 UTC +00:00]]
D, [2015-01-03T23:18:56.016419 #29890] DEBUG -- :   [1m[35mSQL (1.3ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 108  [["cart_id", nil], ["order_id", 58], ["updated_at", Sat, 03 Jan 2015 23:18:56 UTC +00:00]]
I, [2015-01-03T23:18:56.018189 #29890]  INFO -- : about to @payment.create
D, [2015-01-03T23:18:57.560351 #29890] DEBUG -- :   [1m[36mProduct Load (0.8ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-03T23:18:57.587194 #29890] DEBUG -- :   [1m[35mProduct Load (0.8ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
I, [2015-01-03T23:18:59.296471 #29890]  INFO -- : in order=
I, [2015-01-03T23:18:59.298963 #29890]  INFO -- : in payment.create
I, [2015-01-03T23:18:59.307436 #29890]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"penknife", "price"=>"19.99", "currency"=>"GBP", "sku"=>"PK1"}, {"quantity"=>"1", "name"=>"tee shirt", "price"=>"18.99", "currency"=>"GBP", "sku"=>"ts1"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/58/confirm", "cancel_url"=>"http://localhost:3000/orders/58/cancel"}}
I, [2015-01-03T23:18:59.309890 #29890]  INFO -- : #<ActiveModel::Errors:0x007fa9c4b91200 @base=#<Payment:0x007fa9c4d30ca0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c4d301d8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c4c78330 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4c73ce0 @error=nil, @total="23.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c4c716e8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4c70900 @error=nil, @name="penknife", @sku="PK1", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4c69e70 @error=nil, @name="tee shirt", @sku="ts1", @price="18.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c4bf20f0 @error=nil, @return_url="http://localhost:3000/orders/58/confirm", @cancel_url="http://localhost:3000/orders/58/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c4b91200 ...>>, @messages={}>
I, [2015-01-03T23:18:59.310441 #29890]  INFO -- : got past invalid
I, [2015-01-03T23:18:59.409565 #29890]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/oauth2/token
I, [2015-01-03T23:19:01.545613 #29890]  INFO -- : Response[200]: OK, Duration: 2.135s
I, [2015-01-03T23:19:01.564774 #29890]  INFO -- : PayPal-Request-Id: 181452bd-fdb4-41ce-b8cb-95bd8d730214
I, [2015-01-03T23:19:01.565463 #29890]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-03T23:19:02.619687 #29890]  INFO -- : Response[400]: Bad Request, Duration: 1.053s
I, [2015-01-03T23:19:02.621465 #29890]  INFO -- :  in error=
I, [2015-01-03T23:19:02.665020 #29890]  INFO -- : back from super
I, [2015-01-03T23:19:02.672804 #29890]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"penknife", "price"=>"19.99", "currency"=>"GBP", "sku"=>"PK1"}, {"quantity"=>"1", "name"=>"tee shirt", "price"=>"18.99", "currency"=>"GBP", "sku"=>"ts1"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/58/confirm", "cancel_url"=>"http://localhost:3000/orders/58/cancel"}}
I, [2015-01-03T23:19:02.732224 #29890]  INFO -- : @payment save just done
I, [2015-01-03T23:19:02.733593 #29890]  INFO -- : #<Payment:0x007fa9c4d30ca0 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"9b4087a6b3616"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c4d301d8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c4c78330 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4c73ce0 @error=nil, @total="23.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c4c716e8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4c70900 @error=nil, @name="penknife", @sku="PK1", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4c69e70 @error=nil, @name="tee shirt", @sku="ts1", @price="18.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c4bf20f0 @error=nil, @return_url="http://localhost:3000/orders/58/confirm", @cancel_url="http://localhost:3000/orders/58/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c4b91200 @base=#<Payment:0x007fa9c4d30ca0 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="181452bd-fdb4-41ce-b8cb-95bd8d730214", @header={}>
I, [2015-01-03T23:19:02.734663 #29890]  INFO -- : #<Payment:0x007fa9c4d30ca0 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"9b4087a6b3616"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c4d301d8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c4c78330 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4c73ce0 @error=nil, @total="23.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c4c716e8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4c70900 @error=nil, @name="penknife", @sku="PK1", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4c69e70 @error=nil, @name="tee shirt", @sku="ts1", @price="18.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c4bf20f0 @error=nil, @return_url="http://localhost:3000/orders/58/confirm", @cancel_url="http://localhost:3000/orders/58/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c4b91200 @base=#<Payment:0x007fa9c4d30ca0 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="181452bd-fdb4-41ce-b8cb-95bd8d730214", @header={}>
D, [2015-01-03T23:19:02.740997 #29890] DEBUG -- :   [1m[36m (4.3ms)[0m  [1mcommit transaction[0m
I, [2015-01-03T23:19:02.742915 #29890]  INFO -- : about to approve url
I, [2015-01-03T23:19:02.744214 #29890]  INFO -- : #<Payment:0x007fa9c4d30ca0 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions", "issue"=>"Item amount must add up to specified amount subtotal (or total if amount details not specified)"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"9b4087a6b3616"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c4d301d8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c4c78330 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4c73ce0 @error=nil, @total="23.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c4c716e8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4c70900 @error=nil, @name="penknife", @sku="PK1", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4c69e70 @error=nil, @name="tee shirt", @sku="ts1", @price="18.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c4bf20f0 @error=nil, @return_url="http://localhost:3000/orders/58/confirm", @cancel_url="http://localhost:3000/orders/58/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c4b91200 @base=#<Payment:0x007fa9c4d30ca0 ...>, @messages={:transactions=>["Item amount must add up to specified amount subtotal (or total if amount details not specified)"]}>, @request_id="181452bd-fdb4-41ce-b8cb-95bd8d730214", @header={}>
I, [2015-01-03T23:19:02.747177 #29890]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-03T23:19:02.749729 #29890]  INFO -- : Completed 302 Found in 14243ms (ActiveRecord: 12.5ms)
D, [2015-01-03T23:19:02.770500 #29890] DEBUG -- : 
D, [2015-01-03T23:19:02.770972 #29890] DEBUG -- : 
I, [2015-01-03T23:19:02.771733 #29890]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-03 23:19:02 +0000
I, [2015-01-03T23:19:02.788918 #29890]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-03T23:19:02.797125 #29890] DEBUG -- :   [1m[35mCart Load (0.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-03T23:19:02.832949 #29890] DEBUG -- :   [1m[36mProduct Load (0.8ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-03T23:19:02.838366 #29890]  INFO -- : Read fragment views/store/products/2-20141022062504570899000/a93d4e2e981ab3dfce98a095c3b6c059 (1.6ms)
I, [2015-01-03T23:19:02.839437 #29890]  INFO -- :   Rendered store/index.html.erb within layouts/application (11.3ms)
D, [2015-01-03T23:19:02.902006 #29890] DEBUG -- :   [1m[35mLineItem Exists (0.6ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 53]]
D, [2015-01-03T23:19:02.923747 #29890] DEBUG -- :   [1m[36mLineItem Load (0.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-03T23:19:02.925744 #29890]  INFO -- :   Rendered collection (0.3ms)
I, [2015-01-03T23:19:02.940547 #29890]  INFO -- :   Rendered carts/_cart.html.erb (21.4ms)
I, [2015-01-03T23:19:02.951623 #29890]  INFO -- : Completed 200 OK in 162ms (Views: 148.6ms | ActiveRecord: 2.7ms)
D, [2015-01-03T23:19:58.877892 #29890] DEBUG -- : 
D, [2015-01-03T23:19:58.878344 #29890] DEBUG -- : 
I, [2015-01-03T23:19:58.879358 #29890]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-03 23:19:58 +0000
I, [2015-01-03T23:19:59.828224 #29890]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-03T23:19:59.828867 #29890]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-03T23:19:59.869536 #29890] DEBUG -- :   [1m[35mCart Load (0.7ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-03T23:19:59.938837 #29890] DEBUG -- :   [1m[36mProduct Load (1.8ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-03T23:20:00.033585 #29890] DEBUG -- :   [1m[35mLineItem Load (0.8ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 53]]
D, [2015-01-03T23:20:00.129050 #29890] DEBUG -- :   [1m[36mProduct Load (0.9ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-03T23:20:00.133275 #29890] DEBUG -- :   [1m[35m (0.4ms)[0m  begin transaction
D, [2015-01-03T23:20:00.147223 #29890] DEBUG -- :   [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 53], ["created_at", Sat, 03 Jan 2015 23:20:00 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7fa9c4ea6a30,'0.1299E2',18(36)>], ["size", "extra small"], ["updated_at", Sat, 03 Jan 2015 23:20:00 UTC +00:00]]
D, [2015-01-03T23:20:00.153988 #29890] DEBUG -- :   [1m[35m (4.0ms)[0m  commit transaction
D, [2015-01-03T23:20:00.171409 #29890] DEBUG -- :   [1m[36mLineItem Load (0.9ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-03T23:20:00.187144 #29890]  INFO -- :   Rendered line_items/_line_item.html.erb (5.1ms)
I, [2015-01-03T23:20:00.211018 #29890]  INFO -- :   Rendered carts/_cart.html.erb (43.9ms)
I, [2015-01-03T23:20:00.212973 #29890]  INFO -- :   Rendered line_items/create.js.erb (49.5ms)
I, [2015-01-03T23:20:00.214540 #29890]  INFO -- : Completed 200 OK in 385ms (Views: 57.1ms | ActiveRecord: 17.1ms)
D, [2015-01-03T23:20:02.084980 #29890] DEBUG -- : 
D, [2015-01-03T23:20:02.085428 #29890] DEBUG -- : 
I, [2015-01-03T23:20:02.086364 #29890]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-03 23:20:02 +0000
I, [2015-01-03T23:20:02.112041 #29890]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-03T23:20:02.112622 #29890]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-03T23:20:02.120274 #29890] DEBUG -- :   [1m[35mCart Load (0.5ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-03T23:20:02.127258 #29890] DEBUG -- :   [1m[36mProduct Load (0.5ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-03T23:20:02.135872 #29890] DEBUG -- :   [1m[35mLineItem Load (0.8ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 53]]
D, [2015-01-03T23:20:02.145353 #29890] DEBUG -- :   [1m[36mProduct Load (0.5ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-03T23:20:02.148975 #29890] DEBUG -- :   [1m[35m (0.4ms)[0m  begin transaction
D, [2015-01-03T23:20:02.158981 #29890] DEBUG -- :   [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 53], ["created_at", Sat, 03 Jan 2015 23:20:02 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:7fa9c81789b8,'0.1099E2',18(36)>], ["size", "extra small"], ["updated_at", Sat, 03 Jan 2015 23:20:02 UTC +00:00]]
D, [2015-01-03T23:20:02.165663 #29890] DEBUG -- :   [1m[35m (3.9ms)[0m  commit transaction
D, [2015-01-03T23:20:02.180332 #29890] DEBUG -- :   [1m[36mLineItem Load (0.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
D, [2015-01-03T23:20:02.195779 #29890] DEBUG -- :   [1m[35mProduct Load (0.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-03T23:20:02.208490 #29890]  INFO -- :   Rendered line_items/_line_item.html.erb (19.2ms)
I, [2015-01-03T23:20:02.221193 #29890]  INFO -- :   Rendered carts/_cart.html.erb (44.7ms)
I, [2015-01-03T23:20:02.223093 #29890]  INFO -- :   Rendered line_items/create.js.erb (49.5ms)
I, [2015-01-03T23:20:02.224645 #29890]  INFO -- : Completed 200 OK in 111ms (Views: 55.3ms | ActiveRecord: 9.5ms)
D, [2015-01-03T23:20:04.195039 #29890] DEBUG -- : 
D, [2015-01-03T23:20:04.195553 #29890] DEBUG -- : 
I, [2015-01-03T23:20:04.196241 #29890]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-03 23:20:04 +0000
I, [2015-01-03T23:20:04.266383 #29890]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-03T23:20:04.303072 #29890] DEBUG -- :   [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
D, [2015-01-03T23:20:04.360843 #29890] DEBUG -- :   [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-03T23:20:04.367800 #29890] DEBUG -- :   [1m[36mCart Load (0.7ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-03T23:20:04.399568 #29890] DEBUG -- :   [1m[35mLineItem Load (0.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
I, [2015-01-03T23:20:04.412789 #29890]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-03T23:20:14.272718 #29890] DEBUG -- :   [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
D, [2015-01-03T23:20:14.373745 #29890] DEBUG -- :   [1m[35mSQL (1.6ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Sat, 03 Jan 2015 23:20:14 UTC +00:00], ["updated_at", Sat, 03 Jan 2015 23:20:14 UTC +00:00]]
D, [2015-01-03T23:20:14.386338 #29890] DEBUG -- :   [1m[36mSQL (1.4ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 109[0m  [["cart_id", nil], ["order_id", 59], ["updated_at", Sat, 03 Jan 2015 23:20:14 UTC +00:00]]
D, [2015-01-03T23:20:14.397931 #29890] DEBUG -- :   [1m[35mSQL (1.1ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 110  [["cart_id", nil], ["order_id", 59], ["updated_at", Sat, 03 Jan 2015 23:20:14 UTC +00:00]]
I, [2015-01-03T23:20:14.399241 #29890]  INFO -- : about to @payment.create
D, [2015-01-03T23:20:15.085832 #29890] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-03T23:20:15.094030 #29890] DEBUG -- :   [1m[35mProduct Load (0.5ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
I, [2015-01-03T23:20:15.975553 #29890]  INFO -- : in order=
I, [2015-01-03T23:20:15.977641 #29890]  INFO -- : in payment.create
I, [2015-01-03T23:20:15.983702 #29890]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"penknife", "price"=>"12.99", "currency"=>"GBP", "sku"=>"PK1"}, {"quantity"=>"1", "name"=>"tee shirt", "price"=>"10.99", "currency"=>"GBP", "sku"=>"ts1"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/59/confirm", "cancel_url"=>"http://localhost:3000/orders/59/cancel"}}
I, [2015-01-03T23:20:15.985354 #29890]  INFO -- : #<ActiveModel::Errors:0x007fa9c6389da8 @base=#<Payment:0x007fa9c67c9c60 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c67c8018 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c6602288 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c6600280 @error=nil, @total="23.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c65f1c80 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c65e8900 @error=nil, @name="penknife", @sku="PK1", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c65d05f8 @error=nil, @name="tee shirt", @sku="ts1", @price="10.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c6478160 @error=nil, @return_url="http://localhost:3000/orders/59/confirm", @cancel_url="http://localhost:3000/orders/59/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c6389da8 ...>>, @messages={}>
I, [2015-01-03T23:20:15.985864 #29890]  INFO -- : got past invalid
I, [2015-01-03T23:20:16.005505 #29890]  INFO -- : PayPal-Request-Id: 9af95503-6af4-4f57-9a90-afc798ad8e3b
I, [2015-01-03T23:20:16.006136 #29890]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-03T23:20:17.843850 #29890]  INFO -- : Response[201]: Created, Duration: 1.837s
I, [2015-01-03T23:20:17.849407 #29890]  INFO -- : back from super
I, [2015-01-03T23:20:17.867488 #29890]  INFO -- : {"id"=>"PAY-7UV19733SB4604624KSUHSMI", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98", "details"=>{"subtotal"=>"23.98"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"penknife", "price"=>"12.99", "currency"=>"GBP", "sku"=>"PK1"}, {"quantity"=>"1", "name"=>"tee shirt", "price"=>"10.99", "currency"=>"GBP", "sku"=>"ts1"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/59/confirm", "cancel_url"=>"http://localhost:3000/orders/59/cancel"}, "create_time"=>"2015-01-03T23:20:17Z", "update_time"=>"2015-01-03T23:20:17Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-7UV19733SB4604624KSUHSMI", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-2DF680765C345473E", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-7UV19733SB4604624KSUHSMI/execute", "rel"=>"execute", "method"=>"POST"}]}
I, [2015-01-03T23:20:17.907665 #29890]  INFO -- : @payment save just done
I, [2015-01-03T23:20:17.908856 #29890]  INFO -- : #<Payment:0x007fa9c67c9c60 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c451ee90 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c4512320 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c459ef28 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c459ace8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4597250 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c4587e40 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c45819a0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c456b100 @error=nil, @name="penknife", @sku="PK1", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c44c3ec8 @error=nil, @name="tee shirt", @sku="ts1", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c6478160 @error=nil, @return_url="http://localhost:3000/orders/59/confirm", @cancel_url="http://localhost:3000/orders/59/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c6389da8 @base=#<Payment:0x007fa9c67c9c60 ...>, @messages={}>, @request_id="9af95503-6af4-4f57-9a90-afc798ad8e3b", @header={}, @id="PAY-7UV19733SB4604624KSUHSMI", @create_time="2015-01-03T23:20:17Z", @update_time="2015-01-03T23:20:17Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4467880 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7UV19733SB4604624KSUHSMI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4456238 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-2DF680765C345473E", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c443deb8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7UV19733SB4604624KSUHSMI/execute", @rel="execute", @method="POST">]>
I, [2015-01-03T23:20:17.910607 #29890]  INFO -- : #<Payment:0x007fa9c67c9c60 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c451ee90 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c4512320 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c459ef28 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c459ace8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4597250 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c4587e40 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c45819a0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c456b100 @error=nil, @name="penknife", @sku="PK1", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c44c3ec8 @error=nil, @name="tee shirt", @sku="ts1", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c6478160 @error=nil, @return_url="http://localhost:3000/orders/59/confirm", @cancel_url="http://localhost:3000/orders/59/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c6389da8 @base=#<Payment:0x007fa9c67c9c60 ...>, @messages={}>, @request_id="9af95503-6af4-4f57-9a90-afc798ad8e3b", @header={}, @id="PAY-7UV19733SB4604624KSUHSMI", @create_time="2015-01-03T23:20:17Z", @update_time="2015-01-03T23:20:17Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4467880 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7UV19733SB4604624KSUHSMI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4456238 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-2DF680765C345473E", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c443deb8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7UV19733SB4604624KSUHSMI/execute", @rel="execute", @method="POST">]>
D, [2015-01-03T23:20:17.920606 #29890] DEBUG -- :   [1m[36m (7.6ms)[0m  [1mcommit transaction[0m
I, [2015-01-03T23:20:17.922350 #29890]  INFO -- : about to approve url
I, [2015-01-03T23:20:17.923706 #29890]  INFO -- : #<Payment:0x007fa9c67c9c60 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c451ee90 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c4512320 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c459ef28 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c459ace8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4597250 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c4587e40 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c45819a0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c456b100 @error=nil, @name="penknife", @sku="PK1", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c44c3ec8 @error=nil, @name="tee shirt", @sku="ts1", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c6478160 @error=nil, @return_url="http://localhost:3000/orders/59/confirm", @cancel_url="http://localhost:3000/orders/59/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c6389da8 @base=#<Payment:0x007fa9c67c9c60 ...>, @messages={}>, @request_id="9af95503-6af4-4f57-9a90-afc798ad8e3b", @header={}, @id="PAY-7UV19733SB4604624KSUHSMI", @create_time="2015-01-03T23:20:17Z", @update_time="2015-01-03T23:20:17Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4467880 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7UV19733SB4604624KSUHSMI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4456238 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-2DF680765C345473E", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c443deb8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7UV19733SB4604624KSUHSMI/execute", @rel="execute", @method="POST">]>
I, [2015-01-03T23:20:17.925164 #29890]  INFO -- : #<Payment:0x007fa9c67c9c60 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c451ee90 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c4512320 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c459ef28 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c459ace8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4597250 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c4587e40 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c45819a0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c456b100 @error=nil, @name="penknife", @sku="PK1", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c44c3ec8 @error=nil, @name="tee shirt", @sku="ts1", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c6478160 @error=nil, @return_url="http://localhost:3000/orders/59/confirm", @cancel_url="http://localhost:3000/orders/59/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c6389da8 @base=#<Payment:0x007fa9c67c9c60 ...>, @messages={}>, @request_id="9af95503-6af4-4f57-9a90-afc798ad8e3b", @header={}, @id="PAY-7UV19733SB4604624KSUHSMI", @create_time="2015-01-03T23:20:17Z", @update_time="2015-01-03T23:20:17Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4467880 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7UV19733SB4604624KSUHSMI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4456238 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-2DF680765C345473E", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c443deb8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7UV19733SB4604624KSUHSMI/execute", @rel="execute", @method="POST">]>
I, [2015-01-03T23:20:17.925825 #29890]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-2DF680765C345473E
I, [2015-01-03T23:20:17.926997 #29890]  INFO -- : #<Payment:0x007fa9c67c9c60 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c451ee90 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c4512320 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c459ef28 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c459ace8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4597250 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c4587e40 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c45819a0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c456b100 @error=nil, @name="penknife", @sku="PK1", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c44c3ec8 @error=nil, @name="tee shirt", @sku="ts1", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c6478160 @error=nil, @return_url="http://localhost:3000/orders/59/confirm", @cancel_url="http://localhost:3000/orders/59/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c6389da8 @base=#<Payment:0x007fa9c67c9c60 ...>, @messages={}>, @request_id="9af95503-6af4-4f57-9a90-afc798ad8e3b", @header={}, @id="PAY-7UV19733SB4604624KSUHSMI", @create_time="2015-01-03T23:20:17Z", @update_time="2015-01-03T23:20:17Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4467880 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7UV19733SB4604624KSUHSMI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4456238 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-2DF680765C345473E", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c443deb8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7UV19733SB4604624KSUHSMI/execute", @rel="execute", @method="POST">]>
I, [2015-01-03T23:20:17.928822 #29890]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-2DF680765C345473E
I, [2015-01-03T23:20:17.931566 #29890]  INFO -- : Completed 403 Forbidden in 13664ms (ActiveRecord: 19.9ms)
D, [2015-01-03T23:26:00.743515 #29890] DEBUG -- : 
D, [2015-01-03T23:26:00.759265 #29890] DEBUG -- : 
I, [2015-01-03T23:26:00.760384 #29890]  INFO -- : Started GET "/orders/59/cancel?token=EC-2DF680765C345473E" for 127.0.0.1 at 2015-01-03 23:26:00 +0000
I, [2015-01-03T23:26:02.116253 #29890]  INFO -- : Processing by OrdersController#cancel as HTML
I, [2015-01-03T23:26:02.117089 #29890]  INFO -- :   Parameters: {"token"=>"EC-2DF680765C345473E", "order_id"=>"59"}
I, [2015-01-03T23:26:02.136880 #29890]  INFO -- : Completed 500 Internal Server Error in 18ms
F, [2015-01-03T23:26:02.158725 #29890] FATAL -- : 
NameError (undefined local variable or method `current_user' for #<OrdersController:0x007fa9c4e5c430>):
  app/controllers/orders_controller.rb:110:in `cancel'


I, [2015-01-03T23:26:02.313505 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (10.7ms)
I, [2015-01-03T23:26:02.333735 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (8.9ms)
I, [2015-01-03T23:26:02.350984 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (6.0ms)
I, [2015-01-03T23:26:02.352274 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (72.9ms)
D, [2015-01-03T23:26:17.934865 #29890] DEBUG -- : 
D, [2015-01-03T23:26:17.936054 #29890] DEBUG -- : 
I, [2015-01-03T23:26:17.937174 #29890]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-03 23:26:17 +0000
I, [2015-01-03T23:26:17.987666 #29890]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-03T23:26:18.029985 #29890] DEBUG -- :   [1m[35mCart Load (0.9ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-03T23:26:18.155232 #29890] DEBUG -- :   [1m[36mProduct Load (1.2ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-03T23:26:18.249939 #29890]  INFO -- : Read fragment views/store/products/2-20141022062504570899000/a93d4e2e981ab3dfce98a095c3b6c059 (12.9ms)
I, [2015-01-03T23:26:18.251379 #29890]  INFO -- :   Rendered store/index.html.erb within layouts/application (103.5ms)
D, [2015-01-03T23:26:18.355411 #29890] DEBUG -- :   [1m[35mLineItem Exists (0.8ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 53]]
D, [2015-01-03T23:26:18.402196 #29890] DEBUG -- :   [1m[36mLineItem Load (1.3ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-03T23:26:18.405038 #29890]  INFO -- :   Rendered collection (0.3ms)
I, [2015-01-03T23:26:18.437116 #29890]  INFO -- :   Rendered carts/_cart.html.erb (42.1ms)
I, [2015-01-03T23:26:18.449176 #29890]  INFO -- : Completed 200 OK in 460ms (Views: 334.6ms | ActiveRecord: 11.5ms)
D, [2015-01-03T23:26:18.601563 #29890] DEBUG -- : 
D, [2015-01-03T23:26:18.602064 #29890] DEBUG -- : 
I, [2015-01-03T23:26:18.603401 #29890]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-03 23:26:18 +0000
D, [2015-01-03T23:26:18.633993 #29890] DEBUG -- : 
D, [2015-01-03T23:26:18.634554 #29890] DEBUG -- : 
I, [2015-01-03T23:26:18.635855 #29890]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-03 23:26:18 +0000
D, [2015-01-03T23:26:18.658284 #29890] DEBUG -- : 
D, [2015-01-03T23:26:18.658794 #29890] DEBUG -- : 
I, [2015-01-03T23:26:18.659876 #29890]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-03 23:26:18 +0000
D, [2015-01-03T23:26:18.694888 #29890] DEBUG -- : 
D, [2015-01-03T23:26:18.695349 #29890] DEBUG -- : 
I, [2015-01-03T23:26:18.696392 #29890]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-03 23:26:18 +0000
D, [2015-01-03T23:26:18.721083 #29890] DEBUG -- : 
D, [2015-01-03T23:26:18.721821 #29890] DEBUG -- : 
I, [2015-01-03T23:26:18.723089 #29890]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-03 23:26:18 +0000
D, [2015-01-03T23:26:26.048011 #29890] DEBUG -- : 
D, [2015-01-03T23:26:26.048603 #29890] DEBUG -- : 
I, [2015-01-03T23:26:26.049752 #29890]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-03 23:26:26 +0000
I, [2015-01-03T23:26:26.133329 #29890]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-03T23:26:26.134054 #29890]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-03T23:26:26.144137 #29890] DEBUG -- :   [1m[35mCart Load (0.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-03T23:26:26.151173 #29890] DEBUG -- :   [1m[36mProduct Load (0.9ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-03T23:26:26.161959 #29890] DEBUG -- :   [1m[35mLineItem Load (1.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 53]]
D, [2015-01-03T23:26:26.254862 #29890] DEBUG -- :   [1m[36mProduct Load (1.1ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-03T23:26:26.260233 #29890] DEBUG -- :   [1m[35m (0.6ms)[0m  begin transaction
D, [2015-01-03T23:26:26.277838 #29890] DEBUG -- :   [1m[36mSQL (2.5ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 53], ["created_at", Sat, 03 Jan 2015 23:26:26 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7fa9c4cf0650,'0.1299E2',18(36)>], ["size", "extra small"], ["updated_at", Sat, 03 Jan 2015 23:26:26 UTC +00:00]]
D, [2015-01-03T23:26:26.285591 #29890] DEBUG -- :   [1m[35m (4.1ms)[0m  commit transaction
D, [2015-01-03T23:26:26.332234 #29890] DEBUG -- :   [1m[36mLineItem Load (0.7ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-03T23:26:26.363430 #29890]  INFO -- :   Rendered line_items/_line_item.html.erb (6.6ms)
I, [2015-01-03T23:26:26.379778 #29890]  INFO -- :   Rendered carts/_cart.html.erb (52.6ms)
I, [2015-01-03T23:26:26.381884 #29890]  INFO -- :   Rendered line_items/create.js.erb (58.8ms)
I, [2015-01-03T23:26:26.383906 #29890]  INFO -- : Completed 200 OK in 249ms (Views: 93.9ms | ActiveRecord: 11.5ms)
D, [2015-01-03T23:26:27.789913 #29890] DEBUG -- : 
D, [2015-01-03T23:26:27.790489 #29890] DEBUG -- : 
I, [2015-01-03T23:26:27.791634 #29890]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-03 23:26:27 +0000
I, [2015-01-03T23:26:27.834306 #29890]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-03T23:26:27.835036 #29890]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-03T23:26:27.844338 #29890] DEBUG -- :   [1m[35mCart Load (0.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-03T23:26:27.850927 #29890] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-03T23:26:27.861765 #29890] DEBUG -- :   [1m[35mLineItem Load (1.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 53]]
D, [2015-01-03T23:26:27.876184 #29890] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-03T23:26:27.881056 #29890] DEBUG -- :   [1m[35m (0.5ms)[0m  begin transaction
D, [2015-01-03T23:26:27.896487 #29890] DEBUG -- :   [1m[36mSQL (3.9ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 53], ["created_at", Sat, 03 Jan 2015 23:26:27 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:7fa9c8669cb0,'0.1099E2',18(36)>], ["size", "extra small"], ["updated_at", Sat, 03 Jan 2015 23:26:27 UTC +00:00]]
D, [2015-01-03T23:26:27.906783 #29890] DEBUG -- :   [1m[35m (6.9ms)[0m  commit transaction
D, [2015-01-03T23:26:27.924566 #29890] DEBUG -- :   [1m[36mLineItem Load (0.7ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
D, [2015-01-03T23:26:27.944606 #29890] DEBUG -- :   [1m[35mProduct Load (0.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-03T23:26:27.958555 #29890]  INFO -- :   Rendered line_items/_line_item.html.erb (22.6ms)
I, [2015-01-03T23:26:27.974243 #29890]  INFO -- :   Rendered carts/_cart.html.erb (54.5ms)
I, [2015-01-03T23:26:27.976470 #29890]  INFO -- :   Rendered line_items/create.js.erb (60.1ms)
I, [2015-01-03T23:26:27.979558 #29890]  INFO -- : Completed 200 OK in 143ms (Views: 66.7ms | ActiveRecord: 15.8ms)
D, [2015-01-03T23:26:29.693564 #29890] DEBUG -- : 
D, [2015-01-03T23:26:29.694149 #29890] DEBUG -- : 
I, [2015-01-03T23:26:29.694984 #29890]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-03 23:26:29 +0000
I, [2015-01-03T23:26:29.728064 #29890]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-03T23:26:29.810745 #29890] DEBUG -- :   [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
D, [2015-01-03T23:26:29.868334 #29890] DEBUG -- :   [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-03T23:26:29.875787 #29890] DEBUG -- :   [1m[36mCart Load (0.6ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-03T23:26:29.933022 #29890] DEBUG -- :   [1m[35mLineItem Load (0.7ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
I, [2015-01-03T23:26:29.950548 #29890]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-03T23:26:36.194191 #29890] DEBUG -- :   [1m[36m (0.7ms)[0m  [1mbegin transaction[0m
D, [2015-01-03T23:26:36.311985 #29890] DEBUG -- :   [1m[35mSQL (2.0ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Sat, 03 Jan 2015 23:26:36 UTC +00:00], ["updated_at", Sat, 03 Jan 2015 23:26:36 UTC +00:00]]
D, [2015-01-03T23:26:36.329999 #29890] DEBUG -- :   [1m[36mSQL (1.8ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 111[0m  [["cart_id", nil], ["order_id", 60], ["updated_at", Sat, 03 Jan 2015 23:26:36 UTC +00:00]]
D, [2015-01-03T23:26:36.344861 #29890] DEBUG -- :   [1m[35mSQL (1.4ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 112  [["cart_id", nil], ["order_id", 60], ["updated_at", Sat, 03 Jan 2015 23:26:36 UTC +00:00]]
I, [2015-01-03T23:26:36.346470 #29890]  INFO -- : about to @payment.create
D, [2015-01-03T23:26:41.099813 #29890] DEBUG -- :   [1m[36mProduct Load (0.9ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-03T23:26:41.111387 #29890] DEBUG -- :   [1m[35mProduct Load (0.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
W, [2015-01-03T23:26:41.117255 #29890]  WARN -- : undefined method `name' for #<Product:0x007fa9c818bc70>
I, [2015-01-03T23:26:41.118176 #29890]  INFO -- : in payment.create
I, [2015-01-03T23:26:41.122241 #29890]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98"}, "description"=>"King Clothing"}]}
I, [2015-01-03T23:26:41.125614 #29890]  INFO -- : #<ActiveModel::Errors:0x007fa9c80aadb0 @base=#<Payment:0x007fa9c8269958 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c8268d00 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c810b7c8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c810b188 @error=nil, @total="23.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c8108460 @error=nil, @items=[]>>], @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c80aadb0 ...>>, @messages={}>
I, [2015-01-03T23:26:41.126227 #29890]  INFO -- : got past invalid
I, [2015-01-03T23:26:41.142760 #29890]  INFO -- : PayPal-Request-Id: 0f9486f3-77f8-4b55-b03d-158795ed573d
I, [2015-01-03T23:26:41.143436 #29890]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-03T23:26:42.426542 #29890]  INFO -- : Response[400]: Bad Request, Duration: 1.282s
I, [2015-01-03T23:26:42.428304 #29890]  INFO -- :  in error=
I, [2015-01-03T23:26:42.429528 #29890]  INFO -- : back from super
I, [2015-01-03T23:26:42.433195 #29890]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98"}, "description"=>"King Clothing"}]}
I, [2015-01-03T23:26:42.479216 #29890]  INFO -- : @payment save just done
I, [2015-01-03T23:26:42.481077 #29890]  INFO -- : #<Payment:0x007fa9c8269958 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"080c3c9ac3a9a"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c8268d00 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c810b7c8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c810b188 @error=nil, @total="23.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c8108460 @error=nil, @items=[]>>], @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c80aadb0 @base=#<Payment:0x007fa9c8269958 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"]}>, @request_id="0f9486f3-77f8-4b55-b03d-158795ed573d", @header={}>
I, [2015-01-03T23:26:42.482292 #29890]  INFO -- : #<Payment:0x007fa9c8269958 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"080c3c9ac3a9a"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c8268d00 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c810b7c8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c810b188 @error=nil, @total="23.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c8108460 @error=nil, @items=[]>>], @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c80aadb0 @base=#<Payment:0x007fa9c8269958 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"]}>, @request_id="0f9486f3-77f8-4b55-b03d-158795ed573d", @header={}>
D, [2015-01-03T23:26:42.491952 #29890] DEBUG -- :   [1m[36m (7.5ms)[0m  [1mcommit transaction[0m
I, [2015-01-03T23:26:42.493962 #29890]  INFO -- : about to approve url
I, [2015-01-03T23:26:42.495003 #29890]  INFO -- : #<Payment:0x007fa9c8269958 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"080c3c9ac3a9a"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c8268d00 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c810b7c8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c810b188 @error=nil, @total="23.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c8108460 @error=nil, @items=[]>>], @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c80aadb0 @base=#<Payment:0x007fa9c8269958 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"]}>, @request_id="0f9486f3-77f8-4b55-b03d-158795ed573d", @header={}>
I, [2015-01-03T23:26:42.498027 #29890]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-03T23:26:42.500731 #29890]  INFO -- : Completed 302 Found in 12771ms (ActiveRecord: 22.7ms)
D, [2015-01-03T23:26:42.523862 #29890] DEBUG -- : 
D, [2015-01-03T23:26:42.524444 #29890] DEBUG -- : 
I, [2015-01-03T23:26:42.525216 #29890]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-03 23:26:42 +0000
I, [2015-01-03T23:26:42.554910 #29890]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-03T23:26:42.570261 #29890] DEBUG -- :   [1m[35mCart Load (0.7ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-03T23:26:42.586349 #29890] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-03T23:26:42.591674 #29890]  INFO -- : Read fragment views/store/products/2-20141022062504570899000/a93d4e2e981ab3dfce98a095c3b6c059 (1.2ms)
I, [2015-01-03T23:26:42.594231 #29890]  INFO -- :   Rendered store/index.html.erb within layouts/application (13.3ms)
D, [2015-01-03T23:26:42.662432 #29890] DEBUG -- :   [1m[35mLineItem Exists (0.7ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 53]]
D, [2015-01-03T23:26:42.674735 #29890] DEBUG -- :   [1m[36mLineItem Load (0.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-03T23:26:42.676945 #29890]  INFO -- :   Rendered collection (0.3ms)
I, [2015-01-03T23:26:42.692113 #29890]  INFO -- :   Rendered carts/_cart.html.erb (22.8ms)
I, [2015-01-03T23:26:42.706274 #29890]  INFO -- : Completed 200 OK in 150ms (Views: 129.6ms | ActiveRecord: 2.9ms)
D, [2015-01-04T07:32:40.214772 #29890] DEBUG -- : 
D, [2015-01-04T07:32:40.231964 #29890] DEBUG -- : 
I, [2015-01-04T07:32:40.233013 #29890]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-04 07:32:40 +0000
I, [2015-01-04T07:32:42.016798 #29890]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T07:32:42.017421 #29890]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-04T07:32:42.066797 #29890] DEBUG -- :   [1m[35mCart Load (0.8ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T07:32:42.165540 #29890] DEBUG -- :   [1m[36mProduct Load (0.7ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-04T07:32:42.273128 #29890] DEBUG -- :   [1m[35mLineItem Load (1.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 53]]
D, [2015-01-04T07:32:42.368128 #29890] DEBUG -- :   [1m[36mProduct Load (1.1ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-04T07:32:42.372796 #29890] DEBUG -- :   [1m[35m (0.4ms)[0m  begin transaction
D, [2015-01-04T07:32:42.475304 #29890] DEBUG -- :   [1m[36mSQL (89.5ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 53], ["created_at", Sun, 04 Jan 2015 07:32:42 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7fa9c4919c48,'0.1299E2',18(36)>], ["size", "extra small"], ["updated_at", Sun, 04 Jan 2015 07:32:42 UTC +00:00]]
D, [2015-01-04T07:32:42.558923 #29890] DEBUG -- :   [1m[35m (80.0ms)[0m  commit transaction
D, [2015-01-04T07:32:42.771110 #29890] DEBUG -- :   [1m[36mLineItem Load (1.2ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-04T07:32:42.813152 #29890]  INFO -- :   Rendered line_items/_line_item.html.erb (8.1ms)
I, [2015-01-04T07:32:42.840658 #29890]  INFO -- :   Rendered carts/_cart.html.erb (75.6ms)
I, [2015-01-04T07:32:42.852172 #29890]  INFO -- :   Rendered line_items/create.js.erb (215.7ms)
I, [2015-01-04T07:32:42.855067 #29890]  INFO -- : Completed 200 OK in 835ms (Views: 290.6ms | ActiveRecord: 181.1ms)
D, [2015-01-04T07:32:42.862932 #29890] DEBUG -- : 
D, [2015-01-04T07:32:42.980931 #29890] DEBUG -- : 
I, [2015-01-04T07:32:42.982288 #29890]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-04 07:32:42 +0000
I, [2015-01-04T07:32:43.038025 #29890]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T07:32:43.039851 #29890]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-04T07:32:43.053645 #29890] DEBUG -- :   [1m[35mCart Load (0.7ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T07:32:43.059762 #29890] DEBUG -- :   [1m[36mProduct Load (0.5ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-04T07:32:43.074271 #29890] DEBUG -- :   [1m[35mLineItem Load (1.1ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 53]]
D, [2015-01-04T07:32:43.084851 #29890] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-04T07:32:43.088925 #29890] DEBUG -- :   [1m[35m (0.5ms)[0m  begin transaction
D, [2015-01-04T07:32:43.107072 #29890] DEBUG -- :   [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 53], ["created_at", Sun, 04 Jan 2015 07:32:43 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:7fa9c858e160,'0.1099E2',18(36)>], ["size", "extra small"], ["updated_at", Sun, 04 Jan 2015 07:32:43 UTC +00:00]]
D, [2015-01-04T07:32:43.201178 #29890] DEBUG -- :   [1m[35m (90.0ms)[0m  commit transaction
D, [2015-01-04T07:32:43.217986 #29890] DEBUG -- :   [1m[36mLineItem Load (0.7ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
D, [2015-01-04T07:32:43.234727 #29890] DEBUG -- :   [1m[35mProduct Load (0.5ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-04T07:32:43.246239 #29890]  INFO -- :   Rendered line_items/_line_item.html.erb (18.6ms)
I, [2015-01-04T07:32:43.259804 #29890]  INFO -- :   Rendered carts/_cart.html.erb (45.9ms)
I, [2015-01-04T07:32:43.261685 #29890]  INFO -- :   Rendered line_items/create.js.erb (50.7ms)
I, [2015-01-04T07:32:43.263379 #29890]  INFO -- : Completed 200 OK in 222ms (Views: 57.9ms | ActiveRecord: 96.6ms)
D, [2015-01-04T07:32:45.829829 #29890] DEBUG -- : 
D, [2015-01-04T07:32:45.830233 #29890] DEBUG -- : 
I, [2015-01-04T07:32:45.831579 #29890]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-04 07:32:45 +0000
I, [2015-01-04T07:32:45.892914 #29890]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-04T07:32:45.951763 #29890] DEBUG -- :   [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
D, [2015-01-04T07:32:46.002631 #29890] DEBUG -- :   [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-04T07:32:46.008587 #29890] DEBUG -- :   [1m[36mCart Load (0.5ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-04T07:32:46.073036 #29890] DEBUG -- :   [1m[35mLineItem Load (0.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
I, [2015-01-04T07:32:46.087596 #29890]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-04T07:33:11.237697 #29890] DEBUG -- :   [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
D, [2015-01-04T07:33:11.374374 #29890] DEBUG -- :   [1m[35mSQL (1.8ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Sun, 04 Jan 2015 07:33:11 UTC +00:00], ["updated_at", Sun, 04 Jan 2015 07:33:11 UTC +00:00]]
D, [2015-01-04T07:33:11.390952 #29890] DEBUG -- :   [1m[36mSQL (1.4ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 113[0m  [["cart_id", nil], ["order_id", 61], ["updated_at", Sun, 04 Jan 2015 07:33:11 UTC +00:00]]
D, [2015-01-04T07:33:11.402904 #29890] DEBUG -- :   [1m[35mSQL (1.2ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 114  [["cart_id", nil], ["order_id", 61], ["updated_at", Sun, 04 Jan 2015 07:33:11 UTC +00:00]]
I, [2015-01-04T07:33:11.404323 #29890]  INFO -- : about to @payment.create
D, [2015-01-04T07:33:15.157952 #29890] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-04T07:33:15.166681 #29890] DEBUG -- :   [1m[35mProduct Load (0.5ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
W, [2015-01-04T07:33:15.172491 #29890]  WARN -- : undefined method `name' for #<Product:0x007fa9c61bc750>
I, [2015-01-04T07:33:15.173047 #29890]  INFO -- : in payment.create
I, [2015-01-04T07:33:15.176158 #29890]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98"}, "description"=>"King Clothing"}]}
I, [2015-01-04T07:33:15.177587 #29890]  INFO -- : #<ActiveModel::Errors:0x007fa9c6129ae0 @base=#<Payment:0x007fa9c6251378 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c6250630 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c4923338 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4922e10 @error=nil, @total="23.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c4920688 @error=nil, @items=[]>>], @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c6129ae0 ...>>, @messages={}>
I, [2015-01-04T07:33:15.178115 #29890]  INFO -- : got past invalid
I, [2015-01-04T07:33:15.182635 #29890]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/oauth2/token
I, [2015-01-04T07:33:17.605036 #29890]  INFO -- : Response[200]: OK, Duration: 2.422s
I, [2015-01-04T07:33:17.610570 #29890]  INFO -- : PayPal-Request-Id: 0a14e74e-71fa-497f-b0a7-0d38e4b368c6
I, [2015-01-04T07:33:17.611152 #29890]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-04T07:33:18.664580 #29890]  INFO -- : Response[400]: Bad Request, Duration: 1.053s
I, [2015-01-04T07:33:18.665822 #29890]  INFO -- :  in error=
I, [2015-01-04T07:33:18.666699 #29890]  INFO -- : back from super
I, [2015-01-04T07:33:18.669459 #29890]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98"}, "description"=>"King Clothing"}]}
I, [2015-01-04T07:33:18.748759 #29890]  INFO -- : @payment save just done
I, [2015-01-04T07:33:18.750207 #29890]  INFO -- : #<Payment:0x007fa9c6251378 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"1a8d6cdff504c"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c6250630 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c4923338 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4922e10 @error=nil, @total="23.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c4920688 @error=nil, @items=[]>>], @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c6129ae0 @base=#<Payment:0x007fa9c6251378 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"]}>, @request_id="0a14e74e-71fa-497f-b0a7-0d38e4b368c6", @header={}>
I, [2015-01-04T07:33:18.751619 #29890]  INFO -- : #<Payment:0x007fa9c6251378 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"1a8d6cdff504c"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c6250630 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c4923338 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4922e10 @error=nil, @total="23.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c4920688 @error=nil, @items=[]>>], @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c6129ae0 @base=#<Payment:0x007fa9c6251378 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"]}>, @request_id="0a14e74e-71fa-497f-b0a7-0d38e4b368c6", @header={}>
D, [2015-01-04T07:33:18.830556 #29890] DEBUG -- :   [1m[36m (76.4ms)[0m  [1mcommit transaction[0m
I, [2015-01-04T07:33:18.832663 #29890]  INFO -- : about to approve url
I, [2015-01-04T07:33:18.833580 #29890]  INFO -- : #<Payment:0x007fa9c6251378 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"redirect_urls", "issue"=>"This field required when payment_method is 'paypal'"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"1a8d6cdff504c"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c6250630 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c4923338 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4922e10 @error=nil, @total="23.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c4920688 @error=nil, @items=[]>>], @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c6129ae0 @base=#<Payment:0x007fa9c6251378 ...>, @messages={:redirect_urls=>["This field required when payment_method is 'paypal'"]}>, @request_id="0a14e74e-71fa-497f-b0a7-0d38e4b368c6", @header={}>
I, [2015-01-04T07:33:18.836452 #29890]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-04T07:33:18.838856 #29890]  INFO -- : Completed 302 Found in 32945ms (ActiveRecord: 88.9ms)
D, [2015-01-04T07:33:18.991614 #29890] DEBUG -- : 
D, [2015-01-04T07:33:18.992047 #29890] DEBUG -- : 
I, [2015-01-04T07:33:18.992776 #29890]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-04 07:33:18 +0000
I, [2015-01-04T07:33:19.221015 #29890]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-04T07:33:19.229119 #29890] DEBUG -- :   [1m[35mCart Load (0.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T07:33:19.359770 #29890] DEBUG -- :   [1m[36mProduct Load (1.1ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-04T07:33:19.377625 #29890]  INFO -- : Read fragment views/store/products/2-20141022062504570899000/a93d4e2e981ab3dfce98a095c3b6c059 (10.8ms)
I, [2015-01-04T07:33:19.379098 #29890]  INFO -- :   Rendered store/index.html.erb within layouts/application (24.8ms)
D, [2015-01-04T07:33:19.440024 #29890] DEBUG -- :   [1m[35mLineItem Exists (0.6ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 53]]
D, [2015-01-04T07:33:19.461833 #29890] DEBUG -- :   [1m[36mLineItem Load (0.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-04T07:33:19.463976 #29890]  INFO -- :   Rendered collection (0.3ms)
I, [2015-01-04T07:33:19.477367 #29890]  INFO -- :   Rendered carts/_cart.html.erb (20.8ms)
I, [2015-01-04T07:33:19.487264 #29890]  INFO -- : Completed 200 OK in 265ms (Views: 252.1ms | ActiveRecord: 2.9ms)
D, [2015-01-04T07:34:50.121647 #29890] DEBUG -- : 
D, [2015-01-04T07:34:50.129986 #29890] DEBUG -- : 
I, [2015-01-04T07:34:50.133066 #29890]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-04 07:34:50 +0000
I, [2015-01-04T07:34:51.099880 #29890]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T07:34:51.100921 #29890]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-04T07:34:51.140459 #29890] DEBUG -- :   [1m[35mCart Load (0.7ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T07:34:51.211422 #29890] DEBUG -- :   [1m[36mProduct Load (0.7ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-04T07:34:51.297009 #29890] DEBUG -- :   [1m[35mLineItem Load (0.8ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 53]]
D, [2015-01-04T07:34:51.378721 #29890] DEBUG -- :   [1m[36mProduct Load (0.9ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-04T07:34:51.383098 #29890] DEBUG -- :   [1m[35m (0.5ms)[0m  begin transaction
D, [2015-01-04T07:34:51.397220 #29890] DEBUG -- :   [1m[36mSQL (2.1ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 53], ["created_at", Sun, 04 Jan 2015 07:34:51 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7fa9c4bda6f8,'0.1299E2',18(36)>], ["size", "extra small"], ["updated_at", Sun, 04 Jan 2015 07:34:51 UTC +00:00]]
D, [2015-01-04T07:34:51.403261 #29890] DEBUG -- :   [1m[35m (3.2ms)[0m  commit transaction
D, [2015-01-04T07:34:51.420356 #29890] DEBUG -- :   [1m[36mLineItem Load (0.9ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-04T07:34:51.436970 #29890]  INFO -- :   Rendered line_items/_line_item.html.erb (5.2ms)
I, [2015-01-04T07:34:51.461277 #29890]  INFO -- :   Rendered carts/_cart.html.erb (45.2ms)
I, [2015-01-04T07:34:51.463082 #29890]  INFO -- :   Rendered line_items/create.js.erb (50.9ms)
I, [2015-01-04T07:34:51.464730 #29890]  INFO -- : Completed 200 OK in 363ms (Views: 58.0ms | ActiveRecord: 15.5ms)
D, [2015-01-04T07:34:52.811269 #29890] DEBUG -- : 
D, [2015-01-04T07:34:52.811753 #29890] DEBUG -- : 
I, [2015-01-04T07:34:52.812648 #29890]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-04 07:34:52 +0000
I, [2015-01-04T07:34:52.838787 #29890]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T07:34:52.839433 #29890]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-04T07:34:52.847088 #29890] DEBUG -- :   [1m[35mCart Load (0.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T07:34:52.854956 #29890] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-04T07:34:52.863975 #29890] DEBUG -- :   [1m[35mLineItem Load (0.9ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 53]]
D, [2015-01-04T07:34:52.874256 #29890] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-04T07:34:52.878249 #29890] DEBUG -- :   [1m[35m (0.5ms)[0m  begin transaction
D, [2015-01-04T07:34:52.888482 #29890] DEBUG -- :   [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 53], ["created_at", Sun, 04 Jan 2015 07:34:52 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:7fa9c62b95b8,'0.1099E2',18(36)>], ["size", "extra small"], ["updated_at", Sun, 04 Jan 2015 07:34:52 UTC +00:00]]
D, [2015-01-04T07:34:52.898351 #29890] DEBUG -- :   [1m[35m (6.8ms)[0m  commit transaction
D, [2015-01-04T07:34:52.912354 #29890] DEBUG -- :   [1m[36mLineItem Load (0.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
D, [2015-01-04T07:34:52.930262 #29890] DEBUG -- :   [1m[35mProduct Load (0.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-04T07:34:52.941547 #29890]  INFO -- :   Rendered line_items/_line_item.html.erb (18.3ms)
I, [2015-01-04T07:34:52.954134 #29890]  INFO -- :   Rendered carts/_cart.html.erb (45.7ms)
I, [2015-01-04T07:34:52.956144 #29890]  INFO -- :   Rendered line_items/create.js.erb (50.4ms)
I, [2015-01-04T07:34:52.957676 #29890]  INFO -- : Completed 200 OK in 117ms (Views: 55.6ms | ActiveRecord: 12.8ms)
D, [2015-01-04T07:34:54.756824 #29890] DEBUG -- : 
D, [2015-01-04T07:34:54.757281 #29890] DEBUG -- : 
I, [2015-01-04T07:34:54.757967 #29890]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-04 07:34:54 +0000
I, [2015-01-04T07:34:54.816042 #29890]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-04T07:34:54.853812 #29890] DEBUG -- :   [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
D, [2015-01-04T07:34:54.899958 #29890] DEBUG -- :   [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-04T07:34:54.905820 #29890] DEBUG -- :   [1m[36mCart Load (0.5ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-04T07:34:54.937811 #29890] DEBUG -- :   [1m[35mLineItem Load (0.7ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
I, [2015-01-04T07:34:54.952679 #29890]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-04T07:35:09.450092 #29890] DEBUG -- :   [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
D, [2015-01-04T07:35:09.553630 #29890] DEBUG -- :   [1m[35mSQL (2.2ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Sun, 04 Jan 2015 07:35:09 UTC +00:00], ["updated_at", Sun, 04 Jan 2015 07:35:09 UTC +00:00]]
D, [2015-01-04T07:35:09.567090 #29890] DEBUG -- :   [1m[36mSQL (1.3ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 115[0m  [["cart_id", nil], ["order_id", 62], ["updated_at", Sun, 04 Jan 2015 07:35:09 UTC +00:00]]
D, [2015-01-04T07:35:09.579276 #29890] DEBUG -- :   [1m[35mSQL (1.2ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 116  [["cart_id", nil], ["order_id", 62], ["updated_at", Sun, 04 Jan 2015 07:35:09 UTC +00:00]]
I, [2015-01-04T07:35:09.585908 #29890]  INFO -- : about to @payment.create
D, [2015-01-04T07:35:11.373132 #29890] DEBUG -- :   [1m[36mProduct Load (0.5ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-04T07:35:11.383953 #29890] DEBUG -- :   [1m[35mProduct Load (0.5ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-04T07:35:11.442090 #29890] DEBUG -- :   [1m[36m (52.7ms)[0m  [1mrollback transaction[0m
I, [2015-01-04T07:35:11.445629 #29890]  INFO -- : Completed 500 Internal Server Error in 16628ms
F, [2015-01-04T07:35:11.460869 #29890] FATAL -- : 
NameError (undefined local variable or method `currency' for #<Payment:0x007fa9c4b72300>):
  app/models/payment.rb:67:in `block in order='
  app/models/payment.rb:66:in `order='
  app/models/order.rb:41:in `new'
  app/models/order.rb:41:in `create_payment'
  app/controllers/orders_controller.rb:155:in `ppcheckout'


I, [2015-01-04T07:35:11.578551 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.2ms)
I, [2015-01-04T07:35:11.592719 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (6.7ms)
I, [2015-01-04T07:35:11.605336 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (4.7ms)
I, [2015-01-04T07:35:11.606218 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (45.1ms)
D, [2015-01-04T07:35:11.610273 #29890] DEBUG -- : 
D, [2015-01-04T07:35:11.610615 #29890] DEBUG -- : 
I, [2015-01-04T07:35:11.611250 #29890]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-04 07:35:11 +0000
I, [2015-01-04T07:35:11.637503 #29890]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-04T07:35:11.645065 #29890] DEBUG -- :   [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
D, [2015-01-04T07:35:11.650258 #29890] DEBUG -- :   [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-04T07:35:11.655389 #29890] DEBUG -- :   [1m[35mCart Load (0.5ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T07:35:11.664292 #29890] DEBUG -- :   [1m[36mLineItem Load (0.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-04T07:35:11.673311 #29890]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-04T07:36:17.229552 #29890] DEBUG -- :   [1m[35m (0.6ms)[0m  begin transaction
D, [2015-01-04T07:36:17.247885 #29890] DEBUG -- :   [1m[36mSQL (1.5ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Sun, 04 Jan 2015 07:36:17 UTC +00:00], ["updated_at", Sun, 04 Jan 2015 07:36:17 UTC +00:00]]
D, [2015-01-04T07:36:17.259911 #29890] DEBUG -- :   [1m[35mSQL (1.3ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 115  [["cart_id", nil], ["order_id", 62], ["updated_at", Sun, 04 Jan 2015 07:36:17 UTC +00:00]]
D, [2015-01-04T07:36:17.273745 #29890] DEBUG -- :   [1m[36mSQL (1.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 116[0m  [["cart_id", nil], ["order_id", 62], ["updated_at", Sun, 04 Jan 2015 07:36:17 UTC +00:00]]
I, [2015-01-04T07:36:17.275172 #29890]  INFO -- : about to @payment.create
D, [2015-01-04T07:36:19.763808 #29890] DEBUG -- :   [1m[35mProduct Load (0.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-04T07:36:19.774703 #29890] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-04T07:36:19.779757 #29890] DEBUG -- :   [1m[35m (1.2ms)[0m  rollback transaction
I, [2015-01-04T07:36:19.781806 #29890]  INFO -- : Completed 500 Internal Server Error in 68143ms
F, [2015-01-04T07:36:19.797529 #29890] FATAL -- : 
NameError (undefined local variable or method `currency' for #<Payment:0x007fa9c4fabe58>):
  app/models/payment.rb:67:in `block in order='
  app/models/payment.rb:66:in `order='
  app/models/order.rb:41:in `new'
  app/models/order.rb:41:in `create_payment'
  app/controllers/orders_controller.rb:155:in `ppcheckout'


I, [2015-01-04T07:36:19.878055 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.8ms)
I, [2015-01-04T07:36:19.892122 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (6.9ms)
I, [2015-01-04T07:36:19.905557 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (4.4ms)
I, [2015-01-04T07:36:19.906500 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (43.7ms)
D, [2015-01-04T07:36:19.967323 #29890] DEBUG -- : 
D, [2015-01-04T07:36:19.967781 #29890] DEBUG -- : 
I, [2015-01-04T07:36:19.968402 #29890]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-04 07:36:19 +0000
I, [2015-01-04T07:36:20.857795 #29890]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-04T07:36:20.882353 #29890] DEBUG -- :   [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
D, [2015-01-04T07:36:20.930402 #29890] DEBUG -- :   [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-04T07:36:20.953836 #29890] DEBUG -- :   [1m[36mCart Load (0.9ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-04T07:36:21.028488 #29890] DEBUG -- :   [1m[35mLineItem Load (0.9ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
I, [2015-01-04T07:36:21.121133 #29890]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-04T07:36:22.913921 #29890] DEBUG -- :   [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
D, [2015-01-04T07:36:23.027052 #29890] DEBUG -- :   [1m[35mSQL (1.8ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Sun, 04 Jan 2015 07:36:23 UTC +00:00], ["updated_at", Sun, 04 Jan 2015 07:36:23 UTC +00:00]]
D, [2015-01-04T07:36:23.043042 #29890] DEBUG -- :   [1m[36mSQL (1.6ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 115[0m  [["cart_id", nil], ["order_id", 62], ["updated_at", Sun, 04 Jan 2015 07:36:23 UTC +00:00]]
D, [2015-01-04T07:36:23.055223 #29890] DEBUG -- :   [1m[35mSQL (1.2ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 116  [["cart_id", nil], ["order_id", 62], ["updated_at", Sun, 04 Jan 2015 07:36:23 UTC +00:00]]
I, [2015-01-04T07:36:23.056592 #29890]  INFO -- : about to @payment.create
D, [2015-01-04T07:36:24.118662 #29890] DEBUG -- :   [1m[36mProduct Load (0.8ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-04T07:36:24.181486 #29890] DEBUG -- :   [1m[35mProduct Load (0.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
I, [2015-01-04T07:36:25.547636 #29890]  INFO -- : in order=
I, [2015-01-04T07:36:25.553147 #29890]  INFO -- : in payment.create
I, [2015-01-04T07:36:25.558680 #29890]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"<p>camoflage print teeshirt</p>", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"1", "name"=>"<p>established 2014 tee shirt</p>", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/62/confirm", "cancel_url"=>"http://localhost:3000/orders/62/cancel"}}
I, [2015-01-04T07:36:25.560621 #29890]  INFO -- : #<ActiveModel::Errors:0x007fa9c83d2ad8 @base=#<Payment:0x007fa9c44874c8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c447e0d0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c846c9d0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c846c2c8 @error=nil, @total="23.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c84759e0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c8469ac8 @error=nil, @name="<p>camoflage print teeshirt</p>", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c84604c8 @error=nil, @name="<p>established 2014 tee shirt</p>", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c840a9b0 @error=nil, @return_url="http://localhost:3000/orders/62/confirm", @cancel_url="http://localhost:3000/orders/62/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c83d2ad8 ...>>, @messages={}>
I, [2015-01-04T07:36:25.561072 #29890]  INFO -- : got past invalid
I, [2015-01-04T07:36:25.582286 #29890]  INFO -- : PayPal-Request-Id: 37431649-3b50-4b04-88dc-b18f0d519f8e
I, [2015-01-04T07:36:25.585552 #29890]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-04T07:36:27.438926 #29890]  INFO -- : Response[201]: Created, Duration: 1.853s
I, [2015-01-04T07:36:27.444209 #29890]  INFO -- : back from super
I, [2015-01-04T07:36:27.452000 #29890]  INFO -- : {"id"=>"PAY-6F57295644513022AKSUO26Q", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98", "details"=>{"subtotal"=>"23.98"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"<p>camoflage print teeshirt</p>", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"1", "name"=>"<p>established 2014 tee shirt</p>", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/62/confirm", "cancel_url"=>"http://localhost:3000/orders/62/cancel"}, "create_time"=>"2015-01-04T07:36:26Z", "update_time"=>"2015-01-04T07:36:26Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-6F57295644513022AKSUO26Q", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-69E36626FG146214U", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-6F57295644513022AKSUO26Q/execute", "rel"=>"execute", "method"=>"POST"}]}
I, [2015-01-04T07:36:27.495890 #29890]  INFO -- : @payment save just done
I, [2015-01-04T07:36:27.497079 #29890]  INFO -- : #<Payment:0x007fa9c44874c8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c4da1748 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c4da0c30 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c4da07a8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c4d9bb40 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4d9b668 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c4d9a858 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c4d98b70 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4d93a80 @error=nil, @name="<p>camoflage print teeshirt</p>", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4d91f50 @error=nil, @name="<p>established 2014 tee shirt</p>", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c840a9b0 @error=nil, @return_url="http://localhost:3000/orders/62/confirm", @cancel_url="http://localhost:3000/orders/62/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c83d2ad8 @base=#<Payment:0x007fa9c44874c8 ...>, @messages={}>, @request_id="37431649-3b50-4b04-88dc-b18f0d519f8e", @header={}, @id="PAY-6F57295644513022AKSUO26Q", @create_time="2015-01-04T07:36:26Z", @update_time="2015-01-04T07:36:26Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4d8bb78 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6F57295644513022AKSUO26Q", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4d8a980 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-69E36626FG146214U", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4d899e0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6F57295644513022AKSUO26Q/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T07:36:27.498486 #29890]  INFO -- : #<Payment:0x007fa9c44874c8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c4da1748 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c4da0c30 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c4da07a8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c4d9bb40 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4d9b668 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c4d9a858 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c4d98b70 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4d93a80 @error=nil, @name="<p>camoflage print teeshirt</p>", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4d91f50 @error=nil, @name="<p>established 2014 tee shirt</p>", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c840a9b0 @error=nil, @return_url="http://localhost:3000/orders/62/confirm", @cancel_url="http://localhost:3000/orders/62/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c83d2ad8 @base=#<Payment:0x007fa9c44874c8 ...>, @messages={}>, @request_id="37431649-3b50-4b04-88dc-b18f0d519f8e", @header={}, @id="PAY-6F57295644513022AKSUO26Q", @create_time="2015-01-04T07:36:26Z", @update_time="2015-01-04T07:36:26Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4d8bb78 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6F57295644513022AKSUO26Q", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4d8a980 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-69E36626FG146214U", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4d899e0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6F57295644513022AKSUO26Q/execute", @rel="execute", @method="POST">]>
D, [2015-01-04T07:36:27.507756 #29890] DEBUG -- :   [1m[36m (7.0ms)[0m  [1mcommit transaction[0m
I, [2015-01-04T07:36:27.509873 #29890]  INFO -- : about to approve url
I, [2015-01-04T07:36:27.511909 #29890]  INFO -- : #<Payment:0x007fa9c44874c8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c4da1748 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c4da0c30 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c4da07a8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c4d9bb40 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4d9b668 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c4d9a858 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c4d98b70 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4d93a80 @error=nil, @name="<p>camoflage print teeshirt</p>", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4d91f50 @error=nil, @name="<p>established 2014 tee shirt</p>", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c840a9b0 @error=nil, @return_url="http://localhost:3000/orders/62/confirm", @cancel_url="http://localhost:3000/orders/62/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c83d2ad8 @base=#<Payment:0x007fa9c44874c8 ...>, @messages={}>, @request_id="37431649-3b50-4b04-88dc-b18f0d519f8e", @header={}, @id="PAY-6F57295644513022AKSUO26Q", @create_time="2015-01-04T07:36:26Z", @update_time="2015-01-04T07:36:26Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4d8bb78 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6F57295644513022AKSUO26Q", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4d8a980 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-69E36626FG146214U", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4d899e0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6F57295644513022AKSUO26Q/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T07:36:27.513766 #29890]  INFO -- : #<Payment:0x007fa9c44874c8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c4da1748 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c4da0c30 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c4da07a8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c4d9bb40 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4d9b668 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c4d9a858 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c4d98b70 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4d93a80 @error=nil, @name="<p>camoflage print teeshirt</p>", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4d91f50 @error=nil, @name="<p>established 2014 tee shirt</p>", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c840a9b0 @error=nil, @return_url="http://localhost:3000/orders/62/confirm", @cancel_url="http://localhost:3000/orders/62/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c83d2ad8 @base=#<Payment:0x007fa9c44874c8 ...>, @messages={}>, @request_id="37431649-3b50-4b04-88dc-b18f0d519f8e", @header={}, @id="PAY-6F57295644513022AKSUO26Q", @create_time="2015-01-04T07:36:26Z", @update_time="2015-01-04T07:36:26Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4d8bb78 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6F57295644513022AKSUO26Q", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4d8a980 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-69E36626FG146214U", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4d899e0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6F57295644513022AKSUO26Q/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T07:36:27.514302 #29890]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-69E36626FG146214U
I, [2015-01-04T07:36:27.515517 #29890]  INFO -- : #<Payment:0x007fa9c44874c8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c4da1748 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c4da0c30 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c4da07a8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c4d9bb40 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4d9b668 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c4d9a858 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c4d98b70 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4d93a80 @error=nil, @name="<p>camoflage print teeshirt</p>", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4d91f50 @error=nil, @name="<p>established 2014 tee shirt</p>", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c840a9b0 @error=nil, @return_url="http://localhost:3000/orders/62/confirm", @cancel_url="http://localhost:3000/orders/62/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c83d2ad8 @base=#<Payment:0x007fa9c44874c8 ...>, @messages={}>, @request_id="37431649-3b50-4b04-88dc-b18f0d519f8e", @header={}, @id="PAY-6F57295644513022AKSUO26Q", @create_time="2015-01-04T07:36:26Z", @update_time="2015-01-04T07:36:26Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4d8bb78 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6F57295644513022AKSUO26Q", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4d8a980 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-69E36626FG146214U", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4d899e0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6F57295644513022AKSUO26Q/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T07:36:27.517781 #29890]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-69E36626FG146214U
I, [2015-01-04T07:36:27.519228 #29890]  INFO -- : Completed 302 Found in 6660ms (ActiveRecord: 26.4ms)
D, [2015-01-04T07:37:21.499217 #29890] DEBUG -- : 
D, [2015-01-04T07:37:21.520260 #29890] DEBUG -- : 
I, [2015-01-04T07:37:21.521341 #29890]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-04 07:37:21 +0000
I, [2015-01-04T07:37:22.753161 #29890]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T07:37:22.754889 #29890]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-04T07:37:22.802325 #29890] DEBUG -- :   [1m[35mCart Load (0.8ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T07:37:22.877344 #29890] DEBUG -- :   [1m[36mProduct Load (0.9ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-04T07:37:22.985448 #29890] DEBUG -- :   [1m[35mLineItem Load (0.9ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 53]]
D, [2015-01-04T07:37:23.080840 #29890] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-04T07:37:23.088486 #29890] DEBUG -- :   [1m[35m (0.8ms)[0m  begin transaction
D, [2015-01-04T07:37:23.107288 #29890] DEBUG -- :   [1m[36mSQL (2.5ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 53], ["created_at", Sun, 04 Jan 2015 07:37:23 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7fa9c4938d50,'0.1299E2',18(36)>], ["size", "extra small"], ["updated_at", Sun, 04 Jan 2015 07:37:23 UTC +00:00]]
D, [2015-01-04T07:37:23.115239 #29890] DEBUG -- :   [1m[35m (4.3ms)[0m  commit transaction
D, [2015-01-04T07:37:23.150094 #29890] DEBUG -- :   [1m[36mLineItem Load (1.4ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-04T07:37:23.180484 #29890]  INFO -- :   Rendered line_items/_line_item.html.erb (8.8ms)
I, [2015-01-04T07:37:23.224808 #29890]  INFO -- :   Rendered carts/_cart.html.erb (81.9ms)
I, [2015-01-04T07:37:23.227068 #29890]  INFO -- :   Rendered line_items/create.js.erb (100.8ms)
I, [2015-01-04T07:37:23.229264 #29890]  INFO -- : Completed 200 OK in 473ms (Views: 108.9ms | ActiveRecord: 19.8ms)
D, [2015-01-04T07:37:27.609014 #29890] DEBUG -- : 
D, [2015-01-04T07:37:27.609716 #29890] DEBUG -- : 
I, [2015-01-04T07:37:27.611015 #29890]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-04 07:37:27 +0000
I, [2015-01-04T07:37:27.643342 #29890]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T07:37:27.644018 #29890]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-04T07:37:27.654539 #29890] DEBUG -- :   [1m[35mCart Load (0.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T07:37:27.662283 #29890] DEBUG -- :   [1m[36mProduct Load (0.8ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-04T07:37:27.673302 #29890] DEBUG -- :   [1m[35mLineItem Load (0.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 53]]
D, [2015-01-04T07:37:27.678326 #29890] DEBUG -- :   [1m[36m (0.6ms)[0m  [1mbegin transaction[0m
D, [2015-01-04T07:37:27.691599 #29890] DEBUG -- :   [1m[35mSQL (1.5ms)[0m  UPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = 117  [["quantity", 2], ["updated_at", Sun, 04 Jan 2015 07:37:27 UTC +00:00]]
D, [2015-01-04T07:37:27.697390 #29890] DEBUG -- :   [1m[36m (3.6ms)[0m  [1mcommit transaction[0m
D, [2015-01-04T07:37:27.717129 #29890] DEBUG -- :   [1m[35mLineItem Load (0.8ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
D, [2015-01-04T07:37:27.731190 #29890] DEBUG -- :   [1m[36mProduct Load (0.7ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-04T07:37:27.739180 #29890]  INFO -- :   Rendered line_items/_line_item.html.erb (17.0ms)
I, [2015-01-04T07:37:27.754818 #29890]  INFO -- :   Rendered carts/_cart.html.erb (42.9ms)
I, [2015-01-04T07:37:27.757061 #29890]  INFO -- :   Rendered line_items/create.js.erb (50.0ms)
I, [2015-01-04T07:37:27.759077 #29890]  INFO -- : Completed 200 OK in 114ms (Views: 56.9ms | ActiveRecord: 9.2ms)
D, [2015-01-04T07:37:29.268446 #29890] DEBUG -- : 
D, [2015-01-04T07:37:29.268938 #29890] DEBUG -- : 
I, [2015-01-04T07:37:29.269840 #29890]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-04 07:37:29 +0000
I, [2015-01-04T07:37:29.286478 #29890]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T07:37:29.287144 #29890]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-04T07:37:29.298833 #29890] DEBUG -- :   [1m[35mCart Load (0.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T07:37:29.305581 #29890] DEBUG -- :   [1m[36mProduct Load (1.1ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-04T07:37:29.315127 #29890] DEBUG -- :   [1m[35mLineItem Load (0.9ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 53]]
D, [2015-01-04T07:37:29.326076 #29890] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-04T07:37:29.330085 #29890] DEBUG -- :   [1m[35m (0.4ms)[0m  begin transaction
D, [2015-01-04T07:37:29.340879 #29890] DEBUG -- :   [1m[36mSQL (2.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 53], ["created_at", Sun, 04 Jan 2015 07:37:29 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:7fa9c4d10180,'0.1099E2',18(36)>], ["size", "extra small"], ["updated_at", Sun, 04 Jan 2015 07:37:29 UTC +00:00]]
D, [2015-01-04T07:37:29.350996 #29890] DEBUG -- :   [1m[35m (7.1ms)[0m  commit transaction
D, [2015-01-04T07:37:29.368728 #29890] DEBUG -- :   [1m[36mLineItem Load (0.7ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
D, [2015-01-04T07:37:29.388168 #29890] DEBUG -- :   [1m[35mProduct Load (0.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-04T07:37:29.400122 #29890]  INFO -- :   Rendered line_items/_line_item.html.erb (19.3ms)
I, [2015-01-04T07:37:29.413351 #29890]  INFO -- :   Rendered carts/_cart.html.erb (51.1ms)
I, [2015-01-04T07:37:29.415287 #29890]  INFO -- :   Rendered line_items/create.js.erb (56.4ms)
I, [2015-01-04T07:37:29.416895 #29890]  INFO -- : Completed 200 OK in 125ms (Views: 61.9ms | ActiveRecord: 14.0ms)
D, [2015-01-04T07:37:29.463609 #29890] DEBUG -- : 
D, [2015-01-04T07:37:29.464068 #29890] DEBUG -- : 
I, [2015-01-04T07:37:29.465076 #29890]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-04 07:37:29 +0000
I, [2015-01-04T07:37:29.481654 #29890]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T07:37:29.482289 #29890]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-04T07:37:29.494157 #29890] DEBUG -- :   [1m[36mCart Load (0.5ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-04T07:37:29.500746 #29890] DEBUG -- :   [1m[35mProduct Load (0.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-04T07:37:29.513627 #29890] DEBUG -- :   [1m[36mLineItem Load (0.5ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 53]]
D, [2015-01-04T07:37:29.518005 #29890] DEBUG -- :   [1m[35m (0.4ms)[0m  begin transaction
D, [2015-01-04T07:37:29.529937 #29890] DEBUG -- :   [1m[36mSQL (1.8ms)[0m  [1mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = 118[0m  [["quantity", 2], ["updated_at", Sun, 04 Jan 2015 07:37:29 UTC +00:00]]
D, [2015-01-04T07:37:29.538098 #29890] DEBUG -- :   [1m[35m (5.8ms)[0m  commit transaction
D, [2015-01-04T07:37:29.556518 #29890] DEBUG -- :   [1m[36mLineItem Load (0.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
D, [2015-01-04T07:37:29.572201 #29890] DEBUG -- :   [1m[35mProduct Load (0.7ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-04T07:37:29.589917 #29890] DEBUG -- :   [1m[36mProduct Load (0.8ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
I, [2015-01-04T07:37:29.597491 #29890]  INFO -- :   Rendered line_items/_line_item.html.erb (33.8ms)
I, [2015-01-04T07:37:29.614485 #29890]  INFO -- :   Rendered carts/_cart.html.erb (62.1ms)
I, [2015-01-04T07:37:29.617877 #29890]  INFO -- :   Rendered line_items/create.js.erb (69.0ms)
I, [2015-01-04T07:37:29.619492 #29890]  INFO -- : Completed 200 OK in 134ms (Views: 75.4ms | ActiveRecord: 11.8ms)
D, [2015-01-04T07:37:29.670734 #29890] DEBUG -- : 
D, [2015-01-04T07:37:29.671206 #29890] DEBUG -- : 
I, [2015-01-04T07:37:29.672163 #29890]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-04 07:37:29 +0000
I, [2015-01-04T07:37:29.693171 #29890]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T07:37:29.694026 #29890]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-04T07:37:29.702938 #29890] DEBUG -- :   [1m[35mCart Load (0.5ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T07:37:29.709308 #29890] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-04T07:37:29.721939 #29890] DEBUG -- :   [1m[35mLineItem Load (0.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 53]]
D, [2015-01-04T07:37:29.726526 #29890] DEBUG -- :   [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
D, [2015-01-04T07:37:29.750228 #29890] DEBUG -- :   [1m[35mSQL (1.2ms)[0m  UPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = 118  [["quantity", 3], ["updated_at", Sun, 04 Jan 2015 07:37:29 UTC +00:00]]
D, [2015-01-04T07:37:29.755764 #29890] DEBUG -- :   [1m[36m (3.3ms)[0m  [1mcommit transaction[0m
D, [2015-01-04T07:37:29.772752 #29890] DEBUG -- :   [1m[35mLineItem Load (0.7ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
D, [2015-01-04T07:37:29.789918 #29890] DEBUG -- :   [1m[36mProduct Load (0.8ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-04T07:37:29.807165 #29890] DEBUG -- :   [1m[35mProduct Load (0.7ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
I, [2015-01-04T07:37:29.823776 #29890]  INFO -- :   Rendered line_items/_line_item.html.erb (45.9ms)
I, [2015-01-04T07:37:29.842192 #29890]  INFO -- :   Rendered carts/_cart.html.erb (73.5ms)
I, [2015-01-04T07:37:29.844537 #29890]  INFO -- :   Rendered line_items/create.js.erb (79.0ms)
I, [2015-01-04T07:37:29.846334 #29890]  INFO -- : Completed 200 OK in 151ms (Views: 85.5ms | ActiveRecord: 9.0ms)
D, [2015-01-04T07:37:29.853904 #29890] DEBUG -- : 
D, [2015-01-04T07:37:29.854385 #29890] DEBUG -- : 
I, [2015-01-04T07:37:29.855258 #29890]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-04 07:37:29 +0000
I, [2015-01-04T07:37:29.873960 #29890]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T07:37:29.874693 #29890]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-04T07:37:29.884481 #29890] DEBUG -- :   [1m[36mCart Load (0.8ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-04T07:37:29.893531 #29890] DEBUG -- :   [1m[35mProduct Load (0.5ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-04T07:37:29.903379 #29890] DEBUG -- :   [1m[36mLineItem Load (0.5ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 53]]
D, [2015-01-04T07:37:29.907941 #29890] DEBUG -- :   [1m[35m (0.6ms)[0m  begin transaction
D, [2015-01-04T07:37:29.920242 #29890] DEBUG -- :   [1m[36mSQL (1.3ms)[0m  [1mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = 118[0m  [["quantity", 4], ["updated_at", Sun, 04 Jan 2015 07:37:29 UTC +00:00]]
D, [2015-01-04T07:37:29.925068 #29890] DEBUG -- :   [1m[35m (2.9ms)[0m  commit transaction
D, [2015-01-04T07:37:29.945857 #29890] DEBUG -- :   [1m[36mLineItem Load (0.7ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
D, [2015-01-04T07:37:29.960008 #29890] DEBUG -- :   [1m[35mProduct Load (1.4ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-04T07:37:29.974304 #29890] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
I, [2015-01-04T07:37:29.981020 #29890]  INFO -- :   Rendered line_items/_line_item.html.erb (29.6ms)
I, [2015-01-04T07:37:29.995839 #29890]  INFO -- :   Rendered carts/_cart.html.erb (55.2ms)
I, [2015-01-04T07:37:29.997941 #29890]  INFO -- :   Rendered line_items/create.js.erb (63.7ms)
I, [2015-01-04T07:37:29.999847 #29890]  INFO -- : Completed 200 OK in 124ms (Views: 69.4ms | ActiveRecord: 9.3ms)
D, [2015-01-04T07:37:32.759994 #29890] DEBUG -- : 
D, [2015-01-04T07:37:32.760490 #29890] DEBUG -- : 
I, [2015-01-04T07:37:32.761172 #29890]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-04 07:37:32 +0000
I, [2015-01-04T07:37:32.843869 #29890]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-04T07:37:32.889118 #29890] DEBUG -- :   [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
D, [2015-01-04T07:37:32.937891 #29890] DEBUG -- :   [1m[36mUser Load (1.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-04T07:37:32.945547 #29890] DEBUG -- :   [1m[35mCart Load (0.7ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T07:37:32.981342 #29890] DEBUG -- :   [1m[36mLineItem Load (0.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-04T07:37:32.996136 #29890]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-04T07:37:37.297844 #29890] DEBUG -- :   [1m[35m (0.7ms)[0m  begin transaction
D, [2015-01-04T07:37:37.418203 #29890] DEBUG -- :   [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Sun, 04 Jan 2015 07:37:37 UTC +00:00], ["updated_at", Sun, 04 Jan 2015 07:37:37 UTC +00:00]]
D, [2015-01-04T07:37:37.434820 #29890] DEBUG -- :   [1m[35mSQL (1.4ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 117  [["cart_id", nil], ["order_id", 63], ["updated_at", Sun, 04 Jan 2015 07:37:37 UTC +00:00]]
D, [2015-01-04T07:37:37.447194 #29890] DEBUG -- :   [1m[36mSQL (1.2ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 118[0m  [["cart_id", nil], ["order_id", 63], ["updated_at", Sun, 04 Jan 2015 07:37:37 UTC +00:00]]
I, [2015-01-04T07:37:37.448535 #29890]  INFO -- : about to @payment.create
D, [2015-01-04T07:37:38.281871 #29890] DEBUG -- :   [1m[35mProduct Load (0.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-04T07:37:38.290915 #29890] DEBUG -- :   [1m[36mProduct Load (0.5ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
I, [2015-01-04T07:37:41.280487 #29890]  INFO -- : in order=
I, [2015-01-04T07:37:41.283298 #29890]  INFO -- : in payment.create
I, [2015-01-04T07:37:41.289997 #29890]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"69.94"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"4", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/63/confirm", "cancel_url"=>"http://localhost:3000/orders/63/cancel"}}
I, [2015-01-04T07:37:41.292880 #29890]  INFO -- : #<ActiveModel::Errors:0x007fa9c4e22500 @base=#<Payment:0x007fa9c4f2f128 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c4f2e3b8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c8536e88 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c8536910 @error=nil, @total="69.94", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c8534908 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c852db08 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4ebd5c8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="4">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c4e97670 @error=nil, @return_url="http://localhost:3000/orders/63/confirm", @cancel_url="http://localhost:3000/orders/63/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c4e22500 ...>>, @messages={}>
I, [2015-01-04T07:37:41.293559 #29890]  INFO -- : got past invalid
I, [2015-01-04T07:37:41.316897 #29890]  INFO -- : PayPal-Request-Id: adcaa050-6018-4860-8e78-57b1193717f1
I, [2015-01-04T07:37:41.317420 #29890]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-04T07:37:42.818490 #29890]  INFO -- : Response[201]: Created, Duration: 1.500s
I, [2015-01-04T07:37:42.824222 #29890]  INFO -- : back from super
I, [2015-01-04T07:37:42.832821 #29890]  INFO -- : {"id"=>"PAY-76U618922G063725JKSUO3RQ", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"69.94", "details"=>{"subtotal"=>"69.94"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"4", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/63/confirm", "cancel_url"=>"http://localhost:3000/orders/63/cancel"}, "create_time"=>"2015-01-04T07:37:42Z", "update_time"=>"2015-01-04T07:37:42Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-76U618922G063725JKSUO3RQ", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-07A67193N64484304", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-76U618922G063725JKSUO3RQ/execute", "rel"=>"execute", "method"=>"POST"}]}
I, [2015-01-04T07:37:42.874549 #29890]  INFO -- : @payment save just done
I, [2015-01-04T07:37:42.876960 #29890]  INFO -- : #<Payment:0x007fa9c4f2f128 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c838a210 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c8389900 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c8389388 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c8388820 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c8388370 @error=nil, @total="69.94", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c83835f0 @error=nil, @subtotal="69.94">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c83827b8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c8381c78 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c837b800 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="4">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c4e97670 @error=nil, @return_url="http://localhost:3000/orders/63/confirm", @cancel_url="http://localhost:3000/orders/63/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c4e22500 @base=#<Payment:0x007fa9c4f2f128 ...>, @messages={}>, @request_id="adcaa050-6018-4860-8e78-57b1193717f1", @header={}, @id="PAY-76U618922G063725JKSUO3RQ", @create_time="2015-01-04T07:37:42Z", @update_time="2015-01-04T07:37:42Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c8379398 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-76U618922G063725JKSUO3RQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c8378470 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-07A67193N64484304", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c8372fe8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-76U618922G063725JKSUO3RQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T07:37:42.878732 #29890]  INFO -- : #<Payment:0x007fa9c4f2f128 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c838a210 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c8389900 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c8389388 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c8388820 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c8388370 @error=nil, @total="69.94", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c83835f0 @error=nil, @subtotal="69.94">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c83827b8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c8381c78 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c837b800 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="4">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c4e97670 @error=nil, @return_url="http://localhost:3000/orders/63/confirm", @cancel_url="http://localhost:3000/orders/63/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c4e22500 @base=#<Payment:0x007fa9c4f2f128 ...>, @messages={}>, @request_id="adcaa050-6018-4860-8e78-57b1193717f1", @header={}, @id="PAY-76U618922G063725JKSUO3RQ", @create_time="2015-01-04T07:37:42Z", @update_time="2015-01-04T07:37:42Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c8379398 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-76U618922G063725JKSUO3RQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c8378470 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-07A67193N64484304", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c8372fe8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-76U618922G063725JKSUO3RQ/execute", @rel="execute", @method="POST">]>
D, [2015-01-04T07:37:42.888822 #29890] DEBUG -- :   [1m[35m (7.4ms)[0m  commit transaction
I, [2015-01-04T07:37:42.890598 #29890]  INFO -- : about to approve url
I, [2015-01-04T07:37:42.891950 #29890]  INFO -- : #<Payment:0x007fa9c4f2f128 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c838a210 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c8389900 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c8389388 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c8388820 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c8388370 @error=nil, @total="69.94", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c83835f0 @error=nil, @subtotal="69.94">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c83827b8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c8381c78 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c837b800 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="4">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c4e97670 @error=nil, @return_url="http://localhost:3000/orders/63/confirm", @cancel_url="http://localhost:3000/orders/63/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c4e22500 @base=#<Payment:0x007fa9c4f2f128 ...>, @messages={}>, @request_id="adcaa050-6018-4860-8e78-57b1193717f1", @header={}, @id="PAY-76U618922G063725JKSUO3RQ", @create_time="2015-01-04T07:37:42Z", @update_time="2015-01-04T07:37:42Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c8379398 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-76U618922G063725JKSUO3RQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c8378470 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-07A67193N64484304", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c8372fe8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-76U618922G063725JKSUO3RQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T07:37:42.893259 #29890]  INFO -- : #<Payment:0x007fa9c4f2f128 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c838a210 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c8389900 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c8389388 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c8388820 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c8388370 @error=nil, @total="69.94", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c83835f0 @error=nil, @subtotal="69.94">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c83827b8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c8381c78 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c837b800 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="4">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c4e97670 @error=nil, @return_url="http://localhost:3000/orders/63/confirm", @cancel_url="http://localhost:3000/orders/63/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c4e22500 @base=#<Payment:0x007fa9c4f2f128 ...>, @messages={}>, @request_id="adcaa050-6018-4860-8e78-57b1193717f1", @header={}, @id="PAY-76U618922G063725JKSUO3RQ", @create_time="2015-01-04T07:37:42Z", @update_time="2015-01-04T07:37:42Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c8379398 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-76U618922G063725JKSUO3RQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c8378470 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-07A67193N64484304", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c8372fe8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-76U618922G063725JKSUO3RQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T07:37:42.893775 #29890]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-07A67193N64484304
I, [2015-01-04T07:37:42.895084 #29890]  INFO -- : #<Payment:0x007fa9c4f2f128 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c838a210 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c8389900 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c8389388 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c8388820 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c8388370 @error=nil, @total="69.94", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c83835f0 @error=nil, @subtotal="69.94">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c83827b8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c8381c78 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c837b800 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="4">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c4e97670 @error=nil, @return_url="http://localhost:3000/orders/63/confirm", @cancel_url="http://localhost:3000/orders/63/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c4e22500 @base=#<Payment:0x007fa9c4f2f128 ...>, @messages={}>, @request_id="adcaa050-6018-4860-8e78-57b1193717f1", @header={}, @id="PAY-76U618922G063725JKSUO3RQ", @create_time="2015-01-04T07:37:42Z", @update_time="2015-01-04T07:37:42Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c8379398 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-76U618922G063725JKSUO3RQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c8378470 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-07A67193N64484304", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c8372fe8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-76U618922G063725JKSUO3RQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T07:37:42.897036 #29890]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-07A67193N64484304
I, [2015-01-04T07:37:42.900056 #29890]  INFO -- : Completed 403 Forbidden in 10055ms (ActiveRecord: 21.0ms)
D, [2015-01-04T07:38:53.396485 #29890] DEBUG -- : 
D, [2015-01-04T07:38:53.396810 #29890] DEBUG -- : 
I, [2015-01-04T07:38:53.397850 #29890]  INFO -- : Started GET "/orders/63/confirm?paymentId=PAY-76U618922G063725JKSUO3RQ&token=EC-07A67193N64484304&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-04 07:38:53 +0000
I, [2015-01-04T07:38:53.422800 #29890]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-04T07:38:53.423275 #29890]  INFO -- :   Parameters: {"paymentId"=>"PAY-76U618922G063725JKSUO3RQ", "token"=>"EC-07A67193N64484304", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"63"}
D, [2015-01-04T07:38:53.431656 #29890] DEBUG -- :   [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
D, [2015-01-04T07:38:53.439400 #29890] DEBUG -- :   [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-04T07:38:53.445733 #29890] DEBUG -- :   [1m[36mOrder Load (0.9ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "63"]]
I, [2015-01-04T07:38:59.751149 #29890]  INFO -- : Completed 500 Internal Server Error in 6326ms
F, [2015-01-04T07:38:59.761352 #29890] FATAL -- : 
NoMethodError (undefined method `error' for nil:NilClass):
  app/models/order.rb:86:in `confirm'
  app/controllers/orders_controller.rb:95:in `confirm'


I, [2015-01-04T07:38:59.849796 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.1ms)
I, [2015-01-04T07:38:59.864003 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (6.6ms)
I, [2015-01-04T07:38:59.876586 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (4.8ms)
I, [2015-01-04T07:38:59.877812 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (43.4ms)
D, [2015-01-04T07:44:24.073563 #29890] DEBUG -- : 
D, [2015-01-04T07:44:24.083834 #29890] DEBUG -- : 
I, [2015-01-04T07:44:24.085378 #29890]  INFO -- : Started GET "/orders/63/confirm?paymentId=PAY-76U618922G063725JKSUO3RQ&token=EC-07A67193N64484304&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-04 07:44:24 +0000
I, [2015-01-04T07:44:24.238910 #29890]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-04T07:44:24.239715 #29890]  INFO -- :   Parameters: {"paymentId"=>"PAY-76U618922G063725JKSUO3RQ", "token"=>"EC-07A67193N64484304", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"63"}
D, [2015-01-04T07:44:24.249194 #29890] DEBUG -- :   [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
D, [2015-01-04T07:44:24.256567 #29890] DEBUG -- :   [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-04T07:44:24.263514 #29890] DEBUG -- :   [1m[35mOrder Load (0.7ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "63"]]
I, [2015-01-04T07:46:01.278895 #29890]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-76U618922G063725JKSUO3RQ
I, [2015-01-04T07:46:02.854068 #29890]  INFO -- : Response[200]: OK, Duration: 1.575s
D, [2015-01-04T07:51:45.465615 #29890] DEBUG -- :   [1m[36m (0.6ms)[0m  [1mbegin transaction[0m
D, [2015-01-04T07:51:45.504271 #29890] DEBUG -- :   [1m[35m (0.5ms)[0m  rollback transaction
I, [2015-01-04T07:51:45.508579 #29890]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-04T07:51:45.509850 #29890]  INFO -- : Completed 302 Found in 441269ms (ActiveRecord: 3.4ms)
D, [2015-01-04T07:51:46.083922 #29890] DEBUG -- : 
D, [2015-01-04T07:51:46.084388 #29890] DEBUG -- : 
I, [2015-01-04T07:51:46.084986 #29890]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-04 07:51:46 +0000
I, [2015-01-04T07:51:47.095246 #29890]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-04T07:51:47.139757 #29890] DEBUG -- :   [1m[36mCart Load (0.6ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-04T07:51:47.263972 #29890] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-04T07:51:47.336599 #29890]  INFO -- : Read fragment views/store/products/2-20141022062504570899000/a93d4e2e981ab3dfce98a095c3b6c059 (7.8ms)
I, [2015-01-04T07:51:47.337826 #29890]  INFO -- :   Rendered store/index.html.erb within layouts/application (79.4ms)
D, [2015-01-04T07:51:47.423494 #29890] DEBUG -- :   [1m[36mLineItem Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 53]]
D, [2015-01-04T07:51:47.466499 #29890] DEBUG -- :   [1m[35mLineItem Load (1.1ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
I, [2015-01-04T07:51:47.468594 #29890]  INFO -- :   Rendered collection (0.3ms)
I, [2015-01-04T07:51:47.494061 #29890]  INFO -- :   Rendered carts/_cart.html.erb (33.6ms)
I, [2015-01-04T07:51:47.503918 #29890]  INFO -- : Completed 200 OK in 407ms (Views: 294.2ms | ActiveRecord: 9.9ms)
D, [2015-01-04T07:51:47.880304 #29890] DEBUG -- : 
D, [2015-01-04T07:51:47.880974 #29890] DEBUG -- : 
I, [2015-01-04T07:51:47.882152 #29890]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-04 07:51:47 +0000
D, [2015-01-04T07:51:47.909643 #29890] DEBUG -- : 
D, [2015-01-04T07:51:47.910148 #29890] DEBUG -- : 
I, [2015-01-04T07:51:47.911363 #29890]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-04 07:51:47 +0000
D, [2015-01-04T07:51:47.936936 #29890] DEBUG -- : 
D, [2015-01-04T07:51:47.967945 #29890] DEBUG -- : 
I, [2015-01-04T07:51:47.973035 #29890]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-04 07:51:47 +0000
D, [2015-01-04T07:51:47.993363 #29890] DEBUG -- : 
D, [2015-01-04T07:51:47.993888 #29890] DEBUG -- : 
I, [2015-01-04T07:51:47.994872 #29890]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-04 07:51:47 +0000
D, [2015-01-04T07:51:48.024170 #29890] DEBUG -- : 
D, [2015-01-04T07:51:48.024782 #29890] DEBUG -- : 
I, [2015-01-04T07:51:48.025858 #29890]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-04 07:51:48 +0000
D, [2015-01-04T07:51:48.065968 #29890] DEBUG -- : 
D, [2015-01-04T07:51:48.068070 #29890] DEBUG -- : 
I, [2015-01-04T07:51:48.069554 #29890]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-04 07:51:48 +0000
D, [2015-01-04T07:51:48.089560 #29890] DEBUG -- : 
D, [2015-01-04T07:51:48.090091 #29890] DEBUG -- : 
I, [2015-01-04T07:51:48.091014 #29890]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-04 07:51:48 +0000
D, [2015-01-04T07:51:48.113837 #29890] DEBUG -- : 
D, [2015-01-04T07:51:48.115257 #29890] DEBUG -- : 
I, [2015-01-04T07:51:48.116312 #29890]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-04 07:51:48 +0000
D, [2015-01-04T07:51:48.140396 #29890] DEBUG -- : 
D, [2015-01-04T07:51:48.147005 #29890] DEBUG -- : 
I, [2015-01-04T07:51:48.148156 #29890]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-04 07:51:48 +0000
D, [2015-01-04T07:51:48.165443 #29890] DEBUG -- : 
D, [2015-01-04T07:51:48.166076 #29890] DEBUG -- : 
I, [2015-01-04T07:51:48.167083 #29890]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-04 07:51:48 +0000
D, [2015-01-04T07:51:48.186122 #29890] DEBUG -- : 
D, [2015-01-04T07:51:48.186989 #29890] DEBUG -- : 
I, [2015-01-04T07:51:48.188245 #29890]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-04 07:51:48 +0000
D, [2015-01-04T07:51:48.231346 #29890] DEBUG -- : 
D, [2015-01-04T07:51:48.231888 #29890] DEBUG -- : 
I, [2015-01-04T07:51:48.232845 #29890]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-04 07:51:48 +0000
D, [2015-01-04T07:51:48.263528 #29890] DEBUG -- : 
D, [2015-01-04T07:51:48.263968 #29890] DEBUG -- : 
I, [2015-01-04T07:51:48.265006 #29890]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-04 07:51:48 +0000
D, [2015-01-04T07:51:48.289930 #29890] DEBUG -- : 
D, [2015-01-04T07:51:48.290607 #29890] DEBUG -- : 
I, [2015-01-04T07:51:48.291846 #29890]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-04 07:51:48 +0000
D, [2015-01-04T07:51:48.320618 #29890] DEBUG -- : 
D, [2015-01-04T07:51:48.321177 #29890] DEBUG -- : 
I, [2015-01-04T07:51:48.322410 #29890]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-04 07:51:48 +0000
D, [2015-01-04T07:51:48.352340 #29890] DEBUG -- : 
D, [2015-01-04T07:51:48.352924 #29890] DEBUG -- : 
I, [2015-01-04T07:51:48.354231 #29890]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-04 07:51:48 +0000
D, [2015-01-04T07:51:48.395310 #29890] DEBUG -- : 
D, [2015-01-04T07:51:48.395778 #29890] DEBUG -- : 
I, [2015-01-04T07:51:48.396818 #29890]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-04 07:51:48 +0000
D, [2015-01-04T07:51:48.414791 #29890] DEBUG -- : 
D, [2015-01-04T07:51:48.415287 #29890] DEBUG -- : 
I, [2015-01-04T07:51:48.416487 #29890]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-04 07:51:48 +0000
D, [2015-01-04T07:51:48.443911 #29890] DEBUG -- : 
D, [2015-01-04T07:51:48.450043 #29890] DEBUG -- : 
I, [2015-01-04T07:51:48.451324 #29890]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-04 07:51:48 +0000
D, [2015-01-04T07:51:48.487482 #29890] DEBUG -- : 
D, [2015-01-04T07:51:48.488212 #29890] DEBUG -- : 
I, [2015-01-04T07:51:48.489349 #29890]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-04 07:51:48 +0000
D, [2015-01-04T07:51:48.530431 #29890] DEBUG -- : 
D, [2015-01-04T07:51:48.531031 #29890] DEBUG -- : 
I, [2015-01-04T07:51:48.532220 #29890]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-04 07:51:48 +0000
D, [2015-01-04T07:51:48.557592 #29890] DEBUG -- : 
D, [2015-01-04T07:51:48.558109 #29890] DEBUG -- : 
I, [2015-01-04T07:51:48.559096 #29890]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-04 07:51:48 +0000
D, [2015-01-04T07:51:48.588613 #29890] DEBUG -- : 
D, [2015-01-04T07:51:48.589305 #29890] DEBUG -- : 
I, [2015-01-04T07:51:48.590552 #29890]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-04 07:51:48 +0000
D, [2015-01-04T07:51:48.610756 #29890] DEBUG -- : 
D, [2015-01-04T07:51:48.611267 #29890] DEBUG -- : 
I, [2015-01-04T07:51:48.612241 #29890]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-04 07:51:48 +0000
D, [2015-01-04T07:51:48.635816 #29890] DEBUG -- : 
D, [2015-01-04T07:51:48.637027 #29890] DEBUG -- : 
I, [2015-01-04T07:51:48.638062 #29890]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-04 07:51:48 +0000
D, [2015-01-04T07:51:48.669621 #29890] DEBUG -- : 
D, [2015-01-04T07:51:48.672870 #29890] DEBUG -- : 
I, [2015-01-04T07:51:48.674115 #29890]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-04 07:51:48 +0000
D, [2015-01-04T07:51:48.699664 #29890] DEBUG -- : 
D, [2015-01-04T07:51:48.700248 #29890] DEBUG -- : 
I, [2015-01-04T07:51:48.701178 #29890]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-04 07:51:48 +0000
D, [2015-01-04T07:51:48.745846 #29890] DEBUG -- : 
D, [2015-01-04T07:51:48.746475 #29890] DEBUG -- : 
I, [2015-01-04T07:51:48.747311 #29890]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-04 07:51:48 +0000
D, [2015-01-04T07:51:48.783257 #29890] DEBUG -- : 
D, [2015-01-04T07:51:48.783865 #29890] DEBUG -- : 
I, [2015-01-04T07:51:48.784820 #29890]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-04 07:51:48 +0000
D, [2015-01-04T07:52:20.859274 #29890] DEBUG -- : 
D, [2015-01-04T07:52:20.859693 #29890] DEBUG -- : 
I, [2015-01-04T07:52:20.861458 #29890]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-04 07:52:20 +0000
I, [2015-01-04T07:52:20.906468 #29890]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T07:52:20.907044 #29890]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-04T07:52:20.924633 #29890] DEBUG -- :   [1m[36mCart Load (0.6ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-04T07:52:20.930202 #29890] DEBUG -- :   [1m[35mProduct Load (0.8ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-04T07:52:20.938848 #29890] DEBUG -- :   [1m[36mLineItem Load (0.8ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 53]]
D, [2015-01-04T07:52:21.023767 #29890] DEBUG -- :   [1m[35mProduct Load (2.3ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-04T07:52:21.028606 #29890] DEBUG -- :   [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
D, [2015-01-04T07:52:21.043501 #29890] DEBUG -- :   [1m[35mSQL (2.1ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 53], ["created_at", Sun, 04 Jan 2015 07:52:21 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7fa9c4ae1cb0,'0.1299E2',18(36)>], ["size", "extra small"], ["updated_at", Sun, 04 Jan 2015 07:52:21 UTC +00:00]]
D, [2015-01-04T07:52:21.050180 #29890] DEBUG -- :   [1m[36m (3.8ms)[0m  [1mcommit transaction[0m
D, [2015-01-04T07:52:21.083945 #29890] DEBUG -- :   [1m[35mLineItem Load (0.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
I, [2015-01-04T07:52:21.121140 #29890]  INFO -- :   Rendered line_items/_line_item.html.erb (7.0ms)
I, [2015-01-04T07:52:21.135182 #29890]  INFO -- :   Rendered carts/_cart.html.erb (55.3ms)
I, [2015-01-04T07:52:21.136993 #29890]  INFO -- :   Rendered line_items/create.js.erb (60.1ms)
I, [2015-01-04T07:52:21.138605 #29890]  INFO -- : Completed 200 OK in 231ms (Views: 85.2ms | ActiveRecord: 11.5ms)
D, [2015-01-04T07:52:22.212224 #29890] DEBUG -- : 
D, [2015-01-04T07:52:22.212749 #29890] DEBUG -- : 
I, [2015-01-04T07:52:22.213757 #29890]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-04 07:52:22 +0000
I, [2015-01-04T07:52:22.242136 #29890]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T07:52:22.242749 #29890]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-04T07:52:22.250678 #29890] DEBUG -- :   [1m[36mCart Load (0.7ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-04T07:52:22.256107 #29890] DEBUG -- :   [1m[35mProduct Load (0.5ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-04T07:52:22.272179 #29890] DEBUG -- :   [1m[36mLineItem Load (0.8ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 53]]
D, [2015-01-04T07:52:22.282446 #29890] DEBUG -- :   [1m[35mProduct Load (0.5ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-04T07:52:22.286304 #29890] DEBUG -- :   [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
D, [2015-01-04T07:52:22.296808 #29890] DEBUG -- :   [1m[35mSQL (1.8ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 53], ["created_at", Sun, 04 Jan 2015 07:52:22 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:7fa9c48afb68,'0.1099E2',18(36)>], ["size", "extra small"], ["updated_at", Sun, 04 Jan 2015 07:52:22 UTC +00:00]]
D, [2015-01-04T07:52:22.312797 #29890] DEBUG -- :   [1m[36m (8.8ms)[0m  [1mcommit transaction[0m
D, [2015-01-04T07:52:22.330341 #29890] DEBUG -- :   [1m[35mLineItem Load (1.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
D, [2015-01-04T07:52:22.356167 #29890] DEBUG -- :   [1m[36mProduct Load (0.7ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-04T07:52:22.367420 #29890]  INFO -- :   Rendered line_items/_line_item.html.erb (27.8ms)
I, [2015-01-04T07:52:22.380149 #29890]  INFO -- :   Rendered carts/_cart.html.erb (54.7ms)
I, [2015-01-04T07:52:22.382210 #29890]  INFO -- :   Rendered line_items/create.js.erb (59.6ms)
I, [2015-01-04T07:52:22.383829 #29890]  INFO -- : Completed 200 OK in 140ms (Views: 66.4ms | ActiveRecord: 15.3ms)
D, [2015-01-04T07:52:24.850067 #29890] DEBUG -- : 
D, [2015-01-04T07:52:24.850671 #29890] DEBUG -- : 
I, [2015-01-04T07:52:24.851544 #29890]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-04 07:52:24 +0000
I, [2015-01-04T07:52:24.868626 #29890]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T07:52:24.869276 #29890]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-04T07:52:24.877884 #29890] DEBUG -- :   [1m[35mCart Load (1.1ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T07:52:24.885065 #29890] DEBUG -- :   [1m[36mProduct Load (0.5ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-04T07:52:24.895072 #29890] DEBUG -- :   [1m[35mLineItem Load (0.5ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 53]]
D, [2015-01-04T07:52:24.898873 #29890] DEBUG -- :   [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
D, [2015-01-04T07:52:24.914031 #29890] DEBUG -- :   [1m[35mSQL (3.5ms)[0m  UPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = 120  [["quantity", 2], ["updated_at", Sun, 04 Jan 2015 07:52:24 UTC +00:00]]
D, [2015-01-04T07:52:24.942105 #29890] DEBUG -- :   [1m[36m (25.7ms)[0m  [1mcommit transaction[0m
D, [2015-01-04T07:52:24.958241 #29890] DEBUG -- :   [1m[35mLineItem Load (0.7ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
D, [2015-01-04T07:52:24.970290 #29890] DEBUG -- :   [1m[36mProduct Load (0.7ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-04T07:52:24.984287 #29890] DEBUG -- :   [1m[35mProduct Load (0.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
I, [2015-01-04T07:52:24.990711 #29890]  INFO -- :   Rendered line_items/_line_item.html.erb (27.6ms)
I, [2015-01-04T07:52:25.003132 #29890]  INFO -- :   Rendered carts/_cart.html.erb (48.9ms)
I, [2015-01-04T07:52:25.004949 #29890]  INFO -- :   Rendered line_items/create.js.erb (53.7ms)
I, [2015-01-04T07:52:25.006567 #29890]  INFO -- : Completed 200 OK in 136ms (Views: 59.7ms | ActiveRecord: 33.7ms)
D, [2015-01-04T07:52:26.854866 #29890] DEBUG -- : 
D, [2015-01-04T07:52:26.855241 #29890] DEBUG -- : 
I, [2015-01-04T07:52:26.855866 #29890]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-04 07:52:26 +0000
I, [2015-01-04T07:52:26.894702 #29890]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-04T07:52:26.950891 #29890] DEBUG -- :   [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
D, [2015-01-04T07:52:26.999280 #29890] DEBUG -- :   [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-04T07:52:27.005184 #29890] DEBUG -- :   [1m[36mCart Load (0.6ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-04T07:52:27.037935 #29890] DEBUG -- :   [1m[35mLineItem Load (0.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
I, [2015-01-04T07:52:27.052001 #29890]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-04T07:52:27.058014 #29890] DEBUG -- :   [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
D, [2015-01-04T07:52:27.174774 #29890] DEBUG -- :   [1m[35mSQL (1.6ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Sun, 04 Jan 2015 07:52:27 UTC +00:00], ["updated_at", Sun, 04 Jan 2015 07:52:27 UTC +00:00]]
D, [2015-01-04T07:52:27.189406 #29890] DEBUG -- :   [1m[36mSQL (4.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 119[0m  [["cart_id", nil], ["order_id", 64], ["updated_at", Sun, 04 Jan 2015 07:52:27 UTC +00:00]]
D, [2015-01-04T07:52:27.200674 #29890] DEBUG -- :   [1m[35mSQL (1.1ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 120  [["cart_id", nil], ["order_id", 64], ["updated_at", Sun, 04 Jan 2015 07:52:27 UTC +00:00]]
I, [2015-01-04T07:52:27.202058 #29890]  INFO -- : about to @payment.create
D, [2015-01-04T07:52:31.981811 #29890] DEBUG -- :   [1m[36mProduct Load (0.5ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-04T07:52:31.994767 #29890] DEBUG -- :   [1m[35mProduct Load (0.5ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
I, [2015-01-04T07:52:32.870788 #29890]  INFO -- : in order=
I, [2015-01-04T07:52:32.872885 #29890]  INFO -- : in payment.create
I, [2015-01-04T07:52:32.879975 #29890]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"34.97"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"2", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/64/confirm", "cancel_url"=>"http://localhost:3000/orders/64/cancel"}}
I, [2015-01-04T07:52:32.882178 #29890]  INFO -- : #<ActiveModel::Errors:0x007fa9c8431920 @base=#<Payment:0x007fa9c4eefc58 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c4eeedf8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c4e74c10 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4e74710 @error=nil, @total="34.97", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c4e6e180 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4e5ebe0 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4e45820 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="2">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c846db78 @error=nil, @return_url="http://localhost:3000/orders/64/confirm", @cancel_url="http://localhost:3000/orders/64/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c8431920 ...>>, @messages={}>
I, [2015-01-04T07:52:32.883240 #29890]  INFO -- : got past invalid
I, [2015-01-04T07:52:32.904887 #29890]  INFO -- : PayPal-Request-Id: 99cd5ec4-4183-49fc-894a-5f99197e44f1
I, [2015-01-04T07:52:32.905524 #29890]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-04T07:52:34.433959 #29890]  INFO -- : Response[201]: Created, Duration: 1.528s
I, [2015-01-04T07:52:34.439469 #29890]  INFO -- : back from super
I, [2015-01-04T07:52:34.448099 #29890]  INFO -- : {"id"=>"PAY-70H88812JA9294804KSUPCQI", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"34.97", "details"=>{"subtotal"=>"34.97"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"2", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/64/confirm", "cancel_url"=>"http://localhost:3000/orders/64/cancel"}, "create_time"=>"2015-01-04T07:52:33Z", "update_time"=>"2015-01-04T07:52:34Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-70H88812JA9294804KSUPCQI", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-0J255780AA9992001", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-70H88812JA9294804KSUPCQI/execute", "rel"=>"execute", "method"=>"POST"}]}
I, [2015-01-04T07:52:34.491755 #29890]  INFO -- : @payment save just done
I, [2015-01-04T07:52:34.492970 #29890]  INFO -- : #<Payment:0x007fa9c4eefc58 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c4dd93c8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c4dd87c0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c4dd82e8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c4dd2f00 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4dd27a8 @error=nil, @total="34.97", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c4dd1308 @error=nil, @subtotal="34.97">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c4dcbcc8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4dcb020 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4dc3910 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="2">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c846db78 @error=nil, @return_url="http://localhost:3000/orders/64/confirm", @cancel_url="http://localhost:3000/orders/64/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c8431920 @base=#<Payment:0x007fa9c4eefc58 ...>, @messages={}>, @request_id="99cd5ec4-4183-49fc-894a-5f99197e44f1", @header={}, @id="PAY-70H88812JA9294804KSUPCQI", @create_time="2015-01-04T07:52:33Z", @update_time="2015-01-04T07:52:34Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4dc0f80 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-70H88812JA9294804KSUPCQI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4dbbd78 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-0J255780AA9992001", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4dba8b0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-70H88812JA9294804KSUPCQI/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T07:52:34.494329 #29890]  INFO -- : #<Payment:0x007fa9c4eefc58 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c4dd93c8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c4dd87c0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c4dd82e8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c4dd2f00 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4dd27a8 @error=nil, @total="34.97", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c4dd1308 @error=nil, @subtotal="34.97">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c4dcbcc8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4dcb020 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4dc3910 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="2">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c846db78 @error=nil, @return_url="http://localhost:3000/orders/64/confirm", @cancel_url="http://localhost:3000/orders/64/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c8431920 @base=#<Payment:0x007fa9c4eefc58 ...>, @messages={}>, @request_id="99cd5ec4-4183-49fc-894a-5f99197e44f1", @header={}, @id="PAY-70H88812JA9294804KSUPCQI", @create_time="2015-01-04T07:52:33Z", @update_time="2015-01-04T07:52:34Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4dc0f80 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-70H88812JA9294804KSUPCQI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4dbbd78 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-0J255780AA9992001", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4dba8b0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-70H88812JA9294804KSUPCQI/execute", @rel="execute", @method="POST">]>
D, [2015-01-04T07:52:34.504008 #29890] DEBUG -- :   [1m[36m (7.3ms)[0m  [1mcommit transaction[0m
I, [2015-01-04T07:52:34.505694 #29890]  INFO -- : about to approve url
I, [2015-01-04T07:52:34.506801 #29890]  INFO -- : #<Payment:0x007fa9c4eefc58 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c4dd93c8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c4dd87c0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c4dd82e8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c4dd2f00 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4dd27a8 @error=nil, @total="34.97", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c4dd1308 @error=nil, @subtotal="34.97">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c4dcbcc8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4dcb020 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4dc3910 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="2">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c846db78 @error=nil, @return_url="http://localhost:3000/orders/64/confirm", @cancel_url="http://localhost:3000/orders/64/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c8431920 @base=#<Payment:0x007fa9c4eefc58 ...>, @messages={}>, @request_id="99cd5ec4-4183-49fc-894a-5f99197e44f1", @header={}, @id="PAY-70H88812JA9294804KSUPCQI", @create_time="2015-01-04T07:52:33Z", @update_time="2015-01-04T07:52:34Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4dc0f80 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-70H88812JA9294804KSUPCQI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4dbbd78 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-0J255780AA9992001", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4dba8b0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-70H88812JA9294804KSUPCQI/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T07:52:34.508357 #29890]  INFO -- : #<Payment:0x007fa9c4eefc58 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c4dd93c8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c4dd87c0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c4dd82e8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c4dd2f00 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4dd27a8 @error=nil, @total="34.97", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c4dd1308 @error=nil, @subtotal="34.97">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c4dcbcc8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4dcb020 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4dc3910 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="2">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c846db78 @error=nil, @return_url="http://localhost:3000/orders/64/confirm", @cancel_url="http://localhost:3000/orders/64/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c8431920 @base=#<Payment:0x007fa9c4eefc58 ...>, @messages={}>, @request_id="99cd5ec4-4183-49fc-894a-5f99197e44f1", @header={}, @id="PAY-70H88812JA9294804KSUPCQI", @create_time="2015-01-04T07:52:33Z", @update_time="2015-01-04T07:52:34Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4dc0f80 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-70H88812JA9294804KSUPCQI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4dbbd78 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-0J255780AA9992001", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4dba8b0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-70H88812JA9294804KSUPCQI/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T07:52:34.508907 #29890]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-0J255780AA9992001
I, [2015-01-04T07:52:34.510335 #29890]  INFO -- : #<Payment:0x007fa9c4eefc58 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c4dd93c8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c4dd87c0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c4dd82e8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c4dd2f00 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4dd27a8 @error=nil, @total="34.97", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c4dd1308 @error=nil, @subtotal="34.97">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c4dcbcc8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4dcb020 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4dc3910 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="2">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c846db78 @error=nil, @return_url="http://localhost:3000/orders/64/confirm", @cancel_url="http://localhost:3000/orders/64/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c8431920 @base=#<Payment:0x007fa9c4eefc58 ...>, @messages={}>, @request_id="99cd5ec4-4183-49fc-894a-5f99197e44f1", @header={}, @id="PAY-70H88812JA9294804KSUPCQI", @create_time="2015-01-04T07:52:33Z", @update_time="2015-01-04T07:52:34Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4dc0f80 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-70H88812JA9294804KSUPCQI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4dbbd78 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-0J255780AA9992001", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4dba8b0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-70H88812JA9294804KSUPCQI/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T07:52:34.512313 #29890]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-0J255780AA9992001
I, [2015-01-04T07:52:34.515211 #29890]  INFO -- : Completed 403 Forbidden in 7620ms (ActiveRecord: 21.5ms)
D, [2015-01-04T07:52:34.523513 #29890] DEBUG -- : 
D, [2015-01-04T07:52:34.523862 #29890] DEBUG -- : 
I, [2015-01-04T07:52:34.524390 #29890]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-04 07:52:34 +0000
I, [2015-01-04T07:52:34.547769 #29890]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-04T07:52:34.555468 #29890] DEBUG -- :   [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
D, [2015-01-04T07:52:34.560884 #29890] DEBUG -- :   [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-04T07:52:34.566214 #29890] DEBUG -- :   [1m[35mCart Load (0.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T07:52:34.575396 #29890] DEBUG -- :   [1m[36mLineItem Load (0.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-04T07:52:34.579325 #29890]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-04T07:52:35.647352 #29890] DEBUG -- :   [1m[35m (0.6ms)[0m  begin transaction
D, [2015-01-04T07:52:35.660189 #29890] DEBUG -- :   [1m[36mSQL (1.9ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Sun, 04 Jan 2015 07:52:35 UTC +00:00], ["updated_at", Sun, 04 Jan 2015 07:52:35 UTC +00:00]]
I, [2015-01-04T07:52:35.661455 #29890]  INFO -- : about to @payment.create
D, [2015-01-04T07:52:36.631666 #29890] DEBUG -- :   [1m[35mLineItem Load (0.8ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 65]]
I, [2015-01-04T07:52:37.598920 #29890]  INFO -- : in order=
I, [2015-01-04T07:52:37.600530 #29890]  INFO -- : in payment.create
I, [2015-01-04T07:52:37.603967 #29890]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"0"}, "description"=>"King Clothing"}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/65/confirm", "cancel_url"=>"http://localhost:3000/orders/65/cancel"}}
I, [2015-01-04T07:52:37.606384 #29890]  INFO -- : #<ActiveModel::Errors:0x007fa9c65cc688 @base=#<Payment:0x007fa9c672b6c8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c672aa48 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c6663178 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c66629f8 @error=nil, @total="0", @currency="GBP">, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c66012e8 @error=nil, @return_url="http://localhost:3000/orders/65/confirm", @cancel_url="http://localhost:3000/orders/65/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c65cc688 ...>>, @messages={}>
I, [2015-01-04T07:52:37.607198 #29890]  INFO -- : got past invalid
I, [2015-01-04T07:52:37.619307 #29890]  INFO -- : PayPal-Request-Id: ee7a0fda-090c-4057-8342-38c27654eac4
I, [2015-01-04T07:52:37.619872 #29890]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-04T07:52:38.635246 #29890]  INFO -- : Response[400]: Bad Request, Duration: 1.015s
I, [2015-01-04T07:52:38.636925 #29890]  INFO -- :  in error=
I, [2015-01-04T07:52:38.637989 #29890]  INFO -- : back from super
I, [2015-01-04T07:52:38.641320 #29890]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"0"}, "description"=>"King Clothing"}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/65/confirm", "cancel_url"=>"http://localhost:3000/orders/65/cancel"}}
I, [2015-01-04T07:52:38.676581 #29890]  INFO -- : @payment save just done
I, [2015-01-04T07:52:38.677810 #29890]  INFO -- : #<Payment:0x007fa9c672b6c8 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions[0].amount", "issue"=>"Amount cannot be zero"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"ced9fd2cdee5a"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c672aa48 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c6663178 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c66629f8 @error=nil, @total="0", @currency="GBP">, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c66012e8 @error=nil, @return_url="http://localhost:3000/orders/65/confirm", @cancel_url="http://localhost:3000/orders/65/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c65cc688 @base=#<Payment:0x007fa9c672b6c8 ...>, @messages={:"transactions[0].amount"=>["Amount cannot be zero"]}>, @request_id="ee7a0fda-090c-4057-8342-38c27654eac4", @header={}>
I, [2015-01-04T07:52:38.678803 #29890]  INFO -- : #<Payment:0x007fa9c672b6c8 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions[0].amount", "issue"=>"Amount cannot be zero"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"ced9fd2cdee5a"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c672aa48 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c6663178 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c66629f8 @error=nil, @total="0", @currency="GBP">, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c66012e8 @error=nil, @return_url="http://localhost:3000/orders/65/confirm", @cancel_url="http://localhost:3000/orders/65/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c65cc688 @base=#<Payment:0x007fa9c672b6c8 ...>, @messages={:"transactions[0].amount"=>["Amount cannot be zero"]}>, @request_id="ee7a0fda-090c-4057-8342-38c27654eac4", @header={}>
D, [2015-01-04T07:52:38.687378 #29890] DEBUG -- :   [1m[36m (6.8ms)[0m  [1mcommit transaction[0m
I, [2015-01-04T07:52:38.688558 #29890]  INFO -- : about to approve url
I, [2015-01-04T07:52:38.689465 #29890]  INFO -- : #<Payment:0x007fa9c672b6c8 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions[0].amount", "issue"=>"Amount cannot be zero"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"ced9fd2cdee5a"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c672aa48 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c6663178 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c66629f8 @error=nil, @total="0", @currency="GBP">, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c66012e8 @error=nil, @return_url="http://localhost:3000/orders/65/confirm", @cancel_url="http://localhost:3000/orders/65/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c65cc688 @base=#<Payment:0x007fa9c672b6c8 ...>, @messages={:"transactions[0].amount"=>["Amount cannot be zero"]}>, @request_id="ee7a0fda-090c-4057-8342-38c27654eac4", @header={}>
I, [2015-01-04T07:52:38.692170 #29890]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-04T07:52:38.694505 #29890]  INFO -- : Completed 302 Found in 4146ms (ActiveRecord: 12.5ms)
D, [2015-01-04T07:52:38.714355 #29890] DEBUG -- : 
D, [2015-01-04T07:52:38.714855 #29890] DEBUG -- : 
I, [2015-01-04T07:52:38.715572 #29890]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-04 07:52:38 +0000
I, [2015-01-04T07:52:38.739728 #29890]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-04T07:52:38.747110 #29890] DEBUG -- :   [1m[35mCart Load (0.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T07:52:38.760010 #29890] DEBUG -- :   [1m[36mProduct Load (0.8ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-04T07:52:38.764497 #29890]  INFO -- : Read fragment views/store/products/2-20141022062504570899000/a93d4e2e981ab3dfce98a095c3b6c059 (1.0ms)
I, [2015-01-04T07:52:38.765532 #29890]  INFO -- :   Rendered store/index.html.erb within layouts/application (9.8ms)
D, [2015-01-04T07:52:38.831579 #29890] DEBUG -- :   [1m[35mLineItem Exists (0.5ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 53]]
D, [2015-01-04T07:52:38.838316 #29890] DEBUG -- :   [1m[36mLineItem Load (0.4ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-04T07:52:38.840220 #29890]  INFO -- :   Rendered collection (0.2ms)
I, [2015-01-04T07:52:38.853086 #29890]  INFO -- :   Rendered carts/_cart.html.erb (18.1ms)
I, [2015-01-04T07:52:38.863586 #29890]  INFO -- : Completed 200 OK in 123ms (Views: 111.1ms | ActiveRecord: 2.3ms)
D, [2015-01-04T07:53:10.719138 #29890] DEBUG -- : 
D, [2015-01-04T07:53:10.721427 #29890] DEBUG -- : 
I, [2015-01-04T07:53:10.722309 #29890]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-04 07:53:10 +0000
I, [2015-01-04T07:53:10.742650 #29890]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T07:53:10.743831 #29890]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-04T07:53:10.753814 #29890] DEBUG -- :   [1m[35mCart Load (0.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T07:53:10.759422 #29890] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-04T07:53:10.770535 #29890] DEBUG -- :   [1m[35mLineItem Load (0.5ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 53]]
D, [2015-01-04T07:53:10.783949 #29890] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-04T07:53:10.787895 #29890] DEBUG -- :   [1m[35m (0.5ms)[0m  begin transaction
D, [2015-01-04T07:53:10.798553 #29890] DEBUG -- :   [1m[36mSQL (2.1ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 53], ["created_at", Sun, 04 Jan 2015 07:53:10 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7fa9c827b810,'0.1299E2',18(36)>], ["size", "extra small"], ["updated_at", Sun, 04 Jan 2015 07:53:10 UTC +00:00]]
D, [2015-01-04T07:53:10.808572 #29890] DEBUG -- :   [1m[35m (7.1ms)[0m  commit transaction
D, [2015-01-04T07:53:10.824546 #29890] DEBUG -- :   [1m[36mLineItem Load (0.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-04T07:53:10.838984 #29890]  INFO -- :   Rendered line_items/_line_item.html.erb (5.4ms)
I, [2015-01-04T07:53:10.852068 #29890]  INFO -- :   Rendered carts/_cart.html.erb (31.7ms)
I, [2015-01-04T07:53:10.853921 #29890]  INFO -- :   Rendered line_items/create.js.erb (37.6ms)
I, [2015-01-04T07:53:10.855525 #29890]  INFO -- : Completed 200 OK in 111ms (Views: 43.8ms | ActiveRecord: 12.6ms)
D, [2015-01-04T07:53:12.140549 #29890] DEBUG -- : 
D, [2015-01-04T07:53:12.140945 #29890] DEBUG -- : 
I, [2015-01-04T07:53:12.141898 #29890]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-04 07:53:12 +0000
I, [2015-01-04T07:53:12.161927 #29890]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T07:53:12.162582 #29890]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-04T07:53:12.170404 #29890] DEBUG -- :   [1m[35mCart Load (0.5ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T07:53:12.175922 #29890] DEBUG -- :   [1m[36mProduct Load (0.5ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-04T07:53:12.183944 #29890] DEBUG -- :   [1m[35mLineItem Load (0.5ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 53]]
D, [2015-01-04T07:53:12.198511 #29890] DEBUG -- :   [1m[36mProduct Load (0.5ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-04T07:53:12.202023 #29890] DEBUG -- :   [1m[35m (0.4ms)[0m  begin transaction
D, [2015-01-04T07:53:12.212195 #29890] DEBUG -- :   [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 53], ["created_at", Sun, 04 Jan 2015 07:53:12 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:7fa9c66f2f80,'0.1099E2',18(36)>], ["size", "extra small"], ["updated_at", Sun, 04 Jan 2015 07:53:12 UTC +00:00]]
D, [2015-01-04T07:53:12.222184 #29890] DEBUG -- :   [1m[35m (7.3ms)[0m  commit transaction
D, [2015-01-04T07:53:12.236285 #29890] DEBUG -- :   [1m[36mLineItem Load (0.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
D, [2015-01-04T07:53:12.252799 #29890] DEBUG -- :   [1m[35mProduct Load (0.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-04T07:53:12.263976 #29890]  INFO -- :   Rendered line_items/_line_item.html.erb (18.3ms)
I, [2015-01-04T07:53:12.276547 #29890]  INFO -- :   Rendered carts/_cart.html.erb (44.3ms)
I, [2015-01-04T07:53:12.278550 #29890]  INFO -- :   Rendered line_items/create.js.erb (49.1ms)
I, [2015-01-04T07:53:12.280236 #29890]  INFO -- : Completed 200 OK in 117ms (Views: 54.4ms | ActiveRecord: 12.7ms)
D, [2015-01-04T07:53:13.166735 #29890] DEBUG -- : 
D, [2015-01-04T07:53:13.167221 #29890] DEBUG -- : 
I, [2015-01-04T07:53:13.168025 #29890]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-04 07:53:13 +0000
I, [2015-01-04T07:53:13.190499 #29890]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T07:53:13.191062 #29890]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-04T07:53:13.199019 #29890] DEBUG -- :   [1m[36mCart Load (0.6ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-04T07:53:13.204707 #29890] DEBUG -- :   [1m[35mProduct Load (0.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-04T07:53:13.219172 #29890] DEBUG -- :   [1m[36mLineItem Load (0.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 53]]
D, [2015-01-04T07:53:13.225582 #29890] DEBUG -- :   [1m[35m (1.1ms)[0m  begin transaction
D, [2015-01-04T07:53:13.243155 #29890] DEBUG -- :   [1m[36mSQL (2.1ms)[0m  [1mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = 122[0m  [["quantity", 2], ["updated_at", Sun, 04 Jan 2015 07:53:13 UTC +00:00]]
D, [2015-01-04T07:53:13.271642 #29890] DEBUG -- :   [1m[35m (26.5ms)[0m  commit transaction
D, [2015-01-04T07:53:13.296383 #29890] DEBUG -- :   [1m[36mLineItem Load (0.7ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
D, [2015-01-04T07:53:13.321228 #29890] DEBUG -- :   [1m[35mProduct Load (0.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-04T07:53:13.334782 #29890] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
I, [2015-01-04T07:53:13.349338 #29890]  INFO -- :   Rendered line_items/_line_item.html.erb (47.7ms)
I, [2015-01-04T07:53:13.363081 #29890]  INFO -- :   Rendered carts/_cart.html.erb (71.0ms)
I, [2015-01-04T07:53:13.364865 #29890]  INFO -- :   Rendered line_items/create.js.erb (83.0ms)
I, [2015-01-04T07:53:13.366440 #29890]  INFO -- : Completed 200 OK in 175ms (Views: 88.1ms | ActiveRecord: 33.4ms)
D, [2015-01-04T07:53:15.373275 #29890] DEBUG -- : 
D, [2015-01-04T07:53:15.373785 #29890] DEBUG -- : 
I, [2015-01-04T07:53:15.374473 #29890]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-04 07:53:15 +0000
I, [2015-01-04T07:53:15.391324 #29890]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-04T07:53:15.398868 #29890] DEBUG -- :   [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
D, [2015-01-04T07:53:15.404279 #29890] DEBUG -- :   [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-04T07:53:15.409930 #29890] DEBUG -- :   [1m[35mCart Load (0.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T07:53:15.418755 #29890] DEBUG -- :   [1m[36mLineItem Load (0.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-04T07:53:15.427982 #29890]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-04T07:53:24.783268 #29890] DEBUG -- :   [1m[35m (0.7ms)[0m  begin transaction
D, [2015-01-04T07:53:24.793176 #29890] DEBUG -- :   [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Sun, 04 Jan 2015 07:53:24 UTC +00:00], ["updated_at", Sun, 04 Jan 2015 07:53:24 UTC +00:00]]
D, [2015-01-04T07:53:24.806288 #29890] DEBUG -- :   [1m[35mSQL (1.2ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 121  [["cart_id", nil], ["order_id", 66], ["updated_at", Sun, 04 Jan 2015 07:53:24 UTC +00:00]]
D, [2015-01-04T07:53:24.818206 #29890] DEBUG -- :   [1m[36mSQL (1.2ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 122[0m  [["cart_id", nil], ["order_id", 66], ["updated_at", Sun, 04 Jan 2015 07:53:24 UTC +00:00]]
I, [2015-01-04T07:53:24.819503 #29890]  INFO -- : about to @payment.create
D, [2015-01-04T07:53:26.941343 #29890] DEBUG -- :   [1m[35mProduct Load (0.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-04T07:53:26.950282 #29890] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
I, [2015-01-04T07:54:23.861238 #29890]  INFO -- : in order=
I, [2015-01-04T07:54:23.863579 #29890]  INFO -- : in payment.create
I, [2015-01-04T07:54:23.869178 #29890]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"34.97"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"2", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/66/confirm", "cancel_url"=>"http://localhost:3000/orders/66/cancel"}}
I, [2015-01-04T07:54:23.870516 #29890]  INFO -- : #<ActiveModel::Errors:0x007fa9c4d3adb8 @base=#<Payment:0x007fa9c8242b00 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c8241660 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c8120998 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c81203a8 @error=nil, @total="34.97", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c8119738 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c81125a0 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c8100210 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="2">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c8099f88 @error=nil, @return_url="http://localhost:3000/orders/66/confirm", @cancel_url="http://localhost:3000/orders/66/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c4d3adb8 ...>>, @messages={}>
I, [2015-01-04T07:54:23.871056 #29890]  INFO -- : got past invalid
I, [2015-01-04T07:54:23.891032 #29890]  INFO -- : PayPal-Request-Id: d4d7ed4d-6e75-4227-b804-c6b52a8e9f9e
I, [2015-01-04T07:54:23.891625 #29890]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-04T07:54:25.756030 #29890]  INFO -- : Response[201]: Created, Duration: 1.864s
I, [2015-01-04T07:54:25.761400 #29890]  INFO -- : back from super
I, [2015-01-04T07:54:25.769456 #29890]  INFO -- : {"id"=>"PAY-7VU64587E1860252TKSUPDMI", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"34.97", "details"=>{"subtotal"=>"34.97"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"2", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/66/confirm", "cancel_url"=>"http://localhost:3000/orders/66/cancel"}, "create_time"=>"2015-01-04T07:54:25Z", "update_time"=>"2015-01-04T07:54:25Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-7VU64587E1860252TKSUPDMI", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-852741119H290534D", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-7VU64587E1860252TKSUPDMI/execute", "rel"=>"execute", "method"=>"POST"}]}
I, [2015-01-04T07:54:25.807180 #29890]  INFO -- : @payment save just done
I, [2015-01-04T07:54:25.808660 #29890]  INFO -- : #<Payment:0x007fa9c8242b00 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c4c0a4c0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c4c09408 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c4c08e68 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c4c08170 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4c03a08 @error=nil, @total="34.97", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c4c021d0 @error=nil, @subtotal="34.97">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c4c00fd8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4bfbcb8 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4bf9d00 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="2">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c8099f88 @error=nil, @return_url="http://localhost:3000/orders/66/confirm", @cancel_url="http://localhost:3000/orders/66/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c4d3adb8 @base=#<Payment:0x007fa9c8242b00 ...>, @messages={}>, @request_id="d4d7ed4d-6e75-4227-b804-c6b52a8e9f9e", @header={}, @id="PAY-7VU64587E1860252TKSUPDMI", @create_time="2015-01-04T07:54:25Z", @update_time="2015-01-04T07:54:25Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4bf2dc0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7VU64587E1860252TKSUPDMI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4bf1290 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-852741119H290534D", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4beb958 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7VU64587E1860252TKSUPDMI/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T07:54:25.811457 #29890]  INFO -- : #<Payment:0x007fa9c8242b00 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c4c0a4c0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c4c09408 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c4c08e68 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c4c08170 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4c03a08 @error=nil, @total="34.97", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c4c021d0 @error=nil, @subtotal="34.97">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c4c00fd8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4bfbcb8 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4bf9d00 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="2">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c8099f88 @error=nil, @return_url="http://localhost:3000/orders/66/confirm", @cancel_url="http://localhost:3000/orders/66/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c4d3adb8 @base=#<Payment:0x007fa9c8242b00 ...>, @messages={}>, @request_id="d4d7ed4d-6e75-4227-b804-c6b52a8e9f9e", @header={}, @id="PAY-7VU64587E1860252TKSUPDMI", @create_time="2015-01-04T07:54:25Z", @update_time="2015-01-04T07:54:25Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4bf2dc0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7VU64587E1860252TKSUPDMI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4bf1290 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-852741119H290534D", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4beb958 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7VU64587E1860252TKSUPDMI/execute", @rel="execute", @method="POST">]>
D, [2015-01-04T07:54:25.821620 #29890] DEBUG -- :   [1m[35m (7.8ms)[0m  commit transaction
I, [2015-01-04T07:54:25.822756 #29890]  INFO -- : about to approve url
I, [2015-01-04T07:54:25.824083 #29890]  INFO -- : #<Payment:0x007fa9c8242b00 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c4c0a4c0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c4c09408 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c4c08e68 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c4c08170 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4c03a08 @error=nil, @total="34.97", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c4c021d0 @error=nil, @subtotal="34.97">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c4c00fd8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4bfbcb8 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4bf9d00 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="2">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c8099f88 @error=nil, @return_url="http://localhost:3000/orders/66/confirm", @cancel_url="http://localhost:3000/orders/66/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c4d3adb8 @base=#<Payment:0x007fa9c8242b00 ...>, @messages={}>, @request_id="d4d7ed4d-6e75-4227-b804-c6b52a8e9f9e", @header={}, @id="PAY-7VU64587E1860252TKSUPDMI", @create_time="2015-01-04T07:54:25Z", @update_time="2015-01-04T07:54:25Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4bf2dc0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7VU64587E1860252TKSUPDMI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4bf1290 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-852741119H290534D", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4beb958 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7VU64587E1860252TKSUPDMI/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T07:54:25.825304 #29890]  INFO -- : #<Payment:0x007fa9c8242b00 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c4c0a4c0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c4c09408 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c4c08e68 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c4c08170 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4c03a08 @error=nil, @total="34.97", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c4c021d0 @error=nil, @subtotal="34.97">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c4c00fd8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4bfbcb8 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4bf9d00 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="2">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c8099f88 @error=nil, @return_url="http://localhost:3000/orders/66/confirm", @cancel_url="http://localhost:3000/orders/66/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c4d3adb8 @base=#<Payment:0x007fa9c8242b00 ...>, @messages={}>, @request_id="d4d7ed4d-6e75-4227-b804-c6b52a8e9f9e", @header={}, @id="PAY-7VU64587E1860252TKSUPDMI", @create_time="2015-01-04T07:54:25Z", @update_time="2015-01-04T07:54:25Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4bf2dc0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7VU64587E1860252TKSUPDMI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4bf1290 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-852741119H290534D", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4beb958 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7VU64587E1860252TKSUPDMI/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T07:54:25.825892 #29890]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-852741119H290534D
I, [2015-01-04T07:54:25.827163 #29890]  INFO -- : #<Payment:0x007fa9c8242b00 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c4c0a4c0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c4c09408 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c4c08e68 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c4c08170 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4c03a08 @error=nil, @total="34.97", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c4c021d0 @error=nil, @subtotal="34.97">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c4c00fd8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4bfbcb8 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4bf9d00 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="2">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c8099f88 @error=nil, @return_url="http://localhost:3000/orders/66/confirm", @cancel_url="http://localhost:3000/orders/66/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c4d3adb8 @base=#<Payment:0x007fa9c8242b00 ...>, @messages={}>, @request_id="d4d7ed4d-6e75-4227-b804-c6b52a8e9f9e", @header={}, @id="PAY-7VU64587E1860252TKSUPDMI", @create_time="2015-01-04T07:54:25Z", @update_time="2015-01-04T07:54:25Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4bf2dc0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7VU64587E1860252TKSUPDMI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4bf1290 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-852741119H290534D", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c4beb958 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7VU64587E1860252TKSUPDMI/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T07:54:25.828954 #29890]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-852741119H290534D
I, [2015-01-04T07:54:25.831679 #29890]  INFO -- : Completed 403 Forbidden in 70439ms (ActiveRecord: 16.1ms)
D, [2015-01-04T07:56:43.139188 #29890] DEBUG -- : 
D, [2015-01-04T07:56:43.154588 #29890] DEBUG -- : 
I, [2015-01-04T07:56:43.156057 #29890]  INFO -- : Started GET "/orders/66/confirm?paymentId=PAY-7VU64587E1860252TKSUPDMI&token=EC-852741119H290534D&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-04 07:56:43 +0000
I, [2015-01-04T07:56:43.309026 #29890]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-04T07:56:43.310551 #29890]  INFO -- :   Parameters: {"paymentId"=>"PAY-7VU64587E1860252TKSUPDMI", "token"=>"EC-852741119H290534D", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"66"}
D, [2015-01-04T07:56:43.322392 #29890] DEBUG -- :   [1m[36mUser Load (3.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
D, [2015-01-04T07:56:43.328722 #29890] DEBUG -- :   [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-04T07:56:43.334966 #29890] DEBUG -- :   [1m[36mOrder Load (0.9ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "66"]]
I, [2015-01-04T07:56:51.640725 #29890]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-7VU64587E1860252TKSUPDMI
I, [2015-01-04T07:56:53.412549 #29890]  INFO -- : Response[200]: OK, Duration: 1.771s
I, [2015-01-04T07:57:10.740726 #29890]  INFO -- : Completed 500 Internal Server Error in 27428ms
F, [2015-01-04T07:57:10.751289 #29890] FATAL -- : 
NoMethodError (undefined method `error' for nil:NilClass):
  app/models/order.rb:86:in `confirm'
  app/controllers/orders_controller.rb:96:in `confirm'


I, [2015-01-04T07:57:10.862865 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.2ms)
I, [2015-01-04T07:57:10.877781 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (7.0ms)
I, [2015-01-04T07:57:10.891260 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (5.1ms)
I, [2015-01-04T07:57:10.892321 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (53.5ms)
D, [2015-01-04T07:57:38.731468 #29890] DEBUG -- : 
D, [2015-01-04T07:57:38.732043 #29890] DEBUG -- : 
I, [2015-01-04T07:57:38.733670 #29890]  INFO -- : Started GET "/orders/66/confirm?paymentId=PAY-7VU64587E1860252TKSUPDMI&token=EC-852741119H290534D&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-04 07:57:38 +0000
I, [2015-01-04T07:57:40.218475 #29890]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-04T07:57:40.219251 #29890]  INFO -- :   Parameters: {"paymentId"=>"PAY-7VU64587E1860252TKSUPDMI", "token"=>"EC-852741119H290534D", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"66"}
D, [2015-01-04T07:57:40.254716 #29890] DEBUG -- :   [1m[35mUser Load (1.1ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
D, [2015-01-04T07:57:40.316007 #29890] DEBUG -- :   [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-04T07:57:40.353058 #29890] DEBUG -- :   [1m[35mOrder Load (1.3ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "66"]]
I, [2015-01-04T07:58:10.219253 #29890]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-7VU64587E1860252TKSUPDMI
I, [2015-01-04T07:58:11.650652 #29890]  INFO -- : Response[200]: OK, Duration: 1.403s
I, [2015-01-04T07:58:14.932438 #29890]  INFO -- : Completed 500 Internal Server Error in 34712ms
F, [2015-01-04T07:58:14.943858 #29890] FATAL -- : 
NoMethodError (undefined method `error' for nil:NilClass):
  app/models/order.rb:86:in `confirm'
  app/controllers/orders_controller.rb:96:in `confirm'


I, [2015-01-04T07:58:15.045726 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.3ms)
I, [2015-01-04T07:58:15.060874 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (7.0ms)
I, [2015-01-04T07:58:15.074339 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (5.2ms)
I, [2015-01-04T07:58:15.075334 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (46.5ms)
D, [2015-01-04T07:58:15.081173 #29890] DEBUG -- : 
D, [2015-01-04T07:58:15.083004 #29890] DEBUG -- : 
I, [2015-01-04T07:58:15.083643 #29890]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-04 07:58:15 +0000
I, [2015-01-04T07:58:15.121519 #29890]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-04T07:58:15.152192 #29890] DEBUG -- :   [1m[36mCart Load (0.7ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-04T07:58:15.257248 #29890] DEBUG -- :   [1m[35mProduct Load (0.9ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-04T07:58:15.331103 #29890]  INFO -- : Read fragment views/store/products/2-20141022062504570899000/a93d4e2e981ab3dfce98a095c3b6c059 (10.8ms)
I, [2015-01-04T07:58:15.332235 #29890]  INFO -- :   Rendered store/index.html.erb within layouts/application (80.0ms)
D, [2015-01-04T07:58:15.421596 #29890] DEBUG -- :   [1m[36mLineItem Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 53]]
D, [2015-01-04T07:58:15.461361 #29890] DEBUG -- :   [1m[35mLineItem Load (1.1ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
I, [2015-01-04T07:58:15.465313 #29890]  INFO -- :   Rendered collection (0.5ms)
I, [2015-01-04T07:58:15.493693 #29890]  INFO -- :   Rendered carts/_cart.html.erb (38.3ms)
I, [2015-01-04T07:58:15.506436 #29890]  INFO -- : Completed 200 OK in 384ms (Views: 292.7ms | ActiveRecord: 8.8ms)
D, [2015-01-04T07:58:15.603190 #29890] DEBUG -- : 
D, [2015-01-04T07:58:15.660280 #29890] DEBUG -- : 
I, [2015-01-04T07:58:15.661364 #29890]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-04 07:58:15 +0000
D, [2015-01-04T07:58:15.695363 #29890] DEBUG -- : 
D, [2015-01-04T07:58:15.695820 #29890] DEBUG -- : 
I, [2015-01-04T07:58:15.696943 #29890]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-04 07:58:15 +0000
D, [2015-01-04T07:58:15.732023 #29890] DEBUG -- : 
D, [2015-01-04T07:58:15.732564 #29890] DEBUG -- : 
I, [2015-01-04T07:58:15.733585 #29890]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-04 07:58:15 +0000
D, [2015-01-04T07:58:15.770244 #29890] DEBUG -- : 
D, [2015-01-04T07:58:15.770676 #29890] DEBUG -- : 
I, [2015-01-04T07:58:15.771697 #29890]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-04 07:58:15 +0000
D, [2015-01-04T07:58:15.794117 #29890] DEBUG -- : 
D, [2015-01-04T07:58:15.794685 #29890] DEBUG -- : 
I, [2015-01-04T07:58:15.795773 #29890]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-04 07:58:15 +0000
D, [2015-01-04T07:58:15.812625 #29890] DEBUG -- : 
D, [2015-01-04T07:58:15.813150 #29890] DEBUG -- : 
I, [2015-01-04T07:58:15.814293 #29890]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-04 07:58:15 +0000
D, [2015-01-04T07:58:15.832759 #29890] DEBUG -- : 
D, [2015-01-04T07:58:15.833209 #29890] DEBUG -- : 
I, [2015-01-04T07:58:15.834321 #29890]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-04 07:58:15 +0000
D, [2015-01-04T07:58:15.852316 #29890] DEBUG -- : 
D, [2015-01-04T07:58:15.852890 #29890] DEBUG -- : 
I, [2015-01-04T07:58:15.854007 #29890]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-04 07:58:15 +0000
D, [2015-01-04T07:58:15.872325 #29890] DEBUG -- : 
D, [2015-01-04T07:58:15.872865 #29890] DEBUG -- : 
I, [2015-01-04T07:58:15.873872 #29890]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-04 07:58:15 +0000
D, [2015-01-04T07:58:15.900874 #29890] DEBUG -- : 
D, [2015-01-04T07:58:15.920658 #29890] DEBUG -- : 
I, [2015-01-04T07:58:15.930351 #29890]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-04 07:58:15 +0000
D, [2015-01-04T07:58:15.956072 #29890] DEBUG -- : 
D, [2015-01-04T07:58:15.956666 #29890] DEBUG -- : 
I, [2015-01-04T07:58:15.959311 #29890]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-04 07:58:15 +0000
D, [2015-01-04T07:58:15.980817 #29890] DEBUG -- : 
D, [2015-01-04T07:58:15.981332 #29890] DEBUG -- : 
I, [2015-01-04T07:58:15.982362 #29890]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-04 07:58:15 +0000
D, [2015-01-04T07:58:16.028577 #29890] DEBUG -- : 
D, [2015-01-04T07:58:16.037301 #29890] DEBUG -- : 
I, [2015-01-04T07:58:16.038365 #29890]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-04 07:58:16 +0000
D, [2015-01-04T07:58:16.054736 #29890] DEBUG -- : 
D, [2015-01-04T07:58:16.055874 #29890] DEBUG -- : 
I, [2015-01-04T07:58:16.057042 #29890]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-04 07:58:16 +0000
D, [2015-01-04T07:58:16.092881 #29890] DEBUG -- : 
D, [2015-01-04T07:58:16.093426 #29890] DEBUG -- : 
I, [2015-01-04T07:58:16.094586 #29890]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-04 07:58:16 +0000
D, [2015-01-04T07:58:16.114181 #29890] DEBUG -- : 
D, [2015-01-04T07:58:16.114750 #29890] DEBUG -- : 
I, [2015-01-04T07:58:16.115850 #29890]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-04 07:58:16 +0000
D, [2015-01-04T07:58:16.142491 #29890] DEBUG -- : 
D, [2015-01-04T07:58:16.143053 #29890] DEBUG -- : 
I, [2015-01-04T07:58:16.144151 #29890]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-04 07:58:16 +0000
D, [2015-01-04T07:58:16.163881 #29890] DEBUG -- : 
D, [2015-01-04T07:58:16.164414 #29890] DEBUG -- : 
I, [2015-01-04T07:58:16.165476 #29890]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-04 07:58:16 +0000
D, [2015-01-04T07:58:16.192393 #29890] DEBUG -- : 
D, [2015-01-04T07:58:16.192913 #29890] DEBUG -- : 
I, [2015-01-04T07:58:16.193979 #29890]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-04 07:58:16 +0000
D, [2015-01-04T07:58:16.270129 #29890] DEBUG -- : 
D, [2015-01-04T07:58:16.270753 #29890] DEBUG -- : 
I, [2015-01-04T07:58:16.276645 #29890]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-04 07:58:16 +0000
D, [2015-01-04T07:58:16.310552 #29890] DEBUG -- : 
D, [2015-01-04T07:58:16.311105 #29890] DEBUG -- : 
I, [2015-01-04T07:58:16.312221 #29890]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-04 07:58:16 +0000
D, [2015-01-04T07:58:16.357451 #29890] DEBUG -- : 
D, [2015-01-04T07:58:16.357989 #29890] DEBUG -- : 
I, [2015-01-04T07:58:16.358970 #29890]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-04 07:58:16 +0000
D, [2015-01-04T07:58:16.376113 #29890] DEBUG -- : 
D, [2015-01-04T07:58:16.376617 #29890] DEBUG -- : 
I, [2015-01-04T07:58:16.377689 #29890]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-04 07:58:16 +0000
D, [2015-01-04T07:58:16.395480 #29890] DEBUG -- : 
D, [2015-01-04T07:58:16.395989 #29890] DEBUG -- : 
I, [2015-01-04T07:58:16.397029 #29890]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-04 07:58:16 +0000
D, [2015-01-04T07:58:16.425783 #29890] DEBUG -- : 
D, [2015-01-04T07:58:16.426368 #29890] DEBUG -- : 
I, [2015-01-04T07:58:16.427576 #29890]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-04 07:58:16 +0000
D, [2015-01-04T07:58:16.447234 #29890] DEBUG -- : 
D, [2015-01-04T07:58:16.447775 #29890] DEBUG -- : 
I, [2015-01-04T07:58:16.449067 #29890]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-04 07:58:16 +0000
D, [2015-01-04T07:58:16.466688 #29890] DEBUG -- : 
D, [2015-01-04T07:58:16.467224 #29890] DEBUG -- : 
I, [2015-01-04T07:58:16.468006 #29890]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-04 07:58:16 +0000
D, [2015-01-04T07:58:16.513004 #29890] DEBUG -- : 
D, [2015-01-04T07:58:16.513555 #29890] DEBUG -- : 
I, [2015-01-04T07:58:16.531343 #29890]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-04 07:58:16 +0000
D, [2015-01-04T07:58:16.558724 #29890] DEBUG -- : 
D, [2015-01-04T07:58:16.559271 #29890] DEBUG -- : 
I, [2015-01-04T07:58:16.561035 #29890]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-04 07:58:16 +0000
D, [2015-01-04T07:58:20.627353 #29890] DEBUG -- : 
D, [2015-01-04T07:58:20.628183 #29890] DEBUG -- : 
I, [2015-01-04T07:58:20.629609 #29890]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-04 07:58:20 +0000
I, [2015-01-04T07:58:20.709303 #29890]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T07:58:20.710056 #29890]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-04T07:58:20.720735 #29890] DEBUG -- :   [1m[36mCart Load (0.6ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-04T07:58:20.728110 #29890] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-04T07:58:20.739391 #29890] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 53]]
D, [2015-01-04T07:58:20.837561 #29890] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-04T07:58:20.843047 #29890] DEBUG -- :   [1m[36m (0.6ms)[0m  [1mbegin transaction[0m
D, [2015-01-04T07:58:20.868708 #29890] DEBUG -- :   [1m[35mSQL (10.2ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 53], ["created_at", Sun, 04 Jan 2015 07:58:20 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7fa9c85ac408,'0.1299E2',18(36)>], ["size", "extra small"], ["updated_at", Sun, 04 Jan 2015 07:58:20 UTC +00:00]]
D, [2015-01-04T07:58:20.875493 #29890] DEBUG -- :   [1m[36m (3.1ms)[0m  [1mcommit transaction[0m
D, [2015-01-04T07:58:20.915551 #29890] DEBUG -- :   [1m[35mLineItem Load (0.8ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
I, [2015-01-04T07:58:20.949320 #29890]  INFO -- :   Rendered line_items/_line_item.html.erb (8.6ms)
I, [2015-01-04T07:58:20.966675 #29890]  INFO -- :   Rendered carts/_cart.html.erb (56.8ms)
I, [2015-01-04T07:58:20.968940 #29890]  INFO -- :   Rendered line_items/create.js.erb (63.2ms)
I, [2015-01-04T07:58:20.970974 #29890]  INFO -- : Completed 200 OK in 260ms (Views: 90.6ms | ActiveRecord: 18.3ms)
D, [2015-01-04T07:58:22.017361 #29890] DEBUG -- : 
D, [2015-01-04T07:58:22.017967 #29890] DEBUG -- : 
I, [2015-01-04T07:58:22.019165 #29890]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-04 07:58:22 +0000
I, [2015-01-04T07:58:22.053872 #29890]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T07:58:22.054584 #29890]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-04T07:58:22.065955 #29890] DEBUG -- :   [1m[36mCart Load (0.8ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-04T07:58:22.078357 #29890] DEBUG -- :   [1m[35mProduct Load (0.8ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-04T07:58:22.089585 #29890] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 53]]
D, [2015-01-04T07:58:22.102675 #29890] DEBUG -- :   [1m[35mProduct Load (0.7ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-04T07:58:22.108012 #29890] DEBUG -- :   [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
D, [2015-01-04T07:58:22.121428 #29890] DEBUG -- :   [1m[35mSQL (2.3ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 53], ["created_at", Sun, 04 Jan 2015 07:58:22 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:7fa9c81c2e28,'0.1099E2',18(36)>], ["size", "extra small"], ["updated_at", Sun, 04 Jan 2015 07:58:22 UTC +00:00]]
D, [2015-01-04T07:58:22.132528 #29890] DEBUG -- :   [1m[36m (7.5ms)[0m  [1mcommit transaction[0m
D, [2015-01-04T07:58:22.153469 #29890] DEBUG -- :   [1m[35mLineItem Load (0.8ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
D, [2015-01-04T07:58:22.176882 #29890] DEBUG -- :   [1m[36mProduct Load (0.8ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-04T07:58:22.191534 #29890]  INFO -- :   Rendered line_items/_line_item.html.erb (24.0ms)
I, [2015-01-04T07:58:22.207865 #29890]  INFO -- :   Rendered carts/_cart.html.erb (59.6ms)
I, [2015-01-04T07:58:22.210127 #29890]  INFO -- :   Rendered line_items/create.js.erb (67.2ms)
I, [2015-01-04T07:58:22.212136 #29890]  INFO -- : Completed 200 OK in 156ms (Views: 74.7ms | ActiveRecord: 15.1ms)
D, [2015-01-04T07:58:22.420475 #29890] DEBUG -- : 
D, [2015-01-04T07:58:22.420983 #29890] DEBUG -- : 
I, [2015-01-04T07:58:22.422120 #29890]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-04 07:58:22 +0000
I, [2015-01-04T07:58:22.441730 #29890]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T07:58:22.446000 #29890]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-04T07:58:22.458320 #29890] DEBUG -- :   [1m[35mCart Load (1.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T07:58:22.465975 #29890] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-04T07:58:22.478231 #29890] DEBUG -- :   [1m[35mLineItem Load (0.7ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 53]]
D, [2015-01-04T07:58:22.491403 #29890] DEBUG -- :   [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
D, [2015-01-04T07:58:22.508228 #29890] DEBUG -- :   [1m[35mSQL (2.0ms)[0m  UPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = 124  [["quantity", 2], ["updated_at", Sun, 04 Jan 2015 07:58:22 UTC +00:00]]
D, [2015-01-04T07:58:22.525009 #29890] DEBUG -- :   [1m[36m (6.3ms)[0m  [1mcommit transaction[0m
D, [2015-01-04T07:58:22.545298 #29890] DEBUG -- :   [1m[35mLineItem Load (0.9ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
D, [2015-01-04T07:58:22.570939 #29890] DEBUG -- :   [1m[36mProduct Load (0.8ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-04T07:58:22.595934 #29890] DEBUG -- :   [1m[35mProduct Load (0.7ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
I, [2015-01-04T07:58:22.604457 #29890]  INFO -- :   Rendered line_items/_line_item.html.erb (43.4ms)
I, [2015-01-04T07:58:22.636978 #29890]  INFO -- :   Rendered carts/_cart.html.erb (96.8ms)
I, [2015-01-04T07:58:22.639438 #29890]  INFO -- :   Rendered line_items/create.js.erb (102.9ms)
I, [2015-01-04T07:58:22.641698 #29890]  INFO -- : Completed 200 OK in 194ms (Views: 110.6ms | ActiveRecord: 14.1ms)
D, [2015-01-04T07:58:24.760729 #29890] DEBUG -- : 
D, [2015-01-04T07:58:24.761334 #29890] DEBUG -- : 
I, [2015-01-04T07:58:24.762528 #29890]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-04 07:58:24 +0000
I, [2015-01-04T07:58:24.785295 #29890]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T07:58:24.786080 #29890]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-04T07:58:24.797139 #29890] DEBUG -- :   [1m[36mCart Load (0.8ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-04T07:58:24.812607 #29890] DEBUG -- :   [1m[35mProduct Load (0.7ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-04T07:58:24.823540 #29890] DEBUG -- :   [1m[36mLineItem Load (0.7ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 53]]
D, [2015-01-04T07:58:24.828383 #29890] DEBUG -- :   [1m[35m (0.6ms)[0m  begin transaction
D, [2015-01-04T07:58:24.840811 #29890] DEBUG -- :   [1m[36mSQL (1.6ms)[0m  [1mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = 123[0m  [["quantity", 2], ["updated_at", Sun, 04 Jan 2015 07:58:24 UTC +00:00]]
D, [2015-01-04T07:58:24.849502 #29890] DEBUG -- :   [1m[35m (6.6ms)[0m  commit transaction
D, [2015-01-04T07:58:24.870309 #29890] DEBUG -- :   [1m[36mLineItem Load (0.8ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
D, [2015-01-04T07:58:24.885895 #29890] DEBUG -- :   [1m[35mProduct Load (0.7ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-04T07:58:24.902276 #29890] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
I, [2015-01-04T07:58:24.911217 #29890]  INFO -- :   Rendered line_items/_line_item.html.erb (34.6ms)
I, [2015-01-04T07:58:24.928793 #29890]  INFO -- :   Rendered carts/_cart.html.erb (63.5ms)
I, [2015-01-04T07:58:24.931171 #29890]  INFO -- :   Rendered line_items/create.js.erb (70.3ms)
I, [2015-01-04T07:58:24.933506 #29890]  INFO -- : Completed 200 OK in 146ms (Views: 78.5ms | ActiveRecord: 13.1ms)
D, [2015-01-04T07:58:25.435849 #29890] DEBUG -- : 
D, [2015-01-04T07:58:25.436442 #29890] DEBUG -- : 
I, [2015-01-04T07:58:25.437613 #29890]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-04 07:58:25 +0000
I, [2015-01-04T07:58:25.461519 #29890]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T07:58:25.462268 #29890]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-04T07:58:25.474721 #29890] DEBUG -- :   [1m[35mCart Load (0.7ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T07:58:25.483171 #29890] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-04T07:58:25.502494 #29890] DEBUG -- :   [1m[35mLineItem Load (0.9ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 53]]
D, [2015-01-04T07:58:25.508434 #29890] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-04T07:58:25.522455 #29890] DEBUG -- :   [1m[35mSQL (1.9ms)[0m  UPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = 123  [["quantity", 3], ["updated_at", Sun, 04 Jan 2015 07:58:25 UTC +00:00]]
D, [2015-01-04T07:58:25.529252 #29890] DEBUG -- :   [1m[36m (3.8ms)[0m  [1mcommit transaction[0m
D, [2015-01-04T07:58:25.551464 #29890] DEBUG -- :   [1m[35mLineItem Load (1.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
D, [2015-01-04T07:58:25.568484 #29890] DEBUG -- :   [1m[36mProduct Load (0.8ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-04T07:58:25.588537 #29890] DEBUG -- :   [1m[35mProduct Load (0.7ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
I, [2015-01-04T07:58:25.598459 #29890]  INFO -- :   Rendered line_items/_line_item.html.erb (39.6ms)
I, [2015-01-04T07:58:25.638898 #29890]  INFO -- :   Rendered carts/_cart.html.erb (86.6ms)
I, [2015-01-04T07:58:25.641487 #29890]  INFO -- :   Rendered line_items/create.js.erb (102.0ms)
I, [2015-01-04T07:58:25.644302 #29890]  INFO -- : Completed 200 OK in 181ms (Views: 108.3ms | ActiveRecord: 11.4ms)
D, [2015-01-04T07:58:25.656869 #29890] DEBUG -- : 
D, [2015-01-04T07:58:25.657350 #29890] DEBUG -- : 
I, [2015-01-04T07:58:25.658502 #29890]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-04 07:58:25 +0000
I, [2015-01-04T07:58:25.685361 #29890]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T07:58:25.687519 #29890]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-04T07:58:25.702287 #29890] DEBUG -- :   [1m[36mCart Load (4.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-04T07:58:25.711266 #29890] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-04T07:58:25.727400 #29890] DEBUG -- :   [1m[36mLineItem Load (1.2ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 53]]
D, [2015-01-04T07:58:25.732428 #29890] DEBUG -- :   [1m[35m (0.6ms)[0m  begin transaction
D, [2015-01-04T07:58:25.747724 #29890] DEBUG -- :   [1m[36mSQL (1.8ms)[0m  [1mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = 123[0m  [["quantity", 4], ["updated_at", Sun, 04 Jan 2015 07:58:25 UTC +00:00]]
D, [2015-01-04T07:58:25.753286 #29890] DEBUG -- :   [1m[35m (3.2ms)[0m  commit transaction
D, [2015-01-04T07:58:25.776892 #29890] DEBUG -- :   [1m[36mLineItem Load (1.2ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
D, [2015-01-04T07:58:25.794284 #29890] DEBUG -- :   [1m[35mProduct Load (0.8ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-04T07:58:25.830827 #29890] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
I, [2015-01-04T07:58:25.841678 #29890]  INFO -- :   Rendered line_items/_line_item.html.erb (58.1ms)
I, [2015-01-04T07:58:25.859888 #29890]  INFO -- :   Rendered carts/_cart.html.erb (92.0ms)
I, [2015-01-04T07:58:25.862379 #29890]  INFO -- :   Rendered line_items/create.js.erb (98.3ms)
I, [2015-01-04T07:58:25.865066 #29890]  INFO -- : Completed 200 OK in 176ms (Views: 105.2ms | ActiveRecord: 14.7ms)
D, [2015-01-04T07:58:25.890785 #29890] DEBUG -- : 
D, [2015-01-04T07:58:25.891389 #29890] DEBUG -- : 
I, [2015-01-04T07:58:25.892578 #29890]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-04 07:58:25 +0000
I, [2015-01-04T07:58:25.922215 #29890]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T07:58:25.923136 #29890]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-04T07:58:25.933363 #29890] DEBUG -- :   [1m[35mCart Load (0.7ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T07:58:25.953550 #29890] DEBUG -- :   [1m[36mProduct Load (0.7ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-04T07:58:25.968256 #29890] DEBUG -- :   [1m[35mLineItem Load (0.8ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 53]]
D, [2015-01-04T07:58:25.974184 #29890] DEBUG -- :   [1m[36m (0.8ms)[0m  [1mbegin transaction[0m
D, [2015-01-04T07:58:25.991753 #29890] DEBUG -- :   [1m[35mSQL (1.8ms)[0m  UPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = 123  [["quantity", 5], ["updated_at", Sun, 04 Jan 2015 07:58:25 UTC +00:00]]
D, [2015-01-04T07:58:26.003311 #29890] DEBUG -- :   [1m[36m (8.5ms)[0m  [1mcommit transaction[0m
D, [2015-01-04T07:58:26.028310 #29890] DEBUG -- :   [1m[35mLineItem Load (1.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
D, [2015-01-04T07:58:26.045377 #29890] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-04T07:58:26.066253 #29890] DEBUG -- :   [1m[35mProduct Load (0.8ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
I, [2015-01-04T07:58:26.076488 #29890]  INFO -- :   Rendered line_items/_line_item.html.erb (41.7ms)
I, [2015-01-04T07:58:26.095958 #29890]  INFO -- :   Rendered carts/_cart.html.erb (73.7ms)
I, [2015-01-04T07:58:26.098430 #29890]  INFO -- :   Rendered line_items/create.js.erb (80.8ms)
I, [2015-01-04T07:58:26.103529 #29890]  INFO -- : Completed 200 OK in 179ms (Views: 88.5ms | ActiveRecord: 17.0ms)
D, [2015-01-04T07:58:27.947473 #29890] DEBUG -- : 
D, [2015-01-04T07:58:27.948122 #29890] DEBUG -- : 
I, [2015-01-04T07:58:27.949350 #29890]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-04 07:58:27 +0000
I, [2015-01-04T07:58:27.982879 #29890]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-04T07:58:27.992595 #29890] DEBUG -- :   [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
D, [2015-01-04T07:58:27.999489 #29890] DEBUG -- :   [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-04T07:58:28.006280 #29890] DEBUG -- :   [1m[36mCart Load (0.7ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-04T07:58:28.017837 #29890] DEBUG -- :   [1m[35mLineItem Load (0.7ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
I, [2015-01-04T07:58:28.035364 #29890]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-04T07:58:40.396212 #29890] DEBUG -- :   [1m[36m (0.8ms)[0m  [1mbegin transaction[0m
D, [2015-01-04T07:58:40.412805 #29890] DEBUG -- :   [1m[35mSQL (2.4ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Sun, 04 Jan 2015 07:58:40 UTC +00:00], ["updated_at", Sun, 04 Jan 2015 07:58:40 UTC +00:00]]
D, [2015-01-04T07:58:40.429457 #29890] DEBUG -- :   [1m[36mSQL (1.7ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 123[0m  [["cart_id", nil], ["order_id", 67], ["updated_at", Sun, 04 Jan 2015 07:58:40 UTC +00:00]]
D, [2015-01-04T07:58:40.445473 #29890] DEBUG -- :   [1m[35mSQL (1.5ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 124  [["cart_id", nil], ["order_id", 67], ["updated_at", Sun, 04 Jan 2015 07:58:40 UTC +00:00]]
I, [2015-01-04T07:58:40.447404 #29890]  INFO -- : about to @payment.create
D, [2015-01-04T07:58:42.804171 #29890] DEBUG -- :   [1m[36mProduct Load (0.8ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-04T07:58:42.818145 #29890] DEBUG -- :   [1m[35mProduct Load (1.4ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
I, [2015-01-04T07:58:45.449773 #29890]  INFO -- : in order=
I, [2015-01-04T07:58:45.452265 #29890]  INFO -- : in payment.create
I, [2015-01-04T07:58:45.461005 #29890]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"86.93"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"5", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"2", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/67/confirm", "cancel_url"=>"http://localhost:3000/orders/67/cancel"}}
I, [2015-01-04T07:58:45.463640 #29890]  INFO -- : #<ActiveModel::Errors:0x007fa9c66b28e0 @base=#<Payment:0x007fa9c4ba2a78 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c4ba1538 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c4ac8738 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4ac8148 @error=nil, @total="86.93", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c4a30fc8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c4a2d1c0 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="5">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c6790078 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="2">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c6703cb8 @error=nil, @return_url="http://localhost:3000/orders/67/confirm", @cancel_url="http://localhost:3000/orders/67/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c66b28e0 ...>>, @messages={}>
I, [2015-01-04T07:58:45.464428 #29890]  INFO -- : got past invalid
I, [2015-01-04T07:58:45.490479 #29890]  INFO -- : PayPal-Request-Id: cf04c820-aefb-4dd0-948a-bce33b0df2f5
I, [2015-01-04T07:58:45.491268 #29890]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-04T07:58:46.882800 #29890]  INFO -- : Response[201]: Created, Duration: 1.391s
I, [2015-01-04T07:58:46.889722 #29890]  INFO -- : back from super
I, [2015-01-04T07:58:46.899740 #29890]  INFO -- : {"id"=>"PAY-8JL12768JG3964357KSUPFNQ", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"86.93", "details"=>{"subtotal"=>"86.93"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"5", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"2", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/67/confirm", "cancel_url"=>"http://localhost:3000/orders/67/cancel"}, "create_time"=>"2015-01-04T07:58:46Z", "update_time"=>"2015-01-04T07:58:46Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-8JL12768JG3964357KSUPFNQ", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-164799682G513091B", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-8JL12768JG3964357KSUPFNQ/execute", "rel"=>"execute", "method"=>"POST"}]}
I, [2015-01-04T07:58:46.950679 #29890]  INFO -- : @payment save just done
I, [2015-01-04T07:58:46.952443 #29890]  INFO -- : #<Payment:0x007fa9c4ba2a78 @error=nil, @id="PAY-8JL12768JG3964357KSUPFNQ", @create_time="2015-01-04T07:58:46Z", @update_time="2015-01-04T07:58:46Z", @state="created", @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c64e8938 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c64e3a50 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c64e3370 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c64e23f8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c64e1d40 @error=nil, @total="86.93", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c64e0be8 @error=nil, @subtotal="86.93">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c64db878 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c64dab80 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="5">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c64d8998 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="2">]>, @related_resources=[]>], @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c64d0ae0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8JL12768JG3964357KSUPFNQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c64caff0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-164799682G513091B", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c64c94e8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8JL12768JG3964357KSUPFNQ/execute", @rel="execute", @method="POST">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c6703cb8 @error=nil, @return_url="http://localhost:3000/orders/67/confirm", @cancel_url="http://localhost:3000/orders/67/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c66b28e0 @base=#<Payment:0x007fa9c4ba2a78 ...>, @messages={}>, @request_id="cf04c820-aefb-4dd0-948a-bce33b0df2f5", @header={}>
I, [2015-01-04T07:58:46.954137 #29890]  INFO -- : #<Payment:0x007fa9c4ba2a78 @error=nil, @id="PAY-8JL12768JG3964357KSUPFNQ", @create_time="2015-01-04T07:58:46Z", @update_time="2015-01-04T07:58:46Z", @state="created", @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c64e8938 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c64e3a50 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c64e3370 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c64e23f8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c64e1d40 @error=nil, @total="86.93", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c64e0be8 @error=nil, @subtotal="86.93">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c64db878 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c64dab80 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="5">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c64d8998 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="2">]>, @related_resources=[]>], @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c64d0ae0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8JL12768JG3964357KSUPFNQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c64caff0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-164799682G513091B", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c64c94e8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8JL12768JG3964357KSUPFNQ/execute", @rel="execute", @method="POST">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c6703cb8 @error=nil, @return_url="http://localhost:3000/orders/67/confirm", @cancel_url="http://localhost:3000/orders/67/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c66b28e0 @base=#<Payment:0x007fa9c4ba2a78 ...>, @messages={}>, @request_id="cf04c820-aefb-4dd0-948a-bce33b0df2f5", @header={}>
D, [2015-01-04T07:58:46.966114 #29890] DEBUG -- :   [1m[36m (8.2ms)[0m  [1mcommit transaction[0m
I, [2015-01-04T07:58:46.968776 #29890]  INFO -- : about to approve url
I, [2015-01-04T07:58:46.970822 #29890]  INFO -- : #<Payment:0x007fa9c4ba2a78 @error=nil, @id="PAY-8JL12768JG3964357KSUPFNQ", @create_time="2015-01-04T07:58:46Z", @update_time="2015-01-04T07:58:46Z", @state="created", @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c64e8938 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c64e3a50 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c64e3370 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c64e23f8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c64e1d40 @error=nil, @total="86.93", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c64e0be8 @error=nil, @subtotal="86.93">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c64db878 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c64dab80 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="5">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c64d8998 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="2">]>, @related_resources=[]>], @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c64d0ae0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8JL12768JG3964357KSUPFNQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c64caff0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-164799682G513091B", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c64c94e8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8JL12768JG3964357KSUPFNQ/execute", @rel="execute", @method="POST">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c6703cb8 @error=nil, @return_url="http://localhost:3000/orders/67/confirm", @cancel_url="http://localhost:3000/orders/67/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c66b28e0 @base=#<Payment:0x007fa9c4ba2a78 ...>, @messages={}>, @request_id="cf04c820-aefb-4dd0-948a-bce33b0df2f5", @header={}>
I, [2015-01-04T07:58:46.972826 #29890]  INFO -- : #<Payment:0x007fa9c4ba2a78 @error=nil, @id="PAY-8JL12768JG3964357KSUPFNQ", @create_time="2015-01-04T07:58:46Z", @update_time="2015-01-04T07:58:46Z", @state="created", @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c64e8938 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c64e3a50 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c64e3370 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c64e23f8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c64e1d40 @error=nil, @total="86.93", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c64e0be8 @error=nil, @subtotal="86.93">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c64db878 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c64dab80 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="5">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c64d8998 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="2">]>, @related_resources=[]>], @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c64d0ae0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8JL12768JG3964357KSUPFNQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c64caff0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-164799682G513091B", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c64c94e8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8JL12768JG3964357KSUPFNQ/execute", @rel="execute", @method="POST">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c6703cb8 @error=nil, @return_url="http://localhost:3000/orders/67/confirm", @cancel_url="http://localhost:3000/orders/67/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c66b28e0 @base=#<Payment:0x007fa9c4ba2a78 ...>, @messages={}>, @request_id="cf04c820-aefb-4dd0-948a-bce33b0df2f5", @header={}>
I, [2015-01-04T07:58:46.973742 #29890]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-164799682G513091B
I, [2015-01-04T07:58:46.975419 #29890]  INFO -- : #<Payment:0x007fa9c4ba2a78 @error=nil, @id="PAY-8JL12768JG3964357KSUPFNQ", @create_time="2015-01-04T07:58:46Z", @update_time="2015-01-04T07:58:46Z", @state="created", @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c64e8938 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c64e3a50 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c64e3370 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c64e23f8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c64e1d40 @error=nil, @total="86.93", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c64e0be8 @error=nil, @subtotal="86.93">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c64db878 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c64dab80 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="5">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c64d8998 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="2">]>, @related_resources=[]>], @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c64d0ae0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8JL12768JG3964357KSUPFNQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c64caff0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-164799682G513091B", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c64c94e8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8JL12768JG3964357KSUPFNQ/execute", @rel="execute", @method="POST">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c6703cb8 @error=nil, @return_url="http://localhost:3000/orders/67/confirm", @cancel_url="http://localhost:3000/orders/67/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c66b28e0 @base=#<Payment:0x007fa9c4ba2a78 ...>, @messages={}>, @request_id="cf04c820-aefb-4dd0-948a-bce33b0df2f5", @header={}>
I, [2015-01-04T07:58:46.977885 #29890]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-164799682G513091B
I, [2015-01-04T07:58:46.980800 #29890]  INFO -- : Completed 403 Forbidden in 18997ms (ActiveRecord: 19.6ms)
D, [2015-01-04T07:59:53.669841 #29890] DEBUG -- : 
D, [2015-01-04T07:59:53.689337 #29890] DEBUG -- : 
I, [2015-01-04T07:59:53.690668 #29890]  INFO -- : Started GET "/orders/67/confirm?paymentId=PAY-8JL12768JG3964357KSUPFNQ&token=EC-164799682G513091B&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-04 07:59:53 +0000
I, [2015-01-04T07:59:53.708530 #29890]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-04T07:59:53.710272 #29890]  INFO -- :   Parameters: {"paymentId"=>"PAY-8JL12768JG3964357KSUPFNQ", "token"=>"EC-164799682G513091B", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"67"}
D, [2015-01-04T07:59:53.737890 #29890] DEBUG -- :   [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
D, [2015-01-04T07:59:53.744566 #29890] DEBUG -- :   [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-04T07:59:53.751332 #29890] DEBUG -- :   [1m[35mOrder Load (0.6ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "67"]]
I, [2015-01-04T07:59:57.144371 #29890]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-8JL12768JG3964357KSUPFNQ
I, [2015-01-04T07:59:58.963417 #29890]  INFO -- : Response[200]: OK, Duration: 1.818s
I, [2015-01-04T08:10:12.710332 #29890]  INFO -- : Completed 500 Internal Server Error in 618996ms
F, [2015-01-04T08:10:12.752651 #29890] FATAL -- : 
NoMethodError (undefined method `error' for nil:NilClass):
  app/models/order.rb:86:in `confirm'
  app/controllers/orders_controller.rb:96:in `confirm'


I, [2015-01-04T08:10:12.904697 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (9.3ms)
I, [2015-01-04T08:10:12.942263 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (11.5ms)
I, [2015-01-04T08:10:12.963179 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (10.6ms)
I, [2015-01-04T08:10:12.964613 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (88.0ms)
D, [2015-01-04T08:10:12.974730 #29890] DEBUG -- : 
D, [2015-01-04T08:10:12.975353 #29890] DEBUG -- : 
I, [2015-01-04T08:10:12.976743 #29890]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-04 08:10:12 +0000
I, [2015-01-04T08:10:14.367397 #29890]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T08:10:14.368285 #29890]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-04T08:10:14.417965 #29890] DEBUG -- :   [1m[36mCart Load (1.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-04T08:10:14.511196 #29890] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-04T08:10:14.632120 #29890] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 53]]
D, [2015-01-04T08:10:14.731291 #29890] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-04T08:10:14.736890 #29890] DEBUG -- :   [1m[36m (0.6ms)[0m  [1mbegin transaction[0m
D, [2015-01-04T08:10:14.767355 #29890] DEBUG -- :   [1m[35mSQL (14.2ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 53], ["created_at", Sun, 04 Jan 2015 08:10:14 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:7fa9c4b38fb0,'0.1099E2',18(36)>], ["size", "extra small"], ["updated_at", Sun, 04 Jan 2015 08:10:14 UTC +00:00]]
D, [2015-01-04T08:10:14.775172 #29890] DEBUG -- :   [1m[36m (3.9ms)[0m  [1mcommit transaction[0m
D, [2015-01-04T08:10:14.861481 #29890] DEBUG -- :   [1m[35mLineItem Load (1.5ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
I, [2015-01-04T08:10:14.893126 #29890]  INFO -- :   Rendered line_items/_line_item.html.erb (9.2ms)
I, [2015-01-04T08:10:14.927861 #29890]  INFO -- :   Rendered carts/_cart.html.erb (73.5ms)
I, [2015-01-04T08:10:14.930096 #29890]  INFO -- :   Rendered line_items/create.js.erb (104.8ms)
I, [2015-01-04T08:10:14.932219 #29890]  INFO -- : Completed 200 OK in 563ms (Views: 151.5ms | ActiveRecord: 31.8ms)
D, [2015-01-04T08:10:14.942190 #29890] DEBUG -- : 
D, [2015-01-04T08:10:14.942934 #29890] DEBUG -- : 
I, [2015-01-04T08:10:14.953304 #29890]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-04 08:10:14 +0000
I, [2015-01-04T08:10:14.985056 #29890]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T08:10:14.986240 #29890]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-04T08:10:15.005398 #29890] DEBUG -- :   [1m[36mCart Load (0.7ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-04T08:10:15.013119 #29890] DEBUG -- :   [1m[35mProduct Load (0.7ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-04T08:10:15.028092 #29890] DEBUG -- :   [1m[36mLineItem Load (1.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 53]]
D, [2015-01-04T08:10:15.046142 #29890] DEBUG -- :   [1m[35mProduct Load (0.7ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-04T08:10:15.051238 #29890] DEBUG -- :   [1m[36m (0.6ms)[0m  [1mbegin transaction[0m
D, [2015-01-04T08:10:15.083110 #29890] DEBUG -- :   [1m[35mSQL (2.4ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 53], ["created_at", Sun, 04 Jan 2015 08:10:15 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7fa9c45363b0,'0.1299E2',18(36)>], ["size", "extra small"], ["updated_at", Sun, 04 Jan 2015 08:10:15 UTC +00:00]]
D, [2015-01-04T08:10:15.091287 #29890] DEBUG -- :   [1m[36m (3.9ms)[0m  [1mcommit transaction[0m
D, [2015-01-04T08:10:15.110220 #29890] DEBUG -- :   [1m[35mLineItem Load (0.9ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
D, [2015-01-04T08:10:15.135777 #29890] DEBUG -- :   [1m[36mProduct Load (0.7ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
I, [2015-01-04T08:10:15.150932 #29890]  INFO -- :   Rendered line_items/_line_item.html.erb (24.9ms)
I, [2015-01-04T08:10:15.169596 #29890]  INFO -- :   Rendered carts/_cart.html.erb (64.8ms)
I, [2015-01-04T08:10:15.172104 #29890]  INFO -- :   Rendered line_items/create.js.erb (70.8ms)
I, [2015-01-04T08:10:15.174274 #29890]  INFO -- : Completed 200 OK in 187ms (Views: 77.4ms | ActiveRecord: 12.2ms)
D, [2015-01-04T08:10:18.471970 #29890] DEBUG -- : 
D, [2015-01-04T08:10:18.472403 #29890] DEBUG -- : 
I, [2015-01-04T08:10:18.473199 #29890]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-04 08:10:18 +0000
I, [2015-01-04T08:10:18.509537 #29890]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-04T08:10:18.567857 #29890] DEBUG -- :   [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
D, [2015-01-04T08:10:18.617917 #29890] DEBUG -- :   [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-04T08:10:18.624079 #29890] DEBUG -- :   [1m[35mCart Load (0.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T08:10:18.658839 #29890] DEBUG -- :   [1m[36mLineItem Load (0.7ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-04T08:10:18.676476 #29890]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-04T08:10:25.323525 #29890] DEBUG -- :   [1m[35m (0.7ms)[0m  begin transaction
D, [2015-01-04T08:10:25.432254 #29890] DEBUG -- :   [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Sun, 04 Jan 2015 08:10:25 UTC +00:00], ["updated_at", Sun, 04 Jan 2015 08:10:25 UTC +00:00]]
D, [2015-01-04T08:10:25.458327 #29890] DEBUG -- :   [1m[35mSQL (1.4ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 125  [["cart_id", nil], ["order_id", 68], ["updated_at", Sun, 04 Jan 2015 08:10:25 UTC +00:00]]
D, [2015-01-04T08:10:25.470940 #29890] DEBUG -- :   [1m[36mSQL (1.2ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 126[0m  [["cart_id", nil], ["order_id", 68], ["updated_at", Sun, 04 Jan 2015 08:10:25 UTC +00:00]]
I, [2015-01-04T08:10:25.472356 #29890]  INFO -- : about to @payment.create
D, [2015-01-04T08:10:27.265932 #29890] DEBUG -- :   [1m[35mProduct Load (0.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-04T08:10:27.274844 #29890] DEBUG -- :   [1m[36mProduct Load (0.5ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-04T08:10:30.114630 #29890]  INFO -- : in order=
I, [2015-01-04T08:10:30.117215 #29890]  INFO -- : in payment.create
I, [2015-01-04T08:10:30.124666 #29890]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}, {"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/68/confirm", "cancel_url"=>"http://localhost:3000/orders/68/cancel"}}
I, [2015-01-04T08:10:30.126723 #29890]  INFO -- : #<ActiveModel::Errors:0x007fa9c84bcd68 @base=#<Payment:0x007fa9c4fa2c90 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c4fa1d68 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c8579260 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c8578590 @error=nil, @total="23.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c8571420 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c855a3b0 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c8550dd8 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c4e9f488 @error=nil, @return_url="http://localhost:3000/orders/68/confirm", @cancel_url="http://localhost:3000/orders/68/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c84bcd68 ...>>, @messages={}>
I, [2015-01-04T08:10:30.127223 #29890]  INFO -- : got past invalid
I, [2015-01-04T08:10:30.151252 #29890]  INFO -- : PayPal-Request-Id: 619bda1e-f422-4df1-b31c-0396bd6998e9
I, [2015-01-04T08:10:30.151862 #29890]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-04T08:10:31.543082 #29890]  INFO -- : Response[201]: Created, Duration: 1.391s
I, [2015-01-04T08:10:31.548653 #29890]  INFO -- : back from super
I, [2015-01-04T08:10:31.557627 #29890]  INFO -- : {"id"=>"PAY-3VN52962KB259884TKSUPK5Y", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98", "details"=>{"subtotal"=>"23.98"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}, {"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/68/confirm", "cancel_url"=>"http://localhost:3000/orders/68/cancel"}, "create_time"=>"2015-01-04T08:10:31Z", "update_time"=>"2015-01-04T08:10:31Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-3VN52962KB259884TKSUPK5Y", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-50E57435HC2266027", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-3VN52962KB259884TKSUPK5Y/execute", "rel"=>"execute", "method"=>"POST"}]}
I, [2015-01-04T08:10:31.600262 #29890]  INFO -- : @payment save just done
I, [2015-01-04T08:10:31.601733 #29890]  INFO -- : #<Payment:0x007fa9c4fa2c90 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c4de8f08 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c4de8490 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c4de3ee0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c4de26f8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4de1f00 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c4de0ce0 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c83630e8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c8361b30 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c835a8d0 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c4e9f488 @error=nil, @return_url="http://localhost:3000/orders/68/confirm", @cancel_url="http://localhost:3000/orders/68/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c84bcd68 @base=#<Payment:0x007fa9c4fa2c90 ...>, @messages={}>, @request_id="619bda1e-f422-4df1-b31c-0396bd6998e9", @header={}, @id="PAY-3VN52962KB259884TKSUPK5Y", @create_time="2015-01-04T08:10:31Z", @update_time="2015-01-04T08:10:31Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c83529f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3VN52962KB259884TKSUPK5Y", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c83512f8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-50E57435HC2266027", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c834b560 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3VN52962KB259884TKSUPK5Y/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T08:10:31.603058 #29890]  INFO -- : #<Payment:0x007fa9c4fa2c90 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c4de8f08 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c4de8490 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c4de3ee0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c4de26f8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4de1f00 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c4de0ce0 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c83630e8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c8361b30 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c835a8d0 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c4e9f488 @error=nil, @return_url="http://localhost:3000/orders/68/confirm", @cancel_url="http://localhost:3000/orders/68/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c84bcd68 @base=#<Payment:0x007fa9c4fa2c90 ...>, @messages={}>, @request_id="619bda1e-f422-4df1-b31c-0396bd6998e9", @header={}, @id="PAY-3VN52962KB259884TKSUPK5Y", @create_time="2015-01-04T08:10:31Z", @update_time="2015-01-04T08:10:31Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c83529f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3VN52962KB259884TKSUPK5Y", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c83512f8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-50E57435HC2266027", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c834b560 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3VN52962KB259884TKSUPK5Y/execute", @rel="execute", @method="POST">]>
D, [2015-01-04T08:10:31.613032 #29890] DEBUG -- :   [1m[35m (7.5ms)[0m  commit transaction
I, [2015-01-04T08:10:31.614878 #29890]  INFO -- : about to approve url
I, [2015-01-04T08:10:31.616264 #29890]  INFO -- : #<Payment:0x007fa9c4fa2c90 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c4de8f08 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c4de8490 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c4de3ee0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c4de26f8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4de1f00 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c4de0ce0 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c83630e8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c8361b30 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c835a8d0 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c4e9f488 @error=nil, @return_url="http://localhost:3000/orders/68/confirm", @cancel_url="http://localhost:3000/orders/68/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c84bcd68 @base=#<Payment:0x007fa9c4fa2c90 ...>, @messages={}>, @request_id="619bda1e-f422-4df1-b31c-0396bd6998e9", @header={}, @id="PAY-3VN52962KB259884TKSUPK5Y", @create_time="2015-01-04T08:10:31Z", @update_time="2015-01-04T08:10:31Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c83529f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3VN52962KB259884TKSUPK5Y", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c83512f8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-50E57435HC2266027", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c834b560 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3VN52962KB259884TKSUPK5Y/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T08:10:31.617779 #29890]  INFO -- : #<Payment:0x007fa9c4fa2c90 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c4de8f08 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c4de8490 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c4de3ee0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c4de26f8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4de1f00 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c4de0ce0 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c83630e8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c8361b30 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c835a8d0 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c4e9f488 @error=nil, @return_url="http://localhost:3000/orders/68/confirm", @cancel_url="http://localhost:3000/orders/68/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c84bcd68 @base=#<Payment:0x007fa9c4fa2c90 ...>, @messages={}>, @request_id="619bda1e-f422-4df1-b31c-0396bd6998e9", @header={}, @id="PAY-3VN52962KB259884TKSUPK5Y", @create_time="2015-01-04T08:10:31Z", @update_time="2015-01-04T08:10:31Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c83529f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3VN52962KB259884TKSUPK5Y", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c83512f8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-50E57435HC2266027", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c834b560 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3VN52962KB259884TKSUPK5Y/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T08:10:31.618434 #29890]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-50E57435HC2266027
I, [2015-01-04T08:10:31.619756 #29890]  INFO -- : #<Payment:0x007fa9c4fa2c90 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fa9c4de8f08 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fa9c4de8490 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fa9c4de3ee0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fa9c4de26f8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fa9c4de1f00 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fa9c4de0ce0 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fa9c83630e8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fa9c8361b30 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fa9c835a8d0 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fa9c4e9f488 @error=nil, @return_url="http://localhost:3000/orders/68/confirm", @cancel_url="http://localhost:3000/orders/68/cancel">, @logger=#<Logger:0x007fa9c6319350 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fa9c6319300 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fa9c63192b0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fa9c6319238 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fa9c63191e8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fa9c84bcd68 @base=#<Payment:0x007fa9c4fa2c90 ...>, @messages={}>, @request_id="619bda1e-f422-4df1-b31c-0396bd6998e9", @header={}, @id="PAY-3VN52962KB259884TKSUPK5Y", @create_time="2015-01-04T08:10:31Z", @update_time="2015-01-04T08:10:31Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fa9c83529f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3VN52962KB259884TKSUPK5Y", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c83512f8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-50E57435HC2266027", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fa9c834b560 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-3VN52962KB259884TKSUPK5Y/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T08:10:31.622111 #29890]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-50E57435HC2266027
I, [2015-01-04T08:10:31.624805 #29890]  INFO -- : Completed 403 Forbidden in 13114ms (ActiveRecord: 20.0ms)
D, [2015-01-04T08:11:07.618220 #29890] DEBUG -- : 
D, [2015-01-04T08:11:07.618676 #29890] DEBUG -- : 
I, [2015-01-04T08:11:07.619988 #29890]  INFO -- : Started GET "/orders/68/confirm?paymentId=PAY-3VN52962KB259884TKSUPK5Y&token=EC-50E57435HC2266027&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-04 08:11:07 +0000
I, [2015-01-04T08:11:07.645724 #29890]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-04T08:11:07.646336 #29890]  INFO -- :   Parameters: {"paymentId"=>"PAY-3VN52962KB259884TKSUPK5Y", "token"=>"EC-50E57435HC2266027", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"68"}
D, [2015-01-04T08:11:07.656126 #29890] DEBUG -- :   [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
D, [2015-01-04T08:11:07.661861 #29890] DEBUG -- :   [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-04T08:11:07.675074 #29890] DEBUG -- :   [1m[36mOrder Load (4.4ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "68"]]
I, [2015-01-04T08:11:37.370663 #29890]  INFO -- : Completed 500 Internal Server Error in 29723ms
F, [2015-01-04T08:11:37.379902 #29890] FATAL -- : 
ArgumentError (wrong number of arguments (2 for 1)):
  app/models/order.rb:75:in `confirm'
  app/controllers/orders_controller.rb:96:in `confirm'


I, [2015-01-04T08:11:37.455955 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.3ms)
I, [2015-01-04T08:11:37.470843 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (7.7ms)
I, [2015-01-04T08:11:37.483246 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (4.9ms)
I, [2015-01-04T08:11:37.484230 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (43.9ms)
D, [2015-01-04T08:11:55.563874 #29890] DEBUG -- : 
D, [2015-01-04T08:11:55.564417 #29890] DEBUG -- : 
I, [2015-01-04T08:11:55.565961 #29890]  INFO -- : Started GET "/orders/68/confirm?paymentId=PAY-3VN52962KB259884TKSUPK5Y&token=EC-50E57435HC2266027&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-04 08:11:55 +0000
I, [2015-01-04T08:11:56.831943 #29890]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-04T08:11:56.832784 #29890]  INFO -- :   Parameters: {"paymentId"=>"PAY-3VN52962KB259884TKSUPK5Y", "token"=>"EC-50E57435HC2266027", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"68"}
D, [2015-01-04T08:11:56.862091 #29890] DEBUG -- :   [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
D, [2015-01-04T08:11:56.923006 #29890] DEBUG -- :   [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-04T08:11:56.959635 #29890] DEBUG -- :   [1m[35mOrder Load (1.2ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "68"]]
I, [2015-01-04T08:13:22.791247 #29890]  INFO -- : Completed 500 Internal Server Error in 85957ms
F, [2015-01-04T08:13:22.808334 #29890] FATAL -- : 
NoMethodError (undefined method `find' for nil:NilClass):
  app/models/order.rb:77:in `confirm'
  app/controllers/orders_controller.rb:96:in `confirm'


I, [2015-01-04T08:13:22.877373 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.1ms)
I, [2015-01-04T08:13:22.891154 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (6.7ms)
I, [2015-01-04T08:13:22.903292 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (4.7ms)
I, [2015-01-04T08:13:22.904249 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (42.1ms)
D, [2015-01-04T08:13:30.394454 #29890] DEBUG -- : 
D, [2015-01-04T08:13:30.394984 #29890] DEBUG -- : 
I, [2015-01-04T08:13:30.396609 #29890]  INFO -- : Started GET "/orders/68/confirm?paymentId=PAY-3VN52962KB259884TKSUPK5Y&token=EC-50E57435HC2266027&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-04 08:13:30 +0000
I, [2015-01-04T08:13:31.625762 #29890]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-04T08:13:31.626603 #29890]  INFO -- :   Parameters: {"paymentId"=>"PAY-3VN52962KB259884TKSUPK5Y", "token"=>"EC-50E57435HC2266027", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"68"}
D, [2015-01-04T08:13:31.655680 #29890] DEBUG -- :   [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
D, [2015-01-04T08:13:31.712556 #29890] DEBUG -- :   [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-04T08:13:31.749081 #29890] DEBUG -- :   [1m[36mOrder Load (1.2ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "68"]]
I, [2015-01-04T08:14:25.739751 #29890]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-3VN52962KB259884TKSUPK5Y
I, [2015-01-04T08:14:27.549336 #29890]  INFO -- : Response[200]: OK, Duration: 1.809s
D, [2015-01-04T08:14:41.456591 #29890] DEBUG -- :   [1m[35m (0.4ms)[0m  begin transaction
D, [2015-01-04T08:14:41.491637 #29890] DEBUG -- :   [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
I, [2015-01-04T08:14:41.495464 #29890]  INFO -- : Completed 500 Internal Server Error in 69868ms
F, [2015-01-04T08:14:41.505013 #29890] FATAL -- : 
NoMethodError (undefined method `error' for nil:NilClass):
  app/controllers/orders_controller.rb:104:in `confirm'


I, [2015-01-04T08:14:41.570111 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.7ms)
I, [2015-01-04T08:14:41.583891 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (6.7ms)
I, [2015-01-04T08:14:41.598089 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (6.5ms)
I, [2015-01-04T08:14:41.598961 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (44.8ms)
D, [2015-01-04T08:15:37.958946 #29890] DEBUG -- : 
D, [2015-01-04T08:15:37.959400 #29890] DEBUG -- : 
I, [2015-01-04T08:15:37.961200 #29890]  INFO -- : Started GET "/orders/68/confirm?paymentId=PAY-3VN52962KB259884TKSUPK5Y&token=EC-50E57435HC2266027&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-04 08:15:37 +0000
I, [2015-01-04T08:15:37.989604 #29890]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-04T08:15:37.990380 #29890]  INFO -- :   Parameters: {"paymentId"=>"PAY-3VN52962KB259884TKSUPK5Y", "token"=>"EC-50E57435HC2266027", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"68"}
D, [2015-01-04T08:15:38.000256 #29890] DEBUG -- :   [1m[35mUser Load (0.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
D, [2015-01-04T08:15:38.007524 #29890] DEBUG -- :   [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-04T08:15:38.015231 #29890] DEBUG -- :   [1m[35mOrder Load (0.8ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "68"]]
I, [2015-01-04T08:15:49.340940 #29890]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-3VN52962KB259884TKSUPK5Y
I, [2015-01-04T08:15:50.813464 #29890]  INFO -- : Response[200]: OK, Duration: 1.472s
D, [2015-01-04T08:16:11.788319 #29890] DEBUG -- :   [1m[36m (0.9ms)[0m  [1mbegin transaction[0m
D, [2015-01-04T08:16:11.819901 #29890] DEBUG -- :   [1m[35m (2.9ms)[0m  rollback transaction
I, [2015-01-04T08:16:11.822765 #29890]  INFO -- : Completed 500 Internal Server Error in 33831ms
F, [2015-01-04T08:16:11.838551 #29890] FATAL -- : 
NoMethodError (undefined method `error' for nil:NilClass):
  app/controllers/orders_controller.rb:104:in `confirm'


I, [2015-01-04T08:16:11.900408 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.1ms)
I, [2015-01-04T08:16:11.914209 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (6.8ms)
I, [2015-01-04T08:16:11.926777 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (4.9ms)
I, [2015-01-04T08:16:11.927758 #29890]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (42.8ms)
D, [2015-01-04T08:16:57.828749 #29890] DEBUG -- : 
D, [2015-01-04T08:16:57.829346 #29890] DEBUG -- : 
I, [2015-01-04T08:16:57.830707 #29890]  INFO -- : Started GET "/orders/68/confirm?paymentId=PAY-3VN52962KB259884TKSUPK5Y&token=EC-50E57435HC2266027&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-04 08:16:57 +0000
I, [2015-01-04T08:16:57.849864 #29890]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-04T08:16:57.850558 #29890]  INFO -- :   Parameters: {"paymentId"=>"PAY-3VN52962KB259884TKSUPK5Y", "token"=>"EC-50E57435HC2266027", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"68"}
D, [2015-01-04T08:16:57.862283 #29890] DEBUG -- :   [1m[36mUser Load (1.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
D, [2015-01-04T08:16:57.869995 #29890] DEBUG -- :   [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-04T08:16:57.877268 #29890] DEBUG -- :   [1m[36mOrder Load (0.7ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "68"]]
D, [2015-01-04T08:23:10.602841 #29958] DEBUG -- : 
D, [2015-01-04T08:23:10.602929 #29958] DEBUG -- : 
I, [2015-01-04T08:23:10.603179 #29958]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-04 08:23:10 +0000
D, [2015-01-04T08:23:11.082506 #29958] DEBUG -- :   [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
I, [2015-01-04T08:23:11.153658 #29958]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-04T08:23:11.215314 #29958] DEBUG -- :   [1m[35mCart Load (4.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T08:23:11.317542 #29958] DEBUG -- :   [1m[36mProduct Load (0.4ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-04T08:23:11.344314 #29958]  INFO -- : Cache digest for store/index.html: a93d4e2e981ab3dfce98a095c3b6c059
I, [2015-01-04T08:23:11.357733 #29958]  INFO -- : Read fragment views/store/products/2-20141022062504570899000/a93d4e2e981ab3dfce98a095c3b6c059 (11.9ms)
I, [2015-01-04T08:23:11.357986 #29958]  INFO -- :   Rendered store/index.html.erb within layouts/application (45.7ms)
D, [2015-01-04T08:23:12.220463 #29958] DEBUG -- :   [1m[35mLineItem Exists (0.2ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 53]]
D, [2015-01-04T08:23:12.260262 #29958] DEBUG -- :   [1m[36mLineItem Load (0.3ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-04T08:23:12.260603 #29958]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-04T08:23:12.338276 #29958]  INFO -- :   Rendered carts/_cart.html.erb (79.6ms)
I, [2015-01-04T08:23:12.339932 #29958]  INFO -- : Completed 200 OK in 1186ms (Views: 1104.7ms | ActiveRecord: 6.7ms)
D, [2015-01-04T08:23:12.455532 #29958] DEBUG -- : 
D, [2015-01-04T08:23:12.455612 #29958] DEBUG -- : 
I, [2015-01-04T08:23:12.455859 #29958]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-04 08:23:12 +0000
D, [2015-01-04T08:23:12.476462 #29958] DEBUG -- : 
D, [2015-01-04T08:23:12.476578 #29958] DEBUG -- : 
I, [2015-01-04T08:23:12.476790 #29958]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-04 08:23:12 +0000
D, [2015-01-04T08:23:12.484659 #29958] DEBUG -- : 
D, [2015-01-04T08:23:12.484743 #29958] DEBUG -- : 
I, [2015-01-04T08:23:12.484958 #29958]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-04 08:23:12 +0000
D, [2015-01-04T08:23:12.501120 #29958] DEBUG -- : 
D, [2015-01-04T08:23:12.501366 #29958] DEBUG -- : 
I, [2015-01-04T08:23:12.501611 #29958]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-04 08:23:12 +0000
D, [2015-01-04T08:23:12.524182 #29958] DEBUG -- : 
D, [2015-01-04T08:23:12.524260 #29958] DEBUG -- : 
I, [2015-01-04T08:23:12.524495 #29958]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-04 08:23:12 +0000
D, [2015-01-04T08:23:12.540403 #29958] DEBUG -- : 
D, [2015-01-04T08:23:12.540482 #29958] DEBUG -- : 
I, [2015-01-04T08:23:12.540690 #29958]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-04 08:23:12 +0000
D, [2015-01-04T08:23:12.570098 #29958] DEBUG -- : 
D, [2015-01-04T08:23:12.570200 #29958] DEBUG -- : 
I, [2015-01-04T08:23:12.570412 #29958]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-04 08:23:12 +0000
D, [2015-01-04T08:23:12.583070 #29958] DEBUG -- : 
D, [2015-01-04T08:23:12.583147 #29958] DEBUG -- : 
I, [2015-01-04T08:23:12.583343 #29958]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-04 08:23:12 +0000
D, [2015-01-04T08:23:12.597949 #29958] DEBUG -- : 
D, [2015-01-04T08:23:12.600127 #29958] DEBUG -- : 
I, [2015-01-04T08:23:12.600331 #29958]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-04 08:23:12 +0000
D, [2015-01-04T08:23:12.614583 #29958] DEBUG -- : 
D, [2015-01-04T08:23:12.614662 #29958] DEBUG -- : 
I, [2015-01-04T08:23:12.614859 #29958]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-04 08:23:12 +0000
D, [2015-01-04T08:23:12.646493 #29958] DEBUG -- : 
D, [2015-01-04T08:23:12.646581 #29958] DEBUG -- : 
I, [2015-01-04T08:23:12.646795 #29958]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-04 08:23:12 +0000
D, [2015-01-04T08:23:12.679593 #29958] DEBUG -- : 
D, [2015-01-04T08:23:12.679681 #29958] DEBUG -- : 
I, [2015-01-04T08:23:12.679906 #29958]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-04 08:23:12 +0000
D, [2015-01-04T08:23:12.704322 #29958] DEBUG -- : 
D, [2015-01-04T08:23:12.704405 #29958] DEBUG -- : 
I, [2015-01-04T08:23:12.704663 #29958]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-04 08:23:12 +0000
D, [2015-01-04T08:23:12.721117 #29958] DEBUG -- : 
D, [2015-01-04T08:23:12.721195 #29958] DEBUG -- : 
I, [2015-01-04T08:23:12.721388 #29958]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-04 08:23:12 +0000
D, [2015-01-04T08:23:12.736105 #29958] DEBUG -- : 
D, [2015-01-04T08:23:12.736185 #29958] DEBUG -- : 
I, [2015-01-04T08:23:12.736422 #29958]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-04 08:23:12 +0000
D, [2015-01-04T08:23:12.749695 #29958] DEBUG -- : 
D, [2015-01-04T08:23:12.749773 #29958] DEBUG -- : 
I, [2015-01-04T08:23:12.749963 #29958]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-04 08:23:12 +0000
D, [2015-01-04T08:23:12.760602 #29958] DEBUG -- : 
D, [2015-01-04T08:23:12.760683 #29958] DEBUG -- : 
I, [2015-01-04T08:23:12.760926 #29958]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-04 08:23:12 +0000
D, [2015-01-04T08:23:12.771011 #29958] DEBUG -- : 
D, [2015-01-04T08:23:12.771092 #29958] DEBUG -- : 
I, [2015-01-04T08:23:12.771304 #29958]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-04 08:23:12 +0000
D, [2015-01-04T08:23:12.780476 #29958] DEBUG -- : 
D, [2015-01-04T08:23:12.780553 #29958] DEBUG -- : 
I, [2015-01-04T08:23:12.780729 #29958]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-04 08:23:12 +0000
D, [2015-01-04T08:23:12.792710 #29958] DEBUG -- : 
D, [2015-01-04T08:23:12.792800 #29958] DEBUG -- : 
I, [2015-01-04T08:23:12.793208 #29958]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-04 08:23:12 +0000
D, [2015-01-04T08:23:12.805595 #29958] DEBUG -- : 
D, [2015-01-04T08:23:12.805711 #29958] DEBUG -- : 
I, [2015-01-04T08:23:12.805911 #29958]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-04 08:23:12 +0000
D, [2015-01-04T08:23:12.819861 #29958] DEBUG -- : 
D, [2015-01-04T08:23:12.819951 #29958] DEBUG -- : 
I, [2015-01-04T08:23:12.820864 #29958]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-04 08:23:12 +0000
D, [2015-01-04T08:23:12.830689 #29958] DEBUG -- : 
D, [2015-01-04T08:23:12.830777 #29958] DEBUG -- : 
I, [2015-01-04T08:23:12.831067 #29958]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-04 08:23:12 +0000
D, [2015-01-04T08:23:12.845958 #29958] DEBUG -- : 
D, [2015-01-04T08:23:12.846036 #29958] DEBUG -- : 
I, [2015-01-04T08:23:12.846218 #29958]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-04 08:23:12 +0000
D, [2015-01-04T08:23:12.853358 #29958] DEBUG -- : 
D, [2015-01-04T08:23:12.853433 #29958] DEBUG -- : 
I, [2015-01-04T08:23:12.853668 #29958]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-04 08:23:12 +0000
D, [2015-01-04T08:23:12.865425 #29958] DEBUG -- : 
D, [2015-01-04T08:23:12.865517 #29958] DEBUG -- : 
I, [2015-01-04T08:23:12.865843 #29958]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-04 08:23:12 +0000
D, [2015-01-04T08:23:12.900855 #29958] DEBUG -- : 
D, [2015-01-04T08:23:12.901032 #29958] DEBUG -- : 
I, [2015-01-04T08:23:12.901176 #29958]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-04 08:23:12 +0000
D, [2015-01-04T08:23:12.927595 #29958] DEBUG -- : 
D, [2015-01-04T08:23:12.927678 #29958] DEBUG -- : 
I, [2015-01-04T08:23:12.927924 #29958]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-04 08:23:12 +0000
D, [2015-01-04T08:23:12.945226 #29958] DEBUG -- : 
D, [2015-01-04T08:23:12.945310 #29958] DEBUG -- : 
I, [2015-01-04T08:23:12.945488 #29958]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-04 08:23:12 +0000
D, [2015-01-04T08:23:21.057091 #29958] DEBUG -- : 
D, [2015-01-04T08:23:21.057240 #29958] DEBUG -- : 
I, [2015-01-04T08:23:21.057534 #29958]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-04 08:23:21 +0000
I, [2015-01-04T08:23:21.066979 #29958]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T08:23:21.067102 #29958]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-04T08:23:21.069131 #29958] DEBUG -- :   [1m[35mCart Load (0.2ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T08:23:21.070195 #29958] DEBUG -- :   [1m[36mProduct Load (0.2ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-04T08:23:21.087519 #29958] DEBUG -- :   [1m[35mLineItem Load (0.2ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 53]]
D, [2015-01-04T08:23:21.167785 #29958] DEBUG -- :   [1m[36mProduct Load (0.3ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-04T08:23:21.168762 #29958] DEBUG -- :   [1m[35m (0.1ms)[0m  begin transaction
D, [2015-01-04T08:23:21.221962 #29958] DEBUG -- :   [1m[36mSQL (35.1ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 53], ["created_at", Sun, 04 Jan 2015 08:23:21 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7fcfedc485f0,'0.1299E2',18(36)>], ["size", "extra small"], ["updated_at", Sun, 04 Jan 2015 08:23:21 UTC +00:00]]
D, [2015-01-04T08:23:21.225934 #29958] DEBUG -- :   [1m[35m (3.4ms)[0m  commit transaction
D, [2015-01-04T08:23:21.234107 #29958] DEBUG -- :   [1m[36mLineItem Load (0.2ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-04T08:23:21.237975 #29958]  INFO -- :   Rendered line_items/_line_item.html.erb (1.2ms)
I, [2015-01-04T08:23:21.239706 #29958]  INFO -- :   Rendered carts/_cart.html.erb (7.1ms)
I, [2015-01-04T08:23:21.240041 #29958]  INFO -- :   Rendered line_items/create.js.erb (9.8ms)
I, [2015-01-04T08:23:21.240314 #29958]  INFO -- : Completed 200 OK in 173ms (Views: 13.5ms | ActiveRecord: 39.7ms)
D, [2015-01-04T08:23:22.542515 #29958] DEBUG -- : 
D, [2015-01-04T08:23:22.542597 #29958] DEBUG -- : 
I, [2015-01-04T08:23:22.542792 #29958]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-04 08:23:22 +0000
I, [2015-01-04T08:23:22.548954 #29958]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T08:23:22.549052 #29958]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-04T08:23:22.551233 #29958] DEBUG -- :   [1m[35mCart Load (0.2ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T08:23:22.552262 #29958] DEBUG -- :   [1m[36mProduct Load (0.1ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-04T08:23:22.555307 #29958] DEBUG -- :   [1m[35mLineItem Load (0.3ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 53]]
D, [2015-01-04T08:23:22.557929 #29958] DEBUG -- :   [1m[36mProduct Load (0.4ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-04T08:23:22.558931 #29958] DEBUG -- :   [1m[35m (0.1ms)[0m  begin transaction
D, [2015-01-04T08:23:22.560741 #29958] DEBUG -- :   [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 53], ["created_at", Sun, 04 Jan 2015 08:23:22 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:7fcfee09c908,'0.1099E2',18(36)>], ["size", "extra small"], ["updated_at", Sun, 04 Jan 2015 08:23:22 UTC +00:00]]
D, [2015-01-04T08:23:22.568085 #29958] DEBUG -- :   [1m[35m (6.4ms)[0m  commit transaction
D, [2015-01-04T08:23:22.574711 #29958] DEBUG -- :   [1m[36mLineItem Load (0.7ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
D, [2015-01-04T08:23:22.577586 #29958] DEBUG -- :   [1m[35mProduct Load (0.1ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-04T08:23:22.578835 #29958]  INFO -- :   Rendered line_items/_line_item.html.erb (2.2ms)
I, [2015-01-04T08:23:22.580578 #29958]  INFO -- :   Rendered carts/_cart.html.erb (7.1ms)
I, [2015-01-04T08:23:22.580944 #29958]  INFO -- :   Rendered line_items/create.js.erb (8.5ms)
I, [2015-01-04T08:23:22.581181 #29958]  INFO -- : Completed 200 OK in 32ms (Views: 11.9ms | ActiveRecord: 8.9ms)
D, [2015-01-04T08:23:23.177780 #29958] DEBUG -- : 
D, [2015-01-04T08:23:23.177865 #29958] DEBUG -- : 
I, [2015-01-04T08:23:23.178056 #29958]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-04 08:23:23 +0000
I, [2015-01-04T08:23:23.183116 #29958]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T08:23:23.183236 #29958]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-04T08:23:23.185329 #29958] DEBUG -- :   [1m[36mCart Load (0.1ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-04T08:23:23.188002 #29958] DEBUG -- :   [1m[35mProduct Load (0.2ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-04T08:23:23.189307 #29958] DEBUG -- :   [1m[36mLineItem Load (0.2ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 53]]
D, [2015-01-04T08:23:23.189925 #29958] DEBUG -- :   [1m[35m (0.1ms)[0m  begin transaction
D, [2015-01-04T08:23:23.192708 #29958] DEBUG -- :   [1m[36mSQL (0.5ms)[0m  [1mUPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = 128[0m  [["quantity", 2], ["updated_at", Sun, 04 Jan 2015 08:23:23 UTC +00:00]]
D, [2015-01-04T08:23:23.198945 #29958] DEBUG -- :   [1m[35m (5.9ms)[0m  commit transaction
D, [2015-01-04T08:23:23.203043 #29958] DEBUG -- :   [1m[36mLineItem Load (0.2ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
D, [2015-01-04T08:23:23.205123 #29958] DEBUG -- :   [1m[35mProduct Load (0.1ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-04T08:23:23.206572 #29958] DEBUG -- :   [1m[36mProduct Load (0.1ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
I, [2015-01-04T08:23:23.207206 #29958]  INFO -- :   Rendered line_items/_line_item.html.erb (3.0ms)
I, [2015-01-04T08:23:23.208891 #29958]  INFO -- :   Rendered carts/_cart.html.erb (6.4ms)
I, [2015-01-04T08:23:23.209208 #29958]  INFO -- :   Rendered line_items/create.js.erb (7.7ms)
I, [2015-01-04T08:23:23.209441 #29958]  INFO -- : Completed 200 OK in 26ms (Views: 9.7ms | ActiveRecord: 7.4ms)
D, [2015-01-04T08:23:25.874348 #29958] DEBUG -- : 
D, [2015-01-04T08:23:25.874425 #29958] DEBUG -- : 
I, [2015-01-04T08:23:25.874542 #29958]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-04 08:23:25 +0000
I, [2015-01-04T08:23:25.884577 #29958]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-04T08:23:25.892137 #29958] DEBUG -- :   [1m[35mUser Load (0.3ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
D, [2015-01-04T08:23:25.911571 #29958] DEBUG -- :   [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-04T08:23:25.912681 #29958] DEBUG -- :   [1m[35mCart Load (0.1ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T08:23:25.925472 #29958] DEBUG -- :   [1m[36mLineItem Load (0.2ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-04T08:23:25.927808 #29958]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-04T08:23:35.322957 #29958] DEBUG -- :   [1m[35m (0.7ms)[0m  begin transaction
D, [2015-01-04T08:23:35.443566 #29958] DEBUG -- :   [1m[36mSQL (2.1ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Sun, 04 Jan 2015 08:23:35 UTC +00:00], ["updated_at", Sun, 04 Jan 2015 08:23:35 UTC +00:00]]
D, [2015-01-04T08:23:35.460066 #29958] DEBUG -- :   [1m[35mSQL (1.8ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 127  [["cart_id", nil], ["order_id", 69], ["updated_at", Sun, 04 Jan 2015 08:23:35 UTC +00:00]]
D, [2015-01-04T08:23:35.474657 #29958] DEBUG -- :   [1m[36mSQL (1.3ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 128[0m  [["cart_id", nil], ["order_id", 69], ["updated_at", Sun, 04 Jan 2015 08:23:35 UTC +00:00]]
I, [2015-01-04T08:23:35.476235 #29958]  INFO -- : about to @payment.create
D, [2015-01-04T08:24:08.306202 #29958] DEBUG -- :   [1m[35mProduct Load (1.4ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-04T08:24:08.316233 #29958] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
I, [2015-01-04T08:24:11.215608 #29958]  INFO -- : in order=
I, [2015-01-04T08:24:11.218793 #29958]  INFO -- : in payment.create
I, [2015-01-04T08:24:11.226009 #29958]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"34.97"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"2", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/69/confirm", "cancel_url"=>"http://localhost:3000/orders/69/cancel"}}
I, [2015-01-04T08:24:11.228771 #29958]  INFO -- : #<ActiveModel::Errors:0x007fcfec081038 @base=#<Payment:0x007fcfec376ab8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fcfec375e60 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fcfec23d570 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fcfec23caf8 @error=nil, @total="34.97", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fcfec22f8f8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fcfec21ea80 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fcfea65af38 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="2">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fcfec16c7e0 @error=nil, @return_url="http://localhost:3000/orders/69/confirm", @cancel_url="http://localhost:3000/orders/69/cancel">, @logger=#<Logger:0x007fcfea671508 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fcfea6714e0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fcfea671440 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fcfea671418 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fcfea671378>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fcfec081038 ...>>, @messages={}>
I, [2015-01-04T08:24:11.229923 #29958]  INFO -- : got past invalid
I, [2015-01-04T08:24:11.302219 #29958]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/oauth2/token
I, [2015-01-04T08:24:12.765382 #29958]  INFO -- : Response[200]: OK, Duration: 1.462s
I, [2015-01-04T08:24:12.786217 #29958]  INFO -- : PayPal-Request-Id: 43fda4ef-cadf-4880-8288-b8fc20bde31f
I, [2015-01-04T08:24:12.787042 #29958]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-04T08:24:14.202182 #29958]  INFO -- : Response[201]: Created, Duration: 1.414s
I, [2015-01-04T08:24:14.216882 #29958]  INFO -- : back from super
I, [2015-01-04T08:24:14.226643 #29958]  INFO -- : {"id"=>"PAY-78G72427KL7890420KSUPRLI", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"34.97", "details"=>{"subtotal"=>"34.97"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"2", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/69/confirm", "cancel_url"=>"http://localhost:3000/orders/69/cancel"}, "create_time"=>"2015-01-04T08:24:13Z", "update_time"=>"2015-01-04T08:24:13Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-78G72427KL7890420KSUPRLI", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7BL53131W7131273H", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-78G72427KL7890420KSUPRLI/execute", "rel"=>"execute", "method"=>"POST"}]}
I, [2015-01-04T08:24:14.278442 #29958]  INFO -- : @payment save just done
I, [2015-01-04T08:24:14.279970 #29958]  INFO -- : #<Payment:0x007fcfec376ab8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fcfedabf5d0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fcfedabec98 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fcfedabe810 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fcfedabdd20 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fcfedabd870 @error=nil, @total="34.97", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fcfedabca88 @error=nil, @subtotal="34.97">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fcfedaa7890 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fcfedaa6b98 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fcfedaa4cf8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="2">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fcfec16c7e0 @error=nil, @return_url="http://localhost:3000/orders/69/confirm", @cancel_url="http://localhost:3000/orders/69/cancel">, @logger=#<Logger:0x007fcfea671508 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fcfea6714e0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fcfea671440 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fcfea671418 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fcfea671378>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fcfec081038 @base=#<Payment:0x007fcfec376ab8 ...>, @messages={}>, @request_id="43fda4ef-cadf-4880-8288-b8fc20bde31f", @header={}, @id="PAY-78G72427KL7890420KSUPRLI", @create_time="2015-01-04T08:24:13Z", @update_time="2015-01-04T08:24:13Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fcfedaede30 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-78G72427KL7890420KSUPRLI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfedaeca80 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7BL53131W7131273H", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfedac7668 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-78G72427KL7890420KSUPRLI/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T08:24:14.281447 #29958]  INFO -- : #<Payment:0x007fcfec376ab8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fcfedabf5d0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fcfedabec98 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fcfedabe810 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fcfedabdd20 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fcfedabd870 @error=nil, @total="34.97", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fcfedabca88 @error=nil, @subtotal="34.97">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fcfedaa7890 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fcfedaa6b98 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fcfedaa4cf8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="2">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fcfec16c7e0 @error=nil, @return_url="http://localhost:3000/orders/69/confirm", @cancel_url="http://localhost:3000/orders/69/cancel">, @logger=#<Logger:0x007fcfea671508 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fcfea6714e0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fcfea671440 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fcfea671418 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fcfea671378>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fcfec081038 @base=#<Payment:0x007fcfec376ab8 ...>, @messages={}>, @request_id="43fda4ef-cadf-4880-8288-b8fc20bde31f", @header={}, @id="PAY-78G72427KL7890420KSUPRLI", @create_time="2015-01-04T08:24:13Z", @update_time="2015-01-04T08:24:13Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fcfedaede30 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-78G72427KL7890420KSUPRLI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfedaeca80 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7BL53131W7131273H", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfedac7668 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-78G72427KL7890420KSUPRLI/execute", @rel="execute", @method="POST">]>
D, [2015-01-04T08:24:14.293190 #29958] DEBUG -- :   [1m[35m (8.5ms)[0m  commit transaction
I, [2015-01-04T08:24:14.295798 #29958]  INFO -- : about to approve url
I, [2015-01-04T08:24:14.297668 #29958]  INFO -- : #<Payment:0x007fcfec376ab8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fcfedabf5d0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fcfedabec98 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fcfedabe810 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fcfedabdd20 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fcfedabd870 @error=nil, @total="34.97", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fcfedabca88 @error=nil, @subtotal="34.97">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fcfedaa7890 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fcfedaa6b98 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fcfedaa4cf8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="2">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fcfec16c7e0 @error=nil, @return_url="http://localhost:3000/orders/69/confirm", @cancel_url="http://localhost:3000/orders/69/cancel">, @logger=#<Logger:0x007fcfea671508 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fcfea6714e0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fcfea671440 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fcfea671418 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fcfea671378>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fcfec081038 @base=#<Payment:0x007fcfec376ab8 ...>, @messages={}>, @request_id="43fda4ef-cadf-4880-8288-b8fc20bde31f", @header={}, @id="PAY-78G72427KL7890420KSUPRLI", @create_time="2015-01-04T08:24:13Z", @update_time="2015-01-04T08:24:13Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fcfedaede30 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-78G72427KL7890420KSUPRLI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfedaeca80 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7BL53131W7131273H", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfedac7668 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-78G72427KL7890420KSUPRLI/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T08:24:14.299774 #29958]  INFO -- : #<Payment:0x007fcfec376ab8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fcfedabf5d0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fcfedabec98 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fcfedabe810 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fcfedabdd20 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fcfedabd870 @error=nil, @total="34.97", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fcfedabca88 @error=nil, @subtotal="34.97">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fcfedaa7890 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fcfedaa6b98 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fcfedaa4cf8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="2">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fcfec16c7e0 @error=nil, @return_url="http://localhost:3000/orders/69/confirm", @cancel_url="http://localhost:3000/orders/69/cancel">, @logger=#<Logger:0x007fcfea671508 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fcfea6714e0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fcfea671440 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fcfea671418 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fcfea671378>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fcfec081038 @base=#<Payment:0x007fcfec376ab8 ...>, @messages={}>, @request_id="43fda4ef-cadf-4880-8288-b8fc20bde31f", @header={}, @id="PAY-78G72427KL7890420KSUPRLI", @create_time="2015-01-04T08:24:13Z", @update_time="2015-01-04T08:24:13Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fcfedaede30 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-78G72427KL7890420KSUPRLI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfedaeca80 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7BL53131W7131273H", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfedac7668 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-78G72427KL7890420KSUPRLI/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T08:24:14.300630 #29958]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7BL53131W7131273H
I, [2015-01-04T08:24:14.302314 #29958]  INFO -- : #<Payment:0x007fcfec376ab8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fcfedabf5d0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fcfedabec98 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fcfedabe810 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fcfedabdd20 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fcfedabd870 @error=nil, @total="34.97", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fcfedabca88 @error=nil, @subtotal="34.97">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fcfedaa7890 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fcfedaa6b98 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fcfedaa4cf8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="2">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fcfec16c7e0 @error=nil, @return_url="http://localhost:3000/orders/69/confirm", @cancel_url="http://localhost:3000/orders/69/cancel">, @logger=#<Logger:0x007fcfea671508 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fcfea6714e0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fcfea671440 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fcfea671418 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fcfea671378>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fcfec081038 @base=#<Payment:0x007fcfec376ab8 ...>, @messages={}>, @request_id="43fda4ef-cadf-4880-8288-b8fc20bde31f", @header={}, @id="PAY-78G72427KL7890420KSUPRLI", @create_time="2015-01-04T08:24:13Z", @update_time="2015-01-04T08:24:13Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fcfedaede30 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-78G72427KL7890420KSUPRLI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfedaeca80 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7BL53131W7131273H", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfedac7668 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-78G72427KL7890420KSUPRLI/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T08:24:14.305664 #29958]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7BL53131W7131273H
I, [2015-01-04T08:24:14.308589 #29958]  INFO -- : Completed 403 Forbidden in 48423ms (ActiveRecord: 18.1ms)
D, [2015-01-04T08:24:46.905714 #29958] DEBUG -- : 
D, [2015-01-04T08:24:46.906032 #29958] DEBUG -- : 
I, [2015-01-04T08:24:46.907049 #29958]  INFO -- : Started GET "/orders/69/confirm?paymentId=PAY-78G72427KL7890420KSUPRLI&token=EC-7BL53131W7131273H&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-04 08:24:46 +0000
I, [2015-01-04T08:24:46.933950 #29958]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-04T08:24:46.934819 #29958]  INFO -- :   Parameters: {"paymentId"=>"PAY-78G72427KL7890420KSUPRLI", "token"=>"EC-7BL53131W7131273H", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"69"}
D, [2015-01-04T08:24:46.942089 #29958] DEBUG -- :   [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
D, [2015-01-04T08:24:46.958256 #29958] DEBUG -- :   [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-04T08:24:46.967633 #29958] DEBUG -- :   [1m[36mOrder Load (1.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "69"]]
I, [2015-01-04T08:25:16.894884 #29958]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-78G72427KL7890420KSUPRLI
I, [2015-01-04T08:25:18.617861 #29958]  INFO -- : Response[200]: OK, Duration: 1.722s
D, [2015-01-04T08:25:45.414118 #29958] DEBUG -- :   [1m[35m (0.4ms)[0m  begin transaction
D, [2015-01-04T08:25:45.442623 #29958] DEBUG -- :   [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
I, [2015-01-04T08:29:01.886637 #29958]  INFO -- : Completed 500 Internal Server Error in 254950ms
F, [2015-01-04T08:29:01.896864 #29958] FATAL -- : 
NoMethodError (undefined method `error' for nil:NilClass):
  app/controllers/orders_controller.rb:104:in `confirm'


I, [2015-01-04T08:29:02.707792 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.8ms)
I, [2015-01-04T08:29:02.725128 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (8.2ms)
I, [2015-01-04T08:29:02.739997 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (4.9ms)
I, [2015-01-04T08:29:02.741015 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (51.4ms)
D, [2015-01-04T08:34:20.486742 #29958] DEBUG -- : 
D, [2015-01-04T08:34:20.502389 #29958] DEBUG -- : 
I, [2015-01-04T08:34:20.503381 #29958]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-04 08:34:20 +0000
I, [2015-01-04T08:34:20.736978 #29958]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-04T08:34:20.750046 #29958] DEBUG -- :   [1m[35mCart Load (1.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T08:34:20.805724 #29958] DEBUG -- :   [1m[36mProduct Load (1.4ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-04T08:34:20.817746 #29958]  INFO -- : Read fragment views/store/products/2-20141022062504570899000/a93d4e2e981ab3dfce98a095c3b6c059 (6.6ms)
I, [2015-01-04T08:34:20.819214 #29958]  INFO -- :   Rendered store/index.html.erb within layouts/application (23.3ms)
D, [2015-01-04T08:34:20.903215 #29958] DEBUG -- :   [1m[35mLineItem Exists (0.9ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 53]]
D, [2015-01-04T08:34:20.947480 #29958] DEBUG -- :   [1m[36mLineItem Load (0.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-04T08:34:20.950094 #29958]  INFO -- :   Rendered collection (0.3ms)
I, [2015-01-04T08:34:20.968146 #29958]  INFO -- :   Rendered carts/_cart.html.erb (27.0ms)
I, [2015-01-04T08:34:20.980055 #29958]  INFO -- : Completed 200 OK in 242ms (Views: 222.2ms | ActiveRecord: 3.9ms)
D, [2015-01-04T08:34:21.277328 #29958] DEBUG -- : 
D, [2015-01-04T08:34:21.277762 #29958] DEBUG -- : 
I, [2015-01-04T08:34:21.314415 #29958]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-04 08:34:21 +0000
D, [2015-01-04T08:34:21.364349 #29958] DEBUG -- : 
D, [2015-01-04T08:34:21.364771 #29958] DEBUG -- : 
I, [2015-01-04T08:34:21.365672 #29958]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-04 08:34:21 +0000
D, [2015-01-04T08:34:21.393457 #29958] DEBUG -- : 
D, [2015-01-04T08:34:21.394093 #29958] DEBUG -- : 
I, [2015-01-04T08:34:21.395573 #29958]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-04 08:34:21 +0000
D, [2015-01-04T08:34:21.419680 #29958] DEBUG -- : 
D, [2015-01-04T08:34:21.420206 #29958] DEBUG -- : 
I, [2015-01-04T08:34:21.421157 #29958]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-04 08:34:21 +0000
D, [2015-01-04T08:34:21.453670 #29958] DEBUG -- : 
D, [2015-01-04T08:34:21.454211 #29958] DEBUG -- : 
I, [2015-01-04T08:34:21.455197 #29958]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-04 08:34:21 +0000
D, [2015-01-04T08:34:21.473155 #29958] DEBUG -- : 
D, [2015-01-04T08:34:21.480164 #29958] DEBUG -- : 
I, [2015-01-04T08:34:21.481674 #29958]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-04 08:34:21 +0000
D, [2015-01-04T08:34:21.523228 #29958] DEBUG -- : 
D, [2015-01-04T08:34:21.523742 #29958] DEBUG -- : 
I, [2015-01-04T08:34:21.524941 #29958]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-04 08:34:21 +0000
D, [2015-01-04T08:34:21.545090 #29958] DEBUG -- : 
D, [2015-01-04T08:34:21.545768 #29958] DEBUG -- : 
I, [2015-01-04T08:34:21.546796 #29958]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-04 08:34:21 +0000
D, [2015-01-04T08:34:21.585800 #29958] DEBUG -- : 
D, [2015-01-04T08:34:21.586352 #29958] DEBUG -- : 
I, [2015-01-04T08:34:21.587319 #29958]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-04 08:34:21 +0000
D, [2015-01-04T08:34:21.603323 #29958] DEBUG -- : 
D, [2015-01-04T08:34:21.603973 #29958] DEBUG -- : 
I, [2015-01-04T08:34:21.605981 #29958]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-04 08:34:21 +0000
D, [2015-01-04T08:34:21.634397 #29958] DEBUG -- : 
D, [2015-01-04T08:34:21.634976 #29958] DEBUG -- : 
I, [2015-01-04T08:34:21.635938 #29958]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-04 08:34:21 +0000
D, [2015-01-04T08:34:21.670300 #29958] DEBUG -- : 
D, [2015-01-04T08:34:21.670917 #29958] DEBUG -- : 
I, [2015-01-04T08:34:21.671981 #29958]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-04 08:34:21 +0000
D, [2015-01-04T08:34:21.693402 #29958] DEBUG -- : 
D, [2015-01-04T08:34:21.693981 #29958] DEBUG -- : 
I, [2015-01-04T08:34:21.704388 #29958]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-04 08:34:21 +0000
D, [2015-01-04T08:34:21.733123 #29958] DEBUG -- : 
D, [2015-01-04T08:34:21.733561 #29958] DEBUG -- : 
I, [2015-01-04T08:34:21.735163 #29958]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-04 08:34:21 +0000
D, [2015-01-04T08:34:21.753958 #29958] DEBUG -- : 
D, [2015-01-04T08:34:21.754783 #29958] DEBUG -- : 
I, [2015-01-04T08:34:21.756976 #29958]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-04 08:34:21 +0000
D, [2015-01-04T08:34:21.776745 #29958] DEBUG -- : 
D, [2015-01-04T08:34:21.777184 #29958] DEBUG -- : 
I, [2015-01-04T08:34:21.778265 #29958]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-04 08:34:21 +0000
D, [2015-01-04T08:34:21.820822 #29958] DEBUG -- : 
D, [2015-01-04T08:34:21.821492 #29958] DEBUG -- : 
I, [2015-01-04T08:34:21.822503 #29958]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-04 08:34:21 +0000
D, [2015-01-04T08:34:21.857681 #29958] DEBUG -- : 
D, [2015-01-04T08:34:21.859881 #29958] DEBUG -- : 
I, [2015-01-04T08:34:21.861003 #29958]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-04 08:34:21 +0000
D, [2015-01-04T08:34:21.884215 #29958] DEBUG -- : 
D, [2015-01-04T08:34:21.884781 #29958] DEBUG -- : 
I, [2015-01-04T08:34:21.885738 #29958]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-04 08:34:21 +0000
D, [2015-01-04T08:34:21.917900 #29958] DEBUG -- : 
D, [2015-01-04T08:34:21.918905 #29958] DEBUG -- : 
I, [2015-01-04T08:34:21.919894 #29958]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-04 08:34:21 +0000
D, [2015-01-04T08:34:21.953516 #29958] DEBUG -- : 
D, [2015-01-04T08:34:21.954074 #29958] DEBUG -- : 
I, [2015-01-04T08:34:21.955094 #29958]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-04 08:34:21 +0000
D, [2015-01-04T08:34:21.971844 #29958] DEBUG -- : 
D, [2015-01-04T08:34:21.972333 #29958] DEBUG -- : 
I, [2015-01-04T08:34:21.973410 #29958]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-04 08:34:21 +0000
D, [2015-01-04T08:34:22.008123 #29958] DEBUG -- : 
D, [2015-01-04T08:34:22.008629 #29958] DEBUG -- : 
I, [2015-01-04T08:34:22.009643 #29958]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-04 08:34:22 +0000
D, [2015-01-04T08:34:22.032063 #29958] DEBUG -- : 
D, [2015-01-04T08:34:22.033636 #29958] DEBUG -- : 
I, [2015-01-04T08:34:22.034735 #29958]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-04 08:34:22 +0000
D, [2015-01-04T08:34:22.051874 #29958] DEBUG -- : 
D, [2015-01-04T08:34:22.052379 #29958] DEBUG -- : 
I, [2015-01-04T08:34:22.053467 #29958]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-04 08:34:22 +0000
D, [2015-01-04T08:34:22.072555 #29958] DEBUG -- : 
D, [2015-01-04T08:34:22.073296 #29958] DEBUG -- : 
I, [2015-01-04T08:34:22.074186 #29958]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-04 08:34:22 +0000
D, [2015-01-04T08:34:22.092713 #29958] DEBUG -- : 
D, [2015-01-04T08:34:22.093214 #29958] DEBUG -- : 
I, [2015-01-04T08:34:22.094195 #29958]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-04 08:34:22 +0000
D, [2015-01-04T08:34:22.132536 #29958] DEBUG -- : 
D, [2015-01-04T08:34:22.134904 #29958] DEBUG -- : 
I, [2015-01-04T08:34:22.135862 #29958]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-04 08:34:22 +0000
D, [2015-01-04T08:34:22.172868 #29958] DEBUG -- : 
D, [2015-01-04T08:34:22.173466 #29958] DEBUG -- : 
I, [2015-01-04T08:34:22.174317 #29958]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-04 08:34:22 +0000
D, [2015-01-04T08:34:25.144796 #29958] DEBUG -- : 
D, [2015-01-04T08:34:25.145376 #29958] DEBUG -- : 
I, [2015-01-04T08:34:25.146467 #29958]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-04 08:34:25 +0000
I, [2015-01-04T08:34:25.167005 #29958]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T08:34:25.167753 #29958]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-04T08:34:25.178426 #29958] DEBUG -- :   [1m[35mCart Load (0.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T08:34:25.186037 #29958] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-04T08:34:25.196851 #29958] DEBUG -- :   [1m[35mLineItem Load (0.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 53]]
D, [2015-01-04T08:34:25.209699 #29958] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-04T08:34:25.214881 #29958] DEBUG -- :   [1m[35m (0.7ms)[0m  begin transaction
D, [2015-01-04T08:34:25.233903 #29958] DEBUG -- :   [1m[36mSQL (7.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 53], ["created_at", Sun, 04 Jan 2015 08:34:25 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7fcfec525eb8,'0.1299E2',18(36)>], ["size", "extra small"], ["updated_at", Sun, 04 Jan 2015 08:34:25 UTC +00:00]]
D, [2015-01-04T08:34:25.241320 #29958] DEBUG -- :   [1m[35m (3.9ms)[0m  commit transaction
D, [2015-01-04T08:34:25.278732 #29958] DEBUG -- :   [1m[36mLineItem Load (0.7ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-04T08:34:25.312749 #29958]  INFO -- :   Rendered line_items/_line_item.html.erb (8.3ms)
I, [2015-01-04T08:34:25.328940 #29958]  INFO -- :   Rendered carts/_cart.html.erb (55.2ms)
I, [2015-01-04T08:34:25.331098 #29958]  INFO -- :   Rendered line_items/create.js.erb (61.5ms)
I, [2015-01-04T08:34:25.333272 #29958]  INFO -- : Completed 200 OK in 164ms (Views: 87.6ms | ActiveRecord: 14.7ms)
D, [2015-01-04T08:34:26.390105 #29958] DEBUG -- : 
D, [2015-01-04T08:34:26.390779 #29958] DEBUG -- : 
I, [2015-01-04T08:34:26.392165 #29958]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-04 08:34:26 +0000
I, [2015-01-04T08:34:26.415725 #29958]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T08:34:26.417055 #29958]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-04T08:34:26.426788 #29958] DEBUG -- :   [1m[35mCart Load (0.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T08:34:26.433766 #29958] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-04T08:34:26.445413 #29958] DEBUG -- :   [1m[35mLineItem Load (0.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 53]]
D, [2015-01-04T08:34:26.458259 #29958] DEBUG -- :   [1m[36mProduct Load (0.7ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-04T08:34:26.463406 #29958] DEBUG -- :   [1m[35m (0.6ms)[0m  begin transaction
D, [2015-01-04T08:34:26.476787 #29958] DEBUG -- :   [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 53], ["created_at", Sun, 04 Jan 2015 08:34:26 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:7fcfe9f76d98,'0.1099E2',18(36)>], ["size", "extra small"], ["updated_at", Sun, 04 Jan 2015 08:34:26 UTC +00:00]]
D, [2015-01-04T08:34:26.488178 #29958] DEBUG -- :   [1m[35m (7.9ms)[0m  commit transaction
D, [2015-01-04T08:34:26.506130 #29958] DEBUG -- :   [1m[36mLineItem Load (0.8ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
D, [2015-01-04T08:34:26.534106 #29958] DEBUG -- :   [1m[35mProduct Load (0.7ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-04T08:34:26.548817 #29958]  INFO -- :   Rendered line_items/_line_item.html.erb (29.2ms)
I, [2015-01-04T08:34:26.564822 #29958]  INFO -- :   Rendered carts/_cart.html.erb (63.9ms)
I, [2015-01-04T08:34:26.567082 #29958]  INFO -- :   Rendered line_items/create.js.erb (69.8ms)
I, [2015-01-04T08:34:26.569134 #29958]  INFO -- : Completed 200 OK in 151ms (Views: 76.3ms | ActiveRecord: 14.8ms)
D, [2015-01-04T08:34:28.313948 #29958] DEBUG -- : 
D, [2015-01-04T08:34:28.314560 #29958] DEBUG -- : 
I, [2015-01-04T08:34:28.315391 #29958]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-04 08:34:28 +0000
I, [2015-01-04T08:34:28.334093 #29958]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-04T08:34:28.342968 #29958] DEBUG -- :   [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
D, [2015-01-04T08:34:28.349548 #29958] DEBUG -- :   [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-04T08:34:28.356246 #29958] DEBUG -- :   [1m[36mCart Load (0.7ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-04T08:34:28.367473 #29958] DEBUG -- :   [1m[35mLineItem Load (0.7ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
I, [2015-01-04T08:34:28.380726 #29958]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-04T08:34:35.983236 #29958] DEBUG -- :   [1m[36m (0.8ms)[0m  [1mbegin transaction[0m
D, [2015-01-04T08:34:36.018399 #29958] DEBUG -- :   [1m[35mSQL (24.2ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Sun, 04 Jan 2015 08:34:35 UTC +00:00], ["updated_at", Sun, 04 Jan 2015 08:34:35 UTC +00:00]]
D, [2015-01-04T08:34:36.036050 #29958] DEBUG -- :   [1m[36mSQL (1.8ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 129[0m  [["cart_id", nil], ["order_id", 70], ["updated_at", Sun, 04 Jan 2015 08:34:36 UTC +00:00]]
D, [2015-01-04T08:34:36.051230 #29958] DEBUG -- :   [1m[35mSQL (1.4ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 130  [["cart_id", nil], ["order_id", 70], ["updated_at", Sun, 04 Jan 2015 08:34:36 UTC +00:00]]
I, [2015-01-04T08:34:36.053187 #29958]  INFO -- : about to @payment.create
D, [2015-01-04T08:34:38.314705 #29958] DEBUG -- :   [1m[36mProduct Load (0.7ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-04T08:34:38.325361 #29958] DEBUG -- :   [1m[35mProduct Load (0.7ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
I, [2015-01-04T08:34:41.000651 #29958]  INFO -- : in order=
I, [2015-01-04T08:34:41.003187 #29958]  INFO -- : in payment.create
I, [2015-01-04T08:34:41.010528 #29958]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/70/confirm", "cancel_url"=>"http://localhost:3000/orders/70/cancel"}}
I, [2015-01-04T08:34:41.012089 #29958]  INFO -- : #<ActiveModel::Errors:0x007fcfec517548 @base=#<Payment:0x007fcfec684188 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fcfec67f0c0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fcfec57c650 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fcfec57c0d8 @error=nil, @total="23.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fcfed8d0d00 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fcfed8c9500 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fcfed8bb860 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fcfec53d270 @error=nil, @return_url="http://localhost:3000/orders/70/confirm", @cancel_url="http://localhost:3000/orders/70/cancel">, @logger=#<Logger:0x007fcfea671508 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fcfea6714e0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fcfea671440 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fcfea671418 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fcfea671378>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fcfec517548 ...>>, @messages={}>
I, [2015-01-04T08:34:41.012752 #29958]  INFO -- : got past invalid
I, [2015-01-04T08:34:41.039661 #29958]  INFO -- : PayPal-Request-Id: 0d1c6b4d-ed67-4aca-b390-9dea69159294
I, [2015-01-04T08:34:41.040447 #29958]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-04T08:34:42.889356 #29958]  INFO -- : Response[201]: Created, Duration: 1.848s
I, [2015-01-04T08:34:42.896358 #29958]  INFO -- : back from super
I, [2015-01-04T08:34:42.906532 #29958]  INFO -- : {"id"=>"PAY-71958378S2061141DKSUPWIQ", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98", "details"=>{"subtotal"=>"23.98"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/70/confirm", "cancel_url"=>"http://localhost:3000/orders/70/cancel"}, "create_time"=>"2015-01-04T08:34:42Z", "update_time"=>"2015-01-04T08:34:42Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-71958378S2061141DKSUPWIQ", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-2RC01141L6461482D", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-71958378S2061141DKSUPWIQ/execute", "rel"=>"execute", "method"=>"POST"}]}
I, [2015-01-04T08:34:42.951131 #29958]  INFO -- : @payment save just done
I, [2015-01-04T08:34:42.952695 #29958]  INFO -- : #<Payment:0x007fcfec684188 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fcfec47e938 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fcfec47dbc8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fcfec47d420 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fcfec47c4d0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fcfea7d3a18 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fcfea7d2a50 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fcfea7d1cb8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fcfea7d1268 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fcfea7cb4f8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fcfec53d270 @error=nil, @return_url="http://localhost:3000/orders/70/confirm", @cancel_url="http://localhost:3000/orders/70/cancel">, @logger=#<Logger:0x007fcfea671508 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fcfea6714e0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fcfea671440 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fcfea671418 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fcfea671378>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fcfec517548 @base=#<Payment:0x007fcfec684188 ...>, @messages={}>, @request_id="0d1c6b4d-ed67-4aca-b390-9dea69159294", @header={}, @id="PAY-71958378S2061141DKSUPWIQ", @create_time="2015-01-04T08:34:42Z", @update_time="2015-01-04T08:34:42Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fcfea7c8370 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-71958378S2061141DKSUPWIQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfea7c32d0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-2RC01141L6461482D", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfea7c2150 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-71958378S2061141DKSUPWIQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T08:34:42.953948 #29958]  INFO -- : #<Payment:0x007fcfec684188 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fcfec47e938 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fcfec47dbc8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fcfec47d420 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fcfec47c4d0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fcfea7d3a18 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fcfea7d2a50 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fcfea7d1cb8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fcfea7d1268 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fcfea7cb4f8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fcfec53d270 @error=nil, @return_url="http://localhost:3000/orders/70/confirm", @cancel_url="http://localhost:3000/orders/70/cancel">, @logger=#<Logger:0x007fcfea671508 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fcfea6714e0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fcfea671440 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fcfea671418 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fcfea671378>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fcfec517548 @base=#<Payment:0x007fcfec684188 ...>, @messages={}>, @request_id="0d1c6b4d-ed67-4aca-b390-9dea69159294", @header={}, @id="PAY-71958378S2061141DKSUPWIQ", @create_time="2015-01-04T08:34:42Z", @update_time="2015-01-04T08:34:42Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fcfea7c8370 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-71958378S2061141DKSUPWIQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfea7c32d0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-2RC01141L6461482D", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfea7c2150 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-71958378S2061141DKSUPWIQ/execute", @rel="execute", @method="POST">]>
D, [2015-01-04T08:34:42.965882 #29958] DEBUG -- :   [1m[36m (8.2ms)[0m  [1mcommit transaction[0m
I, [2015-01-04T08:34:42.967505 #29958]  INFO -- : about to approve url
I, [2015-01-04T08:34:42.969600 #29958]  INFO -- : #<Payment:0x007fcfec684188 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fcfec47e938 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fcfec47dbc8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fcfec47d420 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fcfec47c4d0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fcfea7d3a18 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fcfea7d2a50 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fcfea7d1cb8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fcfea7d1268 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fcfea7cb4f8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fcfec53d270 @error=nil, @return_url="http://localhost:3000/orders/70/confirm", @cancel_url="http://localhost:3000/orders/70/cancel">, @logger=#<Logger:0x007fcfea671508 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fcfea6714e0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fcfea671440 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fcfea671418 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fcfea671378>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fcfec517548 @base=#<Payment:0x007fcfec684188 ...>, @messages={}>, @request_id="0d1c6b4d-ed67-4aca-b390-9dea69159294", @header={}, @id="PAY-71958378S2061141DKSUPWIQ", @create_time="2015-01-04T08:34:42Z", @update_time="2015-01-04T08:34:42Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fcfea7c8370 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-71958378S2061141DKSUPWIQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfea7c32d0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-2RC01141L6461482D", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfea7c2150 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-71958378S2061141DKSUPWIQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T08:34:42.971353 #29958]  INFO -- : #<Payment:0x007fcfec684188 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fcfec47e938 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fcfec47dbc8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fcfec47d420 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fcfec47c4d0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fcfea7d3a18 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fcfea7d2a50 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fcfea7d1cb8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fcfea7d1268 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fcfea7cb4f8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fcfec53d270 @error=nil, @return_url="http://localhost:3000/orders/70/confirm", @cancel_url="http://localhost:3000/orders/70/cancel">, @logger=#<Logger:0x007fcfea671508 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fcfea6714e0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fcfea671440 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fcfea671418 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fcfea671378>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fcfec517548 @base=#<Payment:0x007fcfec684188 ...>, @messages={}>, @request_id="0d1c6b4d-ed67-4aca-b390-9dea69159294", @header={}, @id="PAY-71958378S2061141DKSUPWIQ", @create_time="2015-01-04T08:34:42Z", @update_time="2015-01-04T08:34:42Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fcfea7c8370 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-71958378S2061141DKSUPWIQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfea7c32d0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-2RC01141L6461482D", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfea7c2150 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-71958378S2061141DKSUPWIQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T08:34:42.972367 #29958]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-2RC01141L6461482D
I, [2015-01-04T08:34:42.974553 #29958]  INFO -- : #<Payment:0x007fcfec684188 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fcfec47e938 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fcfec47dbc8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fcfec47d420 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fcfec47c4d0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fcfea7d3a18 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fcfea7d2a50 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fcfea7d1cb8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fcfea7d1268 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fcfea7cb4f8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fcfec53d270 @error=nil, @return_url="http://localhost:3000/orders/70/confirm", @cancel_url="http://localhost:3000/orders/70/cancel">, @logger=#<Logger:0x007fcfea671508 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fcfea6714e0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fcfea671440 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fcfea671418 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fcfea671378>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fcfec517548 @base=#<Payment:0x007fcfec684188 ...>, @messages={}>, @request_id="0d1c6b4d-ed67-4aca-b390-9dea69159294", @header={}, @id="PAY-71958378S2061141DKSUPWIQ", @create_time="2015-01-04T08:34:42Z", @update_time="2015-01-04T08:34:42Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fcfea7c8370 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-71958378S2061141DKSUPWIQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfea7c32d0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-2RC01141L6461482D", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfea7c2150 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-71958378S2061141DKSUPWIQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T08:34:42.977493 #29958]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-2RC01141L6461482D
I, [2015-01-04T08:34:42.980933 #29958]  INFO -- : Completed 403 Forbidden in 14646ms (ActiveRecord: 40.5ms)
D, [2015-01-04T08:35:14.419297 #29958] DEBUG -- : 
D, [2015-01-04T08:35:14.419708 #29958] DEBUG -- : 
I, [2015-01-04T08:35:14.420823 #29958]  INFO -- : Started GET "/orders/70/confirm?paymentId=PAY-71958378S2061141DKSUPWIQ&token=EC-2RC01141L6461482D&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-04 08:35:14 +0000
I, [2015-01-04T08:35:14.435956 #29958]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-04T08:35:14.436538 #29958]  INFO -- :   Parameters: {"paymentId"=>"PAY-71958378S2061141DKSUPWIQ", "token"=>"EC-2RC01141L6461482D", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"70"}
D, [2015-01-04T08:35:14.448094 #29958] DEBUG -- :   [1m[35mUser Load (3.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
D, [2015-01-04T08:35:14.453852 #29958] DEBUG -- :   [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-04T08:35:14.460586 #29958] DEBUG -- :   [1m[35mOrder Load (0.6ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "70"]]
I, [2015-01-04T08:35:25.428687 #29958]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-71958378S2061141DKSUPWIQ
I, [2015-01-04T08:35:26.886433 #29958]  INFO -- : Response[200]: OK, Duration: 1.457s
D, [2015-01-04T08:37:52.957579 #29958] DEBUG -- :   [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
D, [2015-01-04T08:37:52.970983 #29958] DEBUG -- :   [1m[35m (1.9ms)[0m  rollback transaction
I, [2015-01-04T08:37:52.974259 #29958]  INFO -- : Completed 500 Internal Server Error in 158537ms
F, [2015-01-04T08:37:52.983686 #29958] FATAL -- : 
NoMethodError (undefined method `error' for nil:NilClass):
  app/controllers/orders_controller.rb:104:in `confirm'


I, [2015-01-04T08:37:53.295523 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (4.7ms)
I, [2015-01-04T08:37:53.310400 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (6.9ms)
I, [2015-01-04T08:37:53.323536 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (4.9ms)
I, [2015-01-04T08:37:53.324452 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (43.6ms)
D, [2015-01-04T08:40:44.186288 #29958] DEBUG -- : 
D, [2015-01-04T08:40:44.186627 #29958] DEBUG -- : 
I, [2015-01-04T08:40:44.189209 #29958]  INFO -- : Started GET "/orders/70/confirm?paymentId=PAY-71958378S2061141DKSUPWIQ&token=EC-2RC01141L6461482D&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-04 08:40:44 +0000
I, [2015-01-04T08:40:45.444595 #29958]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-04T08:40:45.445371 #29958]  INFO -- :   Parameters: {"paymentId"=>"PAY-71958378S2061141DKSUPWIQ", "token"=>"EC-2RC01141L6461482D", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"70"}
D, [2015-01-04T08:40:45.480768 #29958] DEBUG -- :   [1m[36mUser Load (1.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
D, [2015-01-04T08:40:45.537835 #29958] DEBUG -- :   [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-04T08:40:45.578168 #29958] DEBUG -- :   [1m[36mOrder Load (1.4ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "70"]]
I, [2015-01-04T08:40:57.093527 #29958]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-71958378S2061141DKSUPWIQ
I, [2015-01-04T08:40:58.669626 #29958]  INFO -- : Response[200]: OK, Duration: 1.575s
D, [2015-01-04T08:42:01.037125 #29958] DEBUG -- :   [1m[35m (0.5ms)[0m  begin transaction
D, [2015-01-04T08:42:01.054552 #29958] DEBUG -- :   [1m[36mSQL (1.6ms)[0m  [1mUPDATE "orders" SET "name" = ?, "email" = ?, "address" = ?, "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 70[0m  [["name", "Test Buyer"], ["email", "simon.king65-buyer@gmail.com"], ["address", "1 Main Terrace"], ["shipping_address1", "1 Main Terrace"], ["updated_at", Sun, 04 Jan 2015 08:42:01 UTC +00:00]]
D, [2015-01-04T08:42:01.059154 #29958] DEBUG -- :   [1m[35m (2.3ms)[0m  commit transaction
I, [2015-01-04T08:42:01.293163 #29958]  INFO -- :   Rendered orders/_form.html.erb (128.3ms)
I, [2015-01-04T08:42:01.299065 #29958]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (156.0ms)
I, [2015-01-04T08:42:01.354252 #29958]  INFO -- : Completed 200 OK in 75908ms (Views: 292.0ms | ActiveRecord: 13.1ms)
D, [2015-01-04T08:42:01.456359 #29958] DEBUG -- : 
D, [2015-01-04T08:42:01.456691 #29958] DEBUG -- : 
I, [2015-01-04T08:42:01.457467 #29958]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-04 08:42:01 +0000
D, [2015-01-04T08:42:01.534435 #29958] DEBUG -- : 
D, [2015-01-04T08:42:01.534967 #29958] DEBUG -- : 
I, [2015-01-04T08:42:01.536004 #29958]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-04 08:42:01 +0000
D, [2015-01-04T08:42:01.571459 #29958] DEBUG -- : 
D, [2015-01-04T08:42:01.571929 #29958] DEBUG -- : 
I, [2015-01-04T08:42:01.573021 #29958]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-04 08:42:01 +0000
D, [2015-01-04T08:42:01.600105 #29958] DEBUG -- : 
D, [2015-01-04T08:42:01.601174 #29958] DEBUG -- : 
I, [2015-01-04T08:42:01.602178 #29958]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-04 08:42:01 +0000
D, [2015-01-04T08:42:01.635366 #29958] DEBUG -- : 
D, [2015-01-04T08:42:01.635808 #29958] DEBUG -- : 
I, [2015-01-04T08:42:01.636697 #29958]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-04 08:42:01 +0000
D, [2015-01-04T08:42:01.662734 #29958] DEBUG -- : 
D, [2015-01-04T08:42:01.663259 #29958] DEBUG -- : 
I, [2015-01-04T08:42:01.664268 #29958]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-04 08:42:01 +0000
D, [2015-01-04T08:42:01.685004 #29958] DEBUG -- : 
D, [2015-01-04T08:42:01.685588 #29958] DEBUG -- : 
I, [2015-01-04T08:42:01.686627 #29958]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-04 08:42:01 +0000
D, [2015-01-04T08:42:01.712851 #29958] DEBUG -- : 
D, [2015-01-04T08:42:01.713482 #29958] DEBUG -- : 
I, [2015-01-04T08:42:01.714528 #29958]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-04 08:42:01 +0000
D, [2015-01-04T08:42:01.747952 #29958] DEBUG -- : 
D, [2015-01-04T08:42:01.748525 #29958] DEBUG -- : 
I, [2015-01-04T08:42:01.749538 #29958]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-04 08:42:01 +0000
D, [2015-01-04T08:42:01.774456 #29958] DEBUG -- : 
D, [2015-01-04T08:42:01.775623 #29958] DEBUG -- : 
I, [2015-01-04T08:42:01.776619 #29958]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-04 08:42:01 +0000
D, [2015-01-04T08:42:01.801788 #29958] DEBUG -- : 
D, [2015-01-04T08:42:01.802290 #29958] DEBUG -- : 
I, [2015-01-04T08:42:01.803380 #29958]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-04 08:42:01 +0000
D, [2015-01-04T08:42:01.836525 #29958] DEBUG -- : 
D, [2015-01-04T08:42:01.837080 #29958] DEBUG -- : 
I, [2015-01-04T08:42:01.838041 #29958]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-04 08:42:01 +0000
D, [2015-01-04T08:42:01.870160 #29958] DEBUG -- : 
D, [2015-01-04T08:42:01.870597 #29958] DEBUG -- : 
I, [2015-01-04T08:42:01.871830 #29958]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-04 08:42:01 +0000
D, [2015-01-04T08:42:01.890753 #29958] DEBUG -- : 
D, [2015-01-04T08:42:01.891210 #29958] DEBUG -- : 
I, [2015-01-04T08:42:01.892313 #29958]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-04 08:42:01 +0000
D, [2015-01-04T08:42:01.919012 #29958] DEBUG -- : 
D, [2015-01-04T08:42:01.919516 #29958] DEBUG -- : 
I, [2015-01-04T08:42:01.920600 #29958]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-04 08:42:01 +0000
D, [2015-01-04T08:42:01.949980 #29958] DEBUG -- : 
D, [2015-01-04T08:42:01.950484 #29958] DEBUG -- : 
I, [2015-01-04T08:42:01.951478 #29958]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-04 08:42:01 +0000
D, [2015-01-04T08:42:01.985356 #29958] DEBUG -- : 
D, [2015-01-04T08:42:01.986043 #29958] DEBUG -- : 
I, [2015-01-04T08:42:01.987273 #29958]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-04 08:42:01 +0000
D, [2015-01-04T08:42:02.010365 #29958] DEBUG -- : 
D, [2015-01-04T08:42:02.016906 #29958] DEBUG -- : 
I, [2015-01-04T08:42:02.017931 #29958]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-04 08:42:02 +0000
D, [2015-01-04T08:42:02.049265 #29958] DEBUG -- : 
D, [2015-01-04T08:42:02.049715 #29958] DEBUG -- : 
I, [2015-01-04T08:42:02.051095 #29958]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-04 08:42:02 +0000
D, [2015-01-04T08:42:02.077909 #29958] DEBUG -- : 
D, [2015-01-04T08:42:02.078586 #29958] DEBUG -- : 
I, [2015-01-04T08:42:02.079699 #29958]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-04 08:42:02 +0000
D, [2015-01-04T08:42:02.122545 #29958] DEBUG -- : 
D, [2015-01-04T08:42:02.123040 #29958] DEBUG -- : 
I, [2015-01-04T08:42:02.123936 #29958]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-04 08:42:02 +0000
D, [2015-01-04T08:42:02.139961 #29958] DEBUG -- : 
D, [2015-01-04T08:42:02.140571 #29958] DEBUG -- : 
I, [2015-01-04T08:42:02.142450 #29958]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-04 08:42:02 +0000
D, [2015-01-04T08:42:02.161024 #29958] DEBUG -- : 
D, [2015-01-04T08:42:02.161564 #29958] DEBUG -- : 
I, [2015-01-04T08:42:02.162553 #29958]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-04 08:42:02 +0000
D, [2015-01-04T08:42:02.190793 #29958] DEBUG -- : 
D, [2015-01-04T08:42:02.191316 #29958] DEBUG -- : 
I, [2015-01-04T08:42:02.192234 #29958]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-04 08:42:02 +0000
D, [2015-01-04T08:42:02.210357 #29958] DEBUG -- : 
D, [2015-01-04T08:42:02.210797 #29958] DEBUG -- : 
I, [2015-01-04T08:42:02.211822 #29958]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-04 08:42:02 +0000
D, [2015-01-04T08:42:02.231296 #29958] DEBUG -- : 
D, [2015-01-04T08:42:02.231859 #29958] DEBUG -- : 
I, [2015-01-04T08:42:02.233023 #29958]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-04 08:42:02 +0000
D, [2015-01-04T08:42:02.249662 #29958] DEBUG -- : 
D, [2015-01-04T08:42:02.250264 #29958] DEBUG -- : 
I, [2015-01-04T08:42:02.250949 #29958]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-04 08:42:02 +0000
D, [2015-01-04T08:45:26.414813 #29958] DEBUG -- : 
D, [2015-01-04T08:45:26.415131 #29958] DEBUG -- : 
I, [2015-01-04T08:45:26.415677 #29958]  INFO -- : Started POST "/orders/70/execute/70/2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-04 08:45:26 +0000
I, [2015-01-04T08:45:27.269766 #29958]  INFO -- : Processing by OrdersController#execute as HTML
I, [2015-01-04T08:45:27.270335 #29958]  INFO -- :   Parameters: {"authenticity_token"=>"ohbtEjIJsyqL+SAcUq0N+GSOROzNN7MrL8IuyZOU47c=", "order_id"=>"70", "payer_id"=>"2VZ7YQDDDPPC4"}
D, [2015-01-04T08:45:27.303110 #29958] DEBUG -- :   [1m[36mOrder Load (0.9ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "70"]]
I, [2015-01-04T08:46:23.791777 #29958]  INFO -- : Completed 500 Internal Server Error in 56520ms
F, [2015-01-04T08:46:23.802035 #29958] FATAL -- : 
NoMethodError (undefined method `execute' for nil:NilClass):
  app/models/order.rb:63:in `execute'
  app/controllers/orders_controller.rb:78:in `execute'


I, [2015-01-04T08:46:23.873276 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.1ms)
I, [2015-01-04T08:46:23.887175 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (6.7ms)
I, [2015-01-04T08:46:23.901236 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (4.9ms)
I, [2015-01-04T08:46:23.902053 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (44.6ms)
D, [2015-01-04T08:50:40.909039 #29958] DEBUG -- : 
D, [2015-01-04T08:50:40.910256 #29958] DEBUG -- : 
I, [2015-01-04T08:50:40.911108 #29958]  INFO -- : Started POST "/orders/70/execute/70/2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-04 08:50:40 +0000
I, [2015-01-04T08:50:42.033293 #29958]  INFO -- : Processing by OrdersController#execute as HTML
I, [2015-01-04T08:50:42.034042 #29958]  INFO -- :   Parameters: {"authenticity_token"=>"ohbtEjIJsyqL+SAcUq0N+GSOROzNN7MrL8IuyZOU47c=", "order_id"=>"70", "payer_id"=>"2VZ7YQDDDPPC4"}
D, [2015-01-04T08:50:42.084108 #29958] DEBUG -- :   [1m[35mOrder Load (1.1ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "70"]]
I, [2015-01-04T08:50:50.290012 #29958]  INFO -- : Completed 500 Internal Server Error in 8255ms
F, [2015-01-04T08:50:50.304100 #29958] FATAL -- : 
ArgumentError (id required):
  app/models/order.rb:62:in `execute'
  app/controllers/orders_controller.rb:78:in `execute'


I, [2015-01-04T08:50:50.387108 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.3ms)
I, [2015-01-04T08:50:50.405995 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (9.6ms)
I, [2015-01-04T08:50:50.420787 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (6.2ms)
I, [2015-01-04T08:50:50.422045 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (53.0ms)
D, [2015-01-04T08:54:07.338141 #29958] DEBUG -- : 
D, [2015-01-04T08:54:07.338598 #29958] DEBUG -- : 
I, [2015-01-04T08:54:07.339302 #29958]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-04 08:54:07 +0000
I, [2015-01-04T08:54:08.576175 #29958]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-04T08:54:08.620603 #29958] DEBUG -- :   [1m[36mCart Load (0.9ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-04T08:54:08.706152 #29958] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-04T08:54:08.803282 #29958]  INFO -- : Read fragment views/store/products/2-20141022062504570899000/a93d4e2e981ab3dfce98a095c3b6c059 (3.1ms)
I, [2015-01-04T08:54:08.804776 #29958]  INFO -- :   Rendered store/index.html.erb within layouts/application (103.7ms)
D, [2015-01-04T08:54:08.927967 #29958] DEBUG -- :   [1m[36mLineItem Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 53]]
D, [2015-01-04T08:54:08.938830 #29958] DEBUG -- :   [1m[35mLineItem Load (1.1ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
I, [2015-01-04T08:54:08.941332 #29958]  INFO -- :   Rendered collection (0.3ms)
I, [2015-01-04T08:54:08.976669 #29958]  INFO -- :   Rendered carts/_cart.html.erb (43.1ms)
I, [2015-01-04T08:54:08.989439 #29958]  INFO -- : Completed 200 OK in 411ms (Views: 285.7ms | ActiveRecord: 13.8ms)
D, [2015-01-04T08:54:09.156532 #29958] DEBUG -- : 
D, [2015-01-04T08:54:09.156982 #29958] DEBUG -- : 
I, [2015-01-04T08:54:09.158126 #29958]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-04 08:54:09 +0000
D, [2015-01-04T08:54:09.200220 #29958] DEBUG -- : 
D, [2015-01-04T08:54:09.200801 #29958] DEBUG -- : 
I, [2015-01-04T08:54:09.210722 #29958]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-04 08:54:09 +0000
D, [2015-01-04T08:54:09.248208 #29958] DEBUG -- : 
D, [2015-01-04T08:54:09.256639 #29958] DEBUG -- : 
I, [2015-01-04T08:54:09.257898 #29958]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-04 08:54:09 +0000
D, [2015-01-04T08:54:09.279730 #29958] DEBUG -- : 
D, [2015-01-04T08:54:09.288509 #29958] DEBUG -- : 
I, [2015-01-04T08:54:09.292498 #29958]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-04 08:54:09 +0000
D, [2015-01-04T08:54:09.308972 #29958] DEBUG -- : 
D, [2015-01-04T08:54:09.309538 #29958] DEBUG -- : 
I, [2015-01-04T08:54:09.310734 #29958]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-04 08:54:09 +0000
D, [2015-01-04T08:54:09.327342 #29958] DEBUG -- : 
D, [2015-01-04T08:54:09.328034 #29958] DEBUG -- : 
I, [2015-01-04T08:54:09.330417 #29958]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-04 08:54:09 +0000
D, [2015-01-04T08:54:09.375216 #29958] DEBUG -- : 
D, [2015-01-04T08:54:09.375869 #29958] DEBUG -- : 
I, [2015-01-04T08:54:09.376969 #29958]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-04 08:54:09 +0000
D, [2015-01-04T08:54:09.396226 #29958] DEBUG -- : 
D, [2015-01-04T08:54:09.396874 #29958] DEBUG -- : 
I, [2015-01-04T08:54:09.408370 #29958]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-04 08:54:09 +0000
D, [2015-01-04T08:54:09.426072 #29958] DEBUG -- : 
D, [2015-01-04T08:54:09.426822 #29958] DEBUG -- : 
I, [2015-01-04T08:54:09.428261 #29958]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-04 08:54:09 +0000
D, [2015-01-04T08:54:09.456151 #29958] DEBUG -- : 
D, [2015-01-04T08:54:09.456836 #29958] DEBUG -- : 
I, [2015-01-04T08:54:09.458330 #29958]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-04 08:54:09 +0000
D, [2015-01-04T08:54:09.486477 #29958] DEBUG -- : 
D, [2015-01-04T08:54:09.487074 #29958] DEBUG -- : 
I, [2015-01-04T08:54:09.488514 #29958]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-04 08:54:09 +0000
D, [2015-01-04T08:54:09.525701 #29958] DEBUG -- : 
D, [2015-01-04T08:54:09.526304 #29958] DEBUG -- : 
I, [2015-01-04T08:54:09.527274 #29958]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-04 08:54:09 +0000
D, [2015-01-04T08:54:09.546311 #29958] DEBUG -- : 
D, [2015-01-04T08:54:09.546924 #29958] DEBUG -- : 
I, [2015-01-04T08:54:09.549477 #29958]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-04 08:54:09 +0000
D, [2015-01-04T08:54:09.579098 #29958] DEBUG -- : 
D, [2015-01-04T08:54:09.579659 #29958] DEBUG -- : 
I, [2015-01-04T08:54:09.580677 #29958]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-04 08:54:09 +0000
D, [2015-01-04T08:54:09.621466 #29958] DEBUG -- : 
D, [2015-01-04T08:54:09.621983 #29958] DEBUG -- : 
I, [2015-01-04T08:54:09.622987 #29958]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-04 08:54:09 +0000
D, [2015-01-04T08:54:09.647624 #29958] DEBUG -- : 
D, [2015-01-04T08:54:09.648146 #29958] DEBUG -- : 
I, [2015-01-04T08:54:09.649079 #29958]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-04 08:54:09 +0000
D, [2015-01-04T08:54:09.705286 #29958] DEBUG -- : 
D, [2015-01-04T08:54:09.706240 #29958] DEBUG -- : 
I, [2015-01-04T08:54:09.707668 #29958]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-04 08:54:09 +0000
D, [2015-01-04T08:54:09.731489 #29958] DEBUG -- : 
D, [2015-01-04T08:54:09.731963 #29958] DEBUG -- : 
I, [2015-01-04T08:54:09.732968 #29958]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-04 08:54:09 +0000
D, [2015-01-04T08:54:09.753604 #29958] DEBUG -- : 
D, [2015-01-04T08:54:09.754817 #29958] DEBUG -- : 
I, [2015-01-04T08:54:09.764622 #29958]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-04 08:54:09 +0000
D, [2015-01-04T08:54:09.791404 #29958] DEBUG -- : 
D, [2015-01-04T08:54:09.792749 #29958] DEBUG -- : 
I, [2015-01-04T08:54:09.794740 #29958]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-04 08:54:09 +0000
D, [2015-01-04T08:54:09.832532 #29958] DEBUG -- : 
D, [2015-01-04T08:54:09.833297 #29958] DEBUG -- : 
I, [2015-01-04T08:54:09.834488 #29958]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-04 08:54:09 +0000
D, [2015-01-04T08:54:09.857143 #29958] DEBUG -- : 
D, [2015-01-04T08:54:09.858062 #29958] DEBUG -- : 
I, [2015-01-04T08:54:09.860627 #29958]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-04 08:54:09 +0000
D, [2015-01-04T08:54:09.887729 #29958] DEBUG -- : 
D, [2015-01-04T08:54:09.888324 #29958] DEBUG -- : 
I, [2015-01-04T08:54:09.889381 #29958]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-04 08:54:09 +0000
D, [2015-01-04T08:54:09.906307 #29958] DEBUG -- : 
D, [2015-01-04T08:54:09.907054 #29958] DEBUG -- : 
I, [2015-01-04T08:54:09.908321 #29958]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-04 08:54:09 +0000
D, [2015-01-04T08:54:09.926723 #29958] DEBUG -- : 
D, [2015-01-04T08:54:09.927555 #29958] DEBUG -- : 
I, [2015-01-04T08:54:09.928636 #29958]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-04 08:54:09 +0000
D, [2015-01-04T08:54:09.946149 #29958] DEBUG -- : 
D, [2015-01-04T08:54:09.947283 #29958] DEBUG -- : 
I, [2015-01-04T08:54:09.948470 #29958]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-04 08:54:09 +0000
D, [2015-01-04T08:54:09.970203 #29958] DEBUG -- : 
D, [2015-01-04T08:54:09.971085 #29958] DEBUG -- : 
I, [2015-01-04T08:54:09.971944 #29958]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-04 08:54:09 +0000
D, [2015-01-04T08:54:10.045167 #29958] DEBUG -- : 
D, [2015-01-04T08:54:10.056938 #29958] DEBUG -- : 
I, [2015-01-04T08:54:10.058097 #29958]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-04 08:54:10 +0000
D, [2015-01-04T08:54:10.094833 #29958] DEBUG -- : 
D, [2015-01-04T08:54:10.095390 #29958] DEBUG -- : 
I, [2015-01-04T08:54:10.096132 #29958]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-04 08:54:10 +0000
D, [2015-01-04T08:54:13.171231 #29958] DEBUG -- : 
D, [2015-01-04T08:54:13.171663 #29958] DEBUG -- : 
I, [2015-01-04T08:54:13.172591 #29958]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-04 08:54:13 +0000
I, [2015-01-04T08:54:13.251527 #29958]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T08:54:13.252290 #29958]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-04T08:54:13.262802 #29958] DEBUG -- :   [1m[36mCart Load (0.7ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-04T08:54:13.270129 #29958] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-04T08:54:13.281664 #29958] DEBUG -- :   [1m[36mLineItem Load (0.9ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 53]]
D, [2015-01-04T08:54:13.373788 #29958] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-04T08:54:13.379001 #29958] DEBUG -- :   [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
D, [2015-01-04T08:54:13.396468 #29958] DEBUG -- :   [1m[35mSQL (2.6ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 53], ["created_at", Sun, 04 Jan 2015 08:54:13 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7fcfec386288,'0.1299E2',18(36)>], ["size", "extra small"], ["updated_at", Sun, 04 Jan 2015 08:54:13 UTC +00:00]]
D, [2015-01-04T08:54:13.404446 #29958] DEBUG -- :   [1m[36m (4.2ms)[0m  [1mcommit transaction[0m
D, [2015-01-04T08:54:13.423649 #29958] DEBUG -- :   [1m[35mLineItem Load (0.7ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
I, [2015-01-04T08:54:13.446402 #29958]  INFO -- :   Rendered line_items/_line_item.html.erb (8.5ms)
I, [2015-01-04T08:54:13.464515 #29958]  INFO -- :   Rendered carts/_cart.html.erb (45.9ms)
I, [2015-01-04T08:54:13.466758 #29958]  INFO -- :   Rendered line_items/create.js.erb (51.4ms)
I, [2015-01-04T08:54:13.468890 #29958]  INFO -- : Completed 200 OK in 215ms (Views: 60.0ms | ActiveRecord: 11.6ms)
D, [2015-01-04T08:54:14.496044 #29958] DEBUG -- : 
D, [2015-01-04T08:54:14.496546 #29958] DEBUG -- : 
I, [2015-01-04T08:54:14.497752 #29958]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-04 08:54:14 +0000
I, [2015-01-04T08:54:14.535841 #29958]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T08:54:14.536542 #29958]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-04T08:54:14.555104 #29958] DEBUG -- :   [1m[36mCart Load (0.7ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-04T08:54:14.563484 #29958] DEBUG -- :   [1m[35mProduct Load (0.8ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-04T08:54:14.574804 #29958] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 53]]
D, [2015-01-04T08:54:14.587881 #29958] DEBUG -- :   [1m[35mProduct Load (0.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-04T08:54:14.592956 #29958] DEBUG -- :   [1m[36m (0.6ms)[0m  [1mbegin transaction[0m
D, [2015-01-04T08:54:14.606513 #29958] DEBUG -- :   [1m[35mSQL (2.3ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 53], ["created_at", Sun, 04 Jan 2015 08:54:14 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:7fcfea57d890,'0.1099E2',18(36)>], ["size", "extra small"], ["updated_at", Sun, 04 Jan 2015 08:54:14 UTC +00:00]]
D, [2015-01-04T08:54:14.617731 #29958] DEBUG -- :   [1m[36m (7.5ms)[0m  [1mcommit transaction[0m
D, [2015-01-04T08:54:14.635950 #29958] DEBUG -- :   [1m[35mLineItem Load (0.7ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
D, [2015-01-04T08:54:14.656290 #29958] DEBUG -- :   [1m[36mProduct Load (0.8ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-04T08:54:14.670640 #29958]  INFO -- :   Rendered line_items/_line_item.html.erb (23.5ms)
I, [2015-01-04T08:54:14.687054 #29958]  INFO -- :   Rendered carts/_cart.html.erb (56.1ms)
I, [2015-01-04T08:54:14.689351 #29958]  INFO -- :   Rendered line_items/create.js.erb (62.7ms)
I, [2015-01-04T08:54:14.691524 #29958]  INFO -- : Completed 200 OK in 154ms (Views: 69.1ms | ActiveRecord: 15.1ms)
D, [2015-01-04T08:54:17.261903 #29958] DEBUG -- : 
D, [2015-01-04T08:54:17.262532 #29958] DEBUG -- : 
I, [2015-01-04T08:54:17.263417 #29958]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-04 08:54:17 +0000
I, [2015-01-04T08:54:17.313220 #29958]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-04T08:54:17.340100 #29958] DEBUG -- :   [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
D, [2015-01-04T08:54:17.397261 #29958] DEBUG -- :   [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-04T08:54:17.404936 #29958] DEBUG -- :   [1m[35mCart Load (0.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T08:54:17.446995 #29958] DEBUG -- :   [1m[36mLineItem Load (0.9ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-04T08:54:17.464429 #29958]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-04T08:54:34.981165 #29958] DEBUG -- :   [1m[35m (0.8ms)[0m  begin transaction
D, [2015-01-04T08:54:35.098915 #29958] DEBUG -- :   [1m[36mSQL (2.1ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Sun, 04 Jan 2015 08:54:35 UTC +00:00], ["updated_at", Sun, 04 Jan 2015 08:54:35 UTC +00:00]]
D, [2015-01-04T08:54:35.114859 #29958] DEBUG -- :   [1m[35mSQL (1.6ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 131  [["cart_id", nil], ["order_id", 71], ["updated_at", Sun, 04 Jan 2015 08:54:35 UTC +00:00]]
D, [2015-01-04T08:54:35.129576 #29958] DEBUG -- :   [1m[36mSQL (1.4ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 132[0m  [["cart_id", nil], ["order_id", 71], ["updated_at", Sun, 04 Jan 2015 08:54:35 UTC +00:00]]
I, [2015-01-04T08:54:35.131217 #29958]  INFO -- : about to @payment.create
D, [2015-01-04T08:54:43.030707 #29958] DEBUG -- :   [1m[35mProduct Load (0.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-04T08:54:43.043179 #29958] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
I, [2015-01-04T08:54:47.059066 #29958]  INFO -- : in order=
I, [2015-01-04T08:54:47.061074 #29958]  INFO -- : in payment.create
I, [2015-01-04T08:54:47.069412 #29958]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/71/confirm", "cancel_url"=>"http://localhost:3000/orders/71/cancel"}}
I, [2015-01-04T08:54:47.071938 #29958]  INFO -- : #<ActiveModel::Errors:0x007fcfec2e5a18 @base=#<Payment:0x007fcfea772d30 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fcfea772218 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fcfec376f18 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fcfec376a68 @error=nil, @total="23.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fcfec374bc8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fcfec36e250 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fcfec365718 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fcfec31ce50 @error=nil, @return_url="http://localhost:3000/orders/71/confirm", @cancel_url="http://localhost:3000/orders/71/cancel">, @logger=#<Logger:0x007fcfea671508 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fcfea6714e0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fcfea671440 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fcfea671418 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fcfea671378>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fcfec2e5a18 ...>>, @messages={}>
I, [2015-01-04T08:54:47.072943 #29958]  INFO -- : got past invalid
I, [2015-01-04T08:54:47.099439 #29958]  INFO -- : PayPal-Request-Id: 922b1778-56de-485c-a645-7cb0c8da000a
I, [2015-01-04T08:54:47.100217 #29958]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-04T08:54:48.535263 #29958]  INFO -- : Response[201]: Created, Duration: 1.434s
I, [2015-01-04T08:54:48.542232 #29958]  INFO -- : back from super
I, [2015-01-04T08:54:48.552494 #29958]  INFO -- : {"id"=>"PAY-38M00332SS1709339KSUP7WA", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98", "details"=>{"subtotal"=>"23.98"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/71/confirm", "cancel_url"=>"http://localhost:3000/orders/71/cancel"}, "create_time"=>"2015-01-04T08:54:48Z", "update_time"=>"2015-01-04T08:54:48Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-38M00332SS1709339KSUP7WA", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-0KS56216L8797244N", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-38M00332SS1709339KSUP7WA/execute", "rel"=>"execute", "method"=>"POST"}]}
I, [2015-01-04T08:54:48.592984 #29958]  INFO -- : @payment save just done
I, [2015-01-04T08:54:48.594579 #29958]  INFO -- : #<Payment:0x007fcfea772d30 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fcfec1fe938 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fcfec1fddf8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fcfec1fd678 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fcfec1fc7c8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fcfec1fc2f0 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fcfec1f7570 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fcfec1f63c8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fcfec1f5928 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fcfec1efa78 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fcfec31ce50 @error=nil, @return_url="http://localhost:3000/orders/71/confirm", @cancel_url="http://localhost:3000/orders/71/cancel">, @logger=#<Logger:0x007fcfea671508 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fcfea6714e0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fcfea671440 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fcfea671418 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fcfea671378>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fcfec2e5a18 @base=#<Payment:0x007fcfea772d30 ...>, @messages={}>, @request_id="922b1778-56de-485c-a645-7cb0c8da000a", @header={}, @id="PAY-38M00332SS1709339KSUP7WA", @create_time="2015-01-04T08:54:48Z", @update_time="2015-01-04T08:54:48Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fcfec1ed1d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-38M00332SS1709339KSUP7WA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfec1e7eb8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-0KS56216L8797244N", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfec1e69c8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-38M00332SS1709339KSUP7WA/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T08:54:48.596092 #29958]  INFO -- : #<Payment:0x007fcfea772d30 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fcfec1fe938 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fcfec1fddf8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fcfec1fd678 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fcfec1fc7c8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fcfec1fc2f0 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fcfec1f7570 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fcfec1f63c8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fcfec1f5928 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fcfec1efa78 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fcfec31ce50 @error=nil, @return_url="http://localhost:3000/orders/71/confirm", @cancel_url="http://localhost:3000/orders/71/cancel">, @logger=#<Logger:0x007fcfea671508 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fcfea6714e0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fcfea671440 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fcfea671418 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fcfea671378>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fcfec2e5a18 @base=#<Payment:0x007fcfea772d30 ...>, @messages={}>, @request_id="922b1778-56de-485c-a645-7cb0c8da000a", @header={}, @id="PAY-38M00332SS1709339KSUP7WA", @create_time="2015-01-04T08:54:48Z", @update_time="2015-01-04T08:54:48Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fcfec1ed1d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-38M00332SS1709339KSUP7WA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfec1e7eb8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-0KS56216L8797244N", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfec1e69c8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-38M00332SS1709339KSUP7WA/execute", @rel="execute", @method="POST">]>
D, [2015-01-04T08:54:48.606856 #29958] DEBUG -- :   [1m[35m (7.6ms)[0m  commit transaction
I, [2015-01-04T08:54:48.608941 #29958]  INFO -- : about to approve url
I, [2015-01-04T08:54:48.610520 #29958]  INFO -- : #<Payment:0x007fcfea772d30 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fcfec1fe938 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fcfec1fddf8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fcfec1fd678 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fcfec1fc7c8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fcfec1fc2f0 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fcfec1f7570 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fcfec1f63c8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fcfec1f5928 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fcfec1efa78 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fcfec31ce50 @error=nil, @return_url="http://localhost:3000/orders/71/confirm", @cancel_url="http://localhost:3000/orders/71/cancel">, @logger=#<Logger:0x007fcfea671508 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fcfea6714e0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fcfea671440 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fcfea671418 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fcfea671378>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fcfec2e5a18 @base=#<Payment:0x007fcfea772d30 ...>, @messages={}>, @request_id="922b1778-56de-485c-a645-7cb0c8da000a", @header={}, @id="PAY-38M00332SS1709339KSUP7WA", @create_time="2015-01-04T08:54:48Z", @update_time="2015-01-04T08:54:48Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fcfec1ed1d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-38M00332SS1709339KSUP7WA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfec1e7eb8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-0KS56216L8797244N", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfec1e69c8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-38M00332SS1709339KSUP7WA/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T08:54:48.612027 #29958]  INFO -- : #<Payment:0x007fcfea772d30 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fcfec1fe938 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fcfec1fddf8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fcfec1fd678 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fcfec1fc7c8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fcfec1fc2f0 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fcfec1f7570 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fcfec1f63c8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fcfec1f5928 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fcfec1efa78 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fcfec31ce50 @error=nil, @return_url="http://localhost:3000/orders/71/confirm", @cancel_url="http://localhost:3000/orders/71/cancel">, @logger=#<Logger:0x007fcfea671508 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fcfea6714e0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fcfea671440 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fcfea671418 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fcfea671378>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fcfec2e5a18 @base=#<Payment:0x007fcfea772d30 ...>, @messages={}>, @request_id="922b1778-56de-485c-a645-7cb0c8da000a", @header={}, @id="PAY-38M00332SS1709339KSUP7WA", @create_time="2015-01-04T08:54:48Z", @update_time="2015-01-04T08:54:48Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fcfec1ed1d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-38M00332SS1709339KSUP7WA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfec1e7eb8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-0KS56216L8797244N", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfec1e69c8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-38M00332SS1709339KSUP7WA/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T08:54:48.612835 #29958]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-0KS56216L8797244N
I, [2015-01-04T08:54:48.614317 #29958]  INFO -- : #<Payment:0x007fcfea772d30 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fcfec1fe938 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fcfec1fddf8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fcfec1fd678 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fcfec1fc7c8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fcfec1fc2f0 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fcfec1f7570 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fcfec1f63c8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fcfec1f5928 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fcfec1efa78 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fcfec31ce50 @error=nil, @return_url="http://localhost:3000/orders/71/confirm", @cancel_url="http://localhost:3000/orders/71/cancel">, @logger=#<Logger:0x007fcfea671508 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fcfea6714e0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fcfea671440 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fcfea671418 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fcfea671378>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fcfec2e5a18 @base=#<Payment:0x007fcfea772d30 ...>, @messages={}>, @request_id="922b1778-56de-485c-a645-7cb0c8da000a", @header={}, @id="PAY-38M00332SS1709339KSUP7WA", @create_time="2015-01-04T08:54:48Z", @update_time="2015-01-04T08:54:48Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fcfec1ed1d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-38M00332SS1709339KSUP7WA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfec1e7eb8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-0KS56216L8797244N", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfec1e69c8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-38M00332SS1709339KSUP7WA/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T08:54:48.616837 #29958]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-0KS56216L8797244N
I, [2015-01-04T08:54:48.619877 #29958]  INFO -- : Completed 403 Forbidden in 31305ms (ActiveRecord: 22.7ms)
D, [2015-01-04T08:55:19.507780 #29958] DEBUG -- : 
D, [2015-01-04T08:55:19.508113 #29958] DEBUG -- : 
I, [2015-01-04T08:55:19.509272 #29958]  INFO -- : Started GET "/orders/71/confirm?paymentId=PAY-38M00332SS1709339KSUP7WA&token=EC-0KS56216L8797244N&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-04 08:55:19 +0000
I, [2015-01-04T08:55:19.550761 #29958]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-04T08:55:19.551332 #29958]  INFO -- :   Parameters: {"paymentId"=>"PAY-38M00332SS1709339KSUP7WA", "token"=>"EC-0KS56216L8797244N", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"71"}
D, [2015-01-04T08:55:19.559886 #29958] DEBUG -- :   [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
D, [2015-01-04T08:55:19.565262 #29958] DEBUG -- :   [1m[35mUser Load (0.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-04T08:55:19.572501 #29958] DEBUG -- :   [1m[36mOrder Load (1.8ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "71"]]
I, [2015-01-04T08:55:38.077247 #29958]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-38M00332SS1709339KSUP7WA
I, [2015-01-04T08:55:39.434971 #29958]  INFO -- : Response[200]: OK, Duration: 1.357s
D, [2015-01-04T08:55:42.731443 #29958] DEBUG -- :   [1m[35m (0.8ms)[0m  begin transaction
D, [2015-01-04T08:55:42.744288 #29958] DEBUG -- :   [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
I, [2015-01-04T08:55:42.748334 #29958]  INFO -- : Completed 500 Internal Server Error in 23196ms
F, [2015-01-04T08:55:42.758852 #29958] FATAL -- : 
NoMethodError (undefined method `error' for nil:NilClass):
  app/controllers/orders_controller.rb:105:in `confirm'


I, [2015-01-04T08:55:42.837757 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (4.9ms)
I, [2015-01-04T08:55:42.852198 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (7.2ms)
I, [2015-01-04T08:55:42.865111 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (5.0ms)
I, [2015-01-04T08:55:42.866368 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (43.7ms)
D, [2015-01-04T08:58:43.110198 #29958] DEBUG -- : 
D, [2015-01-04T08:58:43.111015 #29958] DEBUG -- : 
I, [2015-01-04T08:58:43.112932 #29958]  INFO -- : Started GET "/orders/71/confirm?paymentId=PAY-38M00332SS1709339KSUP7WA&token=EC-0KS56216L8797244N&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-04 08:58:43 +0000
I, [2015-01-04T08:58:43.130446 #29958]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-04T08:58:43.131158 #29958]  INFO -- :   Parameters: {"paymentId"=>"PAY-38M00332SS1709339KSUP7WA", "token"=>"EC-0KS56216L8797244N", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"71"}
D, [2015-01-04T08:58:43.140916 #29958] DEBUG -- :   [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
D, [2015-01-04T08:58:43.148126 #29958] DEBUG -- :   [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-04T08:58:43.155368 #29958] DEBUG -- :   [1m[35mOrder Load (0.6ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "71"]]
I, [2015-01-04T08:59:57.729914 #29958]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-38M00332SS1709339KSUP7WA
I, [2015-01-04T08:59:59.120666 #29958]  INFO -- : Response[200]: OK, Duration: 1.390s
D, [2015-01-04T09:00:01.788284 #29958] DEBUG -- :   [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
D, [2015-01-04T09:00:01.803432 #29958] DEBUG -- :   [1m[35m (2.6ms)[0m  rollback transaction
I, [2015-01-04T09:00:01.806523 #29958]  INFO -- : Completed 500 Internal Server Error in 78674ms
F, [2015-01-04T09:00:01.818885 #29958] FATAL -- : 
NoMethodError (undefined method `error' for nil:NilClass):
  app/controllers/orders_controller.rb:105:in `confirm'


I, [2015-01-04T09:00:01.891518 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (4.9ms)
I, [2015-01-04T09:00:01.904652 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (6.2ms)
I, [2015-01-04T09:00:01.917649 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (5.0ms)
I, [2015-01-04T09:00:01.918583 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (42.0ms)
D, [2015-01-04T09:00:08.279734 #29958] DEBUG -- : 
D, [2015-01-04T09:00:08.280445 #29958] DEBUG -- : 
I, [2015-01-04T09:00:08.282719 #29958]  INFO -- : Started GET "/orders/71/confirm?paymentId=PAY-38M00332SS1709339KSUP7WA&token=EC-0KS56216L8797244N&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-04 09:00:08 +0000
I, [2015-01-04T09:00:09.512363 #29958]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-04T09:00:09.513001 #29958]  INFO -- :   Parameters: {"paymentId"=>"PAY-38M00332SS1709339KSUP7WA", "token"=>"EC-0KS56216L8797244N", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"71"}
D, [2015-01-04T09:00:09.540090 #29958] DEBUG -- :   [1m[36mUser Load (1.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
D, [2015-01-04T09:00:09.596749 #29958] DEBUG -- :   [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-04T09:00:09.632926 #29958] DEBUG -- :   [1m[36mOrder Load (1.3ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "71"]]
I, [2015-01-04T09:09:19.970930 #29958]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-38M00332SS1709339KSUP7WA
I, [2015-01-04T09:09:21.372754 #29958]  INFO -- : Response[200]: OK, Duration: 1.401s
D, [2015-01-04T09:09:25.556935 #29958] DEBUG -- :   [1m[35m (0.5ms)[0m  begin transaction
D, [2015-01-04T09:09:25.576119 #29958] DEBUG -- :   [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
I, [2015-01-04T09:09:25.579915 #29958]  INFO -- : Completed 500 Internal Server Error in 556066ms
F, [2015-01-04T09:09:25.590430 #29958] FATAL -- : 
NoMethodError (undefined method `error' for nil:NilClass):
  app/controllers/orders_controller.rb:105:in `confirm'


I, [2015-01-04T09:09:25.656136 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.2ms)
I, [2015-01-04T09:09:25.671873 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (8.6ms)
I, [2015-01-04T09:09:25.695366 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (14.7ms)
I, [2015-01-04T09:09:25.696346 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (55.6ms)
D, [2015-01-04T09:09:33.765526 #29958] DEBUG -- : 
D, [2015-01-04T09:09:33.766431 #29958] DEBUG -- : 
I, [2015-01-04T09:09:33.767908 #29958]  INFO -- : Started GET "/orders/71/confirm?paymentId=PAY-38M00332SS1709339KSUP7WA&token=EC-0KS56216L8797244N&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-04 09:09:33 +0000
I, [2015-01-04T09:09:33.797118 #29958]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-04T09:09:33.797759 #29958]  INFO -- :   Parameters: {"paymentId"=>"PAY-38M00332SS1709339KSUP7WA", "token"=>"EC-0KS56216L8797244N", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"71"}
D, [2015-01-04T09:09:33.809538 #29958] DEBUG -- :   [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
D, [2015-01-04T09:09:33.816313 #29958] DEBUG -- :   [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-04T09:09:33.823333 #29958] DEBUG -- :   [1m[35mOrder Load (0.6ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "71"]]
I, [2015-01-04T09:09:59.656623 #29958]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-38M00332SS1709339KSUP7WA
I, [2015-01-04T09:10:01.114764 #29958]  INFO -- : Response[200]: OK, Duration: 1.457s
D, [2015-01-04T09:10:04.567213 #29958] DEBUG -- :   [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
D, [2015-01-04T09:10:04.578397 #29958] DEBUG -- :   [1m[35m (0.4ms)[0m  rollback transaction
I, [2015-01-04T09:10:04.581297 #29958]  INFO -- : Completed 500 Internal Server Error in 30782ms
F, [2015-01-04T09:10:04.594939 #29958] FATAL -- : 
NoMethodError (undefined method `error' for nil:NilClass):
  app/controllers/orders_controller.rb:105:in `confirm'


I, [2015-01-04T09:10:04.658914 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.3ms)
I, [2015-01-04T09:10:04.672876 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (6.6ms)
I, [2015-01-04T09:10:04.685202 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (4.7ms)
I, [2015-01-04T09:10:04.686141 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (42.6ms)
D, [2015-01-04T09:21:26.701660 #29958] DEBUG -- : 
D, [2015-01-04T09:21:26.702149 #29958] DEBUG -- : 
I, [2015-01-04T09:21:26.703595 #29958]  INFO -- : Started GET "/orders/71/confirm?paymentId=PAY-38M00332SS1709339KSUP7WA&token=EC-0KS56216L8797244N&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-04 09:21:26 +0000
I, [2015-01-04T09:21:26.721673 #29958]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-04T09:21:26.722316 #29958]  INFO -- :   Parameters: {"paymentId"=>"PAY-38M00332SS1709339KSUP7WA", "token"=>"EC-0KS56216L8797244N", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"71"}
D, [2015-01-04T09:21:26.732201 #29958] DEBUG -- :   [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
D, [2015-01-04T09:21:26.739261 #29958] DEBUG -- :   [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-04T09:21:26.750634 #29958] DEBUG -- :   [1m[36mOrder Load (0.6ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "71"]]
I, [2015-01-04T09:23:39.982224 #29958]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-38M00332SS1709339KSUP7WA
I, [2015-01-04T09:23:41.361332 #29958]  INFO -- : Response[200]: OK, Duration: 1.378s
D, [2015-01-04T09:23:41.374351 #29958] DEBUG -- :   [1m[35m (0.5ms)[0m  begin transaction
D, [2015-01-04T09:23:41.386603 #29958] DEBUG -- :   [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
I, [2015-01-04T09:23:41.389746 #29958]  INFO -- : Completed 500 Internal Server Error in 134666ms
F, [2015-01-04T09:23:41.399096 #29958] FATAL -- : 
NoMethodError (undefined method `error' for nil:NilClass):
  app/controllers/orders_controller.rb:105:in `confirm'


I, [2015-01-04T09:23:41.465463 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.3ms)
I, [2015-01-04T09:23:41.480226 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (7.1ms)
I, [2015-01-04T09:23:41.493419 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (4.9ms)
I, [2015-01-04T09:23:41.494372 #29958]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (46.0ms)
D, [2015-01-04T09:23:41.499327 #29958] DEBUG -- : 
D, [2015-01-04T09:23:41.499691 #29958] DEBUG -- : 
I, [2015-01-04T09:23:41.501979 #29958]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-04 09:23:41 +0000
I, [2015-01-04T09:23:42.442803 #29958]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-04T09:23:42.472864 #29958] DEBUG -- :   [1m[35mCart Load (0.8ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T09:23:42.587001 #29958] DEBUG -- :   [1m[36mProduct Load (0.7ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-04T09:23:42.663051 #29958]  INFO -- : Read fragment views/store/products/2-20141022062504570899000/a93d4e2e981ab3dfce98a095c3b6c059 (8.6ms)
I, [2015-01-04T09:23:42.664483 #29958]  INFO -- :   Rendered store/index.html.erb within layouts/application (81.4ms)
D, [2015-01-04T09:23:42.772112 #29958] DEBUG -- :   [1m[35mLineItem Exists (0.7ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 53]]
D, [2015-01-04T09:23:42.805245 #29958] DEBUG -- :   [1m[36mLineItem Load (0.8ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-04T09:23:42.807048 #29958]  INFO -- :   Rendered collection (0.2ms)
I, [2015-01-04T09:23:42.832142 #29958]  INFO -- :   Rendered carts/_cart.html.erb (31.1ms)
I, [2015-01-04T09:23:42.841568 #29958]  INFO -- : Completed 200 OK in 398ms (Views: 295.6ms | ActiveRecord: 8.9ms)
D, [2015-01-04T09:23:42.940590 #29958] DEBUG -- : 
D, [2015-01-04T09:23:42.941854 #29958] DEBUG -- : 
I, [2015-01-04T09:23:42.942976 #29958]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-04 09:23:42 +0000
D, [2015-01-04T09:23:42.970794 #29958] DEBUG -- : 
D, [2015-01-04T09:23:42.971302 #29958] DEBUG -- : 
I, [2015-01-04T09:23:43.011525 #29958]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-04 09:23:43 +0000
D, [2015-01-04T09:23:43.031109 #29958] DEBUG -- : 
D, [2015-01-04T09:23:43.031546 #29958] DEBUG -- : 
I, [2015-01-04T09:23:43.032689 #29958]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-04 09:23:43 +0000
D, [2015-01-04T09:23:43.066525 #29958] DEBUG -- : 
D, [2015-01-04T09:23:43.066958 #29958] DEBUG -- : 
I, [2015-01-04T09:23:43.067943 #29958]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-04 09:23:43 +0000
D, [2015-01-04T09:23:43.096521 #29958] DEBUG -- : 
D, [2015-01-04T09:23:43.096960 #29958] DEBUG -- : 
I, [2015-01-04T09:23:43.097989 #29958]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-04 09:23:43 +0000
D, [2015-01-04T09:23:43.123680 #29958] DEBUG -- : 
D, [2015-01-04T09:23:43.124344 #29958] DEBUG -- : 
I, [2015-01-04T09:23:43.125532 #29958]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-04 09:23:43 +0000
D, [2015-01-04T09:23:43.244294 #29958] DEBUG -- : 
D, [2015-01-04T09:23:43.244914 #29958] DEBUG -- : 
I, [2015-01-04T09:23:43.245977 #29958]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-04 09:23:43 +0000
D, [2015-01-04T09:23:43.285100 #29958] DEBUG -- : 
D, [2015-01-04T09:23:43.285774 #29958] DEBUG -- : 
I, [2015-01-04T09:23:43.286738 #29958]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-04 09:23:43 +0000
D, [2015-01-04T09:23:43.311432 #29958] DEBUG -- : 
D, [2015-01-04T09:23:43.312228 #29958] DEBUG -- : 
I, [2015-01-04T09:23:43.313474 #29958]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-04 09:23:43 +0000
D, [2015-01-04T09:23:43.339567 #29958] DEBUG -- : 
D, [2015-01-04T09:23:43.340101 #29958] DEBUG -- : 
I, [2015-01-04T09:23:43.341562 #29958]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-04 09:23:43 +0000
D, [2015-01-04T09:23:43.369236 #29958] DEBUG -- : 
D, [2015-01-04T09:23:43.369828 #29958] DEBUG -- : 
I, [2015-01-04T09:23:43.371074 #29958]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-04 09:23:43 +0000
D, [2015-01-04T09:23:43.395557 #29958] DEBUG -- : 
D, [2015-01-04T09:23:43.396514 #29958] DEBUG -- : 
I, [2015-01-04T09:23:43.397524 #29958]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-04 09:23:43 +0000
D, [2015-01-04T09:23:43.423241 #29958] DEBUG -- : 
D, [2015-01-04T09:23:43.429517 #29958] DEBUG -- : 
I, [2015-01-04T09:23:43.432745 #29958]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-04 09:23:43 +0000
D, [2015-01-04T09:23:43.450682 #29958] DEBUG -- : 
D, [2015-01-04T09:23:43.452013 #29958] DEBUG -- : 
I, [2015-01-04T09:23:43.453408 #29958]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-04 09:23:43 +0000
D, [2015-01-04T09:23:43.478851 #29958] DEBUG -- : 
D, [2015-01-04T09:23:43.479424 #29958] DEBUG -- : 
I, [2015-01-04T09:23:43.483236 #29958]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-04 09:23:43 +0000
D, [2015-01-04T09:23:43.510682 #29958] DEBUG -- : 
D, [2015-01-04T09:23:43.511190 #29958] DEBUG -- : 
I, [2015-01-04T09:23:43.512221 #29958]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-04 09:23:43 +0000
D, [2015-01-04T09:23:43.551462 #29958] DEBUG -- : 
D, [2015-01-04T09:23:43.552123 #29958] DEBUG -- : 
I, [2015-01-04T09:23:43.553174 #29958]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-04 09:23:43 +0000
D, [2015-01-04T09:23:43.584707 #29958] DEBUG -- : 
D, [2015-01-04T09:23:43.585374 #29958] DEBUG -- : 
I, [2015-01-04T09:23:43.586622 #29958]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-04 09:23:43 +0000
D, [2015-01-04T09:23:43.611854 #29958] DEBUG -- : 
D, [2015-01-04T09:23:43.613337 #29958] DEBUG -- : 
I, [2015-01-04T09:23:43.614408 #29958]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-04 09:23:43 +0000
D, [2015-01-04T09:23:43.655005 #29958] DEBUG -- : 
D, [2015-01-04T09:23:43.660303 #29958] DEBUG -- : 
I, [2015-01-04T09:23:43.661617 #29958]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-04 09:23:43 +0000
D, [2015-01-04T09:23:43.706272 #29958] DEBUG -- : 
D, [2015-01-04T09:23:43.706708 #29958] DEBUG -- : 
I, [2015-01-04T09:23:43.708426 #29958]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-04 09:23:43 +0000
D, [2015-01-04T09:23:43.742661 #29958] DEBUG -- : 
D, [2015-01-04T09:23:43.743344 #29958] DEBUG -- : 
I, [2015-01-04T09:23:43.744291 #29958]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-04 09:23:43 +0000
D, [2015-01-04T09:23:43.766683 #29958] DEBUG -- : 
D, [2015-01-04T09:23:43.767130 #29958] DEBUG -- : 
I, [2015-01-04T09:23:43.768123 #29958]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-04 09:23:43 +0000
D, [2015-01-04T09:23:43.792431 #29958] DEBUG -- : 
D, [2015-01-04T09:23:43.792881 #29958] DEBUG -- : 
I, [2015-01-04T09:23:43.793947 #29958]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-04 09:23:43 +0000
D, [2015-01-04T09:23:43.821598 #29958] DEBUG -- : 
D, [2015-01-04T09:23:43.822105 #29958] DEBUG -- : 
I, [2015-01-04T09:23:43.823319 #29958]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-04 09:23:43 +0000
D, [2015-01-04T09:23:43.851775 #29958] DEBUG -- : 
D, [2015-01-04T09:23:43.852325 #29958] DEBUG -- : 
I, [2015-01-04T09:23:43.853228 #29958]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-04 09:23:43 +0000
D, [2015-01-04T09:23:43.879686 #29958] DEBUG -- : 
D, [2015-01-04T09:23:43.880265 #29958] DEBUG -- : 
I, [2015-01-04T09:23:43.881250 #29958]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-04 09:23:43 +0000
D, [2015-01-04T09:23:43.908264 #29958] DEBUG -- : 
D, [2015-01-04T09:23:43.912528 #29958] DEBUG -- : 
I, [2015-01-04T09:23:43.913205 #29958]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-04 09:23:43 +0000
D, [2015-01-04T09:23:43.955275 #29958] DEBUG -- : 
D, [2015-01-04T09:23:43.956374 #29958] DEBUG -- : 
I, [2015-01-04T09:23:43.957159 #29958]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-04 09:23:43 +0000
D, [2015-01-04T09:23:47.994962 #29958] DEBUG -- : 
D, [2015-01-04T09:23:47.995395 #29958] DEBUG -- : 
I, [2015-01-04T09:23:47.996308 #29958]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-04 09:23:47 +0000
I, [2015-01-04T09:23:48.045470 #29958]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T09:23:48.046216 #29958]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-04T09:23:48.061696 #29958] DEBUG -- :   [1m[35mCart Load (0.8ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T09:23:48.080281 #29958] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-04T09:23:48.091700 #29958] DEBUG -- :   [1m[35mLineItem Load (1.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 53]]
D, [2015-01-04T09:23:48.206735 #29958] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-04T09:23:48.212036 #29958] DEBUG -- :   [1m[35m (0.6ms)[0m  begin transaction
D, [2015-01-04T09:23:48.244104 #29958] DEBUG -- :   [1m[36mSQL (16.7ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 53], ["created_at", Sun, 04 Jan 2015 09:23:48 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7fcfe9e79990,'0.1299E2',18(36)>], ["size", "extra small"], ["updated_at", Sun, 04 Jan 2015 09:23:48 UTC +00:00]]
D, [2015-01-04T09:23:48.251858 #29958] DEBUG -- :   [1m[35m (3.8ms)[0m  commit transaction
D, [2015-01-04T09:23:48.288229 #29958] DEBUG -- :   [1m[36mLineItem Load (0.8ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-04T09:23:48.321764 #29958]  INFO -- :   Rendered line_items/_line_item.html.erb (7.0ms)
I, [2015-01-04T09:23:48.338642 #29958]  INFO -- :   Rendered carts/_cart.html.erb (55.9ms)
I, [2015-01-04T09:23:48.340953 #29958]  INFO -- :   Rendered line_items/create.js.erb (61.7ms)
I, [2015-01-04T09:23:48.343089 #29958]  INFO -- : Completed 200 OK in 296ms (Views: 86.7ms | ActiveRecord: 25.6ms)
D, [2015-01-04T09:23:48.352612 #29958] DEBUG -- : 
D, [2015-01-04T09:23:48.353127 #29958] DEBUG -- : 
I, [2015-01-04T09:23:48.354154 #29958]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-04 09:23:48 +0000
I, [2015-01-04T09:23:48.389043 #29958]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T09:23:48.389986 #29958]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-04T09:23:48.400887 #29958] DEBUG -- :   [1m[35mCart Load (0.7ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T09:23:48.409713 #29958] DEBUG -- :   [1m[36mProduct Load (1.2ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-04T09:23:48.423121 #29958] DEBUG -- :   [1m[35mLineItem Load (0.7ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 53]]
D, [2015-01-04T09:23:48.434052 #29958] DEBUG -- :   [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
D, [2015-01-04T09:23:48.456674 #29958] DEBUG -- :   [1m[35mSQL (1.6ms)[0m  UPDATE "line_items" SET "quantity" = ?, "updated_at" = ? WHERE "line_items"."id" = 133  [["quantity", 2], ["updated_at", Sun, 04 Jan 2015 09:23:48 UTC +00:00]]
D, [2015-01-04T09:23:48.462602 #29958] DEBUG -- :   [1m[36m (3.2ms)[0m  [1mcommit transaction[0m
D, [2015-01-04T09:23:48.481997 #29958] DEBUG -- :   [1m[35mLineItem Load (0.8ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
D, [2015-01-04T09:23:48.498611 #29958] DEBUG -- :   [1m[36mProduct Load (0.7ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-04T09:23:48.507149 #29958]  INFO -- :   Rendered line_items/_line_item.html.erb (20.0ms)
I, [2015-01-04T09:23:48.524823 #29958]  INFO -- :   Rendered carts/_cart.html.erb (47.6ms)
I, [2015-01-04T09:23:48.527567 #29958]  INFO -- :   Rendered line_items/create.js.erb (54.2ms)
I, [2015-01-04T09:23:48.530418 #29958]  INFO -- : Completed 200 OK in 138ms (Views: 62.3ms | ActiveRecord: 9.3ms)
D, [2015-01-04T09:23:50.099301 #29958] DEBUG -- : 
D, [2015-01-04T09:23:50.099957 #29958] DEBUG -- : 
I, [2015-01-04T09:23:50.101045 #29958]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-04 09:23:50 +0000
I, [2015-01-04T09:23:50.121119 #29958]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T09:23:50.121928 #29958]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-04T09:23:50.135889 #29958] DEBUG -- :   [1m[35mCart Load (0.9ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T09:23:50.143665 #29958] DEBUG -- :   [1m[36mProduct Load (0.7ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-04T09:23:50.158049 #29958] DEBUG -- :   [1m[35mLineItem Load (1.2ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 53]]
D, [2015-01-04T09:23:50.171154 #29958] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-04T09:23:50.176262 #29958] DEBUG -- :   [1m[35m (0.5ms)[0m  begin transaction
D, [2015-01-04T09:23:50.190540 #29958] DEBUG -- :   [1m[36mSQL (2.2ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 53], ["created_at", Sun, 04 Jan 2015 09:23:50 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:7fcfec58e990,'0.1099E2',18(36)>], ["size", "extra small"], ["updated_at", Sun, 04 Jan 2015 09:23:50 UTC +00:00]]
D, [2015-01-04T09:23:50.202605 #29958] DEBUG -- :   [1m[35m (7.7ms)[0m  commit transaction
D, [2015-01-04T09:23:50.220040 #29958] DEBUG -- :   [1m[36mLineItem Load (0.7ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
D, [2015-01-04T09:23:50.239770 #29958] DEBUG -- :   [1m[35mProduct Load (0.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-04T09:23:50.253930 #29958]  INFO -- :   Rendered line_items/_line_item.html.erb (22.7ms)
I, [2015-01-04T09:23:50.271015 #29958]  INFO -- :   Rendered carts/_cart.html.erb (56.0ms)
I, [2015-01-04T09:23:50.273223 #29958]  INFO -- :   Rendered line_items/create.js.erb (61.8ms)
I, [2015-01-04T09:23:50.275226 #29958]  INFO -- : Completed 200 OK in 152ms (Views: 68.1ms | ActiveRecord: 15.1ms)
D, [2015-01-04T09:23:51.903355 #29958] DEBUG -- : 
D, [2015-01-04T09:23:51.903864 #29958] DEBUG -- : 
I, [2015-01-04T09:23:51.904681 #29958]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-04 09:23:51 +0000
I, [2015-01-04T09:23:51.947065 #29958]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-04T09:23:52.043633 #29958] DEBUG -- :   [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
D, [2015-01-04T09:23:52.102166 #29958] DEBUG -- :   [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-04T09:23:52.109576 #29958] DEBUG -- :   [1m[36mCart Load (0.7ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-04T09:23:52.150494 #29958] DEBUG -- :   [1m[35mLineItem Load (0.8ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
I, [2015-01-04T09:23:52.167826 #29958]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-04T09:24:10.360229 #29958] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-04T09:24:10.492400 #29958] DEBUG -- :   [1m[35mSQL (2.2ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Sun, 04 Jan 2015 09:24:10 UTC +00:00], ["updated_at", Sun, 04 Jan 2015 09:24:10 UTC +00:00]]
D, [2015-01-04T09:24:10.507714 #29958] DEBUG -- :   [1m[36mSQL (1.6ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 133[0m  [["cart_id", nil], ["order_id", 72], ["updated_at", Sun, 04 Jan 2015 09:24:10 UTC +00:00]]
D, [2015-01-04T09:24:10.522212 #29958] DEBUG -- :   [1m[35mSQL (1.4ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 134  [["cart_id", nil], ["order_id", 72], ["updated_at", Sun, 04 Jan 2015 09:24:10 UTC +00:00]]
I, [2015-01-04T09:24:10.523943 #29958]  INFO -- : about to @payment.create
D, [2015-01-04T09:24:16.663283 #29958] DEBUG -- :   [1m[36mProduct Load (0.7ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-04T09:24:16.675493 #29958] DEBUG -- :   [1m[35mProduct Load (0.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
I, [2015-01-04T09:24:19.886435 #29958]  INFO -- : in order=
I, [2015-01-04T09:24:19.888725 #29958]  INFO -- : in payment.create
I, [2015-01-04T09:24:19.897218 #29958]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"36.97"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/72/confirm", "cancel_url"=>"http://localhost:3000/orders/72/cancel"}}
I, [2015-01-04T09:24:19.899187 #29958]  INFO -- : #<ActiveModel::Errors:0x007fcfec77d418 @base=#<Payment:0x007fcfeda22258 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fcfeda217e0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fcfed9d7848 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fcfed9d7348 @error=nil, @total="36.97", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fcfed9d4f08 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fcfed9cdb40 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x007fcfed9c51e8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fcfec78e1f0 @error=nil, @return_url="http://localhost:3000/orders/72/confirm", @cancel_url="http://localhost:3000/orders/72/cancel">, @logger=#<Logger:0x007fcfea671508 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fcfea6714e0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fcfea671440 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fcfea671418 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fcfea671378>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fcfec77d418 ...>>, @messages={}>
I, [2015-01-04T09:24:19.899908 #29958]  INFO -- : got past invalid
I, [2015-01-04T09:24:19.926344 #29958]  INFO -- : PayPal-Request-Id: cfc159e4-c60c-4146-a0a7-cd09078357f5
I, [2015-01-04T09:24:19.926983 #29958]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-04T09:24:21.299338 #29958]  INFO -- : Response[201]: Created, Duration: 1.371s
I, [2015-01-04T09:24:21.306076 #29958]  INFO -- : back from super
I, [2015-01-04T09:24:21.316005 #29958]  INFO -- : {"id"=>"PAY-0YS493741F8039510KSUQNRA", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"36.97", "details"=>{"subtotal"=>"36.97"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"2", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/72/confirm", "cancel_url"=>"http://localhost:3000/orders/72/cancel"}, "create_time"=>"2015-01-04T09:24:20Z", "update_time"=>"2015-01-04T09:24:20Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-0YS493741F8039510KSUQNRA", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7CK22858M12489533", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-0YS493741F8039510KSUQNRA/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-04T09:24:21.364714 #29958] DEBUG -- :   [1m[36mSQL (34.7ms)[0m  [1mUPDATE "orders" SET "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ?, "pay_type" = ? WHERE "orders"."id" = 72[0m  [["created_at", Sun, 04 Jan 2015 09:24:10 UTC +00:00], ["updated_at", Sun, 04 Jan 2015 09:24:10 UTC +00:00], ["id", 72], ["payment_id", "PAY-0YS493741F8039510KSUQNRA"], ["state", "created"], ["pay_type", "paypal"]]
I, [2015-01-04T09:24:21.369005 #29958]  INFO -- : @payment save just done
I, [2015-01-04T09:24:21.371070 #29958]  INFO -- : #<Payment:0x007fcfeda22258 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fcfed922560 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fcfed921bb0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fcfed921278 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fcfed91bda0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fcfed91b8a0 @error=nil, @total="36.97", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fcfed91aae0 @error=nil, @subtotal="36.97">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fcfed919cd0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fcfed919208 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x007fcfed9138a8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fcfec78e1f0 @error=nil, @return_url="http://localhost:3000/orders/72/confirm", @cancel_url="http://localhost:3000/orders/72/cancel">, @logger=#<Logger:0x007fcfea671508 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fcfea6714e0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fcfea671440 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fcfea671418 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fcfea671378>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fcfec77d418 @base=#<Payment:0x007fcfeda22258 ...>, @messages={}>, @request_id="cfc159e4-c60c-4146-a0a7-cd09078357f5", @header={}, @id="PAY-0YS493741F8039510KSUQNRA", @create_time="2015-01-04T09:24:20Z", @update_time="2015-01-04T09:24:20Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fcfed911698 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0YS493741F8039510KSUQNRA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfed9106d0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7CK22858M12489533", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfed90b6a8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0YS493741F8039510KSUQNRA/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T09:24:21.372644 #29958]  INFO -- : #<Payment:0x007fcfeda22258 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fcfed922560 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fcfed921bb0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fcfed921278 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fcfed91bda0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fcfed91b8a0 @error=nil, @total="36.97", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fcfed91aae0 @error=nil, @subtotal="36.97">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fcfed919cd0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fcfed919208 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x007fcfed9138a8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fcfec78e1f0 @error=nil, @return_url="http://localhost:3000/orders/72/confirm", @cancel_url="http://localhost:3000/orders/72/cancel">, @logger=#<Logger:0x007fcfea671508 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fcfea6714e0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fcfea671440 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fcfea671418 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fcfea671378>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fcfec77d418 @base=#<Payment:0x007fcfeda22258 ...>, @messages={}>, @request_id="cfc159e4-c60c-4146-a0a7-cd09078357f5", @header={}, @id="PAY-0YS493741F8039510KSUQNRA", @create_time="2015-01-04T09:24:20Z", @update_time="2015-01-04T09:24:20Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fcfed911698 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0YS493741F8039510KSUQNRA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfed9106d0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7CK22858M12489533", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfed90b6a8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0YS493741F8039510KSUQNRA/execute", @rel="execute", @method="POST">]>
D, [2015-01-04T09:24:21.378439 #29958] DEBUG -- :   [1m[35m (3.9ms)[0m  commit transaction
I, [2015-01-04T09:24:21.380704 #29958]  INFO -- : about to approve url
I, [2015-01-04T09:24:21.382317 #29958]  INFO -- : #<Payment:0x007fcfeda22258 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fcfed922560 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fcfed921bb0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fcfed921278 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fcfed91bda0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fcfed91b8a0 @error=nil, @total="36.97", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fcfed91aae0 @error=nil, @subtotal="36.97">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fcfed919cd0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fcfed919208 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x007fcfed9138a8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fcfec78e1f0 @error=nil, @return_url="http://localhost:3000/orders/72/confirm", @cancel_url="http://localhost:3000/orders/72/cancel">, @logger=#<Logger:0x007fcfea671508 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fcfea6714e0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fcfea671440 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fcfea671418 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fcfea671378>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fcfec77d418 @base=#<Payment:0x007fcfeda22258 ...>, @messages={}>, @request_id="cfc159e4-c60c-4146-a0a7-cd09078357f5", @header={}, @id="PAY-0YS493741F8039510KSUQNRA", @create_time="2015-01-04T09:24:20Z", @update_time="2015-01-04T09:24:20Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fcfed911698 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0YS493741F8039510KSUQNRA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfed9106d0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7CK22858M12489533", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfed90b6a8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0YS493741F8039510KSUQNRA/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T09:24:21.384023 #29958]  INFO -- : #<Payment:0x007fcfeda22258 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fcfed922560 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fcfed921bb0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fcfed921278 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fcfed91bda0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fcfed91b8a0 @error=nil, @total="36.97", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fcfed91aae0 @error=nil, @subtotal="36.97">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fcfed919cd0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fcfed919208 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x007fcfed9138a8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fcfec78e1f0 @error=nil, @return_url="http://localhost:3000/orders/72/confirm", @cancel_url="http://localhost:3000/orders/72/cancel">, @logger=#<Logger:0x007fcfea671508 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fcfea6714e0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fcfea671440 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fcfea671418 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fcfea671378>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fcfec77d418 @base=#<Payment:0x007fcfeda22258 ...>, @messages={}>, @request_id="cfc159e4-c60c-4146-a0a7-cd09078357f5", @header={}, @id="PAY-0YS493741F8039510KSUQNRA", @create_time="2015-01-04T09:24:20Z", @update_time="2015-01-04T09:24:20Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fcfed911698 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0YS493741F8039510KSUQNRA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfed9106d0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7CK22858M12489533", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfed90b6a8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0YS493741F8039510KSUQNRA/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T09:24:21.384857 #29958]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7CK22858M12489533
I, [2015-01-04T09:24:21.386359 #29958]  INFO -- : #<Payment:0x007fcfeda22258 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fcfed922560 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fcfed921bb0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fcfed921278 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fcfed91bda0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fcfed91b8a0 @error=nil, @total="36.97", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fcfed91aae0 @error=nil, @subtotal="36.97">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fcfed919cd0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fcfed919208 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="2">, #<PayPal::SDK::REST::DataTypes::Item:0x007fcfed9138a8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fcfec78e1f0 @error=nil, @return_url="http://localhost:3000/orders/72/confirm", @cancel_url="http://localhost:3000/orders/72/cancel">, @logger=#<Logger:0x007fcfea671508 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fcfea6714e0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fcfea671440 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fcfea671418 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fcfea671378>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fcfec77d418 @base=#<Payment:0x007fcfeda22258 ...>, @messages={}>, @request_id="cfc159e4-c60c-4146-a0a7-cd09078357f5", @header={}, @id="PAY-0YS493741F8039510KSUQNRA", @create_time="2015-01-04T09:24:20Z", @update_time="2015-01-04T09:24:20Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fcfed911698 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0YS493741F8039510KSUQNRA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfed9106d0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7CK22858M12489533", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fcfed90b6a8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0YS493741F8039510KSUQNRA/execute", @rel="execute", @method="POST">]>
I, [2015-01-04T09:24:21.389098 #29958]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7CK22858M12489533
I, [2015-01-04T09:24:21.392213 #29958]  INFO -- : Completed 403 Forbidden in 29444ms (ActiveRecord: 54.0ms)
D, [2015-01-04T09:24:57.478520 #29958] DEBUG -- : 
D, [2015-01-04T09:24:57.490327 #29958] DEBUG -- : 
I, [2015-01-04T09:24:57.492163 #29958]  INFO -- : Started GET "/orders/72/confirm?paymentId=PAY-0YS493741F8039510KSUQNRA&token=EC-7CK22858M12489533&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-04 09:24:57 +0000
I, [2015-01-04T09:24:57.517781 #29958]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-04T09:24:57.518598 #29958]  INFO -- :   Parameters: {"paymentId"=>"PAY-0YS493741F8039510KSUQNRA", "token"=>"EC-7CK22858M12489533", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"72"}
D, [2015-01-04T09:24:57.551275 #29958] DEBUG -- :   [1m[36mUser Load (15.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
D, [2015-01-04T09:24:57.556959 #29958] DEBUG -- :   [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-04T09:24:57.564858 #29958] DEBUG -- :   [1m[36mOrder Load (1.4ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "72"]]
I, [2015-01-04T09:26:42.604447 #29958]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-0YS493741F8039510KSUQNRA
I, [2015-01-04T09:26:44.764426 #29958]  INFO -- : Response[200]: OK, Duration: 2.159s
D, [2015-01-04T09:26:49.107277 #29958] DEBUG -- :   [1m[35m (0.5ms)[0m  begin transaction
D, [2015-01-04T09:26:49.125111 #29958] DEBUG -- :   [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
I, [2015-01-04T09:26:49.128976 #29958]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-0YS493741F8039510KSUQNRA
I, [2015-01-04T09:26:50.395288 #29958]  INFO -- : Response[200]: OK, Duration: 1.265s
I, [2015-01-04T09:26:50.403074 #29958]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-04T09:26:50.404423 #29958]  INFO -- : Completed 302 Found in 112885ms (ActiveRecord: 18.9ms)
D, [2015-01-04T09:26:50.427792 #29958] DEBUG -- : 
D, [2015-01-04T09:26:50.428843 #29958] DEBUG -- : 
I, [2015-01-04T09:26:50.430291 #29958]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-04 09:26:50 +0000
I, [2015-01-04T09:26:50.455764 #29958]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-04T09:26:50.463106 #29958] DEBUG -- :   [1m[35mCart Load (0.5ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T09:26:50.503386 #29958] DEBUG -- :   [1m[36mProduct Load (0.8ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-04T09:26:50.508142 #29958]  INFO -- : Read fragment views/store/products/2-20141022062504570899000/a93d4e2e981ab3dfce98a095c3b6c059 (1.3ms)
I, [2015-01-04T09:26:50.509157 #29958]  INFO -- :   Rendered store/index.html.erb within layouts/application (10.0ms)
D, [2015-01-04T09:26:50.565819 #29958] DEBUG -- :   [1m[35mLineItem Exists (0.5ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 53]]
D, [2015-01-04T09:26:50.576531 #29958] DEBUG -- :   [1m[36mLineItem Load (0.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-04T09:26:50.578360 #29958]  INFO -- :   Rendered collection (0.2ms)
I, [2015-01-04T09:26:50.591919 #29958]  INFO -- :   Rendered carts/_cart.html.erb (18.9ms)
I, [2015-01-04T09:26:50.602531 #29958]  INFO -- : Completed 200 OK in 146ms (Views: 133.8ms | ActiveRecord: 2.4ms)
D, [2015-01-04T09:26:50.739857 #29958] DEBUG -- : 
D, [2015-01-04T09:26:50.740320 #29958] DEBUG -- : 
I, [2015-01-04T09:26:50.741240 #29958]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-04 09:26:50 +0000
D, [2015-01-04T09:26:50.784348 #29958] DEBUG -- : 
D, [2015-01-04T09:26:50.784869 #29958] DEBUG -- : 
I, [2015-01-04T09:26:50.813026 #29958]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-04 09:26:50 +0000
D, [2015-01-04T09:26:50.829656 #29958] DEBUG -- : 
D, [2015-01-04T09:26:50.830093 #29958] DEBUG -- : 
I, [2015-01-04T09:26:50.831078 #29958]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-04 09:26:50 +0000
D, [2015-01-04T09:26:50.848870 #29958] DEBUG -- : 
D, [2015-01-04T09:26:50.849412 #29958] DEBUG -- : 
I, [2015-01-04T09:26:50.850316 #29958]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-04 09:26:50 +0000
D, [2015-01-04T09:26:50.879178 #29958] DEBUG -- : 
D, [2015-01-04T09:26:50.880285 #29958] DEBUG -- : 
I, [2015-01-04T09:26:50.888891 #29958]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-04 09:26:50 +0000
D, [2015-01-04T09:26:50.914406 #29958] DEBUG -- : 
D, [2015-01-04T09:26:50.915043 #29958] DEBUG -- : 
I, [2015-01-04T09:26:50.916216 #29958]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-04 09:26:50 +0000
D, [2015-01-04T09:26:50.952269 #29958] DEBUG -- : 
D, [2015-01-04T09:26:50.952797 #29958] DEBUG -- : 
I, [2015-01-04T09:26:50.953761 #29958]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-04 09:26:50 +0000
D, [2015-01-04T09:26:50.988910 #29958] DEBUG -- : 
D, [2015-01-04T09:26:50.989369 #29958] DEBUG -- : 
I, [2015-01-04T09:26:50.990322 #29958]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-04 09:26:50 +0000
D, [2015-01-04T09:26:51.006261 #29958] DEBUG -- : 
D, [2015-01-04T09:26:51.006700 #29958] DEBUG -- : 
I, [2015-01-04T09:26:51.007849 #29958]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-04 09:26:51 +0000
D, [2015-01-04T09:26:51.026343 #29958] DEBUG -- : 
D, [2015-01-04T09:26:51.026848 #29958] DEBUG -- : 
I, [2015-01-04T09:26:51.027899 #29958]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-04 09:26:51 +0000
D, [2015-01-04T09:26:51.046980 #29958] DEBUG -- : 
D, [2015-01-04T09:26:51.048017 #29958] DEBUG -- : 
I, [2015-01-04T09:26:51.049057 #29958]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-04 09:26:51 +0000
D, [2015-01-04T09:26:51.075022 #29958] DEBUG -- : 
D, [2015-01-04T09:26:51.075604 #29958] DEBUG -- : 
I, [2015-01-04T09:26:51.076647 #29958]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-04 09:26:51 +0000
D, [2015-01-04T09:26:51.113594 #29958] DEBUG -- : 
D, [2015-01-04T09:26:51.114210 #29958] DEBUG -- : 
I, [2015-01-04T09:26:51.115636 #29958]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-04 09:26:51 +0000
D, [2015-01-04T09:26:51.151731 #29958] DEBUG -- : 
D, [2015-01-04T09:26:51.152467 #29958] DEBUG -- : 
I, [2015-01-04T09:26:51.153532 #29958]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-04 09:26:51 +0000
D, [2015-01-04T09:26:51.170847 #29958] DEBUG -- : 
D, [2015-01-04T09:26:51.171328 #29958] DEBUG -- : 
I, [2015-01-04T09:26:51.172894 #29958]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-04 09:26:51 +0000
D, [2015-01-04T09:26:51.198228 #29958] DEBUG -- : 
D, [2015-01-04T09:26:51.198731 #29958] DEBUG -- : 
I, [2015-01-04T09:26:51.199685 #29958]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-04 09:26:51 +0000
D, [2015-01-04T09:26:51.230229 #29958] DEBUG -- : 
D, [2015-01-04T09:26:51.238979 #29958] DEBUG -- : 
I, [2015-01-04T09:26:51.240055 #29958]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-04 09:26:51 +0000
D, [2015-01-04T09:26:51.273477 #29958] DEBUG -- : 
D, [2015-01-04T09:26:51.274195 #29958] DEBUG -- : 
I, [2015-01-04T09:26:51.275890 #29958]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-04 09:26:51 +0000
D, [2015-01-04T09:26:51.304880 #29958] DEBUG -- : 
D, [2015-01-04T09:26:51.305313 #29958] DEBUG -- : 
I, [2015-01-04T09:26:51.306402 #29958]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-04 09:26:51 +0000
D, [2015-01-04T09:26:51.340874 #29958] DEBUG -- : 
D, [2015-01-04T09:26:51.341356 #29958] DEBUG -- : 
I, [2015-01-04T09:26:51.342357 #29958]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-04 09:26:51 +0000
D, [2015-01-04T09:26:51.362272 #29958] DEBUG -- : 
D, [2015-01-04T09:26:51.362853 #29958] DEBUG -- : 
I, [2015-01-04T09:26:51.364054 #29958]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-04 09:26:51 +0000
D, [2015-01-04T09:26:51.405055 #29958] DEBUG -- : 
D, [2015-01-04T09:26:51.405510 #29958] DEBUG -- : 
I, [2015-01-04T09:26:51.414575 #29958]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-04 09:26:51 +0000
D, [2015-01-04T09:26:51.433511 #29958] DEBUG -- : 
D, [2015-01-04T09:26:51.433962 #29958] DEBUG -- : 
I, [2015-01-04T09:26:51.434989 #29958]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-04 09:26:51 +0000
D, [2015-01-04T09:26:51.454061 #29958] DEBUG -- : 
D, [2015-01-04T09:26:51.454726 #29958] DEBUG -- : 
I, [2015-01-04T09:26:51.456520 #29958]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-04 09:26:51 +0000
D, [2015-01-04T09:26:51.474918 #29958] DEBUG -- : 
D, [2015-01-04T09:26:51.475466 #29958] DEBUG -- : 
I, [2015-01-04T09:26:51.476590 #29958]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-04 09:26:51 +0000
D, [2015-01-04T09:26:51.493479 #29958] DEBUG -- : 
D, [2015-01-04T09:26:51.494082 #29958] DEBUG -- : 
I, [2015-01-04T09:26:51.495121 #29958]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-04 09:26:51 +0000
D, [2015-01-04T09:26:51.518996 #29958] DEBUG -- : 
D, [2015-01-04T09:26:51.519569 #29958] DEBUG -- : 
I, [2015-01-04T09:26:51.520363 #29958]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-04 09:26:51 +0000
D, [2015-01-04T09:26:51.551800 #29958] DEBUG -- : 
D, [2015-01-04T09:26:51.552250 #29958] DEBUG -- : 
I, [2015-01-04T09:26:51.554751 #29958]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-04 09:26:51 +0000
D, [2015-01-04T09:26:51.597071 #29958] DEBUG -- : 
D, [2015-01-04T09:26:51.597749 #29958] DEBUG -- : 
I, [2015-01-04T09:26:51.601157 #29958]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-04 09:26:51 +0000
D, [2015-01-04T09:26:55.580395 #29958] DEBUG -- : 
D, [2015-01-04T09:26:55.580831 #29958] DEBUG -- : 
I, [2015-01-04T09:26:55.581893 #29958]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-04 09:26:55 +0000
I, [2015-01-04T09:26:55.600968 #29958]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T09:26:55.601732 #29958]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-04T09:26:55.611527 #29958] DEBUG -- :   [1m[35mCart Load (0.7ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T09:26:55.618521 #29958] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-04T09:26:55.631481 #29958] DEBUG -- :   [1m[35mLineItem Load (0.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 53]]
D, [2015-01-04T09:26:55.644791 #29958] DEBUG -- :   [1m[36mProduct Load (0.7ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-04T09:26:55.649834 #29958] DEBUG -- :   [1m[35m (0.5ms)[0m  begin transaction
D, [2015-01-04T09:26:55.716994 #29958] DEBUG -- :   [1m[36mSQL (54.7ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 53], ["created_at", Sun, 04 Jan 2015 09:26:55 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7fcfec4ad710,'0.1299E2',18(36)>], ["size", "extra small"], ["updated_at", Sun, 04 Jan 2015 09:26:55 UTC +00:00]]
D, [2015-01-04T09:26:55.726218 #29958] DEBUG -- :   [1m[35m (4.6ms)[0m  commit transaction
D, [2015-01-04T09:26:55.769726 #29958] DEBUG -- :   [1m[36mLineItem Load (0.7ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-04T09:26:55.795315 #29958]  INFO -- :   Rendered line_items/_line_item.html.erb (8.4ms)
I, [2015-01-04T09:26:55.812293 #29958]  INFO -- :   Rendered carts/_cart.html.erb (47.6ms)
I, [2015-01-04T09:26:55.814517 #29958]  INFO -- :   Rendered line_items/create.js.erb (53.1ms)
I, [2015-01-04T09:26:55.816537 #29958]  INFO -- : Completed 200 OK in 213ms (Views: 86.3ms | ActiveRecord: 63.1ms)
D, [2015-01-04T09:26:56.681074 #29958] DEBUG -- : 
D, [2015-01-04T09:26:56.681684 #29958] DEBUG -- : 
I, [2015-01-04T09:26:56.682771 #29958]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-04 09:26:56 +0000
I, [2015-01-04T09:26:56.703494 #29958]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-04T09:26:56.704248 #29958]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-04T09:26:56.713948 #29958] DEBUG -- :   [1m[35mCart Load (0.7ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-04T09:26:56.722916 #29958] DEBUG -- :   [1m[36mProduct Load (0.8ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-04T09:26:56.734096 #29958] DEBUG -- :   [1m[35mLineItem Load (0.7ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 53]]
D, [2015-01-04T09:26:56.747075 #29958] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-04T09:26:56.752282 #29958] DEBUG -- :   [1m[35m (0.6ms)[0m  begin transaction
D, [2015-01-04T09:26:56.766175 #29958] DEBUG -- :   [1m[36mSQL (2.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 53], ["created_at", Sun, 04 Jan 2015 09:26:56 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:7fcfec15d790,'0.1099E2',18(36)>], ["size", "extra small"], ["updated_at", Sun, 04 Jan 2015 09:26:56 UTC +00:00]]
D, [2015-01-04T09:26:56.793813 #29958] DEBUG -- :   [1m[35m (23.9ms)[0m  commit transaction
D, [2015-01-04T09:26:56.812385 #29958] DEBUG -- :   [1m[36mLineItem Load (0.8ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
D, [2015-01-04T09:26:56.832562 #29958] DEBUG -- :   [1m[35mProduct Load (0.7ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-04T09:26:56.847050 #29958]  INFO -- :   Rendered line_items/_line_item.html.erb (23.4ms)
I, [2015-01-04T09:26:56.864741 #29958]  INFO -- :   Rendered carts/_cart.html.erb (57.7ms)
I, [2015-01-04T09:26:56.867118 #29958]  INFO -- :   Rendered line_items/create.js.erb (63.8ms)
I, [2015-01-04T09:26:56.869478 #29958]  INFO -- : Completed 200 OK in 164ms (Views: 70.7ms | ActiveRecord: 31.3ms)
D, [2015-01-05T20:14:00.804595 #29958] DEBUG -- : 
D, [2015-01-05T20:14:00.827654 #29958] DEBUG -- : 
I, [2015-01-05T20:14:00.874235 #29958]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-05 20:14:00 +0000
I, [2015-01-05T20:14:04.534860 #29958]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-05T20:14:04.635303 #29958] DEBUG -- :   [1m[36mUser Load (39.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
D, [2015-01-05T20:14:04.689346 #29958] DEBUG -- :   [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-05T20:14:04.770307 #29958] DEBUG -- :   [1m[36mCart Load (1.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-05T20:14:04.901606 #29958] DEBUG -- :   [1m[35mLineItem Load (13.8ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
I, [2015-01-05T20:14:04.995870 #29958]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-05T20:15:03.884856 #29958] DEBUG -- :   [1m[36m (0.6ms)[0m  [1mbegin transaction[0m
D, [2015-01-05T20:15:03.997963 #29958] DEBUG -- :   [1m[35mSQL (2.1ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Mon, 05 Jan 2015 20:15:03 UTC +00:00], ["updated_at", Mon, 05 Jan 2015 20:15:03 UTC +00:00]]
D, [2015-01-05T20:15:04.071043 #29958] DEBUG -- :   [1m[36mSQL (1.6ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 135[0m  [["cart_id", nil], ["order_id", 73], ["updated_at", Mon, 05 Jan 2015 20:15:04 UTC +00:00]]
D, [2015-01-05T20:15:04.083072 #29958] DEBUG -- :   [1m[35mSQL (1.2ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 136  [["cart_id", nil], ["order_id", 73], ["updated_at", Mon, 05 Jan 2015 20:15:04 UTC +00:00]]
I, [2015-01-05T20:15:04.084373 #29958]  INFO -- : about to @payment.create
D, [2015-01-05T20:15:12.072105 #29958] DEBUG -- :   [1m[36mProduct Load (0.9ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-05T20:15:12.135083 #29958] DEBUG -- :   [1m[35mProduct Load (0.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
I, [2015-01-05T20:15:19.617893 #29958]  INFO -- : in order=
I, [2015-01-05T20:15:26.001743 #29958]  INFO -- : in payment.create
I, [2015-01-05T20:15:26.007397 #29958]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/73/confirm", "cancel_url"=>"http://localhost:3000/orders/73/cancel"}}
I, [2015-01-05T20:15:26.009134 #29958]  INFO -- : #<ActiveModel::Errors:0x007fcfedb9c110 @base=#<Payment:0x007fcfea640bb0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fcfec1cfd68 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fcfe9ccdba0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fcfea465188 @error=nil, @total="23.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fcfe9c3e748 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fcfe9c34428 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fcfea40e298 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fcfea377938 @error=nil, @return_url="http://localhost:3000/orders/73/confirm", @cancel_url="http://localhost:3000/orders/73/cancel">, @logger=#<Logger:0x007fcfea671508 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fcfea6714e0 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fcfea671440 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fcfea671418 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fcfea671378>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fcfedb9c110 ...>>, @messages={}>
I, [2015-01-05T20:15:26.009587 #29958]  INFO -- : got past invalid
I, [2015-01-05T20:15:26.016538 #29958]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/oauth2/token
I, [2015-01-05T20:15:28.263180 #29958]  INFO -- : Response[200]: OK, Duration: 2.246s
I, [2015-01-05T20:15:28.279523 #29958]  INFO -- : PayPal-Request-Id: 4e7c478b-a451-445c-b459-387b6c5d7c22
I, [2015-01-05T20:15:28.280172 #29958]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-05T20:15:29.541423 #29958]  INFO -- : Response[201]: Created, Duration: 1.261s
I, [2015-01-05T20:15:29.547241 #29958]  INFO -- : back from super
I, [2015-01-05T20:15:29.556364 #29958]  INFO -- : {"id"=>"PAY-13P60156X26857911KSVPBYI", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98", "details"=>{"subtotal"=>"23.98"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/73/confirm", "cancel_url"=>"http://localhost:3000/orders/73/cancel"}, "create_time"=>"2015-01-05T20:15:29Z", "update_time"=>"2015-01-05T20:15:29Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-13P60156X26857911KSVPBYI", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-3DK11788R0863611H", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-13P60156X26857911KSVPBYI/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-05T20:30:51.043956 #29958] DEBUG -- :   [1m[36mSQL (63.2ms)[0m  [1mUPDATE "orders" SET "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ?, "pay_type" = ? WHERE "orders"."id" = 73[0m  [["created_at", Mon, 05 Jan 2015 20:15:03 UTC +00:00], ["updated_at", Mon, 05 Jan 2015 20:15:03 UTC +00:00], ["id", 73], ["payment_id", "PAY-13P60156X26857911KSVPBYI"], ["state", "created"], ["pay_type", "paypal"]]
D, [2015-01-05T20:32:34.647004 #29958] DEBUG -- :   [1m[35mSQL (64.6ms)[0m  UPDATE "orders" SET "amount" = ?, "updated_at" = ? WHERE "orders"."id" = 73  [["amount", 10], ["updated_at", Mon, 05 Jan 2015 20:32:34 UTC +00:00]]
D, [2015-01-05T20:45:49.607843 #29958] DEBUG -- :   [1m[36mSQL (2.5ms)[0m  [1mUPDATE "orders" SET "payment_method" = ?, "updated_at" = ? WHERE "orders"."id" = 73[0m  [["payment_method", "Paypal"], ["updated_at", Mon, 05 Jan 2015 20:45:49 UTC +00:00]]
D, [2015-01-05T20:46:46.964875 #29958] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  UPDATE "orders" SET "payment_method" = ?, "updated_at" = ?, "amount" = ? WHERE "orders"."id" = 73  [["payment_method", "Paypal"], ["updated_at", Mon, 05 Jan 2015 20:45:49 UTC +00:00], ["amount", 11]]
D, [2015-01-05T20:47:20.204225 #29958] DEBUG -- :   [1m[36mSQL (0.3ms)[0m  [1mUPDATE "orders" SET "updated_at" = ?, "amount" = ? WHERE "orders"."id" = 73[0m  [["updated_at", Mon, 05 Jan 2015 20:45:49 UTC +00:00], ["amount", 11]]
D, [2015-01-05T20:49:10.714488 #29958] DEBUG -- :   [1m[35mSQL (0.3ms)[0m  UPDATE "orders" SET "updated_at" = ?, "amount" = ?, "payment_method" = ? WHERE "orders"."id" = 73  [["updated_at", Mon, 05 Jan 2015 20:45:49 UTC +00:00], ["amount", 11], ["payment_method", "Paypal"]]
D, [2015-01-06T18:29:22.603198 #31969] DEBUG -- :   [1m[36mOrder Load (18.1ms)[0m  [1mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" DESC LIMIT 1[0m
D, [2015-01-06T18:29:43.947190 #31969] DEBUG -- :   [1m[35m (0.4ms)[0m  begin transaction
D, [2015-01-06T18:29:44.127653 #31969] DEBUG -- :   [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
D, [2015-01-06T18:34:09.790253 #31969] DEBUG -- :   [1m[35m (0.1ms)[0m  begin transaction
D, [2015-01-06T18:34:09.794837 #31969] DEBUG -- :   [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
D, [2015-01-06T18:35:01.434138 #31969] DEBUG -- :   [1m[35m (0.1ms)[0m  begin transaction
D, [2015-01-06T18:35:01.436487 #31969] DEBUG -- :   [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
D, [2015-01-06T18:39:02.915034 #31969] DEBUG -- :   [1m[35m (0.2ms)[0m  begin transaction
D, [2015-01-06T18:39:02.917864 #31969] DEBUG -- :   [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
D, [2015-01-06T18:39:45.154496 #31969] DEBUG -- :   [1m[35m (0.2ms)[0m  begin transaction
D, [2015-01-06T18:39:45.158958 #31969] DEBUG -- :   [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
D, [2015-01-06T18:40:54.331243 #31969] DEBUG -- :   [1m[35m (0.1ms)[0m  begin transaction
D, [2015-01-06T18:40:54.466671 #31969] DEBUG -- :   [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
D, [2015-01-06T18:41:19.346858 #31969] DEBUG -- :   [1m[35m (0.1ms)[0m  begin transaction
D, [2015-01-06T18:41:19.543957 #31969] DEBUG -- :   [1m[36mSQL (191.7ms)[0m  [1mUPDATE "orders" SET "payment_method" = ?, "name" = ?, "address" = ?, "email" = ?, "updated_at" = ? WHERE "orders"."id" = 72[0m  [["payment_method", "Paypal"], ["name", "simon"], ["address", "3 audley road"], ["email", "simon@c.com"], ["updated_at", Tue, 06 Jan 2015 18:41:19 UTC +00:00]]
D, [2015-01-06T18:41:19.589016 #31969] DEBUG -- :   [1m[35m (43.9ms)[0m  commit transaction
D, [2015-01-06T18:41:50.937950 #31969] DEBUG -- :   [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
D, [2015-01-06T18:41:50.939024 #31969] DEBUG -- :   [1m[35m (0.1ms)[0m  commit transaction
D, [2015-01-06T18:42:07.523006 #31969] DEBUG -- :   [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
D, [2015-01-06T18:42:07.523878 #31969] DEBUG -- :   [1m[35m (0.1ms)[0m  commit transaction
D, [2015-01-06T18:42:19.194267 #31969] DEBUG -- :   [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
D, [2015-01-06T18:42:19.199307 #31969] DEBUG -- :   [1m[35m (0.1ms)[0m  rollback transaction
D, [2015-01-06T18:42:52.579916 #31969] DEBUG -- :   [1m[36mOrder Load (24.7ms)[0m  [1mSELECT "orders".* FROM "orders" ORDER BY "orders"."id" ASC LIMIT 1[0m
D, [2015-01-06T18:42:57.961616 #31969] DEBUG -- :   [1m[35m (0.1ms)[0m  begin transaction
D, [2015-01-06T18:42:57.964790 #31969] DEBUG -- :   [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
D, [2015-01-06T18:43:20.545083 #31969] DEBUG -- :   [1m[35m (0.1ms)[0m  begin transaction
D, [2015-01-06T18:43:20.546159 #31969] DEBUG -- :   [1m[36m (0.2ms)[0m  [1mcommit transaction[0m
D, [2015-01-06T18:44:52.603983 #31986] DEBUG -- : 
D, [2015-01-06T18:44:52.604134 #31986] DEBUG -- : 
I, [2015-01-06T18:44:52.604473 #31986]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-06 18:44:52 +0000
D, [2015-01-06T18:44:56.111653 #31986] DEBUG -- :   [1m[36mActiveRecord::SchemaMigration Load (21.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
I, [2015-01-06T18:44:56.576353 #31986]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-06T18:44:56.800720 #31986] DEBUG -- :   [1m[35mUser Load (12.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
D, [2015-01-06T18:44:56.851924 #31986] DEBUG -- :   [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-06T18:44:57.065768 #31986] DEBUG -- :   [1m[35mCart Load (91.7ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-06T18:44:58.301273 #31986] DEBUG -- :   [1m[36mLineItem Load (116.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-06T18:44:58.341552 #31986]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-06T18:45:18.954323 #31986] DEBUG -- :   [1m[35m (0.6ms)[0m  begin transaction
D, [2015-01-06T18:45:19.125840 #31986] DEBUG -- :   [1m[36mSQL (39.8ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Tue, 06 Jan 2015 18:45:19 UTC +00:00], ["updated_at", Tue, 06 Jan 2015 18:45:19 UTC +00:00]]
D, [2015-01-06T18:45:19.178283 #31986] DEBUG -- :   [1m[35mSQL (2.3ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 135  [["cart_id", nil], ["order_id", 73], ["updated_at", Tue, 06 Jan 2015 18:45:19 UTC +00:00]]
D, [2015-01-06T18:45:19.191251 #31986] DEBUG -- :   [1m[36mSQL (1.2ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 136[0m  [["cart_id", nil], ["order_id", 73], ["updated_at", Tue, 06 Jan 2015 18:45:19 UTC +00:00]]
I, [2015-01-06T18:45:19.192700 #31986]  INFO -- : about to @payment.create
D, [2015-01-06T18:45:21.390794 #31986] DEBUG -- :   [1m[35mProduct Load (1.3ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-06T18:45:21.488322 #31986] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
I, [2015-01-06T18:45:23.024834 #31986]  INFO -- : in order=
I, [2015-01-06T18:45:28.990798 #31986]  INFO -- : in payment.create
I, [2015-01-06T18:45:28.996973 #31986]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/73/confirm", "cancel_url"=>"http://localhost:3000/orders/73/cancel"}}
I, [2015-01-06T18:45:28.998950 #31986]  INFO -- : #<ActiveModel::Errors:0x007ffa872f85d0 @base=#<Payment:0x007ffa8357b720 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007ffa8357acd0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007ffa87240408 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007ffa8724bf10 @error=nil, @total="23.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007ffa8724a160 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007ffa87253828 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007ffa8725be38 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007ffa873412a8 @error=nil, @return_url="http://localhost:3000/orders/73/confirm", @cancel_url="http://localhost:3000/orders/73/cancel">, @logger=#<Logger:0x007ffa850a0d70 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007ffa850a0cf8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007ffa850a0c30 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007ffa850a0c08 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007ffa850a0b68>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007ffa872f85d0 ...>>, @messages={}>
I, [2015-01-06T18:45:29.022702 #31986]  INFO -- : got past invalid
I, [2015-01-06T18:45:29.316601 #31986]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/oauth2/token
I, [2015-01-06T18:45:31.596318 #31986]  INFO -- : Response[200]: OK, Duration: 2.279s
I, [2015-01-06T18:45:31.612713 #31986]  INFO -- : PayPal-Request-Id: 49b2f0de-656e-47be-81ff-126aefb3c008
I, [2015-01-06T18:45:31.613458 #31986]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-06T18:45:32.914881 #31986]  INFO -- : Response[201]: Created, Duration: 1.301s
I, [2015-01-06T18:45:32.919822 #31986]  INFO -- : back from super
I, [2015-01-06T18:45:32.928988 #31986]  INFO -- : {"id"=>"PAY-69785077T2186552AKSWC2TA", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98", "details"=>{"subtotal"=>"23.98"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/73/confirm", "cancel_url"=>"http://localhost:3000/orders/73/cancel"}, "create_time"=>"2015-01-06T18:45:32Z", "update_time"=>"2015-01-06T18:45:32Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-69785077T2186552AKSWC2TA", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-8N677886JS662202M", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-69785077T2186552AKSWC2TA/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-06T18:47:55.889718 #31986] DEBUG -- :   [1m[35mSQL (4.0ms)[0m  UPDATE "orders" SET "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ?, "pay_type" = ? WHERE "orders"."id" = 73  [["created_at", Tue, 06 Jan 2015 18:45:19 UTC +00:00], ["updated_at", Tue, 06 Jan 2015 18:45:19 UTC +00:00], ["id", 73], ["payment_id", "PAY-69785077T2186552AKSWC2TA"], ["state", "created"], ["pay_type", "paypal"]]
I, [2015-01-06T18:47:55.892600 #31986]  INFO -- : @payment save just done
I, [2015-01-06T18:47:55.894609 #31986]  INFO -- : #<Payment:0x007ffa8357b720 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007ffa86889568 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007ffa86888c80 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007ffa868887f8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007ffa8717fbb8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007ffa8717f6e0 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007ffa8717e1a0 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007ffa8717d1d8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007ffa8717c8f0 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007ffa87175190 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007ffa873412a8 @error=nil, @return_url="http://localhost:3000/orders/73/confirm", @cancel_url="http://localhost:3000/orders/73/cancel">, @logger=#<Logger:0x007ffa850a0d70 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007ffa850a0cf8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007ffa850a0c30 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007ffa850a0c08 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007ffa850a0b68>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007ffa872f85d0 @base=#<Payment:0x007ffa8357b720 ...>, @messages={}>, @request_id="49b2f0de-656e-47be-81ff-126aefb3c008", @header={}, @id="PAY-69785077T2186552AKSWC2TA", @create_time="2015-01-06T18:45:32Z", @update_time="2015-01-06T18:45:32Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007ffa8715ff70 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-69785077T2186552AKSWC2TA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007ffa8715eb48 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-8N677886JS662202M", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007ffa8715d8b0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-69785077T2186552AKSWC2TA/execute", @rel="execute", @method="POST">]>
I, [2015-01-06T18:47:55.896199 #31986]  INFO -- : #<Payment:0x007ffa8357b720 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007ffa86889568 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007ffa86888c80 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007ffa868887f8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007ffa8717fbb8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007ffa8717f6e0 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007ffa8717e1a0 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007ffa8717d1d8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007ffa8717c8f0 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007ffa87175190 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007ffa873412a8 @error=nil, @return_url="http://localhost:3000/orders/73/confirm", @cancel_url="http://localhost:3000/orders/73/cancel">, @logger=#<Logger:0x007ffa850a0d70 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007ffa850a0cf8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007ffa850a0c30 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007ffa850a0c08 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007ffa850a0b68>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007ffa872f85d0 @base=#<Payment:0x007ffa8357b720 ...>, @messages={}>, @request_id="49b2f0de-656e-47be-81ff-126aefb3c008", @header={}, @id="PAY-69785077T2186552AKSWC2TA", @create_time="2015-01-06T18:45:32Z", @update_time="2015-01-06T18:45:32Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007ffa8715ff70 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-69785077T2186552AKSWC2TA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007ffa8715eb48 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-8N677886JS662202M", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007ffa8715d8b0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-69785077T2186552AKSWC2TA/execute", @rel="execute", @method="POST">]>
D, [2015-01-06T18:47:55.901237 #31986] DEBUG -- :   [1m[36m (3.6ms)[0m  [1mcommit transaction[0m
I, [2015-01-06T18:47:55.903315 #31986]  INFO -- : about to approve url
I, [2015-01-06T18:47:55.913788 #31986]  INFO -- : #<Payment:0x007ffa8357b720 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007ffa86889568 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007ffa86888c80 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007ffa868887f8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007ffa8717fbb8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007ffa8717f6e0 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007ffa8717e1a0 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007ffa8717d1d8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007ffa8717c8f0 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007ffa87175190 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007ffa873412a8 @error=nil, @return_url="http://localhost:3000/orders/73/confirm", @cancel_url="http://localhost:3000/orders/73/cancel">, @logger=#<Logger:0x007ffa850a0d70 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007ffa850a0cf8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007ffa850a0c30 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007ffa850a0c08 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007ffa850a0b68>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007ffa872f85d0 @base=#<Payment:0x007ffa8357b720 ...>, @messages={}>, @request_id="49b2f0de-656e-47be-81ff-126aefb3c008", @header={}, @id="PAY-69785077T2186552AKSWC2TA", @create_time="2015-01-06T18:45:32Z", @update_time="2015-01-06T18:45:32Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007ffa8715ff70 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-69785077T2186552AKSWC2TA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007ffa8715eb48 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-8N677886JS662202M", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007ffa8715d8b0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-69785077T2186552AKSWC2TA/execute", @rel="execute", @method="POST">]>
I, [2015-01-06T18:47:55.915710 #31986]  INFO -- : #<Payment:0x007ffa8357b720 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007ffa86889568 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007ffa86888c80 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007ffa868887f8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007ffa8717fbb8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007ffa8717f6e0 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007ffa8717e1a0 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007ffa8717d1d8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007ffa8717c8f0 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007ffa87175190 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007ffa873412a8 @error=nil, @return_url="http://localhost:3000/orders/73/confirm", @cancel_url="http://localhost:3000/orders/73/cancel">, @logger=#<Logger:0x007ffa850a0d70 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007ffa850a0cf8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007ffa850a0c30 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007ffa850a0c08 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007ffa850a0b68>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007ffa872f85d0 @base=#<Payment:0x007ffa8357b720 ...>, @messages={}>, @request_id="49b2f0de-656e-47be-81ff-126aefb3c008", @header={}, @id="PAY-69785077T2186552AKSWC2TA", @create_time="2015-01-06T18:45:32Z", @update_time="2015-01-06T18:45:32Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007ffa8715ff70 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-69785077T2186552AKSWC2TA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007ffa8715eb48 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-8N677886JS662202M", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007ffa8715d8b0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-69785077T2186552AKSWC2TA/execute", @rel="execute", @method="POST">]>
I, [2015-01-06T18:47:55.916339 #31986]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-8N677886JS662202M
I, [2015-01-06T18:47:55.951233 #31986]  INFO -- : #<Payment:0x007ffa8357b720 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007ffa86889568 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007ffa86888c80 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007ffa868887f8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007ffa8717fbb8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007ffa8717f6e0 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007ffa8717e1a0 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007ffa8717d1d8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007ffa8717c8f0 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007ffa87175190 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007ffa873412a8 @error=nil, @return_url="http://localhost:3000/orders/73/confirm", @cancel_url="http://localhost:3000/orders/73/cancel">, @logger=#<Logger:0x007ffa850a0d70 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007ffa850a0cf8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007ffa850a0c30 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007ffa850a0c08 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007ffa850a0b68>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007ffa872f85d0 @base=#<Payment:0x007ffa8357b720 ...>, @messages={}>, @request_id="49b2f0de-656e-47be-81ff-126aefb3c008", @header={}, @id="PAY-69785077T2186552AKSWC2TA", @create_time="2015-01-06T18:45:32Z", @update_time="2015-01-06T18:45:32Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007ffa8715ff70 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-69785077T2186552AKSWC2TA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007ffa8715eb48 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-8N677886JS662202M", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007ffa8715d8b0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-69785077T2186552AKSWC2TA/execute", @rel="execute", @method="POST">]>
I, [2015-01-06T18:47:55.953985 #31986]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-8N677886JS662202M
I, [2015-01-06T18:47:55.955634 #31986]  INFO -- : Completed 302 Found in 179379ms (ActiveRecord: 278.1ms)
D, [2015-01-06T18:47:55.965493 #31986] DEBUG -- : 
D, [2015-01-06T18:47:55.965918 #31986] DEBUG -- : 
I, [2015-01-06T18:47:55.966562 #31986]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-06 18:47:55 +0000
I, [2015-01-06T18:47:56.030537 #31986]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-06T18:47:56.041290 #31986] DEBUG -- :   [1m[35mCart Load (0.7ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-06T18:47:56.128645 #31986] DEBUG -- :   [1m[36mProduct Load (0.9ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-06T18:47:56.135775 #31986]  INFO -- : Cache digest for store/index.html: a93d4e2e981ab3dfce98a095c3b6c059
I, [2015-01-06T18:47:56.183784 #31986]  INFO -- : Read fragment views/store/products/2-20141022062504570899000/a93d4e2e981ab3dfce98a095c3b6c059 (42.2ms)
I, [2015-01-06T18:47:56.184934 #31986]  INFO -- :   Rendered store/index.html.erb within layouts/application (69.1ms)
D, [2015-01-06T18:47:57.595825 #31986] DEBUG -- :   [1m[35mLineItem Exists (0.8ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 53]]
D, [2015-01-06T18:47:57.744483 #31986] DEBUG -- :   [1m[36mLineItem Load (0.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-06T18:47:57.746883 #31986]  INFO -- :   Rendered collection (0.2ms)
I, [2015-01-06T18:47:57.812584 #31986]  INFO -- :   Rendered carts/_cart.html.erb (78.0ms)
I, [2015-01-06T18:47:57.822949 #31986]  INFO -- : Completed 200 OK in 1791ms (Views: 1775.1ms | ActiveRecord: 2.9ms)
D, [2015-01-06T18:48:01.095125 #31986] DEBUG -- : 
D, [2015-01-06T18:48:01.197364 #31986] DEBUG -- : 
I, [2015-01-06T18:48:01.198435 #31986]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-06 18:48:01 +0000
D, [2015-01-06T18:48:01.287228 #31986] DEBUG -- : 
D, [2015-01-06T18:48:01.287980 #31986] DEBUG -- : 
I, [2015-01-06T18:48:01.289133 #31986]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-06 18:48:01 +0000
D, [2015-01-06T18:48:01.355307 #31986] DEBUG -- : 
D, [2015-01-06T18:48:01.357425 #31986] DEBUG -- : 
I, [2015-01-06T18:48:01.358753 #31986]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-06 18:48:01 +0000
D, [2015-01-06T18:48:01.406952 #31986] DEBUG -- : 
D, [2015-01-06T18:48:01.407639 #31986] DEBUG -- : 
I, [2015-01-06T18:48:01.408875 #31986]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-06 18:48:01 +0000
D, [2015-01-06T18:48:01.484491 #31986] DEBUG -- : 
D, [2015-01-06T18:48:01.485313 #31986] DEBUG -- : 
I, [2015-01-06T18:48:01.486662 #31986]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-06 18:48:01 +0000
D, [2015-01-06T18:48:01.546298 #31986] DEBUG -- : 
D, [2015-01-06T18:48:01.546839 #31986] DEBUG -- : 
I, [2015-01-06T18:48:01.548224 #31986]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-06 18:48:01 +0000
D, [2015-01-06T18:48:01.601339 #31986] DEBUG -- : 
D, [2015-01-06T18:48:01.602000 #31986] DEBUG -- : 
I, [2015-01-06T18:48:01.603180 #31986]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-06 18:48:01 +0000
D, [2015-01-06T18:48:01.651015 #31986] DEBUG -- : 
D, [2015-01-06T18:48:01.652288 #31986] DEBUG -- : 
I, [2015-01-06T18:48:01.653460 #31986]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-06 18:48:01 +0000
D, [2015-01-06T18:48:01.775538 #31986] DEBUG -- : 
D, [2015-01-06T18:48:01.776179 #31986] DEBUG -- : 
I, [2015-01-06T18:48:01.777360 #31986]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-06 18:48:01 +0000
D, [2015-01-06T18:48:01.811851 #31986] DEBUG -- : 
D, [2015-01-06T18:48:01.812500 #31986] DEBUG -- : 
I, [2015-01-06T18:48:01.813665 #31986]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-06 18:48:01 +0000
D, [2015-01-06T18:48:01.979481 #31986] DEBUG -- : 
D, [2015-01-06T18:48:01.980616 #31986] DEBUG -- : 
I, [2015-01-06T18:48:01.982089 #31986]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-06 18:48:01 +0000
D, [2015-01-06T18:48:02.245078 #31986] DEBUG -- : 
D, [2015-01-06T18:48:02.245757 #31986] DEBUG -- : 
I, [2015-01-06T18:48:02.246957 #31986]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-06 18:48:02 +0000
D, [2015-01-06T18:48:02.301045 #31986] DEBUG -- : 
D, [2015-01-06T18:48:02.301668 #31986] DEBUG -- : 
I, [2015-01-06T18:48:02.302821 #31986]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-06 18:48:02 +0000
D, [2015-01-06T18:48:02.385411 #31986] DEBUG -- : 
D, [2015-01-06T18:48:02.387874 #31986] DEBUG -- : 
I, [2015-01-06T18:48:02.389216 #31986]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-06 18:48:02 +0000
D, [2015-01-06T18:48:02.510761 #31986] DEBUG -- : 
D, [2015-01-06T18:48:02.511477 #31986] DEBUG -- : 
I, [2015-01-06T18:48:02.512738 #31986]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-06 18:48:02 +0000
D, [2015-01-06T18:48:02.570747 #31986] DEBUG -- : 
D, [2015-01-06T18:48:02.571455 #31986] DEBUG -- : 
I, [2015-01-06T18:48:02.572692 #31986]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-06 18:48:02 +0000
D, [2015-01-06T18:48:02.633832 #31986] DEBUG -- : 
D, [2015-01-06T18:48:02.634460 #31986] DEBUG -- : 
I, [2015-01-06T18:48:02.635861 #31986]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-06 18:48:02 +0000
D, [2015-01-06T18:48:02.678205 #31986] DEBUG -- : 
D, [2015-01-06T18:48:02.678751 #31986] DEBUG -- : 
I, [2015-01-06T18:48:02.679936 #31986]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-06 18:48:02 +0000
D, [2015-01-06T18:48:03.691277 #31986] DEBUG -- : 
D, [2015-01-06T18:48:03.691775 #31986] DEBUG -- : 
I, [2015-01-06T18:48:03.692888 #31986]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-06 18:48:03 +0000
D, [2015-01-06T18:48:03.791321 #31986] DEBUG -- : 
D, [2015-01-06T18:48:03.791814 #31986] DEBUG -- : 
I, [2015-01-06T18:48:03.792947 #31986]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-06 18:48:03 +0000
D, [2015-01-06T18:48:03.834679 #31986] DEBUG -- : 
D, [2015-01-06T18:48:03.837206 #31986] DEBUG -- : 
I, [2015-01-06T18:48:03.838294 #31986]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-06 18:48:03 +0000
D, [2015-01-06T18:48:03.893183 #31986] DEBUG -- : 
D, [2015-01-06T18:48:03.893857 #31986] DEBUG -- : 
I, [2015-01-06T18:48:03.895050 #31986]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-06 18:48:03 +0000
D, [2015-01-06T18:48:03.931743 #31986] DEBUG -- : 
D, [2015-01-06T18:48:03.932440 #31986] DEBUG -- : 
I, [2015-01-06T18:48:03.933520 #31986]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-06 18:48:03 +0000
D, [2015-01-06T18:48:03.973519 #31986] DEBUG -- : 
D, [2015-01-06T18:48:03.974199 #31986] DEBUG -- : 
I, [2015-01-06T18:48:03.975897 #31986]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-06 18:48:03 +0000
D, [2015-01-06T18:48:04.069474 #31986] DEBUG -- : 
D, [2015-01-06T18:48:04.070021 #31986] DEBUG -- : 
I, [2015-01-06T18:48:04.071211 #31986]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-06 18:48:04 +0000
D, [2015-01-06T18:48:04.403119 #31986] DEBUG -- : 
D, [2015-01-06T18:48:04.405304 #31986] DEBUG -- : 
I, [2015-01-06T18:48:04.409578 #31986]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-06 18:48:04 +0000
D, [2015-01-06T18:48:04.524482 #31986] DEBUG -- : 
D, [2015-01-06T18:48:04.525268 #31986] DEBUG -- : 
I, [2015-01-06T18:48:04.526203 #31986]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-06 18:48:04 +0000
D, [2015-01-06T18:48:04.760201 #31986] DEBUG -- : 
D, [2015-01-06T18:48:04.761403 #31986] DEBUG -- : 
I, [2015-01-06T18:48:04.762273 #31986]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-06 18:48:04 +0000
D, [2015-01-06T18:48:05.147443 #31986] DEBUG -- : 
D, [2015-01-06T18:48:05.148551 #31986] DEBUG -- : 
I, [2015-01-06T18:48:05.149365 #31986]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-06 18:48:05 +0000
D, [2015-01-06T18:48:07.522806 #31986] DEBUG -- : 
D, [2015-01-06T18:48:07.531290 #31986] DEBUG -- : 
I, [2015-01-06T18:48:07.532203 #31986]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-06 18:48:07 +0000
D, [2015-01-06T18:48:14.307299 #31986] DEBUG -- : 
D, [2015-01-06T18:48:14.308059 #31986] DEBUG -- : 
I, [2015-01-06T18:48:14.309323 #31986]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-06 18:48:14 +0000
I, [2015-01-06T18:48:14.374459 #31986]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-06T18:48:14.388724 #31986]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-06T18:48:14.401040 #31986] DEBUG -- :   [1m[35mCart Load (0.7ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-06T18:48:14.411996 #31986] DEBUG -- :   [1m[36mProduct Load (1.1ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-06T18:48:14.434106 #31986] DEBUG -- :   [1m[35mLineItem Load (1.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 53]]
D, [2015-01-06T18:48:14.455389 #31986] DEBUG -- :   [1m[36mProduct Load (1.2ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-06T18:48:14.461595 #31986] DEBUG -- :   [1m[35m (0.7ms)[0m  begin transaction
D, [2015-01-06T18:48:14.515425 #31986] DEBUG -- :   [1m[36mSQL (6.1ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 53], ["created_at", Tue, 06 Jan 2015 18:48:14 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7ffa8699ed40,'0.1299E2',18(36)>], ["size", "extra small"], ["updated_at", Tue, 06 Jan 2015 18:48:14 UTC +00:00]]
D, [2015-01-06T18:48:14.523472 #31986] DEBUG -- :   [1m[35m (4.2ms)[0m  commit transaction
D, [2015-01-06T18:48:14.589003 #31986] DEBUG -- :   [1m[36mLineItem Load (0.8ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-06T18:48:14.625344 #31986]  INFO -- :   Rendered line_items/_line_item.html.erb (10.4ms)
I, [2015-01-06T18:48:14.644146 #31986]  INFO -- :   Rendered carts/_cart.html.erb (64.1ms)
I, [2015-01-06T18:48:14.646538 #31986]  INFO -- :   Rendered line_items/create.js.erb (86.7ms)
I, [2015-01-06T18:48:14.648928 #31986]  INFO -- : Completed 200 OK in 259ms (Views: 120.7ms | ActiveRecord: 15.7ms)
D, [2015-01-06T18:48:15.427568 #31986] DEBUG -- : 
D, [2015-01-06T18:48:15.428230 #31986] DEBUG -- : 
I, [2015-01-06T18:48:15.429499 #31986]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-06 18:48:15 +0000
I, [2015-01-06T18:48:15.463672 #31986]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-06T18:48:15.464398 #31986]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-06T18:48:15.475225 #31986] DEBUG -- :   [1m[35mCart Load (0.7ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-06T18:48:15.482788 #31986] DEBUG -- :   [1m[36mProduct Load (0.7ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-06T18:48:15.495699 #31986] DEBUG -- :   [1m[35mLineItem Load (1.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 53]]
D, [2015-01-06T18:48:15.510418 #31986] DEBUG -- :   [1m[36mProduct Load (0.7ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-06T18:48:15.516100 #31986] DEBUG -- :   [1m[35m (0.6ms)[0m  begin transaction
D, [2015-01-06T18:48:15.530685 #31986] DEBUG -- :   [1m[36mSQL (2.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 53], ["created_at", Tue, 06 Jan 2015 18:48:15 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:7ffa85794320,'0.1099E2',18(36)>], ["size", "extra small"], ["updated_at", Tue, 06 Jan 2015 18:48:15 UTC +00:00]]
D, [2015-01-06T18:48:15.538850 #31986] DEBUG -- :   [1m[35m (4.2ms)[0m  commit transaction
D, [2015-01-06T18:48:15.560512 #31986] DEBUG -- :   [1m[36mLineItem Load (0.8ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
D, [2015-01-06T18:48:15.583017 #31986] DEBUG -- :   [1m[35mProduct Load (0.9ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-06T18:48:15.600878 #31986]  INFO -- :   Rendered line_items/_line_item.html.erb (27.7ms)
I, [2015-01-06T18:48:15.620176 #31986]  INFO -- :   Rendered carts/_cart.html.erb (65.3ms)
I, [2015-01-06T18:48:15.622717 #31986]  INFO -- :   Rendered line_items/create.js.erb (73.5ms)
I, [2015-01-06T18:48:15.624876 #31986]  INFO -- : Completed 200 OK in 159ms (Views: 80.6ms | ActiveRecord: 12.0ms)
D, [2015-01-06T18:48:17.893590 #31986] DEBUG -- : 
D, [2015-01-06T18:48:17.894248 #31986] DEBUG -- : 
I, [2015-01-06T18:48:17.895077 #31986]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-06 18:48:17 +0000
I, [2015-01-06T18:48:17.932555 #31986]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-06T18:48:17.942846 #31986] DEBUG -- :   [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
D, [2015-01-06T18:48:17.950364 #31986] DEBUG -- :   [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-06T18:48:17.957612 #31986] DEBUG -- :   [1m[36mCart Load (0.7ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-06T18:48:17.970385 #31986] DEBUG -- :   [1m[35mLineItem Load (0.8ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
I, [2015-01-06T18:48:17.983121 #31986]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-06T18:48:20.754994 #31986] DEBUG -- :   [1m[36m (0.8ms)[0m  [1mbegin transaction[0m
D, [2015-01-06T18:48:20.816836 #31986] DEBUG -- :   [1m[35mSQL (51.9ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Tue, 06 Jan 2015 18:48:20 UTC +00:00], ["updated_at", Tue, 06 Jan 2015 18:48:20 UTC +00:00]]
D, [2015-01-06T18:48:20.832881 #31986] DEBUG -- :   [1m[36mSQL (1.6ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 137[0m  [["cart_id", nil], ["order_id", 74], ["updated_at", Tue, 06 Jan 2015 18:48:20 UTC +00:00]]
D, [2015-01-06T18:48:20.856268 #31986] DEBUG -- :   [1m[35mSQL (1.6ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 138  [["cart_id", nil], ["order_id", 74], ["updated_at", Tue, 06 Jan 2015 18:48:20 UTC +00:00]]
I, [2015-01-06T18:48:20.858321 #31986]  INFO -- : about to @payment.create
D, [2015-01-06T18:48:21.905720 #31986] DEBUG -- :   [1m[36mProduct Load (1.1ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-06T18:48:21.918451 #31986] DEBUG -- :   [1m[35mProduct Load (2.1ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
I, [2015-01-06T18:48:22.977923 #31986]  INFO -- : in order=
I, [2015-01-06T18:48:24.088337 #31986]  INFO -- : in payment.create
I, [2015-01-06T18:48:24.101699 #31986]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/74/confirm", "cancel_url"=>"http://localhost:3000/orders/74/cancel"}}
I, [2015-01-06T18:48:24.103616 #31986]  INFO -- : #<ActiveModel::Errors:0x007ffa8523dd68 @base=#<Payment:0x007ffa8534f440 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007ffa8534e8d8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007ffa8529e898 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007ffa8529e398 @error=nil, @total="23.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007ffa834afdc8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007ffa834ad2d0 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007ffa834a4d10 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007ffa83455f30 @error=nil, @return_url="http://localhost:3000/orders/74/confirm", @cancel_url="http://localhost:3000/orders/74/cancel">, @logger=#<Logger:0x007ffa850a0d70 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007ffa850a0cf8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007ffa850a0c30 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007ffa850a0c08 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007ffa850a0b68>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007ffa8523dd68 ...>>, @messages={}>
I, [2015-01-06T18:48:24.104268 #31986]  INFO -- : got past invalid
I, [2015-01-06T18:48:24.139531 #31986]  INFO -- : PayPal-Request-Id: 3220b392-c1ef-4255-bac8-35507c411ae4
I, [2015-01-06T18:48:24.140315 #31986]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-06T18:48:25.979027 #31986]  INFO -- : Response[201]: Created, Duration: 1.838s
I, [2015-01-06T18:48:25.986213 #31986]  INFO -- : back from super
I, [2015-01-06T18:48:25.997270 #31986]  INFO -- : {"id"=>"PAY-8P7613789H438333FKSWC36I", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98", "details"=>{"subtotal"=>"23.98"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/74/confirm", "cancel_url"=>"http://localhost:3000/orders/74/cancel"}, "create_time"=>"2015-01-06T18:48:25Z", "update_time"=>"2015-01-06T18:48:25Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-8P7613789H438333FKSWC36I", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-77L87041T7578660K", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-8P7613789H438333FKSWC36I/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-06T18:48:26.041079 #31986] DEBUG -- :   [1m[36mSQL (28.9ms)[0m  [1mUPDATE "orders" SET "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ?, "pay_type" = ? WHERE "orders"."id" = 74[0m  [["created_at", Tue, 06 Jan 2015 18:48:20 UTC +00:00], ["updated_at", Tue, 06 Jan 2015 18:48:20 UTC +00:00], ["id", 74], ["payment_id", "PAY-8P7613789H438333FKSWC36I"], ["state", "created"], ["pay_type", "paypal"]]
I, [2015-01-06T18:48:26.045182 #31986]  INFO -- : @payment save just done
I, [2015-01-06T18:48:26.047438 #31986]  INFO -- : #<Payment:0x007ffa8534f440 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007ffa8513d328 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007ffa8513c568 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007ffa85137ce8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007ffa85137090 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007ffa85136b18 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007ffa85135e70 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007ffa85134098 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007ffa8512f250 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007ffa8512d568 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007ffa83455f30 @error=nil, @return_url="http://localhost:3000/orders/74/confirm", @cancel_url="http://localhost:3000/orders/74/cancel">, @logger=#<Logger:0x007ffa850a0d70 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007ffa850a0cf8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007ffa850a0c30 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007ffa850a0c08 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007ffa850a0b68>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007ffa8523dd68 @base=#<Payment:0x007ffa8534f440 ...>, @messages={}>, @request_id="3220b392-c1ef-4255-bac8-35507c411ae4", @header={}, @id="PAY-8P7613789H438333FKSWC36I", @create_time="2015-01-06T18:48:25Z", @update_time="2015-01-06T18:48:25Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007ffa85125c78 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8P7613789H438333FKSWC36I", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007ffa85124be8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-77L87041T7578660K", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007ffa8511f440 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8P7613789H438333FKSWC36I/execute", @rel="execute", @method="POST">]>
I, [2015-01-06T18:48:26.049284 #31986]  INFO -- : #<Payment:0x007ffa8534f440 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007ffa8513d328 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007ffa8513c568 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007ffa85137ce8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007ffa85137090 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007ffa85136b18 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007ffa85135e70 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007ffa85134098 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007ffa8512f250 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007ffa8512d568 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007ffa83455f30 @error=nil, @return_url="http://localhost:3000/orders/74/confirm", @cancel_url="http://localhost:3000/orders/74/cancel">, @logger=#<Logger:0x007ffa850a0d70 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007ffa850a0cf8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007ffa850a0c30 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007ffa850a0c08 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007ffa850a0b68>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007ffa8523dd68 @base=#<Payment:0x007ffa8534f440 ...>, @messages={}>, @request_id="3220b392-c1ef-4255-bac8-35507c411ae4", @header={}, @id="PAY-8P7613789H438333FKSWC36I", @create_time="2015-01-06T18:48:25Z", @update_time="2015-01-06T18:48:25Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007ffa85125c78 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8P7613789H438333FKSWC36I", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007ffa85124be8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-77L87041T7578660K", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007ffa8511f440 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8P7613789H438333FKSWC36I/execute", @rel="execute", @method="POST">]>
D, [2015-01-06T18:48:26.055002 #31986] DEBUG -- :   [1m[35m (3.9ms)[0m  commit transaction
I, [2015-01-06T18:48:26.056346 #31986]  INFO -- : about to approve url
I, [2015-01-06T18:48:26.058013 #31986]  INFO -- : #<Payment:0x007ffa8534f440 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007ffa8513d328 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007ffa8513c568 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007ffa85137ce8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007ffa85137090 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007ffa85136b18 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007ffa85135e70 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007ffa85134098 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007ffa8512f250 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007ffa8512d568 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007ffa83455f30 @error=nil, @return_url="http://localhost:3000/orders/74/confirm", @cancel_url="http://localhost:3000/orders/74/cancel">, @logger=#<Logger:0x007ffa850a0d70 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007ffa850a0cf8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007ffa850a0c30 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007ffa850a0c08 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007ffa850a0b68>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007ffa8523dd68 @base=#<Payment:0x007ffa8534f440 ...>, @messages={}>, @request_id="3220b392-c1ef-4255-bac8-35507c411ae4", @header={}, @id="PAY-8P7613789H438333FKSWC36I", @create_time="2015-01-06T18:48:25Z", @update_time="2015-01-06T18:48:25Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007ffa85125c78 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8P7613789H438333FKSWC36I", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007ffa85124be8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-77L87041T7578660K", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007ffa8511f440 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8P7613789H438333FKSWC36I/execute", @rel="execute", @method="POST">]>
I, [2015-01-06T18:48:26.059985 #31986]  INFO -- : #<Payment:0x007ffa8534f440 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007ffa8513d328 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007ffa8513c568 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007ffa85137ce8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007ffa85137090 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007ffa85136b18 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007ffa85135e70 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007ffa85134098 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007ffa8512f250 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007ffa8512d568 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007ffa83455f30 @error=nil, @return_url="http://localhost:3000/orders/74/confirm", @cancel_url="http://localhost:3000/orders/74/cancel">, @logger=#<Logger:0x007ffa850a0d70 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007ffa850a0cf8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007ffa850a0c30 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007ffa850a0c08 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007ffa850a0b68>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007ffa8523dd68 @base=#<Payment:0x007ffa8534f440 ...>, @messages={}>, @request_id="3220b392-c1ef-4255-bac8-35507c411ae4", @header={}, @id="PAY-8P7613789H438333FKSWC36I", @create_time="2015-01-06T18:48:25Z", @update_time="2015-01-06T18:48:25Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007ffa85125c78 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8P7613789H438333FKSWC36I", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007ffa85124be8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-77L87041T7578660K", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007ffa8511f440 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8P7613789H438333FKSWC36I/execute", @rel="execute", @method="POST">]>
I, [2015-01-06T18:48:26.060731 #31986]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-77L87041T7578660K
I, [2015-01-06T18:48:26.062387 #31986]  INFO -- : #<Payment:0x007ffa8534f440 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007ffa8513d328 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007ffa8513c568 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007ffa85137ce8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007ffa85137090 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007ffa85136b18 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007ffa85135e70 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007ffa85134098 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007ffa8512f250 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007ffa8512d568 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007ffa83455f30 @error=nil, @return_url="http://localhost:3000/orders/74/confirm", @cancel_url="http://localhost:3000/orders/74/cancel">, @logger=#<Logger:0x007ffa850a0d70 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007ffa850a0cf8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007ffa850a0c30 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007ffa850a0c08 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007ffa850a0b68>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007ffa8523dd68 @base=#<Payment:0x007ffa8534f440 ...>, @messages={}>, @request_id="3220b392-c1ef-4255-bac8-35507c411ae4", @header={}, @id="PAY-8P7613789H438333FKSWC36I", @create_time="2015-01-06T18:48:25Z", @update_time="2015-01-06T18:48:25Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007ffa85125c78 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8P7613789H438333FKSWC36I", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007ffa85124be8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-77L87041T7578660K", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007ffa8511f440 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8P7613789H438333FKSWC36I/execute", @rel="execute", @method="POST">]>
I, [2015-01-06T18:48:26.065058 #31986]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-77L87041T7578660K
I, [2015-01-06T18:48:26.068350 #31986]  INFO -- : Completed 403 Forbidden in 8134ms (ActiveRecord: 95.1ms)
D, [2015-01-06T18:49:47.617889 #31986] DEBUG -- : 
D, [2015-01-06T18:49:47.717821 #31986] DEBUG -- : 
I, [2015-01-06T18:49:47.719036 #31986]  INFO -- : Started GET "/orders/74/confirm?paymentId=PAY-8P7613789H438333FKSWC36I&token=EC-77L87041T7578660K&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-06 18:49:47 +0000
I, [2015-01-06T18:49:47.836763 #31986]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-06T18:49:47.839973 #31986]  INFO -- :   Parameters: {"paymentId"=>"PAY-8P7613789H438333FKSWC36I", "token"=>"EC-77L87041T7578660K", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"74"}
D, [2015-01-06T18:49:47.854751 #31986] DEBUG -- :   [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
D, [2015-01-06T18:49:47.860699 #31986] DEBUG -- :   [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-06T18:49:47.867362 #31986] DEBUG -- :   [1m[36mOrder Load (1.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "74"]]
I, [2015-01-06T18:53:30.209734 #31986]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-8P7613789H438333FKSWC36I
I, [2015-01-06T18:53:31.968755 #31986]  INFO -- : Response[200]: OK, Duration: 1.562s
D, [2015-01-06T18:54:12.928961 #31986] DEBUG -- :   [1m[35m (0.3ms)[0m  begin transaction
D, [2015-01-06T18:54:12.932783 #31986] DEBUG -- :   [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
D, [2015-01-06T18:54:56.304623 #31986] DEBUG -- :   [1m[35m (0.1ms)[0m  begin transaction
D, [2015-01-06T18:54:56.321213 #31986] DEBUG -- :   [1m[36mSQL (14.1ms)[0m  [1mUPDATE "orders" SET "name" = ?, "email" = ?, "address" = ?, "updated_at" = ? WHERE "orders"."id" = 74[0m  [["name", "Test Buyer"], ["email", "simon.king65-buyer@gmail.com"], ["address", "1 Main Terrace"], ["updated_at", Tue, 06 Jan 2015 18:54:56 UTC +00:00]]
D, [2015-01-06T18:54:56.323239 #31986] DEBUG -- :   [1m[35m (1.5ms)[0m  commit transaction
D, [2015-01-06T18:55:21.401288 #31986] DEBUG -- :   [1m[36mOrder Load (0.2ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", 74]]
D, [2015-01-06T18:56:18.511002 #31986] DEBUG -- :   [1m[35m (0.1ms)[0m  begin transaction
D, [2015-01-06T18:56:18.511658 #31986] DEBUG -- :   [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
D, [2015-01-06T18:56:35.617266 #31986] DEBUG -- :   [1m[35mCACHE (0.0ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", 74]]
D, [2015-01-06T19:03:02.593429 #32074] DEBUG -- : 
D, [2015-01-06T19:03:02.602717 #32074] DEBUG -- : 
I, [2015-01-06T19:03:02.603232 #32074]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-06 19:03:02 +0000
D, [2015-01-06T19:03:03.193285 #32074] DEBUG -- :   [1m[36mActiveRecord::SchemaMigration Load (6.9ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
I, [2015-01-06T19:03:03.579889 #32074]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-06T19:03:03.580017 #32074]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-06T19:03:03.693873 #32074] DEBUG -- :   [1m[35mCart Load (34.2ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-06T19:03:03.712041 #32074] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-06T19:03:03.802825 #32074] DEBUG -- :   [1m[35mLineItem Load (0.3ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 53]]
D, [2015-01-06T19:03:03.881014 #32074] DEBUG -- :   [1m[36mProduct Load (0.3ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-06T19:03:03.881840 #32074] DEBUG -- :   [1m[35m (0.1ms)[0m  begin transaction
D, [2015-01-06T19:03:03.971772 #32074] DEBUG -- :   [1m[36mSQL (78.8ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 53], ["created_at", Tue, 06 Jan 2015 19:03:03 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7fb6d5193cf8,'0.1299E2',18(36)>], ["size", "extra small"], ["updated_at", Tue, 06 Jan 2015 19:03:03 UTC +00:00]]
D, [2015-01-06T19:03:03.976138 #32074] DEBUG -- :   [1m[35m (3.9ms)[0m  commit transaction
D, [2015-01-06T19:03:04.169420 #32074] DEBUG -- :   [1m[36mLineItem Load (0.3ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-06T19:03:04.384366 #32074]  INFO -- :   Rendered line_items/_line_item.html.erb (170.5ms)
I, [2015-01-06T19:03:04.388903 #32074]  INFO -- :   Rendered carts/_cart.html.erb (221.0ms)
I, [2015-01-06T19:03:04.389265 #32074]  INFO -- :   Rendered line_items/create.js.erb (312.0ms)
I, [2015-01-06T19:03:04.389614 #32074]  INFO -- : Completed 200 OK in 809ms (Views: 412.6ms | ActiveRecord: 119.6ms)
D, [2015-01-06T19:03:04.391437 #32074] DEBUG -- : 
D, [2015-01-06T19:03:04.392265 #32074] DEBUG -- : 
I, [2015-01-06T19:03:04.392532 #32074]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-06 19:03:04 +0000
I, [2015-01-06T19:03:04.398846 #32074]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-06T19:03:04.399065 #32074]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-06T19:03:04.400546 #32074] DEBUG -- :   [1m[35mCart Load (0.2ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-06T19:03:04.401308 #32074] DEBUG -- :   [1m[36mProduct Load (0.1ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-06T19:03:04.403392 #32074] DEBUG -- :   [1m[35mLineItem Load (0.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 53]]
D, [2015-01-06T19:03:04.404969 #32074] DEBUG -- :   [1m[36mProduct Load (0.1ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-06T19:03:04.405513 #32074] DEBUG -- :   [1m[35m (0.1ms)[0m  begin transaction
D, [2015-01-06T19:03:04.436091 #32074] DEBUG -- :   [1m[36mSQL (29.4ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 53], ["created_at", Tue, 06 Jan 2015 19:03:04 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:7fb6d525d508,'0.1099E2',18(36)>], ["size", "extra small"], ["updated_at", Tue, 06 Jan 2015 19:03:04 UTC +00:00]]
D, [2015-01-06T19:03:04.439818 #32074] DEBUG -- :   [1m[35m (2.5ms)[0m  commit transaction
D, [2015-01-06T19:03:04.444959 #32074] DEBUG -- :   [1m[36mLineItem Load (0.2ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
D, [2015-01-06T19:03:04.458503 #32074] DEBUG -- :   [1m[35mProduct Load (0.4ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-06T19:03:04.460276 #32074]  INFO -- :   Rendered line_items/_line_item.html.erb (13.1ms)
I, [2015-01-06T19:03:04.462152 #32074]  INFO -- :   Rendered carts/_cart.html.erb (18.1ms)
I, [2015-01-06T19:03:04.462461 #32074]  INFO -- :   Rendered line_items/create.js.erb (19.5ms)
I, [2015-01-06T19:03:04.462711 #32074]  INFO -- : Completed 200 OK in 63ms (Views: 21.9ms | ActiveRecord: 33.6ms)
D, [2015-01-06T19:03:06.888195 #32074] DEBUG -- : 
D, [2015-01-06T19:03:06.888418 #32074] DEBUG -- : 
I, [2015-01-06T19:03:06.888598 #32074]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-06 19:03:06 +0000
I, [2015-01-06T19:03:06.915947 #32074]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-06T19:03:06.949551 #32074] DEBUG -- :   [1m[36mUser Load (21.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
D, [2015-01-06T19:03:06.966936 #32074] DEBUG -- :   [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-06T19:03:06.968450 #32074] DEBUG -- :   [1m[36mCart Load (0.2ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-06T19:03:06.988456 #32074] DEBUG -- :   [1m[35mLineItem Load (0.2ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
I, [2015-01-06T19:03:06.991702 #32074]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-06T19:03:14.214900 #32074] DEBUG -- :   [1m[36m (0.6ms)[0m  [1mbegin transaction[0m
D, [2015-01-06T19:03:14.397779 #32074] DEBUG -- :   [1m[35mSQL (51.4ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Tue, 06 Jan 2015 19:03:14 UTC +00:00], ["updated_at", Tue, 06 Jan 2015 19:03:14 UTC +00:00]]
D, [2015-01-06T19:03:14.417205 #32074] DEBUG -- :   [1m[36mSQL (1.6ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 139[0m  [["cart_id", nil], ["order_id", 75], ["updated_at", Tue, 06 Jan 2015 19:03:14 UTC +00:00]]
D, [2015-01-06T19:03:14.431751 #32074] DEBUG -- :   [1m[35mSQL (1.5ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 140  [["cart_id", nil], ["order_id", 75], ["updated_at", Tue, 06 Jan 2015 19:03:14 UTC +00:00]]
I, [2015-01-06T19:03:14.436450 #32074]  INFO -- : about to @payment.create
D, [2015-01-06T19:03:17.692572 #32074] DEBUG -- :   [1m[36mProduct Load (0.7ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-06T19:03:17.736506 #32074] DEBUG -- :   [1m[35mProduct Load (0.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
I, [2015-01-06T19:03:19.709728 #32074]  INFO -- : in order=
I, [2015-01-06T19:03:32.553094 #32074]  INFO -- : in payment.create
I, [2015-01-06T19:03:32.598909 #32074]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/75/confirm", "cancel_url"=>"http://localhost:3000/orders/75/cancel"}}
I, [2015-01-06T19:03:32.600766 #32074]  INFO -- : #<ActiveModel::Errors:0x007fb6d3e0f088 @base=#<Payment:0x007fb6d539a8d0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fb6d5399ef8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fb6d3eb09b0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fb6d3eb0398 @error=nil, @total="23.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fb6d3ea8eb8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fb6d3ea23d8 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fb6d3e996e8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fb6d52d0490 @error=nil, @return_url="http://localhost:3000/orders/75/confirm", @cancel_url="http://localhost:3000/orders/75/cancel">, @logger=#<Logger:0x007fb6d15e8eb0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fb6d15e8e10 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fb6d15e8d70 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fb6d15e8d48 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fb6d15e8c80>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fb6d3e0f088 ...>>, @messages={}>
I, [2015-01-06T19:03:32.601489 #32074]  INFO -- : got past invalid
I, [2015-01-06T19:03:32.742733 #32074]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/oauth2/token
I, [2015-01-06T19:03:34.253804 #32074]  INFO -- : Response[200]: OK, Duration: 1.510s
I, [2015-01-06T19:03:34.270576 #32074]  INFO -- : PayPal-Request-Id: e3534208-c684-4324-bd0c-8b8b96595d4a
I, [2015-01-06T19:03:34.271273 #32074]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-06T19:03:36.711038 #32074]  INFO -- : Response[201]: Created, Duration: 2.439s
I, [2015-01-06T19:03:36.716585 #32074]  INFO -- : back from super
I, [2015-01-06T19:03:36.725802 #32074]  INFO -- : {"id"=>"PAY-3KG88760TV212253PKSWDDCA", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98", "details"=>{"subtotal"=>"23.98"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/75/confirm", "cancel_url"=>"http://localhost:3000/orders/75/cancel"}, "create_time"=>"2015-01-06T19:03:36Z", "update_time"=>"2015-01-06T19:03:36Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-3KG88760TV212253PKSWDDCA", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-312037150J8853915", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-3KG88760TV212253PKSWDDCA/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-06T19:04:58.378720 #32076] DEBUG -- : 
D, [2015-01-06T19:04:58.378809 #32076] DEBUG -- : 
I, [2015-01-06T19:04:58.379066 #32076]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-06 19:04:58 +0000
D, [2015-01-06T19:04:58.960791 #32076] DEBUG -- :   [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
I, [2015-01-06T19:04:59.111228 #32076]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-06T19:04:59.171284 #32076] DEBUG -- :   [1m[35mCart Load (3.3ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-06T19:04:59.293752 #32076] DEBUG -- :   [1m[36mProduct Load (0.5ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-06T19:04:59.343248 #32076]  INFO -- : Cache digest for store/index.html: a93d4e2e981ab3dfce98a095c3b6c059
I, [2015-01-06T19:04:59.347687 #32076]  INFO -- : Read fragment views/store/products/2-20141022062504570899000/a93d4e2e981ab3dfce98a095c3b6c059 (3.2ms)
I, [2015-01-06T19:04:59.347942 #32076]  INFO -- :   Rendered store/index.html.erb within layouts/application (79.3ms)
D, [2015-01-06T19:04:59.870284 #32076] DEBUG -- :   [1m[35mLineItem Exists (0.3ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 53]]
D, [2015-01-06T19:04:59.935324 #32076] DEBUG -- :   [1m[36mLineItem Load (13.5ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
D, [2015-01-06T19:04:59.989127 #32076] DEBUG -- :   [1m[35mProduct Load (0.3ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-06T19:05:00.058117 #32076] DEBUG -- :   [1m[36mProduct Load (0.2ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
I, [2015-01-06T19:05:00.058937 #32076]  INFO -- :   Rendered line_items/_line_item.html.erb (81.7ms)
I, [2015-01-06T19:05:00.062451 #32076]  INFO -- :   Rendered carts/_cart.html.erb (142.3ms)
I, [2015-01-06T19:05:00.064046 #32076]  INFO -- : Completed 200 OK in 953ms (Views: 853.0ms | ActiveRecord: 19.5ms)
D, [2015-01-06T19:05:00.134170 #32076] DEBUG -- : 
D, [2015-01-06T19:05:00.134256 #32076] DEBUG -- : 
I, [2015-01-06T19:05:00.134497 #32076]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-06 19:05:00 +0000
D, [2015-01-06T19:05:00.186312 #32076] DEBUG -- : 
D, [2015-01-06T19:05:00.186401 #32076] DEBUG -- : 
I, [2015-01-06T19:05:00.189203 #32076]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-06 19:05:00 +0000
D, [2015-01-06T19:05:00.196166 #32076] DEBUG -- : 
D, [2015-01-06T19:05:00.196268 #32076] DEBUG -- : 
I, [2015-01-06T19:05:00.196542 #32076]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-06 19:05:00 +0000
D, [2015-01-06T19:05:00.203934 #32076] DEBUG -- : 
D, [2015-01-06T19:05:00.204021 #32076] DEBUG -- : 
I, [2015-01-06T19:05:00.204366 #32076]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-06 19:05:00 +0000
D, [2015-01-06T19:05:00.213998 #32076] DEBUG -- : 
D, [2015-01-06T19:05:00.214077 #32076] DEBUG -- : 
I, [2015-01-06T19:05:00.214407 #32076]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-06 19:05:00 +0000
D, [2015-01-06T19:05:00.224889 #32076] DEBUG -- : 
D, [2015-01-06T19:05:00.224980 #32076] DEBUG -- : 
I, [2015-01-06T19:05:00.225225 #32076]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-06 19:05:00 +0000
D, [2015-01-06T19:05:00.274488 #32076] DEBUG -- : 
D, [2015-01-06T19:05:00.274569 #32076] DEBUG -- : 
I, [2015-01-06T19:05:00.274810 #32076]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-06 19:05:00 +0000
D, [2015-01-06T19:05:00.293470 #32076] DEBUG -- : 
D, [2015-01-06T19:05:00.293547 #32076] DEBUG -- : 
I, [2015-01-06T19:05:00.293769 #32076]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-06 19:05:00 +0000
D, [2015-01-06T19:05:00.304220 #32076] DEBUG -- : 
D, [2015-01-06T19:05:00.304303 #32076] DEBUG -- : 
I, [2015-01-06T19:05:00.304517 #32076]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-06 19:05:00 +0000
D, [2015-01-06T19:05:00.345602 #32076] DEBUG -- : 
D, [2015-01-06T19:05:00.345687 #32076] DEBUG -- : 
I, [2015-01-06T19:05:00.345895 #32076]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-06 19:05:00 +0000
D, [2015-01-06T19:05:00.363482 #32076] DEBUG -- : 
D, [2015-01-06T19:05:00.363563 #32076] DEBUG -- : 
I, [2015-01-06T19:05:00.363802 #32076]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-06 19:05:00 +0000
D, [2015-01-06T19:05:00.379421 #32076] DEBUG -- : 
D, [2015-01-06T19:05:00.379500 #32076] DEBUG -- : 
I, [2015-01-06T19:05:00.379697 #32076]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-06 19:05:00 +0000
D, [2015-01-06T19:05:00.389458 #32076] DEBUG -- : 
D, [2015-01-06T19:05:00.389576 #32076] DEBUG -- : 
I, [2015-01-06T19:05:00.389765 #32076]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-06 19:05:00 +0000
D, [2015-01-06T19:05:00.405742 #32076] DEBUG -- : 
D, [2015-01-06T19:05:00.405830 #32076] DEBUG -- : 
I, [2015-01-06T19:05:00.406045 #32076]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-06 19:05:00 +0000
D, [2015-01-06T19:05:00.420640 #32076] DEBUG -- : 
D, [2015-01-06T19:05:00.420724 #32076] DEBUG -- : 
I, [2015-01-06T19:05:00.420946 #32076]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-06 19:05:00 +0000
D, [2015-01-06T19:05:00.432214 #32076] DEBUG -- : 
D, [2015-01-06T19:05:00.432292 #32076] DEBUG -- : 
I, [2015-01-06T19:05:00.432531 #32076]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-06 19:05:00 +0000
D, [2015-01-06T19:05:00.446621 #32076] DEBUG -- : 
D, [2015-01-06T19:05:00.446704 #32076] DEBUG -- : 
I, [2015-01-06T19:05:00.446942 #32076]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-06 19:05:00 +0000
D, [2015-01-06T19:05:00.462214 #32076] DEBUG -- : 
D, [2015-01-06T19:05:00.462298 #32076] DEBUG -- : 
I, [2015-01-06T19:05:00.462492 #32076]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-06 19:05:00 +0000
D, [2015-01-06T19:05:00.477717 #32076] DEBUG -- : 
D, [2015-01-06T19:05:00.477799 #32076] DEBUG -- : 
I, [2015-01-06T19:05:00.477997 #32076]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-06 19:05:00 +0000
D, [2015-01-06T19:05:00.493644 #32076] DEBUG -- : 
D, [2015-01-06T19:05:00.493727 #32076] DEBUG -- : 
I, [2015-01-06T19:05:00.493924 #32076]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-06 19:05:00 +0000
D, [2015-01-06T19:05:00.511229 #32076] DEBUG -- : 
D, [2015-01-06T19:05:00.511312 #32076] DEBUG -- : 
I, [2015-01-06T19:05:00.511576 #32076]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-06 19:05:00 +0000
D, [2015-01-06T19:05:00.536082 #32076] DEBUG -- : 
D, [2015-01-06T19:05:00.536163 #32076] DEBUG -- : 
I, [2015-01-06T19:05:00.536491 #32076]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-06 19:05:00 +0000
D, [2015-01-06T19:05:00.543285 #32076] DEBUG -- : 
D, [2015-01-06T19:05:00.543366 #32076] DEBUG -- : 
I, [2015-01-06T19:05:00.543557 #32076]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-06 19:05:00 +0000
D, [2015-01-06T19:05:00.592352 #32076] DEBUG -- : 
D, [2015-01-06T19:05:00.592431 #32076] DEBUG -- : 
I, [2015-01-06T19:05:00.592624 #32076]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-06 19:05:00 +0000
D, [2015-01-06T19:05:00.601397 #32076] DEBUG -- : 
D, [2015-01-06T19:05:00.601477 #32076] DEBUG -- : 
I, [2015-01-06T19:05:00.603188 #32076]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-06 19:05:00 +0000
D, [2015-01-06T19:05:00.642472 #32076] DEBUG -- : 
D, [2015-01-06T19:05:00.642669 #32076] DEBUG -- : 
I, [2015-01-06T19:05:00.642871 #32076]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-06 19:05:00 +0000
D, [2015-01-06T19:05:00.651893 #32076] DEBUG -- : 
D, [2015-01-06T19:05:00.651970 #32076] DEBUG -- : 
I, [2015-01-06T19:05:00.652095 #32076]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-06 19:05:00 +0000
D, [2015-01-06T19:05:00.720064 #32076] DEBUG -- : 
D, [2015-01-06T19:05:00.720142 #32076] DEBUG -- : 
I, [2015-01-06T19:05:00.720397 #32076]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-06 19:05:00 +0000
D, [2015-01-06T19:05:00.754974 #32076] DEBUG -- : 
D, [2015-01-06T19:05:00.755163 #32076] DEBUG -- : 
I, [2015-01-06T19:05:00.755298 #32076]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-06 19:05:00 +0000
D, [2015-01-06T19:05:03.809469 #32076] DEBUG -- : 
D, [2015-01-06T19:05:03.809551 #32076] DEBUG -- : 
I, [2015-01-06T19:05:03.809680 #32076]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-06 19:05:03 +0000
I, [2015-01-06T19:05:03.840038 #32076]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-06T19:05:03.879633 #32076] DEBUG -- :   [1m[35mUser Load (12.9ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
D, [2015-01-06T19:05:03.899888 #32076] DEBUG -- :   [1m[36mUser Load (0.3ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-06T19:05:03.900941 #32076] DEBUG -- :   [1m[35mCart Load (0.2ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-06T19:05:03.909483 #32076] DEBUG -- :   [1m[36mLineItem Load (0.2ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-06T19:05:03.912053 #32076]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-06T19:05:20.658282 #32076] DEBUG -- :   [1m[35m (0.6ms)[0m  begin transaction
D, [2015-01-06T19:05:20.851968 #32076] DEBUG -- :   [1m[36mSQL (61.0ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Tue, 06 Jan 2015 19:05:20 UTC +00:00], ["updated_at", Tue, 06 Jan 2015 19:05:20 UTC +00:00]]
D, [2015-01-06T19:05:20.896847 #32076] DEBUG -- :   [1m[35mSQL (2.6ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 139  [["cart_id", nil], ["order_id", 75], ["updated_at", Tue, 06 Jan 2015 19:05:20 UTC +00:00]]
D, [2015-01-06T19:05:20.911254 #32076] DEBUG -- :   [1m[36mSQL (1.4ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 140[0m  [["cart_id", nil], ["order_id", 75], ["updated_at", Tue, 06 Jan 2015 19:05:20 UTC +00:00]]
I, [2015-01-06T19:05:20.912935 #32076]  INFO -- : about to @payment.create
D, [2015-01-06T19:05:28.120456 #32076] DEBUG -- :   [1m[35mProduct Load (0.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-06T19:05:28.130597 #32076] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
I, [2015-01-06T19:05:31.905819 #32076]  INFO -- : in order=
I, [2015-01-06T19:05:43.624966 #32076]  INFO -- : in payment.create
I, [2015-01-06T19:05:43.635717 #32076]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/75/confirm", "cancel_url"=>"http://localhost:3000/orders/75/cancel"}}
I, [2015-01-06T19:05:43.638366 #32076]  INFO -- : #<ActiveModel::Errors:0x007feea70972c8 @base=#<Payment:0x007feea5023208 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007feea5021228 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007feea3456ae8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007feea34545e0 @error=nil, @total="23.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007feea343edf8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007feea3425240 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007feea2e09cd0 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007feea32c4d60 @error=nil, @return_url="http://localhost:3000/orders/75/confirm", @cancel_url="http://localhost:3000/orders/75/cancel">, @logger=#<Logger:0x007feea2f553a0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007feea2f55378 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007feea2f552d8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007feea2f552b0 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007feea2f55210>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007feea70972c8 ...>>, @messages={}>
I, [2015-01-06T19:05:43.638930 #32076]  INFO -- : got past invalid
I, [2015-01-06T19:05:43.750702 #32076]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/oauth2/token
I, [2015-01-06T19:05:45.446020 #32076]  INFO -- : Response[200]: OK, Duration: 1.694s
I, [2015-01-06T19:05:45.466297 #32076]  INFO -- : PayPal-Request-Id: bfc89ffa-adb9-4e31-bf5b-d44596f57ae1
I, [2015-01-06T19:05:45.467270 #32076]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-06T19:05:46.868810 #32076]  INFO -- : Response[201]: Created, Duration: 1.401s
I, [2015-01-06T19:05:46.875315 #32076]  INFO -- : back from super
I, [2015-01-06T19:05:46.885946 #32076]  INFO -- : {"id"=>"PAY-5M68766812618905LKSWDECQ", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98", "details"=>{"subtotal"=>"23.98"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/75/confirm", "cancel_url"=>"http://localhost:3000/orders/75/cancel"}, "create_time"=>"2015-01-06T19:05:46Z", "update_time"=>"2015-01-06T19:05:46Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-5M68766812618905LKSWDECQ", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6PT645437G640334D", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-5M68766812618905LKSWDECQ/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-06T19:05:46.903054 #32076] DEBUG -- :   [1m[35mSQL (3.6ms)[0m  UPDATE "orders" SET "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ?, "pay_type" = ? WHERE "orders"."id" = 75  [["created_at", Tue, 06 Jan 2015 19:05:20 UTC +00:00], ["updated_at", Tue, 06 Jan 2015 19:05:20 UTC +00:00], ["id", 75], ["payment_id", "PAY-5M68766812618905LKSWDECQ"], ["state", "created"], ["pay_type", "paypal"]]
I, [2015-01-06T19:05:46.907207 #32076]  INFO -- : @payment save just done
I, [2015-01-06T19:05:46.909064 #32076]  INFO -- : #<Payment:0x007feea5023208 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007feea72b0168 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007feea6a5b918 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007feea6a5b490 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007feea6a5aa40 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007feea6a5a5b8 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007feea6a59938 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007feea6a583a8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007feea6a538d0 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007feea6a520e8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007feea32c4d60 @error=nil, @return_url="http://localhost:3000/orders/75/confirm", @cancel_url="http://localhost:3000/orders/75/cancel">, @logger=#<Logger:0x007feea2f553a0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007feea2f55378 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007feea2f552d8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007feea2f552b0 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007feea2f55210>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007feea70972c8 @base=#<Payment:0x007feea5023208 ...>, @messages={}>, @request_id="bfc89ffa-adb9-4e31-bf5b-d44596f57ae1", @header={}, @id="PAY-5M68766812618905LKSWDECQ", @create_time="2015-01-06T19:05:46Z", @update_time="2015-01-06T19:05:46Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007feea6a43cf0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5M68766812618905LKSWDECQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007feea6a42cb0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6PT645437G640334D", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007feea6a41b80 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5M68766812618905LKSWDECQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-06T19:05:46.910808 #32076]  INFO -- : #<Payment:0x007feea5023208 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007feea72b0168 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007feea6a5b918 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007feea6a5b490 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007feea6a5aa40 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007feea6a5a5b8 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007feea6a59938 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007feea6a583a8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007feea6a538d0 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007feea6a520e8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007feea32c4d60 @error=nil, @return_url="http://localhost:3000/orders/75/confirm", @cancel_url="http://localhost:3000/orders/75/cancel">, @logger=#<Logger:0x007feea2f553a0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007feea2f55378 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007feea2f552d8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007feea2f552b0 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007feea2f55210>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007feea70972c8 @base=#<Payment:0x007feea5023208 ...>, @messages={}>, @request_id="bfc89ffa-adb9-4e31-bf5b-d44596f57ae1", @header={}, @id="PAY-5M68766812618905LKSWDECQ", @create_time="2015-01-06T19:05:46Z", @update_time="2015-01-06T19:05:46Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007feea6a43cf0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5M68766812618905LKSWDECQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007feea6a42cb0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6PT645437G640334D", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007feea6a41b80 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5M68766812618905LKSWDECQ/execute", @rel="execute", @method="POST">]>
D, [2015-01-06T19:05:46.919992 #32076] DEBUG -- :   [1m[36m (7.6ms)[0m  [1mcommit transaction[0m
I, [2015-01-06T19:05:46.922271 #32076]  INFO -- : about to approve url
I, [2015-01-06T19:05:46.924367 #32076]  INFO -- : #<Payment:0x007feea5023208 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007feea72b0168 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007feea6a5b918 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007feea6a5b490 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007feea6a5aa40 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007feea6a5a5b8 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007feea6a59938 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007feea6a583a8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007feea6a538d0 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007feea6a520e8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007feea32c4d60 @error=nil, @return_url="http://localhost:3000/orders/75/confirm", @cancel_url="http://localhost:3000/orders/75/cancel">, @logger=#<Logger:0x007feea2f553a0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007feea2f55378 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007feea2f552d8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007feea2f552b0 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007feea2f55210>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007feea70972c8 @base=#<Payment:0x007feea5023208 ...>, @messages={}>, @request_id="bfc89ffa-adb9-4e31-bf5b-d44596f57ae1", @header={}, @id="PAY-5M68766812618905LKSWDECQ", @create_time="2015-01-06T19:05:46Z", @update_time="2015-01-06T19:05:46Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007feea6a43cf0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5M68766812618905LKSWDECQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007feea6a42cb0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6PT645437G640334D", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007feea6a41b80 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5M68766812618905LKSWDECQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-06T19:05:46.926395 #32076]  INFO -- : #<Payment:0x007feea5023208 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007feea72b0168 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007feea6a5b918 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007feea6a5b490 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007feea6a5aa40 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007feea6a5a5b8 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007feea6a59938 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007feea6a583a8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007feea6a538d0 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007feea6a520e8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007feea32c4d60 @error=nil, @return_url="http://localhost:3000/orders/75/confirm", @cancel_url="http://localhost:3000/orders/75/cancel">, @logger=#<Logger:0x007feea2f553a0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007feea2f55378 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007feea2f552d8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007feea2f552b0 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007feea2f55210>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007feea70972c8 @base=#<Payment:0x007feea5023208 ...>, @messages={}>, @request_id="bfc89ffa-adb9-4e31-bf5b-d44596f57ae1", @header={}, @id="PAY-5M68766812618905LKSWDECQ", @create_time="2015-01-06T19:05:46Z", @update_time="2015-01-06T19:05:46Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007feea6a43cf0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5M68766812618905LKSWDECQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007feea6a42cb0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6PT645437G640334D", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007feea6a41b80 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5M68766812618905LKSWDECQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-06T19:05:46.927123 #32076]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6PT645437G640334D
I, [2015-01-06T19:05:46.928448 #32076]  INFO -- : #<Payment:0x007feea5023208 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007feea72b0168 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007feea6a5b918 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007feea6a5b490 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007feea6a5aa40 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007feea6a5a5b8 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007feea6a59938 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007feea6a583a8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007feea6a538d0 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007feea6a520e8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007feea32c4d60 @error=nil, @return_url="http://localhost:3000/orders/75/confirm", @cancel_url="http://localhost:3000/orders/75/cancel">, @logger=#<Logger:0x007feea2f553a0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007feea2f55378 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007feea2f552d8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007feea2f552b0 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007feea2f55210>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007feea70972c8 @base=#<Payment:0x007feea5023208 ...>, @messages={}>, @request_id="bfc89ffa-adb9-4e31-bf5b-d44596f57ae1", @header={}, @id="PAY-5M68766812618905LKSWDECQ", @create_time="2015-01-06T19:05:46Z", @update_time="2015-01-06T19:05:46Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007feea6a43cf0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5M68766812618905LKSWDECQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007feea6a42cb0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6PT645437G640334D", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007feea6a41b80 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5M68766812618905LKSWDECQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-06T19:05:46.932620 #32076]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6PT645437G640334D
I, [2015-01-06T19:05:46.935420 #32076]  INFO -- : Completed 403 Forbidden in 43095ms (ActiveRecord: 92.5ms)
D, [2015-01-06T19:06:26.869237 #32076] DEBUG -- : 
D, [2015-01-06T19:06:26.895291 #32076] DEBUG -- : 
I, [2015-01-06T19:06:26.896605 #32076]  INFO -- : Started GET "/orders/75/confirm?paymentId=PAY-5M68766812618905LKSWDECQ&token=EC-6PT645437G640334D&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-06 19:06:26 +0000
I, [2015-01-06T19:06:26.920369 #32076]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-06T19:06:26.921041 #32076]  INFO -- :   Parameters: {"paymentId"=>"PAY-5M68766812618905LKSWDECQ", "token"=>"EC-6PT645437G640334D", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"75"}
D, [2015-01-06T19:06:26.938169 #32076] DEBUG -- :   [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
D, [2015-01-06T19:06:26.946615 #32076] DEBUG -- :   [1m[36mUser Load (1.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-06T19:06:26.952967 #32076] DEBUG -- :   [1m[35mOrder Load (0.9ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "75"]]
I, [2015-01-06T19:07:00.426921 #32076]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-5M68766812618905LKSWDECQ
I, [2015-01-06T19:07:02.231284 #32076]  INFO -- : Response[200]: OK, Duration: 1.777s
D, [2015-01-06T19:07:14.469362 #32076] DEBUG -- :   [1m[36m (0.8ms)[0m  [1mbegin transaction[0m
D, [2015-01-06T19:07:14.487178 #32076] DEBUG -- :   [1m[35m (0.4ms)[0m  rollback transaction
D, [2015-01-06T19:08:03.787133 #32076] DEBUG -- :   [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
D, [2015-01-06T19:08:03.794562 #32076] DEBUG -- :   [1m[35mSQL (0.6ms)[0m  UPDATE "orders" SET "name" = ?, "email" = ?, "address" = ?, "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 75  [["name", "Test Buyer"], ["email", "simon.king65-buyer@gmail.com"], ["address", "1 Main Terrace"], ["shipping_address1", "1 Main Terrace"], ["updated_at", Tue, 06 Jan 2015 19:08:03 UTC +00:00]]
D, [2015-01-06T19:08:03.801460 #32076] DEBUG -- :   [1m[36m (6.2ms)[0m  [1mcommit transaction[0m
D, [2015-01-06T19:10:09.934855 #32089] DEBUG -- : 
D, [2015-01-06T19:10:09.934990 #32089] DEBUG -- : 
I, [2015-01-06T19:10:09.935324 #32089]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-06 19:10:09 +0000
D, [2015-01-06T19:10:10.921008 #32089] DEBUG -- :   [1m[36mActiveRecord::SchemaMigration Load (0.3ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
I, [2015-01-06T19:10:11.140864 #32089]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-06T19:10:11.203149 #32089] DEBUG -- :   [1m[35mCart Load (3.1ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-06T19:10:11.293762 #32089] DEBUG -- :   [1m[36mProduct Load (0.3ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-06T19:10:11.321662 #32089]  INFO -- : Cache digest for store/index.html: a93d4e2e981ab3dfce98a095c3b6c059
I, [2015-01-06T19:10:11.347215 #32089]  INFO -- : Read fragment views/store/products/2-20141022062504570899000/a93d4e2e981ab3dfce98a095c3b6c059 (24.1ms)
I, [2015-01-06T19:10:11.347897 #32089]  INFO -- :   Rendered store/index.html.erb within layouts/application (57.8ms)
D, [2015-01-06T19:10:11.924401 #32089] DEBUG -- :   [1m[35mLineItem Exists (0.2ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 53]]
D, [2015-01-06T19:10:12.020964 #32089] DEBUG -- :   [1m[36mLineItem Load (0.2ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-06T19:10:12.021251 #32089]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-06T19:10:12.103964 #32089]  INFO -- :   Rendered carts/_cart.html.erb (84.9ms)
I, [2015-01-06T19:10:12.105391 #32089]  INFO -- : Completed 200 OK in 964ms (Views: 876.3ms | ActiveRecord: 5.1ms)
D, [2015-01-06T19:10:12.442244 #32089] DEBUG -- : 
D, [2015-01-06T19:10:12.442336 #32089] DEBUG -- : 
I, [2015-01-06T19:10:12.442594 #32089]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-06 19:10:12 +0000
D, [2015-01-06T19:10:12.490884 #32089] DEBUG -- : 
D, [2015-01-06T19:10:12.491061 #32089] DEBUG -- : 
I, [2015-01-06T19:10:12.491283 #32089]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-06 19:10:12 +0000
D, [2015-01-06T19:10:12.501700 #32089] DEBUG -- : 
D, [2015-01-06T19:10:12.501777 #32089] DEBUG -- : 
I, [2015-01-06T19:10:12.502115 #32089]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-06 19:10:12 +0000
D, [2015-01-06T19:10:12.509687 #32089] DEBUG -- : 
D, [2015-01-06T19:10:12.509765 #32089] DEBUG -- : 
I, [2015-01-06T19:10:12.510128 #32089]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-06 19:10:12 +0000
D, [2015-01-06T19:10:12.521283 #32089] DEBUG -- : 
D, [2015-01-06T19:10:12.521368 #32089] DEBUG -- : 
I, [2015-01-06T19:10:12.522680 #32089]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-06 19:10:12 +0000
D, [2015-01-06T19:10:12.535211 #32089] DEBUG -- : 
D, [2015-01-06T19:10:12.535323 #32089] DEBUG -- : 
I, [2015-01-06T19:10:12.535530 #32089]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-06 19:10:12 +0000
D, [2015-01-06T19:10:12.545198 #32089] DEBUG -- : 
D, [2015-01-06T19:10:12.545294 #32089] DEBUG -- : 
I, [2015-01-06T19:10:12.545495 #32089]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-06 19:10:12 +0000
D, [2015-01-06T19:10:12.553495 #32089] DEBUG -- : 
D, [2015-01-06T19:10:12.553600 #32089] DEBUG -- : 
I, [2015-01-06T19:10:12.553775 #32089]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-06 19:10:12 +0000
D, [2015-01-06T19:10:12.560843 #32089] DEBUG -- : 
D, [2015-01-06T19:10:12.560950 #32089] DEBUG -- : 
I, [2015-01-06T19:10:12.561257 #32089]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-06 19:10:12 +0000
D, [2015-01-06T19:10:12.663759 #32089] DEBUG -- : 
D, [2015-01-06T19:10:12.663845 #32089] DEBUG -- : 
I, [2015-01-06T19:10:12.664057 #32089]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-06 19:10:12 +0000
D, [2015-01-06T19:10:12.674049 #32089] DEBUG -- : 
D, [2015-01-06T19:10:12.674135 #32089] DEBUG -- : 
I, [2015-01-06T19:10:12.674322 #32089]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-06 19:10:12 +0000
D, [2015-01-06T19:10:12.689806 #32089] DEBUG -- : 
D, [2015-01-06T19:10:12.689899 #32089] DEBUG -- : 
I, [2015-01-06T19:10:12.690143 #32089]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-06 19:10:12 +0000
D, [2015-01-06T19:10:12.702627 #32089] DEBUG -- : 
D, [2015-01-06T19:10:12.702710 #32089] DEBUG -- : 
I, [2015-01-06T19:10:12.702917 #32089]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-06 19:10:12 +0000
D, [2015-01-06T19:10:12.715745 #32089] DEBUG -- : 
D, [2015-01-06T19:10:12.715821 #32089] DEBUG -- : 
I, [2015-01-06T19:10:12.716015 #32089]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-06 19:10:12 +0000
D, [2015-01-06T19:10:12.734987 #32089] DEBUG -- : 
D, [2015-01-06T19:10:12.735065 #32089] DEBUG -- : 
I, [2015-01-06T19:10:12.735239 #32089]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-06 19:10:12 +0000
D, [2015-01-06T19:10:12.764922 #32089] DEBUG -- : 
D, [2015-01-06T19:10:12.765060 #32089] DEBUG -- : 
I, [2015-01-06T19:10:12.765248 #32089]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-06 19:10:12 +0000
D, [2015-01-06T19:10:12.776312 #32089] DEBUG -- : 
D, [2015-01-06T19:10:12.776422 #32089] DEBUG -- : 
I, [2015-01-06T19:10:12.776638 #32089]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-06 19:10:12 +0000
D, [2015-01-06T19:10:12.787668 #32089] DEBUG -- : 
D, [2015-01-06T19:10:12.787752 #32089] DEBUG -- : 
I, [2015-01-06T19:10:12.787975 #32089]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-06 19:10:12 +0000
D, [2015-01-06T19:10:12.805132 #32089] DEBUG -- : 
D, [2015-01-06T19:10:12.805247 #32089] DEBUG -- : 
I, [2015-01-06T19:10:12.805820 #32089]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-06 19:10:12 +0000
D, [2015-01-06T19:10:12.849745 #32089] DEBUG -- : 
D, [2015-01-06T19:10:12.849838 #32089] DEBUG -- : 
I, [2015-01-06T19:10:12.850052 #32089]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-06 19:10:12 +0000
D, [2015-01-06T19:10:12.900592 #32089] DEBUG -- : 
D, [2015-01-06T19:10:12.900701 #32089] DEBUG -- : 
I, [2015-01-06T19:10:12.900902 #32089]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-06 19:10:12 +0000
D, [2015-01-06T19:10:12.924542 #32089] DEBUG -- : 
D, [2015-01-06T19:10:12.924623 #32089] DEBUG -- : 
I, [2015-01-06T19:10:12.924831 #32089]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-06 19:10:12 +0000
D, [2015-01-06T19:10:12.935741 #32089] DEBUG -- : 
D, [2015-01-06T19:10:12.935842 #32089] DEBUG -- : 
I, [2015-01-06T19:10:12.936088 #32089]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-06 19:10:12 +0000
D, [2015-01-06T19:10:12.950385 #32089] DEBUG -- : 
D, [2015-01-06T19:10:12.950463 #32089] DEBUG -- : 
I, [2015-01-06T19:10:12.950658 #32089]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-06 19:10:12 +0000
D, [2015-01-06T19:10:12.995826 #32089] DEBUG -- : 
D, [2015-01-06T19:10:12.995904 #32089] DEBUG -- : 
I, [2015-01-06T19:10:12.996104 #32089]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-06 19:10:12 +0000
D, [2015-01-06T19:10:13.004265 #32089] DEBUG -- : 
D, [2015-01-06T19:10:13.004343 #32089] DEBUG -- : 
I, [2015-01-06T19:10:13.004538 #32089]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-06 19:10:13 +0000
D, [2015-01-06T19:10:13.088095 #32089] DEBUG -- : 
D, [2015-01-06T19:10:13.088224 #32089] DEBUG -- : 
I, [2015-01-06T19:10:13.088364 #32089]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-06 19:10:13 +0000
D, [2015-01-06T19:10:13.131143 #32089] DEBUG -- : 
D, [2015-01-06T19:10:13.131224 #32089] DEBUG -- : 
I, [2015-01-06T19:10:13.131343 #32089]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-06 19:10:13 +0000
D, [2015-01-06T19:10:13.153576 #32089] DEBUG -- : 
D, [2015-01-06T19:10:13.153651 #32089] DEBUG -- : 
I, [2015-01-06T19:10:13.153770 #32089]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-06 19:10:13 +0000
D, [2015-01-06T19:10:14.680378 #32089] DEBUG -- : 
D, [2015-01-06T19:10:14.680634 #32089] DEBUG -- : 
I, [2015-01-06T19:10:14.680995 #32089]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-06 19:10:14 +0000
I, [2015-01-06T19:10:14.701734 #32089]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-06T19:10:14.701856 #32089]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-06T19:10:14.703877 #32089] DEBUG -- :   [1m[35mCart Load (0.2ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-06T19:10:14.704882 #32089] DEBUG -- :   [1m[36mProduct Load (0.2ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-06T19:10:14.721028 #32089] DEBUG -- :   [1m[35mLineItem Load (0.7ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 53]]
D, [2015-01-06T19:10:14.766120 #32089] DEBUG -- :   [1m[36mProduct Load (0.2ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-06T19:10:14.767000 #32089] DEBUG -- :   [1m[35m (0.1ms)[0m  begin transaction
D, [2015-01-06T19:10:14.844907 #32089] DEBUG -- :   [1m[36mSQL (50.1ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 53], ["created_at", Tue, 06 Jan 2015 19:10:14 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7faf4d1a3cc8,'0.1299E2',18(36)>], ["size", "extra small"], ["updated_at", Tue, 06 Jan 2015 19:10:14 UTC +00:00]]
D, [2015-01-06T19:10:14.848890 #32089] DEBUG -- :   [1m[35m (3.5ms)[0m  commit transaction
D, [2015-01-06T19:10:14.876956 #32089] DEBUG -- :   [1m[36mLineItem Load (0.2ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-06T19:10:14.911358 #32089]  INFO -- :   Rendered line_items/_line_item.html.erb (1.5ms)
I, [2015-01-06T19:10:14.913403 #32089]  INFO -- :   Rendered carts/_cart.html.erb (38.5ms)
I, [2015-01-06T19:10:14.913714 #32089]  INFO -- :   Rendered line_items/create.js.erb (41.1ms)
I, [2015-01-06T19:10:14.913998 #32089]  INFO -- : Completed 200 OK in 212ms (Views: 64.3ms | ActiveRecord: 55.2ms)
D, [2015-01-06T19:10:16.075669 #32089] DEBUG -- : 
D, [2015-01-06T19:10:16.075908 #32089] DEBUG -- : 
I, [2015-01-06T19:10:16.076185 #32089]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-06 19:10:16 +0000
I, [2015-01-06T19:10:16.083271 #32089]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-06T19:10:16.083375 #32089]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-06T19:10:16.085235 #32089] DEBUG -- :   [1m[35mCart Load (0.2ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-06T19:10:16.086376 #32089] DEBUG -- :   [1m[36mProduct Load (0.1ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-06T19:10:16.087942 #32089] DEBUG -- :   [1m[35mLineItem Load (0.2ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 53]]
D, [2015-01-06T19:10:16.090516 #32089] DEBUG -- :   [1m[36mProduct Load (0.3ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-06T19:10:16.091662 #32089] DEBUG -- :   [1m[35m (0.1ms)[0m  begin transaction
D, [2015-01-06T19:10:16.107394 #32089] DEBUG -- :   [1m[36mSQL (14.1ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 53], ["created_at", Tue, 06 Jan 2015 19:10:16 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:7faf4beb54b8,'0.1099E2',18(36)>], ["size", "extra small"], ["updated_at", Tue, 06 Jan 2015 19:10:16 UTC +00:00]]
D, [2015-01-06T19:10:16.122312 #32089] DEBUG -- :   [1m[35m (14.3ms)[0m  commit transaction
D, [2015-01-06T19:10:16.126777 #32089] DEBUG -- :   [1m[36mLineItem Load (0.2ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
D, [2015-01-06T19:10:16.129431 #32089] DEBUG -- :   [1m[35mProduct Load (0.1ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-06T19:10:16.139313 #32089]  INFO -- :   Rendered line_items/_line_item.html.erb (10.8ms)
I, [2015-01-06T19:10:16.141288 #32089]  INFO -- :   Rendered carts/_cart.html.erb (15.1ms)
I, [2015-01-06T19:10:16.141621 #32089]  INFO -- :   Rendered line_items/create.js.erb (16.7ms)
I, [2015-01-06T19:10:16.141860 #32089]  INFO -- : Completed 200 OK in 58ms (Views: 18.8ms | ActiveRecord: 29.7ms)
D, [2015-01-06T19:10:17.734645 #32089] DEBUG -- : 
D, [2015-01-06T19:10:17.734722 #32089] DEBUG -- : 
I, [2015-01-06T19:10:17.734856 #32089]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-06 19:10:17 +0000
I, [2015-01-06T19:10:17.760963 #32089]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-06T19:10:17.801137 #32089] DEBUG -- :   [1m[36mUser Load (20.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
D, [2015-01-06T19:10:17.819353 #32089] DEBUG -- :   [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-06T19:10:17.820483 #32089] DEBUG -- :   [1m[36mCart Load (0.1ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-06T19:10:17.839871 #32089] DEBUG -- :   [1m[35mLineItem Load (0.2ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
I, [2015-01-06T19:10:17.842337 #32089]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
I, [2015-01-06T19:10:17.842419 #32089]  INFO -- : failed!!!
I, [2015-01-06T19:10:17.842869 #32089]  INFO -- : Completed 500 Internal Server Error in 82ms
F, [2015-01-06T19:10:17.844511 #32089] FATAL -- : 
ArgumentError (too few arguments):
  app/controllers/orders_controller.rb:176:in `format'
  app/controllers/orders_controller.rb:176:in `ppcheckout'


I, [2015-01-06T19:10:17.908384 #32089]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.0ms)
I, [2015-01-06T19:10:17.917718 #32089]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.8ms)
I, [2015-01-06T19:10:17.938042 #32089]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
I, [2015-01-06T19:10:17.938192 #32089]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (39.0ms)
D, [2015-01-06T19:10:17.981268 #32089] DEBUG -- : 
D, [2015-01-06T19:10:17.981351 #32089] DEBUG -- : 
I, [2015-01-06T19:10:17.981474 #32089]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-06 19:10:17 +0000
I, [2015-01-06T19:10:17.991999 #32089]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-06T19:10:17.993419 #32089] DEBUG -- :   [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
D, [2015-01-06T19:10:17.994316 #32089] DEBUG -- :   [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-06T19:10:17.995109 #32089] DEBUG -- :   [1m[36mCart Load (0.1ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-06T19:10:17.996339 #32089] DEBUG -- :   [1m[35mLineItem Load (0.2ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
I, [2015-01-06T19:10:17.997396 #32089]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
I, [2015-01-06T19:10:17.997474 #32089]  INFO -- : failed!!!
I, [2015-01-06T19:10:17.997816 #32089]  INFO -- : Completed 500 Internal Server Error in 6ms
F, [2015-01-06T19:10:17.999485 #32089] FATAL -- : 
ArgumentError (too few arguments):
  app/controllers/orders_controller.rb:176:in `format'
  app/controllers/orders_controller.rb:176:in `ppcheckout'


I, [2015-01-06T19:10:18.021400 #32089]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (1.0ms)
I, [2015-01-06T19:10:18.028086 #32089]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (1.7ms)
I, [2015-01-06T19:10:18.035882 #32089]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (1.4ms)
I, [2015-01-06T19:10:18.036091 #32089]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (21.8ms)
D, [2015-01-06T19:23:58.057187 #32115] DEBUG -- : 
D, [2015-01-06T19:23:58.057275 #32115] DEBUG -- : 
I, [2015-01-06T19:23:58.057552 #32115]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-06 19:23:58 +0000
D, [2015-01-06T19:23:59.327460 #32115] DEBUG -- :   [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
I, [2015-01-06T19:23:59.589183 #32115]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-06T19:23:59.663191 #32115] DEBUG -- :   [1m[35mCart Load (3.3ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-06T19:23:59.862379 #32115] DEBUG -- :   [1m[36mProduct Load (0.5ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-06T19:23:59.902803 #32115]  INFO -- : Cache digest for store/index.html: a93d4e2e981ab3dfce98a095c3b6c059
I, [2015-01-06T19:23:59.925863 #32115]  INFO -- : Read fragment views/store/products/2-20141022062504570899000/a93d4e2e981ab3dfce98a095c3b6c059 (21.7ms)
I, [2015-01-06T19:23:59.926115 #32115]  INFO -- :   Rendered store/index.html.erb within layouts/application (68.5ms)
D, [2015-01-06T19:24:00.423720 #32115] DEBUG -- :   [1m[35mLineItem Exists (0.3ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 53]]
D, [2015-01-06T19:24:00.490498 #32115] DEBUG -- :   [1m[36mLineItem Load (13.2ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
D, [2015-01-06T19:24:00.556208 #32115] DEBUG -- :   [1m[35mProduct Load (0.3ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-06T19:24:00.624808 #32115] DEBUG -- :   [1m[36mProduct Load (0.2ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
I, [2015-01-06T19:24:00.625590 #32115]  INFO -- :   Rendered line_items/_line_item.html.erb (81.4ms)
I, [2015-01-06T19:24:00.639085 #32115]  INFO -- :   Rendered carts/_cart.html.erb (163.1ms)
I, [2015-01-06T19:24:00.640864 #32115]  INFO -- : Completed 200 OK in 1051ms (Views: 895.7ms | ActiveRecord: 19.0ms)
D, [2015-01-06T19:24:00.987671 #32115] DEBUG -- : 
D, [2015-01-06T19:24:00.990827 #32115] DEBUG -- : 
I, [2015-01-06T19:24:00.991115 #32115]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-06 19:24:00 +0000
D, [2015-01-06T19:24:01.003916 #32115] DEBUG -- : 
D, [2015-01-06T19:24:01.004001 #32115] DEBUG -- : 
I, [2015-01-06T19:24:01.004193 #32115]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-06 19:24:01 +0000
D, [2015-01-06T19:24:01.016084 #32115] DEBUG -- : 
D, [2015-01-06T19:24:01.016432 #32115] DEBUG -- : 
I, [2015-01-06T19:24:01.016707 #32115]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-06 19:24:01 +0000
D, [2015-01-06T19:24:01.026793 #32115] DEBUG -- : 
D, [2015-01-06T19:24:01.026874 #32115] DEBUG -- : 
I, [2015-01-06T19:24:01.027075 #32115]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-06 19:24:01 +0000
D, [2015-01-06T19:24:01.035207 #32115] DEBUG -- : 
D, [2015-01-06T19:24:01.035367 #32115] DEBUG -- : 
I, [2015-01-06T19:24:01.035568 #32115]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-06 19:24:01 +0000
D, [2015-01-06T19:24:01.046844 #32115] DEBUG -- : 
D, [2015-01-06T19:24:01.046927 #32115] DEBUG -- : 
I, [2015-01-06T19:24:01.047149 #32115]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-06 19:24:01 +0000
D, [2015-01-06T19:24:01.058437 #32115] DEBUG -- : 
D, [2015-01-06T19:24:01.058522 #32115] DEBUG -- : 
I, [2015-01-06T19:24:01.058715 #32115]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-06 19:24:01 +0000
D, [2015-01-06T19:24:01.069311 #32115] DEBUG -- : 
D, [2015-01-06T19:24:01.069396 #32115] DEBUG -- : 
I, [2015-01-06T19:24:01.069606 #32115]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-06 19:24:01 +0000
D, [2015-01-06T19:24:01.079612 #32115] DEBUG -- : 
D, [2015-01-06T19:24:01.079689 #32115] DEBUG -- : 
I, [2015-01-06T19:24:01.079868 #32115]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-06 19:24:01 +0000
D, [2015-01-06T19:24:01.093718 #32115] DEBUG -- : 
D, [2015-01-06T19:24:01.093802 #32115] DEBUG -- : 
I, [2015-01-06T19:24:01.093980 #32115]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-06 19:24:01 +0000
D, [2015-01-06T19:24:01.102138 #32115] DEBUG -- : 
D, [2015-01-06T19:24:01.102216 #32115] DEBUG -- : 
I, [2015-01-06T19:24:01.102414 #32115]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-06 19:24:01 +0000
D, [2015-01-06T19:24:01.136286 #32115] DEBUG -- : 
D, [2015-01-06T19:24:01.136365 #32115] DEBUG -- : 
I, [2015-01-06T19:24:01.136593 #32115]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-06 19:24:01 +0000
D, [2015-01-06T19:24:01.163998 #32115] DEBUG -- : 
D, [2015-01-06T19:24:01.164076 #32115] DEBUG -- : 
I, [2015-01-06T19:24:01.164298 #32115]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-06 19:24:01 +0000
D, [2015-01-06T19:24:01.179207 #32115] DEBUG -- : 
D, [2015-01-06T19:24:01.179286 #32115] DEBUG -- : 
I, [2015-01-06T19:24:01.179529 #32115]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-06 19:24:01 +0000
D, [2015-01-06T19:24:01.197505 #32115] DEBUG -- : 
D, [2015-01-06T19:24:01.197583 #32115] DEBUG -- : 
I, [2015-01-06T19:24:01.197930 #32115]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-06 19:24:01 +0000
D, [2015-01-06T19:24:01.225260 #32115] DEBUG -- : 
D, [2015-01-06T19:24:01.225367 #32115] DEBUG -- : 
I, [2015-01-06T19:24:01.225687 #32115]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-06 19:24:01 +0000
D, [2015-01-06T19:24:01.238583 #32115] DEBUG -- : 
D, [2015-01-06T19:24:01.238662 #32115] DEBUG -- : 
I, [2015-01-06T19:24:01.238849 #32115]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-06 19:24:01 +0000
D, [2015-01-06T19:24:01.247887 #32115] DEBUG -- : 
D, [2015-01-06T19:24:01.247994 #32115] DEBUG -- : 
I, [2015-01-06T19:24:01.248162 #32115]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-06 19:24:01 +0000
D, [2015-01-06T19:24:01.257362 #32115] DEBUG -- : 
D, [2015-01-06T19:24:01.257437 #32115] DEBUG -- : 
I, [2015-01-06T19:24:01.257639 #32115]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-06 19:24:01 +0000
D, [2015-01-06T19:24:01.264559 #32115] DEBUG -- : 
D, [2015-01-06T19:24:01.264632 #32115] DEBUG -- : 
I, [2015-01-06T19:24:01.265018 #32115]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-06 19:24:01 +0000
D, [2015-01-06T19:24:01.272724 #32115] DEBUG -- : 
D, [2015-01-06T19:24:01.272799 #32115] DEBUG -- : 
I, [2015-01-06T19:24:01.272973 #32115]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-06 19:24:01 +0000
D, [2015-01-06T19:24:01.281462 #32115] DEBUG -- : 
D, [2015-01-06T19:24:01.281583 #32115] DEBUG -- : 
I, [2015-01-06T19:24:01.282065 #32115]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-06 19:24:01 +0000
D, [2015-01-06T19:24:01.299447 #32115] DEBUG -- : 
D, [2015-01-06T19:24:01.299523 #32115] DEBUG -- : 
I, [2015-01-06T19:24:01.299634 #32115]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-06 19:24:01 +0000
D, [2015-01-06T19:24:01.378676 #32115] DEBUG -- : 
D, [2015-01-06T19:24:01.378759 #32115] DEBUG -- : 
I, [2015-01-06T19:24:01.378958 #32115]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-06 19:24:01 +0000
D, [2015-01-06T19:24:01.387805 #32115] DEBUG -- : 
D, [2015-01-06T19:24:01.387884 #32115] DEBUG -- : 
I, [2015-01-06T19:24:01.388231 #32115]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-06 19:24:01 +0000
D, [2015-01-06T19:24:01.428083 #32115] DEBUG -- : 
D, [2015-01-06T19:24:01.428157 #32115] DEBUG -- : 
I, [2015-01-06T19:24:01.428328 #32115]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-06 19:24:01 +0000
D, [2015-01-06T19:24:01.455208 #32115] DEBUG -- : 
D, [2015-01-06T19:24:01.455341 #32115] DEBUG -- : 
I, [2015-01-06T19:24:01.455694 #32115]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-06 19:24:01 +0000
D, [2015-01-06T19:24:01.488297 #32115] DEBUG -- : 
D, [2015-01-06T19:24:01.488404 #32115] DEBUG -- : 
I, [2015-01-06T19:24:01.488652 #32115]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-06 19:24:01 +0000
D, [2015-01-06T19:24:01.529011 #32115] DEBUG -- : 
D, [2015-01-06T19:24:01.529125 #32115] DEBUG -- : 
I, [2015-01-06T19:24:01.529282 #32115]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-06 19:24:01 +0000
D, [2015-01-06T19:24:46.561138 #32115] DEBUG -- : 
D, [2015-01-06T19:24:46.561236 #32115] DEBUG -- : 
I, [2015-01-06T19:24:46.561356 #32115]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-06 19:24:46 +0000
I, [2015-01-06T19:24:46.607297 #32115]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-06T19:24:46.650135 #32115] DEBUG -- :   [1m[35mUser Load (14.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
D, [2015-01-06T19:24:46.670341 #32115] DEBUG -- :   [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-06T19:24:46.671542 #32115] DEBUG -- :   [1m[35mCart Load (0.1ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-06T19:24:46.686321 #32115] DEBUG -- :   [1m[36mLineItem Load (0.1ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-06T19:24:46.688993 #32115]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-06T19:25:40.335381 #32115] DEBUG -- :   [1m[35m (0.2ms)[0m  begin transaction
D, [2015-01-06T19:25:40.439261 #32115] DEBUG -- :   [1m[36mSQL (55.6ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Tue, 06 Jan 2015 19:25:40 UTC +00:00], ["updated_at", Tue, 06 Jan 2015 19:25:40 UTC +00:00]]
D, [2015-01-06T19:25:40.461666 #32115] DEBUG -- :   [1m[35mSQL (0.4ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 141  [["cart_id", nil], ["order_id", 76], ["updated_at", Tue, 06 Jan 2015 19:25:40 UTC +00:00]]
D, [2015-01-06T19:25:40.463379 #32115] DEBUG -- :   [1m[36mSQL (0.2ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 142[0m  [["cart_id", nil], ["order_id", 76], ["updated_at", Tue, 06 Jan 2015 19:25:40 UTC +00:00]]
I, [2015-01-06T19:25:40.463560 #32115]  INFO -- : about to @payment.create
D, [2015-01-06T19:25:40.477636 #32115] DEBUG -- :   [1m[35mProduct Load (0.1ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-06T19:25:40.479114 #32115] DEBUG -- :   [1m[36mProduct Load (0.1ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
I, [2015-01-06T19:25:40.491218 #32115]  INFO -- : in order=
I, [2015-01-06T19:25:40.491455 #32115]  INFO -- : in payment.create
I, [2015-01-06T19:25:40.492329 #32115]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/76/confirm", "cancel_url"=>"http://localhost:3000/orders/76/cancel"}}
I, [2015-01-06T19:25:40.493212 #32115]  INFO -- : #<ActiveModel::Errors:0x007fc26e6b6420 @base=#<Payment:0x007fc26e6ece58 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fc26e6ecca0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fc26e6c6d48 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fc26e6c6bb8 @error=nil, @total="23.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fc26e6c6690 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fc26e6c5ba0 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fc26e6c5178 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fc26e6c4520 @error=nil, @return_url="http://localhost:3000/orders/76/confirm", @cancel_url="http://localhost:3000/orders/76/cancel">, @logger=#<Logger:0x007fc26e039390 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fc26e039368 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fc26e039318 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fc26e0392c8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fc26e039228>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fc26e6b6420 ...>>, @messages={}>
I, [2015-01-06T19:25:40.493378 #32115]  INFO -- : got past invalid
I, [2015-01-06T19:25:40.528647 #32115]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/oauth2/token
I, [2015-01-06T19:25:43.326591 #32115]  INFO -- : Response[200]: OK, Duration: 2.798s
I, [2015-01-06T19:25:43.328284 #32115]  INFO -- : PayPal-Request-Id: 3dc23cb2-2fed-47fe-b152-060c071e9dd8
I, [2015-01-06T19:25:43.328511 #32115]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-06T19:25:44.626630 #32115]  INFO -- : Response[201]: Created, Duration: 1.298s
I, [2015-01-06T19:25:44.627576 #32115]  INFO -- : back from super
I, [2015-01-06T19:25:44.628729 #32115]  INFO -- : {"id"=>"PAY-75865952012229520KSWDNOA", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98", "details"=>{"subtotal"=>"23.98"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/76/confirm", "cancel_url"=>"http://localhost:3000/orders/76/cancel"}, "create_time"=>"2015-01-06T19:25:44Z", "update_time"=>"2015-01-06T19:25:44Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-75865952012229520KSWDNOA", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-718976247V9742413", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-75865952012229520KSWDNOA/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-06T19:25:44.632296 #32115] DEBUG -- :   [1m[35mSQL (1.3ms)[0m  UPDATE "orders" SET "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ?, "pay_type" = ? WHERE "orders"."id" = 76  [["created_at", Tue, 06 Jan 2015 19:25:40 UTC +00:00], ["updated_at", Tue, 06 Jan 2015 19:25:40 UTC +00:00], ["id", 76], ["payment_id", "PAY-75865952012229520KSWDNOA"], ["state", "created"], ["pay_type", "paypal"]]
I, [2015-01-06T19:25:44.632943 #32115]  INFO -- : @payment save just done
I, [2015-01-06T19:25:44.633773 #32115]  INFO -- : #<Payment:0x007fc26e6ece58 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fc26e624390 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fc26e624250 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fc26e624188 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fc26e61f278 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fc26e61f200 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fc26e61f070 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fc26e61ee90 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fc26e61ddb0 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fc26e61c988 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fc26e6c4520 @error=nil, @return_url="http://localhost:3000/orders/76/confirm", @cancel_url="http://localhost:3000/orders/76/cancel">, @logger=#<Logger:0x007fc26e039390 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fc26e039368 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fc26e039318 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fc26e0392c8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fc26e039228>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fc26e6b6420 @base=#<Payment:0x007fc26e6ece58 ...>, @messages={}>, @request_id="3dc23cb2-2fed-47fe-b152-060c071e9dd8", @header={}, @id="PAY-75865952012229520KSWDNOA", @create_time="2015-01-06T19:25:44Z", @update_time="2015-01-06T19:25:44Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fc26e60fe90 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-75865952012229520KSWDNOA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fc26e60fbc0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-718976247V9742413", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fc26e60f940 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-75865952012229520KSWDNOA/execute", @rel="execute", @method="POST">]>
I, [2015-01-06T19:25:44.634661 #32115]  INFO -- : #<Payment:0x007fc26e6ece58 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fc26e624390 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fc26e624250 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fc26e624188 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fc26e61f278 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fc26e61f200 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fc26e61f070 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fc26e61ee90 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fc26e61ddb0 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fc26e61c988 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fc26e6c4520 @error=nil, @return_url="http://localhost:3000/orders/76/confirm", @cancel_url="http://localhost:3000/orders/76/cancel">, @logger=#<Logger:0x007fc26e039390 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fc26e039368 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fc26e039318 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fc26e0392c8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fc26e039228>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fc26e6b6420 @base=#<Payment:0x007fc26e6ece58 ...>, @messages={}>, @request_id="3dc23cb2-2fed-47fe-b152-060c071e9dd8", @header={}, @id="PAY-75865952012229520KSWDNOA", @create_time="2015-01-06T19:25:44Z", @update_time="2015-01-06T19:25:44Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fc26e60fe90 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-75865952012229520KSWDNOA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fc26e60fbc0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-718976247V9742413", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fc26e60f940 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-75865952012229520KSWDNOA/execute", @rel="execute", @method="POST">]>
D, [2015-01-06T19:25:44.642790 #32115] DEBUG -- :   [1m[36m (7.7ms)[0m  [1mcommit transaction[0m
D, [2015-01-06T19:26:02.089990 #32115] DEBUG -- :   [1m[35m (0.5ms)[0m  begin transaction
D, [2015-01-06T19:26:02.094546 #32115] DEBUG -- :   [1m[36m (0.5ms)[0m  [1mcommit transaction[0m
I, [2015-01-06T19:26:02.095468 #32115]  INFO -- : about to approve url
I, [2015-01-06T19:26:02.097353 #32115]  INFO -- : #<Payment:0x007fc26e6ece58 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fc26e624390 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fc26e624250 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fc26e624188 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fc26e61f278 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fc26e61f200 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fc26e61f070 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fc26e61ee90 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fc26e61ddb0 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fc26e61c988 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fc26e6c4520 @error=nil, @return_url="http://localhost:3000/orders/76/confirm", @cancel_url="http://localhost:3000/orders/76/cancel">, @logger=#<Logger:0x007fc26e039390 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fc26e039368 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fc26e039318 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fc26e0392c8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fc26e039228>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fc26e6b6420 @base=#<Payment:0x007fc26e6ece58 ...>, @messages={}>, @request_id="3dc23cb2-2fed-47fe-b152-060c071e9dd8", @header={}, @id="PAY-75865952012229520KSWDNOA", @create_time="2015-01-06T19:25:44Z", @update_time="2015-01-06T19:25:44Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fc26e60fe90 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-75865952012229520KSWDNOA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fc26e60fbc0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-718976247V9742413", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fc26e60f940 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-75865952012229520KSWDNOA/execute", @rel="execute", @method="POST">]>
I, [2015-01-06T19:26:02.098958 #32115]  INFO -- : #<Payment:0x007fc26e6ece58 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fc26e624390 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fc26e624250 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fc26e624188 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fc26e61f278 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fc26e61f200 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fc26e61f070 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fc26e61ee90 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fc26e61ddb0 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fc26e61c988 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fc26e6c4520 @error=nil, @return_url="http://localhost:3000/orders/76/confirm", @cancel_url="http://localhost:3000/orders/76/cancel">, @logger=#<Logger:0x007fc26e039390 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fc26e039368 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fc26e039318 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fc26e0392c8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fc26e039228>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fc26e6b6420 @base=#<Payment:0x007fc26e6ece58 ...>, @messages={}>, @request_id="3dc23cb2-2fed-47fe-b152-060c071e9dd8", @header={}, @id="PAY-75865952012229520KSWDNOA", @create_time="2015-01-06T19:25:44Z", @update_time="2015-01-06T19:25:44Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fc26e60fe90 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-75865952012229520KSWDNOA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fc26e60fbc0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-718976247V9742413", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fc26e60f940 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-75865952012229520KSWDNOA/execute", @rel="execute", @method="POST">]>
I, [2015-01-06T19:26:02.099600 #32115]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-718976247V9742413
I, [2015-01-06T19:26:02.100938 #32115]  INFO -- : #<Payment:0x007fc26e6ece58 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fc26e624390 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fc26e624250 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fc26e624188 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fc26e61f278 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fc26e61f200 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fc26e61f070 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fc26e61ee90 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fc26e61ddb0 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fc26e61c988 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fc26e6c4520 @error=nil, @return_url="http://localhost:3000/orders/76/confirm", @cancel_url="http://localhost:3000/orders/76/cancel">, @logger=#<Logger:0x007fc26e039390 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fc26e039368 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fc26e039318 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fc26e0392c8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fc26e039228>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fc26e6b6420 @base=#<Payment:0x007fc26e6ece58 ...>, @messages={}>, @request_id="3dc23cb2-2fed-47fe-b152-060c071e9dd8", @header={}, @id="PAY-75865952012229520KSWDNOA", @create_time="2015-01-06T19:25:44Z", @update_time="2015-01-06T19:25:44Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fc26e60fe90 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-75865952012229520KSWDNOA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fc26e60fbc0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-718976247V9742413", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fc26e60f940 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-75865952012229520KSWDNOA/execute", @rel="execute", @method="POST">]>
I, [2015-01-06T19:26:02.103362 #32115]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-718976247V9742413
I, [2015-01-06T19:26:03.130131 #32115]  INFO -- : Completed 403 Forbidden in 76522ms (ActiveRecord: 82.1ms)
D, [2015-01-06T19:26:40.727190 #32115] DEBUG -- : 
D, [2015-01-06T19:26:40.734243 #32115] DEBUG -- : 
I, [2015-01-06T19:26:40.735285 #32115]  INFO -- : Started GET "/orders/76/confirm?paymentId=PAY-75865952012229520KSWDNOA&token=EC-718976247V9742413&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-06 19:26:40 +0000
I, [2015-01-06T19:26:40.824790 #32115]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-06T19:26:40.825427 #32115]  INFO -- :   Parameters: {"paymentId"=>"PAY-75865952012229520KSWDNOA", "token"=>"EC-718976247V9742413", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"76"}
D, [2015-01-06T19:26:40.832927 #32115] DEBUG -- :   [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
D, [2015-01-06T19:26:40.839588 #32115] DEBUG -- :   [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-06T19:26:40.845915 #32115] DEBUG -- :   [1m[35mOrder Load (0.9ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "76"]]
D, [2015-01-06T19:27:26.116569 #32115] DEBUG -- :   [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
D, [2015-01-06T19:27:26.117409 #32115] DEBUG -- :   [1m[35m (0.1ms)[0m  commit transaction
D, [2015-01-07T23:57:53.004263 #32115] DEBUG -- :   [1m[36mSQL (60.8ms)[0m  [1mUPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 76[0m
D, [2015-01-07T23:58:18.865554 #32115] DEBUG -- :   [1m[35m (0.4ms)[0m  begin transaction
D, [2015-01-07T23:58:18.945563 #32115] DEBUG -- :   [1m[36m (0.4ms)[0m  [1mrollback transaction[0m
I, [2015-01-07T23:59:25.152298 #32115]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/oauth2/token
I, [2015-01-07T23:59:27.454104 #32115]  INFO -- : Response[200]: OK, Duration: 2.301s
I, [2015-01-07T23:59:27.457273 #32115]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-75865952012229520KSWDNOA
I, [2015-01-07T23:59:28.797581 #32115]  INFO -- : Response[400]: Bad Request, Duration: 1.340s
I, [2015-01-07T23:59:40.607689 #32115]  INFO -- : Completed 500 Internal Server Error in 102779780ms
F, [2015-01-07T23:59:40.660158 #32115] FATAL -- : 
NoMethodError (undefined method `+' for nil:NilClass):
  app/models/order.rb:85:in `confirm'
  app/controllers/orders_controller.rb:97:in `confirm'


I, [2015-01-07T23:59:41.048955 #32115]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.1ms)
I, [2015-01-07T23:59:41.066412 #32115]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (6.5ms)
I, [2015-01-07T23:59:41.081384 #32115]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (4.9ms)
I, [2015-01-07T23:59:41.082409 #32115]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (223.3ms)
D, [2015-01-08T00:00:06.792953 #32115] DEBUG -- : 
D, [2015-01-08T00:00:06.800602 #32115] DEBUG -- : 
I, [2015-01-08T00:00:06.806727 #32115]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-08 00:00:06 +0000
I, [2015-01-08T00:00:08.141454 #32115]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-08T00:00:08.246342 #32115] DEBUG -- :   [1m[35mCart Load (13.5ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-08T00:00:08.407945 #32115] DEBUG -- :   [1m[36mProduct Load (1.2ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-08T00:00:08.529676 #32115]  INFO -- : Read fragment views/store/products/2-20141022062504570899000/a93d4e2e981ab3dfce98a095c3b6c059 (42.3ms)
I, [2015-01-08T00:00:08.530805 #32115]  INFO -- :   Rendered store/index.html.erb within layouts/application (128.3ms)
D, [2015-01-08T00:00:08.635160 #32115] DEBUG -- :   [1m[35mLineItem Exists (9.3ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 53]]
D, [2015-01-08T00:00:08.695699 #32115] DEBUG -- :   [1m[36mLineItem Load (1.1ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-08T00:00:08.698702 #32115]  INFO -- :   Rendered collection (0.3ms)
I, [2015-01-08T00:00:08.774720 #32115]  INFO -- :   Rendered carts/_cart.html.erb (98.5ms)
I, [2015-01-08T00:00:08.785573 #32115]  INFO -- : Completed 200 OK in 643ms (Views: 470.0ms | ActiveRecord: 31.2ms)
D, [2015-01-08T00:00:09.277507 #32115] DEBUG -- : 
D, [2015-01-08T00:00:09.278133 #32115] DEBUG -- : 
I, [2015-01-08T00:00:09.279255 #32115]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-08 00:00:09 +0000
D, [2015-01-08T00:00:09.310622 #32115] DEBUG -- : 
D, [2015-01-08T00:00:09.311156 #32115] DEBUG -- : 
I, [2015-01-08T00:00:09.312163 #32115]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-08 00:00:09 +0000
D, [2015-01-08T00:00:09.333077 #32115] DEBUG -- : 
D, [2015-01-08T00:00:09.333537 #32115] DEBUG -- : 
I, [2015-01-08T00:00:09.334595 #32115]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-08 00:00:09 +0000
D, [2015-01-08T00:00:09.361860 #32115] DEBUG -- : 
D, [2015-01-08T00:00:09.362469 #32115] DEBUG -- : 
I, [2015-01-08T00:00:09.363499 #32115]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-08 00:00:09 +0000
D, [2015-01-08T00:00:09.389795 #32115] DEBUG -- : 
D, [2015-01-08T00:00:09.390283 #32115] DEBUG -- : 
I, [2015-01-08T00:00:09.391266 #32115]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-08 00:00:09 +0000
D, [2015-01-08T00:00:09.410129 #32115] DEBUG -- : 
D, [2015-01-08T00:00:09.410616 #32115] DEBUG -- : 
I, [2015-01-08T00:00:09.411973 #32115]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-08 00:00:09 +0000
D, [2015-01-08T00:00:09.449906 #32115] DEBUG -- : 
D, [2015-01-08T00:00:09.450517 #32115] DEBUG -- : 
I, [2015-01-08T00:00:09.451639 #32115]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-08 00:00:09 +0000
D, [2015-01-08T00:00:09.528181 #32115] DEBUG -- : 
D, [2015-01-08T00:00:09.528696 #32115] DEBUG -- : 
I, [2015-01-08T00:00:09.529645 #32115]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-08 00:00:09 +0000
D, [2015-01-08T00:00:09.554573 #32115] DEBUG -- : 
D, [2015-01-08T00:00:09.555127 #32115] DEBUG -- : 
I, [2015-01-08T00:00:09.556103 #32115]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-08 00:00:09 +0000
D, [2015-01-08T00:00:09.582309 #32115] DEBUG -- : 
D, [2015-01-08T00:00:09.582888 #32115] DEBUG -- : 
I, [2015-01-08T00:00:09.592495 #32115]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-08 00:00:09 +0000
D, [2015-01-08T00:00:09.616765 #32115] DEBUG -- : 
D, [2015-01-08T00:00:09.618152 #32115] DEBUG -- : 
I, [2015-01-08T00:00:09.619273 #32115]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-08 00:00:09 +0000
D, [2015-01-08T00:00:09.638174 #32115] DEBUG -- : 
D, [2015-01-08T00:00:09.638764 #32115] DEBUG -- : 
I, [2015-01-08T00:00:09.639906 #32115]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-08 00:00:09 +0000
D, [2015-01-08T00:00:09.659750 #32115] DEBUG -- : 
D, [2015-01-08T00:00:09.660265 #32115] DEBUG -- : 
I, [2015-01-08T00:00:09.661215 #32115]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-08 00:00:09 +0000
D, [2015-01-08T00:00:09.710936 #32115] DEBUG -- : 
D, [2015-01-08T00:00:09.711481 #32115] DEBUG -- : 
I, [2015-01-08T00:00:09.712802 #32115]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-08 00:00:09 +0000
D, [2015-01-08T00:00:09.761000 #32115] DEBUG -- : 
D, [2015-01-08T00:00:09.761514 #32115] DEBUG -- : 
I, [2015-01-08T00:00:09.762459 #32115]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-08 00:00:09 +0000
D, [2015-01-08T00:00:09.785993 #32115] DEBUG -- : 
D, [2015-01-08T00:00:09.786546 #32115] DEBUG -- : 
I, [2015-01-08T00:00:09.787483 #32115]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-08 00:00:09 +0000
D, [2015-01-08T00:00:09.820382 #32115] DEBUG -- : 
D, [2015-01-08T00:00:09.820900 #32115] DEBUG -- : 
I, [2015-01-08T00:00:09.822416 #32115]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-08 00:00:09 +0000
D, [2015-01-08T00:00:09.847670 #32115] DEBUG -- : 
D, [2015-01-08T00:00:09.848201 #32115] DEBUG -- : 
I, [2015-01-08T00:00:09.849449 #32115]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-08 00:00:09 +0000
D, [2015-01-08T00:00:09.877616 #32115] DEBUG -- : 
D, [2015-01-08T00:00:09.878225 #32115] DEBUG -- : 
I, [2015-01-08T00:00:09.879464 #32115]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-08 00:00:09 +0000
D, [2015-01-08T00:00:09.906118 #32115] DEBUG -- : 
D, [2015-01-08T00:00:09.906972 #32115] DEBUG -- : 
I, [2015-01-08T00:00:09.908130 #32115]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-08 00:00:09 +0000
D, [2015-01-08T00:00:09.934238 #32115] DEBUG -- : 
D, [2015-01-08T00:00:09.935074 #32115] DEBUG -- : 
I, [2015-01-08T00:00:09.936219 #32115]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-08 00:00:09 +0000
D, [2015-01-08T00:00:09.979247 #32115] DEBUG -- : 
D, [2015-01-08T00:00:09.987038 #32115] DEBUG -- : 
I, [2015-01-08T00:00:09.988087 #32115]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-08 00:00:09 +0000
D, [2015-01-08T00:00:10.021978 #32115] DEBUG -- : 
D, [2015-01-08T00:00:10.022417 #32115] DEBUG -- : 
I, [2015-01-08T00:00:10.023437 #32115]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-08 00:00:10 +0000
D, [2015-01-08T00:00:10.056719 #32115] DEBUG -- : 
D, [2015-01-08T00:00:10.057206 #32115] DEBUG -- : 
I, [2015-01-08T00:00:10.058596 #32115]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-08 00:00:10 +0000
D, [2015-01-08T00:00:10.091989 #32115] DEBUG -- : 
D, [2015-01-08T00:00:10.092763 #32115] DEBUG -- : 
I, [2015-01-08T00:00:10.093890 #32115]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-08 00:00:10 +0000
D, [2015-01-08T00:00:10.126569 #32115] DEBUG -- : 
D, [2015-01-08T00:00:10.127003 #32115] DEBUG -- : 
I, [2015-01-08T00:00:10.127737 #32115]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-08 00:00:10 +0000
D, [2015-01-08T00:00:10.158798 #32115] DEBUG -- : 
D, [2015-01-08T00:00:10.159232 #32115] DEBUG -- : 
I, [2015-01-08T00:00:10.160263 #32115]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-08 00:00:10 +0000
D, [2015-01-08T00:00:10.217233 #32115] DEBUG -- : 
D, [2015-01-08T00:00:10.217754 #32115] DEBUG -- : 
I, [2015-01-08T00:00:10.234184 #32115]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-08 00:00:10 +0000
D, [2015-01-08T00:00:10.252412 #32115] DEBUG -- : 
D, [2015-01-08T00:00:10.252960 #32115] DEBUG -- : 
I, [2015-01-08T00:00:10.254532 #32115]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-08 00:00:10 +0000
D, [2015-01-08T00:00:10.287827 #32115] DEBUG -- : 
D, [2015-01-08T00:00:10.288350 #32115] DEBUG -- : 
I, [2015-01-08T00:00:10.290133 #32115]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-08 00:00:10 +0000
D, [2015-01-08T00:00:16.647739 #32115] DEBUG -- : 
D, [2015-01-08T00:00:16.648307 #32115] DEBUG -- : 
I, [2015-01-08T00:00:16.649279 #32115]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-08 00:00:16 +0000
I, [2015-01-08T00:00:16.699429 #32115]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-08T00:00:16.709558 #32115]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-08T00:00:16.723424 #32115] DEBUG -- :   [1m[35mCart Load (0.7ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-08T00:00:16.730892 #32115] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-08T00:00:16.743271 #32115] DEBUG -- :   [1m[35mLineItem Load (1.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 53]]
D, [2015-01-08T00:00:16.845318 #32115] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-08T00:00:16.865260 #32115] DEBUG -- :   [1m[35m (0.8ms)[0m  begin transaction
D, [2015-01-08T00:00:16.885480 #32115] DEBUG -- :   [1m[36mSQL (3.3ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 53], ["created_at", Thu, 08 Jan 2015 00:00:16 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7fc26fab30e0,'0.1299E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 08 Jan 2015 00:00:16 UTC +00:00]]
D, [2015-01-08T00:00:16.893289 #32115] DEBUG -- :   [1m[35m (4.3ms)[0m  commit transaction
D, [2015-01-08T00:00:16.939196 #32115] DEBUG -- :   [1m[36mLineItem Load (0.7ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-08T00:00:16.965968 #32115]  INFO -- :   Rendered line_items/_line_item.html.erb (9.0ms)
I, [2015-01-08T00:00:16.982482 #32115]  INFO -- :   Rendered carts/_cart.html.erb (50.7ms)
I, [2015-01-08T00:00:16.984723 #32115]  INFO -- :   Rendered line_items/create.js.erb (59.1ms)
I, [2015-01-08T00:00:16.986817 #32115]  INFO -- : Completed 200 OK in 276ms (Views: 89.1ms | ActiveRecord: 12.7ms)
D, [2015-01-08T00:00:19.245847 #32115] DEBUG -- : 
D, [2015-01-08T00:00:19.246347 #32115] DEBUG -- : 
I, [2015-01-08T00:00:19.247478 #32115]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-08 00:00:19 +0000
I, [2015-01-08T00:00:19.281610 #32115]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-08T00:00:19.282326 #32115]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-08T00:00:19.296770 #32115] DEBUG -- :   [1m[35mCart Load (0.7ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-08T00:00:19.304000 #32115] DEBUG -- :   [1m[36mProduct Load (0.7ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-08T00:00:19.315499 #32115] DEBUG -- :   [1m[35mLineItem Load (1.4ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 53]]
D, [2015-01-08T00:00:19.328334 #32115] DEBUG -- :   [1m[36mProduct Load (0.7ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-08T00:00:19.333624 #32115] DEBUG -- :   [1m[35m (0.8ms)[0m  begin transaction
D, [2015-01-08T00:00:19.351470 #32115] DEBUG -- :   [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 53], ["created_at", Thu, 08 Jan 2015 00:00:19 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:7fc26e4e63e8,'0.1099E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 08 Jan 2015 00:00:19 UTC +00:00]]
D, [2015-01-08T00:00:19.363154 #32115] DEBUG -- :   [1m[35m (7.6ms)[0m  commit transaction
D, [2015-01-08T00:00:19.381710 #32115] DEBUG -- :   [1m[36mLineItem Load (0.7ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
D, [2015-01-08T00:00:19.401212 #32115] DEBUG -- :   [1m[35mProduct Load (0.7ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-08T00:00:19.416588 #32115]  INFO -- :   Rendered line_items/_line_item.html.erb (23.8ms)
I, [2015-01-08T00:00:19.433645 #32115]  INFO -- :   Rendered carts/_cart.html.erb (57.2ms)
I, [2015-01-08T00:00:19.436125 #32115]  INFO -- :   Rendered line_items/create.js.erb (64.1ms)
I, [2015-01-08T00:00:19.438204 #32115]  INFO -- : Completed 200 OK in 155ms (Views: 70.4ms | ActiveRecord: 15.7ms)
D, [2015-01-08T00:00:21.375060 #32115] DEBUG -- : 
D, [2015-01-08T00:00:21.375897 #32115] DEBUG -- : 
I, [2015-01-08T00:00:21.376739 #32115]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-08 00:00:21 +0000
I, [2015-01-08T00:00:21.427451 #32115]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-08T00:00:21.523892 #32115] DEBUG -- :   [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
I, [2015-01-08T00:00:21.588367 #32115]  INFO -- : Filter chain halted as :authorize rendered or redirected
I, [2015-01-08T00:00:21.590298 #32115]  INFO -- : Completed 401 Unauthorized in 161ms (ActiveRecord: 3.0ms)
D, [2015-01-08T00:00:36.994270 #32115] DEBUG -- : 
D, [2015-01-08T00:00:36.999859 #32115] DEBUG -- : 
I, [2015-01-08T00:00:37.000742 #32115]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-08 00:00:37 +0000
I, [2015-01-08T00:00:37.032245 #32115]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-08T00:00:37.041204 #32115] DEBUG -- :   [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
D, [2015-01-08T00:00:37.049006 #32115] DEBUG -- :   [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-08T00:00:37.062013 #32115] DEBUG -- :   [1m[35mCart Load (0.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-08T00:00:37.116779 #32115] DEBUG -- :   [1m[36mLineItem Load (0.8ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-08T00:00:37.137176 #32115]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-08T00:02:27.960326 #32115] DEBUG -- :   [1m[35m (0.7ms)[0m  begin transaction
D, [2015-01-08T00:02:28.086037 #32115] DEBUG -- :   [1m[36mSQL (2.1ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 08 Jan 2015 00:02:28 UTC +00:00], ["updated_at", Thu, 08 Jan 2015 00:02:28 UTC +00:00]]
D, [2015-01-08T00:02:28.102398 #32115] DEBUG -- :   [1m[35mSQL (1.6ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 143  [["cart_id", nil], ["order_id", 77], ["updated_at", Thu, 08 Jan 2015 00:02:28 UTC +00:00]]
D, [2015-01-08T00:02:28.117017 #32115] DEBUG -- :   [1m[36mSQL (1.4ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 144[0m  [["cart_id", nil], ["order_id", 77], ["updated_at", Thu, 08 Jan 2015 00:02:28 UTC +00:00]]
I, [2015-01-08T00:02:28.118707 #32115]  INFO -- : about to @payment.create
D, [2015-01-08T07:53:24.851538 #32115] DEBUG -- :   [1m[35mProduct Load (2.5ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-08T07:53:24.933448 #32115] DEBUG -- :   [1m[36mProduct Load (1.7ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-08T07:54:23.889144 #32115] DEBUG -- :   [1m[35mSQL (1.1ms)[0m  UPDATE "orders" SET "created_at" = ?, "updated_at" = ?, "id" = ? WHERE "orders"."id" = 77  [["created_at", Thu, 08 Jan 2015 00:02:28 UTC +00:00], ["updated_at", Thu, 08 Jan 2015 00:02:28 UTC +00:00], ["id", 77]]
I, [2015-01-08T07:56:59.777858 #32115]  INFO -- : in order=
I, [2015-01-08T07:57:10.102324 #32115]  INFO -- : in payment.create
I, [2015-01-08T07:57:10.283466 #32115]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/77/confirm", "cancel_url"=>"http://localhost:3000/orders/77/cancel"}}
I, [2015-01-08T07:57:10.285888 #32115]  INFO -- : #<ActiveModel::Errors:0x007fc270094a18 @base=#<Payment:0x007fc26bed97e0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fc26bed8728 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fc26b927bf8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fc26b925628 @error=nil, @total="23.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fc270197000 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fc270194058 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fc26fac3850 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fc26faab700 @error=nil, @return_url="http://localhost:3000/orders/77/confirm", @cancel_url="http://localhost:3000/orders/77/cancel">, @logger=#<Logger:0x007fc26e039390 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fc26e039368 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fc26e039318 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fc26e0392c8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fc26e039228>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fc270094a18 ...>>, @messages={}>
I, [2015-01-08T07:57:10.286721 #32115]  INFO -- : got past invalid
I, [2015-01-08T07:57:10.409582 #32115]  INFO -- : PayPal-Request-Id: f1c0aee2-b0a5-40f9-a551-368c54903e97
I, [2015-01-08T07:57:10.410222 #32115]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-08T07:57:12.657565 #32115]  INFO -- : Response[201]: Created, Duration: 2.247s
I, [2015-01-08T07:57:12.663708 #32115]  INFO -- : back from super
I, [2015-01-08T07:57:12.706364 #32115]  INFO -- : {"id"=>"PAY-79H73629YU357821EKSXDQWA", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98", "details"=>{"subtotal"=>"23.98"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/77/confirm", "cancel_url"=>"http://localhost:3000/orders/77/cancel"}, "create_time"=>"2015-01-08T07:57:12Z", "update_time"=>"2015-01-08T07:57:12Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-79H73629YU357821EKSXDQWA", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-4D891081MG8684804", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-79H73629YU357821EKSXDQWA/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-08T07:57:12.719344 #32115] DEBUG -- :   [1m[36mSQL (1.8ms)[0m  [1mUPDATE "orders" SET "payment_id" = ?, "state" = ?, "pay_type" = ?, "updated_at" = ? WHERE "orders"."id" = 77[0m  [["payment_id", "PAY-79H73629YU357821EKSXDQWA"], ["state", "created"], ["pay_type", "paypal"], ["updated_at", Thu, 08 Jan 2015 07:57:12 UTC +00:00]]
I, [2015-01-08T07:57:12.721491 #32115]  INFO -- : @payment save just done
I, [2015-01-08T07:57:12.722935 #32115]  INFO -- : #<Payment:0x007fc26bed97e0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fc26e7c5a00 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fc26e7c5028 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fc26e7c4ab0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fc26e7cfc80 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fc26e7cf528 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fc26e7ce330 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fc26e7cd390 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fc26e7cc8c8 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fc26e7bd828 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fc26faab700 @error=nil, @return_url="http://localhost:3000/orders/77/confirm", @cancel_url="http://localhost:3000/orders/77/cancel">, @logger=#<Logger:0x007fc26e039390 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fc26e039368 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fc26e039318 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fc26e0392c8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fc26e039228>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fc270094a18 @base=#<Payment:0x007fc26bed97e0 ...>, @messages={}>, @request_id="f1c0aee2-b0a5-40f9-a551-368c54903e97", @header={}, @id="PAY-79H73629YU357821EKSXDQWA", @create_time="2015-01-08T07:57:12Z", @update_time="2015-01-08T07:57:12Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fc26e7b6078 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-79H73629YU357821EKSXDQWA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fc26e7b4a98 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-4D891081MG8684804", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fc26e7af7f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-79H73629YU357821EKSXDQWA/execute", @rel="execute", @method="POST">]>
I, [2015-01-08T07:57:12.724451 #32115]  INFO -- : #<Payment:0x007fc26bed97e0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fc26e7c5a00 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fc26e7c5028 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fc26e7c4ab0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fc26e7cfc80 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fc26e7cf528 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fc26e7ce330 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fc26e7cd390 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fc26e7cc8c8 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fc26e7bd828 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fc26faab700 @error=nil, @return_url="http://localhost:3000/orders/77/confirm", @cancel_url="http://localhost:3000/orders/77/cancel">, @logger=#<Logger:0x007fc26e039390 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fc26e039368 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fc26e039318 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fc26e0392c8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fc26e039228>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fc270094a18 @base=#<Payment:0x007fc26bed97e0 ...>, @messages={}>, @request_id="f1c0aee2-b0a5-40f9-a551-368c54903e97", @header={}, @id="PAY-79H73629YU357821EKSXDQWA", @create_time="2015-01-08T07:57:12Z", @update_time="2015-01-08T07:57:12Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fc26e7b6078 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-79H73629YU357821EKSXDQWA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fc26e7b4a98 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-4D891081MG8684804", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fc26e7af7f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-79H73629YU357821EKSXDQWA/execute", @rel="execute", @method="POST">]>
D, [2015-01-08T07:57:12.765845 #32115] DEBUG -- :   [1m[35m (39.9ms)[0m  commit transaction
I, [2015-01-08T07:57:12.767787 #32115]  INFO -- : about to approve url
I, [2015-01-08T07:57:12.769296 #32115]  INFO -- : #<Payment:0x007fc26bed97e0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fc26e7c5a00 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fc26e7c5028 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fc26e7c4ab0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fc26e7cfc80 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fc26e7cf528 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fc26e7ce330 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fc26e7cd390 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fc26e7cc8c8 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fc26e7bd828 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fc26faab700 @error=nil, @return_url="http://localhost:3000/orders/77/confirm", @cancel_url="http://localhost:3000/orders/77/cancel">, @logger=#<Logger:0x007fc26e039390 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fc26e039368 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fc26e039318 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fc26e0392c8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fc26e039228>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fc270094a18 @base=#<Payment:0x007fc26bed97e0 ...>, @messages={}>, @request_id="f1c0aee2-b0a5-40f9-a551-368c54903e97", @header={}, @id="PAY-79H73629YU357821EKSXDQWA", @create_time="2015-01-08T07:57:12Z", @update_time="2015-01-08T07:57:12Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fc26e7b6078 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-79H73629YU357821EKSXDQWA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fc26e7b4a98 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-4D891081MG8684804", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fc26e7af7f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-79H73629YU357821EKSXDQWA/execute", @rel="execute", @method="POST">]>
I, [2015-01-08T07:57:12.770570 #32115]  INFO -- : #<Payment:0x007fc26bed97e0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fc26e7c5a00 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fc26e7c5028 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fc26e7c4ab0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fc26e7cfc80 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fc26e7cf528 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fc26e7ce330 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fc26e7cd390 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fc26e7cc8c8 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fc26e7bd828 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fc26faab700 @error=nil, @return_url="http://localhost:3000/orders/77/confirm", @cancel_url="http://localhost:3000/orders/77/cancel">, @logger=#<Logger:0x007fc26e039390 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fc26e039368 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fc26e039318 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fc26e0392c8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fc26e039228>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fc270094a18 @base=#<Payment:0x007fc26bed97e0 ...>, @messages={}>, @request_id="f1c0aee2-b0a5-40f9-a551-368c54903e97", @header={}, @id="PAY-79H73629YU357821EKSXDQWA", @create_time="2015-01-08T07:57:12Z", @update_time="2015-01-08T07:57:12Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fc26e7b6078 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-79H73629YU357821EKSXDQWA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fc26e7b4a98 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-4D891081MG8684804", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fc26e7af7f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-79H73629YU357821EKSXDQWA/execute", @rel="execute", @method="POST">]>
I, [2015-01-08T07:57:12.771501 #32115]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-4D891081MG8684804
I, [2015-01-08T07:57:12.772526 #32115]  INFO -- : #<Payment:0x007fc26bed97e0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fc26e7c5a00 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fc26e7c5028 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fc26e7c4ab0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fc26e7cfc80 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fc26e7cf528 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fc26e7ce330 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fc26e7cd390 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fc26e7cc8c8 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fc26e7bd828 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fc26faab700 @error=nil, @return_url="http://localhost:3000/orders/77/confirm", @cancel_url="http://localhost:3000/orders/77/cancel">, @logger=#<Logger:0x007fc26e039390 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fc26e039368 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fc26e039318 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fc26e0392c8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fc26e039228>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fc270094a18 @base=#<Payment:0x007fc26bed97e0 ...>, @messages={}>, @request_id="f1c0aee2-b0a5-40f9-a551-368c54903e97", @header={}, @id="PAY-79H73629YU357821EKSXDQWA", @create_time="2015-01-08T07:57:12Z", @update_time="2015-01-08T07:57:12Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fc26e7b6078 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-79H73629YU357821EKSXDQWA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fc26e7b4a98 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-4D891081MG8684804", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fc26e7af7f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-79H73629YU357821EKSXDQWA/execute", @rel="execute", @method="POST">]>
I, [2015-01-08T07:57:12.774894 #32115]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-4D891081MG8684804
I, [2015-01-08T07:57:12.806530 #32115]  INFO -- : Completed 403 Forbidden in 28595773ms (ActiveRecord: 58.3ms)
D, [2015-01-08T07:57:12.851841 #32115] DEBUG -- : 
D, [2015-01-08T07:57:12.853083 #32115] DEBUG -- : 
I, [2015-01-08T07:57:12.853842 #32115]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-08 07:57:12 +0000
I, [2015-01-08T07:57:13.949051 #32115]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-08T07:57:13.994213 #32115] DEBUG -- :   [1m[36mUser Load (7.1ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
D, [2015-01-08T07:57:14.043397 #32115] DEBUG -- :   [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-08T07:57:14.073409 #32115] DEBUG -- :   [1m[36mCart Load (1.1ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-08T07:57:14.201600 #32115] DEBUG -- :   [1m[35mLineItem Load (0.8ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
I, [2015-01-08T07:57:14.206436 #32115]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-08T07:57:26.472174 #32115] DEBUG -- :   [1m[36m (0.6ms)[0m  [1mbegin transaction[0m
D, [2015-01-08T07:57:26.587761 #32115] DEBUG -- :   [1m[35mSQL (1.7ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 08 Jan 2015 07:57:26 UTC +00:00], ["updated_at", Thu, 08 Jan 2015 07:57:26 UTC +00:00]]
I, [2015-01-08T07:57:26.589018 #32115]  INFO -- : about to @payment.create
D, [2015-01-08T07:57:28.959468 #32115] DEBUG -- :   [1m[36mLineItem Load (0.9ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 78]]
I, [2015-01-08T07:57:41.357862 #32115]  INFO -- : in order=
I, [2015-01-08T07:57:47.164727 #32115]  INFO -- : in payment.create
I, [2015-01-08T07:57:47.169205 #32115]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"0"}, "description"=>"King Clothing"}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/78/confirm", "cancel_url"=>"http://localhost:3000/orders/78/cancel"}}
I, [2015-01-08T07:57:47.171136 #32115]  INFO -- : #<ActiveModel::Errors:0x007fc26f87b958 @base=#<Payment:0x007fc26e65c3f8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fc26f96b0c0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fc26e5dfba0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fc26e5df4c0 @error=nil, @total="0", @currency="GBP">, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fc26e58cc98 @error=nil, @return_url="http://localhost:3000/orders/78/confirm", @cancel_url="http://localhost:3000/orders/78/cancel">, @logger=#<Logger:0x007fc26e039390 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fc26e039368 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fc26e039318 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fc26e0392c8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fc26e039228>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fc26f87b958 ...>>, @messages={}>
I, [2015-01-08T07:57:47.171712 #32115]  INFO -- : got past invalid
I, [2015-01-08T07:57:47.187478 #32115]  INFO -- : PayPal-Request-Id: 1e5bcedf-92e5-44b7-b706-05f43a59c5e6
I, [2015-01-08T07:57:47.188422 #32115]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-08T07:57:48.273347 #32115]  INFO -- : Response[400]: Bad Request, Duration: 1.084s
I, [2015-01-08T07:57:48.275109 #32115]  INFO -- :  in error=
I, [2015-01-08T07:57:48.276205 #32115]  INFO -- : back from super
I, [2015-01-08T07:57:48.279501 #32115]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"0"}, "description"=>"King Clothing"}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/78/confirm", "cancel_url"=>"http://localhost:3000/orders/78/cancel"}}
D, [2015-01-08T07:57:48.290810 #32115] DEBUG -- :   [1m[35mSQL (1.5ms)[0m  UPDATE "orders" SET "created_at" = ?, "updated_at" = ?, "id" = ?, "pay_type" = ? WHERE "orders"."id" = 78  [["created_at", Thu, 08 Jan 2015 07:57:26 UTC +00:00], ["updated_at", Thu, 08 Jan 2015 07:57:26 UTC +00:00], ["id", 78], ["pay_type", "paypal"]]
I, [2015-01-08T07:57:48.292321 #32115]  INFO -- : @payment save just done
I, [2015-01-08T07:57:48.293359 #32115]  INFO -- : #<Payment:0x007fc26e65c3f8 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions[0].amount", "issue"=>"Amount cannot be zero"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"fa63fb794f30d"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fc26f96b0c0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fc26e5dfba0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fc26e5df4c0 @error=nil, @total="0", @currency="GBP">, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fc26e58cc98 @error=nil, @return_url="http://localhost:3000/orders/78/confirm", @cancel_url="http://localhost:3000/orders/78/cancel">, @logger=#<Logger:0x007fc26e039390 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fc26e039368 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fc26e039318 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fc26e0392c8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fc26e039228>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fc26f87b958 @base=#<Payment:0x007fc26e65c3f8 ...>, @messages={:"transactions[0].amount"=>["Amount cannot be zero"]}>, @request_id="1e5bcedf-92e5-44b7-b706-05f43a59c5e6", @header={}>
I, [2015-01-08T07:57:48.294428 #32115]  INFO -- : #<Payment:0x007fc26e65c3f8 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions[0].amount", "issue"=>"Amount cannot be zero"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"fa63fb794f30d"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fc26f96b0c0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fc26e5dfba0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fc26e5df4c0 @error=nil, @total="0", @currency="GBP">, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fc26e58cc98 @error=nil, @return_url="http://localhost:3000/orders/78/confirm", @cancel_url="http://localhost:3000/orders/78/cancel">, @logger=#<Logger:0x007fc26e039390 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fc26e039368 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fc26e039318 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fc26e0392c8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fc26e039228>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fc26f87b958 @base=#<Payment:0x007fc26e65c3f8 ...>, @messages={:"transactions[0].amount"=>["Amount cannot be zero"]}>, @request_id="1e5bcedf-92e5-44b7-b706-05f43a59c5e6", @header={}>
D, [2015-01-08T07:57:48.302991 #32115] DEBUG -- :   [1m[36m (7.2ms)[0m  [1mcommit transaction[0m
D, [2015-01-08T07:57:48.310792 #32115] DEBUG -- :   [1m[35mSQL (2.8ms)[0m  UPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 78
I, [2015-01-08T07:57:48.313105 #32115]  INFO -- : about to approve url
I, [2015-01-08T07:57:48.314405 #32115]  INFO -- : #<Payment:0x007fc26e65c3f8 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions[0].amount", "issue"=>"Amount cannot be zero"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"fa63fb794f30d"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fc26f96b0c0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fc26e5dfba0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fc26e5df4c0 @error=nil, @total="0", @currency="GBP">, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fc26e58cc98 @error=nil, @return_url="http://localhost:3000/orders/78/confirm", @cancel_url="http://localhost:3000/orders/78/cancel">, @logger=#<Logger:0x007fc26e039390 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fc26e039368 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fc26e039318 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fc26e0392c8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fc26e039228>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fc26f87b958 @base=#<Payment:0x007fc26e65c3f8 ...>, @messages={:"transactions[0].amount"=>["Amount cannot be zero"]}>, @request_id="1e5bcedf-92e5-44b7-b706-05f43a59c5e6", @header={}>
I, [2015-01-08T07:57:48.317193 #32115]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-08T07:57:48.319532 #32115]  INFO -- : Completed 302 Found in 34369ms (ActiveRecord: 30.8ms)
D, [2015-01-08T07:57:48.586122 #32115] DEBUG -- : 
D, [2015-01-08T07:57:48.586620 #32115] DEBUG -- : 
I, [2015-01-08T07:57:48.587463 #32115]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-08 07:57:48 +0000
I, [2015-01-08T07:57:48.637335 #32115]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-08T07:57:48.645714 #32115] DEBUG -- :   [1m[36mCart Load (0.6ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-08T07:57:48.739810 #32115] DEBUG -- :   [1m[35mProduct Load (0.8ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-08T07:57:48.813539 #32115]  INFO -- : Cache digest for store/index.xml: a93d4e2e981ab3dfce98a095c3b6c059
I, [2015-01-08T07:57:48.832592 #32115]  INFO -- : Read fragment views/store/products/2-20141022062504570899000/a93d4e2e981ab3dfce98a095c3b6c059 (13.6ms)
I, [2015-01-08T07:57:48.834117 #32115]  INFO -- :   Rendered store/index.html.erb within layouts/application (103.8ms)
D, [2015-01-08T07:57:48.912694 #32115] DEBUG -- :   [1m[36mLineItem Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 53]]
D, [2015-01-08T07:57:48.956699 #32115] DEBUG -- :   [1m[35mLineItem Load (0.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
I, [2015-01-08T07:57:48.958779 #32115]  INFO -- :   Rendered collection (0.3ms)
I, [2015-01-08T07:57:48.983470 #32115]  INFO -- :   Rendered carts/_cart.html.erb (34.5ms)
I, [2015-01-08T07:57:48.993643 #32115]  INFO -- : Completed 200 OK in 355ms (Views: 305.3ms | ActiveRecord: 5.4ms)
<<<<<<< HEAD
D, [2015-01-08T20:41:25.773603 #2104] DEBUG -- : 
D, [2015-01-08T20:41:25.799604 #2104] DEBUG -- : 
I, [2015-01-08T20:41:25.849607 #2104]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-08 20:41:25 +0000
D, [2015-01-08T20:41:28.423754 #2104] DEBUG -- :   [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
I, [2015-01-08T20:41:28.791775 #2104]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-08T20:41:29.091793 #2104] DEBUG -- :   [1m[35mCart Load (54.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-08T20:41:29.580821 #2104] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-08T20:41:29.726829 #2104]  INFO -- : Cache digest for store/index.html: a93d4e2e981ab3dfce98a095c3b6c059
I, [2015-01-08T20:41:29.838835 #2104]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (33.0ms)
I, [2015-01-08T20:41:29.893839 #2104]  INFO -- :   Rendered store/index.html.erb within layouts/application (365.0ms)
D, [2015-01-08T20:41:32.023960 #2104] DEBUG -- :   [1m[35mLineItem Exists (1.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 36]]
D, [2015-01-08T20:41:32.376981 #2104] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-08T20:41:32.415983 #2104]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-08T20:41:32.576992 #2104]  INFO -- :   Rendered carts/_cart.html.erb (243.0ms)
I, [2015-01-08T20:41:32.636995 #2104]  INFO -- : Completed 200 OK in 3789ms (Views: 3379.2ms | ActiveRecord: 63.0ms)
D, [2015-01-08T20:41:33.036018 #2104] DEBUG -- : 
D, [2015-01-08T20:41:33.061020 #2104] DEBUG -- : 
I, [2015-01-08T20:41:33.117023 #2104]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-08 20:41:33 +0000
D, [2015-01-08T20:41:33.182027 #2104] DEBUG -- : 
D, [2015-01-08T20:41:33.206028 #2104] DEBUG -- : 
I, [2015-01-08T20:41:33.261031 #2104]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-08 20:41:33 +0000
D, [2015-01-08T20:41:33.333035 #2104] DEBUG -- : 
D, [2015-01-08T20:41:33.355036 #2104] DEBUG -- : 
I, [2015-01-08T20:41:33.424040 #2104]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-08 20:41:33 +0000
D, [2015-01-08T20:41:33.480044 #2104] DEBUG -- : 
D, [2015-01-08T20:41:33.501045 #2104] DEBUG -- : 
I, [2015-01-08T20:41:33.567049 #2104]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-08 20:41:33 +0000
D, [2015-01-08T20:41:33.622052 #2104] DEBUG -- : 
D, [2015-01-08T20:41:33.649053 #2104] DEBUG -- : 
I, [2015-01-08T20:41:33.702056 #2104]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-08 20:41:33 +0000
D, [2015-01-08T20:41:33.757059 #2104] DEBUG -- : 
D, [2015-01-08T20:41:33.773060 #2104] DEBUG -- : 
I, [2015-01-08T20:41:33.830064 #2104]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-08 20:41:33 +0000
D, [2015-01-08T20:41:33.883067 #2104] DEBUG -- : 
D, [2015-01-08T20:41:33.904068 #2104] DEBUG -- : 
I, [2015-01-08T20:41:33.956071 #2104]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-08 20:41:33 +0000
D, [2015-01-08T20:41:34.008074 #2104] DEBUG -- : 
D, [2015-01-08T20:41:34.034075 #2104] DEBUG -- : 
I, [2015-01-08T20:41:34.100079 #2104]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-08 20:41:34 +0000
D, [2015-01-08T20:41:34.153082 #2104] DEBUG -- : 
D, [2015-01-08T20:41:34.177084 #2104] DEBUG -- : 
I, [2015-01-08T20:41:34.238087 #2104]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-08 20:41:34 +0000
D, [2015-01-08T20:41:34.291090 #2104] DEBUG -- : 
D, [2015-01-08T20:41:34.313091 #2104] DEBUG -- : 
I, [2015-01-08T20:41:34.367094 #2104]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-08 20:41:34 +0000
D, [2015-01-08T20:41:34.416097 #2104] DEBUG -- : 
D, [2015-01-08T20:41:34.432098 #2104] DEBUG -- : 
I, [2015-01-08T20:41:34.490101 #2104]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-08 20:41:34 +0000
D, [2015-01-08T20:41:34.582107 #2104] DEBUG -- : 
D, [2015-01-08T20:41:34.607108 #2104] DEBUG -- : 
I, [2015-01-08T20:41:34.672112 #2104]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-08 20:41:34 +0000
D, [2015-01-08T20:41:34.733115 #2104] DEBUG -- : 
D, [2015-01-08T20:41:34.757117 #2104] DEBUG -- : 
I, [2015-01-08T20:41:34.818120 #2104]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-08 20:41:34 +0000
D, [2015-01-08T20:41:34.879124 #2104] DEBUG -- : 
D, [2015-01-08T20:41:34.904125 #2104] DEBUG -- : 
I, [2015-01-08T20:41:34.973129 #2104]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-08 20:41:34 +0000
D, [2015-01-08T20:41:35.044133 #2104] DEBUG -- : 
D, [2015-01-08T20:41:35.063134 #2104] DEBUG -- : 
I, [2015-01-08T20:41:35.124138 #2104]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-08 20:41:35 +0000
D, [2015-01-08T20:41:35.185141 #2104] DEBUG -- : 
D, [2015-01-08T20:41:35.205142 #2104] DEBUG -- : 
I, [2015-01-08T20:41:35.263146 #2104]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-08 20:41:35 +0000
D, [2015-01-08T20:41:35.317149 #2104] DEBUG -- : 
D, [2015-01-08T20:41:35.338150 #2104] DEBUG -- : 
I, [2015-01-08T20:41:35.396153 #2104]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-08 20:41:35 +0000
D, [2015-01-08T20:41:35.448156 #2104] DEBUG -- : 
D, [2015-01-08T20:41:35.473158 #2104] DEBUG -- : 
I, [2015-01-08T20:41:35.534161 #2104]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-08 20:41:35 +0000
D, [2015-01-08T20:41:35.583164 #2104] DEBUG -- : 
D, [2015-01-08T20:41:35.607165 #2104] DEBUG -- : 
I, [2015-01-08T20:41:35.668169 #2104]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-08 20:41:35 +0000
D, [2015-01-08T20:41:35.721172 #2104] DEBUG -- : 
D, [2015-01-08T20:41:35.746173 #2104] DEBUG -- : 
I, [2015-01-08T20:41:35.813177 #2104]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-08 20:41:35 +0000
D, [2015-01-08T20:41:35.863180 #2104] DEBUG -- : 
D, [2015-01-08T20:41:35.887181 #2104] DEBUG -- : 
I, [2015-01-08T20:41:35.952185 #2104]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-08 20:41:35 +0000
D, [2015-01-08T20:41:36.003188 #2104] DEBUG -- : 
D, [2015-01-08T20:41:36.026189 #2104] DEBUG -- : 
I, [2015-01-08T20:41:36.086193 #2104]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-08 20:41:36 +0000
D, [2015-01-08T20:41:36.139196 #2104] DEBUG -- : 
D, [2015-01-08T20:41:36.164197 #2104] DEBUG -- : 
I, [2015-01-08T20:41:36.223201 #2104]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-08 20:41:36 +0000
D, [2015-01-08T20:41:36.276204 #2104] DEBUG -- : 
D, [2015-01-08T20:41:36.297205 #2104] DEBUG -- : 
I, [2015-01-08T20:41:36.352208 #2104]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-08 20:41:36 +0000
D, [2015-01-08T20:41:36.404211 #2104] DEBUG -- : 
D, [2015-01-08T20:41:36.424212 #2104] DEBUG -- : 
I, [2015-01-08T20:41:36.478215 #2104]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-08 20:41:36 +0000
D, [2015-01-08T20:41:36.538219 #2104] DEBUG -- : 
D, [2015-01-08T20:41:36.564220 #2104] DEBUG -- : 
I, [2015-01-08T20:41:36.627224 #2104]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-08 20:41:36 +0000
D, [2015-01-08T20:41:36.738230 #2104] DEBUG -- : 
D, [2015-01-08T20:41:36.762231 #2104] DEBUG -- : 
I, [2015-01-08T20:41:36.822235 #2104]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-08 20:41:36 +0000
D, [2015-01-08T20:41:36.889239 #2104] DEBUG -- : 
D, [2015-01-08T20:41:36.911240 #2104] DEBUG -- : 
I, [2015-01-08T20:41:36.977244 #2104]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-08 20:41:36 +0000
D, [2015-01-08T20:41:37.037247 #2104] DEBUG -- : 
D, [2015-01-08T20:41:37.059248 #2104] DEBUG -- : 
I, [2015-01-08T20:41:37.117252 #2104]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-08 20:41:37 +0000
D, [2015-01-08T20:41:37.193256 #2104] DEBUG -- : 
D, [2015-01-08T20:41:37.220258 #2104] DEBUG -- : 
I, [2015-01-08T20:41:37.280261 #2104]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-08 20:41:37 +0000
D, [2015-01-08T20:41:39.977415 #2104] DEBUG -- : 
D, [2015-01-08T20:41:40.002417 #2104] DEBUG -- : 
I, [2015-01-08T20:41:40.070421 #2104]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-08 20:41:40 +0000
I, [2015-01-08T20:41:40.177427 #2104]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-08T20:41:40.278432 #2104]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-08T20:41:40.361437 #2104] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-08T20:41:40.444442 #2104] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-08T20:41:40.577450 #2104] DEBUG -- :   [1m[35mLineItem Load (1.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-08T20:41:40.809463 #2104] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-08T20:41:40.852465 #2104] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-08T20:41:41.158483 #2104] DEBUG -- :   [1m[36mSQL (59.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 08 Jan 2015 20:41:40 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:937fbf0,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 08 Jan 2015 20:41:40 UTC +00:00]]
D, [2015-01-08T20:41:41.309491 #2104] DEBUG -- :   [1m[35m (111.0ms)[0m  commit transaction
D, [2015-01-08T20:41:41.439499 #2104] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-08T20:41:41.525504 #2104]  INFO -- :   Rendered line_items/_line_item.html.erb (3.0ms)
I, [2015-01-08T20:41:41.576507 #2104]  INFO -- :   Rendered carts/_cart.html.erb (185.0ms)
I, [2015-01-08T20:41:41.625510 #2104]  INFO -- :   Rendered line_items/create.js.erb (244.0ms)
I, [2015-01-08T20:41:41.684513 #2104]  INFO -- : Completed 200 OK in 1348ms (Views: 314.0ms | ActiveRecord: 174.0ms)
D, [2015-01-08T20:41:41.710514 #2104] DEBUG -- : 
D, [2015-01-08T20:41:41.735516 #2104] DEBUG -- : 
I, [2015-01-08T20:41:41.792519 #2104]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-08 20:41:41 +0000
I, [2015-01-08T20:41:41.864523 #2104]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-08T20:41:41.932527 #2104]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-08T20:41:42.005531 #2104] DEBUG -- :   [1m[35mCart Load (1.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-08T20:41:42.080536 #2104] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-08T20:41:42.180541 #2104] DEBUG -- :   [1m[35mLineItem Load (1.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-08T20:41:42.271546 #2104] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-08T20:41:42.309549 #2104] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-08T20:41:42.510560 #2104] DEBUG -- :   [1m[36mSQL (5.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 08 Jan 2015 20:41:42 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:9013c00,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 08 Jan 2015 20:41:42 UTC +00:00]]
D, [2015-01-08T20:41:42.666569 #2104] DEBUG -- :   [1m[35m (113.0ms)[0m  commit transaction
D, [2015-01-08T20:41:42.763575 #2104] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-08T20:41:42.854580 #2104] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-08T20:41:42.904583 #2104]  INFO -- :   Rendered line_items/_line_item.html.erb (88.0ms)
I, [2015-01-08T20:41:42.952585 #2104]  INFO -- :   Rendered carts/_cart.html.erb (222.0ms)
I, [2015-01-08T20:41:42.996588 #2104]  INFO -- :   Rendered line_items/create.js.erb (273.0ms)
I, [2015-01-08T20:41:43.049591 #2104]  INFO -- : Completed 200 OK in 1064ms (Views: 328.0ms | ActiveRecord: 122.0ms)
D, [2015-01-08T20:41:44.578678 #2104] DEBUG -- : 
D, [2015-01-08T20:41:44.599680 #2104] DEBUG -- : 
I, [2015-01-08T20:41:44.649682 #2104]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-08 20:41:44 +0000
I, [2015-01-08T20:41:44.731687 #2104]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-08T20:41:44.812692 #2104] DEBUG -- :   [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
I, [2015-01-08T20:41:44.905697 #2104]  INFO -- : Filter chain halted as :authorize rendered or redirected
I, [2015-01-08T20:41:44.950700 #2104]  INFO -- : Completed 401 Unauthorized in 174ms (ActiveRecord: 4.0ms)
D, [2015-01-08T20:41:50.965044 #2104] DEBUG -- : 
D, [2015-01-08T20:41:50.991045 #2104] DEBUG -- : 
I, [2015-01-08T20:41:51.055049 #2104]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-08 20:41:50 +0000
I, [2015-01-08T20:41:51.125053 #2104]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-08T20:41:51.189057 #2104] DEBUG -- :   [1m[35mUser Load (1.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-08T20:41:51.254060 #2104] DEBUG -- :   [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-08T20:41:51.318064 #2104] DEBUG -- :   [1m[35mCart Load (1.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-08T20:41:51.420070 #2104] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-08T20:41:51.534076 #2104]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-08T20:42:32.276407 #2104] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2015-01-08T20:42:32.661429 #2104] DEBUG -- :   [1m[36mSQL (8.0ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 08 Jan 2015 20:42:32 UTC +00:00], ["updated_at", Thu, 08 Jan 2015 20:42:32 UTC +00:00]]
D, [2015-01-08T20:42:32.811437 #2104] DEBUG -- :   [1m[35mSQL (5.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 95  [["cart_id", nil], ["order_id", 73], ["updated_at", Thu, 08 Jan 2015 20:42:32 UTC +00:00]]
D, [2015-01-08T20:42:32.943445 #2104] DEBUG -- :   [1m[36mSQL (4.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 96[0m  [["cart_id", nil], ["order_id", 73], ["updated_at", Thu, 08 Jan 2015 20:42:32 UTC +00:00]]
I, [2015-01-08T20:42:32.977447 #2104]  INFO -- : about to @payment.create
D, [2015-01-08T20:43:07.491421 #2104] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-08T20:43:07.581426 #2104] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
I, [2015-01-08T20:43:11.428646 #2104]  INFO -- : in order=
I, [2015-01-08T20:43:17.929018 #2104]  INFO -- : in payment.create
I, [2015-01-08T20:43:18.128029 #2104]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Camo Print Tee", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Camo Print Tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"18.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/73/confirm", "cancel_url"=>"http://localhost:3000/orders/73/cancel"}}
I, [2015-01-08T20:43:18.573055 #2104]  INFO -- : #<ActiveModel::Errors:0x000000046d46e8 @base=#<Payment:0x000000091a77b0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000091a6568 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000908b868 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000908ae68 @error=nil, @total="38.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009082ec0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009079438 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x00000009058580 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000817cbd8 @error=nil, @return_url="http://localhost:3000/orders/73/confirm", @cancel_url="http://localhost:3000/orders/73/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000046d46e8 ...>>, @messages={}>
I, [2015-01-08T20:43:18.592056 #2104]  INFO -- : got past invalid
I, [2015-01-08T20:43:18.964077 #2104]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/oauth2/token
I, [2015-01-08T20:43:21.127201 #2104]  INFO -- : Response[200]: OK, Duration: 2.130s
I, [2015-01-08T20:43:21.216206 #2104]  INFO -- : PayPal-Request-Id: 4bfe4f21-80e0-4fda-951b-fca9b642bf82
I, [2015-01-08T20:43:21.265209 #2104]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-08T20:43:22.544282 #2104]  INFO -- : Response[201]: Created, Duration: 1.239s
I, [2015-01-08T20:43:22.584284 #2104]  INFO -- : back from super
I, [2015-01-08T20:43:23.076312 #2104]  INFO -- : {"id"=>"PAY-5XP62549N4665180MKSXOX2Y", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98", "details"=>{"subtotal"=>"38.98"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Camo Print Tee", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Camo Print Tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"18.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/73/confirm", "cancel_url"=>"http://localhost:3000/orders/73/cancel"}, "create_time"=>"2015-01-08T20:43:23Z", "update_time"=>"2015-01-08T20:43:23Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-5XP62549N4665180MKSXOX2Y", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-0RU32519AG3198446", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-5XP62549N4665180MKSXOX2Y/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-08T20:43:54.306098 #2104] DEBUG -- :   [1m[35mSQL (8.0ms)[0m  UPDATE "orders" SET "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ?, "pay_type" = ? WHERE "orders"."id" = 73  [["created_at", Thu, 08 Jan 2015 20:42:32 UTC +00:00], ["updated_at", Thu, 08 Jan 2015 20:42:32 UTC +00:00], ["id", 73], ["payment_id", "PAY-5XP62549N4665180MKSXOX2Y"], ["state", "created"], ["pay_type", "paypal"]]
D, [2015-01-08T22:17:07.907553 #2104] DEBUG -- :   [1m[36mOrder Load (1.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", 73]]
D, [2015-01-08T22:17:41.093451 #2104] DEBUG -- :   [1m[35mSQL (1.0ms)[0m  UPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 73
D, [2015-01-08T22:17:45.661712 #2104] DEBUG -- :   [1m[36mOrder Load (0.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", 73]]
I, [2015-01-08T22:19:10.870586 #2104]  INFO -- : @payment save just done
I, [2015-01-08T22:19:11.746636 #2104]  INFO -- : #<Payment:0x000000091a77b0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000095e9f80 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000095e9648 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000095e91c0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000095e86d0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000095e8248 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000095d3370 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000095d2538 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000095d1b88 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x000000095d0508 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000817cbd8 @error=nil, @return_url="http://localhost:3000/orders/73/confirm", @cancel_url="http://localhost:3000/orders/73/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000046d46e8 @base=#<Payment:0x000000091a77b0 ...>, @messages={}>, @request_id="4bfe4f21-80e0-4fda-951b-fca9b642bf82", @header={}, @id="PAY-5XP62549N4665180MKSXOX2Y", @create_time="2015-01-08T20:43:23Z", @update_time="2015-01-08T20:43:23Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000095aa128 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5XP62549N4665180MKSXOX2Y", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000095a9138 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-0RU32519AG3198446", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000095a8148 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5XP62549N4665180MKSXOX2Y/execute", @rel="execute", @method="POST">]>
I, [2015-01-08T22:19:12.612685 #2104]  INFO -- : #<Payment:0x000000091a77b0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000095e9f80 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000095e9648 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000095e91c0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000095e86d0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000095e8248 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000095d3370 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000095d2538 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000095d1b88 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x000000095d0508 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000817cbd8 @error=nil, @return_url="http://localhost:3000/orders/73/confirm", @cancel_url="http://localhost:3000/orders/73/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000046d46e8 @base=#<Payment:0x000000091a77b0 ...>, @messages={}>, @request_id="4bfe4f21-80e0-4fda-951b-fca9b642bf82", @header={}, @id="PAY-5XP62549N4665180MKSXOX2Y", @create_time="2015-01-08T20:43:23Z", @update_time="2015-01-08T20:43:23Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000095aa128 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5XP62549N4665180MKSXOX2Y", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000095a9138 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-0RU32519AG3198446", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000095a8148 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5XP62549N4665180MKSXOX2Y/execute", @rel="execute", @method="POST">]>
D, [2015-01-08T22:19:12.780695 #2104] DEBUG -- :   [1m[35m (138.0ms)[0m  commit transaction
D, [2015-01-08T22:19:12.948705 #2104] DEBUG -- :   [1m[36mSQL (102.0ms)[0m  [1mUPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 73[0m
I, [2015-01-08T22:19:12.974706 #2104]  INFO -- : about to approve url
I, [2015-01-08T22:19:13.855757 #2104]  INFO -- : #<Payment:0x000000091a77b0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000095e9f80 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000095e9648 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000095e91c0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000095e86d0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000095e8248 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000095d3370 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000095d2538 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000095d1b88 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x000000095d0508 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000817cbd8 @error=nil, @return_url="http://localhost:3000/orders/73/confirm", @cancel_url="http://localhost:3000/orders/73/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000046d46e8 @base=#<Payment:0x000000091a77b0 ...>, @messages={}>, @request_id="4bfe4f21-80e0-4fda-951b-fca9b642bf82", @header={}, @id="PAY-5XP62549N4665180MKSXOX2Y", @create_time="2015-01-08T20:43:23Z", @update_time="2015-01-08T20:43:23Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000095aa128 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5XP62549N4665180MKSXOX2Y", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000095a9138 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-0RU32519AG3198446", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000095a8148 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5XP62549N4665180MKSXOX2Y/execute", @rel="execute", @method="POST">]>
I, [2015-01-08T22:19:14.748808 #2104]  INFO -- : #<Payment:0x000000091a77b0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000095e9f80 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000095e9648 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000095e91c0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000095e86d0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000095e8248 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000095d3370 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000095d2538 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000095d1b88 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x000000095d0508 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000817cbd8 @error=nil, @return_url="http://localhost:3000/orders/73/confirm", @cancel_url="http://localhost:3000/orders/73/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000046d46e8 @base=#<Payment:0x000000091a77b0 ...>, @messages={}>, @request_id="4bfe4f21-80e0-4fda-951b-fca9b642bf82", @header={}, @id="PAY-5XP62549N4665180MKSXOX2Y", @create_time="2015-01-08T20:43:23Z", @update_time="2015-01-08T20:43:23Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000095aa128 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5XP62549N4665180MKSXOX2Y", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000095a9138 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-0RU32519AG3198446", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000095a8148 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5XP62549N4665180MKSXOX2Y/execute", @rel="execute", @method="POST">]>
I, [2015-01-08T22:19:14.795810 #2104]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-0RU32519AG3198446
I, [2015-01-08T22:19:15.683861 #2104]  INFO -- : #<Payment:0x000000091a77b0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000095e9f80 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000095e9648 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000095e91c0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000095e86d0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000095e8248 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000095d3370 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000095d2538 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000095d1b88 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x000000095d0508 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000817cbd8 @error=nil, @return_url="http://localhost:3000/orders/73/confirm", @cancel_url="http://localhost:3000/orders/73/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000046d46e8 @base=#<Payment:0x000000091a77b0 ...>, @messages={}>, @request_id="4bfe4f21-80e0-4fda-951b-fca9b642bf82", @header={}, @id="PAY-5XP62549N4665180MKSXOX2Y", @create_time="2015-01-08T20:43:23Z", @update_time="2015-01-08T20:43:23Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000095aa128 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5XP62549N4665180MKSXOX2Y", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000095a9138 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-0RU32519AG3198446", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000095a8148 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5XP62549N4665180MKSXOX2Y/execute", @rel="execute", @method="POST">]>
I, [2015-01-08T22:19:15.743865 #2104]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-0RU32519AG3198446
I, [2015-01-08T22:19:15.782867 #2104]  INFO -- : Completed 403 Forbidden in 5844624ms (ActiveRecord: 278.0ms)
D, [2015-01-08T22:19:57.276240 #2104] DEBUG -- : 
D, [2015-01-08T22:19:57.295241 #2104] DEBUG -- : 
I, [2015-01-08T22:19:57.344244 #2104]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-08 22:19:57 +0000
I, [2015-01-08T22:19:59.589372 #2104]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-08T22:19:59.704379 #2104] DEBUG -- :   [1m[35mUser Load (4.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-08T22:19:59.885389 #2104] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-08T22:19:59.997396 #2104] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-08T22:20:00.251410 #2104] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-08T22:20:00.345416 #2104]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-08T22:20:04.418649 #2104] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-08T22:20:04.750668 #2104] DEBUG -- :   [1m[36mSQL (7.0ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 08 Jan 2015 22:20:04 UTC +00:00], ["updated_at", Thu, 08 Jan 2015 22:20:04 UTC +00:00]]
I, [2015-01-08T22:20:04.799670 #2104]  INFO -- : about to @payment.create
D, [2015-01-08T22:20:06.248753 #2104] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 74]]
I, [2015-01-08T22:20:07.520826 #2104]  INFO -- : in order=
I, [2015-01-08T22:20:12.228095 #2104]  INFO -- : in payment.create
I, [2015-01-08T22:20:12.336101 #2104]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"0"}, "description"=>"King Clothing"}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/74/confirm", "cancel_url"=>"http://localhost:3000/orders/74/cancel"}}
I, [2015-01-08T22:20:12.746125 #2104]  INFO -- : #<ActiveModel::Errors:0x00000007b2f500 @base=#<Payment:0x00000009750d60 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000097500e0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009099490 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000090986f8 @error=nil, @total="0", @currency="GBP">, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008ceaf38 @error=nil, @return_url="http://localhost:3000/orders/74/confirm", @cancel_url="http://localhost:3000/orders/74/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007b2f500 ...>>, @messages={}>
I, [2015-01-08T22:20:12.770126 #2104]  INFO -- : got past invalid
I, [2015-01-08T22:20:12.835130 #2104]  INFO -- : PayPal-Request-Id: 7082bb12-727d-4a5d-bb24-6441d384f3c9
I, [2015-01-08T22:20:12.876132 #2104]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-08T22:20:14.027198 #2104]  INFO -- : Response[400]: Bad Request, Duration: 1.117s
I, [2015-01-08T22:20:14.048199 #2104]  INFO -- :  in error=
I, [2015-01-08T22:20:14.140205 #2104]  INFO -- : back from super
I, [2015-01-08T22:20:14.249211 #2104]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"0"}, "description"=>"King Clothing"}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/74/confirm", "cancel_url"=>"http://localhost:3000/orders/74/cancel"}}
D, [2015-01-08T22:20:22.895705 #2104] DEBUG -- :   [1m[36mSQL (7.0ms)[0m  [1mUPDATE "orders" SET "created_at" = ?, "updated_at" = ?, "id" = ?, "pay_type" = ? WHERE "orders"."id" = 74[0m  [["created_at", Thu, 08 Jan 2015 22:20:04 UTC +00:00], ["updated_at", Thu, 08 Jan 2015 22:20:04 UTC +00:00], ["id", 74], ["pay_type", "paypal"]]
D, [2015-01-08T22:20:32.966281 #2104] DEBUG -- :   [1m[35mSQL (1.0ms)[0m  UPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 74
I, [2015-01-08T22:20:41.184751 #2104]  INFO -- : @payment save just done
I, [2015-01-08T22:20:41.808787 #2104]  INFO -- : #<Payment:0x00000009750d60 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions[0].amount", "issue"=>"Amount cannot be zero"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"79041b2ab8b00"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000097500e0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009099490 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000090986f8 @error=nil, @total="0", @currency="GBP">, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008ceaf38 @error=nil, @return_url="http://localhost:3000/orders/74/confirm", @cancel_url="http://localhost:3000/orders/74/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007b2f500 @base=#<Payment:0x00000009750d60 ...>, @messages={:"transactions[0].amount"=>["Amount cannot be zero"]}>, @request_id="7082bb12-727d-4a5d-bb24-6441d384f3c9", @header={}>
I, [2015-01-08T22:20:42.457824 #2104]  INFO -- : #<Payment:0x00000009750d60 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions[0].amount", "issue"=>"Amount cannot be zero"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"79041b2ab8b00"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000097500e0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009099490 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000090986f8 @error=nil, @total="0", @currency="GBP">, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008ceaf38 @error=nil, @return_url="http://localhost:3000/orders/74/confirm", @cancel_url="http://localhost:3000/orders/74/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007b2f500 @base=#<Payment:0x00000009750d60 ...>, @messages={:"transactions[0].amount"=>["Amount cannot be zero"]}>, @request_id="7082bb12-727d-4a5d-bb24-6441d384f3c9", @header={}>
D, [2015-01-08T22:20:42.600832 #2104] DEBUG -- :   [1m[36m (105.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-08T22:20:42.788843 #2104] DEBUG -- :   [1m[35mSQL (123.0ms)[0m  UPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 74
I, [2015-01-08T22:20:42.815845 #2104]  INFO -- : about to approve url
I, [2015-01-08T22:20:43.467882 #2104]  INFO -- : #<Payment:0x00000009750d60 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions[0].amount", "issue"=>"Amount cannot be zero"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"79041b2ab8b00"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000097500e0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009099490 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000090986f8 @error=nil, @total="0", @currency="GBP">, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008ceaf38 @error=nil, @return_url="http://localhost:3000/orders/74/confirm", @cancel_url="http://localhost:3000/orders/74/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007b2f500 @base=#<Payment:0x00000009750d60 ...>, @messages={:"transactions[0].amount"=>["Amount cannot be zero"]}>, @request_id="7082bb12-727d-4a5d-bb24-6441d384f3c9", @header={}>
I, [2015-01-08T22:20:43.510885 #2104]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-08T22:20:43.559887 #2104]  INFO -- : Completed 302 Found in 43926ms (ActiveRecord: 279.0ms)
D, [2015-01-08T22:20:43.663893 #2104] DEBUG -- : 
D, [2015-01-08T22:20:43.684894 #2104] DEBUG -- : 
I, [2015-01-08T22:20:43.727897 #2104]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-08 22:20:43 +0000
I, [2015-01-08T22:20:43.844904 #2104]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-08T22:20:43.924908 #2104] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-08T22:20:44.096918 #2104] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-08T22:20:44.282929 #2104]  INFO -- : Cache digest for store/index.xml: a93d4e2e981ab3dfce98a095c3b6c059
I, [2015-01-08T22:20:44.361933 #2104]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (3.0ms)
I, [2015-01-08T22:20:44.412936 #2104]  INFO -- :   Rendered store/index.html.erb within layouts/application (351.0ms)
D, [2015-01-08T22:20:44.624948 #2104] DEBUG -- :   [1m[36mLineItem Exists (2.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-08T22:20:44.722954 #2104] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-08T22:20:44.753956 #2104]  INFO -- :   Rendered collection (1.0ms)
I, [2015-01-08T22:20:44.849961 #2104]  INFO -- :   Rendered carts/_cart.html.erb (175.0ms)
I, [2015-01-08T22:20:44.985969 #2104]  INFO -- : Completed 200 OK in 1094ms (Views: 933.1ms | ActiveRecord: 18.0ms)
D, [2015-01-08T22:55:18.234071 #2104] DEBUG -- : 
D, [2015-01-08T22:55:18.244072 #2104] DEBUG -- : 
I, [2015-01-08T22:55:18.269073 #2104]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-08 22:55:18 +0000
I, [2015-01-08T22:55:18.333077 #2104]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-08T22:55:18.373079 #2104]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-08T22:55:18.413081 #2104] DEBUG -- :   [1m[36mCart Load (1.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-08T22:55:18.455084 #2104] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-08T22:55:18.509087 #2104] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-08T22:55:18.656095 #2104] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-08T22:55:18.682097 #2104] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-08T22:55:18.793103 #2104] DEBUG -- :   [1m[35mSQL (6.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 08 Jan 2015 22:55:18 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:8b9c578,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 08 Jan 2015 22:55:18 UTC +00:00]]
D, [2015-01-08T22:55:19.014116 #2104] DEBUG -- :   [1m[36m (199.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-08T22:55:19.078119 #2104] DEBUG -- :   [1m[35mLineItem Load (1.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-08T22:55:19.128122 #2104]  INFO -- :   Rendered line_items/_line_item.html.erb (8.0ms)
I, [2015-01-08T22:55:19.167124 #2104]  INFO -- :   Rendered carts/_cart.html.erb (113.0ms)
I, [2015-01-08T22:55:19.187126 #2104]  INFO -- :   Rendered line_items/create.js.erb (138.0ms)
I, [2015-01-08T22:55:19.215127 #2104]  INFO -- : Completed 200 OK in 815ms (Views: 171.0ms | ActiveRecord: 212.0ms)
D, [2015-01-08T22:55:21.169239 #2104] DEBUG -- : 
D, [2015-01-08T22:55:21.180240 #2104] DEBUG -- : 
I, [2015-01-08T22:55:21.208241 #2104]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-08 22:55:21 +0000
I, [2015-01-08T22:55:21.265244 #2104]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-08T22:55:21.298246 #2104]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-08T22:55:21.340249 #2104] DEBUG -- :   [1m[36mCart Load (1.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-08T22:55:21.382251 #2104] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-08T22:55:21.442255 #2104] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-08T22:55:21.491257 #2104] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-08T22:55:21.515259 #2104] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-08T22:55:21.626265 #2104] DEBUG -- :   [1m[35mSQL (5.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 08 Jan 2015 22:55:21 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:7b50890,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 08 Jan 2015 22:55:21 UTC +00:00]]
D, [2015-01-08T22:55:21.757273 #2104] DEBUG -- :   [1m[36m (109.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-08T22:55:21.815276 #2104] DEBUG -- :   [1m[35mLineItem Load (1.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-08T22:55:21.879280 #2104] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-08T22:55:21.914282 #2104]  INFO -- :   Rendered line_items/_line_item.html.erb (64.0ms)
I, [2015-01-08T22:55:21.950284 #2104]  INFO -- :   Rendered carts/_cart.html.erb (154.0ms)
I, [2015-01-08T22:55:21.972285 #2104]  INFO -- :   Rendered line_items/create.js.erb (180.0ms)
I, [2015-01-08T22:55:21.996286 #2104]  INFO -- : Completed 200 OK in 675ms (Views: 210.0ms | ActiveRecord: 120.0ms)
D, [2015-01-08T22:55:23.907396 #2104] DEBUG -- : 
D, [2015-01-08T22:55:23.916396 #2104] DEBUG -- : 
I, [2015-01-08T22:55:23.942398 #2104]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-08 22:55:23 +0000
I, [2015-01-08T22:55:23.998401 #2104]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-08T22:55:24.037403 #2104] DEBUG -- :   [1m[35mUser Load (1.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-08T22:55:24.083406 #2104] DEBUG -- :   [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-08T22:55:24.153410 #2104] DEBUG -- :   [1m[35mCart Load (1.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-08T22:55:24.332420 #2104] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-08T22:55:24.404424 #2104]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-08T22:55:40.081321 #2104] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-08T22:55:40.133324 #2104] DEBUG -- :   [1m[36mSQL (4.0ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 08 Jan 2015 22:55:40 UTC +00:00], ["updated_at", Thu, 08 Jan 2015 22:55:40 UTC +00:00]]
D, [2015-01-08T22:55:40.196327 #2104] DEBUG -- :   [1m[35mSQL (2.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 97  [["cart_id", nil], ["order_id", 75], ["updated_at", Thu, 08 Jan 2015 22:55:40 UTC +00:00]]
D, [2015-01-08T22:55:40.255331 #2104] DEBUG -- :   [1m[36mSQL (2.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 98[0m  [["cart_id", nil], ["order_id", 75], ["updated_at", Thu, 08 Jan 2015 22:55:40 UTC +00:00]]
I, [2015-01-08T22:55:40.272332 #2104]  INFO -- : about to @payment.create
D, [2015-01-08T22:55:57.475316 #2104] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-08T22:55:57.521318 #2104] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
I, [2015-01-08T22:56:14.830308 #2104]  INFO -- : in order=
I, [2015-01-08T22:56:21.368682 #2104]  INFO -- : in payment.create
I, [2015-01-08T22:56:21.477688 #2104]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Camo Print Tee", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Camo Print Tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"18.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/75/confirm", "cancel_url"=>"http://localhost:3000/orders/75/cancel"}}
I, [2015-01-08T22:56:21.772705 #2104]  INFO -- : #<ActiveModel::Errors:0x00000008b8eb08 @base=#<Payment:0x00000007c320d8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007c315e8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008e2d8a0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000008e2d378 @error=nil, @total="38.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000007f956a8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000007f86a40 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x00000007f6e5f8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000004760788 @error=nil, @return_url="http://localhost:3000/orders/75/confirm", @cancel_url="http://localhost:3000/orders/75/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008b8eb08 ...>>, @messages={}>
I, [2015-01-08T22:56:21.785706 #2104]  INFO -- : got past invalid
I, [2015-01-08T22:56:21.829709 #2104]  INFO -- : PayPal-Request-Id: f92fcd95-cd40-4193-8a7d-af127ecc886c
I, [2015-01-08T22:56:21.853710 #2104]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-08T22:56:23.123783 #2104]  INFO -- : Response[201]: Created, Duration: 1.256s
I, [2015-01-08T22:56:23.139783 #2104]  INFO -- : back from super
I, [2015-01-08T22:56:23.355796 #2104]  INFO -- : {"id"=>"PAY-9F588101LT385384MKSXQWGA", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98", "details"=>{"subtotal"=>"38.98"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Camo Print Tee", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Camo Print Tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"18.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/75/confirm", "cancel_url"=>"http://localhost:3000/orders/75/cancel"}, "create_time"=>"2015-01-08T22:56:24Z", "update_time"=>"2015-01-08T22:56:24Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-9F588101LT385384MKSXQWGA", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-267711738T294893V", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-9F588101LT385384MKSXQWGA/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-08T22:56:34.450430 #2104] DEBUG -- :   [1m[35mSQL (4.0ms)[0m  UPDATE "orders" SET "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ?, "pay_type" = ? WHERE "orders"."id" = 75  [["created_at", Thu, 08 Jan 2015 22:55:40 UTC +00:00], ["updated_at", Thu, 08 Jan 2015 22:55:40 UTC +00:00], ["id", 75], ["payment_id", "PAY-9F588101LT385384MKSXQWGA"], ["state", "created"], ["pay_type", "paypal"]]
D, [2015-01-08T22:56:37.159585 #2104] DEBUG -- :   [1m[36mSQL (1.0ms)[0m  [1mUPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 75[0m
I, [2015-01-08T22:56:40.043750 #2104]  INFO -- : @payment save just done
I, [2015-01-08T22:56:42.995919 #2104]  INFO -- : #<Payment:0x00000007c320d8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008984e48 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000089845b0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x0000000897ff38 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000897f3d0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000897eed0 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x0000000897e1b0 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000897d3c8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000897c9f0 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x00000008977040 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000004760788 @error=nil, @return_url="http://localhost:3000/orders/75/confirm", @cancel_url="http://localhost:3000/orders/75/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008b8eb08 @base=#<Payment:0x00000007c320d8 ...>, @messages={}>, @request_id="f92fcd95-cd40-4193-8a7d-af127ecc886c", @header={}, @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000008974818 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9F588101LT385384MKSXQWGA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000089677d0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-267711738T294893V", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000089660b0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9F588101LT385384MKSXQWGA/execute", @rel="execute", @method="POST">], @id="PAY-9F588101LT385384MKSXQWGA", @create_time="2015-01-08T22:56:24Z", @update_time="2015-01-08T22:56:24Z", @state="created">
I, [2015-01-08T22:56:46.446117 #2104]  INFO -- : #<Payment:0x00000007c320d8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008984e48 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000089845b0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x0000000897ff38 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000897f3d0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000897eed0 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x0000000897e1b0 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000897d3c8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000897c9f0 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x00000008977040 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000004760788 @error=nil, @return_url="http://localhost:3000/orders/75/confirm", @cancel_url="http://localhost:3000/orders/75/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008b8eb08 @base=#<Payment:0x00000007c320d8 ...>, @messages={}>, @request_id="f92fcd95-cd40-4193-8a7d-af127ecc886c", @header={}, @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000008974818 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9F588101LT385384MKSXQWGA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000089677d0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-267711738T294893V", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000089660b0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9F588101LT385384MKSXQWGA/execute", @rel="execute", @method="POST">], @id="PAY-9F588101LT385384MKSXQWGA", @create_time="2015-01-08T22:56:24Z", @update_time="2015-01-08T22:56:24Z", @state="created">
D, [2015-01-08T22:56:49.040265 #2104] DEBUG -- :   [1m[35m (124.0ms)[0m  commit transaction
D, [2015-01-08T22:56:49.205274 #2104] DEBUG -- :   [1m[36mSQL (101.0ms)[0m  [1mUPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 75[0m
I, [2015-01-08T22:56:49.234276 #2104]  INFO -- : about to approve url
I, [2015-01-08T22:56:50.263335 #2104]  INFO -- : #<Payment:0x00000007c320d8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008984e48 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000089845b0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x0000000897ff38 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000897f3d0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000897eed0 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x0000000897e1b0 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000897d3c8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000897c9f0 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x00000008977040 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000004760788 @error=nil, @return_url="http://localhost:3000/orders/75/confirm", @cancel_url="http://localhost:3000/orders/75/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008b8eb08 @base=#<Payment:0x00000007c320d8 ...>, @messages={}>, @request_id="f92fcd95-cd40-4193-8a7d-af127ecc886c", @header={}, @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000008974818 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9F588101LT385384MKSXQWGA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000089677d0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-267711738T294893V", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000089660b0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9F588101LT385384MKSXQWGA/execute", @rel="execute", @method="POST">], @id="PAY-9F588101LT385384MKSXQWGA", @create_time="2015-01-08T22:56:24Z", @update_time="2015-01-08T22:56:24Z", @state="created">
I, [2015-01-08T22:56:51.119384 #2104]  INFO -- : #<Payment:0x00000007c320d8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008984e48 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000089845b0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x0000000897ff38 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000897f3d0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000897eed0 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x0000000897e1b0 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000897d3c8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000897c9f0 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x00000008977040 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000004760788 @error=nil, @return_url="http://localhost:3000/orders/75/confirm", @cancel_url="http://localhost:3000/orders/75/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008b8eb08 @base=#<Payment:0x00000007c320d8 ...>, @messages={}>, @request_id="f92fcd95-cd40-4193-8a7d-af127ecc886c", @header={}, @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000008974818 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9F588101LT385384MKSXQWGA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000089677d0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-267711738T294893V", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000089660b0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9F588101LT385384MKSXQWGA/execute", @rel="execute", @method="POST">], @id="PAY-9F588101LT385384MKSXQWGA", @create_time="2015-01-08T22:56:24Z", @update_time="2015-01-08T22:56:24Z", @state="created">
I, [2015-01-08T22:56:51.159386 #2104]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-267711738T294893V
I, [2015-01-08T22:56:51.988434 #2104]  INFO -- : #<Payment:0x00000007c320d8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008984e48 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000089845b0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x0000000897ff38 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000897f3d0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000897eed0 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x0000000897e1b0 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000897d3c8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000897c9f0 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x00000008977040 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000004760788 @error=nil, @return_url="http://localhost:3000/orders/75/confirm", @cancel_url="http://localhost:3000/orders/75/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008b8eb08 @base=#<Payment:0x00000007c320d8 ...>, @messages={}>, @request_id="f92fcd95-cd40-4193-8a7d-af127ecc886c", @header={}, @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000008974818 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9F588101LT385384MKSXQWGA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000089677d0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-267711738T294893V", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000089660b0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9F588101LT385384MKSXQWGA/execute", @rel="execute", @method="POST">], @id="PAY-9F588101LT385384MKSXQWGA", @create_time="2015-01-08T22:56:24Z", @update_time="2015-01-08T22:56:24Z", @state="created">
I, [2015-01-08T22:56:52.040437 #2104]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-267711738T294893V
I, [2015-01-08T22:56:52.074438 #2104]  INFO -- : Completed 403 Forbidden in 88045ms (ActiveRecord: 246.0ms)
D, [2015-01-08T22:57:22.774194 #2104] DEBUG -- : 
D, [2015-01-08T22:57:22.789195 #2104] DEBUG -- : 
I, [2015-01-08T22:57:22.865200 #2104]  INFO -- : Started GET "/orders/75/confirm?paymentId=PAY-9F588101LT385384MKSXQWGA&token=EC-267711738T294893V&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-08 22:57:22 +0000
I, [2015-01-08T22:57:22.957205 #2104]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-08T22:57:23.014208 #2104]  INFO -- :   Parameters: {"paymentId"=>"PAY-9F588101LT385384MKSXQWGA", "token"=>"EC-267711738T294893V", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"75"}
D, [2015-01-08T22:57:23.082212 #2104] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-08T22:57:23.145216 #2104] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-08T22:57:23.206219 #2104] DEBUG -- :   [1m[35mOrder Load (3.0ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "75"]]
I, [2015-01-08T22:57:43.752394 #2104]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-9F588101LT385384MKSXQWGA
I, [2015-01-08T22:57:44.892459 #2104]  INFO -- : Response[200]: OK, Duration: 1.110s
D, [2015-01-08T22:59:42.649195 #2104] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-08T22:59:42.774202 #2104] DEBUG -- :   [1m[35mSQL (5.0ms)[0m  UPDATE "orders" SET "name" = ?, "email" = ?, "address" = ?, "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 75  [["name", "Test Buyer"], ["email", "simon.king65-buyer@gmail.com"], ["address", "1 Main Terrace"], ["shipping_address1", "1 Main Terrace"], ["updated_at", Thu, 08 Jan 2015 22:59:42 UTC +00:00]]
D, [2015-01-08T22:59:42.912210 #2104] DEBUG -- :   [1m[36m (109.0ms)[0m  [1mcommit transaction[0m
I, [2015-01-08T22:59:46.210398 #2104]  INFO -- :   Rendered orders/_form.html.erb (240.0ms)
I, [2015-01-08T22:59:46.271402 #2104]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (323.0ms)
I, [2015-01-08T22:59:51.797718 #2104]  INFO -- : Completed 200 OK in 148743ms (Views: 551.0ms | ActiveRecord: 123.0ms)
D, [2015-01-08T22:59:52.084734 #2104] DEBUG -- : 
D, [2015-01-08T22:59:52.101735 #2104] DEBUG -- : 
I, [2015-01-08T22:59:52.133737 #2104]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-08 22:59:52 +0000
D, [2015-01-08T22:59:52.202741 #2104] DEBUG -- : 
D, [2015-01-08T22:59:52.214742 #2104] DEBUG -- : 
I, [2015-01-08T22:59:52.245744 #2104]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-08 22:59:52 +0000
D, [2015-01-08T22:59:52.313748 #2104] DEBUG -- : 
D, [2015-01-08T22:59:52.326748 #2104] DEBUG -- : 
I, [2015-01-08T22:59:52.363750 #2104]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-08 22:59:52 +0000
D, [2015-01-08T22:59:52.435755 #2104] DEBUG -- : 
D, [2015-01-08T22:59:52.467756 #2104] DEBUG -- : 
I, [2015-01-08T22:59:52.503758 #2104]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-08 22:59:52 +0000
D, [2015-01-08T22:59:52.552761 #2104] DEBUG -- : 
D, [2015-01-08T22:59:52.570762 #2104] DEBUG -- : 
I, [2015-01-08T22:59:52.605764 #2104]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-08 22:59:52 +0000
D, [2015-01-08T22:59:52.660767 #2104] DEBUG -- : 
D, [2015-01-08T22:59:52.672768 #2104] DEBUG -- : 
I, [2015-01-08T22:59:52.703770 #2104]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-08 22:59:52 +0000
D, [2015-01-08T22:59:52.761773 #2104] DEBUG -- : 
D, [2015-01-08T22:59:52.774774 #2104] DEBUG -- : 
I, [2015-01-08T22:59:52.808776 #2104]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-08 22:59:52 +0000
D, [2015-01-08T22:59:52.863779 #2104] DEBUG -- : 
D, [2015-01-08T22:59:52.876780 #2104] DEBUG -- : 
I, [2015-01-08T22:59:52.910782 #2104]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-08 22:59:52 +0000
D, [2015-01-08T22:59:52.966785 #2104] DEBUG -- : 
D, [2015-01-08T22:59:52.979786 #2104] DEBUG -- : 
I, [2015-01-08T22:59:53.014788 #2104]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-08 22:59:52 +0000
D, [2015-01-08T22:59:53.070791 #2104] DEBUG -- : 
D, [2015-01-08T22:59:53.090792 #2104] DEBUG -- : 
I, [2015-01-08T22:59:53.126794 #2104]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-08 22:59:53 +0000
D, [2015-01-08T22:59:53.182797 #2104] DEBUG -- : 
D, [2015-01-08T22:59:53.194798 #2104] DEBUG -- : 
I, [2015-01-08T22:59:53.231800 #2104]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-08 22:59:53 +0000
D, [2015-01-08T22:59:53.290803 #2104] DEBUG -- : 
D, [2015-01-08T22:59:53.302804 #2104] DEBUG -- : 
I, [2015-01-08T22:59:53.334806 #2104]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-08 22:59:53 +0000
D, [2015-01-08T22:59:53.383809 #2104] DEBUG -- : 
D, [2015-01-08T22:59:53.400810 #2104] DEBUG -- : 
I, [2015-01-08T22:59:53.439812 #2104]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-08 22:59:53 +0000
D, [2015-01-08T22:59:53.490815 #2104] DEBUG -- : 
D, [2015-01-08T22:59:53.508816 #2104] DEBUG -- : 
I, [2015-01-08T22:59:53.544818 #2104]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-08 22:59:53 +0000
D, [2015-01-08T22:59:53.620822 #2104] DEBUG -- : 
D, [2015-01-08T22:59:53.632823 #2104] DEBUG -- : 
I, [2015-01-08T22:59:53.668825 #2104]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-08 22:59:53 +0000
D, [2015-01-08T22:59:53.723828 #2104] DEBUG -- : 
D, [2015-01-08T22:59:53.735829 #2104] DEBUG -- : 
I, [2015-01-08T22:59:53.769831 #2104]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-08 22:59:53 +0000
D, [2015-01-08T22:59:53.828834 #2104] DEBUG -- : 
D, [2015-01-08T22:59:53.841835 #2104] DEBUG -- : 
I, [2015-01-08T22:59:53.874837 #2104]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-08 22:59:53 +0000
D, [2015-01-08T22:59:53.933840 #2104] DEBUG -- : 
D, [2015-01-08T22:59:53.944841 #2104] DEBUG -- : 
I, [2015-01-08T22:59:53.975843 #2104]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-08 22:59:53 +0000
D, [2015-01-08T22:59:54.025845 #2104] DEBUG -- : 
D, [2015-01-08T22:59:54.048847 #2104] DEBUG -- : 
I, [2015-01-08T22:59:54.079849 #2104]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-08 22:59:54 +0000
D, [2015-01-08T22:59:54.136852 #2104] DEBUG -- : 
D, [2015-01-08T22:59:54.147852 #2104] DEBUG -- : 
I, [2015-01-08T22:59:54.172854 #2104]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-08 22:59:54 +0000
D, [2015-01-08T22:59:54.239858 #2104] DEBUG -- : 
D, [2015-01-08T22:59:54.250858 #2104] DEBUG -- : 
I, [2015-01-08T22:59:54.280860 #2104]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-08 22:59:54 +0000
D, [2015-01-08T22:59:54.353864 #2104] DEBUG -- : 
D, [2015-01-08T22:59:54.366865 #2104] DEBUG -- : 
I, [2015-01-08T22:59:54.399867 #2104]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-08 22:59:54 +0000
D, [2015-01-08T22:59:54.455870 #2104] DEBUG -- : 
D, [2015-01-08T22:59:54.468871 #2104] DEBUG -- : 
I, [2015-01-08T22:59:54.503873 #2104]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-08 22:59:54 +0000
D, [2015-01-08T22:59:54.554876 #2104] DEBUG -- : 
D, [2015-01-08T22:59:54.566876 #2104] DEBUG -- : 
I, [2015-01-08T22:59:54.600878 #2104]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-08 22:59:54 +0000
D, [2015-01-08T22:59:54.651881 #2104] DEBUG -- : 
D, [2015-01-08T22:59:54.665882 #2104] DEBUG -- : 
I, [2015-01-08T22:59:54.701884 #2104]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-08 22:59:54 +0000
D, [2015-01-08T22:59:54.753887 #2104] DEBUG -- : 
D, [2015-01-08T22:59:54.765888 #2104] DEBUG -- : 
I, [2015-01-08T22:59:54.799890 #2104]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-08 22:59:54 +0000
D, [2015-01-08T22:59:54.850893 #2104] DEBUG -- : 
D, [2015-01-08T22:59:54.863893 #2104] DEBUG -- : 
I, [2015-01-08T22:59:54.894895 #2104]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-08 22:59:54 +0000
D, [2015-01-08T23:02:26.182548 #2104] DEBUG -- : 
D, [2015-01-08T23:02:26.207550 #2104] DEBUG -- : 
I, [2015-01-08T23:02:26.248552 #2104]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-08 23:02:26 +0000
I, [2015-01-08T23:02:29.104715 #2104]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-08T23:02:29.249724 #2104] DEBUG -- :   [1m[35mCart Load (3.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-08T23:02:29.496738 #2104] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-08T23:02:29.749752 #2104]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (5.0ms)
I, [2015-01-08T23:02:29.802755 #2104]  INFO -- :   Rendered store/index.html.erb within layouts/application (331.0ms)
D, [2015-01-08T23:02:30.125774 #2104] DEBUG -- :   [1m[35mLineItem Exists (2.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 36]]
D, [2015-01-08T23:02:30.227780 #2104] DEBUG -- :   [1m[36mLineItem Load (4.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-08T23:02:30.263782 #2104]  INFO -- :   Rendered collection (1.0ms)
I, [2015-01-08T23:02:30.384789 #2104]  INFO -- :   Rendered carts/_cart.html.erb (206.0ms)
I, [2015-01-08T23:02:30.466793 #2104]  INFO -- : Completed 200 OK in 1310ms (Views: 995.1ms | ActiveRecord: 35.0ms)
D, [2015-01-08T23:02:30.857816 #2104] DEBUG -- : 
D, [2015-01-08T23:02:30.908819 #2104] DEBUG -- : 
I, [2015-01-08T23:02:30.982823 #2104]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-08 23:02:30 +0000
D, [2015-01-08T23:02:31.066828 #2104] DEBUG -- : 
D, [2015-01-08T23:02:31.090829 #2104] DEBUG -- : 
I, [2015-01-08T23:02:31.148832 #2104]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-08 23:02:31 +0000
D, [2015-01-08T23:02:31.227837 #2104] DEBUG -- : 
D, [2015-01-08T23:02:31.253838 #2104] DEBUG -- : 
I, [2015-01-08T23:02:31.311842 #2104]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-08 23:02:31 +0000
D, [2015-01-08T23:02:31.391846 #2104] DEBUG -- : 
D, [2015-01-08T23:02:31.413848 #2104] DEBUG -- : 
I, [2015-01-08T23:02:31.473851 #2104]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-08 23:02:31 +0000
D, [2015-01-08T23:02:31.554856 #2104] DEBUG -- : 
D, [2015-01-08T23:02:31.576857 #2104] DEBUG -- : 
I, [2015-01-08T23:02:31.636860 #2104]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-08 23:02:31 +0000
D, [2015-01-08T23:02:31.707864 #2104] DEBUG -- : 
D, [2015-01-08T23:02:31.731866 #2104] DEBUG -- : 
I, [2015-01-08T23:02:31.789869 #2104]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-08 23:02:31 +0000
D, [2015-01-08T23:02:31.869874 #2104] DEBUG -- : 
D, [2015-01-08T23:02:31.894875 #2104] DEBUG -- : 
I, [2015-01-08T23:02:31.950878 #2104]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-08 23:02:31 +0000
D, [2015-01-08T23:02:32.026883 #2104] DEBUG -- : 
D, [2015-01-08T23:02:32.049884 #2104] DEBUG -- : 
I, [2015-01-08T23:02:32.107887 #2104]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-08 23:02:32 +0000
D, [2015-01-08T23:02:32.190892 #2104] DEBUG -- : 
D, [2015-01-08T23:02:32.211893 #2104] DEBUG -- : 
I, [2015-01-08T23:02:32.261896 #2104]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-08 23:02:32 +0000
D, [2015-01-08T23:02:32.349901 #2104] DEBUG -- : 
D, [2015-01-08T23:02:32.371902 #2104] DEBUG -- : 
I, [2015-01-08T23:02:32.423905 #2104]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-08 23:02:32 +0000
D, [2015-01-08T23:02:32.507910 #2104] DEBUG -- : 
D, [2015-01-08T23:02:32.528911 #2104] DEBUG -- : 
I, [2015-01-08T23:02:32.586915 #2104]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-08 23:02:32 +0000
D, [2015-01-08T23:02:32.668919 #2104] DEBUG -- : 
D, [2015-01-08T23:02:32.689921 #2104] DEBUG -- : 
I, [2015-01-08T23:02:32.741924 #2104]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-08 23:02:32 +0000
D, [2015-01-08T23:02:32.828928 #2104] DEBUG -- : 
D, [2015-01-08T23:02:32.854930 #2104] DEBUG -- : 
I, [2015-01-08T23:02:32.923934 #2104]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-08 23:02:32 +0000
D, [2015-01-08T23:02:33.001938 #2104] DEBUG -- : 
D, [2015-01-08T23:02:33.022940 #2104] DEBUG -- : 
I, [2015-01-08T23:02:33.084943 #2104]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-08 23:02:33 +0000
D, [2015-01-08T23:02:33.176948 #2104] DEBUG -- : 
D, [2015-01-08T23:02:33.197950 #2104] DEBUG -- : 
I, [2015-01-08T23:02:33.250953 #2104]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-08 23:02:33 +0000
D, [2015-01-08T23:02:33.327957 #2104] DEBUG -- : 
D, [2015-01-08T23:02:33.347958 #2104] DEBUG -- : 
I, [2015-01-08T23:02:33.405961 #2104]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-08 23:02:33 +0000
D, [2015-01-08T23:02:33.484966 #2104] DEBUG -- : 
D, [2015-01-08T23:02:33.530969 #2104] DEBUG -- : 
I, [2015-01-08T23:02:33.584972 #2104]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-08 23:02:33 +0000
D, [2015-01-08T23:02:33.659976 #2104] DEBUG -- : 
D, [2015-01-08T23:02:33.680977 #2104] DEBUG -- : 
I, [2015-01-08T23:02:33.730980 #2104]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-08 23:02:33 +0000
D, [2015-01-08T23:02:33.807984 #2104] DEBUG -- : 
D, [2015-01-08T23:02:33.827986 #2104] DEBUG -- : 
I, [2015-01-08T23:02:33.879989 #2104]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-08 23:02:33 +0000
D, [2015-01-08T23:02:33.952993 #2104] DEBUG -- : 
D, [2015-01-08T23:02:33.973994 #2104] DEBUG -- : 
I, [2015-01-08T23:02:34.025997 #2104]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-08 23:02:33 +0000
D, [2015-01-08T23:02:34.131003 #2104] DEBUG -- : 
D, [2015-01-08T23:02:34.153004 #2104] DEBUG -- : 
I, [2015-01-08T23:02:34.207007 #2104]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-08 23:02:34 +0000
D, [2015-01-08T23:02:34.292012 #2104] DEBUG -- : 
D, [2015-01-08T23:02:34.310013 #2104] DEBUG -- : 
I, [2015-01-08T23:02:34.365016 #2104]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-08 23:02:34 +0000
D, [2015-01-08T23:02:34.435020 #2104] DEBUG -- : 
D, [2015-01-08T23:02:34.456022 #2104] DEBUG -- : 
I, [2015-01-08T23:02:34.510025 #2104]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-08 23:02:34 +0000
D, [2015-01-08T23:02:34.582029 #2104] DEBUG -- : 
D, [2015-01-08T23:02:34.601030 #2104] DEBUG -- : 
I, [2015-01-08T23:02:34.648033 #2104]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-08 23:02:34 +0000
D, [2015-01-08T23:02:34.721037 #2104] DEBUG -- : 
D, [2015-01-08T23:02:34.741038 #2104] DEBUG -- : 
I, [2015-01-08T23:02:34.793041 #2104]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-08 23:02:34 +0000
D, [2015-01-08T23:02:34.865045 #2104] DEBUG -- : 
D, [2015-01-08T23:02:34.885046 #2104] DEBUG -- : 
I, [2015-01-08T23:02:34.939049 #2104]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-08 23:02:34 +0000
D, [2015-01-08T23:02:35.051056 #2104] DEBUG -- : 
D, [2015-01-08T23:02:35.085058 #2104] DEBUG -- : 
I, [2015-01-08T23:02:35.150061 #2104]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-08 23:02:35 +0000
D, [2015-01-08T23:02:35.235066 #2104] DEBUG -- : 
D, [2015-01-08T23:02:35.256067 #2104] DEBUG -- : 
I, [2015-01-08T23:02:35.312071 #2104]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-08 23:02:35 +0000
D, [2015-01-08T23:02:35.392075 #2104] DEBUG -- : 
D, [2015-01-08T23:02:35.419077 #2104] DEBUG -- : 
I, [2015-01-08T23:02:35.475080 #2104]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-08 23:02:35 +0000
D, [2015-01-08T23:02:43.358531 #2104] DEBUG -- : 
D, [2015-01-08T23:02:43.383532 #2104] DEBUG -- : 
I, [2015-01-08T23:02:43.434535 #2104]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-08 23:02:43 +0000
I, [2015-01-08T23:02:43.594544 #2104]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-08T23:02:43.657548 #2104]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-08T23:02:43.752553 #2104] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-08T23:02:43.839558 #2104] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-08T23:02:43.951565 #2104] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-08T23:02:44.256582 #2104] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-08T23:02:44.302585 #2104] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2015-01-08T23:02:44.511597 #2104] DEBUG -- :   [1m[36mSQL (10.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 08 Jan 2015 23:02:44 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:5e7d420,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 08 Jan 2015 23:02:44 UTC +00:00]]
D, [2015-01-08T23:02:44.674606 #2104] DEBUG -- :   [1m[35m (124.0ms)[0m  commit transaction
D, [2015-01-08T23:02:44.804613 #2104] DEBUG -- :   [1m[36mLineItem Load (3.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-08T23:02:44.903619 #2104]  INFO -- :   Rendered line_items/_line_item.html.erb (19.0ms)
I, [2015-01-08T23:02:44.984624 #2104]  INFO -- :   Rendered carts/_cart.html.erb (227.0ms)
I, [2015-01-08T23:02:45.026626 #2104]  INFO -- :   Rendered line_items/create.js.erb (280.0ms)
I, [2015-01-08T23:02:45.078629 #2104]  INFO -- : Completed 200 OK in 1371ms (Views: 347.0ms | ActiveRecord: 150.0ms)
D, [2015-01-08T23:02:45.119631 #2104] DEBUG -- : 
D, [2015-01-08T23:02:45.142633 #2104] DEBUG -- : 
I, [2015-01-08T23:02:45.194636 #2104]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-08 23:02:45 +0000
I, [2015-01-08T23:02:45.321643 #2104]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-08T23:02:45.385647 #2104]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-08T23:02:45.467651 #2104] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-08T23:02:45.544656 #2104] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-08T23:02:45.667663 #2104] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-08T23:02:45.783669 #2104] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-08T23:02:45.831672 #2104] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2015-01-08T23:02:46.044684 #2104] DEBUG -- :   [1m[36mSQL (10.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Thu, 08 Jan 2015 23:02:45 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:42bbb38,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 08 Jan 2015 23:02:45 UTC +00:00]]
D, [2015-01-08T23:02:46.221695 #2104] DEBUG -- :   [1m[35m (109.0ms)[0m  commit transaction
D, [2015-01-08T23:02:46.341701 #2104] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-08T23:02:46.470709 #2104] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-08T23:02:46.549713 #2104]  INFO -- :   Rendered line_items/_line_item.html.erb (133.0ms)
I, [2015-01-08T23:02:46.635718 #2104]  INFO -- :   Rendered carts/_cart.html.erb (328.0ms)
I, [2015-01-08T23:02:46.675720 #2104]  INFO -- :   Rendered line_items/create.js.erb (387.0ms)
I, [2015-01-08T23:02:46.727723 #2104]  INFO -- : Completed 200 OK in 1292ms (Views: 446.0ms | ActiveRecord: 134.0ms)
D, [2015-01-08T23:02:52.013026 #2104] DEBUG -- : 
D, [2015-01-08T23:02:52.041027 #2104] DEBUG -- : 
I, [2015-01-08T23:02:52.088030 #2104]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-08 23:02:52 +0000
I, [2015-01-08T23:02:52.248039 #2104]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-08T23:02:52.383047 #2104] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-08T23:02:52.582058 #2104] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-08T23:02:52.660063 #2104] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-08T23:02:52.837073 #2104] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-08T23:02:53.006083 #2104]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-08T23:03:03.778699 #2104] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-08T23:03:04.148720 #2104] DEBUG -- :   [1m[35mSQL (7.0ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Thu, 08 Jan 2015 23:03:04 UTC +00:00], ["updated_at", Thu, 08 Jan 2015 23:03:04 UTC +00:00]]
D, [2015-01-08T23:03:04.279727 #2104] DEBUG -- :   [1m[36mSQL (6.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 99[0m  [["cart_id", nil], ["order_id", 76], ["updated_at", Thu, 08 Jan 2015 23:03:04 UTC +00:00]]
D, [2015-01-08T23:03:04.397734 #2104] DEBUG -- :   [1m[35mSQL (3.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 100  [["cart_id", nil], ["order_id", 76], ["updated_at", Thu, 08 Jan 2015 23:03:04 UTC +00:00]]
I, [2015-01-08T23:03:04.430736 #2104]  INFO -- : about to @payment.create
D, [2015-01-08T23:03:05.805815 #2104] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-08T23:03:05.893820 #2104] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
I, [2015-01-08T23:03:07.723924 #2104]  INFO -- : in order=
I, [2015-01-08T23:03:19.163579 #2104]  INFO -- : in payment.create
I, [2015-01-08T23:03:19.454595 #2104]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Camo Print Tee", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Camo Print Tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"18.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/76/confirm", "cancel_url"=>"http://localhost:3000/orders/76/cancel"}}
I, [2015-01-08T23:03:20.156635 #2104]  INFO -- : #<ActiveModel::Errors:0x0000000442bcc0 @base=#<Payment:0x00000008f6b078 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008f6a588 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008a53720 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000008a53270 @error=nil, @total="38.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008a50c00 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008a4a2d8 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x00000008a3e320 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008096bb0 @error=nil, @return_url="http://localhost:3000/orders/76/confirm", @cancel_url="http://localhost:3000/orders/76/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000442bcc0 ...>>, @messages={}>
I, [2015-01-08T23:03:20.189637 #2104]  INFO -- : got past invalid
I, [2015-01-08T23:03:20.321645 #2104]  INFO -- : PayPal-Request-Id: 726f26c3-3eb1-414f-8572-709c1f9280b0
I, [2015-01-08T23:03:20.379648 #2104]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-08T23:03:21.614719 #2104]  INFO -- : Response[201]: Created, Duration: 1.191s
I, [2015-01-08T23:03:21.659721 #2104]  INFO -- : back from super
I, [2015-01-08T23:03:22.206753 #2104]  INFO -- : {"id"=>"PAY-07201246T2784493LKSXQZOY", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98", "details"=>{"subtotal"=>"38.98"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Camo Print Tee", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Camo Print Tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"18.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/76/confirm", "cancel_url"=>"http://localhost:3000/orders/76/cancel"}, "create_time"=>"2015-01-08T23:03:23Z", "update_time"=>"2015-01-08T23:03:23Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-07201246T2784493LKSXQZOY", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-40U93420MM300772U", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-07201246T2784493LKSXQZOY/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-08T23:03:22.448767 #2104] DEBUG -- :   [1m[36mSQL (8.0ms)[0m  [1mUPDATE "orders" SET "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ?, "pay_type" = ? WHERE "orders"."id" = 76[0m  [["created_at", Thu, 08 Jan 2015 23:03:04 UTC +00:00], ["updated_at", Thu, 08 Jan 2015 23:03:04 UTC +00:00], ["id", 76], ["payment_id", "PAY-07201246T2784493LKSXQZOY"], ["state", "created"], ["pay_type", "paypal"]]
D, [2015-01-08T23:03:22.535772 #2104] DEBUG -- :   [1m[35mSQL (1.0ms)[0m  UPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 76
I, [2015-01-08T23:03:22.571774 #2104]  INFO -- : @payment save just done
I, [2015-01-08T23:03:23.821845 #2104]  INFO -- : #<Payment:0x00000008f6b078 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009917388 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009916af0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009916618 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000099159c0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000099153f8 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009914548 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000990f5c0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000990eb48 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000990cd20 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008096bb0 @error=nil, @return_url="http://localhost:3000/orders/76/confirm", @cancel_url="http://localhost:3000/orders/76/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000442bcc0 @base=#<Payment:0x00000008f6b078 ...>, @messages={}>, @request_id="726f26c3-3eb1-414f-8572-709c1f9280b0", @header={}, @id="PAY-07201246T2784493LKSXQZOY", @create_time="2015-01-08T23:03:23Z", @update_time="2015-01-08T23:03:23Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009906808 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-07201246T2784493LKSXQZOY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009905548 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-40U93420MM300772U", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009904378 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-07201246T2784493LKSXQZOY/execute", @rel="execute", @method="POST">]>
I, [2015-01-08T23:03:25.035915 #2104]  INFO -- : #<Payment:0x00000008f6b078 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009917388 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009916af0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009916618 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000099159c0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000099153f8 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009914548 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000990f5c0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000990eb48 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000990cd20 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008096bb0 @error=nil, @return_url="http://localhost:3000/orders/76/confirm", @cancel_url="http://localhost:3000/orders/76/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000442bcc0 @base=#<Payment:0x00000008f6b078 ...>, @messages={}>, @request_id="726f26c3-3eb1-414f-8572-709c1f9280b0", @header={}, @id="PAY-07201246T2784493LKSXQZOY", @create_time="2015-01-08T23:03:23Z", @update_time="2015-01-08T23:03:23Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009906808 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-07201246T2784493LKSXQZOY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009905548 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-40U93420MM300772U", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009904378 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-07201246T2784493LKSXQZOY/execute", @rel="execute", @method="POST">]>
D, [2015-01-08T23:03:25.179923 #2104] DEBUG -- :   [1m[36m (97.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-08T23:03:25.393935 #2104] DEBUG -- :   [1m[35mSQL (138.0ms)[0m  UPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 76
I, [2015-01-08T23:03:25.423937 #2104]  INFO -- : about to approve url
I, [2015-01-08T23:03:26.639006 #2104]  INFO -- : #<Payment:0x00000008f6b078 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009917388 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009916af0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009916618 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000099159c0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000099153f8 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009914548 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000990f5c0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000990eb48 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000990cd20 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008096bb0 @error=nil, @return_url="http://localhost:3000/orders/76/confirm", @cancel_url="http://localhost:3000/orders/76/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000442bcc0 @base=#<Payment:0x00000008f6b078 ...>, @messages={}>, @request_id="726f26c3-3eb1-414f-8572-709c1f9280b0", @header={}, @id="PAY-07201246T2784493LKSXQZOY", @create_time="2015-01-08T23:03:23Z", @update_time="2015-01-08T23:03:23Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009906808 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-07201246T2784493LKSXQZOY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009905548 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-40U93420MM300772U", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009904378 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-07201246T2784493LKSXQZOY/execute", @rel="execute", @method="POST">]>
I, [2015-01-08T23:03:27.853076 #2104]  INFO -- : #<Payment:0x00000008f6b078 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009917388 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009916af0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009916618 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000099159c0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000099153f8 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009914548 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000990f5c0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000990eb48 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000990cd20 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008096bb0 @error=nil, @return_url="http://localhost:3000/orders/76/confirm", @cancel_url="http://localhost:3000/orders/76/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000442bcc0 @base=#<Payment:0x00000008f6b078 ...>, @messages={}>, @request_id="726f26c3-3eb1-414f-8572-709c1f9280b0", @header={}, @id="PAY-07201246T2784493LKSXQZOY", @create_time="2015-01-08T23:03:23Z", @update_time="2015-01-08T23:03:23Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009906808 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-07201246T2784493LKSXQZOY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009905548 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-40U93420MM300772U", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009904378 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-07201246T2784493LKSXQZOY/execute", @rel="execute", @method="POST">]>
I, [2015-01-08T23:03:27.925080 #2104]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-40U93420MM300772U
I, [2015-01-08T23:03:29.149150 #2104]  INFO -- : #<Payment:0x00000008f6b078 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009917388 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009916af0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009916618 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000099159c0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000099153f8 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009914548 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000990f5c0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000990eb48 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000990cd20 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008096bb0 @error=nil, @return_url="http://localhost:3000/orders/76/confirm", @cancel_url="http://localhost:3000/orders/76/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000442bcc0 @base=#<Payment:0x00000008f6b078 ...>, @messages={}>, @request_id="726f26c3-3eb1-414f-8572-709c1f9280b0", @header={}, @id="PAY-07201246T2784493LKSXQZOY", @create_time="2015-01-08T23:03:23Z", @update_time="2015-01-08T23:03:23Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009906808 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-07201246T2784493LKSXQZOY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009905548 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-40U93420MM300772U", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009904378 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-07201246T2784493LKSXQZOY/execute", @rel="execute", @method="POST">]>
I, [2015-01-08T23:03:29.229154 #2104]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-40U93420MM300772U
I, [2015-01-08T23:03:29.286158 #2104]  INFO -- : Completed 403 Forbidden in 36984ms (ActiveRecord: 290.0ms)
D, [2015-01-08T23:04:07.185325 #2104] DEBUG -- : 
D, [2015-01-08T23:04:07.203326 #2104] DEBUG -- : 
I, [2015-01-08T23:04:07.290331 #2104]  INFO -- : Started GET "/orders/76/confirm?paymentId=PAY-07201246T2784493LKSXQZOY&token=EC-40U93420MM300772U&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-08 23:04:07 +0000
I, [2015-01-08T23:04:07.389337 #2104]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-08T23:04:07.455341 #2104]  INFO -- :   Parameters: {"paymentId"=>"PAY-07201246T2784493LKSXQZOY", "token"=>"EC-40U93420MM300772U", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"76"}
D, [2015-01-08T23:04:07.521345 #2104] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-08T23:04:07.584348 #2104] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-08T23:04:07.659352 #2104] DEBUG -- :   [1m[36mOrder Load (3.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "76"]]
I, [2015-01-08T23:04:21.398138 #2104]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-07201246T2784493LKSXQZOY
I, [2015-01-08T23:04:22.381195 #2104]  INFO -- : Response[200]: OK, Duration: 0.955s
D, [2015-01-08T23:04:48.411683 #2104] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-08T23:04:48.580693 #2104] DEBUG -- :   [1m[36mSQL (6.0ms)[0m  [1mUPDATE "orders" SET "name" = ?, "email" = ?, "address" = ?, "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 76[0m  [["name", "Test Buyer"], ["email", "simon.king65-buyer@gmail.com"], ["address", "1 Main Terrace"], ["shipping_address1", "1 Main Terrace"], ["updated_at", Thu, 08 Jan 2015 23:04:48 UTC +00:00]]
D, [2015-01-08T23:04:48.739702 #2104] DEBUG -- :   [1m[35m (119.0ms)[0m  commit transaction
I, [2015-01-08T23:04:48.912712 #2104]  INFO -- :   Rendered orders/_form.html.erb (101.0ms)
I, [2015-01-08T23:04:48.977716 #2104]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (161.0ms)
I, [2015-01-08T23:04:49.155726 #2104]  INFO -- : Completed 200 OK in 41650ms (Views: 361.0ms | ActiveRecord: 133.0ms)
D, [2015-01-08T23:04:49.517747 #2104] DEBUG -- : 
D, [2015-01-08T23:04:49.535748 #2104] DEBUG -- : 
I, [2015-01-08T23:04:49.576750 #2104]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-08 23:04:49 +0000
D, [2015-01-08T23:04:49.669755 #2104] DEBUG -- : 
D, [2015-01-08T23:04:49.690757 #2104] DEBUG -- : 
I, [2015-01-08T23:04:49.744760 #2104]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-08 23:04:49 +0000
D, [2015-01-08T23:04:49.846765 #2104] DEBUG -- : 
D, [2015-01-08T23:04:49.884768 #2104] DEBUG -- : 
I, [2015-01-08T23:04:49.938771 #2104]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-08 23:04:49 +0000
D, [2015-01-08T23:04:50.016775 #2104] DEBUG -- : 
D, [2015-01-08T23:04:50.036776 #2104] DEBUG -- : 
I, [2015-01-08T23:04:50.085779 #2104]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-08 23:04:50 +0000
D, [2015-01-08T23:04:50.155783 #2104] DEBUG -- : 
D, [2015-01-08T23:04:50.180785 #2104] DEBUG -- : 
I, [2015-01-08T23:04:50.225787 #2104]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-08 23:04:50 +0000
D, [2015-01-08T23:04:50.295791 #2104] DEBUG -- : 
D, [2015-01-08T23:04:50.316792 #2104] DEBUG -- : 
I, [2015-01-08T23:04:50.364795 #2104]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-08 23:04:50 +0000
D, [2015-01-08T23:04:50.437799 #2104] DEBUG -- : 
D, [2015-01-08T23:04:50.455800 #2104] DEBUG -- : 
I, [2015-01-08T23:04:50.506803 #2104]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-08 23:04:50 +0000
D, [2015-01-08T23:04:50.576807 #2104] DEBUG -- : 
D, [2015-01-08T23:04:50.593808 #2104] DEBUG -- : 
I, [2015-01-08T23:04:50.640811 #2104]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-08 23:04:50 +0000
D, [2015-01-08T23:04:50.718815 #2104] DEBUG -- : 
D, [2015-01-08T23:04:50.734816 #2104] DEBUG -- : 
I, [2015-01-08T23:04:50.776819 #2104]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-08 23:04:50 +0000
D, [2015-01-08T23:04:50.855823 #2104] DEBUG -- : 
D, [2015-01-08T23:04:50.870824 #2104] DEBUG -- : 
I, [2015-01-08T23:04:50.910826 #2104]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-08 23:04:50 +0000
D, [2015-01-08T23:04:51.011832 #2104] DEBUG -- : 
D, [2015-01-08T23:04:51.028833 #2104] DEBUG -- : 
I, [2015-01-08T23:04:51.070835 #2104]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-08 23:04:51 +0000
D, [2015-01-08T23:04:51.160841 #2104] DEBUG -- : 
D, [2015-01-08T23:04:51.176842 #2104] DEBUG -- : 
I, [2015-01-08T23:04:51.213844 #2104]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-08 23:04:51 +0000
D, [2015-01-08T23:04:51.286848 #2104] DEBUG -- : 
D, [2015-01-08T23:04:51.304849 #2104] DEBUG -- : 
I, [2015-01-08T23:04:51.348851 #2104]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-08 23:04:51 +0000
D, [2015-01-08T23:04:51.416855 #2104] DEBUG -- : 
D, [2015-01-08T23:04:51.437856 #2104] DEBUG -- : 
I, [2015-01-08T23:04:51.471858 #2104]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-08 23:04:51 +0000
D, [2015-01-08T23:04:51.549863 #2104] DEBUG -- : 
D, [2015-01-08T23:04:51.566864 #2104] DEBUG -- : 
I, [2015-01-08T23:04:51.611866 #2104]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-08 23:04:51 +0000
D, [2015-01-08T23:04:51.695871 #2104] DEBUG -- : 
D, [2015-01-08T23:04:51.709872 #2104] DEBUG -- : 
I, [2015-01-08T23:04:51.746874 #2104]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-08 23:04:51 +0000
D, [2015-01-08T23:04:51.838879 #2104] DEBUG -- : 
D, [2015-01-08T23:04:51.868881 #2104] DEBUG -- : 
I, [2015-01-08T23:04:51.914884 #2104]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-08 23:04:51 +0000
D, [2015-01-08T23:04:51.986888 #2104] DEBUG -- : 
D, [2015-01-08T23:04:52.006889 #2104] DEBUG -- : 
I, [2015-01-08T23:04:52.046891 #2104]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-08 23:04:52 +0000
D, [2015-01-08T23:04:52.118895 #2104] DEBUG -- : 
D, [2015-01-08T23:04:52.139897 #2104] DEBUG -- : 
I, [2015-01-08T23:04:52.186899 #2104]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-08 23:04:52 +0000
D, [2015-01-08T23:04:52.263904 #2104] DEBUG -- : 
D, [2015-01-08T23:04:52.282905 #2104] DEBUG -- : 
I, [2015-01-08T23:04:52.325907 #2104]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-08 23:04:52 +0000
D, [2015-01-08T23:04:52.398911 #2104] DEBUG -- : 
D, [2015-01-08T23:04:52.420913 #2104] DEBUG -- : 
I, [2015-01-08T23:04:52.462915 #2104]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-08 23:04:52 +0000
D, [2015-01-08T23:04:52.549920 #2104] DEBUG -- : 
D, [2015-01-08T23:04:52.565921 #2104] DEBUG -- : 
I, [2015-01-08T23:04:52.605923 #2104]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-08 23:04:52 +0000
D, [2015-01-08T23:04:52.672927 #2104] DEBUG -- : 
D, [2015-01-08T23:04:52.691928 #2104] DEBUG -- : 
I, [2015-01-08T23:04:52.734931 #2104]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-08 23:04:52 +0000
D, [2015-01-08T23:04:52.805935 #2104] DEBUG -- : 
D, [2015-01-08T23:04:52.822936 #2104] DEBUG -- : 
I, [2015-01-08T23:04:52.867938 #2104]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-08 23:04:52 +0000
D, [2015-01-08T23:04:52.939942 #2104] DEBUG -- : 
D, [2015-01-08T23:04:52.953943 #2104] DEBUG -- : 
I, [2015-01-08T23:04:53.000946 #2104]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-08 23:04:52 +0000
D, [2015-01-08T23:04:53.071950 #2104] DEBUG -- : 
D, [2015-01-08T23:04:53.086951 #2104] DEBUG -- : 
I, [2015-01-08T23:04:53.125953 #2104]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-08 23:04:53 +0000
D, [2015-01-08T23:04:53.202957 #2104] DEBUG -- : 
D, [2015-01-08T23:04:53.217958 #2104] DEBUG -- : 
I, [2015-01-08T23:04:53.258961 #2104]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-08 23:04:53 +0000
D, [2015-01-08T23:04:58.397255 #2104] DEBUG -- : 
D, [2015-01-08T23:04:58.419256 #2104] DEBUG -- : 
I, [2015-01-08T23:04:58.499260 #2104]  INFO -- : Started POST "/orders/76/execute/76/2VZ7YQDDDPPC4/PAY-07201246T2784493LKSXQZOY" for 127.0.0.1 at 2015-01-08 23:04:58 +0000
I, [2015-01-08T23:04:58.605266 #2104]  INFO -- : Processing by OrdersController#execute as HTML
I, [2015-01-08T23:04:58.706272 #2104]  INFO -- :   Parameters: {"authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order_id"=>"76", "payer_id"=>"2VZ7YQDDDPPC4", "payment_id"=>"PAY-07201246T2784493LKSXQZOY"}
D, [2015-01-08T23:04:58.798277 #2104] DEBUG -- :   [1m[36mOrder Load (3.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "76"]]
I, [2015-01-08T23:05:04.458601 #2104]  INFO -- : Completed 500 Internal Server Error in 5714ms
F, [2015-01-08T23:05:04.548606 #2104] FATAL -- : 
ArgumentError (id required):
  app/models/order.rb:64:in `execute'
  app/controllers/orders_controller.rb:78:in `execute'


I, [2015-01-08T23:05:04.974631 #2104]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (17.0ms)
I, [2015-01-08T23:05:05.131640 #2104]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (23.0ms)
I, [2015-01-08T23:05:05.295649 #2104]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (14.0ms)
I, [2015-01-08T23:05:05.372653 #2104]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (470.0ms)
D, [2015-01-08T23:07:28.388834 #2104] DEBUG -- : 
D, [2015-01-08T23:07:28.410835 #2104] DEBUG -- : 
I, [2015-01-08T23:07:28.492839 #2104]  INFO -- : Started POST "/orders/76/execute/76/2VZ7YQDDDPPC4/PAY-07201246T2784493LKSXQZOY" for 127.0.0.1 at 2015-01-08 23:07:28 +0000
I, [2015-01-08T23:07:31.390005 #2104]  INFO -- : Processing by OrdersController#execute as HTML
I, [2015-01-08T23:07:31.467010 #2104]  INFO -- :   Parameters: {"authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order_id"=>"76", "payer_id"=>"2VZ7YQDDDPPC4", "payment_id"=>"PAY-07201246T2784493LKSXQZOY"}
D, [2015-01-08T23:07:31.630019 #2104] DEBUG -- :   [1m[35mOrder Load (3.0ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "76"]]
I, [2015-01-08T23:08:12.856377 #2104]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-07201246T2784493LKSXQZOY
I, [2015-01-08T23:08:14.018443 #2104]  INFO -- : Response[200]: OK, Duration: 1.132s
I, [2015-01-08T23:08:14.069446 #2104]  INFO -- : PayPal-Request-Id: 1d0d07f2-a623-44e9-9b6c-32af817b634b
I, [2015-01-08T23:08:14.122449 #2104]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-07201246T2784493LKSXQZOY/execute
I, [2015-01-08T23:08:16.565589 #2104]  INFO -- : Response[200]: OK, Duration: 2.415s
D, [2015-01-08T23:08:16.615592 #2104] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-08T23:08:16.682596 #2104] DEBUG -- :   [1m[35m (1.0ms)[0m  rollback transaction
I, [2015-01-08T23:08:16.738599 #2104]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-07201246T2784493LKSXQZOY
I, [2015-01-08T23:08:17.957669 #2104]  INFO -- : Response[200]: OK, Duration: 1.183s
I, [2015-01-08T23:08:18.010672 #2104]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-08T23:08:18.050674 #2104]  INFO -- : Completed 302 Found in 46545ms (ActiveRecord: 14.0ms)
D, [2015-01-08T23:08:18.125678 #2104] DEBUG -- : 
D, [2015-01-08T23:08:18.148680 #2104] DEBUG -- : 
I, [2015-01-08T23:08:18.185682 #2104]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-08 23:08:18 +0000
I, [2015-01-08T23:08:18.323690 #2104]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-08T23:08:18.450697 #2104] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-08T23:08:18.659709 #2104] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-08T23:08:18.864721 #2104]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (3.0ms)
I, [2015-01-08T23:08:18.913723 #2104]  INFO -- :   Rendered store/index.html.erb within layouts/application (280.0ms)
D, [2015-01-08T23:08:19.166738 #2104] DEBUG -- :   [1m[36mLineItem Exists (2.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-08T23:08:19.253743 #2104] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-08T23:08:19.289745 #2104]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-08T23:08:19.386750 #2104]  INFO -- :   Rendered carts/_cart.html.erb (170.0ms)
I, [2015-01-08T23:08:19.451754 #2104]  INFO -- : Completed 200 OK in 1083ms (Views: 823.0ms | ActiveRecord: 24.0ms)
D, [2015-01-08T23:08:19.748771 #2104] DEBUG -- : 
D, [2015-01-08T23:08:19.780773 #2104] DEBUG -- : 
I, [2015-01-08T23:08:19.824776 #2104]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-08 23:08:19 +0000
D, [2015-01-08T23:08:19.917781 #2104] DEBUG -- : 
D, [2015-01-08T23:08:19.938782 #2104] DEBUG -- : 
I, [2015-01-08T23:08:19.992785 #2104]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-08 23:08:19 +0000
D, [2015-01-08T23:08:20.086791 #2104] DEBUG -- : 
D, [2015-01-08T23:08:20.123793 #2104] DEBUG -- : 
I, [2015-01-08T23:08:20.176796 #2104]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-08 23:08:20 +0000
D, [2015-01-08T23:08:20.266801 #2104] DEBUG -- : 
D, [2015-01-08T23:08:20.290802 #2104] DEBUG -- : 
I, [2015-01-08T23:08:20.329804 #2104]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-08 23:08:20 +0000
D, [2015-01-08T23:08:20.425810 #2104] DEBUG -- : 
D, [2015-01-08T23:08:20.447811 #2104] DEBUG -- : 
I, [2015-01-08T23:08:20.490814 #2104]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-08 23:08:20 +0000
D, [2015-01-08T23:08:20.556817 #2104] DEBUG -- : 
D, [2015-01-08T23:08:20.581819 #2104] DEBUG -- : 
I, [2015-01-08T23:08:20.627821 #2104]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-08 23:08:20 +0000
D, [2015-01-08T23:08:20.696825 #2104] DEBUG -- : 
D, [2015-01-08T23:08:20.720827 #2104] DEBUG -- : 
I, [2015-01-08T23:08:20.766829 #2104]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-08 23:08:20 +0000
D, [2015-01-08T23:08:20.836833 #2104] DEBUG -- : 
D, [2015-01-08T23:08:20.857835 #2104] DEBUG -- : 
I, [2015-01-08T23:08:20.901837 #2104]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-08 23:08:20 +0000
D, [2015-01-08T23:08:20.966841 #2104] DEBUG -- : 
D, [2015-01-08T23:08:20.986842 #2104] DEBUG -- : 
I, [2015-01-08T23:08:21.030845 #2104]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-08 23:08:20 +0000
D, [2015-01-08T23:08:21.126850 #2104] DEBUG -- : 
D, [2015-01-08T23:08:21.141851 #2104] DEBUG -- : 
I, [2015-01-08T23:08:21.180853 #2104]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-08 23:08:21 +0000
D, [2015-01-08T23:08:21.260858 #2104] DEBUG -- : 
D, [2015-01-08T23:08:21.278859 #2104] DEBUG -- : 
I, [2015-01-08T23:08:21.320861 #2104]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-08 23:08:21 +0000
D, [2015-01-08T23:08:21.397865 #2104] DEBUG -- : 
D, [2015-01-08T23:08:21.417867 #2104] DEBUG -- : 
I, [2015-01-08T23:08:21.462869 #2104]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-08 23:08:21 +0000
D, [2015-01-08T23:08:21.545874 #2104] DEBUG -- : 
D, [2015-01-08T23:08:21.561875 #2104] DEBUG -- : 
I, [2015-01-08T23:08:21.605877 #2104]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-08 23:08:21 +0000
D, [2015-01-08T23:08:21.687882 #2104] DEBUG -- : 
D, [2015-01-08T23:08:21.700883 #2104] DEBUG -- : 
I, [2015-01-08T23:08:21.742885 #2104]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-08 23:08:21 +0000
D, [2015-01-08T23:08:21.825890 #2104] DEBUG -- : 
D, [2015-01-08T23:08:21.841891 #2104] DEBUG -- : 
I, [2015-01-08T23:08:21.891894 #2104]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-08 23:08:21 +0000
D, [2015-01-08T23:08:21.971898 #2104] DEBUG -- : 
D, [2015-01-08T23:08:21.989899 #2104] DEBUG -- : 
I, [2015-01-08T23:08:22.038902 #2104]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-08 23:08:21 +0000
D, [2015-01-08T23:08:22.114907 #2104] DEBUG -- : 
D, [2015-01-08T23:08:22.131907 #2104] DEBUG -- : 
I, [2015-01-08T23:08:22.189911 #2104]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-08 23:08:22 +0000
D, [2015-01-08T23:08:22.264915 #2104] DEBUG -- : 
D, [2015-01-08T23:08:22.282916 #2104] DEBUG -- : 
I, [2015-01-08T23:08:22.321918 #2104]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-08 23:08:22 +0000
D, [2015-01-08T23:08:22.388922 #2104] DEBUG -- : 
D, [2015-01-08T23:08:22.413924 #2104] DEBUG -- : 
I, [2015-01-08T23:08:22.459926 #2104]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-08 23:08:22 +0000
D, [2015-01-08T23:08:22.539931 #2104] DEBUG -- : 
D, [2015-01-08T23:08:22.553932 #2104] DEBUG -- : 
I, [2015-01-08T23:08:22.588934 #2104]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-08 23:08:22 +0000
D, [2015-01-08T23:08:22.664938 #2104] DEBUG -- : 
D, [2015-01-08T23:08:22.680939 #2104] DEBUG -- : 
I, [2015-01-08T23:08:22.728942 #2104]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-08 23:08:22 +0000
D, [2015-01-08T23:08:22.819947 #2104] DEBUG -- : 
D, [2015-01-08T23:08:22.839948 #2104] DEBUG -- : 
I, [2015-01-08T23:08:22.881950 #2104]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-08 23:08:22 +0000
D, [2015-01-08T23:08:22.973956 #2104] DEBUG -- : 
D, [2015-01-08T23:08:22.990957 #2104] DEBUG -- : 
I, [2015-01-08T23:08:23.038959 #2104]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-08 23:08:22 +0000
D, [2015-01-08T23:08:23.108963 #2104] DEBUG -- : 
D, [2015-01-08T23:08:23.122964 #2104] DEBUG -- : 
I, [2015-01-08T23:08:23.162966 #2104]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-08 23:08:23 +0000
D, [2015-01-08T23:08:23.229970 #2104] DEBUG -- : 
D, [2015-01-08T23:08:23.245971 #2104] DEBUG -- : 
I, [2015-01-08T23:08:23.294974 #2104]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-08 23:08:23 +0000
D, [2015-01-08T23:08:23.363978 #2104] DEBUG -- : 
D, [2015-01-08T23:08:23.381979 #2104] DEBUG -- : 
I, [2015-01-08T23:08:23.427982 #2104]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-08 23:08:23 +0000
D, [2015-01-08T23:08:23.508986 #2104] DEBUG -- : 
D, [2015-01-08T23:08:23.550989 #2104] DEBUG -- : 
I, [2015-01-08T23:08:23.593991 #2104]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-08 23:08:23 +0000
D, [2015-01-08T23:08:23.665995 #2104] DEBUG -- : 
D, [2015-01-08T23:08:23.678996 #2104] DEBUG -- : 
I, [2015-01-08T23:08:23.716998 #2104]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-08 23:08:23 +0000
D, [2015-01-08T23:08:23.784002 #2104] DEBUG -- : 
D, [2015-01-08T23:08:23.806003 #2104] DEBUG -- : 
I, [2015-01-08T23:08:23.850006 #2104]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-08 23:08:23 +0000
D, [2015-01-08T23:08:28.281259 #2104] DEBUG -- : 
D, [2015-01-08T23:08:28.304261 #2104] DEBUG -- : 
I, [2015-01-08T23:08:28.367264 #2104]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-08 23:08:28 +0000
I, [2015-01-08T23:08:28.516273 #2104]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-08T23:08:28.584277 #2104]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-08T23:08:28.679282 #2104] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-08T23:08:28.762287 #2104] DEBUG -- :   [1m[35mProduct Load (3.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-08T23:08:28.889294 #2104] DEBUG -- :   [1m[36mLineItem Load (3.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-08T23:08:29.197312 #2104] DEBUG -- :   [1m[35mProduct Load (3.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-08T23:08:29.252315 #2104] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-08T23:08:29.505329 #2104] DEBUG -- :   [1m[35mSQL (10.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 08 Jan 2015 23:08:29 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:5f043f8,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 08 Jan 2015 23:08:29 UTC +00:00]]
D, [2015-01-08T23:08:29.901352 #2104] DEBUG -- :   [1m[36m (347.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-08T23:08:30.038360 #2104] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-08T23:08:30.135365 #2104]  INFO -- :   Rendered line_items/_line_item.html.erb (19.0ms)
I, [2015-01-08T23:08:30.218370 #2104]  INFO -- :   Rendered carts/_cart.html.erb (236.0ms)
I, [2015-01-08T23:08:30.270373 #2104]  INFO -- :   Rendered line_items/create.js.erb (289.0ms)
I, [2015-01-08T23:08:30.323376 #2104]  INFO -- : Completed 200 OK in 1689ms (Views: 364.0ms | ActiveRecord: 372.0ms)
D, [2015-01-08T23:08:30.368379 #2104] DEBUG -- : 
D, [2015-01-08T23:08:30.385380 #2104] DEBUG -- : 
I, [2015-01-08T23:08:30.428382 #2104]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-08 23:08:30 +0000
I, [2015-01-08T23:08:30.550389 #2104]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-08T23:08:30.615393 #2104]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-08T23:08:30.702398 #2104] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-08T23:08:30.780402 #2104] DEBUG -- :   [1m[35mProduct Load (3.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-08T23:08:30.914410 #2104] DEBUG -- :   [1m[36mLineItem Load (3.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-08T23:08:31.020416 #2104] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-08T23:08:31.071419 #2104] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-08T23:08:31.278431 #2104] DEBUG -- :   [1m[35mSQL (11.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 08 Jan 2015 23:08:31 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:97ca8b8,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 08 Jan 2015 23:08:31 UTC +00:00]]
D, [2015-01-08T23:08:31.482442 #2104] DEBUG -- :   [1m[36m (155.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-08T23:08:31.597449 #2104] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-08T23:08:31.722456 #2104] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-08T23:08:31.794460 #2104]  INFO -- :   Rendered line_items/_line_item.html.erb (128.0ms)
I, [2015-01-08T23:08:31.873465 #2104]  INFO -- :   Rendered carts/_cart.html.erb (314.0ms)
I, [2015-01-08T23:08:31.913467 #2104]  INFO -- :   Rendered line_items/create.js.erb (366.0ms)
I, [2015-01-08T23:08:31.959470 #2104]  INFO -- : Completed 200 OK in 1299ms (Views: 423.0ms | ActiveRecord: 183.0ms)
D, [2015-01-08T23:08:34.278602 #2104] DEBUG -- : 
D, [2015-01-08T23:08:34.299603 #2104] DEBUG -- : 
I, [2015-01-08T23:08:34.348606 #2104]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-08 23:08:34 +0000
I, [2015-01-08T23:08:34.478614 #2104]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-08T23:08:34.600621 #2104] DEBUG -- :   [1m[35mUser Load (3.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-08T23:08:34.790632 #2104] DEBUG -- :   [1m[36mUser Load (3.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-08T23:08:34.863636 #2104] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-08T23:08:34.959641 #2104] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-08T23:08:35.089649 #2104]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-08T23:08:39.246886 #2104] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-08T23:08:39.383894 #2104] DEBUG -- :   [1m[36mSQL (8.0ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 08 Jan 2015 23:08:39 UTC +00:00], ["updated_at", Thu, 08 Jan 2015 23:08:39 UTC +00:00]]
D, [2015-01-08T23:08:39.534903 #2104] DEBUG -- :   [1m[35mSQL (5.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 101  [["cart_id", nil], ["order_id", 77], ["updated_at", Thu, 08 Jan 2015 23:08:39 UTC +00:00]]
D, [2015-01-08T23:08:39.681911 #2104] DEBUG -- :   [1m[36mSQL (3.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 102[0m  [["cart_id", nil], ["order_id", 77], ["updated_at", Thu, 08 Jan 2015 23:08:39 UTC +00:00]]
I, [2015-01-08T23:08:39.717913 #2104]  INFO -- : about to @payment.create
D, [2015-01-08T23:08:40.984986 #2104] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-08T23:08:41.066991 #2104] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
I, [2015-01-08T23:08:42.617079 #2104]  INFO -- : in order=
I, [2015-01-08T23:08:45.141224 #2104]  INFO -- : in payment.create
I, [2015-01-08T23:08:45.325234 #2104]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Camo Print Tee", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Camo Print Tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"18.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/77/confirm", "cancel_url"=>"http://localhost:3000/orders/77/cancel"}}
I, [2015-01-08T23:08:45.822262 #2104]  INFO -- : #<ActiveModel::Errors:0x00000008c679a8 @base=#<Payment:0x000000048d7080 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000048d59d8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000097c2028 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000097c1808 @error=nil, @total="38.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000097bb188 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000097b3a00 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x000000097aa9c8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000092d27e8 @error=nil, @return_url="http://localhost:3000/orders/77/confirm", @cancel_url="http://localhost:3000/orders/77/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008c679a8 ...>>, @messages={}>
I, [2015-01-08T23:08:45.848264 #2104]  INFO -- : got past invalid
I, [2015-01-08T23:08:45.950270 #2104]  INFO -- : PayPal-Request-Id: ffbae019-33f2-4cab-9c73-7d2253bd7826
I, [2015-01-08T23:08:45.986272 #2104]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-08T23:08:47.266345 #2104]  INFO -- : Response[201]: Created, Duration: 1.237s
I, [2015-01-08T23:08:47.308347 #2104]  INFO -- : back from super
I, [2015-01-08T23:08:47.833378 #2104]  INFO -- : {"id"=>"PAY-9F9700443D525714NKSXQ4AA", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98", "details"=>{"subtotal"=>"38.98"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Camo Print Tee", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Camo Print Tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"18.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/77/confirm", "cancel_url"=>"http://localhost:3000/orders/77/cancel"}, "create_time"=>"2015-01-08T23:08:48Z", "update_time"=>"2015-01-08T23:08:48Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-9F9700443D525714NKSXQ4AA", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-17357428Y4624812U", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-9F9700443D525714NKSXQ4AA/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-08T23:08:48.052390 #2104] DEBUG -- :   [1m[35mSQL (7.0ms)[0m  UPDATE "orders" SET "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ?, "pay_type" = ? WHERE "orders"."id" = 77  [["created_at", Thu, 08 Jan 2015 23:08:39 UTC +00:00], ["updated_at", Thu, 08 Jan 2015 23:08:39 UTC +00:00], ["id", 77], ["payment_id", "PAY-9F9700443D525714NKSXQ4AA"], ["state", "created"], ["pay_type", "paypal"]]
D, [2015-01-08T23:08:48.128394 #2104] DEBUG -- :   [1m[36mSQL (1.0ms)[0m  [1mUPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 77[0m
I, [2015-01-08T23:08:48.162396 #2104]  INFO -- : @payment save just done
I, [2015-01-08T23:08:49.307462 #2104]  INFO -- : #<Payment:0x000000048d7080 @error=nil, @id="PAY-9F9700443D525714NKSXQ4AA", @create_time="2015-01-08T23:08:48Z", @update_time="2015-01-08T23:08:48Z", @state="created", @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000089cc4a0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000089b7a50 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000089b7118 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000089b65b0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000089b5fc0 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000089b5048 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000089b41c0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000089af440 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x000000089ad9b0 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @links=[#<PayPal::SDK::REST::DataTypes::Links:0x0000000899f590 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9F9700443D525714NKSXQ4AA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000899e050 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-17357428Y4624812U", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000899d038 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9F9700443D525714NKSXQ4AA/execute", @rel="execute", @method="POST">], @request_id="ffbae019-33f2-4cab-9c73-7d2253bd7826", @header={}, @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000092d27e8 @error=nil, @return_url="http://localhost:3000/orders/77/confirm", @cancel_url="http://localhost:3000/orders/77/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008c679a8 @base=#<Payment:0x000000048d7080 ...>, @messages={}>>
I, [2015-01-08T23:08:50.454527 #2104]  INFO -- : #<Payment:0x000000048d7080 @error=nil, @id="PAY-9F9700443D525714NKSXQ4AA", @create_time="2015-01-08T23:08:48Z", @update_time="2015-01-08T23:08:48Z", @state="created", @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000089cc4a0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000089b7a50 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000089b7118 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000089b65b0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000089b5fc0 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000089b5048 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000089b41c0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000089af440 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x000000089ad9b0 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @links=[#<PayPal::SDK::REST::DataTypes::Links:0x0000000899f590 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9F9700443D525714NKSXQ4AA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000899e050 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-17357428Y4624812U", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000899d038 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9F9700443D525714NKSXQ4AA/execute", @rel="execute", @method="POST">], @request_id="ffbae019-33f2-4cab-9c73-7d2253bd7826", @header={}, @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000092d27e8 @error=nil, @return_url="http://localhost:3000/orders/77/confirm", @cancel_url="http://localhost:3000/orders/77/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008c679a8 @base=#<Payment:0x000000048d7080 ...>, @messages={}>>
D, [2015-01-08T23:08:50.608536 #2104] DEBUG -- :   [1m[35m (113.0ms)[0m  commit transaction
D, [2015-01-08T23:08:50.840550 #2104] DEBUG -- :   [1m[36mSQL (152.0ms)[0m  [1mUPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 77[0m
I, [2015-01-08T23:08:50.866551 #2104]  INFO -- : about to approve url
I, [2015-01-08T23:08:52.006616 #2104]  INFO -- : #<Payment:0x000000048d7080 @error=nil, @id="PAY-9F9700443D525714NKSXQ4AA", @create_time="2015-01-08T23:08:48Z", @update_time="2015-01-08T23:08:48Z", @state="created", @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000089cc4a0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000089b7a50 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000089b7118 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000089b65b0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000089b5fc0 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000089b5048 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000089b41c0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000089af440 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x000000089ad9b0 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @links=[#<PayPal::SDK::REST::DataTypes::Links:0x0000000899f590 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9F9700443D525714NKSXQ4AA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000899e050 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-17357428Y4624812U", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000899d038 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9F9700443D525714NKSXQ4AA/execute", @rel="execute", @method="POST">], @request_id="ffbae019-33f2-4cab-9c73-7d2253bd7826", @header={}, @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000092d27e8 @error=nil, @return_url="http://localhost:3000/orders/77/confirm", @cancel_url="http://localhost:3000/orders/77/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008c679a8 @base=#<Payment:0x000000048d7080 ...>, @messages={}>>
I, [2015-01-08T23:08:53.152682 #2104]  INFO -- : #<Payment:0x000000048d7080 @error=nil, @id="PAY-9F9700443D525714NKSXQ4AA", @create_time="2015-01-08T23:08:48Z", @update_time="2015-01-08T23:08:48Z", @state="created", @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000089cc4a0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000089b7a50 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000089b7118 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000089b65b0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000089b5fc0 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000089b5048 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000089b41c0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000089af440 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x000000089ad9b0 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @links=[#<PayPal::SDK::REST::DataTypes::Links:0x0000000899f590 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9F9700443D525714NKSXQ4AA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000899e050 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-17357428Y4624812U", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000899d038 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9F9700443D525714NKSXQ4AA/execute", @rel="execute", @method="POST">], @request_id="ffbae019-33f2-4cab-9c73-7d2253bd7826", @header={}, @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000092d27e8 @error=nil, @return_url="http://localhost:3000/orders/77/confirm", @cancel_url="http://localhost:3000/orders/77/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008c679a8 @base=#<Payment:0x000000048d7080 ...>, @messages={}>>
I, [2015-01-08T23:08:53.220686 #2104]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-17357428Y4624812U
I, [2015-01-08T23:08:54.331749 #2104]  INFO -- : #<Payment:0x000000048d7080 @error=nil, @id="PAY-9F9700443D525714NKSXQ4AA", @create_time="2015-01-08T23:08:48Z", @update_time="2015-01-08T23:08:48Z", @state="created", @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000089cc4a0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000089b7a50 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000089b7118 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000089b65b0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000089b5fc0 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000089b5048 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000089b41c0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000089af440 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x000000089ad9b0 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @links=[#<PayPal::SDK::REST::DataTypes::Links:0x0000000899f590 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9F9700443D525714NKSXQ4AA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000899e050 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-17357428Y4624812U", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000899d038 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9F9700443D525714NKSXQ4AA/execute", @rel="execute", @method="POST">], @request_id="ffbae019-33f2-4cab-9c73-7d2253bd7826", @header={}, @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000092d27e8 @error=nil, @return_url="http://localhost:3000/orders/77/confirm", @cancel_url="http://localhost:3000/orders/77/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000008c679a8 @base=#<Payment:0x000000048d7080 ...>, @messages={}>>
I, [2015-01-08T23:08:54.408754 #2104]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-17357428Y4624812U
I, [2015-01-08T23:08:54.463757 #2104]  INFO -- : Completed 403 Forbidden in 19935ms (ActiveRecord: 309.0ms)
D, [2015-01-08T23:09:25.344523 #2104] DEBUG -- : 
D, [2015-01-08T23:09:25.362524 #2104] DEBUG -- : 
I, [2015-01-08T23:09:25.438528 #2104]  INFO -- : Started GET "/orders/77/confirm?paymentId=PAY-9F9700443D525714NKSXQ4AA&token=EC-17357428Y4624812U&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-08 23:09:25 +0000
I, [2015-01-08T23:09:25.533534 #2104]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-08T23:09:25.590537 #2104]  INFO -- :   Parameters: {"paymentId"=>"PAY-9F9700443D525714NKSXQ4AA", "token"=>"EC-17357428Y4624812U", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"77"}
D, [2015-01-08T23:09:25.650541 #2104] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-08T23:09:25.708544 #2104] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-08T23:09:25.768547 #2104] DEBUG -- :   [1m[35mOrder Load (2.0ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "77"]]
I, [2015-01-08T23:09:34.126025 #2104]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-9F9700443D525714NKSXQ4AA
I, [2015-01-08T23:09:35.444101 #2104]  INFO -- : Response[200]: OK, Duration: 1.285s
D, [2015-01-08T23:09:36.694172 #2104] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-08T23:09:36.854181 #2104] DEBUG -- :   [1m[35mSQL (7.0ms)[0m  UPDATE "orders" SET "name" = ?, "email" = ?, "address" = ?, "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 77  [["name", "Test Buyer"], ["email", "simon.king65-buyer@gmail.com"], ["address", "1 Main Terrace"], ["shipping_address1", "1 Main Terrace"], ["updated_at", Thu, 08 Jan 2015 23:09:36 UTC +00:00]]
D, [2015-01-08T23:09:37.006190 #2104] DEBUG -- :   [1m[36m (118.0ms)[0m  [1mcommit transaction[0m
I, [2015-01-08T23:09:37.176200 #2104]  INFO -- :   Rendered orders/_form.html.erb (105.0ms)
I, [2015-01-08T23:09:37.229203 #2104]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (158.0ms)
I, [2015-01-08T23:09:37.426214 #2104]  INFO -- : Completed 200 OK in 11784ms (Views: 365.0ms | ActiveRecord: 132.0ms)
D, [2015-01-08T23:09:37.787235 #2104] DEBUG -- : 
D, [2015-01-08T23:09:37.803236 #2104] DEBUG -- : 
I, [2015-01-08T23:09:37.846238 #2104]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-08 23:09:37 +0000
D, [2015-01-08T23:09:37.940243 #2104] DEBUG -- : 
D, [2015-01-08T23:09:37.956244 #2104] DEBUG -- : 
I, [2015-01-08T23:09:38.010247 #2104]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-08 23:09:37 +0000
D, [2015-01-08T23:09:38.099253 #2104] DEBUG -- : 
D, [2015-01-08T23:09:38.142255 #2104] DEBUG -- : 
I, [2015-01-08T23:09:38.197258 #2104]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-08 23:09:38 +0000
D, [2015-01-08T23:09:38.269262 #2104] DEBUG -- : 
D, [2015-01-08T23:09:38.293264 #2104] DEBUG -- : 
I, [2015-01-08T23:09:38.356267 #2104]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-08 23:09:38 +0000
D, [2015-01-08T23:09:38.431272 #2104] DEBUG -- : 
D, [2015-01-08T23:09:38.453273 #2104] DEBUG -- : 
I, [2015-01-08T23:09:38.509276 #2104]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-08 23:09:38 +0000
D, [2015-01-08T23:09:38.586280 #2104] DEBUG -- : 
D, [2015-01-08T23:09:38.621282 #2104] DEBUG -- : 
I, [2015-01-08T23:09:38.684286 #2104]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-08 23:09:38 +0000
D, [2015-01-08T23:09:38.754290 #2104] DEBUG -- : 
D, [2015-01-08T23:09:38.777291 #2104] DEBUG -- : 
I, [2015-01-08T23:09:38.833295 #2104]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-08 23:09:38 +0000
D, [2015-01-08T23:09:38.906299 #2104] DEBUG -- : 
D, [2015-01-08T23:09:38.923300 #2104] DEBUG -- : 
I, [2015-01-08T23:09:38.972302 #2104]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-08 23:09:38 +0000
D, [2015-01-08T23:09:39.046307 #2104] DEBUG -- : 
D, [2015-01-08T23:09:39.074308 #2104] DEBUG -- : 
I, [2015-01-08T23:09:39.135312 #2104]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-08 23:09:39 +0000
D, [2015-01-08T23:09:39.208316 #2104] DEBUG -- : 
D, [2015-01-08T23:09:39.232317 #2104] DEBUG -- : 
I, [2015-01-08T23:09:39.290321 #2104]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-08 23:09:39 +0000
D, [2015-01-08T23:09:39.366325 #2104] DEBUG -- : 
D, [2015-01-08T23:09:39.386326 #2104] DEBUG -- : 
I, [2015-01-08T23:09:39.444329 #2104]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-08 23:09:39 +0000
D, [2015-01-08T23:09:39.518334 #2104] DEBUG -- : 
D, [2015-01-08T23:09:39.543335 #2104] DEBUG -- : 
I, [2015-01-08T23:09:39.604339 #2104]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-08 23:09:39 +0000
D, [2015-01-08T23:09:39.676343 #2104] DEBUG -- : 
D, [2015-01-08T23:09:39.690344 #2104] DEBUG -- : 
I, [2015-01-08T23:09:39.742347 #2104]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-08 23:09:39 +0000
D, [2015-01-08T23:09:39.814351 #2104] DEBUG -- : 
D, [2015-01-08T23:09:39.831352 #2104] DEBUG -- : 
I, [2015-01-08T23:09:39.901356 #2104]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-08 23:09:39 +0000
D, [2015-01-08T23:09:39.973360 #2104] DEBUG -- : 
D, [2015-01-08T23:09:39.994361 #2104] DEBUG -- : 
I, [2015-01-08T23:09:40.046364 #2104]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-08 23:09:39 +0000
D, [2015-01-08T23:09:40.111368 #2104] DEBUG -- : 
D, [2015-01-08T23:09:40.131369 #2104] DEBUG -- : 
I, [2015-01-08T23:09:40.183372 #2104]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-08 23:09:40 +0000
D, [2015-01-08T23:09:40.259376 #2104] DEBUG -- : 
D, [2015-01-08T23:09:40.277377 #2104] DEBUG -- : 
I, [2015-01-08T23:09:40.325380 #2104]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-08 23:09:40 +0000
D, [2015-01-08T23:09:40.397384 #2104] DEBUG -- : 
D, [2015-01-08T23:09:40.413385 #2104] DEBUG -- : 
I, [2015-01-08T23:09:40.459388 #2104]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-08 23:09:40 +0000
D, [2015-01-08T23:09:40.529392 #2104] DEBUG -- : 
D, [2015-01-08T23:09:40.545392 #2104] DEBUG -- : 
I, [2015-01-08T23:09:40.590395 #2104]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-08 23:09:40 +0000
D, [2015-01-08T23:09:40.666399 #2104] DEBUG -- : 
D, [2015-01-08T23:09:40.682400 #2104] DEBUG -- : 
I, [2015-01-08T23:09:40.728403 #2104]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-08 23:09:40 +0000
D, [2015-01-08T23:09:40.802407 #2104] DEBUG -- : 
D, [2015-01-08T23:09:40.820408 #2104] DEBUG -- : 
I, [2015-01-08T23:09:40.869411 #2104]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-08 23:09:40 +0000
D, [2015-01-08T23:09:40.949416 #2104] DEBUG -- : 
D, [2015-01-08T23:09:40.973417 #2104] DEBUG -- : 
I, [2015-01-08T23:09:41.017419 #2104]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-08 23:09:40 +0000
D, [2015-01-08T23:09:41.110425 #2104] DEBUG -- : 
D, [2015-01-08T23:09:41.126426 #2104] DEBUG -- : 
I, [2015-01-08T23:09:41.170428 #2104]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-08 23:09:41 +0000
D, [2015-01-08T23:09:41.239432 #2104] DEBUG -- : 
D, [2015-01-08T23:09:41.256433 #2104] DEBUG -- : 
I, [2015-01-08T23:09:41.296435 #2104]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-08 23:09:41 +0000
D, [2015-01-08T23:09:41.362439 #2104] DEBUG -- : 
D, [2015-01-08T23:09:41.380440 #2104] DEBUG -- : 
I, [2015-01-08T23:09:41.427443 #2104]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-08 23:09:41 +0000
D, [2015-01-08T23:09:41.496447 #2104] DEBUG -- : 
D, [2015-01-08T23:09:41.514448 #2104] DEBUG -- : 
I, [2015-01-08T23:09:41.565451 #2104]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-08 23:09:41 +0000
D, [2015-01-08T23:09:41.639455 #2104] DEBUG -- : 
D, [2015-01-08T23:09:41.655456 #2104] DEBUG -- : 
I, [2015-01-08T23:09:41.696458 #2104]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-08 23:09:41 +0000
D, [2015-01-08T23:09:46.176715 #2104] DEBUG -- : 
D, [2015-01-08T23:09:46.193716 #2104] DEBUG -- : 
I, [2015-01-08T23:09:46.261719 #2104]  INFO -- : Started POST "/orders/77/execute/77/2VZ7YQDDDPPC4/PAY-9F9700443D525714NKSXQ4AA" for 127.0.0.1 at 2015-01-08 23:09:46 +0000
I, [2015-01-08T23:09:46.364725 #2104]  INFO -- : Processing by OrdersController#execute as HTML
I, [2015-01-08T23:09:46.463731 #2104]  INFO -- :   Parameters: {"authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order_id"=>"77", "payer_id"=>"2VZ7YQDDDPPC4", "payment_id"=>"PAY-9F9700443D525714NKSXQ4AA"}
D, [2015-01-08T23:09:46.563737 #2104] DEBUG -- :   [1m[35mOrder Load (2.0ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "77"]]
I, [2015-01-08T23:09:52.837096 #2104]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-9F9700443D525714NKSXQ4AA
I, [2015-01-08T23:09:53.989161 #2104]  INFO -- : Response[200]: OK, Duration: 1.122s
I, [2015-01-08T23:09:54.045165 #2104]  INFO -- : PayPal-Request-Id: a3d97752-d155-4ed9-a4db-f4fbf3ff4d0f
I, [2015-01-08T23:09:54.095167 #2104]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-9F9700443D525714NKSXQ4AA/execute
I, [2015-01-08T23:09:56.240290 #2104]  INFO -- : Response[200]: OK, Duration: 2.116s
D, [2015-01-08T23:09:56.296293 #2104] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-08T23:09:56.359297 #2104] DEBUG -- :   [1m[35m (2.0ms)[0m  rollback transaction
I, [2015-01-08T23:09:56.417300 #2104]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-9F9700443D525714NKSXQ4AA
I, [2015-01-08T23:09:57.642370 #2104]  INFO -- : Response[200]: OK, Duration: 1.185s
I, [2015-01-08T23:09:57.703374 #2104]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-08T23:09:57.751377 #2104]  INFO -- : Completed 302 Found in 11240ms (ActiveRecord: 6.0ms)
D, [2015-01-08T23:09:57.850382 #2104] DEBUG -- : 
D, [2015-01-08T23:09:57.874384 #2104] DEBUG -- : 
I, [2015-01-08T23:09:57.928387 #2104]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-08 23:09:57 +0000
I, [2015-01-08T23:09:58.045393 #2104]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-08T23:09:58.135399 #2104] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-08T23:09:58.251405 #2104] DEBUG -- :   [1m[35mProduct Load (3.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-08T23:09:58.328410 #2104]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (4.0ms)
I, [2015-01-08T23:09:58.377412 #2104]  INFO -- :   Rendered store/index.html.erb within layouts/application (166.0ms)
D, [2015-01-08T23:09:58.641428 #2104] DEBUG -- :   [1m[36mLineItem Exists (2.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-08T23:09:58.743433 #2104] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-08T23:09:58.785436 #2104]  INFO -- :   Rendered collection (1.0ms)
I, [2015-01-08T23:09:58.868440 #2104]  INFO -- :   Rendered carts/_cart.html.erb (175.0ms)
I, [2015-01-08T23:09:58.948445 #2104]  INFO -- : Completed 200 OK in 851ms (Views: 745.0ms | ActiveRecord: 9.0ms)
D, [2015-01-08T23:09:59.322466 #2104] DEBUG -- : 
D, [2015-01-08T23:09:59.350468 #2104] DEBUG -- : 
I, [2015-01-08T23:09:59.405471 #2104]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-08 23:09:59 +0000
D, [2015-01-08T23:09:59.478475 #2104] DEBUG -- : 
D, [2015-01-08T23:09:59.500477 #2104] DEBUG -- : 
I, [2015-01-08T23:09:59.548479 #2104]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-08 23:09:59 +0000
D, [2015-01-08T23:09:59.619483 #2104] DEBUG -- : 
D, [2015-01-08T23:09:59.640485 #2104] DEBUG -- : 
I, [2015-01-08T23:09:59.699488 #2104]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-08 23:09:59 +0000
D, [2015-01-08T23:09:59.777492 #2104] DEBUG -- : 
D, [2015-01-08T23:09:59.797494 #2104] DEBUG -- : 
I, [2015-01-08T23:09:59.859497 #2104]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-08 23:09:59 +0000
D, [2015-01-08T23:09:59.938502 #2104] DEBUG -- : 
D, [2015-01-08T23:09:59.959503 #2104] DEBUG -- : 
I, [2015-01-08T23:10:00.020506 #2104]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-08 23:09:59 +0000
D, [2015-01-08T23:10:00.090510 #2104] DEBUG -- : 
D, [2015-01-08T23:10:00.106511 #2104] DEBUG -- : 
I, [2015-01-08T23:10:00.159514 #2104]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-08 23:10:00 +0000
D, [2015-01-08T23:10:00.230518 #2104] DEBUG -- : 
D, [2015-01-08T23:10:00.249519 #2104] DEBUG -- : 
I, [2015-01-08T23:10:00.297522 #2104]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-08 23:10:00 +0000
D, [2015-01-08T23:10:00.371526 #2104] DEBUG -- : 
D, [2015-01-08T23:10:00.396528 #2104] DEBUG -- : 
I, [2015-01-08T23:10:00.439530 #2104]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-08 23:10:00 +0000
D, [2015-01-08T23:10:00.511534 #2104] DEBUG -- : 
D, [2015-01-08T23:10:00.536536 #2104] DEBUG -- : 
I, [2015-01-08T23:10:00.582539 #2104]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-08 23:10:00 +0000
D, [2015-01-08T23:10:00.664543 #2104] DEBUG -- : 
D, [2015-01-08T23:10:00.681544 #2104] DEBUG -- : 
I, [2015-01-08T23:10:00.731547 #2104]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-08 23:10:00 +0000
D, [2015-01-08T23:10:00.802551 #2104] DEBUG -- : 
D, [2015-01-08T23:10:00.831553 #2104] DEBUG -- : 
I, [2015-01-08T23:10:00.874555 #2104]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-08 23:10:00 +0000
D, [2015-01-08T23:10:00.983561 #2104] DEBUG -- : 
D, [2015-01-08T23:10:00.999562 #2104] DEBUG -- : 
I, [2015-01-08T23:10:01.041565 #2104]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-08 23:10:01 +0000
D, [2015-01-08T23:10:01.119569 #2104] DEBUG -- : 
D, [2015-01-08T23:10:01.161572 #2104] DEBUG -- : 
I, [2015-01-08T23:10:01.208574 #2104]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-08 23:10:01 +0000
D, [2015-01-08T23:10:01.285579 #2104] DEBUG -- : 
D, [2015-01-08T23:10:01.306580 #2104] DEBUG -- : 
I, [2015-01-08T23:10:01.351583 #2104]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-08 23:10:01 +0000
D, [2015-01-08T23:10:01.429587 #2104] DEBUG -- : 
D, [2015-01-08T23:10:01.449588 #2104] DEBUG -- : 
I, [2015-01-08T23:10:01.495591 #2104]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-08 23:10:01 +0000
D, [2015-01-08T23:10:01.563595 #2104] DEBUG -- : 
D, [2015-01-08T23:10:01.597597 #2104] DEBUG -- : 
I, [2015-01-08T23:10:01.644599 #2104]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-08 23:10:01 +0000
D, [2015-01-08T23:10:01.726604 #2104] DEBUG -- : 
D, [2015-01-08T23:10:01.747605 #2104] DEBUG -- : 
I, [2015-01-08T23:10:01.792608 #2104]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-08 23:10:01 +0000
D, [2015-01-08T23:10:01.866612 #2104] DEBUG -- : 
D, [2015-01-08T23:10:01.891613 #2104] DEBUG -- : 
I, [2015-01-08T23:10:01.932616 #2104]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-08 23:10:01 +0000
D, [2015-01-08T23:10:02.009620 #2104] DEBUG -- : 
D, [2015-01-08T23:10:02.030621 #2104] DEBUG -- : 
I, [2015-01-08T23:10:02.073624 #2104]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-08 23:10:02 +0000
D, [2015-01-08T23:10:02.162629 #2104] DEBUG -- : 
D, [2015-01-08T23:10:02.180630 #2104] DEBUG -- : 
I, [2015-01-08T23:10:02.222632 #2104]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-08 23:10:02 +0000
D, [2015-01-08T23:10:02.288636 #2104] DEBUG -- : 
D, [2015-01-08T23:10:02.317638 #2104] DEBUG -- : 
I, [2015-01-08T23:10:02.363640 #2104]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-08 23:10:02 +0000
D, [2015-01-08T23:10:02.448645 #2104] DEBUG -- : 
D, [2015-01-08T23:10:02.466646 #2104] DEBUG -- : 
I, [2015-01-08T23:10:02.513649 #2104]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-08 23:10:02 +0000
D, [2015-01-08T23:10:02.584653 #2104] DEBUG -- : 
D, [2015-01-08T23:10:02.603654 #2104] DEBUG -- : 
I, [2015-01-08T23:10:02.653657 #2104]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-08 23:10:02 +0000
D, [2015-01-08T23:10:02.723661 #2104] DEBUG -- : 
D, [2015-01-08T23:10:02.740662 #2104] DEBUG -- : 
I, [2015-01-08T23:10:02.785665 #2104]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-08 23:10:02 +0000
D, [2015-01-08T23:10:02.853668 #2104] DEBUG -- : 
D, [2015-01-08T23:10:02.868669 #2104] DEBUG -- : 
I, [2015-01-08T23:10:02.910672 #2104]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-08 23:10:02 +0000
D, [2015-01-08T23:10:02.973675 #2104] DEBUG -- : 
D, [2015-01-08T23:10:02.988676 #2104] DEBUG -- : 
I, [2015-01-08T23:10:03.031679 #2104]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-08 23:10:02 +0000
D, [2015-01-08T23:10:03.121684 #2104] DEBUG -- : 
D, [2015-01-08T23:10:03.176687 #2104] DEBUG -- : 
I, [2015-01-08T23:10:03.225690 #2104]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-08 23:10:03 +0000
D, [2015-01-08T23:10:03.296694 #2104] DEBUG -- : 
D, [2015-01-08T23:10:03.313695 #2104] DEBUG -- : 
I, [2015-01-08T23:10:03.358697 #2104]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-08 23:10:03 +0000
D, [2015-01-08T23:10:03.426701 #2104] DEBUG -- : 
D, [2015-01-08T23:10:03.444702 #2104] DEBUG -- : 
I, [2015-01-08T23:10:03.489705 #2104]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-08 23:10:03 +0000
D, [2015-01-08T23:10:41.331869 #2104] DEBUG -- : 
D, [2015-01-08T23:10:41.349870 #2104] DEBUG -- : 
I, [2015-01-08T23:10:41.406874 #2104]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-08 23:10:41 +0000
I, [2015-01-08T23:10:41.491878 #2104]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-08T23:10:41.557882 #2104]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-08T23:10:41.635887 #2104] DEBUG -- :   [1m[36mCart Load (1.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-08T23:10:41.724892 #2104] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-08T23:10:41.839898 #2104] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-08T23:10:41.945904 #2104] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-08T23:10:41.991907 #2104] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-08T23:10:42.206919 #2104] DEBUG -- :   [1m[35mSQL (10.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 08 Jan 2015 23:10:41 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:910ce18,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 08 Jan 2015 23:10:41 UTC +00:00]]
D, [2015-01-08T23:10:42.437933 #2104] DEBUG -- :   [1m[36m (175.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-08T23:10:42.564940 #2104] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-08T23:10:42.665946 #2104]  INFO -- :   Rendered line_items/_line_item.html.erb (16.0ms)
I, [2015-01-08T23:10:42.739950 #2104]  INFO -- :   Rendered carts/_cart.html.erb (224.0ms)
I, [2015-01-08T23:10:42.780952 #2104]  INFO -- :   Rendered line_items/create.js.erb (277.0ms)
I, [2015-01-08T23:10:42.827955 #2104]  INFO -- : Completed 200 OK in 1224ms (Views: 338.0ms | ActiveRecord: 195.0ms)
D, [2015-01-08T23:10:42.866957 #2104] DEBUG -- : 
D, [2015-01-08T23:10:42.884958 #2104] DEBUG -- : 
I, [2015-01-08T23:10:42.967963 #2104]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-08 23:10:42 +0000
I, [2015-01-08T23:10:43.062968 #2104]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-08T23:10:43.132972 #2104]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-08T23:10:43.221977 #2104] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-08T23:10:43.296982 #2104] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-08T23:10:43.402988 #2104] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-08T23:10:43.499993 #2104] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-08T23:10:43.544996 #2104] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-08T23:10:43.738007 #2104] DEBUG -- :   [1m[35mSQL (10.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Thu, 08 Jan 2015 23:10:43 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:7f315e0,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Thu, 08 Jan 2015 23:10:43 UTC +00:00]]
D, [2015-01-08T23:10:43.986021 #2104] DEBUG -- :   [1m[36m (209.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-08T23:10:44.087027 #2104] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
D, [2015-01-08T23:10:44.200033 #2104] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-08T23:10:44.266037 #2104]  INFO -- :   Rendered line_items/_line_item.html.erb (117.0ms)
I, [2015-01-08T23:10:44.338041 #2104]  INFO -- :   Rendered carts/_cart.html.erb (279.0ms)
I, [2015-01-08T23:10:44.380044 #2104]  INFO -- :   Rendered line_items/create.js.erb (329.0ms)
I, [2015-01-08T23:10:44.427046 #2104]  INFO -- : Completed 200 OK in 1249ms (Views: 388.0ms | ActiveRecord: 232.0ms)
D, [2015-01-08T23:10:46.122143 #2104] DEBUG -- : 
D, [2015-01-08T23:10:46.142144 #2104] DEBUG -- : 
I, [2015-01-08T23:10:46.191147 #2104]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-08 23:10:46 +0000
I, [2015-01-08T23:10:46.283152 #2104]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-08T23:10:46.348156 #2104] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-08T23:10:46.419160 #2104] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-08T23:10:46.486164 #2104] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-08T23:10:46.577169 #2104] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-08T23:10:46.710177 #2104]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-08T23:12:04.088603 #2104] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2015-01-08T23:12:04.190609 #2104] DEBUG -- :   [1m[36mSQL (7.0ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Thu, 08 Jan 2015 23:12:04 UTC +00:00], ["updated_at", Thu, 08 Jan 2015 23:12:04 UTC +00:00]]
D, [2015-01-08T23:12:04.306615 #2104] DEBUG -- :   [1m[35mSQL (4.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 103  [["cart_id", nil], ["order_id", 78], ["updated_at", Thu, 08 Jan 2015 23:12:04 UTC +00:00]]
D, [2015-01-08T23:12:04.420622 #2104] DEBUG -- :   [1m[36mSQL (3.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 104[0m  [["cart_id", nil], ["order_id", 78], ["updated_at", Thu, 08 Jan 2015 23:12:04 UTC +00:00]]
I, [2015-01-08T23:12:04.451623 #2104]  INFO -- : about to @payment.create
D, [2015-01-08T23:12:07.195780 #2104] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-08T23:12:07.296786 #2104] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
I, [2015-01-08T23:12:36.257443 #2104]  INFO -- : in order=
I, [2015-01-08T23:13:59.404198 #2104]  INFO -- : in payment.create
I, [2015-01-08T23:13:59.640212 #2104]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Camo Print Tee", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Camo Print Tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"18.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/78/confirm", "cancel_url"=>"http://localhost:3000/orders/78/cancel"}}
I, [2015-01-08T23:14:00.146241 #2104]  INFO -- : #<ActiveModel::Errors:0x000000094435c8 @base=#<Payment:0x000000055c8c08 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000055ba720 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000093d5b40 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000093d5320 @error=nil, @total="38.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000093bec10 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000093b7d98 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x000000093aed10 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007b07938 @error=nil, @return_url="http://localhost:3000/orders/78/confirm", @cancel_url="http://localhost:3000/orders/78/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000094435c8 ...>>, @messages={}>
I, [2015-01-08T23:14:00.162242 #2104]  INFO -- : got past invalid
I, [2015-01-08T23:14:00.241246 #2104]  INFO -- : PayPal-Request-Id: 95be3e57-8956-4751-bb97-a1a34d2c4211
I, [2015-01-08T23:14:00.273248 #2104]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-08T23:14:01.661327 #2104]  INFO -- : Response[201]: Created, Duration: 1.359s
I, [2015-01-08T23:14:01.692329 #2104]  INFO -- : back from super
I, [2015-01-08T23:14:02.058350 #2104]  INFO -- : {"id"=>"PAY-361739035F754793PKSXQ6OY", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98", "details"=>{"subtotal"=>"38.98"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Camo Print Tee", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Camo Print Tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"18.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/78/confirm", "cancel_url"=>"http://localhost:3000/orders/78/cancel"}, "create_time"=>"2015-01-08T23:14:03Z", "update_time"=>"2015-01-08T23:14:03Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-361739035F754793PKSXQ6OY", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-02328765A1347373F", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-361739035F754793PKSXQ6OY/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-08T23:14:02.212359 #2104] DEBUG -- :   [1m[35mSQL (7.0ms)[0m  UPDATE "orders" SET "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ?, "pay_type" = ? WHERE "orders"."id" = 78  [["created_at", Thu, 08 Jan 2015 23:12:04 UTC +00:00], ["updated_at", Thu, 08 Jan 2015 23:12:04 UTC +00:00], ["id", 78], ["payment_id", "PAY-361739035F754793PKSXQ6OY"], ["state", "created"], ["pay_type", "paypal"]]
D, [2015-01-08T23:14:02.264362 #2104] DEBUG -- :   [1m[36mSQL (1.0ms)[0m  [1mUPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 78[0m
I, [2015-01-08T23:14:02.287363 #2104]  INFO -- : @payment save just done
I, [2015-01-08T23:14:03.157413 #2104]  INFO -- : #<Payment:0x000000055c8c08 @error=nil, @id="PAY-361739035F754793PKSXQ6OY", @create_time="2015-01-08T23:14:03Z", @update_time="2015-01-08T23:14:03Z", @state="created", @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009089978 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009088fc8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009088988 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009083de8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009083848 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009082a38 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009081a98 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009080cd8 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000907b508 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009078ce0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-361739035F754793PKSXQ6OY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009063908 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-02328765A1347373F", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000090625d0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-361739035F754793PKSXQ6OY/execute", @rel="execute", @method="POST">], @request_id="95be3e57-8956-4751-bb97-a1a34d2c4211", @header={}, @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007b07938 @error=nil, @return_url="http://localhost:3000/orders/78/confirm", @cancel_url="http://localhost:3000/orders/78/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000094435c8 @base=#<Payment:0x000000055c8c08 ...>, @messages={}>>
I, [2015-01-08T23:14:03.987460 #2104]  INFO -- : #<Payment:0x000000055c8c08 @error=nil, @id="PAY-361739035F754793PKSXQ6OY", @create_time="2015-01-08T23:14:03Z", @update_time="2015-01-08T23:14:03Z", @state="created", @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009089978 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009088fc8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009088988 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009083de8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009083848 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009082a38 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009081a98 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009080cd8 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000907b508 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009078ce0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-361739035F754793PKSXQ6OY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009063908 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-02328765A1347373F", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000090625d0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-361739035F754793PKSXQ6OY/execute", @rel="execute", @method="POST">], @request_id="95be3e57-8956-4751-bb97-a1a34d2c4211", @header={}, @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007b07938 @error=nil, @return_url="http://localhost:3000/orders/78/confirm", @cancel_url="http://localhost:3000/orders/78/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000094435c8 @base=#<Payment:0x000000055c8c08 ...>, @messages={}>>
D, [2015-01-08T23:14:04.157470 #2104] DEBUG -- :   [1m[35m (133.0ms)[0m  commit transaction
D, [2015-01-08T23:14:04.324480 #2104] DEBUG -- :   [1m[36mSQL (112.0ms)[0m  [1mUPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 78[0m
I, [2015-01-08T23:14:04.349481 #2104]  INFO -- : about to approve url
I, [2015-01-08T23:14:05.196530 #2104]  INFO -- : #<Payment:0x000000055c8c08 @error=nil, @id="PAY-361739035F754793PKSXQ6OY", @create_time="2015-01-08T23:14:03Z", @update_time="2015-01-08T23:14:03Z", @state="created", @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009089978 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009088fc8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009088988 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009083de8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009083848 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009082a38 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009081a98 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009080cd8 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000907b508 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009078ce0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-361739035F754793PKSXQ6OY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009063908 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-02328765A1347373F", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000090625d0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-361739035F754793PKSXQ6OY/execute", @rel="execute", @method="POST">], @request_id="95be3e57-8956-4751-bb97-a1a34d2c4211", @header={}, @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007b07938 @error=nil, @return_url="http://localhost:3000/orders/78/confirm", @cancel_url="http://localhost:3000/orders/78/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000094435c8 @base=#<Payment:0x000000055c8c08 ...>, @messages={}>>
I, [2015-01-08T23:14:06.034578 #2104]  INFO -- : #<Payment:0x000000055c8c08 @error=nil, @id="PAY-361739035F754793PKSXQ6OY", @create_time="2015-01-08T23:14:03Z", @update_time="2015-01-08T23:14:03Z", @state="created", @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009089978 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009088fc8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009088988 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009083de8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009083848 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009082a38 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009081a98 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009080cd8 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000907b508 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009078ce0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-361739035F754793PKSXQ6OY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009063908 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-02328765A1347373F", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000090625d0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-361739035F754793PKSXQ6OY/execute", @rel="execute", @method="POST">], @request_id="95be3e57-8956-4751-bb97-a1a34d2c4211", @header={}, @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007b07938 @error=nil, @return_url="http://localhost:3000/orders/78/confirm", @cancel_url="http://localhost:3000/orders/78/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000094435c8 @base=#<Payment:0x000000055c8c08 ...>, @messages={}>>
I, [2015-01-08T23:14:06.070580 #2104]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-02328765A1347373F
I, [2015-01-08T23:14:06.899627 #2104]  INFO -- : #<Payment:0x000000055c8c08 @error=nil, @id="PAY-361739035F754793PKSXQ6OY", @create_time="2015-01-08T23:14:03Z", @update_time="2015-01-08T23:14:03Z", @state="created", @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009089978 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009088fc8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009088988 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009083de8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009083848 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009082a38 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009081a98 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009080cd8 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000907b508 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009078ce0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-361739035F754793PKSXQ6OY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009063908 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-02328765A1347373F", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000090625d0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-361739035F754793PKSXQ6OY/execute", @rel="execute", @method="POST">], @request_id="95be3e57-8956-4751-bb97-a1a34d2c4211", @header={}, @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007b07938 @error=nil, @return_url="http://localhost:3000/orders/78/confirm", @cancel_url="http://localhost:3000/orders/78/cancel">, @logger=#<Logger:0x00000005680dd0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005680da8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005680d58 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005680d30 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005680cb8>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000094435c8 @base=#<Payment:0x000000055c8c08 ...>, @messages={}>>
I, [2015-01-08T23:14:06.971631 #2104]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-02328765A1347373F
I, [2015-01-08T23:14:07.022634 #2104]  INFO -- : Completed 403 Forbidden in 200692ms (ActiveRecord: 281.0ms)
D, [2015-01-08T23:14:40.249535 #2104] DEBUG -- : 
D, [2015-01-08T23:14:40.277536 #2104] DEBUG -- : 
I, [2015-01-08T23:14:40.357541 #2104]  INFO -- : Started GET "/orders/78/confirm?paymentId=PAY-361739035F754793PKSXQ6OY&token=EC-02328765A1347373F&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-08 23:14:40 +0000
I, [2015-01-08T23:14:40.442546 #2104]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-08T23:14:40.526550 #2104]  INFO -- :   Parameters: {"paymentId"=>"PAY-361739035F754793PKSXQ6OY", "token"=>"EC-02328765A1347373F", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"78"}
D, [2015-01-08T23:14:40.609555 #2104] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-08T23:14:40.702560 #2104] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-08T23:14:40.792566 #2104] DEBUG -- :   [1m[35mOrder Load (2.0ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "78"]]
I, [2015-01-08T23:14:49.197046 #2104]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-361739035F754793PKSXQ6OY
I, [2015-01-08T23:14:51.848198 #2104]  INFO -- : Response[200]: OK, Duration: 2.617s
D, [2015-01-08T23:14:54.492349 #2104] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-08T23:14:54.658359 #2104] DEBUG -- :   [1m[35mSQL (7.0ms)[0m  UPDATE "orders" SET "name" = ?, "email" = ?, "address" = ?, "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 78  [["name", "Test Buyer"], ["email", "simon.king65-buyer@gmail.com"], ["address", "1 Main Terrace"], ["shipping_address1", "1 Main Terrace"], ["updated_at", Thu, 08 Jan 2015 23:14:54 UTC +00:00]]
D, [2015-01-08T23:14:54.842369 #2104] DEBUG -- :   [1m[36m (135.0ms)[0m  [1mcommit transaction[0m
I, [2015-01-08T23:14:55.021379 #2104]  INFO -- :   Rendered orders/_form.html.erb (103.0ms)
I, [2015-01-08T23:14:55.087383 #2104]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (170.0ms)
I, [2015-01-08T23:14:55.268394 #2104]  INFO -- : Completed 200 OK in 14689ms (Views: 370.0ms | ActiveRecord: 149.0ms)
D, [2015-01-08T23:14:55.589412 #2104] DEBUG -- : 
D, [2015-01-08T23:14:55.608413 #2104] DEBUG -- : 
I, [2015-01-08T23:14:55.646415 #2104]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-08 23:14:55 +0000
D, [2015-01-08T23:14:55.741421 #2104] DEBUG -- : 
D, [2015-01-08T23:14:55.762422 #2104] DEBUG -- : 
I, [2015-01-08T23:14:55.821425 #2104]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-08 23:14:55 +0000
D, [2015-01-08T23:14:55.903430 #2104] DEBUG -- : 
D, [2015-01-08T23:14:55.925431 #2104] DEBUG -- : 
I, [2015-01-08T23:14:55.988435 #2104]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-08 23:14:55 +0000
D, [2015-01-08T23:14:56.063439 #2104] DEBUG -- : 
D, [2015-01-08T23:14:56.087440 #2104] DEBUG -- : 
I, [2015-01-08T23:14:56.149444 #2104]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-08 23:14:56 +0000
D, [2015-01-08T23:14:56.274451 #2104] DEBUG -- : 
D, [2015-01-08T23:14:56.298453 #2104] DEBUG -- : 
I, [2015-01-08T23:14:56.354456 #2104]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-08 23:14:56 +0000
D, [2015-01-08T23:14:56.426460 #2104] DEBUG -- : 
D, [2015-01-08T23:14:56.453461 #2104] DEBUG -- : 
I, [2015-01-08T23:14:56.519465 #2104]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-08 23:14:56 +0000
D, [2015-01-08T23:14:56.589469 #2104] DEBUG -- : 
D, [2015-01-08T23:14:56.612470 #2104] DEBUG -- : 
I, [2015-01-08T23:14:56.668474 #2104]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-08 23:14:56 +0000
D, [2015-01-08T23:14:56.741478 #2104] DEBUG -- : 
D, [2015-01-08T23:14:56.765479 #2104] DEBUG -- : 
I, [2015-01-08T23:14:56.828483 #2104]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-08 23:14:56 +0000
D, [2015-01-08T23:14:56.901487 #2104] DEBUG -- : 
D, [2015-01-08T23:14:56.926488 #2104] DEBUG -- : 
I, [2015-01-08T23:14:56.987492 #2104]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-08 23:14:56 +0000
D, [2015-01-08T23:14:57.061496 #2104] DEBUG -- : 
D, [2015-01-08T23:14:57.086498 #2104] DEBUG -- : 
I, [2015-01-08T23:14:57.145501 #2104]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-08 23:14:57 +0000
D, [2015-01-08T23:14:57.224505 #2104] DEBUG -- : 
D, [2015-01-08T23:14:57.246507 #2104] DEBUG -- : 
I, [2015-01-08T23:14:57.293509 #2104]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-08 23:14:57 +0000
D, [2015-01-08T23:14:57.372514 #2104] DEBUG -- : 
D, [2015-01-08T23:14:57.394515 #2104] DEBUG -- : 
I, [2015-01-08T23:14:57.444518 #2104]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-08 23:14:57 +0000
D, [2015-01-08T23:14:57.517522 #2104] DEBUG -- : 
D, [2015-01-08T23:14:57.535523 #2104] DEBUG -- : 
I, [2015-01-08T23:14:57.592527 #2104]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-08 23:14:57 +0000
D, [2015-01-08T23:14:57.659530 #2104] DEBUG -- : 
D, [2015-01-08T23:14:57.689532 #2104] DEBUG -- : 
I, [2015-01-08T23:14:57.756536 #2104]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-08 23:14:57 +0000
D, [2015-01-08T23:14:57.829540 #2104] DEBUG -- : 
D, [2015-01-08T23:14:57.852541 #2104] DEBUG -- : 
I, [2015-01-08T23:14:57.917545 #2104]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-08 23:14:57 +0000
D, [2015-01-08T23:14:57.990549 #2104] DEBUG -- : 
D, [2015-01-08T23:14:58.015551 #2104] DEBUG -- : 
I, [2015-01-08T23:14:58.070554 #2104]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-08 23:14:58 +0000
D, [2015-01-08T23:14:58.154559 #2104] DEBUG -- : 
D, [2015-01-08T23:14:58.173560 #2104] DEBUG -- : 
I, [2015-01-08T23:14:58.220562 #2104]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-08 23:14:58 +0000
D, [2015-01-08T23:14:58.291567 #2104] DEBUG -- : 
D, [2015-01-08T23:14:58.316568 #2104] DEBUG -- : 
I, [2015-01-08T23:14:58.376571 #2104]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-08 23:14:58 +0000
D, [2015-01-08T23:14:58.451576 #2104] DEBUG -- : 
D, [2015-01-08T23:14:58.472577 #2104] DEBUG -- : 
I, [2015-01-08T23:14:58.529580 #2104]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-08 23:14:58 +0000
D, [2015-01-08T23:14:58.602584 #2104] DEBUG -- : 
D, [2015-01-08T23:14:58.626586 #2104] DEBUG -- : 
I, [2015-01-08T23:14:58.687589 #2104]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-08 23:14:58 +0000
D, [2015-01-08T23:14:58.758593 #2104] DEBUG -- : 
D, [2015-01-08T23:14:58.782595 #2104] DEBUG -- : 
I, [2015-01-08T23:14:58.841598 #2104]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-08 23:14:58 +0000
D, [2015-01-08T23:14:58.925603 #2104] DEBUG -- : 
D, [2015-01-08T23:14:58.948604 #2104] DEBUG -- : 
I, [2015-01-08T23:14:59.010608 #2104]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-08 23:14:58 +0000
D, [2015-01-08T23:14:59.086612 #2104] DEBUG -- : 
D, [2015-01-08T23:14:59.105613 #2104] DEBUG -- : 
I, [2015-01-08T23:14:59.154616 #2104]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-08 23:14:59 +0000
D, [2015-01-08T23:14:59.226620 #2104] DEBUG -- : 
D, [2015-01-08T23:14:59.247621 #2104] DEBUG -- : 
I, [2015-01-08T23:14:59.307625 #2104]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-08 23:14:59 +0000
D, [2015-01-08T23:14:59.382629 #2104] DEBUG -- : 
D, [2015-01-08T23:14:59.406630 #2104] DEBUG -- : 
I, [2015-01-08T23:14:59.465634 #2104]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-08 23:14:59 +0000
D, [2015-01-08T23:14:59.537638 #2104] DEBUG -- : 
D, [2015-01-08T23:14:59.560639 #2104] DEBUG -- : 
I, [2015-01-08T23:14:59.612642 #2104]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-08 23:14:59 +0000
D, [2015-01-08T23:14:59.689646 #2104] DEBUG -- : 
D, [2015-01-08T23:14:59.708648 #2104] DEBUG -- : 
I, [2015-01-08T23:14:59.757650 #2104]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-08 23:14:59 +0000
D, [2015-01-08T23:15:11.476321 #2104] DEBUG -- : 
D, [2015-01-08T23:15:11.493322 #2104] DEBUG -- : 
I, [2015-01-08T23:15:11.557325 #2104]  INFO -- : Started POST "/orders/78/execute/78/2VZ7YQDDDPPC4/PAY-361739035F754793PKSXQ6OY" for 127.0.0.1 at 2015-01-08 23:15:11 +0000
I, [2015-01-08T23:15:11.667332 #2104]  INFO -- : Processing by OrdersController#execute as HTML
I, [2015-01-08T23:15:11.779338 #2104]  INFO -- :   Parameters: {"authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order_id"=>"78", "payer_id"=>"2VZ7YQDDDPPC4", "payment_id"=>"PAY-361739035F754793PKSXQ6OY"}
D, [2015-01-08T23:15:11.886344 #2104] DEBUG -- :   [1m[35mOrder Load (2.0ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "78"]]
I, [2015-01-08T23:15:23.961035 #2104]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-361739035F754793PKSXQ6OY
I, [2015-01-08T23:15:25.070098 #2104]  INFO -- : Response[200]: OK, Duration: 1.068s
I, [2015-01-08T23:15:25.131102 #2104]  INFO -- : PayPal-Request-Id: 8f3e7036-67ee-4cad-bbf3-418dab1a5e7e
I, [2015-01-08T23:15:25.200106 #2104]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-361739035F754793PKSXQ6OY/execute
I, [2015-01-08T23:15:27.852257 #2104]  INFO -- : Response[200]: OK, Duration: 2.612s
D, [2015-01-08T23:15:27.919261 #2104] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-08T23:15:27.991265 #2104] DEBUG -- :   [1m[35m (1.0ms)[0m  rollback transaction
I, [2015-01-08T23:15:28.055269 #2104]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-361739035F754793PKSXQ6OY
I, [2015-01-08T23:15:29.644360 #2104]  INFO -- : Response[200]: OK, Duration: 1.548s
I, [2015-01-08T23:15:29.707363 #2104]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-08T23:15:29.758366 #2104]  INFO -- : Completed 302 Found in 17929ms (ActiveRecord: 4.0ms)
D, [2015-01-08T23:15:29.849372 #2104] DEBUG -- : 
D, [2015-01-08T23:15:29.871373 #2104] DEBUG -- : 
I, [2015-01-08T23:15:29.919376 #2104]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-08 23:15:29 +0000
I, [2015-01-08T23:15:30.011381 #2104]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-08T23:15:30.095386 #2104] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-08T23:15:30.212392 #2104] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-08T23:15:30.286397 #2104]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (4.0ms)
I, [2015-01-08T23:15:30.338399 #2104]  INFO -- :   Rendered store/index.html.erb within layouts/application (164.0ms)
D, [2015-01-08T23:15:30.588414 #2104] DEBUG -- :   [1m[36mLineItem Exists (2.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-08T23:15:30.686419 #2104] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-08T23:15:30.725422 #2104]  INFO -- :   Rendered collection (1.0ms)
I, [2015-01-08T23:15:30.809426 #2104]  INFO -- :   Rendered carts/_cart.html.erb (166.0ms)
I, [2015-01-08T23:15:30.892431 #2104]  INFO -- : Completed 200 OK in 825ms (Views: 727.0ms | ActiveRecord: 8.0ms)
D, [2015-01-08T23:15:31.169447 #2104] DEBUG -- : 
D, [2015-01-08T23:15:31.185448 #2104] DEBUG -- : 
I, [2015-01-08T23:15:31.219450 #2104]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-08 23:15:31 +0000
D, [2015-01-08T23:15:31.320456 #2104] DEBUG -- : 
D, [2015-01-08T23:15:31.371459 #2104] DEBUG -- : 
I, [2015-01-08T23:15:31.423462 #2104]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-08 23:15:31 +0000
D, [2015-01-08T23:15:31.494466 #2104] DEBUG -- : 
D, [2015-01-08T23:15:31.516467 #2104] DEBUG -- : 
I, [2015-01-08T23:15:31.571470 #2104]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-08 23:15:31 +0000
D, [2015-01-08T23:15:31.643474 #2104] DEBUG -- : 
D, [2015-01-08T23:15:31.667476 #2104] DEBUG -- : 
I, [2015-01-08T23:15:31.727479 #2104]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-08 23:15:31 +0000
D, [2015-01-08T23:15:31.816484 #2104] DEBUG -- : 
D, [2015-01-08T23:15:31.840485 #2104] DEBUG -- : 
I, [2015-01-08T23:15:31.900489 #2104]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-08 23:15:31 +0000
D, [2015-01-08T23:15:31.966493 #2104] DEBUG -- : 
D, [2015-01-08T23:15:31.994494 #2104] DEBUG -- : 
I, [2015-01-08T23:15:32.050497 #2104]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-08 23:15:31 +0000
D, [2015-01-08T23:15:32.125502 #2104] DEBUG -- : 
D, [2015-01-08T23:15:32.149503 #2104] DEBUG -- : 
I, [2015-01-08T23:15:32.207506 #2104]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-08 23:15:32 +0000
D, [2015-01-08T23:15:32.279511 #2104] DEBUG -- : 
D, [2015-01-08T23:15:32.301512 #2104] DEBUG -- : 
I, [2015-01-08T23:15:32.351515 #2104]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-08 23:15:32 +0000
D, [2015-01-08T23:15:32.421519 #2104] DEBUG -- : 
D, [2015-01-08T23:15:32.441520 #2104] DEBUG -- : 
I, [2015-01-08T23:15:32.494523 #2104]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-08 23:15:32 +0000
D, [2015-01-08T23:15:32.566527 #2104] DEBUG -- : 
D, [2015-01-08T23:15:32.586528 #2104] DEBUG -- : 
I, [2015-01-08T23:15:32.631531 #2104]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-08 23:15:32 +0000
D, [2015-01-08T23:15:32.706535 #2104] DEBUG -- : 
D, [2015-01-08T23:15:32.726536 #2104] DEBUG -- : 
I, [2015-01-08T23:15:32.790540 #2104]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-08 23:15:32 +0000
D, [2015-01-08T23:15:32.863544 #2104] DEBUG -- : 
D, [2015-01-08T23:15:32.886545 #2104] DEBUG -- : 
I, [2015-01-08T23:15:32.945549 #2104]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-08 23:15:32 +0000
D, [2015-01-08T23:15:33.015553 #2104] DEBUG -- : 
D, [2015-01-08T23:15:33.042554 #2104] DEBUG -- : 
I, [2015-01-08T23:15:33.096557 #2104]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-08 23:15:33 +0000
D, [2015-01-08T23:15:33.165561 #2104] DEBUG -- : 
D, [2015-01-08T23:15:33.190563 #2104] DEBUG -- : 
I, [2015-01-08T23:15:33.259567 #2104]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-08 23:15:33 +0000
D, [2015-01-08T23:15:33.334571 #2104] DEBUG -- : 
D, [2015-01-08T23:15:33.356572 #2104] DEBUG -- : 
I, [2015-01-08T23:15:33.403575 #2104]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-08 23:15:33 +0000
D, [2015-01-08T23:15:33.476579 #2104] DEBUG -- : 
D, [2015-01-08T23:15:33.496580 #2104] DEBUG -- : 
I, [2015-01-08T23:15:33.549583 #2104]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-08 23:15:33 +0000
D, [2015-01-08T23:15:33.616587 #2104] DEBUG -- : 
D, [2015-01-08T23:15:33.645589 #2104] DEBUG -- : 
I, [2015-01-08T23:15:33.703592 #2104]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-08 23:15:33 +0000
D, [2015-01-08T23:15:33.773596 #2104] DEBUG -- : 
D, [2015-01-08T23:15:33.798597 #2104] DEBUG -- : 
I, [2015-01-08T23:15:33.857601 #2104]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-08 23:15:33 +0000
D, [2015-01-08T23:15:33.934605 #2104] DEBUG -- : 
D, [2015-01-08T23:15:33.958607 #2104] DEBUG -- : 
I, [2015-01-08T23:15:34.021610 #2104]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-08 23:15:33 +0000
D, [2015-01-08T23:15:34.091614 #2104] DEBUG -- : 
D, [2015-01-08T23:15:34.114615 #2104] DEBUG -- : 
I, [2015-01-08T23:15:34.173619 #2104]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-08 23:15:34 +0000
D, [2015-01-08T23:15:34.244623 #2104] DEBUG -- : 
D, [2015-01-08T23:15:34.264624 #2104] DEBUG -- : 
I, [2015-01-08T23:15:34.319627 #2104]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-08 23:15:34 +0000
D, [2015-01-08T23:15:34.403632 #2104] DEBUG -- : 
D, [2015-01-08T23:15:34.427633 #2104] DEBUG -- : 
I, [2015-01-08T23:15:34.482637 #2104]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-08 23:15:34 +0000
D, [2015-01-08T23:15:34.557641 #2104] DEBUG -- : 
D, [2015-01-08T23:15:34.581642 #2104] DEBUG -- : 
I, [2015-01-08T23:15:34.639646 #2104]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-08 23:15:34 +0000
D, [2015-01-08T23:15:34.708649 #2104] DEBUG -- : 
D, [2015-01-08T23:15:34.733651 #2104] DEBUG -- : 
I, [2015-01-08T23:15:34.787654 #2104]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-08 23:15:34 +0000
D, [2015-01-08T23:15:34.863658 #2104] DEBUG -- : 
D, [2015-01-08T23:15:34.887660 #2104] DEBUG -- : 
I, [2015-01-08T23:15:34.943663 #2104]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-08 23:15:34 +0000
D, [2015-01-08T23:15:35.013667 #2104] DEBUG -- : 
D, [2015-01-08T23:15:35.035668 #2104] DEBUG -- : 
I, [2015-01-08T23:15:35.097672 #2104]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-08 23:15:35 +0000
D, [2015-01-08T23:15:35.165676 #2104] DEBUG -- : 
D, [2015-01-08T23:15:35.187677 #2104] DEBUG -- : 
I, [2015-01-08T23:15:35.239680 #2104]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-08 23:15:35 +0000
D, [2015-01-08T23:15:35.305684 #2104] DEBUG -- : 
D, [2015-01-08T23:15:35.325685 #2104] DEBUG -- : 
I, [2015-01-08T23:15:35.386688 #2104]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-08 23:15:35 +0000
D, [2015-01-08T23:15:35.454692 #2104] DEBUG -- : 
D, [2015-01-08T23:15:35.477693 #2104] DEBUG -- : 
I, [2015-01-08T23:15:35.531697 #2104]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-08 23:15:35 +0000
D, [2015-01-09T07:03:16.298461 #7440] DEBUG -- : 
D, [2015-01-09T07:03:16.327462 #7440] DEBUG -- : 
I, [2015-01-09T07:03:16.380465 #7440]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-09 07:03:16 +0000
D, [2015-01-09T07:03:19.007616 #7440] DEBUG -- :   [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
I, [2015-01-09T07:03:20.248687 #7440]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-09T07:03:20.312690 #7440]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-09T07:03:20.578706 #7440] DEBUG -- :   [1m[35mCart Load (25.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-09T07:03:20.693712 #7440] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-09T07:03:21.226743 #7440] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-09T07:03:21.410753 #7440] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-09T07:03:21.445755 #7440] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-09T07:03:21.717771 #7440] DEBUG -- :   [1m[36mSQL (51.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Fri, 09 Jan 2015 07:03:21 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:8d85768,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 09 Jan 2015 07:03:21 UTC +00:00]]
D, [2015-01-09T07:03:21.972785 #7440] DEBUG -- :   [1m[35m (221.0ms)[0m  commit transaction
D, [2015-01-09T07:03:22.222800 #7440] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-09T07:03:22.345807 #7440]  INFO -- :   Rendered line_items/_line_item.html.erb (75.0ms)
I, [2015-01-09T07:03:22.390809 #7440]  INFO -- :   Rendered carts/_cart.html.erb (203.0ms)
I, [2015-01-09T07:03:22.425811 #7440]  INFO -- :   Rendered line_items/create.js.erb (296.0ms)
I, [2015-01-09T07:03:22.468814 #7440]  INFO -- : Completed 200 OK in 2114ms (Views: 451.0ms | ActiveRecord: 311.0ms)
D, [2015-01-09T07:03:22.506816 #7440] DEBUG -- : 
D, [2015-01-09T07:03:22.531817 #7440] DEBUG -- : 
I, [2015-01-09T07:03:22.582820 #7440]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-09 07:03:22 +0000
I, [2015-01-09T07:03:22.651824 #7440]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-09T07:03:22.715828 #7440]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-09T07:03:22.776831 #7440] DEBUG -- :   [1m[35mCart Load (1.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-09T07:03:22.838835 #7440] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-09T07:03:22.929840 #7440] DEBUG -- :   [1m[35mLineItem Load (1.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 36]]
D, [2015-01-09T07:03:23.010845 #7440] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-09T07:03:23.050847 #7440] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-09T07:03:23.219857 #7440] DEBUG -- :   [1m[36mSQL (7.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Fri, 09 Jan 2015 07:03:23 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:80f8018,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 09 Jan 2015 07:03:23 UTC +00:00]]
D, [2015-01-09T07:03:23.372865 #7440] DEBUG -- :   [1m[35m (124.0ms)[0m  commit transaction
D, [2015-01-09T07:03:23.478871 #7440] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-09T07:03:23.553876 #7440] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-09T07:03:23.604879 #7440]  INFO -- :   Rendered line_items/_line_item.html.erb (71.0ms)
I, [2015-01-09T07:03:23.642881 #7440]  INFO -- :   Rendered carts/_cart.html.erb (215.0ms)
I, [2015-01-09T07:03:23.681883 #7440]  INFO -- :   Rendered line_items/create.js.erb (257.0ms)
I, [2015-01-09T07:03:23.723885 #7440]  INFO -- : Completed 200 OK in 966ms (Views: 307.0ms | ActiveRecord: 138.0ms)
D, [2015-01-09T07:03:39.368780 #7440] DEBUG -- : 
D, [2015-01-09T07:03:39.388781 #7440] DEBUG -- : 
I, [2015-01-09T07:03:39.437784 #7440]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-09 07:03:39 +0000
I, [2015-01-09T07:03:39.524789 #7440]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-09T07:03:39.602794 #7440] DEBUG -- :   [1m[36mUser Load (1.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-09T07:03:39.740802 #7440] DEBUG -- :   [1m[35mUser Load (1.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-09T07:03:39.814806 #7440] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-09T07:03:39.876809 #7440] DEBUG -- :   [1m[35mLineItem Load (1.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-09T07:03:39.950814 #7440]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-09T07:03:51.688485 #7440] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-09T07:03:51.917498 #7440] DEBUG -- :   [1m[35mSQL (5.0ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Fri, 09 Jan 2015 07:03:51 UTC +00:00], ["updated_at", Fri, 09 Jan 2015 07:03:51 UTC +00:00]]
D, [2015-01-09T07:03:52.023504 #7440] DEBUG -- :   [1m[36mSQL (3.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 105[0m  [["cart_id", nil], ["order_id", 79], ["updated_at", Fri, 09 Jan 2015 07:03:51 UTC +00:00]]
D, [2015-01-09T07:03:52.111509 #7440] DEBUG -- :   [1m[35mSQL (3.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 106  [["cart_id", nil], ["order_id", 79], ["updated_at", Fri, 09 Jan 2015 07:03:52 UTC +00:00]]
I, [2015-01-09T07:03:52.132510 #7440]  INFO -- : about to @payment.create
D, [2015-01-09T07:03:53.617595 #7440] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-09T07:03:53.700600 #7440] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
I, [2015-01-09T07:03:54.887668 #7440]  INFO -- : in order=
I, [2015-01-09T07:03:56.230745 #7440]  INFO -- : in payment.create
I, [2015-01-09T07:03:56.444757 #7440]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Camo Print Tee", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Camo Print Tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"18.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/79/confirm", "cancel_url"=>"http://localhost:3000/orders/79/cancel"}}
I, [2015-01-09T07:03:56.967787 #7440]  INFO -- : #<ActiveModel::Errors:0x000000094bfab0 @base=#<Payment:0x000000078352c8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007834648 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000544ea58 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000544d400 @error=nil, @total="38.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000005427b88 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005411400 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x000000053de320 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008f9f080 @error=nil, @return_url="http://localhost:3000/orders/79/confirm", @cancel_url="http://localhost:3000/orders/79/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000094bfab0 ...>>, @messages={}>
I, [2015-01-09T07:03:56.987788 #7440]  INFO -- : got past invalid
I, [2015-01-09T07:03:57.231802 #7440]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/oauth2/token
I, [2015-01-09T07:03:59.374925 #7440]  INFO -- : Response[200]: OK, Duration: 2.107s
I, [2015-01-09T07:03:59.457929 #7440]  INFO -- : PayPal-Request-Id: f2743663-cc8c-49f2-8920-ca5d779f0807
I, [2015-01-09T07:03:59.506932 #7440]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-09T07:04:00.882011 #7440]  INFO -- : Response[201]: Created, Duration: 1.341s
I, [2015-01-09T07:04:00.918013 #7440]  INFO -- : back from super
I, [2015-01-09T07:04:01.291034 #7440]  INFO -- : {"id"=>"PAY-7CD48251BE850181TKSXX2YQ", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98", "details"=>{"subtotal"=>"38.98"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Camo Print Tee", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Camo Print Tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"18.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/79/confirm", "cancel_url"=>"http://localhost:3000/orders/79/cancel"}, "create_time"=>"2015-01-09T07:04:02Z", "update_time"=>"2015-01-09T07:04:02Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CD48251BE850181TKSXX2YQ", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7TR9134915676415V", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CD48251BE850181TKSXX2YQ/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-09T07:04:01.459044 #7440] DEBUG -- :   [1m[36mSQL (8.0ms)[0m  [1mUPDATE "orders" SET "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ?, "pay_type" = ? WHERE "orders"."id" = 79[0m  [["created_at", Fri, 09 Jan 2015 07:03:51 UTC +00:00], ["updated_at", Fri, 09 Jan 2015 07:03:51 UTC +00:00], ["id", 79], ["payment_id", "PAY-7CD48251BE850181TKSXX2YQ"], ["state", "created"], ["pay_type", "paypal"]]
D, [2015-01-09T07:04:01.521047 #7440] DEBUG -- :   [1m[35mSQL (1.0ms)[0m  UPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 79
I, [2015-01-09T07:04:01.547049 #7440]  INFO -- : @payment save just done
I, [2015-01-09T07:04:02.375096 #7440]  INFO -- : #<Payment:0x000000078352c8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008f12c98 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000008f12450 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000008f11eb0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008f11438 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000008f10fb0 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000008f10290 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008f0b5d8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008f0ad18 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x00000008f095f8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008f9f080 @error=nil, @return_url="http://localhost:3000/orders/79/confirm", @cancel_url="http://localhost:3000/orders/79/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000094bfab0 @base=#<Payment:0x000000078352c8 ...>, @messages={}>, @request_id="f2743663-cc8c-49f2-8920-ca5d779f0807", @header={}, @id="PAY-7CD48251BE850181TKSXX2YQ", @create_time="2015-01-09T07:04:02Z", @update_time="2015-01-09T07:04:02Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000008f02e60 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CD48251BE850181TKSXX2YQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008f01a60 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7TR9134915676415V", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008f007c8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CD48251BE850181TKSXX2YQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-09T07:04:03.168141 #7440]  INFO -- : #<Payment:0x000000078352c8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008f12c98 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000008f12450 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000008f11eb0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008f11438 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000008f10fb0 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000008f10290 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008f0b5d8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008f0ad18 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x00000008f095f8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008f9f080 @error=nil, @return_url="http://localhost:3000/orders/79/confirm", @cancel_url="http://localhost:3000/orders/79/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000094bfab0 @base=#<Payment:0x000000078352c8 ...>, @messages={}>, @request_id="f2743663-cc8c-49f2-8920-ca5d779f0807", @header={}, @id="PAY-7CD48251BE850181TKSXX2YQ", @create_time="2015-01-09T07:04:02Z", @update_time="2015-01-09T07:04:02Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000008f02e60 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CD48251BE850181TKSXX2YQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008f01a60 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7TR9134915676415V", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008f007c8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CD48251BE850181TKSXX2YQ/execute", @rel="execute", @method="POST">]>
D, [2015-01-09T07:04:03.294149 #7440] DEBUG -- :   [1m[36m (98.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-09T07:04:03.494160 #7440] DEBUG -- :   [1m[35mSQL (145.0ms)[0m  UPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 79
I, [2015-01-09T07:04:03.516161 #7440]  INFO -- : about to approve url
I, [2015-01-09T07:04:04.372210 #7440]  INFO -- : #<Payment:0x000000078352c8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008f12c98 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000008f12450 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000008f11eb0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008f11438 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000008f10fb0 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000008f10290 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008f0b5d8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008f0ad18 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x00000008f095f8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008f9f080 @error=nil, @return_url="http://localhost:3000/orders/79/confirm", @cancel_url="http://localhost:3000/orders/79/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000094bfab0 @base=#<Payment:0x000000078352c8 ...>, @messages={}>, @request_id="f2743663-cc8c-49f2-8920-ca5d779f0807", @header={}, @id="PAY-7CD48251BE850181TKSXX2YQ", @create_time="2015-01-09T07:04:02Z", @update_time="2015-01-09T07:04:02Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000008f02e60 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CD48251BE850181TKSXX2YQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008f01a60 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7TR9134915676415V", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008f007c8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CD48251BE850181TKSXX2YQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-09T07:04:05.175256 #7440]  INFO -- : #<Payment:0x000000078352c8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008f12c98 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000008f12450 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000008f11eb0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008f11438 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000008f10fb0 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000008f10290 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008f0b5d8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008f0ad18 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x00000008f095f8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008f9f080 @error=nil, @return_url="http://localhost:3000/orders/79/confirm", @cancel_url="http://localhost:3000/orders/79/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000094bfab0 @base=#<Payment:0x000000078352c8 ...>, @messages={}>, @request_id="f2743663-cc8c-49f2-8920-ca5d779f0807", @header={}, @id="PAY-7CD48251BE850181TKSXX2YQ", @create_time="2015-01-09T07:04:02Z", @update_time="2015-01-09T07:04:02Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000008f02e60 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CD48251BE850181TKSXX2YQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008f01a60 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7TR9134915676415V", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008f007c8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CD48251BE850181TKSXX2YQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-09T07:04:05.218259 #7440]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7TR9134915676415V
I, [2015-01-09T07:04:05.882297 #7440]  INFO -- : #<Payment:0x000000078352c8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000008f12c98 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000008f12450 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000008f11eb0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008f11438 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000008f10fb0 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000008f10290 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008f0b5d8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008f0ad18 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x00000008f095f8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000008f9f080 @error=nil, @return_url="http://localhost:3000/orders/79/confirm", @cancel_url="http://localhost:3000/orders/79/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000094bfab0 @base=#<Payment:0x000000078352c8 ...>, @messages={}>, @request_id="f2743663-cc8c-49f2-8920-ca5d779f0807", @header={}, @id="PAY-7CD48251BE850181TKSXX2YQ", @create_time="2015-01-09T07:04:02Z", @update_time="2015-01-09T07:04:02Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000008f02e60 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CD48251BE850181TKSXX2YQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008f01a60 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7TR9134915676415V", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000008f007c8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CD48251BE850181TKSXX2YQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-09T07:04:05.928299 #7440]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7TR9134915676415V
I, [2015-01-09T07:04:05.960301 #7440]  INFO -- : Completed 403 Forbidden in 26407ms (ActiveRecord: 274.0ms)
D, [2015-01-09T07:04:46.207603 #7440] DEBUG -- : 
D, [2015-01-09T07:04:46.233605 #7440] DEBUG -- : 
I, [2015-01-09T07:04:46.335611 #7440]  INFO -- : Started GET "/orders/79/confirm?paymentId=PAY-7CD48251BE850181TKSXX2YQ&token=EC-7TR9134915676415V&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-09 07:04:46 +0000
I, [2015-01-09T07:04:46.442617 #7440]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-09T07:04:46.520621 #7440]  INFO -- :   Parameters: {"paymentId"=>"PAY-7CD48251BE850181TKSXX2YQ", "token"=>"EC-7TR9134915676415V", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"79"}
D, [2015-01-09T07:04:46.603626 #7440] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-09T07:04:46.679630 #7440] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-09T07:04:46.764635 #7440] DEBUG -- :   [1m[36mOrder Load (3.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "79"]]
I, [2015-01-09T07:05:21.218606 #7440]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CD48251BE850181TKSXX2YQ
I, [2015-01-09T07:05:23.403731 #7440]  INFO -- : Response[200]: OK, Duration: 2.155s
D, [2015-01-09T07:05:27.281953 #7440] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-09T07:05:27.465963 #7440] DEBUG -- :   [1m[36mSQL (6.0ms)[0m  [1mUPDATE "orders" SET "name" = ?, "email" = ?, "address" = ?, "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 79[0m  [["name", "Test Buyer"], ["email", "simon.king65-buyer@gmail.com"], ["address", "1 Main Terrace"], ["shipping_address1", "1 Main Terrace"], ["updated_at", Fri, 09 Jan 2015 07:05:27 UTC +00:00]]
D, [2015-01-09T07:05:27.702977 #7440] DEBUG -- :   [1m[35m (198.0ms)[0m  commit transaction
I, [2015-01-09T07:05:28.041996 #7440]  INFO -- :   Rendered orders/_form.html.erb (255.0ms)
I, [2015-01-09T07:05:28.105000 #7440]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (324.0ms)
I, [2015-01-09T07:05:31.069169 #7440]  INFO -- : Completed 200 OK in 44514ms (Views: 3328.2ms | ActiveRecord: 212.0ms)
D, [2015-01-09T07:05:31.381187 #7440] DEBUG -- : 
D, [2015-01-09T07:05:31.395188 #7440] DEBUG -- : 
I, [2015-01-09T07:05:31.427190 #7440]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-09 07:05:31 +0000
D, [2015-01-09T07:05:31.530196 #7440] DEBUG -- : 
D, [2015-01-09T07:05:31.546196 #7440] DEBUG -- : 
I, [2015-01-09T07:05:31.582198 #7440]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-09 07:05:31 +0000
D, [2015-01-09T07:05:31.694205 #7440] DEBUG -- : 
D, [2015-01-09T07:05:31.709206 #7440] DEBUG -- : 
I, [2015-01-09T07:05:31.758209 #7440]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-09 07:05:31 +0000
D, [2015-01-09T07:05:31.842213 #7440] DEBUG -- : 
D, [2015-01-09T07:05:31.862214 #7440] DEBUG -- : 
I, [2015-01-09T07:05:31.892216 #7440]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-09 07:05:31 +0000
D, [2015-01-09T07:05:31.960220 #7440] DEBUG -- : 
D, [2015-01-09T07:05:31.978221 #7440] DEBUG -- : 
I, [2015-01-09T07:05:32.009223 #7440]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-09 07:05:31 +0000
D, [2015-01-09T07:05:32.084227 #7440] DEBUG -- : 
D, [2015-01-09T07:05:32.095228 #7440] DEBUG -- : 
I, [2015-01-09T07:05:32.123229 #7440]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-09 07:05:32 +0000
D, [2015-01-09T07:05:32.197234 #7440] DEBUG -- : 
D, [2015-01-09T07:05:32.209234 #7440] DEBUG -- : 
I, [2015-01-09T07:05:32.236236 #7440]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-09 07:05:32 +0000
D, [2015-01-09T07:05:32.302240 #7440] DEBUG -- : 
D, [2015-01-09T07:05:32.321241 #7440] DEBUG -- : 
I, [2015-01-09T07:05:32.350242 #7440]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-09 07:05:32 +0000
D, [2015-01-09T07:05:32.419246 #7440] DEBUG -- : 
D, [2015-01-09T07:05:32.431247 #7440] DEBUG -- : 
I, [2015-01-09T07:05:32.460249 #7440]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-09 07:05:32 +0000
D, [2015-01-09T07:05:32.522252 #7440] DEBUG -- : 
D, [2015-01-09T07:05:32.534253 #7440] DEBUG -- : 
I, [2015-01-09T07:05:32.561254 #7440]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-09 07:05:32 +0000
D, [2015-01-09T07:05:32.622258 #7440] DEBUG -- : 
D, [2015-01-09T07:05:32.634259 #7440] DEBUG -- : 
I, [2015-01-09T07:05:32.660260 #7440]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-09 07:05:32 +0000
D, [2015-01-09T07:05:32.858271 #7440] DEBUG -- : 
D, [2015-01-09T07:05:32.868272 #7440] DEBUG -- : 
I, [2015-01-09T07:05:32.892273 #7440]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-09 07:05:32 +0000
D, [2015-01-09T07:05:32.966278 #7440] DEBUG -- : 
D, [2015-01-09T07:05:32.975278 #7440] DEBUG -- : 
I, [2015-01-09T07:05:33.001280 #7440]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-09 07:05:32 +0000
D, [2015-01-09T07:05:33.071284 #7440] DEBUG -- : 
D, [2015-01-09T07:05:33.081284 #7440] DEBUG -- : 
I, [2015-01-09T07:05:33.111286 #7440]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-09 07:05:33 +0000
D, [2015-01-09T07:05:33.191291 #7440] DEBUG -- : 
D, [2015-01-09T07:05:33.202291 #7440] DEBUG -- : 
I, [2015-01-09T07:05:33.228293 #7440]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-09 07:05:33 +0000
D, [2015-01-09T07:05:33.303297 #7440] DEBUG -- : 
D, [2015-01-09T07:05:33.314298 #7440] DEBUG -- : 
I, [2015-01-09T07:05:33.341299 #7440]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-09 07:05:33 +0000
D, [2015-01-09T07:05:33.399302 #7440] DEBUG -- : 
D, [2015-01-09T07:05:33.410303 #7440] DEBUG -- : 
I, [2015-01-09T07:05:33.431304 #7440]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-09 07:05:33 +0000
D, [2015-01-09T07:05:33.489308 #7440] DEBUG -- : 
D, [2015-01-09T07:05:33.503308 #7440] DEBUG -- : 
I, [2015-01-09T07:05:33.529310 #7440]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-09 07:05:33 +0000
D, [2015-01-09T07:05:33.590313 #7440] DEBUG -- : 
D, [2015-01-09T07:05:33.599314 #7440] DEBUG -- : 
I, [2015-01-09T07:05:33.625315 #7440]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-09 07:05:33 +0000
D, [2015-01-09T07:05:33.679318 #7440] DEBUG -- : 
D, [2015-01-09T07:05:33.690319 #7440] DEBUG -- : 
I, [2015-01-09T07:05:33.716321 #7440]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-09 07:05:33 +0000
D, [2015-01-09T07:05:33.776324 #7440] DEBUG -- : 
D, [2015-01-09T07:05:33.786325 #7440] DEBUG -- : 
I, [2015-01-09T07:05:33.812326 #7440]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-09 07:05:33 +0000
D, [2015-01-09T07:05:33.870329 #7440] DEBUG -- : 
D, [2015-01-09T07:05:33.885330 #7440] DEBUG -- : 
I, [2015-01-09T07:05:33.911332 #7440]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-09 07:05:33 +0000
D, [2015-01-09T07:05:33.959334 #7440] DEBUG -- : 
D, [2015-01-09T07:05:33.966335 #7440] DEBUG -- : 
I, [2015-01-09T07:05:33.987336 #7440]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-09 07:05:33 +0000
D, [2015-01-09T07:05:34.040339 #7440] DEBUG -- : 
D, [2015-01-09T07:05:34.049340 #7440] DEBUG -- : 
I, [2015-01-09T07:05:34.071341 #7440]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-09 07:05:34 +0000
D, [2015-01-09T07:05:34.123344 #7440] DEBUG -- : 
D, [2015-01-09T07:05:34.134344 #7440] DEBUG -- : 
I, [2015-01-09T07:05:34.156346 #7440]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-09 07:05:34 +0000
D, [2015-01-09T07:05:34.205349 #7440] DEBUG -- : 
D, [2015-01-09T07:05:34.215349 #7440] DEBUG -- : 
I, [2015-01-09T07:05:34.240351 #7440]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-09 07:05:34 +0000
D, [2015-01-09T07:05:34.419361 #7440] DEBUG -- : 
D, [2015-01-09T07:05:34.429361 #7440] DEBUG -- : 
I, [2015-01-09T07:05:34.452363 #7440]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-09 07:05:34 +0000
D, [2015-01-09T07:05:39.275639 #7440] DEBUG -- : 
D, [2015-01-09T07:05:39.299640 #7440] DEBUG -- : 
I, [2015-01-09T07:05:39.382645 #7440]  INFO -- : Started POST "/orders/79/execute/79/2VZ7YQDDDPPC4/PAY-7CD48251BE850181TKSXX2YQ" for 127.0.0.1 at 2015-01-09 07:05:39 +0000
I, [2015-01-09T07:05:39.505652 #7440]  INFO -- : Processing by OrdersController#execute as HTML
I, [2015-01-09T07:05:39.614658 #7440]  INFO -- :   Parameters: {"authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order_id"=>"79", "payer_id"=>"2VZ7YQDDDPPC4", "payment_id"=>"PAY-7CD48251BE850181TKSXX2YQ"}
D, [2015-01-09T07:05:39.713664 #7440] DEBUG -- :   [1m[36mOrder Load (3.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "79"]]
I, [2015-01-09T07:05:59.933820 #7440]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CD48251BE850181TKSXX2YQ
I, [2015-01-09T07:06:01.078886 #7440]  INFO -- : Response[200]: OK, Duration: 1.117s
I, [2015-01-09T07:06:01.138889 #7440]  INFO -- : PayPal-Request-Id: a607ecd8-a595-42fa-8dd5-d7fb15a75019
I, [2015-01-09T07:06:01.188892 #7440]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CD48251BE850181TKSXX2YQ/execute
I, [2015-01-09T07:06:03.397018 #7440]  INFO -- : Response[200]: OK, Duration: 2.178s
W, [2015-01-09T07:06:03.440021 #7440]  WARN -- : undefined method `fee=' for #<PayPal::SDK::REST::DataTypes::Details:0x00000002902bd8>
D, [2015-01-09T07:06:03.477023 #7440] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-09T07:06:03.554027 #7440] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
I, [2015-01-09T07:06:03.606030 #7440]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-7CD48251BE850181TKSXX2YQ
I, [2015-01-09T07:06:04.791098 #7440]  INFO -- : Response[200]: OK, Duration: 1.155s
I, [2015-01-09T07:06:04.844101 #7440]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-09T07:06:04.879103 #7440]  INFO -- : Completed 302 Found in 25231ms (ActiveRecord: 5.0ms)
D, [2015-01-09T07:06:04.961108 #7440] DEBUG -- : 
D, [2015-01-09T07:06:04.978109 #7440] DEBUG -- : 
I, [2015-01-09T07:06:05.011111 #7440]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-09 07:06:04 +0000
I, [2015-01-09T07:06:05.139118 #7440]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-09T07:06:05.203121 #7440] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-09T07:06:05.302127 #7440] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-09T07:06:05.383132 #7440]  INFO -- : Cache digest for store/index.html: a93d4e2e981ab3dfce98a095c3b6c059
I, [2015-01-09T07:06:05.449136 #7440]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (5.0ms)
I, [2015-01-09T07:06:05.485138 #7440]  INFO -- :   Rendered store/index.html.erb within layouts/application (219.0ms)
D, [2015-01-09T07:06:05.773154 #7440] DEBUG -- :   [1m[35mLineItem Exists (1.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 36]]
D, [2015-01-09T07:06:05.853159 #7440] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-09T07:06:05.880160 #7440]  INFO -- :   Rendered collection (1.0ms)
I, [2015-01-09T07:06:05.945164 #7440]  INFO -- :   Rendered carts/_cart.html.erb (131.0ms)
I, [2015-01-09T07:06:06.008168 #7440]  INFO -- : Completed 200 OK in 831ms (Views: 755.0ms | ActiveRecord: 6.0ms)
D, [2015-01-09T07:06:06.261182 #7440] DEBUG -- : 
D, [2015-01-09T07:06:06.288184 #7440] DEBUG -- : 
I, [2015-01-09T07:06:06.325186 #7440]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-09 07:06:06 +0000
D, [2015-01-09T07:06:06.375189 #7440] DEBUG -- : 
D, [2015-01-09T07:06:06.388189 #7440] DEBUG -- : 
I, [2015-01-09T07:06:06.427191 #7440]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-09 07:06:06 +0000
D, [2015-01-09T07:06:06.471194 #7440] DEBUG -- : 
D, [2015-01-09T07:06:06.489195 #7440] DEBUG -- : 
I, [2015-01-09T07:06:06.539198 #7440]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-09 07:06:06 +0000
D, [2015-01-09T07:06:06.600201 #7440] DEBUG -- : 
D, [2015-01-09T07:06:06.618202 #7440] DEBUG -- : 
I, [2015-01-09T07:06:06.676206 #7440]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-09 07:06:06 +0000
D, [2015-01-09T07:06:06.746210 #7440] DEBUG -- : 
D, [2015-01-09T07:06:06.764211 #7440] DEBUG -- : 
I, [2015-01-09T07:06:06.817214 #7440]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-09 07:06:06 +0000
D, [2015-01-09T07:06:06.888218 #7440] DEBUG -- : 
D, [2015-01-09T07:06:06.911219 #7440] DEBUG -- : 
I, [2015-01-09T07:06:06.968222 #7440]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-09 07:06:06 +0000
D, [2015-01-09T07:06:07.038226 #7440] DEBUG -- : 
D, [2015-01-09T07:06:07.065228 #7440] DEBUG -- : 
I, [2015-01-09T07:06:07.115231 #7440]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-09 07:06:07 +0000
D, [2015-01-09T07:06:07.189235 #7440] DEBUG -- : 
D, [2015-01-09T07:06:07.214237 #7440] DEBUG -- : 
I, [2015-01-09T07:06:07.273240 #7440]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-09 07:06:07 +0000
D, [2015-01-09T07:06:07.338244 #7440] DEBUG -- : 
D, [2015-01-09T07:06:07.367245 #7440] DEBUG -- : 
I, [2015-01-09T07:06:07.419248 #7440]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-09 07:06:07 +0000
D, [2015-01-09T07:06:07.491252 #7440] DEBUG -- : 
D, [2015-01-09T07:06:07.512254 #7440] DEBUG -- : 
I, [2015-01-09T07:06:07.565257 #7440]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-09 07:06:07 +0000
D, [2015-01-09T07:06:07.638261 #7440] DEBUG -- : 
D, [2015-01-09T07:06:07.657262 #7440] DEBUG -- : 
I, [2015-01-09T07:06:07.704265 #7440]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-09 07:06:07 +0000
D, [2015-01-09T07:06:07.778269 #7440] DEBUG -- : 
D, [2015-01-09T07:06:07.803270 #7440] DEBUG -- : 
I, [2015-01-09T07:06:07.852273 #7440]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-09 07:06:07 +0000
D, [2015-01-09T07:06:07.919277 #7440] DEBUG -- : 
D, [2015-01-09T07:06:07.949279 #7440] DEBUG -- : 
I, [2015-01-09T07:06:07.993281 #7440]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-09 07:06:07 +0000
D, [2015-01-09T07:06:08.070285 #7440] DEBUG -- : 
D, [2015-01-09T07:06:08.090287 #7440] DEBUG -- : 
I, [2015-01-09T07:06:08.149290 #7440]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-09 07:06:08 +0000
D, [2015-01-09T07:06:08.219294 #7440] DEBUG -- : 
D, [2015-01-09T07:06:08.240295 #7440] DEBUG -- : 
I, [2015-01-09T07:06:08.293298 #7440]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-09 07:06:08 +0000
D, [2015-01-09T07:06:08.365302 #7440] DEBUG -- : 
D, [2015-01-09T07:06:08.381303 #7440] DEBUG -- : 
I, [2015-01-09T07:06:08.428306 #7440]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-09 07:06:08 +0000
D, [2015-01-09T07:06:08.496310 #7440] DEBUG -- : 
D, [2015-01-09T07:06:08.514311 #7440] DEBUG -- : 
I, [2015-01-09T07:06:08.564314 #7440]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-09 07:06:08 +0000
D, [2015-01-09T07:06:08.640318 #7440] DEBUG -- : 
D, [2015-01-09T07:06:08.658319 #7440] DEBUG -- : 
I, [2015-01-09T07:06:08.715322 #7440]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-09 07:06:08 +0000
D, [2015-01-09T07:06:08.787326 #7440] DEBUG -- : 
D, [2015-01-09T07:06:08.813328 #7440] DEBUG -- : 
I, [2015-01-09T07:06:08.870331 #7440]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-09 07:06:08 +0000
D, [2015-01-09T07:06:08.937335 #7440] DEBUG -- : 
D, [2015-01-09T07:06:08.959336 #7440] DEBUG -- : 
I, [2015-01-09T07:06:09.009339 #7440]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-09 07:06:08 +0000
D, [2015-01-09T07:06:09.079343 #7440] DEBUG -- : 
D, [2015-01-09T07:06:09.100344 #7440] DEBUG -- : 
I, [2015-01-09T07:06:09.155348 #7440]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-09 07:06:09 +0000
D, [2015-01-09T07:06:09.237352 #7440] DEBUG -- : 
D, [2015-01-09T07:06:09.254353 #7440] DEBUG -- : 
I, [2015-01-09T07:06:09.302356 #7440]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-09 07:06:09 +0000
D, [2015-01-09T07:06:09.361359 #7440] DEBUG -- : 
D, [2015-01-09T07:06:09.383361 #7440] DEBUG -- : 
I, [2015-01-09T07:06:09.438364 #7440]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-09 07:06:09 +0000
D, [2015-01-09T07:06:09.510368 #7440] DEBUG -- : 
D, [2015-01-09T07:06:09.531369 #7440] DEBUG -- : 
I, [2015-01-09T07:06:09.572371 #7440]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-09 07:06:09 +0000
D, [2015-01-09T07:06:09.636375 #7440] DEBUG -- : 
D, [2015-01-09T07:06:09.653376 #7440] DEBUG -- : 
I, [2015-01-09T07:06:09.693378 #7440]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-09 07:06:09 +0000
D, [2015-01-09T07:06:09.758382 #7440] DEBUG -- : 
D, [2015-01-09T07:06:09.775383 #7440] DEBUG -- : 
I, [2015-01-09T07:06:09.820386 #7440]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-09 07:06:09 +0000
D, [2015-01-09T07:06:09.882389 #7440] DEBUG -- : 
D, [2015-01-09T07:06:09.907391 #7440] DEBUG -- : 
I, [2015-01-09T07:06:09.940392 #7440]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-09 07:06:09 +0000
D, [2015-01-09T07:06:10.025397 #7440] DEBUG -- : 
D, [2015-01-09T07:06:10.043398 #7440] DEBUG -- : 
I, [2015-01-09T07:06:10.076400 #7440]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-09 07:06:10 +0000
D, [2015-01-09T07:06:10.164405 #7440] DEBUG -- : 
D, [2015-01-09T07:06:10.177406 #7440] DEBUG -- : 
I, [2015-01-09T07:06:10.214408 #7440]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-09 07:06:10 +0000
D, [2015-01-09T07:06:20.587001 #7440] DEBUG -- : 
D, [2015-01-09T07:06:20.606002 #7440] DEBUG -- : 
I, [2015-01-09T07:06:20.662006 #7440]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-09 07:06:20 +0000
I, [2015-01-09T07:06:20.768012 #7440]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-09T07:06:20.831015 #7440]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-09T07:06:20.918020 #7440] DEBUG -- :   [1m[35mCart Load (1.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-09T07:06:21.003025 #7440] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-09T07:06:21.121032 #7440] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-09T07:06:21.233038 #7440] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-09T07:06:21.281041 #7440] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-09T07:06:21.503054 #7440] DEBUG -- :   [1m[36mSQL (9.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Fri, 09 Jan 2015 07:06:21 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:591ac30,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 09 Jan 2015 07:06:21 UTC +00:00]]
D, [2015-01-09T07:06:21.679064 #7440] DEBUG -- :   [1m[35m (127.0ms)[0m  commit transaction
D, [2015-01-09T07:06:21.807071 #7440] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-09T07:06:21.899076 #7440]  INFO -- :   Rendered line_items/_line_item.html.erb (16.0ms)
I, [2015-01-09T07:06:21.980081 #7440]  INFO -- :   Rendered carts/_cart.html.erb (217.0ms)
I, [2015-01-09T07:06:22.027084 #7440]  INFO -- :   Rendered line_items/create.js.erb (274.0ms)
I, [2015-01-09T07:06:22.079087 #7440]  INFO -- : Completed 200 OK in 1197ms (Views: 342.0ms | ActiveRecord: 147.0ms)
D, [2015-01-09T07:06:55.906022 #7440] DEBUG -- : 
D, [2015-01-09T07:06:55.925023 #7440] DEBUG -- : 
I, [2015-01-09T07:06:55.973025 #7440]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-09 07:06:55 +0000
I, [2015-01-09T07:06:58.218154 #7440]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-09T07:06:58.350161 #7440] DEBUG -- :   [1m[35mUser Load (3.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-09T07:06:58.531172 #7440] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-09T07:06:58.658179 #7440] DEBUG -- :   [1m[35mCart Load (3.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-09T07:06:58.933195 #7440] DEBUG -- :   [1m[36mLineItem Load (3.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-09T07:06:59.252213 #7440]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-09T07:07:02.545401 #7440] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2015-01-09T07:07:02.800416 #7440] DEBUG -- :   [1m[36mSQL (7.0ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Fri, 09 Jan 2015 07:07:02 UTC +00:00], ["updated_at", Fri, 09 Jan 2015 07:07:02 UTC +00:00]]
D, [2015-01-09T07:07:02.901422 #7440] DEBUG -- :   [1m[35mSQL (4.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 107  [["cart_id", nil], ["order_id", 80], ["updated_at", Fri, 09 Jan 2015 07:07:02 UTC +00:00]]
I, [2015-01-09T07:07:02.923423 #7440]  INFO -- : about to @payment.create
D, [2015-01-09T07:07:03.853476 #7440] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-09T07:07:05.033544 #7440]  INFO -- : in order=
I, [2015-01-09T07:07:06.389621 #7440]  INFO -- : in payment.create
I, [2015-01-09T07:07:06.594633 #7440]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Camo Print Tee", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Camo Print Tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/80/confirm", "cancel_url"=>"http://localhost:3000/orders/80/cancel"}}
I, [2015-01-09T07:07:07.249670 #7440]  INFO -- : #<ActiveModel::Errors:0x000000049d4a28 @base=#<Payment:0x00000007bc6748 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007bc5af0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000059fcec8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000059fc8b0 @error=nil, @total="19.99", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000059edd60 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000059a5448 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000005669e00 @error=nil, @return_url="http://localhost:3000/orders/80/confirm", @cancel_url="http://localhost:3000/orders/80/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000049d4a28 ...>>, @messages={}>
I, [2015-01-09T07:07:07.280672 #7440]  INFO -- : got past invalid
I, [2015-01-09T07:07:07.361677 #7440]  INFO -- : PayPal-Request-Id: 57e080a4-707d-4aec-a920-9f4a098756da
I, [2015-01-09T07:07:07.412680 #7440]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-09T07:07:08.583747 #7440]  INFO -- : Response[201]: Created, Duration: 1.127s
I, [2015-01-09T07:07:08.622749 #7440]  INFO -- : back from super
I, [2015-01-09T07:07:09.096776 #7440]  INFO -- : {"id"=>"PAY-6KC74790RC891690DKSXX4HQ", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99", "details"=>{"subtotal"=>"19.99"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Camo Print Tee", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Camo Print Tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/80/confirm", "cancel_url"=>"http://localhost:3000/orders/80/cancel"}, "create_time"=>"2015-01-09T07:07:10Z", "update_time"=>"2015-01-09T07:07:10Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KC74790RC891690DKSXX4HQ", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-5L339752079618833", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KC74790RC891690DKSXX4HQ/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-09T07:07:09.313788 #7440] DEBUG -- :   [1m[35mSQL (8.0ms)[0m  UPDATE "orders" SET "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ?, "pay_type" = ? WHERE "orders"."id" = 80  [["created_at", Fri, 09 Jan 2015 07:07:02 UTC +00:00], ["updated_at", Fri, 09 Jan 2015 07:07:02 UTC +00:00], ["id", 80], ["payment_id", "PAY-6KC74790RC891690DKSXX4HQ"], ["state", "created"], ["pay_type", "paypal"]]
D, [2015-01-09T07:07:09.394793 #7440] DEBUG -- :   [1m[36mSQL (1.0ms)[0m  [1mUPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 80[0m
I, [2015-01-09T07:07:09.429795 #7440]  INFO -- : @payment save just done
I, [2015-01-09T07:07:10.324846 #7440]  INFO -- : #<Payment:0x00000007bc6748 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000004532150 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000004531278 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000004530b70 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000004523330 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000004522138 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000045209c8 @error=nil, @subtotal="19.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000451a820 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000004518908 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000005669e00 @error=nil, @return_url="http://localhost:3000/orders/80/confirm", @cancel_url="http://localhost:3000/orders/80/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000049d4a28 @base=#<Payment:0x00000007bc6748 ...>, @messages={}>, @request_id="57e080a4-707d-4aec-a920-9f4a098756da", @header={}, @id="PAY-6KC74790RC891690DKSXX4HQ", @create_time="2015-01-09T07:07:10Z", @update_time="2015-01-09T07:07:10Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000044d7e58 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KC74790RC891690DKSXX4HQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000044d6788 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-5L339752079618833", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000044d44d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KC74790RC891690DKSXX4HQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-09T07:07:11.014886 #7440]  INFO -- : #<Payment:0x00000007bc6748 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000004532150 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000004531278 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000004530b70 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000004523330 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000004522138 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000045209c8 @error=nil, @subtotal="19.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000451a820 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000004518908 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000005669e00 @error=nil, @return_url="http://localhost:3000/orders/80/confirm", @cancel_url="http://localhost:3000/orders/80/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000049d4a28 @base=#<Payment:0x00000007bc6748 ...>, @messages={}>, @request_id="57e080a4-707d-4aec-a920-9f4a098756da", @header={}, @id="PAY-6KC74790RC891690DKSXX4HQ", @create_time="2015-01-09T07:07:10Z", @update_time="2015-01-09T07:07:10Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000044d7e58 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KC74790RC891690DKSXX4HQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000044d6788 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-5L339752079618833", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000044d44d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KC74790RC891690DKSXX4HQ/execute", @rel="execute", @method="POST">]>
D, [2015-01-09T07:07:11.221898 #7440] DEBUG -- :   [1m[35m (187.0ms)[0m  commit transaction
D, [2015-01-09T07:07:11.432910 #7440] DEBUG -- :   [1m[36mSQL (163.0ms)[0m  [1mUPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 80[0m
I, [2015-01-09T07:07:11.449911 #7440]  INFO -- : about to approve url
I, [2015-01-09T07:07:12.125949 #7440]  INFO -- : #<Payment:0x00000007bc6748 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000004532150 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000004531278 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000004530b70 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000004523330 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000004522138 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000045209c8 @error=nil, @subtotal="19.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000451a820 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000004518908 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000005669e00 @error=nil, @return_url="http://localhost:3000/orders/80/confirm", @cancel_url="http://localhost:3000/orders/80/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000049d4a28 @base=#<Payment:0x00000007bc6748 ...>, @messages={}>, @request_id="57e080a4-707d-4aec-a920-9f4a098756da", @header={}, @id="PAY-6KC74790RC891690DKSXX4HQ", @create_time="2015-01-09T07:07:10Z", @update_time="2015-01-09T07:07:10Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000044d7e58 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KC74790RC891690DKSXX4HQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000044d6788 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-5L339752079618833", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000044d44d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KC74790RC891690DKSXX4HQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-09T07:07:12.750985 #7440]  INFO -- : #<Payment:0x00000007bc6748 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000004532150 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000004531278 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000004530b70 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000004523330 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000004522138 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000045209c8 @error=nil, @subtotal="19.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000451a820 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000004518908 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000005669e00 @error=nil, @return_url="http://localhost:3000/orders/80/confirm", @cancel_url="http://localhost:3000/orders/80/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000049d4a28 @base=#<Payment:0x00000007bc6748 ...>, @messages={}>, @request_id="57e080a4-707d-4aec-a920-9f4a098756da", @header={}, @id="PAY-6KC74790RC891690DKSXX4HQ", @create_time="2015-01-09T07:07:10Z", @update_time="2015-01-09T07:07:10Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000044d7e58 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KC74790RC891690DKSXX4HQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000044d6788 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-5L339752079618833", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000044d44d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KC74790RC891690DKSXX4HQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-09T07:07:12.794988 #7440]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-5L339752079618833
I, [2015-01-09T07:07:13.412023 #7440]  INFO -- : #<Payment:0x00000007bc6748 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000004532150 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000004531278 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000004530b70 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000004523330 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000004522138 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000045209c8 @error=nil, @subtotal="19.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000451a820 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000004518908 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000005669e00 @error=nil, @return_url="http://localhost:3000/orders/80/confirm", @cancel_url="http://localhost:3000/orders/80/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000049d4a28 @base=#<Payment:0x00000007bc6748 ...>, @messages={}>, @request_id="57e080a4-707d-4aec-a920-9f4a098756da", @header={}, @id="PAY-6KC74790RC891690DKSXX4HQ", @create_time="2015-01-09T07:07:10Z", @update_time="2015-01-09T07:07:10Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000044d7e58 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KC74790RC891690DKSXX4HQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000044d6788 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-5L339752079618833", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000044d44d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KC74790RC891690DKSXX4HQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-09T07:07:13.460026 #7440]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-5L339752079618833
I, [2015-01-09T07:07:13.489027 #7440]  INFO -- : Completed 403 Forbidden in 15243ms (ActiveRecord: 414.0ms)
D, [2015-01-09T07:07:59.895682 #7440] DEBUG -- : 
D, [2015-01-09T07:07:59.908682 #7440] DEBUG -- : 
I, [2015-01-09T07:07:59.964685 #7440]  INFO -- : Started GET "/orders/80/confirm?paymentId=PAY-6KC74790RC891690DKSXX4HQ&token=EC-5L339752079618833&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-09 07:07:59 +0000
I, [2015-01-09T07:08:00.072692 #7440]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-09T07:08:00.133695 #7440]  INFO -- :   Parameters: {"paymentId"=>"PAY-6KC74790RC891690DKSXX4HQ", "token"=>"EC-5L339752079618833", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"80"}
D, [2015-01-09T07:08:00.196699 #7440] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-09T07:08:00.255702 #7440] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-09T07:08:00.322706 #7440] DEBUG -- :   [1m[35mOrder Load (2.0ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "80"]]
I, [2015-01-09T07:08:07.322106 #7440]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KC74790RC891690DKSXX4HQ
I, [2015-01-09T07:08:08.418169 #7440]  INFO -- : Response[200]: OK, Duration: 1.064s
D, [2015-01-09T07:08:09.683241 #7440] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-09T07:08:09.840250 #7440] DEBUG -- :   [1m[35mSQL (6.0ms)[0m  UPDATE "orders" SET "name" = ?, "email" = ?, "address" = ?, "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 80  [["name", "Test Buyer"], ["email", "simon.king65-buyer@gmail.com"], ["address", "1 Main Terrace"], ["shipping_address1", "1 Main Terrace"], ["updated_at", Fri, 09 Jan 2015 07:08:09 UTC +00:00]]
D, [2015-01-09T07:08:09.995259 #7440] DEBUG -- :   [1m[36m (120.0ms)[0m  [1mcommit transaction[0m
I, [2015-01-09T07:08:10.203271 #7440]  INFO -- :   Rendered orders/_form.html.erb (143.0ms)
I, [2015-01-09T07:08:10.252274 #7440]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (196.0ms)
I, [2015-01-09T07:08:10.442285 #7440]  INFO -- : Completed 200 OK in 10267ms (Views: 401.0ms | ActiveRecord: 133.0ms)
D, [2015-01-09T07:08:10.793305 #7440] DEBUG -- : 
D, [2015-01-09T07:08:10.806306 #7440] DEBUG -- : 
I, [2015-01-09T07:08:10.839307 #7440]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-09 07:08:10 +0000
D, [2015-01-09T07:08:10.914312 #7440] DEBUG -- : 
D, [2015-01-09T07:08:10.927312 #7440] DEBUG -- : 
I, [2015-01-09T07:08:10.961314 #7440]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-09 07:08:10 +0000
D, [2015-01-09T07:08:11.036319 #7440] DEBUG -- : 
D, [2015-01-09T07:08:11.054320 #7440] DEBUG -- : 
I, [2015-01-09T07:08:11.095322 #7440]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-09 07:08:11 +0000
D, [2015-01-09T07:08:11.173327 #7440] DEBUG -- : 
D, [2015-01-09T07:08:11.197328 #7440] DEBUG -- : 
I, [2015-01-09T07:08:11.233330 #7440]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-09 07:08:11 +0000
D, [2015-01-09T07:08:11.282333 #7440] DEBUG -- : 
D, [2015-01-09T07:08:11.292333 #7440] DEBUG -- : 
I, [2015-01-09T07:08:11.330336 #7440]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-09 07:08:11 +0000
D, [2015-01-09T07:08:11.385339 #7440] DEBUG -- : 
D, [2015-01-09T07:08:11.400340 #7440] DEBUG -- : 
I, [2015-01-09T07:08:11.436342 #7440]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-09 07:08:11 +0000
D, [2015-01-09T07:08:11.492345 #7440] DEBUG -- : 
D, [2015-01-09T07:08:11.504346 #7440] DEBUG -- : 
I, [2015-01-09T07:08:11.533347 #7440]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-09 07:08:11 +0000
D, [2015-01-09T07:08:11.599351 #7440] DEBUG -- : 
D, [2015-01-09T07:08:11.612352 #7440] DEBUG -- : 
I, [2015-01-09T07:08:11.646354 #7440]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-09 07:08:11 +0000
D, [2015-01-09T07:08:11.699357 #7440] DEBUG -- : 
D, [2015-01-09T07:08:11.708357 #7440] DEBUG -- : 
I, [2015-01-09T07:08:11.739359 #7440]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-09 07:08:11 +0000
D, [2015-01-09T07:08:11.796362 #7440] DEBUG -- : 
D, [2015-01-09T07:08:11.813363 #7440] DEBUG -- : 
I, [2015-01-09T07:08:11.853365 #7440]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-09 07:08:11 +0000
D, [2015-01-09T07:08:11.907369 #7440] DEBUG -- : 
D, [2015-01-09T07:08:11.925370 #7440] DEBUG -- : 
I, [2015-01-09T07:08:11.967372 #7440]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-09 07:08:11 +0000
D, [2015-01-09T07:08:12.026375 #7440] DEBUG -- : 
D, [2015-01-09T07:08:12.039376 #7440] DEBUG -- : 
I, [2015-01-09T07:08:12.074378 #7440]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-09 07:08:12 +0000
D, [2015-01-09T07:08:12.127381 #7440] DEBUG -- : 
D, [2015-01-09T07:08:12.144382 #7440] DEBUG -- : 
I, [2015-01-09T07:08:12.183384 #7440]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-09 07:08:12 +0000
D, [2015-01-09T07:08:12.247388 #7440] DEBUG -- : 
D, [2015-01-09T07:08:12.264389 #7440] DEBUG -- : 
I, [2015-01-09T07:08:12.297391 #7440]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-09 07:08:12 +0000
D, [2015-01-09T07:08:12.353394 #7440] DEBUG -- : 
D, [2015-01-09T07:08:12.370395 #7440] DEBUG -- : 
I, [2015-01-09T07:08:12.410397 #7440]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-09 07:08:12 +0000
D, [2015-01-09T07:08:12.475401 #7440] DEBUG -- : 
D, [2015-01-09T07:08:12.489402 #7440] DEBUG -- : 
I, [2015-01-09T07:08:12.530404 #7440]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-09 07:08:12 +0000
D, [2015-01-09T07:08:12.585407 #7440] DEBUG -- : 
D, [2015-01-09T07:08:12.599408 #7440] DEBUG -- : 
I, [2015-01-09T07:08:12.635410 #7440]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-09 07:08:12 +0000
D, [2015-01-09T07:08:12.695414 #7440] DEBUG -- : 
D, [2015-01-09T07:08:12.717415 #7440] DEBUG -- : 
I, [2015-01-09T07:08:12.765418 #7440]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-09 07:08:12 +0000
D, [2015-01-09T07:08:12.830421 #7440] DEBUG -- : 
D, [2015-01-09T07:08:12.846422 #7440] DEBUG -- : 
I, [2015-01-09T07:08:12.903426 #7440]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-09 07:08:12 +0000
D, [2015-01-09T07:08:12.976430 #7440] DEBUG -- : 
D, [2015-01-09T07:08:12.996431 #7440] DEBUG -- : 
I, [2015-01-09T07:08:13.042433 #7440]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-09 07:08:12 +0000
D, [2015-01-09T07:08:13.112437 #7440] DEBUG -- : 
D, [2015-01-09T07:08:13.132439 #7440] DEBUG -- : 
I, [2015-01-09T07:08:13.186442 #7440]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-09 07:08:13 +0000
D, [2015-01-09T07:08:13.267446 #7440] DEBUG -- : 
D, [2015-01-09T07:08:13.290448 #7440] DEBUG -- : 
I, [2015-01-09T07:08:13.343451 #7440]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-09 07:08:13 +0000
D, [2015-01-09T07:08:13.415455 #7440] DEBUG -- : 
D, [2015-01-09T07:08:13.437456 #7440] DEBUG -- : 
I, [2015-01-09T07:08:13.499460 #7440]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-09 07:08:13 +0000
D, [2015-01-09T07:08:13.569464 #7440] DEBUG -- : 
D, [2015-01-09T07:08:13.591465 #7440] DEBUG -- : 
I, [2015-01-09T07:08:13.646468 #7440]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-09 07:08:13 +0000
D, [2015-01-09T07:08:13.719472 #7440] DEBUG -- : 
D, [2015-01-09T07:08:13.742474 #7440] DEBUG -- : 
I, [2015-01-09T07:08:13.799477 #7440]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-09 07:08:13 +0000
D, [2015-01-09T07:08:13.870481 #7440] DEBUG -- : 
D, [2015-01-09T07:08:13.892482 #7440] DEBUG -- : 
I, [2015-01-09T07:08:13.949485 #7440]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-09 07:08:13 +0000
D, [2015-01-09T07:08:14.019489 #7440] DEBUG -- : 
D, [2015-01-09T07:08:14.040491 #7440] DEBUG -- : 
I, [2015-01-09T07:08:14.084493 #7440]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-09 07:08:14 +0000
D, [2015-01-09T07:08:20.050834 #7440] DEBUG -- : 
D, [2015-01-09T07:08:20.062835 #7440] DEBUG -- : 
I, [2015-01-09T07:08:20.111838 #7440]  INFO -- : Started POST "/orders/80/execute/80/2VZ7YQDDDPPC4/PAY-6KC74790RC891690DKSXX4HQ" for 127.0.0.1 at 2015-01-09 07:08:20 +0000
I, [2015-01-09T07:08:20.219844 #7440]  INFO -- : Processing by OrdersController#execute as HTML
I, [2015-01-09T07:08:20.283848 #7440]  INFO -- :   Parameters: {"authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order_id"=>"80", "payer_id"=>"2VZ7YQDDDPPC4", "payment_id"=>"PAY-6KC74790RC891690DKSXX4HQ"}
D, [2015-01-09T07:08:20.347851 #7440] DEBUG -- :   [1m[35mOrder Load (1.0ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "80"]]
I, [2015-01-09T07:08:44.113211 #7440]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KC74790RC891690DKSXX4HQ
I, [2015-01-09T07:08:45.268277 #7440]  INFO -- : Response[200]: OK, Duration: 1.130s
I, [2015-01-09T07:08:57.004948 #7440]  INFO -- : PayPal-Request-Id: 309e9da0-9f2a-49fb-829e-ede4673b4969
I, [2015-01-09T07:08:57.051951 #7440]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KC74790RC891690DKSXX4HQ/execute
I, [2015-01-09T07:08:59.149071 #7440]  INFO -- : Response[200]: OK, Duration: 2.059s
W, [2015-01-09T07:08:59.220075 #7440]  WARN -- : undefined method `fee=' for #<PayPal::SDK::REST::DataTypes::Details:0x00000007a015e8>
D, [2015-01-09T07:10:41.781941 #7440] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-09T07:10:41.844944 #7440] DEBUG -- :   [1m[35m (2.0ms)[0m  rollback transaction
I, [2015-01-09T07:11:36.805088 #7440]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-6KC74790RC891690DKSXX4HQ
I, [2015-01-09T07:11:38.106162 #7440]  INFO -- : Response[200]: OK, Duration: 1.276s
I, [2015-01-09T07:11:38.166166 #7440]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-09T07:11:38.208168 #7440]  INFO -- : Completed 302 Found in 197883ms (ActiveRecord: 5.0ms)
D, [2015-01-09T07:11:38.293173 #7440] DEBUG -- : 
D, [2015-01-09T07:11:38.309174 #7440] DEBUG -- : 
I, [2015-01-09T07:11:38.348176 #7440]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-09 07:11:38 +0000
I, [2015-01-09T07:11:38.483184 #7440]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-09T07:11:38.569189 #7440] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-09T07:11:38.660194 #7440] DEBUG -- :   [1m[35mProduct Load (3.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-09T07:11:38.742199 #7440]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (4.0ms)
I, [2015-01-09T07:11:38.789202 #7440]  INFO -- :   Rendered store/index.html.erb within layouts/application (143.0ms)
D, [2015-01-09T07:11:39.032215 #7440] DEBUG -- :   [1m[36mLineItem Exists (3.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-09T07:11:39.127221 #7440] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-09T07:11:39.161223 #7440]  INFO -- :   Rendered collection (1.0ms)
I, [2015-01-09T07:11:39.243227 #7440]  INFO -- :   Rendered carts/_cart.html.erb (162.0ms)
I, [2015-01-09T07:11:39.322232 #7440]  INFO -- : Completed 200 OK in 789ms (Views: 685.0ms | ActiveRecord: 10.0ms)
D, [2015-01-09T07:11:39.655251 #7440] DEBUG -- : 
D, [2015-01-09T07:11:39.696253 #7440] DEBUG -- : 
I, [2015-01-09T07:11:39.739256 #7440]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-09 07:11:39 +0000
D, [2015-01-09T07:11:39.825261 #7440] DEBUG -- : 
D, [2015-01-09T07:11:39.841262 #7440] DEBUG -- : 
I, [2015-01-09T07:11:39.883264 #7440]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-09 07:11:39 +0000
D, [2015-01-09T07:11:39.978270 #7440] DEBUG -- : 
D, [2015-01-09T07:11:39.990270 #7440] DEBUG -- : 
I, [2015-01-09T07:11:40.023272 #7440]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-09 07:11:39 +0000
D, [2015-01-09T07:11:40.109277 #7440] DEBUG -- : 
D, [2015-01-09T07:11:40.123278 #7440] DEBUG -- : 
I, [2015-01-09T07:11:40.169280 #7440]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-09 07:11:40 +0000
D, [2015-01-09T07:11:40.247285 #7440] DEBUG -- : 
D, [2015-01-09T07:11:40.263286 #7440] DEBUG -- : 
I, [2015-01-09T07:11:40.300288 #7440]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-09 07:11:40 +0000
D, [2015-01-09T07:11:40.376292 #7440] DEBUG -- : 
D, [2015-01-09T07:11:40.403294 #7440] DEBUG -- : 
I, [2015-01-09T07:11:40.445296 #7440]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-09 07:11:40 +0000
D, [2015-01-09T07:11:40.518300 #7440] DEBUG -- : 
D, [2015-01-09T07:11:40.535301 #7440] DEBUG -- : 
I, [2015-01-09T07:11:40.576304 #7440]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-09 07:11:40 +0000
D, [2015-01-09T07:11:40.658308 #7440] DEBUG -- : 
D, [2015-01-09T07:11:40.681310 #7440] DEBUG -- : 
I, [2015-01-09T07:11:40.726312 #7440]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-09 07:11:40 +0000
D, [2015-01-09T07:11:40.810317 #7440] DEBUG -- : 
D, [2015-01-09T07:11:40.822318 #7440] DEBUG -- : 
I, [2015-01-09T07:11:40.854320 #7440]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-09 07:11:40 +0000
D, [2015-01-09T07:11:40.950325 #7440] DEBUG -- : 
D, [2015-01-09T07:11:40.965326 #7440] DEBUG -- : 
I, [2015-01-09T07:11:41.003328 #7440]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-09 07:11:40 +0000
D, [2015-01-09T07:11:41.085333 #7440] DEBUG -- : 
D, [2015-01-09T07:11:41.123335 #7440] DEBUG -- : 
I, [2015-01-09T07:11:41.162337 #7440]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-09 07:11:41 +0000
D, [2015-01-09T07:11:41.266343 #7440] DEBUG -- : 
D, [2015-01-09T07:11:41.282344 #7440] DEBUG -- : 
I, [2015-01-09T07:11:41.319346 #7440]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-09 07:11:41 +0000
D, [2015-01-09T07:11:41.385350 #7440] DEBUG -- : 
D, [2015-01-09T07:11:41.404351 #7440] DEBUG -- : 
I, [2015-01-09T07:11:41.438353 #7440]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-09 07:11:41 +0000
D, [2015-01-09T07:11:41.522358 #7440] DEBUG -- : 
D, [2015-01-09T07:11:41.537359 #7440] DEBUG -- : 
I, [2015-01-09T07:11:41.577361 #7440]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-09 07:11:41 +0000
D, [2015-01-09T07:11:41.656366 #7440] DEBUG -- : 
D, [2015-01-09T07:11:41.672366 #7440] DEBUG -- : 
I, [2015-01-09T07:11:41.704368 #7440]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-09 07:11:41 +0000
D, [2015-01-09T07:11:41.796374 #7440] DEBUG -- : 
D, [2015-01-09T07:11:41.819375 #7440] DEBUG -- : 
I, [2015-01-09T07:11:41.860377 #7440]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-09 07:11:41 +0000
D, [2015-01-09T07:11:41.948382 #7440] DEBUG -- : 
D, [2015-01-09T07:11:41.964383 #7440] DEBUG -- : 
I, [2015-01-09T07:11:42.019386 #7440]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-09 07:11:41 +0000
D, [2015-01-09T07:11:42.103391 #7440] DEBUG -- : 
D, [2015-01-09T07:11:42.118392 #7440] DEBUG -- : 
I, [2015-01-09T07:11:42.153394 #7440]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-09 07:11:42 +0000
D, [2015-01-09T07:11:42.227398 #7440] DEBUG -- : 
D, [2015-01-09T07:11:42.249399 #7440] DEBUG -- : 
I, [2015-01-09T07:11:42.283401 #7440]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-09 07:11:42 +0000
D, [2015-01-09T07:11:42.397408 #7440] DEBUG -- : 
D, [2015-01-09T07:11:42.413409 #7440] DEBUG -- : 
I, [2015-01-09T07:11:42.453411 #7440]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-09 07:11:42 +0000
D, [2015-01-09T07:11:42.536416 #7440] DEBUG -- : 
D, [2015-01-09T07:11:42.549417 #7440] DEBUG -- : 
I, [2015-01-09T07:11:42.583419 #7440]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-09 07:11:42 +0000
D, [2015-01-09T07:11:42.667423 #7440] DEBUG -- : 
D, [2015-01-09T07:11:42.696425 #7440] DEBUG -- : 
I, [2015-01-09T07:11:42.735427 #7440]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-09 07:11:42 +0000
D, [2015-01-09T07:11:42.804431 #7440] DEBUG -- : 
D, [2015-01-09T07:11:42.820432 #7440] DEBUG -- : 
I, [2015-01-09T07:11:42.859434 #7440]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-09 07:11:42 +0000
D, [2015-01-09T07:11:42.934439 #7440] DEBUG -- : 
D, [2015-01-09T07:11:42.948439 #7440] DEBUG -- : 
I, [2015-01-09T07:11:42.987442 #7440]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-09 07:11:42 +0000
D, [2015-01-09T07:11:43.071446 #7440] DEBUG -- : 
D, [2015-01-09T07:11:43.083447 #7440] DEBUG -- : 
I, [2015-01-09T07:11:43.117449 #7440]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-09 07:11:43 +0000
D, [2015-01-09T07:11:43.182453 #7440] DEBUG -- : 
D, [2015-01-09T07:11:43.197454 #7440] DEBUG -- : 
I, [2015-01-09T07:11:43.237456 #7440]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-09 07:11:43 +0000
D, [2015-01-09T07:11:43.357463 #7440] DEBUG -- : 
D, [2015-01-09T07:11:43.376464 #7440] DEBUG -- : 
I, [2015-01-09T07:11:43.412466 #7440]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-09 07:11:43 +0000
D, [2015-01-09T07:11:43.504471 #7440] DEBUG -- : 
D, [2015-01-09T07:11:43.523472 #7440] DEBUG -- : 
I, [2015-01-09T07:11:43.573475 #7440]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-09 07:11:43 +0000
D, [2015-01-09T07:11:43.636479 #7440] DEBUG -- : 
D, [2015-01-09T07:11:43.648479 #7440] DEBUG -- : 
I, [2015-01-09T07:11:43.686482 #7440]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-09 07:11:43 +0000
D, [2015-01-09T07:12:16.767374 #7440] DEBUG -- : 
D, [2015-01-09T07:12:16.790375 #7440] DEBUG -- : 
I, [2015-01-09T07:12:16.840378 #7440]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-09 07:12:16 +0000
I, [2015-01-09T07:12:16.967385 #7440]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-09T07:12:17.039389 #7440]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-09T07:12:17.118394 #7440] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-09T07:12:17.189398 #7440] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-09T07:12:17.301404 #7440] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 36]]
D, [2015-01-09T07:12:17.400410 #7440] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-09T07:12:17.445413 #7440] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-09T07:12:17.654424 #7440] DEBUG -- :   [1m[35mSQL (10.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 36], ["created_at", Fri, 09 Jan 2015 07:12:17 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:80a4da0,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 09 Jan 2015 07:12:17 UTC +00:00]]
D, [2015-01-09T07:12:17.912439 #7440] DEBUG -- :   [1m[36m (214.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-09T07:12:18.029446 #7440] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-09T07:12:18.106450 #7440]  INFO -- :   Rendered line_items/_line_item.html.erb (15.0ms)
I, [2015-01-09T07:12:18.179455 #7440]  INFO -- :   Rendered carts/_cart.html.erb (188.0ms)
I, [2015-01-09T07:12:18.220457 #7440]  INFO -- :   Rendered line_items/create.js.erb (239.0ms)
I, [2015-01-09T07:12:18.269460 #7440]  INFO -- : Completed 200 OK in 1183ms (Views: 303.0ms | ActiveRecord: 235.0ms)
D, [2015-01-09T07:12:20.741601 #7440] DEBUG -- : 
D, [2015-01-09T07:12:20.761602 #7440] DEBUG -- : 
I, [2015-01-09T07:12:20.803605 #7440]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-09 07:12:20 +0000
I, [2015-01-09T07:12:20.887609 #7440]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-09T07:12:20.947613 #7440] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-09T07:12:21.016617 #7440] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-09T07:12:21.088621 #7440] DEBUG -- :   [1m[36mCart Load (4.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-09T07:12:21.166625 #7440] DEBUG -- :   [1m[35mLineItem Load (1.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-09T07:12:21.268631 #7440]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-09T07:12:21.734658 #7440] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-09T07:12:21.828663 #7440] DEBUG -- :   [1m[35mSQL (6.0ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Fri, 09 Jan 2015 07:12:21 UTC +00:00], ["updated_at", Fri, 09 Jan 2015 07:12:21 UTC +00:00]]
D, [2015-01-09T07:12:21.945670 #7440] DEBUG -- :   [1m[36mSQL (4.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 108[0m  [["cart_id", nil], ["order_id", 81], ["updated_at", Fri, 09 Jan 2015 07:12:21 UTC +00:00]]
I, [2015-01-09T07:12:21.976672 #7440]  INFO -- : about to @payment.create
D, [2015-01-09T07:12:52.715430 #7440] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-09T07:12:54.588537 #7440]  INFO -- : in order=
I, [2015-01-09T07:12:55.282577 #7440]  INFO -- : in payment.create
I, [2015-01-09T07:12:55.420585 #7440]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Camo Print Tee", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Camo Print Tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/81/confirm", "cancel_url"=>"http://localhost:3000/orders/81/cancel"}}
I, [2015-01-09T07:12:55.835608 #7440]  INFO -- : #<ActiveModel::Errors:0x0000000939ec80 @base=#<Payment:0x00000005651a80 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005650130 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000004356c50 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000004356138 @error=nil, @total="19.99", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000434d948 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000043441e0 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000096fc3f0 @error=nil, @return_url="http://localhost:3000/orders/81/confirm", @cancel_url="http://localhost:3000/orders/81/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000939ec80 ...>>, @messages={}>
I, [2015-01-09T07:12:55.856610 #7440]  INFO -- : got past invalid
I, [2015-01-09T07:12:55.929614 #7440]  INFO -- : PayPal-Request-Id: b8e5fc83-e64d-4ddf-9fcb-7653f887a6c8
I, [2015-01-09T07:12:55.963616 #7440]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-09T07:12:57.178685 #7440]  INFO -- : Response[201]: Created, Duration: 1.178s
I, [2015-01-09T07:12:57.213687 #7440]  INFO -- : back from super
I, [2015-01-09T07:12:57.660713 #7440]  INFO -- : {"id"=>"PAY-2X861001RG670861PKSXX66Q", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99", "details"=>{"subtotal"=>"19.99"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Camo Print Tee", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Camo Print Tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/81/confirm", "cancel_url"=>"http://localhost:3000/orders/81/cancel"}, "create_time"=>"2015-01-09T07:12:58Z", "update_time"=>"2015-01-09T07:12:59Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-2X861001RG670861PKSXX66Q", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6X164414BR9480824", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-2X861001RG670861PKSXX66Q/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-09T07:12:57.870725 #7440] DEBUG -- :   [1m[36mSQL (14.0ms)[0m  [1mUPDATE "orders" SET "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ?, "pay_type" = ? WHERE "orders"."id" = 81[0m  [["created_at", Fri, 09 Jan 2015 07:12:21 UTC +00:00], ["updated_at", Fri, 09 Jan 2015 07:12:21 UTC +00:00], ["id", 81], ["payment_id", "PAY-2X861001RG670861PKSXX66Q"], ["state", "created"], ["pay_type", "paypal"]]
D, [2015-01-09T07:12:57.941729 #7440] DEBUG -- :   [1m[35mSQL (1.0ms)[0m  UPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 81
I, [2015-01-09T07:12:57.974731 #7440]  INFO -- : @payment save just done
I, [2015-01-09T07:12:58.987789 #7440]  INFO -- : #<Payment:0x00000005651a80 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000912b818 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x0000000912ae40 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x0000000912a990 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009129db0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009129810 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009128c30 @error=nil, @subtotal="19.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000911b8c8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000911ae00 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000096fc3f0 @error=nil, @return_url="http://localhost:3000/orders/81/confirm", @cancel_url="http://localhost:3000/orders/81/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000939ec80 @base=#<Payment:0x00000005651a80 ...>, @messages={}>, @request_id="b8e5fc83-e64d-4ddf-9fcb-7653f887a6c8", @header={}, @id="PAY-2X861001RG670861PKSXX66Q", @create_time="2015-01-09T07:12:58Z", @update_time="2015-01-09T07:12:59Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009118b28 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-2X861001RG670861PKSXX66Q", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000091139e8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6X164414BR9480824", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000091129a8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-2X861001RG670861PKSXX66Q/execute", @rel="execute", @method="POST">]>
I, [2015-01-09T07:13:00.014847 #7440]  INFO -- : #<Payment:0x00000005651a80 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000912b818 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x0000000912ae40 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x0000000912a990 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009129db0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009129810 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009128c30 @error=nil, @subtotal="19.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000911b8c8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000911ae00 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000096fc3f0 @error=nil, @return_url="http://localhost:3000/orders/81/confirm", @cancel_url="http://localhost:3000/orders/81/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000939ec80 @base=#<Payment:0x00000005651a80 ...>, @messages={}>, @request_id="b8e5fc83-e64d-4ddf-9fcb-7653f887a6c8", @header={}, @id="PAY-2X861001RG670861PKSXX66Q", @create_time="2015-01-09T07:12:58Z", @update_time="2015-01-09T07:12:59Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009118b28 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-2X861001RG670861PKSXX66Q", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000091139e8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6X164414BR9480824", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000091129a8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-2X861001RG670861PKSXX66Q/execute", @rel="execute", @method="POST">]>
D, [2015-01-09T07:13:00.343866 #7440] DEBUG -- :   [1m[36m (288.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-09T07:13:00.537877 #7440] DEBUG -- :   [1m[35mSQL (126.0ms)[0m  UPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 81
I, [2015-01-09T07:13:00.566879 #7440]  INFO -- : about to approve url
I, [2015-01-09T07:13:01.611939 #7440]  INFO -- : #<Payment:0x00000005651a80 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000912b818 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x0000000912ae40 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x0000000912a990 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009129db0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009129810 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009128c30 @error=nil, @subtotal="19.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000911b8c8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000911ae00 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000096fc3f0 @error=nil, @return_url="http://localhost:3000/orders/81/confirm", @cancel_url="http://localhost:3000/orders/81/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000939ec80 @base=#<Payment:0x00000005651a80 ...>, @messages={}>, @request_id="b8e5fc83-e64d-4ddf-9fcb-7653f887a6c8", @header={}, @id="PAY-2X861001RG670861PKSXX66Q", @create_time="2015-01-09T07:12:58Z", @update_time="2015-01-09T07:12:59Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009118b28 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-2X861001RG670861PKSXX66Q", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000091139e8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6X164414BR9480824", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000091129a8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-2X861001RG670861PKSXX66Q/execute", @rel="execute", @method="POST">]>
I, [2015-01-09T07:13:02.687000 #7440]  INFO -- : #<Payment:0x00000005651a80 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000912b818 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x0000000912ae40 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x0000000912a990 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009129db0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009129810 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009128c30 @error=nil, @subtotal="19.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000911b8c8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000911ae00 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000096fc3f0 @error=nil, @return_url="http://localhost:3000/orders/81/confirm", @cancel_url="http://localhost:3000/orders/81/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000939ec80 @base=#<Payment:0x00000005651a80 ...>, @messages={}>, @request_id="b8e5fc83-e64d-4ddf-9fcb-7653f887a6c8", @header={}, @id="PAY-2X861001RG670861PKSXX66Q", @create_time="2015-01-09T07:12:58Z", @update_time="2015-01-09T07:12:59Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009118b28 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-2X861001RG670861PKSXX66Q", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000091139e8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6X164414BR9480824", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000091129a8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-2X861001RG670861PKSXX66Q/execute", @rel="execute", @method="POST">]>
I, [2015-01-09T07:13:02.751004 #7440]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6X164414BR9480824
I, [2015-01-09T07:13:03.808064 #7440]  INFO -- : #<Payment:0x00000005651a80 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000912b818 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x0000000912ae40 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x0000000912a990 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009129db0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009129810 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009128c30 @error=nil, @subtotal="19.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000911b8c8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000911ae00 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000096fc3f0 @error=nil, @return_url="http://localhost:3000/orders/81/confirm", @cancel_url="http://localhost:3000/orders/81/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x0000000939ec80 @base=#<Payment:0x00000005651a80 ...>, @messages={}>, @request_id="b8e5fc83-e64d-4ddf-9fcb-7653f887a6c8", @header={}, @id="PAY-2X861001RG670861PKSXX66Q", @create_time="2015-01-09T07:12:58Z", @update_time="2015-01-09T07:12:59Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009118b28 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-2X861001RG670861PKSXX66Q", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000091139e8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6X164414BR9480824", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000091129a8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-2X861001RG670861PKSXX66Q/execute", @rel="execute", @method="POST">]>
I, [2015-01-09T07:13:03.874068 #7440]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6X164414BR9480824
I, [2015-01-09T07:13:03.923071 #7440]  INFO -- : Completed 403 Forbidden in 42989ms (ActiveRecord: 451.0ms)
D, [2015-01-09T07:13:03.963073 #7440] DEBUG -- : 
D, [2015-01-09T07:13:03.983074 #7440] DEBUG -- : 
I, [2015-01-09T07:13:04.033077 #7440]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-09 07:13:03 +0000
I, [2015-01-09T07:13:04.119082 #7440]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-09T07:13:04.186086 #7440] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-09T07:13:04.257090 #7440] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-09T07:13:04.334094 #7440] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-09T07:13:04.434100 #7440] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 36]]
I, [2015-01-09T07:13:04.535106 #7440]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-09T07:13:08.796350 #7440] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-09T07:13:08.901356 #7440] DEBUG -- :   [1m[35mSQL (6.0ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Fri, 09 Jan 2015 07:13:08 UTC +00:00], ["updated_at", Fri, 09 Jan 2015 07:13:08 UTC +00:00]]
I, [2015-01-09T07:13:08.928357 #7440]  INFO -- : about to @payment.create
D, [2015-01-09T07:13:09.586395 #7440] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 82]]
I, [2015-01-09T07:13:10.189429 #7440]  INFO -- : in order=
I, [2015-01-09T07:13:11.002476 #7440]  INFO -- : in payment.create
I, [2015-01-09T07:13:11.087481 #7440]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"0"}, "description"=>"King Clothing"}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/82/confirm", "cancel_url"=>"http://localhost:3000/orders/82/cancel"}}
I, [2015-01-09T07:13:11.424500 #7440]  INFO -- : #<ActiveModel::Errors:0x00000005702e98 @base=#<Payment:0x00000007817bb0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007816fa8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005cfdb90 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005cfd460 @error=nil, @total="0", @currency="GBP">, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000005a6c8b8 @error=nil, @return_url="http://localhost:3000/orders/82/confirm", @cancel_url="http://localhost:3000/orders/82/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005702e98 ...>>, @messages={}>
I, [2015-01-09T07:13:11.449501 #7440]  INFO -- : got past invalid
I, [2015-01-09T07:13:11.509505 #7440]  INFO -- : PayPal-Request-Id: 6a3b0147-e8ef-4def-8206-780ff2f04ea9
I, [2015-01-09T07:13:11.552507 #7440]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-09T07:13:12.547564 #7440]  INFO -- : Response[400]: Bad Request, Duration: 0.968s
I, [2015-01-09T07:13:12.564565 #7440]  INFO -- :  in error=
I, [2015-01-09T07:13:12.619568 #7440]  INFO -- : back from super
I, [2015-01-09T07:13:12.738575 #7440]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"0"}, "description"=>"King Clothing"}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/82/confirm", "cancel_url"=>"http://localhost:3000/orders/82/cancel"}}
D, [2015-01-09T07:13:12.868583 #7440] DEBUG -- :   [1m[35mSQL (6.0ms)[0m  UPDATE "orders" SET "created_at" = ?, "updated_at" = ?, "id" = ?, "pay_type" = ? WHERE "orders"."id" = 82  [["created_at", Fri, 09 Jan 2015 07:13:08 UTC +00:00], ["updated_at", Fri, 09 Jan 2015 07:13:08 UTC +00:00], ["id", 82], ["pay_type", "paypal"]]
D, [2015-01-09T07:13:12.924586 #7440] DEBUG -- :   [1m[36mSQL (1.0ms)[0m  [1mUPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 82[0m
I, [2015-01-09T07:13:12.955588 #7440]  INFO -- : @payment save just done
I, [2015-01-09T07:13:13.334609 #7440]  INFO -- : #<Payment:0x00000007817bb0 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions[0].amount", "issue"=>"Amount cannot be zero"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"b88392f3aaef8"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007816fa8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005cfdb90 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005cfd460 @error=nil, @total="0", @currency="GBP">, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000005a6c8b8 @error=nil, @return_url="http://localhost:3000/orders/82/confirm", @cancel_url="http://localhost:3000/orders/82/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005702e98 @base=#<Payment:0x00000007817bb0 ...>, @messages={:"transactions[0].amount"=>["Amount cannot be zero"]}>, @request_id="6a3b0147-e8ef-4def-8206-780ff2f04ea9", @header={}>
I, [2015-01-09T07:13:13.741632 #7440]  INFO -- : #<Payment:0x00000007817bb0 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions[0].amount", "issue"=>"Amount cannot be zero"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"b88392f3aaef8"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007816fa8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005cfdb90 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005cfd460 @error=nil, @total="0", @currency="GBP">, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000005a6c8b8 @error=nil, @return_url="http://localhost:3000/orders/82/confirm", @cancel_url="http://localhost:3000/orders/82/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005702e98 @base=#<Payment:0x00000007817bb0 ...>, @messages={:"transactions[0].amount"=>["Amount cannot be zero"]}>, @request_id="6a3b0147-e8ef-4def-8206-780ff2f04ea9", @header={}>
D, [2015-01-09T07:13:13.941644 #7440] DEBUG -- :   [1m[35m (175.0ms)[0m  commit transaction
D, [2015-01-09T07:13:14.090652 #7440] DEBUG -- :   [1m[36mSQL (102.0ms)[0m  [1mUPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 82[0m
I, [2015-01-09T07:13:14.112654 #7440]  INFO -- : about to approve url
I, [2015-01-09T07:13:14.539678 #7440]  INFO -- : #<Payment:0x00000007817bb0 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions[0].amount", "issue"=>"Amount cannot be zero"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"b88392f3aaef8"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007816fa8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005cfdb90 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005cfd460 @error=nil, @total="0", @currency="GBP">, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000005a6c8b8 @error=nil, @return_url="http://localhost:3000/orders/82/confirm", @cancel_url="http://localhost:3000/orders/82/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005702e98 @base=#<Payment:0x00000007817bb0 ...>, @messages={:"transactions[0].amount"=>["Amount cannot be zero"]}>, @request_id="6a3b0147-e8ef-4def-8206-780ff2f04ea9", @header={}>
I, [2015-01-09T07:13:14.569680 #7440]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-09T07:13:14.600682 #7440]  INFO -- : Completed 302 Found in 10455ms (ActiveRecord: 301.0ms)
D, [2015-01-09T07:13:14.670686 #7440] DEBUG -- : 
D, [2015-01-09T07:13:14.685686 #7440] DEBUG -- : 
I, [2015-01-09T07:13:14.710688 #7440]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-09 07:13:14 +0000
I, [2015-01-09T07:13:14.807693 #7440]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-09T07:13:14.880698 #7440] DEBUG -- :   [1m[35mCart Load (1.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-09T07:13:14.967703 #7440] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-09T07:13:15.005705 #7440]  INFO -- : Cache digest for store/index.xml: a93d4e2e981ab3dfce98a095c3b6c059
I, [2015-01-09T07:13:15.050707 #7440]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (4.0ms)
I, [2015-01-09T07:13:15.080709 #7440]  INFO -- :   Rendered store/index.html.erb within layouts/application (143.0ms)
D, [2015-01-09T07:13:15.302722 #7440] DEBUG -- :   [1m[35mLineItem Exists (2.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 36]]
D, [2015-01-09T07:13:15.372726 #7440] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-09T07:13:15.394727 #7440]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-09T07:13:15.451730 #7440]  INFO -- :   Rendered carts/_cart.html.erb (112.0ms)
I, [2015-01-09T07:13:15.507734 #7440]  INFO -- : Completed 200 OK in 664ms (Views: 579.0ms | ActiveRecord: 7.0ms)
D, [2015-01-09T07:13:22.209117 #7440] DEBUG -- : 
D, [2015-01-09T07:13:22.232118 #7440] DEBUG -- : 
I, [2015-01-09T07:13:22.293122 #7440]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-09 07:13:22 +0000
I, [2015-01-09T07:13:22.406128 #7440]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-09T07:13:22.480132 #7440]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-09T07:13:22.564137 #7440] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-09T07:13:22.657142 #7440] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-09T07:13:22.768149 #7440] DEBUG -- :   [1m[35mLineItem Load (1.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 36]]
D, [2015-01-09T07:13:22.881155 #7440] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-09T07:13:22.928158 #7440] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2015-01-09T07:13:23.174172 #7440] DEBUG -- :   [1m[36mSQL (35.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 36], ["created_at", Fri, 09 Jan 2015 07:13:22 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:804f878,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 09 Jan 2015 07:13:22 UTC +00:00]]
D, [2015-01-09T07:13:23.663200 #7440] DEBUG -- :   [1m[35m (441.0ms)[0m  commit transaction
D, [2015-01-09T07:13:23.788207 #7440] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-09T07:13:23.872212 #7440]  INFO -- :   Rendered line_items/_line_item.html.erb (14.0ms)
I, [2015-01-09T07:13:23.946216 #7440]  INFO -- :   Rendered carts/_cart.html.erb (206.0ms)
I, [2015-01-09T07:13:23.992219 #7440]  INFO -- :   Rendered line_items/create.js.erb (261.0ms)
I, [2015-01-09T07:13:24.045222 #7440]  INFO -- : Completed 200 OK in 1514ms (Views: 325.0ms | ActiveRecord: 486.0ms)
D, [2015-01-09T07:13:26.693373 #7440] DEBUG -- : 
D, [2015-01-09T07:13:26.717375 #7440] DEBUG -- : 
I, [2015-01-09T07:13:26.776378 #7440]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-09 07:13:26 +0000
I, [2015-01-09T07:13:26.872384 #7440]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-09T07:13:26.953388 #7440] DEBUG -- :   [1m[35mUser Load (1.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-09T07:13:27.034393 #7440] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-09T07:13:27.118398 #7440] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 36]]
D, [2015-01-09T07:13:27.221403 #7440] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
I, [2015-01-09T07:13:27.354411 #7440]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-09T07:13:48.546623 #7440] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-09T07:13:48.676631 #7440] DEBUG -- :   [1m[36mSQL (6.0ms)[0m  [1mINSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Fri, 09 Jan 2015 07:13:48 UTC +00:00], ["updated_at", Fri, 09 Jan 2015 07:13:48 UTC +00:00]]
D, [2015-01-09T07:13:48.814639 #7440] DEBUG -- :   [1m[35mSQL (4.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 109  [["cart_id", nil], ["order_id", 83], ["updated_at", Fri, 09 Jan 2015 07:13:48 UTC +00:00]]
I, [2015-01-09T07:13:48.851641 #7440]  INFO -- : about to @payment.create
D, [2015-01-09T07:13:49.682688 #7440] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-09T07:13:50.352727 #7440]  INFO -- : in order=
I, [2015-01-09T07:13:51.009764 #7440]  INFO -- : in payment.create
I, [2015-01-09T07:13:51.138771 #7440]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Camo Print Tee", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Camo Print Tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/83/confirm", "cancel_url"=>"http://localhost:3000/orders/83/cancel"}}
I, [2015-01-09T07:13:51.595798 #7440]  INFO -- : #<ActiveModel::Errors:0x000000059a7770 @base=#<Payment:0x00000007b100b0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000007afe860 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000780ee48 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000780e8d0 @error=nil, @total="19.99", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000780c850 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000078057d0 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000005cf6520 @error=nil, @return_url="http://localhost:3000/orders/83/confirm", @cancel_url="http://localhost:3000/orders/83/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000059a7770 ...>>, @messages={}>
I, [2015-01-09T07:13:51.617799 #7440]  INFO -- : got past invalid
I, [2015-01-09T07:13:51.688803 #7440]  INFO -- : PayPal-Request-Id: dcd2e5fa-1e75-4de3-a159-6ce2a3b4faab
I, [2015-01-09T07:13:51.724805 #7440]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-09T07:13:52.911873 #7440]  INFO -- : Response[201]: Created, Duration: 1.157s
I, [2015-01-09T07:13:52.944875 #7440]  INFO -- : back from super
I, [2015-01-09T07:13:53.300895 #7440]  INFO -- : {"id"=>"PAY-82W91610KT306722DKSXX7MQ", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99", "details"=>{"subtotal"=>"19.99"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Camo Print Tee", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Camo Print Tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/83/confirm", "cancel_url"=>"http://localhost:3000/orders/83/cancel"}, "create_time"=>"2015-01-09T07:13:54Z", "update_time"=>"2015-01-09T07:13:54Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-82W91610KT306722DKSXX7MQ", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-63U056916Y2482945", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-82W91610KT306722DKSXX7MQ/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-09T07:13:53.482906 #7440] DEBUG -- :   [1m[35mSQL (7.0ms)[0m  UPDATE "orders" SET "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ?, "pay_type" = ? WHERE "orders"."id" = 83  [["created_at", Fri, 09 Jan 2015 07:13:48 UTC +00:00], ["updated_at", Fri, 09 Jan 2015 07:13:48 UTC +00:00], ["id", 83], ["payment_id", "PAY-82W91610KT306722DKSXX7MQ"], ["state", "created"], ["pay_type", "paypal"]]
D, [2015-01-09T07:13:53.545909 #7440] DEBUG -- :   [1m[36mSQL (1.0ms)[0m  [1mUPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 83[0m
I, [2015-01-09T07:13:53.574911 #7440]  INFO -- : @payment save just done
I, [2015-01-09T07:13:54.334954 #7440]  INFO -- : #<Payment:0x00000007b100b0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005720718 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000057134f0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000005712e60 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005711a60 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000057112e0 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000005703fa0 @error=nil, @subtotal="19.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000005702c90 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005701840 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000005cf6520 @error=nil, @return_url="http://localhost:3000/orders/83/confirm", @cancel_url="http://localhost:3000/orders/83/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000059a7770 @base=#<Payment:0x00000007b100b0 ...>, @messages={}>, @request_id="dcd2e5fa-1e75-4de3-a159-6ce2a3b4faab", @header={}, @id="PAY-82W91610KT306722DKSXX7MQ", @create_time="2015-01-09T07:13:54Z", @update_time="2015-01-09T07:13:54Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000056c9490 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-82W91610KT306722DKSXX7MQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000056bb8b8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-63U056916Y2482945", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000056b8a00 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-82W91610KT306722DKSXX7MQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-09T07:13:55.163002 #7440]  INFO -- : #<Payment:0x00000007b100b0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005720718 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000057134f0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000005712e60 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005711a60 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000057112e0 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000005703fa0 @error=nil, @subtotal="19.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000005702c90 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005701840 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000005cf6520 @error=nil, @return_url="http://localhost:3000/orders/83/confirm", @cancel_url="http://localhost:3000/orders/83/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000059a7770 @base=#<Payment:0x00000007b100b0 ...>, @messages={}>, @request_id="dcd2e5fa-1e75-4de3-a159-6ce2a3b4faab", @header={}, @id="PAY-82W91610KT306722DKSXX7MQ", @create_time="2015-01-09T07:13:54Z", @update_time="2015-01-09T07:13:54Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000056c9490 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-82W91610KT306722DKSXX7MQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000056bb8b8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-63U056916Y2482945", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000056b8a00 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-82W91610KT306722DKSXX7MQ/execute", @rel="execute", @method="POST">]>
D, [2015-01-09T07:13:55.434017 #7440] DEBUG -- :   [1m[35m (245.0ms)[0m  commit transaction
D, [2015-01-09T07:13:55.710033 #7440] DEBUG -- :   [1m[36mSQL (221.0ms)[0m  [1mUPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 83[0m
I, [2015-01-09T07:13:55.731034 #7440]  INFO -- : about to approve url
I, [2015-01-09T07:13:56.547081 #7440]  INFO -- : #<Payment:0x00000007b100b0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005720718 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000057134f0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000005712e60 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005711a60 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000057112e0 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000005703fa0 @error=nil, @subtotal="19.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000005702c90 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005701840 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000005cf6520 @error=nil, @return_url="http://localhost:3000/orders/83/confirm", @cancel_url="http://localhost:3000/orders/83/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000059a7770 @base=#<Payment:0x00000007b100b0 ...>, @messages={}>, @request_id="dcd2e5fa-1e75-4de3-a159-6ce2a3b4faab", @header={}, @id="PAY-82W91610KT306722DKSXX7MQ", @create_time="2015-01-09T07:13:54Z", @update_time="2015-01-09T07:13:54Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000056c9490 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-82W91610KT306722DKSXX7MQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000056bb8b8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-63U056916Y2482945", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000056b8a00 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-82W91610KT306722DKSXX7MQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-09T07:13:57.641143 #7440]  INFO -- : #<Payment:0x00000007b100b0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005720718 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000057134f0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000005712e60 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005711a60 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000057112e0 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000005703fa0 @error=nil, @subtotal="19.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000005702c90 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005701840 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000005cf6520 @error=nil, @return_url="http://localhost:3000/orders/83/confirm", @cancel_url="http://localhost:3000/orders/83/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000059a7770 @base=#<Payment:0x00000007b100b0 ...>, @messages={}>, @request_id="dcd2e5fa-1e75-4de3-a159-6ce2a3b4faab", @header={}, @id="PAY-82W91610KT306722DKSXX7MQ", @create_time="2015-01-09T07:13:54Z", @update_time="2015-01-09T07:13:54Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000056c9490 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-82W91610KT306722DKSXX7MQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000056bb8b8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-63U056916Y2482945", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000056b8a00 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-82W91610KT306722DKSXX7MQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-09T07:13:57.706147 #7440]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-63U056916Y2482945
I, [2015-01-09T07:13:58.849212 #7440]  INFO -- : #<Payment:0x00000007b100b0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000005720718 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000057134f0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000005712e60 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005711a60 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000057112e0 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000005703fa0 @error=nil, @subtotal="19.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000005702c90 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005701840 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000005cf6520 @error=nil, @return_url="http://localhost:3000/orders/83/confirm", @cancel_url="http://localhost:3000/orders/83/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x000000059a7770 @base=#<Payment:0x00000007b100b0 ...>, @messages={}>, @request_id="dcd2e5fa-1e75-4de3-a159-6ce2a3b4faab", @header={}, @id="PAY-82W91610KT306722DKSXX7MQ", @create_time="2015-01-09T07:13:54Z", @update_time="2015-01-09T07:13:54Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000056c9490 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-82W91610KT306722DKSXX7MQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000056bb8b8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-63U056916Y2482945", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x000000056b8a00 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-82W91610KT306722DKSXX7MQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-09T07:13:58.924217 #7440]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-63U056916Y2482945
I, [2015-01-09T07:13:58.978220 #7440]  INFO -- : Completed 403 Forbidden in 32056ms (ActiveRecord: 493.0ms)
D, [2015-01-09T07:14:43.099743 #7440] DEBUG -- : 
D, [2015-01-09T07:14:43.114744 #7440] DEBUG -- : 
I, [2015-01-09T07:14:43.179748 #7440]  INFO -- : Started GET "/orders/83/confirm?paymentId=PAY-82W91610KT306722DKSXX7MQ&token=EC-63U056916Y2482945&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-09 07:14:43 +0000
I, [2015-01-09T07:14:43.265753 #7440]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-09T07:14:43.323756 #7440]  INFO -- :   Parameters: {"paymentId"=>"PAY-82W91610KT306722DKSXX7MQ", "token"=>"EC-63U056916Y2482945", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"83"}
D, [2015-01-09T07:14:43.392760 #7440] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-09T07:14:43.448763 #7440] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-09T07:14:43.510767 #7440] DEBUG -- :   [1m[35mOrder Load (2.0ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "83"]]
I, [2015-01-09T07:14:56.791527 #7440]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-82W91610KT306722DKSXX7MQ
I, [2015-01-09T07:14:57.958593 #7440]  INFO -- : Response[200]: OK, Duration: 1.127s
D, [2015-01-09T07:15:13.738496 #7440] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-09T07:15:13.896505 #7440] DEBUG -- :   [1m[35mSQL (7.0ms)[0m  UPDATE "orders" SET "name" = ?, "email" = ?, "address" = ?, "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 83  [["name", "Test Buyer"], ["email", "simon.king65-buyer@gmail.com"], ["address", "1 Main Terrace"], ["shipping_address1", "1 Main Terrace"], ["updated_at", Fri, 09 Jan 2015 07:15:13 UTC +00:00]]
D, [2015-01-09T07:15:14.103517 #7440] DEBUG -- :   [1m[36m (169.0ms)[0m  [1mcommit transaction[0m
I, [2015-01-09T07:15:15.272584 #7440]  INFO -- :   Rendered orders/_form.html.erb (108.0ms)
I, [2015-01-09T07:15:15.330587 #7440]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (163.0ms)
I, [2015-01-09T07:15:21.239925 #7440]  INFO -- : Completed 200 OK in 37877ms (Views: 379.0ms | ActiveRecord: 184.0ms)
D, [2015-01-09T07:15:21.623947 #7440] DEBUG -- : 
D, [2015-01-09T07:15:21.640948 #7440] DEBUG -- : 
I, [2015-01-09T07:15:21.680950 #7440]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-09 07:15:21 +0000
D, [2015-01-09T07:15:21.772955 #7440] DEBUG -- : 
D, [2015-01-09T07:15:21.792957 #7440] DEBUG -- : 
I, [2015-01-09T07:15:21.841959 #7440]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-09 07:15:21 +0000
D, [2015-01-09T07:15:21.977967 #7440] DEBUG -- : 
D, [2015-01-09T07:15:22.000969 #7440] DEBUG -- : 
I, [2015-01-09T07:15:22.053972 #7440]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-09 07:15:22 +0000
D, [2015-01-09T07:15:22.129976 #7440] DEBUG -- : 
D, [2015-01-09T07:15:22.148977 #7440] DEBUG -- : 
I, [2015-01-09T07:15:22.192979 #7440]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-09 07:15:22 +0000
D, [2015-01-09T07:15:22.267984 #7440] DEBUG -- : 
D, [2015-01-09T07:15:22.286985 #7440] DEBUG -- : 
I, [2015-01-09T07:15:22.335988 #7440]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-09 07:15:22 +0000
D, [2015-01-09T07:15:22.407992 #7440] DEBUG -- : 
D, [2015-01-09T07:15:22.441994 #7440] DEBUG -- : 
I, [2015-01-09T07:15:22.487996 #7440]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-09 07:15:22 +0000
D, [2015-01-09T07:15:22.558000 #7440] DEBUG -- : 
D, [2015-01-09T07:15:22.580002 #7440] DEBUG -- : 
I, [2015-01-09T07:15:22.628004 #7440]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-09 07:15:22 +0000
D, [2015-01-09T07:15:22.698008 #7440] DEBUG -- : 
D, [2015-01-09T07:15:22.718010 #7440] DEBUG -- : 
I, [2015-01-09T07:15:22.759012 #7440]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-09 07:15:22 +0000
D, [2015-01-09T07:15:22.841017 #7440] DEBUG -- : 
D, [2015-01-09T07:15:22.862018 #7440] DEBUG -- : 
I, [2015-01-09T07:15:22.903020 #7440]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-09 07:15:22 +0000
D, [2015-01-09T07:15:22.983025 #7440] DEBUG -- : 
D, [2015-01-09T07:15:22.999026 #7440] DEBUG -- : 
I, [2015-01-09T07:15:23.045028 #7440]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-09 07:15:23 +0000
D, [2015-01-09T07:15:23.121033 #7440] DEBUG -- : 
D, [2015-01-09T07:15:23.139034 #7440] DEBUG -- : 
I, [2015-01-09T07:15:23.186036 #7440]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-09 07:15:23 +0000
D, [2015-01-09T07:15:23.274041 #7440] DEBUG -- : 
D, [2015-01-09T07:15:23.291042 #7440] DEBUG -- : 
I, [2015-01-09T07:15:23.331045 #7440]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-09 07:15:23 +0000
D, [2015-01-09T07:15:23.402049 #7440] DEBUG -- : 
D, [2015-01-09T07:15:23.423050 #7440] DEBUG -- : 
I, [2015-01-09T07:15:23.471053 #7440]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-09 07:15:23 +0000
D, [2015-01-09T07:15:23.543057 #7440] DEBUG -- : 
D, [2015-01-09T07:15:23.567058 #7440] DEBUG -- : 
I, [2015-01-09T07:15:23.620061 #7440]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-09 07:15:23 +0000
D, [2015-01-09T07:15:23.692065 #7440] DEBUG -- : 
D, [2015-01-09T07:15:23.714066 #7440] DEBUG -- : 
I, [2015-01-09T07:15:23.761069 #7440]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-09 07:15:23 +0000
D, [2015-01-09T07:15:23.833073 #7440] DEBUG -- : 
D, [2015-01-09T07:15:23.859075 #7440] DEBUG -- : 
I, [2015-01-09T07:15:23.905077 #7440]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-09 07:15:23 +0000
D, [2015-01-09T07:15:24.000083 #7440] DEBUG -- : 
D, [2015-01-09T07:15:24.018084 #7440] DEBUG -- : 
I, [2015-01-09T07:15:24.062086 #7440]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-09 07:15:24 +0000
D, [2015-01-09T07:15:24.140091 #7440] DEBUG -- : 
D, [2015-01-09T07:15:24.157092 #7440] DEBUG -- : 
I, [2015-01-09T07:15:24.200094 #7440]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-09 07:15:24 +0000
D, [2015-01-09T07:15:24.276099 #7440] DEBUG -- : 
D, [2015-01-09T07:15:24.302100 #7440] DEBUG -- : 
I, [2015-01-09T07:15:24.350103 #7440]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-09 07:15:24 +0000
D, [2015-01-09T07:15:24.426107 #7440] DEBUG -- : 
D, [2015-01-09T07:15:24.453109 #7440] DEBUG -- : 
I, [2015-01-09T07:15:24.498111 #7440]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-09 07:15:24 +0000
D, [2015-01-09T07:15:24.577116 #7440] DEBUG -- : 
D, [2015-01-09T07:15:24.601117 #7440] DEBUG -- : 
I, [2015-01-09T07:15:24.647120 #7440]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-09 07:15:24 +0000
D, [2015-01-09T07:15:24.716124 #7440] DEBUG -- : 
D, [2015-01-09T07:15:24.746126 #7440] DEBUG -- : 
I, [2015-01-09T07:15:24.794128 #7440]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-09 07:15:24 +0000
D, [2015-01-09T07:15:24.865132 #7440] DEBUG -- : 
D, [2015-01-09T07:15:24.885133 #7440] DEBUG -- : 
I, [2015-01-09T07:15:24.937136 #7440]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-09 07:15:24 +0000
D, [2015-01-09T07:15:25.013141 #7440] DEBUG -- : 
D, [2015-01-09T07:15:25.033142 #7440] DEBUG -- : 
I, [2015-01-09T07:15:25.069144 #7440]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-09 07:15:25 +0000
D, [2015-01-09T07:15:25.143148 #7440] DEBUG -- : 
D, [2015-01-09T07:15:25.160149 #7440] DEBUG -- : 
I, [2015-01-09T07:15:25.212152 #7440]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-09 07:15:25 +0000
D, [2015-01-09T07:15:25.282156 #7440] DEBUG -- : 
D, [2015-01-09T07:15:25.298157 #7440] DEBUG -- : 
I, [2015-01-09T07:15:25.347160 #7440]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-09 07:15:25 +0000
D, [2015-01-09T07:15:25.451166 #7440] DEBUG -- : 
D, [2015-01-09T07:15:25.474167 #7440] DEBUG -- : 
I, [2015-01-09T07:15:25.528170 #7440]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-09 07:15:25 +0000
D, [2015-01-09T07:15:28.048314 #7440] DEBUG -- : 
D, [2015-01-09T07:15:28.072316 #7440] DEBUG -- : 
I, [2015-01-09T07:15:28.156321 #7440]  INFO -- : Started POST "/orders/83/execute/83/2VZ7YQDDDPPC4/PAY-82W91610KT306722DKSXX7MQ" for 127.0.0.1 at 2015-01-09 07:15:28 +0000
I, [2015-01-09T07:15:28.255326 #7440]  INFO -- : Processing by OrdersController#execute as HTML
I, [2015-01-09T07:15:28.364332 #7440]  INFO -- :   Parameters: {"authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order_id"=>"83", "payer_id"=>"2VZ7YQDDDPPC4", "payment_id"=>"PAY-82W91610KT306722DKSXX7MQ"}
D, [2015-01-09T07:15:28.461338 #7440] DEBUG -- :   [1m[35mOrder Load (2.0ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "83"]]
I, [2015-01-09T07:15:36.127777 #7440]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-82W91610KT306722DKSXX7MQ
I, [2015-01-09T07:15:37.216839 #7440]  INFO -- : Response[200]: OK, Duration: 1.049s
I, [2015-01-09T07:15:39.269956 #7440]  INFO -- : PayPal-Request-Id: 7ac49bcb-853b-4215-a7a4-f5690a4cb79d
I, [2015-01-09T07:15:39.340960 #7440]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-82W91610KT306722DKSXX7MQ/execute
I, [2015-01-09T07:15:41.419079 #7440]  INFO -- : Response[200]: OK, Duration: 2.049s
W, [2015-01-09T07:15:41.475082 #7440]  WARN -- : undefined method `fee=' for #<PayPal::SDK::REST::DataTypes::Details:0x000000094a3c98>
D, [2015-01-09T07:17:12.160269 #7440] DEBUG -- :   [1m[36mOrder Load (1.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", 83]]
D, [2015-01-09T07:25:34.244987 #7440] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-09T07:25:34.357993 #7440] DEBUG -- :   [1m[36mSQL (6.0ms)[0m  [1mUPDATE "orders" SET "state" = ?, "updated_at" = ? WHERE "orders"."id" = 83[0m  [["state", "approved"], ["updated_at", Fri, 09 Jan 2015 07:25:34 UTC +00:00]]
D, [2015-01-09T07:25:34.493001 #7440] DEBUG -- :   [1m[35m (96.0ms)[0m  commit transaction
D, [2015-01-09T07:25:34.576006 #7440] DEBUG -- :   [1m[36mCart Load (1.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 36]]
D, [2015-01-09T07:25:34.619008 #7440] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-09T07:25:34.705013 #7440] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 36]]
D, [2015-01-09T07:25:34.770017 #7440] DEBUG -- :   [1m[35mSQL (4.0ms)[0m  DELETE FROM "carts" WHERE "carts"."id" = ?  [["id", 36]]
D, [2015-01-09T07:25:34.913025 #7440] DEBUG -- :   [1m[36m (102.0ms)[0m  [1mcommit transaction[0m
I, [2015-01-09T07:25:44.281561 #7440]  INFO -- :   Rendered order_notifier/received.html.erb (5.0ms)
D, [2015-01-09T07:25:44.394567 #7440] DEBUG -- :   [1m[35mLineItem Load (1.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 83]]
D, [2015-01-09T07:25:44.525575 #7440] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-09T07:25:44.577578 #7440]  INFO -- :   Rendered line_items/_line_item.text.erb (115.0ms)
I, [2015-01-09T07:25:44.619580 #7440]  INFO -- :   Rendered order_notifier/received.text.erb (284.0ms)
I, [2015-01-09T07:25:45.885653 #7440]  INFO -- : 
Sent mail to simon.king65-buyer@gmail.com (936.1ms)
D, [2015-01-09T07:25:46.339679 #7440] DEBUG -- : Date: Fri, 09 Jan 2015 07:25:45 +0000

From: Simon King <simon.king65@gmail.com>

To: simon.king65-buyer@gmail.com

Message-ID: <54af8279aa55_1d1048238b4774cb@Simon-PC.mail>

Subject: King Clothing Order Confirmation

Mime-Version: 1.0

Content-Type: multipart/alternative;

 boundary="--==_mimepart_54af8278a2fbf_1d1048238b4773ed";

 charset=UTF-8

Content-Transfer-Encoding: 7bit





----==_mimepart_54af8278a2fbf_1d1048238b4773ed

Content-Type: text/plain;

 charset=UTF-8

Content-Transfer-Encoding: 7bit



Dear Test Buyer



Thank you for your recent order from King Clothing.



You ordered the following items:



 1 x Camo Print Tee

We'll send you a separate e-mail when your order ships.

----==_mimepart_54af8278a2fbf_1d1048238b4773ed

Content-Type: text/html;

 charset=UTF-8

Content-Transfer-Encoding: 7bit



<h1>OrderNotifier#received</h1>



<p>

  , thank you for your order, we will email you again once your order has been despatched. We hope you enjoy wearing your King Clothing brand tee-shirt.

</p>



----==_mimepart_54af8278a2fbf_1d1048238b4773ed--


I, [2015-01-09T07:25:46.379681 #7440]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-09T07:25:46.426684 #7440]  INFO -- : Completed 302 Found in 618017ms (ActiveRecord: 218.0ms)
D, [2015-01-09T07:25:46.531690 #7440] DEBUG -- : 
D, [2015-01-09T07:25:46.548691 #7440] DEBUG -- : 
I, [2015-01-09T07:25:46.590693 #7440]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-09 07:25:46 +0000
I, [2015-01-09T07:25:46.679698 #7440]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-09T07:25:46.720700 #7440] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-09T07:25:46.861708 #7440] DEBUG -- :   [1m[36mSQL (7.0ms)[0m  [1mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Fri, 09 Jan 2015 07:25:46 UTC +00:00], ["updated_at", Fri, 09 Jan 2015 07:25:46 UTC +00:00]]
D, [2015-01-09T07:25:47.013717 #7440] DEBUG -- :   [1m[35m (111.0ms)[0m  commit transaction
D, [2015-01-09T07:25:47.122723 #7440] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-09T07:25:47.200728 #7440]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (3.0ms)
I, [2015-01-09T07:25:47.255731 #7440]  INFO -- :   Rendered store/index.html.erb within layouts/application (164.0ms)
D, [2015-01-09T07:25:47.502745 #7440] DEBUG -- :   [1m[35mLineItem Exists (2.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 37]]
D, [2015-01-09T07:25:47.599751 #7440] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 37]]
I, [2015-01-09T07:25:47.635753 #7440]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-09T07:25:47.703757 #7440]  INFO -- :   Rendered carts/_cart.html.erb (154.0ms)
I, [2015-01-09T07:25:47.773761 #7440]  INFO -- : Completed 200 OK in 1046ms (Views: 701.0ms | ActiveRecord: 125.0ms)
D, [2015-01-09T07:25:47.958771 #7440] DEBUG -- : 
D, [2015-01-09T07:25:47.973772 #7440] DEBUG -- : 
I, [2015-01-09T07:25:48.010774 #7440]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-09 07:25:47 +0000
D, [2015-01-09T07:25:48.113780 #7440] DEBUG -- : 
D, [2015-01-09T07:25:48.134781 #7440] DEBUG -- : 
I, [2015-01-09T07:25:48.196785 #7440]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-09 07:25:48 +0000
D, [2015-01-09T07:25:48.303791 #7440] DEBUG -- : 
D, [2015-01-09T07:25:48.373795 #7440] DEBUG -- : 
I, [2015-01-09T07:25:48.431798 #7440]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-09 07:25:48 +0000
D, [2015-01-09T07:25:48.504802 #7440] DEBUG -- : 
D, [2015-01-09T07:25:48.525804 #7440] DEBUG -- : 
I, [2015-01-09T07:25:48.583807 #7440]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-09 07:25:48 +0000
D, [2015-01-09T07:25:48.657811 #7440] DEBUG -- : 
D, [2015-01-09T07:25:48.681813 #7440] DEBUG -- : 
I, [2015-01-09T07:25:48.743816 #7440]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-09 07:25:48 +0000
D, [2015-01-09T07:25:48.815820 #7440] DEBUG -- : 
D, [2015-01-09T07:25:48.838822 #7440] DEBUG -- : 
I, [2015-01-09T07:25:48.901825 #7440]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-09 07:25:48 +0000
D, [2015-01-09T07:25:48.980830 #7440] DEBUG -- : 
D, [2015-01-09T07:25:49.004831 #7440] DEBUG -- : 
I, [2015-01-09T07:25:49.060834 #7440]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-09 07:25:49 +0000
D, [2015-01-09T07:25:49.134839 #7440] DEBUG -- : 
D, [2015-01-09T07:25:49.155840 #7440] DEBUG -- : 
I, [2015-01-09T07:25:49.213843 #7440]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-09 07:25:49 +0000
D, [2015-01-09T07:25:49.286847 #7440] DEBUG -- : 
D, [2015-01-09T07:25:49.307848 #7440] DEBUG -- : 
I, [2015-01-09T07:25:49.362852 #7440]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-09 07:25:49 +0000
D, [2015-01-09T07:25:49.436856 #7440] DEBUG -- : 
D, [2015-01-09T07:25:49.459857 #7440] DEBUG -- : 
I, [2015-01-09T07:25:49.508860 #7440]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-09 07:25:49 +0000
D, [2015-01-09T07:25:49.580864 #7440] DEBUG -- : 
D, [2015-01-09T07:25:49.600865 #7440] DEBUG -- : 
I, [2015-01-09T07:25:49.652868 #7440]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-09 07:25:49 +0000
D, [2015-01-09T07:25:49.723872 #7440] DEBUG -- : 
D, [2015-01-09T07:25:49.741873 #7440] DEBUG -- : 
I, [2015-01-09T07:25:49.788876 #7440]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-09 07:25:49 +0000
D, [2015-01-09T07:25:49.873881 #7440] DEBUG -- : 
D, [2015-01-09T07:25:49.894882 #7440] DEBUG -- : 
I, [2015-01-09T07:25:49.939885 #7440]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-09 07:25:49 +0000
D, [2015-01-09T07:25:50.017889 #7440] DEBUG -- : 
D, [2015-01-09T07:25:50.030890 #7440] DEBUG -- : 
I, [2015-01-09T07:25:50.077892 #7440]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-09 07:25:50 +0000
D, [2015-01-09T07:25:50.143896 #7440] DEBUG -- : 
D, [2015-01-09T07:25:50.167898 #7440] DEBUG -- : 
I, [2015-01-09T07:25:50.210900 #7440]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-09 07:25:50 +0000
D, [2015-01-09T07:25:50.287904 #7440] DEBUG -- : 
D, [2015-01-09T07:25:50.300905 #7440] DEBUG -- : 
I, [2015-01-09T07:25:50.343908 #7440]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-09 07:25:50 +0000
D, [2015-01-09T07:25:50.433913 #7440] DEBUG -- : 
D, [2015-01-09T07:25:50.455914 #7440] DEBUG -- : 
I, [2015-01-09T07:25:50.500917 #7440]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-09 07:25:50 +0000
D, [2015-01-09T07:25:50.575921 #7440] DEBUG -- : 
D, [2015-01-09T07:25:50.595922 #7440] DEBUG -- : 
I, [2015-01-09T07:25:50.640925 #7440]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-09 07:25:50 +0000
D, [2015-01-09T07:25:50.725930 #7440] DEBUG -- : 
D, [2015-01-09T07:25:50.752931 #7440] DEBUG -- : 
I, [2015-01-09T07:25:50.800934 #7440]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-09 07:25:50 +0000
D, [2015-01-09T07:25:50.875938 #7440] DEBUG -- : 
D, [2015-01-09T07:25:50.894939 #7440] DEBUG -- : 
I, [2015-01-09T07:25:50.935942 #7440]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-09 07:25:50 +0000
D, [2015-01-09T07:25:51.005946 #7440] DEBUG -- : 
D, [2015-01-09T07:25:51.026947 #7440] DEBUG -- : 
I, [2015-01-09T07:25:51.063949 #7440]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-09 07:25:51 +0000
D, [2015-01-09T07:25:51.135953 #7440] DEBUG -- : 
D, [2015-01-09T07:25:51.164955 #7440] DEBUG -- : 
I, [2015-01-09T07:25:51.206957 #7440]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-09 07:25:51 +0000
D, [2015-01-09T07:25:51.274961 #7440] DEBUG -- : 
D, [2015-01-09T07:25:51.291962 #7440] DEBUG -- : 
I, [2015-01-09T07:25:51.338965 #7440]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-09 07:25:51 +0000
D, [2015-01-09T07:25:51.404968 #7440] DEBUG -- : 
D, [2015-01-09T07:25:51.421969 #7440] DEBUG -- : 
I, [2015-01-09T07:25:51.467972 #7440]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-09 07:25:51 +0000
D, [2015-01-09T07:25:51.542976 #7440] DEBUG -- : 
D, [2015-01-09T07:25:51.562977 #7440] DEBUG -- : 
I, [2015-01-09T07:25:51.605980 #7440]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-09 07:25:51 +0000
D, [2015-01-09T07:25:51.673984 #7440] DEBUG -- : 
D, [2015-01-09T07:25:51.690985 #7440] DEBUG -- : 
I, [2015-01-09T07:25:51.735987 #7440]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-09 07:25:51 +0000
D, [2015-01-09T07:25:51.805991 #7440] DEBUG -- : 
D, [2015-01-09T07:25:51.825992 #7440] DEBUG -- : 
I, [2015-01-09T07:25:51.881996 #7440]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-09 07:25:51 +0000
D, [2015-01-09T07:25:51.960000 #7440] DEBUG -- : 
D, [2015-01-09T07:25:51.978001 #7440] DEBUG -- : 
I, [2015-01-09T07:25:52.029004 #7440]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-09 07:25:51 +0000
D, [2015-01-09T07:25:52.093008 #7440] DEBUG -- : 
D, [2015-01-09T07:25:52.111009 #7440] DEBUG -- : 
I, [2015-01-09T07:25:52.150011 #7440]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-09 07:25:52 +0000
D, [2015-01-09T07:39:22.917511 #7440] DEBUG -- : 
D, [2015-01-09T07:39:22.934512 #7440] DEBUG -- : 
I, [2015-01-09T07:39:22.987515 #7440]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-09 07:39:22 +0000
I, [2015-01-09T07:39:23.094521 #7440]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-09T07:39:23.159524 #7440]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-09T07:39:23.241529 #7440] DEBUG -- :   [1m[35mCart Load (3.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 37]]
D, [2015-01-09T07:39:23.318534 #7440] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-09T07:39:23.422539 #7440] DEBUG -- :   [1m[35mLineItem Load (1.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 37]]
D, [2015-01-09T07:39:23.528546 #7440] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-09T07:39:23.571548 #7440] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2015-01-09T07:39:23.763559 #7440] DEBUG -- :   [1m[36mSQL (9.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 37], ["created_at", Fri, 09 Jan 2015 07:39:23 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:558b8f8,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 09 Jan 2015 07:39:23 UTC +00:00]]
D, [2015-01-09T07:39:23.921568 #7440] DEBUG -- :   [1m[35m (117.0ms)[0m  commit transaction
D, [2015-01-09T07:39:24.039575 #7440] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 37]]
I, [2015-01-09T07:39:24.129580 #7440]  INFO -- :   Rendered line_items/_line_item.html.erb (14.0ms)
I, [2015-01-09T07:39:24.205584 #7440]  INFO -- :   Rendered carts/_cart.html.erb (209.0ms)
I, [2015-01-09T07:39:24.245587 #7440]  INFO -- :   Rendered line_items/create.js.erb (260.0ms)
I, [2015-01-09T07:39:24.293589 #7440]  INFO -- : Completed 200 OK in 1089ms (Views: 320.0ms | ActiveRecord: 138.0ms)
D, [2015-01-09T07:39:24.335592 #7440] DEBUG -- : 
D, [2015-01-09T07:39:24.351593 #7440] DEBUG -- : 
I, [2015-01-09T07:39:24.401595 #7440]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-09 07:39:24 +0000
I, [2015-01-09T07:39:24.518602 #7440]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-09T07:39:24.582606 #7440]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-09T07:39:24.656610 #7440] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 37]]
D, [2015-01-09T07:39:24.730614 #7440] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-09T07:39:24.839621 #7440] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 37]]
D, [2015-01-09T07:39:24.947627 #7440] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-09T07:39:24.992629 #7440] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2015-01-09T07:39:25.181640 #7440] DEBUG -- :   [1m[36mSQL (10.0ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 37], ["created_at", Fri, 09 Jan 2015 07:39:24 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:94bd2d8,'0.1899E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 09 Jan 2015 07:39:24 UTC +00:00]]
D, [2015-01-09T07:39:25.366651 #7440] DEBUG -- :   [1m[35m (142.0ms)[0m  commit transaction
D, [2015-01-09T07:39:25.491658 #7440] DEBUG -- :   [1m[36mLineItem Load (3.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 37]]
D, [2015-01-09T07:39:25.621665 #7440] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-09T07:39:25.691669 #7440]  INFO -- :   Rendered line_items/_line_item.html.erb (129.0ms)
I, [2015-01-09T07:39:25.762673 #7440]  INFO -- :   Rendered carts/_cart.html.erb (319.0ms)
I, [2015-01-09T07:39:25.802676 #7440]  INFO -- :   Rendered line_items/create.js.erb (371.0ms)
I, [2015-01-09T07:39:25.849678 #7440]  INFO -- : Completed 200 OK in 1221ms (Views: 428.0ms | ActiveRecord: 168.0ms)
D, [2015-01-09T07:39:27.277760 #7440] DEBUG -- : 
D, [2015-01-09T07:39:27.297761 #7440] DEBUG -- : 
I, [2015-01-09T07:39:27.346764 #7440]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-09 07:39:27 +0000
I, [2015-01-09T07:39:27.434769 #7440]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-09T07:39:27.507773 #7440] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-09T07:39:27.581777 #7440] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-09T07:39:27.655782 #7440] DEBUG -- :   [1m[36mCart Load (2.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 37]]
D, [2015-01-09T07:39:27.742787 #7440] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 37]]
I, [2015-01-09T07:39:27.855793 #7440]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: nil, payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-09T07:40:02.211758 #7440] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-09T07:40:02.310764 #7440] DEBUG -- :   [1m[35mSQL (6.0ms)[0m  INSERT INTO "orders" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Fri, 09 Jan 2015 07:40:02 UTC +00:00], ["updated_at", Fri, 09 Jan 2015 07:40:02 UTC +00:00]]
D, [2015-01-09T07:40:02.419770 #7440] DEBUG -- :   [1m[36mSQL (4.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 110[0m  [["cart_id", nil], ["order_id", 84], ["updated_at", Fri, 09 Jan 2015 07:40:02 UTC +00:00]]
D, [2015-01-09T07:40:02.523776 #7440] DEBUG -- :   [1m[35mSQL (4.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 111  [["cart_id", nil], ["order_id", 84], ["updated_at", Fri, 09 Jan 2015 07:40:02 UTC +00:00]]
I, [2015-01-09T07:40:02.549777 #7440]  INFO -- : about to @payment.create
D, [2015-01-09T07:40:02.778791 #7440] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-09T07:40:02.862795 #7440] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
I, [2015-01-09T07:40:03.488831 #7440]  INFO -- : in order=
I, [2015-01-09T07:40:04.115867 #7440]  INFO -- : in payment.create
I, [2015-01-09T07:40:04.318879 #7440]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Camo Print Tee", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Camo Print Tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"18.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/84/confirm", "cancel_url"=>"http://localhost:3000/orders/84/cancel"}}
I, [2015-01-09T07:40:04.854909 #7440]  INFO -- : #<ActiveModel::Errors:0x00000009351570 @base=#<Payment:0x000000045cc5e8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000045c6800 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000002b900a8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000002b89c58 @error=nil, @total="38.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000002a9ef78 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000029a7890 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x000000028ec3d8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009745a28 @error=nil, @return_url="http://localhost:3000/orders/84/confirm", @cancel_url="http://localhost:3000/orders/84/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009351570 ...>>, @messages={}>
I, [2015-01-09T07:40:04.878911 #7440]  INFO -- : got past invalid
I, [2015-01-09T07:40:04.963916 #7440]  INFO -- : PayPal-Request-Id: 3b88a99d-c04d-4c92-8baf-e773f1e49348
I, [2015-01-09T07:40:04.997917 #7440]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-09T07:40:06.345995 #7440]  INFO -- : Response[201]: Created, Duration: 1.314s
I, [2015-01-09T07:40:06.380997 #7440]  INFO -- : back from super
I, [2015-01-09T07:40:06.785020 #7440]  INFO -- : {"id"=>"PAY-0KN467456G259372PKSXYLWA", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"38.98", "details"=>{"subtotal"=>"38.98"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Camo Print Tee", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Camo Print Tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"18.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/84/confirm", "cancel_url"=>"http://localhost:3000/orders/84/cancel"}, "create_time"=>"2015-01-09T07:40:08Z", "update_time"=>"2015-01-09T07:40:08Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-0KN467456G259372PKSXYLWA", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6EW74363J2887660S", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-0KN467456G259372PKSXYLWA/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-09T07:40:06.968030 #7440] DEBUG -- :   [1m[36mSQL (8.0ms)[0m  [1mUPDATE "orders" SET "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ?, "pay_type" = ? WHERE "orders"."id" = 84[0m  [["created_at", Fri, 09 Jan 2015 07:40:02 UTC +00:00], ["updated_at", Fri, 09 Jan 2015 07:40:02 UTC +00:00], ["id", 84], ["payment_id", "PAY-0KN467456G259372PKSXYLWA"], ["state", "created"], ["pay_type", "paypal"]]
D, [2015-01-09T07:40:07.026033 #7440] DEBUG -- :   [1m[35mSQL (1.0ms)[0m  UPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 84
I, [2015-01-09T07:40:07.049035 #7440]  INFO -- : @payment save just done
I, [2015-01-09T07:40:07.850081 #7440]  INFO -- : #<Payment:0x000000045cc5e8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000903c380 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009037920 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009037358 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009036598 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009035fd0 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009034d60 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000902fc48 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000902f130 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000902d7b8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009745a28 @error=nil, @return_url="http://localhost:3000/orders/84/confirm", @cancel_url="http://localhost:3000/orders/84/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009351570 @base=#<Payment:0x000000045cc5e8 ...>, @messages={}>, @request_id="3b88a99d-c04d-4c92-8baf-e773f1e49348", @header={}, @id="PAY-0KN467456G259372PKSXYLWA", @create_time="2015-01-09T07:40:08Z", @update_time="2015-01-09T07:40:08Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000090267d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0KN467456G259372PKSXYLWA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009025478 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6EW74363J2887660S", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009024398 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0KN467456G259372PKSXYLWA/execute", @rel="execute", @method="POST">]>
I, [2015-01-09T07:40:08.453115 #7440]  INFO -- : #<Payment:0x000000045cc5e8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000903c380 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009037920 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009037358 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009036598 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009035fd0 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009034d60 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000902fc48 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000902f130 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000902d7b8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009745a28 @error=nil, @return_url="http://localhost:3000/orders/84/confirm", @cancel_url="http://localhost:3000/orders/84/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009351570 @base=#<Payment:0x000000045cc5e8 ...>, @messages={}>, @request_id="3b88a99d-c04d-4c92-8baf-e773f1e49348", @header={}, @id="PAY-0KN467456G259372PKSXYLWA", @create_time="2015-01-09T07:40:08Z", @update_time="2015-01-09T07:40:08Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000090267d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0KN467456G259372PKSXYLWA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009025478 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6EW74363J2887660S", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009024398 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0KN467456G259372PKSXYLWA/execute", @rel="execute", @method="POST">]>
D, [2015-01-09T07:40:08.663127 #7440] DEBUG -- :   [1m[36m (179.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-09T07:40:08.823136 #7440] DEBUG -- :   [1m[35mSQL (109.0ms)[0m  UPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 84
I, [2015-01-09T07:40:08.849138 #7440]  INFO -- : about to approve url
I, [2015-01-09T07:40:09.663184 #7440]  INFO -- : #<Payment:0x000000045cc5e8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000903c380 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009037920 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009037358 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009036598 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009035fd0 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009034d60 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000902fc48 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000902f130 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000902d7b8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009745a28 @error=nil, @return_url="http://localhost:3000/orders/84/confirm", @cancel_url="http://localhost:3000/orders/84/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009351570 @base=#<Payment:0x000000045cc5e8 ...>, @messages={}>, @request_id="3b88a99d-c04d-4c92-8baf-e773f1e49348", @header={}, @id="PAY-0KN467456G259372PKSXYLWA", @create_time="2015-01-09T07:40:08Z", @update_time="2015-01-09T07:40:08Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000090267d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0KN467456G259372PKSXYLWA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009025478 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6EW74363J2887660S", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009024398 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0KN467456G259372PKSXYLWA/execute", @rel="execute", @method="POST">]>
I, [2015-01-09T07:40:10.640240 #7440]  INFO -- : #<Payment:0x000000045cc5e8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000903c380 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009037920 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009037358 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009036598 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009035fd0 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009034d60 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000902fc48 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000902f130 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000902d7b8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009745a28 @error=nil, @return_url="http://localhost:3000/orders/84/confirm", @cancel_url="http://localhost:3000/orders/84/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009351570 @base=#<Payment:0x000000045cc5e8 ...>, @messages={}>, @request_id="3b88a99d-c04d-4c92-8baf-e773f1e49348", @header={}, @id="PAY-0KN467456G259372PKSXYLWA", @create_time="2015-01-09T07:40:08Z", @update_time="2015-01-09T07:40:08Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000090267d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0KN467456G259372PKSXYLWA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009025478 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6EW74363J2887660S", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009024398 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0KN467456G259372PKSXYLWA/execute", @rel="execute", @method="POST">]>
I, [2015-01-09T07:40:10.694243 #7440]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6EW74363J2887660S
I, [2015-01-09T07:40:11.730303 #7440]  INFO -- : #<Payment:0x000000045cc5e8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000903c380 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009037920 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009037358 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009036598 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009035fd0 @error=nil, @total="38.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009034d60 @error=nil, @subtotal="38.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000902fc48 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000902f130 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x0000000902d7b8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="18.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000009745a28 @error=nil, @return_url="http://localhost:3000/orders/84/confirm", @cancel_url="http://localhost:3000/orders/84/cancel">, @logger=#<Logger:0x00000005663280 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005663230 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x000000056631b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005663168 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005663118>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009351570 @base=#<Payment:0x000000045cc5e8 ...>, @messages={}>, @request_id="3b88a99d-c04d-4c92-8baf-e773f1e49348", @header={}, @id="PAY-0KN467456G259372PKSXYLWA", @create_time="2015-01-09T07:40:08Z", @update_time="2015-01-09T07:40:08Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000090267d8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0KN467456G259372PKSXYLWA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009025478 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6EW74363J2887660S", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009024398 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0KN467456G259372PKSXYLWA/execute", @rel="execute", @method="POST">]>
I, [2015-01-09T07:40:11.795306 #7440]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-6EW74363J2887660S
I, [2015-01-09T07:40:11.839309 #7440]  INFO -- : Completed 403 Forbidden in 44365ms (ActiveRecord: 323.0ms)
D, [2015-01-09T07:40:52.677645 #7440] DEBUG -- : 
D, [2015-01-09T07:40:52.699646 #7440] DEBUG -- : 
I, [2015-01-09T07:40:52.776650 #7440]  INFO -- : Started GET "/orders/84/confirm?paymentId=PAY-0KN467456G259372PKSXYLWA&token=EC-6EW74363J2887660S&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-09 07:40:52 +0000
I, [2015-01-09T07:40:52.855655 #7440]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-09T07:40:52.922659 #7440]  INFO -- :   Parameters: {"paymentId"=>"PAY-0KN467456G259372PKSXYLWA", "token"=>"EC-6EW74363J2887660S", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"84"}
D, [2015-01-09T07:40:52.986662 #7440] DEBUG -- :   [1m[36mUser Load (2.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-09T07:40:53.051666 #7440] DEBUG -- :   [1m[35mUser Load (2.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-09T07:40:53.120670 #7440] DEBUG -- :   [1m[36mOrder Load (3.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "84"]]
I, [2015-01-09T07:41:32.357914 #7440]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-0KN467456G259372PKSXYLWA
I, [2015-01-09T07:41:33.516980 #7440]  INFO -- : Response[200]: OK, Duration: 1.131s
D, [2015-01-09T07:42:07.701936 #7440] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2015-01-09T07:42:07.851944 #7440] DEBUG -- :   [1m[36mSQL (8.0ms)[0m  [1mUPDATE "orders" SET "name" = ?, "email" = ?, "address" = ?, "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 84[0m  [["name", "Test Buyer"], ["email", "simon.king65-buyer@gmail.com"], ["address", "1 Main Terrace"], ["shipping_address1", "1 Main Terrace"], ["updated_at", Fri, 09 Jan 2015 07:42:07 UTC +00:00]]
D, [2015-01-09T07:42:08.015954 #7440] DEBUG -- :   [1m[35m (129.0ms)[0m  commit transaction
I, [2015-01-09T07:42:08.180963 #7440]  INFO -- :   Rendered orders/_form.html.erb (103.0ms)
I, [2015-01-09T07:42:08.238966 #7440]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (156.0ms)
I, [2015-01-09T07:42:08.432978 #7440]  INFO -- : Completed 200 OK in 75465ms (Views: 369.0ms | ActiveRecord: 146.0ms)
D, [2015-01-09T07:42:08.770997 #7440] DEBUG -- : 
D, [2015-01-09T07:42:08.787998 #7440] DEBUG -- : 
I, [2015-01-09T07:42:08.829000 #7440]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-09 07:42:08 +0000
D, [2015-01-09T07:42:08.933006 #7440] DEBUG -- : 
D, [2015-01-09T07:42:08.950007 #7440] DEBUG -- : 
I, [2015-01-09T07:42:08.996010 #7440]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-09 07:42:08 +0000
D, [2015-01-09T07:42:09.103016 #7440] DEBUG -- : 
D, [2015-01-09T07:42:09.130017 #7440] DEBUG -- : 
I, [2015-01-09T07:42:09.201021 #7440]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-09 07:42:09 +0000
D, [2015-01-09T07:42:09.272026 #7440] DEBUG -- : 
D, [2015-01-09T07:42:09.298027 #7440] DEBUG -- : 
I, [2015-01-09T07:42:09.343030 #7440]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-09 07:42:09 +0000
D, [2015-01-09T07:42:09.420034 #7440] DEBUG -- : 
D, [2015-01-09T07:42:09.441035 #7440] DEBUG -- : 
I, [2015-01-09T07:42:09.489038 #7440]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-09 07:42:09 +0000
D, [2015-01-09T07:42:09.552042 #7440] DEBUG -- : 
D, [2015-01-09T07:42:09.578043 #7440] DEBUG -- : 
I, [2015-01-09T07:42:09.620045 #7440]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-09 07:42:09 +0000
D, [2015-01-09T07:42:09.692050 #7440] DEBUG -- : 
D, [2015-01-09T07:42:09.712051 #7440] DEBUG -- : 
I, [2015-01-09T07:42:09.759053 #7440]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-09 07:42:09 +0000
D, [2015-01-09T07:42:09.833058 #7440] DEBUG -- : 
D, [2015-01-09T07:42:09.852059 #7440] DEBUG -- : 
I, [2015-01-09T07:42:09.906062 #7440]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-09 07:42:09 +0000
D, [2015-01-09T07:42:09.986066 #7440] DEBUG -- : 
D, [2015-01-09T07:42:10.006068 #7440] DEBUG -- : 
I, [2015-01-09T07:42:10.053070 #7440]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-09 07:42:10 +0000
D, [2015-01-09T07:42:10.146076 #7440] DEBUG -- : 
D, [2015-01-09T07:42:10.162076 #7440] DEBUG -- : 
I, [2015-01-09T07:42:10.202079 #7440]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-09 07:42:10 +0000
D, [2015-01-09T07:42:10.277083 #7440] DEBUG -- : 
D, [2015-01-09T07:42:10.295084 #7440] DEBUG -- : 
I, [2015-01-09T07:42:10.345087 #7440]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-09 07:42:10 +0000
D, [2015-01-09T07:42:10.424091 #7440] DEBUG -- : 
D, [2015-01-09T07:42:10.439092 #7440] DEBUG -- : 
I, [2015-01-09T07:42:10.483095 #7440]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-09 07:42:10 +0000
D, [2015-01-09T07:42:10.552099 #7440] DEBUG -- : 
D, [2015-01-09T07:42:10.581100 #7440] DEBUG -- : 
I, [2015-01-09T07:42:10.621103 #7440]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-09 07:42:10 +0000
D, [2015-01-09T07:42:10.702107 #7440] DEBUG -- : 
D, [2015-01-09T07:42:10.720108 #7440] DEBUG -- : 
I, [2015-01-09T07:42:10.765111 #7440]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-09 07:42:10 +0000
D, [2015-01-09T07:42:10.847116 #7440] DEBUG -- : 
D, [2015-01-09T07:42:10.867117 #7440] DEBUG -- : 
I, [2015-01-09T07:42:10.916120 #7440]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-09 07:42:10 +0000
D, [2015-01-09T07:42:10.993124 #7440] DEBUG -- : 
D, [2015-01-09T07:42:11.011125 #7440] DEBUG -- : 
I, [2015-01-09T07:42:11.049127 #7440]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-09 07:42:11 +0000
D, [2015-01-09T07:42:11.126132 #7440] DEBUG -- : 
D, [2015-01-09T07:42:11.146133 #7440] DEBUG -- : 
I, [2015-01-09T07:42:11.187135 #7440]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-09 07:42:11 +0000
D, [2015-01-09T07:42:11.262139 #7440] DEBUG -- : 
D, [2015-01-09T07:42:11.280140 #7440] DEBUG -- : 
I, [2015-01-09T07:42:11.325143 #7440]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-09 07:42:11 +0000
D, [2015-01-09T07:42:11.403147 #7440] DEBUG -- : 
D, [2015-01-09T07:42:11.425149 #7440] DEBUG -- : 
I, [2015-01-09T07:42:11.467151 #7440]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-09 07:42:11 +0000
D, [2015-01-09T07:42:11.533155 #7440] DEBUG -- : 
D, [2015-01-09T07:42:11.564157 #7440] DEBUG -- : 
I, [2015-01-09T07:42:11.606159 #7440]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-09 07:42:11 +0000
D, [2015-01-09T07:42:11.682163 #7440] DEBUG -- : 
D, [2015-01-09T07:42:11.701164 #7440] DEBUG -- : 
I, [2015-01-09T07:42:11.748167 #7440]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-09 07:42:11 +0000
D, [2015-01-09T07:42:11.811171 #7440] DEBUG -- : 
D, [2015-01-09T07:42:11.836172 #7440] DEBUG -- : 
I, [2015-01-09T07:42:11.877175 #7440]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-09 07:42:11 +0000
D, [2015-01-09T07:42:11.946178 #7440] DEBUG -- : 
D, [2015-01-09T07:42:11.965180 #7440] DEBUG -- : 
I, [2015-01-09T07:42:12.011182 #7440]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-09 07:42:11 +0000
D, [2015-01-09T07:42:12.079186 #7440] DEBUG -- : 
D, [2015-01-09T07:42:12.096187 #7440] DEBUG -- : 
I, [2015-01-09T07:42:12.142190 #7440]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-09 07:42:12 +0000
D, [2015-01-09T07:42:12.212194 #7440] DEBUG -- : 
D, [2015-01-09T07:42:12.229195 #7440] DEBUG -- : 
I, [2015-01-09T07:42:12.277197 #7440]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-09 07:42:12 +0000
D, [2015-01-09T07:42:12.351202 #7440] DEBUG -- : 
D, [2015-01-09T07:42:12.368203 #7440] DEBUG -- : 
I, [2015-01-09T07:42:12.412205 #7440]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-09 07:42:12 +0000
D, [2015-01-09T07:42:12.485209 #7440] DEBUG -- : 
D, [2015-01-09T07:42:12.503210 #7440] DEBUG -- : 
I, [2015-01-09T07:42:12.542213 #7440]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-09 07:42:12 +0000
D, [2015-01-09T07:42:16.746453 #7440] DEBUG -- : 
D, [2015-01-09T07:42:16.766454 #7440] DEBUG -- : 
I, [2015-01-09T07:42:16.838458 #7440]  INFO -- : Started POST "/orders/84/execute/84/2VZ7YQDDDPPC4/PAY-0KN467456G259372PKSXYLWA" for 127.0.0.1 at 2015-01-09 07:42:16 +0000
I, [2015-01-09T07:42:16.937464 #7440]  INFO -- : Processing by OrdersController#execute as HTML
I, [2015-01-09T07:42:17.047470 #7440]  INFO -- :   Parameters: {"authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order_id"=>"84", "payer_id"=>"2VZ7YQDDDPPC4", "payment_id"=>"PAY-0KN467456G259372PKSXYLWA"}
D, [2015-01-09T07:42:17.133475 #7440] DEBUG -- :   [1m[36mOrder Load (2.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "84"]]
I, [2015-01-09T07:48:11.954770 #7440]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-0KN467456G259372PKSXYLWA
I, [2015-01-09T07:48:13.130837 #7440]  INFO -- : Response[200]: OK, Duration: 1.145s
I, [2015-01-09T07:48:13.185840 #7440]  INFO -- : PayPal-Request-Id: 84fe9e35-80f8-4297-91dc-8530aaef1eac
I, [2015-01-09T07:48:13.240843 #7440]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-0KN467456G259372PKSXYLWA/execute
I, [2015-01-09T07:48:15.386966 #7440]  INFO -- : Response[200]: OK, Duration: 2.105s
W, [2015-01-09T07:48:15.453970 #7440]  WARN -- : undefined method `fee=' for #<PayPal::SDK::REST::DataTypes::Details:0x0000000896eb20>
D, [2015-01-09T07:48:15.505973 #7440] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-09T07:48:15.572977 #7440] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mrollback transaction[0m
I, [2015-01-09T07:48:15.644981 #7440]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-0KN467456G259372PKSXYLWA
I, [2015-01-09T07:48:16.848050 #7440]  INFO -- : Response[200]: OK, Duration: 1.162s
I, [2015-01-09T07:48:16.904053 #7440]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-09T07:48:16.954056 #7440]  INFO -- : Completed 302 Found in 359858ms (ActiveRecord: 4.0ms)
D, [2015-01-09T07:48:17.030060 #7440] DEBUG -- : 
D, [2015-01-09T07:48:17.079063 #7440] DEBUG -- : 
I, [2015-01-09T07:48:17.129066 #7440]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-09 07:48:17 +0000
I, [2015-01-09T07:48:19.550204 #7440]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-09T07:48:19.674211 #7440] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 37]]
D, [2015-01-09T07:48:19.885223 #7440] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-09T07:48:20.151239 #7440]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (4.0ms)
I, [2015-01-09T07:48:20.198241 #7440]  INFO -- :   Rendered store/index.html.erb within layouts/application (332.0ms)
D, [2015-01-09T07:48:20.492258 #7440] DEBUG -- :   [1m[35mLineItem Exists (2.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 37]]
D, [2015-01-09T07:48:20.574263 #7440] DEBUG -- :   [1m[36mLineItem Load (3.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 37]]
I, [2015-01-09T07:48:20.610265 #7440]  INFO -- :   Rendered collection (1.0ms)
I, [2015-01-09T07:48:20.712271 #7440]  INFO -- :   Rendered carts/_cart.html.erb (174.0ms)
I, [2015-01-09T07:48:20.781275 #7440]  INFO -- : Completed 200 OK in 1185ms (Views: 911.1ms | ActiveRecord: 32.0ms)
D, [2015-01-09T07:48:21.155296 #7440] DEBUG -- : 
D, [2015-01-09T07:48:21.177297 #7440] DEBUG -- : 
I, [2015-01-09T07:48:21.233300 #7440]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-09 07:48:21 +0000
D, [2015-01-09T07:48:21.327306 #7440] DEBUG -- : 
D, [2015-01-09T07:48:21.349307 #7440] DEBUG -- : 
I, [2015-01-09T07:48:21.418311 #7440]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-09 07:48:21 +0000
D, [2015-01-09T07:48:21.528317 #7440] DEBUG -- : 
D, [2015-01-09T07:48:21.557319 #7440] DEBUG -- : 
I, [2015-01-09T07:48:21.614322 #7440]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-09 07:48:21 +0000
D, [2015-01-09T07:48:21.688327 #7440] DEBUG -- : 
D, [2015-01-09T07:48:21.716328 #7440] DEBUG -- : 
I, [2015-01-09T07:48:21.767331 #7440]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-09 07:48:21 +0000
D, [2015-01-09T07:48:21.862336 #7440] DEBUG -- : 
D, [2015-01-09T07:48:21.883338 #7440] DEBUG -- : 
I, [2015-01-09T07:48:21.941341 #7440]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-09 07:48:21 +0000
D, [2015-01-09T07:48:22.018345 #7440] DEBUG -- : 
D, [2015-01-09T07:48:22.038347 #7440] DEBUG -- : 
I, [2015-01-09T07:48:22.090350 #7440]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-09 07:48:22 +0000
D, [2015-01-09T07:48:22.174354 #7440] DEBUG -- : 
D, [2015-01-09T07:48:22.195356 #7440] DEBUG -- : 
I, [2015-01-09T07:48:22.251359 #7440]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-09 07:48:22 +0000
D, [2015-01-09T07:48:22.328363 #7440] DEBUG -- : 
D, [2015-01-09T07:48:22.352364 #7440] DEBUG -- : 
I, [2015-01-09T07:48:22.407368 #7440]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-09 07:48:22 +0000
D, [2015-01-09T07:48:22.512374 #7440] DEBUG -- : 
D, [2015-01-09T07:48:22.536375 #7440] DEBUG -- : 
I, [2015-01-09T07:48:22.592378 #7440]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-09 07:48:22 +0000
D, [2015-01-09T07:48:22.685384 #7440] DEBUG -- : 
D, [2015-01-09T07:48:22.708385 #7440] DEBUG -- : 
I, [2015-01-09T07:48:22.761388 #7440]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-09 07:48:22 +0000
D, [2015-01-09T07:48:22.851393 #7440] DEBUG -- : 
D, [2015-01-09T07:48:22.876394 #7440] DEBUG -- : 
I, [2015-01-09T07:48:22.944398 #7440]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-09 07:48:22 +0000
D, [2015-01-09T07:48:23.029403 #7440] DEBUG -- : 
D, [2015-01-09T07:48:23.070406 #7440] DEBUG -- : 
I, [2015-01-09T07:48:23.125409 #7440]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-09 07:48:23 +0000
D, [2015-01-09T07:48:23.214414 #7440] DEBUG -- : 
D, [2015-01-09T07:48:23.237415 #7440] DEBUG -- : 
I, [2015-01-09T07:48:23.296418 #7440]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-09 07:48:23 +0000
D, [2015-01-09T07:48:23.379423 #7440] DEBUG -- : 
D, [2015-01-09T07:48:23.401424 #7440] DEBUG -- : 
I, [2015-01-09T07:48:23.465428 #7440]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-09 07:48:23 +0000
D, [2015-01-09T07:48:23.548433 #7440] DEBUG -- : 
D, [2015-01-09T07:48:23.576435 #7440] DEBUG -- : 
I, [2015-01-09T07:48:23.637438 #7440]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-09 07:48:23 +0000
D, [2015-01-09T07:48:23.712442 #7440] DEBUG -- : 
D, [2015-01-09T07:48:23.737444 #7440] DEBUG -- : 
I, [2015-01-09T07:48:23.797447 #7440]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-09 07:48:23 +0000
D, [2015-01-09T07:48:23.872451 #7440] DEBUG -- : 
D, [2015-01-09T07:48:23.906453 #7440] DEBUG -- : 
I, [2015-01-09T07:48:23.967457 #7440]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-09 07:48:23 +0000
D, [2015-01-09T07:48:24.041461 #7440] DEBUG -- : 
D, [2015-01-09T07:48:24.065462 #7440] DEBUG -- : 
I, [2015-01-09T07:48:24.128466 #7440]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-09 07:48:24 +0000
D, [2015-01-09T07:48:24.202470 #7440] DEBUG -- : 
D, [2015-01-09T07:48:24.224472 #7440] DEBUG -- : 
I, [2015-01-09T07:48:24.282475 #7440]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-09 07:48:24 +0000
D, [2015-01-09T07:48:24.358479 #7440] DEBUG -- : 
D, [2015-01-09T07:48:24.382481 #7440] DEBUG -- : 
I, [2015-01-09T07:48:24.444484 #7440]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-09 07:48:24 +0000
D, [2015-01-09T07:48:24.522489 #7440] DEBUG -- : 
D, [2015-01-09T07:48:24.546490 #7440] DEBUG -- : 
I, [2015-01-09T07:48:24.609494 #7440]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-09 07:48:24 +0000
D, [2015-01-09T07:48:24.692498 #7440] DEBUG -- : 
D, [2015-01-09T07:48:24.715500 #7440] DEBUG -- : 
I, [2015-01-09T07:48:24.772503 #7440]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-09 07:48:24 +0000
D, [2015-01-09T07:48:24.847507 #7440] DEBUG -- : 
D, [2015-01-09T07:48:24.872509 #7440] DEBUG -- : 
I, [2015-01-09T07:48:24.942513 #7440]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-09 07:48:24 +0000
D, [2015-01-09T07:48:25.015517 #7440] DEBUG -- : 
D, [2015-01-09T07:48:25.042518 #7440] DEBUG -- : 
I, [2015-01-09T07:48:25.123523 #7440]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-09 07:48:25 +0000
D, [2015-01-09T07:48:25.195527 #7440] DEBUG -- : 
D, [2015-01-09T07:48:25.217528 #7440] DEBUG -- : 
I, [2015-01-09T07:48:25.276532 #7440]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-09 07:48:25 +0000
D, [2015-01-09T07:48:25.349536 #7440] DEBUG -- : 
D, [2015-01-09T07:48:25.375537 #7440] DEBUG -- : 
I, [2015-01-09T07:48:25.440541 #7440]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-09 07:48:25 +0000
D, [2015-01-09T07:48:25.570549 #7440] DEBUG -- : 
D, [2015-01-09T07:48:25.601550 #7440] DEBUG -- : 
I, [2015-01-09T07:48:25.662554 #7440]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-09 07:48:25 +0000
D, [2015-01-09T07:48:25.740558 #7440] DEBUG -- : 
D, [2015-01-09T07:48:25.763560 #7440] DEBUG -- : 
I, [2015-01-09T07:48:25.821563 #7440]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-09 07:48:25 +0000
D, [2015-01-09T07:48:25.893567 #7440] DEBUG -- : 
D, [2015-01-09T07:48:25.915568 #7440] DEBUG -- : 
I, [2015-01-09T07:48:25.973572 #7440]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-09 07:48:25 +0000
=======
D, [2015-01-09T22:56:51.331605 #33792] DEBUG -- : 
D, [2015-01-09T22:56:51.344782 #33792] DEBUG -- : 
I, [2015-01-09T22:56:51.348066 #33792]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-09 22:56:51 +0000
D, [2015-01-09T22:56:52.291673 #33792] DEBUG -- :   [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
I, [2015-01-09T22:56:52.607054 #33792]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-09T22:56:52.820715 #33792] DEBUG -- :   [1m[35mCart Load (21.9ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-09T22:56:52.915545 #33792] DEBUG -- :   [1m[36mProduct Load (0.7ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-09T22:56:52.976775 #33792]  INFO -- : Cache digest for store/index.html: a93d4e2e981ab3dfce98a095c3b6c059
I, [2015-01-09T22:56:53.011410 #33792]  INFO -- : Read fragment views/store/products/2-20141022062504570899000/a93d4e2e981ab3dfce98a095c3b6c059 (23.1ms)
I, [2015-01-09T22:56:53.011658 #33792]  INFO -- :   Rendered store/index.html.erb within layouts/application (112.9ms)
D, [2015-01-09T22:56:53.599724 #33792] DEBUG -- :   [1m[35mLineItem Exists (19.3ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 53]]
D, [2015-01-09T22:56:53.720083 #33792] DEBUG -- :   [1m[36mLineItem Load (0.3ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-09T22:56:53.720417 #33792]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-09T22:56:53.880758 #33792]  INFO -- :   Rendered carts/_cart.html.erb (162.6ms)
I, [2015-01-09T22:56:53.882016 #33792]  INFO -- : Completed 200 OK in 1275ms (Views: 1022.9ms | ActiveRecord: 43.4ms)
D, [2015-01-09T22:56:57.570663 #33792] DEBUG -- : 
D, [2015-01-09T22:56:57.611982 #33792] DEBUG -- : 
I, [2015-01-09T22:56:57.612356 #33792]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-09 22:56:57 +0000
D, [2015-01-09T22:56:57.624382 #33792] DEBUG -- : 
D, [2015-01-09T22:56:57.624462 #33792] DEBUG -- : 
I, [2015-01-09T22:56:57.624670 #33792]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-09 22:56:57 +0000
D, [2015-01-09T22:56:57.634404 #33792] DEBUG -- : 
D, [2015-01-09T22:56:57.634589 #33792] DEBUG -- : 
I, [2015-01-09T22:56:57.634776 #33792]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-09 22:56:57 +0000
D, [2015-01-09T22:56:57.887227 #33792] DEBUG -- : 
D, [2015-01-09T22:56:57.887312 #33792] DEBUG -- : 
I, [2015-01-09T22:56:57.887488 #33792]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-09 22:56:57 +0000
D, [2015-01-09T22:56:57.894629 #33792] DEBUG -- : 
D, [2015-01-09T22:56:57.894705 #33792] DEBUG -- : 
I, [2015-01-09T22:56:57.894908 #33792]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-09 22:56:57 +0000
D, [2015-01-09T22:56:57.901986 #33792] DEBUG -- : 
D, [2015-01-09T22:56:57.902091 #33792] DEBUG -- : 
I, [2015-01-09T22:56:57.902286 #33792]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-09 22:56:57 +0000
D, [2015-01-09T22:56:57.909482 #33792] DEBUG -- : 
D, [2015-01-09T22:56:57.909559 #33792] DEBUG -- : 
I, [2015-01-09T22:56:57.909749 #33792]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-09 22:56:57 +0000
D, [2015-01-09T22:56:58.074953 #33792] DEBUG -- : 
D, [2015-01-09T22:56:58.075050 #33792] DEBUG -- : 
I, [2015-01-09T22:56:58.075289 #33792]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-09 22:56:58 +0000
D, [2015-01-09T22:56:58.088189 #33792] DEBUG -- : 
D, [2015-01-09T22:56:58.091446 #33792] DEBUG -- : 
I, [2015-01-09T22:56:58.091981 #33792]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-09 22:56:58 +0000
D, [2015-01-09T22:56:58.337855 #33792] DEBUG -- : 
D, [2015-01-09T22:56:58.337937 #33792] DEBUG -- : 
I, [2015-01-09T22:56:58.338158 #33792]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-09 22:56:58 +0000
D, [2015-01-09T22:56:58.345073 #33792] DEBUG -- : 
D, [2015-01-09T22:56:58.345152 #33792] DEBUG -- : 
I, [2015-01-09T22:56:58.345340 #33792]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-09 22:56:58 +0000
D, [2015-01-09T22:56:58.353953 #33792] DEBUG -- : 
D, [2015-01-09T22:56:58.354079 #33792] DEBUG -- : 
I, [2015-01-09T22:56:58.354270 #33792]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-09 22:56:58 +0000
D, [2015-01-09T22:56:58.403186 #33792] DEBUG -- : 
D, [2015-01-09T22:56:58.403265 #33792] DEBUG -- : 
I, [2015-01-09T22:56:58.403529 #33792]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-09 22:56:58 +0000
D, [2015-01-09T22:56:58.458340 #33792] DEBUG -- : 
D, [2015-01-09T22:56:58.458429 #33792] DEBUG -- : 
I, [2015-01-09T22:56:58.458699 #33792]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-09 22:56:58 +0000
D, [2015-01-09T22:56:58.598913 #33792] DEBUG -- : 
D, [2015-01-09T22:56:58.599117 #33792] DEBUG -- : 
I, [2015-01-09T22:56:58.599348 #33792]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-09 22:56:58 +0000
D, [2015-01-09T22:56:58.943144 #33792] DEBUG -- : 
D, [2015-01-09T22:56:58.943233 #33792] DEBUG -- : 
I, [2015-01-09T22:56:58.943438 #33792]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-09 22:56:58 +0000
D, [2015-01-09T22:56:58.953530 #33792] DEBUG -- : 
D, [2015-01-09T22:56:58.953626 #33792] DEBUG -- : 
I, [2015-01-09T22:56:58.953831 #33792]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-09 22:56:58 +0000
D, [2015-01-09T22:56:58.962612 #33792] DEBUG -- : 
D, [2015-01-09T22:56:58.962692 #33792] DEBUG -- : 
I, [2015-01-09T22:56:58.962896 #33792]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-09 22:56:58 +0000
D, [2015-01-09T22:56:58.973361 #33792] DEBUG -- : 
D, [2015-01-09T22:56:58.974010 #33792] DEBUG -- : 
I, [2015-01-09T22:56:58.974245 #33792]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-09 22:56:58 +0000
D, [2015-01-09T22:56:58.982935 #33792] DEBUG -- : 
D, [2015-01-09T22:56:58.983017 #33792] DEBUG -- : 
I, [2015-01-09T22:56:58.983255 #33792]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-09 22:56:58 +0000
D, [2015-01-09T22:56:58.992883 #33792] DEBUG -- : 
D, [2015-01-09T22:56:58.993026 #33792] DEBUG -- : 
I, [2015-01-09T22:56:58.993314 #33792]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-09 22:56:58 +0000
D, [2015-01-09T22:56:59.012768 #33792] DEBUG -- : 
D, [2015-01-09T22:56:59.012861 #33792] DEBUG -- : 
I, [2015-01-09T22:56:59.013064 #33792]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-09 22:56:59 +0000
D, [2015-01-09T22:56:59.023608 #33792] DEBUG -- : 
D, [2015-01-09T22:56:59.023730 #33792] DEBUG -- : 
I, [2015-01-09T22:56:59.023969 #33792]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-09 22:56:59 +0000
D, [2015-01-09T22:56:59.142648 #33792] DEBUG -- : 
D, [2015-01-09T22:56:59.142728 #33792] DEBUG -- : 
I, [2015-01-09T22:56:59.142904 #33792]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-09 22:56:59 +0000
D, [2015-01-09T22:56:59.153597 #33792] DEBUG -- : 
D, [2015-01-09T22:56:59.153685 #33792] DEBUG -- : 
I, [2015-01-09T22:56:59.153882 #33792]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-09 22:56:59 +0000
D, [2015-01-09T22:56:59.247521 #33792] DEBUG -- : 
D, [2015-01-09T22:56:59.247598 #33792] DEBUG -- : 
I, [2015-01-09T22:56:59.247776 #33792]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-09 22:56:59 +0000
D, [2015-01-09T22:56:59.254722 #33792] DEBUG -- : 
D, [2015-01-09T22:56:59.254800 #33792] DEBUG -- : 
I, [2015-01-09T22:56:59.254968 #33792]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-09 22:56:59 +0000
D, [2015-01-09T22:56:59.323650 #33792] DEBUG -- : 
D, [2015-01-09T22:56:59.323728 #33792] DEBUG -- : 
I, [2015-01-09T22:56:59.323929 #33792]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-09 22:56:59 +0000
D, [2015-01-09T22:56:59.372278 #33792] DEBUG -- : 
D, [2015-01-09T22:56:59.372459 #33792] DEBUG -- : 
I, [2015-01-09T22:56:59.372573 #33792]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-09 22:56:59 +0000
D, [2015-01-09T22:57:01.281588 #33792] DEBUG -- : 
D, [2015-01-09T22:57:01.281673 #33792] DEBUG -- : 
I, [2015-01-09T22:57:01.282082 #33792]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-09 22:57:01 +0000
D, [2015-01-09T22:57:21.967107 #33792] DEBUG -- : 
D, [2015-01-09T22:57:21.980206 #33792] DEBUG -- : 
I, [2015-01-09T22:57:21.980523 #33792]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-09 22:57:21 +0000
I, [2015-01-09T22:57:22.003597 #33792]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-09T22:57:22.018166 #33792]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-09T22:57:22.020515 #33792] DEBUG -- :   [1m[35mCart Load (0.2ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-09T22:57:22.021657 #33792] DEBUG -- :   [1m[36mProduct Load (0.3ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-09T22:57:22.031036 #33792] DEBUG -- :   [1m[35mLineItem Load (0.3ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 53]]
D, [2015-01-09T22:57:22.134597 #33792] DEBUG -- :   [1m[36mProduct Load (0.3ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-09T22:57:22.179677 #33792] DEBUG -- :   [1m[35m (0.2ms)[0m  begin transaction
D, [2015-01-09T22:57:22.248734 #33792] DEBUG -- :   [1m[36mSQL (47.8ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 53], ["created_at", Fri, 09 Jan 2015 22:57:22 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7fe34f9488d0,'0.1299E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 09 Jan 2015 22:57:22 UTC +00:00]]
D, [2015-01-09T22:57:22.264248 #33792] DEBUG -- :   [1m[35m (14.9ms)[0m  commit transaction
D, [2015-01-09T22:57:22.299193 #33792] DEBUG -- :   [1m[36mLineItem Load (0.2ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-09T22:57:22.357287 #33792]  INFO -- :   Rendered line_items/_line_item.html.erb (25.2ms)
I, [2015-01-09T22:57:22.359544 #33792]  INFO -- :   Rendered carts/_cart.html.erb (62.7ms)
I, [2015-01-09T22:57:22.360162 #33792]  INFO -- :   Rendered line_items/create.js.erb (75.6ms)
I, [2015-01-09T22:57:22.360497 #33792]  INFO -- : Completed 200 OK in 342ms (Views: 95.5ms | ActiveRecord: 64.1ms)
D, [2015-01-09T22:57:24.204260 #33792] DEBUG -- : 
D, [2015-01-09T22:57:24.204385 #33792] DEBUG -- : 
I, [2015-01-09T22:57:24.204762 #33792]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-09 22:57:24 +0000
I, [2015-01-09T22:57:24.211184 #33792]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-09T22:57:24.211287 #33792]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-09T22:57:24.212962 #33792] DEBUG -- :   [1m[35mCart Load (0.2ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-09T22:57:24.214502 #33792] DEBUG -- :   [1m[36mProduct Load (0.2ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "2"]]
D, [2015-01-09T22:57:24.215882 #33792] DEBUG -- :   [1m[35mLineItem Load (0.2ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1  [["cart_id", 53]]
D, [2015-01-09T22:57:24.217263 #33792] DEBUG -- :   [1m[36mProduct Load (0.1ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
D, [2015-01-09T22:57:24.217788 #33792] DEBUG -- :   [1m[35m (0.1ms)[0m  begin transaction
D, [2015-01-09T22:57:24.219499 #33792] DEBUG -- :   [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 53], ["created_at", Fri, 09 Jan 2015 22:57:24 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:7fe34c755f08,'0.1099E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 09 Jan 2015 22:57:24 UTC +00:00]]
D, [2015-01-09T22:57:24.222967 #33792] DEBUG -- :   [1m[35m (3.0ms)[0m  commit transaction
D, [2015-01-09T22:57:24.235042 #33792] DEBUG -- :   [1m[36mLineItem Load (0.3ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
D, [2015-01-09T22:57:24.250794 #33792] DEBUG -- :   [1m[35mProduct Load (0.2ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-09T22:57:24.252297 #33792]  INFO -- :   Rendered line_items/_line_item.html.erb (14.3ms)
I, [2015-01-09T22:57:24.253960 #33792]  INFO -- :   Rendered carts/_cart.html.erb (21.1ms)
I, [2015-01-09T22:57:24.254264 #33792]  INFO -- :   Rendered line_items/create.js.erb (22.5ms)
I, [2015-01-09T22:57:24.254560 #33792]  INFO -- : Completed 200 OK in 43ms (Views: 30.6ms | ActiveRecord: 4.9ms)
D, [2015-01-09T22:57:39.244723 #33792] DEBUG -- : 
D, [2015-01-09T22:57:39.244802 #33792] DEBUG -- : 
I, [2015-01-09T22:57:39.244959 #33792]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-09 22:57:39 +0000
I, [2015-01-09T22:57:39.261653 #33792]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-09T22:57:39.301685 #33792] DEBUG -- :   [1m[36mUser Load (20.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
D, [2015-01-09T22:57:39.319619 #33792] DEBUG -- :   [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-09T22:57:39.320794 #33792] DEBUG -- :   [1m[36mCart Load (0.1ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-09T22:57:39.341868 #33792] DEBUG -- :   [1m[35mLineItem Load (0.2ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
I, [2015-01-09T22:57:39.384727 #33792]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: "Paypal", payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-09T22:57:56.137121 #33792] DEBUG -- :   [1m[36m (0.6ms)[0m  [1mbegin transaction[0m
D, [2015-01-09T22:57:56.262670 #33792] DEBUG -- :   [1m[35mSQL (93.9ms)[0m  INSERT INTO "orders" ("created_at", "payment_method", "updated_at") VALUES (?, ?, ?)  [["created_at", Fri, 09 Jan 2015 22:57:56 UTC +00:00], ["payment_method", "Paypal"], ["updated_at", Fri, 09 Jan 2015 22:57:56 UTC +00:00]]
D, [2015-01-09T22:57:56.282464 #33792] DEBUG -- :   [1m[36mSQL (1.4ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 145[0m  [["cart_id", nil], ["order_id", 79], ["updated_at", Fri, 09 Jan 2015 22:57:56 UTC +00:00]]
D, [2015-01-09T22:57:56.294840 #33792] DEBUG -- :   [1m[35mSQL (1.9ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 146  [["cart_id", nil], ["order_id", 79], ["updated_at", Fri, 09 Jan 2015 22:57:56 UTC +00:00]]
I, [2015-01-09T22:57:56.296321 #33792]  INFO -- : about to @payment.create
D, [2015-01-09T22:57:57.998580 #33792] DEBUG -- :   [1m[36mProduct Load (0.5ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-09T22:57:58.006122 #33792] DEBUG -- :   [1m[35mProduct Load (0.5ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
I, [2015-01-09T22:57:59.478727 #33792]  INFO -- : in order=
I, [2015-01-09T22:58:14.711012 #33792]  INFO -- : in payment.create
I, [2015-01-09T22:58:14.717363 #33792]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/79/confirm", "cancel_url"=>"http://localhost:3000/orders/79/cancel"}}
I, [2015-01-09T22:58:14.719837 #33792]  INFO -- : #<ActiveModel::Errors:0x007fe34c08cfa0 @base=#<Payment:0x007fe34e184820 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fe34e17dcc8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fe34bf089e0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fe34bf021d0 @error=nil, @total="23.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fe34bef2578 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fe34bee8190 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fe34bec6630 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fe34c31b488 @error=nil, @return_url="http://localhost:3000/orders/79/confirm", @cancel_url="http://localhost:3000/orders/79/cancel">, @logger=#<Logger:0x007fe34e039290 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fe34e039218 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fe34e0391c8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fe34e0391a0 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fe34e039128>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fe34c08cfa0 ...>>, @messages={}>
I, [2015-01-09T22:58:14.720401 #33792]  INFO -- : got past invalid
I, [2015-01-09T22:58:14.894099 #33792]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/oauth2/token
I, [2015-01-09T22:58:17.170502 #33792]  INFO -- : Response[200]: OK, Duration: 2.276s
I, [2015-01-09T22:58:17.185467 #33792]  INFO -- : PayPal-Request-Id: 37fd826f-b818-4784-a08b-52ffa164abf7
I, [2015-01-09T22:58:17.186166 #33792]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-09T22:58:18.705257 #33792]  INFO -- : Response[201]: Created, Duration: 1.518s
I, [2015-01-09T22:58:18.710601 #33792]  INFO -- : back from super
I, [2015-01-09T22:58:18.718602 #33792]  INFO -- : {"id"=>"PAY-0YF71008GL126062HKSYF2CQ", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98", "details"=>{"subtotal"=>"23.98"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/79/confirm", "cancel_url"=>"http://localhost:3000/orders/79/cancel"}, "create_time"=>"2015-01-09T22:58:18Z", "update_time"=>"2015-01-09T22:58:18Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-0YF71008GL126062HKSYF2CQ", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-72L604176R928652A", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-0YF71008GL126062HKSYF2CQ/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-09T22:58:27.291840 #33792] DEBUG -- :   [1m[36mSQL (2.9ms)[0m  [1mUPDATE "orders" SET "payment_method" = ?, "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ?, "pay_type" = ? WHERE "orders"."id" = 79[0m  [["payment_method", "Paypal"], ["created_at", Fri, 09 Jan 2015 22:57:56 UTC +00:00], ["updated_at", Fri, 09 Jan 2015 22:57:56 UTC +00:00], ["id", 79], ["payment_id", "PAY-0YF71008GL126062HKSYF2CQ"], ["state", "created"], ["pay_type", "paypal"]]
I, [2015-01-09T22:58:27.295703 #33792]  INFO -- : @payment save just done
I, [2015-01-09T22:58:27.297398 #33792]  INFO -- : #<Payment:0x007fe34e184820 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fe34e402250 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fe34e401a58 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fe34e4015d0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fe34e400ae0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fe34e400658 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fe34fc8b7b8 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fe34fc8a890 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fe34fc89d50 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fe34fc83ef0 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fe34c31b488 @error=nil, @return_url="http://localhost:3000/orders/79/confirm", @cancel_url="http://localhost:3000/orders/79/cancel">, @logger=#<Logger:0x007fe34e039290 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fe34e039218 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fe34e0391c8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fe34e0391a0 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fe34e039128>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fe34c08cfa0 @base=#<Payment:0x007fe34e184820 ...>, @messages={}>, @request_id="37fd826f-b818-4784-a08b-52ffa164abf7", @header={}, @id="PAY-0YF71008GL126062HKSYF2CQ", @create_time="2015-01-09T22:58:18Z", @update_time="2015-01-09T22:58:18Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fe34fc81498 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0YF71008GL126062HKSYF2CQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fe34fc7be80 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-72L604176R928652A", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fe34fc7aa08 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0YF71008GL126062HKSYF2CQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-09T22:58:27.298677 #33792]  INFO -- : #<Payment:0x007fe34e184820 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fe34e402250 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fe34e401a58 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fe34e4015d0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fe34e400ae0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fe34e400658 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fe34fc8b7b8 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fe34fc8a890 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fe34fc89d50 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fe34fc83ef0 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fe34c31b488 @error=nil, @return_url="http://localhost:3000/orders/79/confirm", @cancel_url="http://localhost:3000/orders/79/cancel">, @logger=#<Logger:0x007fe34e039290 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fe34e039218 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fe34e0391c8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fe34e0391a0 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fe34e039128>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fe34c08cfa0 @base=#<Payment:0x007fe34e184820 ...>, @messages={}>, @request_id="37fd826f-b818-4784-a08b-52ffa164abf7", @header={}, @id="PAY-0YF71008GL126062HKSYF2CQ", @create_time="2015-01-09T22:58:18Z", @update_time="2015-01-09T22:58:18Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fe34fc81498 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0YF71008GL126062HKSYF2CQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fe34fc7be80 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-72L604176R928652A", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fe34fc7aa08 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0YF71008GL126062HKSYF2CQ/execute", @rel="execute", @method="POST">]>
D, [2015-01-09T22:58:27.302804 #33792] DEBUG -- :   [1m[35m (3.0ms)[0m  commit transaction
D, [2015-01-09T22:58:27.311070 #33792] DEBUG -- :   [1m[36mSQL (2.1ms)[0m  [1mUPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 79[0m
I, [2015-01-09T22:58:27.313788 #33792]  INFO -- : about to approve url
I, [2015-01-09T22:58:27.315596 #33792]  INFO -- : #<Payment:0x007fe34e184820 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fe34e402250 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fe34e401a58 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fe34e4015d0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fe34e400ae0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fe34e400658 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fe34fc8b7b8 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fe34fc8a890 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fe34fc89d50 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fe34fc83ef0 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fe34c31b488 @error=nil, @return_url="http://localhost:3000/orders/79/confirm", @cancel_url="http://localhost:3000/orders/79/cancel">, @logger=#<Logger:0x007fe34e039290 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fe34e039218 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fe34e0391c8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fe34e0391a0 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fe34e039128>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fe34c08cfa0 @base=#<Payment:0x007fe34e184820 ...>, @messages={}>, @request_id="37fd826f-b818-4784-a08b-52ffa164abf7", @header={}, @id="PAY-0YF71008GL126062HKSYF2CQ", @create_time="2015-01-09T22:58:18Z", @update_time="2015-01-09T22:58:18Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fe34fc81498 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0YF71008GL126062HKSYF2CQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fe34fc7be80 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-72L604176R928652A", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fe34fc7aa08 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0YF71008GL126062HKSYF2CQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-09T22:58:27.316901 #33792]  INFO -- : #<Payment:0x007fe34e184820 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fe34e402250 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fe34e401a58 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fe34e4015d0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fe34e400ae0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fe34e400658 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fe34fc8b7b8 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fe34fc8a890 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fe34fc89d50 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fe34fc83ef0 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fe34c31b488 @error=nil, @return_url="http://localhost:3000/orders/79/confirm", @cancel_url="http://localhost:3000/orders/79/cancel">, @logger=#<Logger:0x007fe34e039290 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fe34e039218 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fe34e0391c8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fe34e0391a0 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fe34e039128>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fe34c08cfa0 @base=#<Payment:0x007fe34e184820 ...>, @messages={}>, @request_id="37fd826f-b818-4784-a08b-52ffa164abf7", @header={}, @id="PAY-0YF71008GL126062HKSYF2CQ", @create_time="2015-01-09T22:58:18Z", @update_time="2015-01-09T22:58:18Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fe34fc81498 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0YF71008GL126062HKSYF2CQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fe34fc7be80 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-72L604176R928652A", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fe34fc7aa08 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0YF71008GL126062HKSYF2CQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-09T22:58:27.317530 #33792]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-72L604176R928652A
I, [2015-01-09T22:58:27.318752 #33792]  INFO -- : #<Payment:0x007fe34e184820 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fe34e402250 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fe34e401a58 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fe34e4015d0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fe34e400ae0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fe34e400658 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fe34fc8b7b8 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fe34fc8a890 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fe34fc89d50 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fe34fc83ef0 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fe34c31b488 @error=nil, @return_url="http://localhost:3000/orders/79/confirm", @cancel_url="http://localhost:3000/orders/79/cancel">, @logger=#<Logger:0x007fe34e039290 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fe34e039218 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fe34e0391c8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fe34e0391a0 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fe34e039128>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fe34c08cfa0 @base=#<Payment:0x007fe34e184820 ...>, @messages={}>, @request_id="37fd826f-b818-4784-a08b-52ffa164abf7", @header={}, @id="PAY-0YF71008GL126062HKSYF2CQ", @create_time="2015-01-09T22:58:18Z", @update_time="2015-01-09T22:58:18Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fe34fc81498 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0YF71008GL126062HKSYF2CQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fe34fc7be80 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-72L604176R928652A", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fe34fc7aa08 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0YF71008GL126062HKSYF2CQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-09T22:58:27.321050 #33792]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-72L604176R928652A
I, [2015-01-09T22:58:27.323457 #33792]  INFO -- : Completed 403 Forbidden in 48061ms (ActiveRecord: 129.2ms)
D, [2015-01-09T22:59:11.084901 #33792] DEBUG -- : 
D, [2015-01-09T22:59:11.119865 #33792] DEBUG -- : 
I, [2015-01-09T22:59:11.125260 #33792]  INFO -- : Started GET "/orders/79/confirm?paymentId=PAY-0YF71008GL126062HKSYF2CQ&token=EC-72L604176R928652A&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-09 22:59:11 +0000
I, [2015-01-09T22:59:11.155397 #33792]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-09T22:59:11.155932 #33792]  INFO -- :   Parameters: {"paymentId"=>"PAY-0YF71008GL126062HKSYF2CQ", "token"=>"EC-72L604176R928652A", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"79"}
D, [2015-01-09T22:59:11.162784 #33792] DEBUG -- :   [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
D, [2015-01-09T22:59:11.169218 #33792] DEBUG -- :   [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-09T22:59:11.174703 #33792] DEBUG -- :   [1m[35mOrder Load (0.9ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "79"]]
I, [2015-01-09T22:59:52.003505 #33792]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-0YF71008GL126062HKSYF2CQ
I, [2015-01-09T22:59:53.722685 #33792]  INFO -- : Response[200]: OK, Duration: 1.718s
D, [2015-01-09T23:00:07.899310 #33792] DEBUG -- :   [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
D, [2015-01-09T23:00:07.915180 #33792] DEBUG -- :   [1m[35mSQL (4.8ms)[0m  UPDATE "orders" SET "name" = ?, "email" = ?, "address" = ?, "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 79  [["name", "Test Buyer"], ["email", "simon.king65-buyer@gmail.com"], ["address", "1 Main Terrace"], ["shipping_address1", "1 Main Terrace"], ["updated_at", Fri, 09 Jan 2015 23:00:07 UTC +00:00]]
D, [2015-01-09T23:00:07.919438 #33792] DEBUG -- :   [1m[36m (2.1ms)[0m  [1mcommit transaction[0m
I, [2015-01-09T23:00:09.874015 #33792]  INFO -- :   Rendered orders/_form.html.erb (101.6ms)
I, [2015-01-09T23:00:09.889464 #33792]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (134.4ms)
I, [2015-01-09T23:00:13.883729 #33792]  INFO -- : Completed 200 OK in 62727ms (Views: 275.0ms | ActiveRecord: 9.5ms)
D, [2015-01-09T23:00:14.035682 #33792] DEBUG -- : 
D, [2015-01-09T23:00:14.036109 #33792] DEBUG -- : 
I, [2015-01-09T23:00:14.036955 #33792]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-09 23:00:14 +0000
D, [2015-01-09T23:00:14.083667 #33792] DEBUG -- : 
D, [2015-01-09T23:00:14.091375 #33792] DEBUG -- : 
I, [2015-01-09T23:00:14.092270 #33792]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-09 23:00:14 +0000
D, [2015-01-09T23:00:14.123362 #33792] DEBUG -- : 
D, [2015-01-09T23:00:14.128685 #33792] DEBUG -- : 
I, [2015-01-09T23:00:14.143771 #33792]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-09 23:00:14 +0000
D, [2015-01-09T23:00:14.161595 #33792] DEBUG -- : 
D, [2015-01-09T23:00:14.162036 #33792] DEBUG -- : 
I, [2015-01-09T23:00:14.162931 #33792]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-09 23:00:14 +0000
D, [2015-01-09T23:00:14.188898 #33792] DEBUG -- : 
D, [2015-01-09T23:00:14.189395 #33792] DEBUG -- : 
I, [2015-01-09T23:00:14.190282 #33792]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-09 23:00:14 +0000
D, [2015-01-09T23:00:14.214641 #33792] DEBUG -- : 
D, [2015-01-09T23:00:14.215203 #33792] DEBUG -- : 
I, [2015-01-09T23:00:14.216135 #33792]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-09 23:00:14 +0000
D, [2015-01-09T23:00:14.240758 #33792] DEBUG -- : 
D, [2015-01-09T23:00:14.241293 #33792] DEBUG -- : 
I, [2015-01-09T23:00:14.242345 #33792]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-09 23:00:14 +0000
D, [2015-01-09T23:00:14.263513 #33792] DEBUG -- : 
D, [2015-01-09T23:00:14.264177 #33792] DEBUG -- : 
I, [2015-01-09T23:00:14.265360 #33792]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-09 23:00:14 +0000
D, [2015-01-09T23:00:14.322102 #33792] DEBUG -- : 
D, [2015-01-09T23:00:14.322610 #33792] DEBUG -- : 
I, [2015-01-09T23:00:14.323650 #33792]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-09 23:00:14 +0000
D, [2015-01-09T23:00:14.339772 #33792] DEBUG -- : 
D, [2015-01-09T23:00:14.340452 #33792] DEBUG -- : 
I, [2015-01-09T23:00:14.341477 #33792]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-09 23:00:14 +0000
D, [2015-01-09T23:00:14.359082 #33792] DEBUG -- : 
D, [2015-01-09T23:00:14.359613 #33792] DEBUG -- : 
I, [2015-01-09T23:00:14.360920 #33792]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-09 23:00:14 +0000
D, [2015-01-09T23:00:14.401715 #33792] DEBUG -- : 
D, [2015-01-09T23:00:14.402223 #33792] DEBUG -- : 
I, [2015-01-09T23:00:14.403300 #33792]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-09 23:00:14 +0000
D, [2015-01-09T23:00:14.432310 #33792] DEBUG -- : 
D, [2015-01-09T23:00:14.432823 #33792] DEBUG -- : 
I, [2015-01-09T23:00:14.441656 #33792]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-09 23:00:14 +0000
D, [2015-01-09T23:00:14.457601 #33792] DEBUG -- : 
D, [2015-01-09T23:00:14.458151 #33792] DEBUG -- : 
I, [2015-01-09T23:00:14.459080 #33792]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-09 23:00:14 +0000
D, [2015-01-09T23:00:14.476342 #33792] DEBUG -- : 
D, [2015-01-09T23:00:14.476779 #33792] DEBUG -- : 
I, [2015-01-09T23:00:14.477772 #33792]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-09 23:00:14 +0000
D, [2015-01-09T23:00:14.505683 #33792] DEBUG -- : 
D, [2015-01-09T23:00:14.506112 #33792] DEBUG -- : 
I, [2015-01-09T23:00:14.511578 #33792]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-09 23:00:14 +0000
D, [2015-01-09T23:00:14.533059 #33792] DEBUG -- : 
D, [2015-01-09T23:00:14.533597 #33792] DEBUG -- : 
I, [2015-01-09T23:00:14.534624 #33792]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-09 23:00:14 +0000
D, [2015-01-09T23:00:14.579398 #33792] DEBUG -- : 
D, [2015-01-09T23:00:14.580096 #33792] DEBUG -- : 
I, [2015-01-09T23:00:14.581189 #33792]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-09 23:00:14 +0000
D, [2015-01-09T23:00:14.609104 #33792] DEBUG -- : 
D, [2015-01-09T23:00:14.609659 #33792] DEBUG -- : 
I, [2015-01-09T23:00:14.613243 #33792]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-09 23:00:14 +0000
D, [2015-01-09T23:00:14.638192 #33792] DEBUG -- : 
D, [2015-01-09T23:00:14.639198 #33792] DEBUG -- : 
I, [2015-01-09T23:00:14.647254 #33792]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-09 23:00:14 +0000
D, [2015-01-09T23:00:14.688493 #33792] DEBUG -- : 
D, [2015-01-09T23:00:14.689193 #33792] DEBUG -- : 
I, [2015-01-09T23:00:14.690278 #33792]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-09 23:00:14 +0000
D, [2015-01-09T23:00:14.715077 #33792] DEBUG -- : 
D, [2015-01-09T23:00:14.715608 #33792] DEBUG -- : 
I, [2015-01-09T23:00:14.717187 #33792]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-09 23:00:14 +0000
D, [2015-01-09T23:00:14.741454 #33792] DEBUG -- : 
D, [2015-01-09T23:00:14.741979 #33792] DEBUG -- : 
I, [2015-01-09T23:00:14.742949 #33792]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-09 23:00:14 +0000
D, [2015-01-09T23:00:14.760944 #33792] DEBUG -- : 
D, [2015-01-09T23:00:14.761655 #33792] DEBUG -- : 
I, [2015-01-09T23:00:14.762922 #33792]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-09 23:00:14 +0000
D, [2015-01-09T23:00:14.788957 #33792] DEBUG -- : 
D, [2015-01-09T23:00:14.789461 #33792] DEBUG -- : 
I, [2015-01-09T23:00:14.790494 #33792]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-09 23:00:14 +0000
D, [2015-01-09T23:00:14.808581 #33792] DEBUG -- : 
D, [2015-01-09T23:00:14.809081 #33792] DEBUG -- : 
I, [2015-01-09T23:00:14.810059 #33792]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-09 23:00:14 +0000
D, [2015-01-09T23:00:14.838340 #33792] DEBUG -- : 
D, [2015-01-09T23:00:14.838907 #33792] DEBUG -- : 
I, [2015-01-09T23:00:14.839849 #33792]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-09 23:00:14 +0000
D, [2015-01-09T23:00:14.858449 #33792] DEBUG -- : 
D, [2015-01-09T23:00:14.859030 #33792] DEBUG -- : 
I, [2015-01-09T23:00:14.859717 #33792]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-09 23:00:14 +0000
D, [2015-01-09T23:00:14.924501 #33792] DEBUG -- : 
D, [2015-01-09T23:00:14.924936 #33792] DEBUG -- : 
I, [2015-01-09T23:00:14.925955 #33792]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-09 23:00:14 +0000
D, [2015-01-09T23:00:14.955920 #33792] DEBUG -- : 
D, [2015-01-09T23:00:14.956470 #33792] DEBUG -- : 
I, [2015-01-09T23:00:14.957413 #33792]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-09 23:00:14 +0000
D, [2015-01-09T23:00:14.999284 #33792] DEBUG -- : 
D, [2015-01-09T23:00:14.999807 #33792] DEBUG -- : 
I, [2015-01-09T23:00:15.000744 #33792]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-09 23:00:15 +0000
D, [2015-01-09T23:00:15.056123 #33792] DEBUG -- : 
D, [2015-01-09T23:00:15.057828 #33792] DEBUG -- : 
I, [2015-01-09T23:00:15.067594 #33792]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-09 23:00:15 +0000
D, [2015-01-09T23:00:15.108559 #33792] DEBUG -- : 
D, [2015-01-09T23:00:15.109035 #33792] DEBUG -- : 
I, [2015-01-09T23:00:15.110083 #33792]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-09 23:00:15 +0000
D, [2015-01-09T23:00:15.138874 #33792] DEBUG -- : 
D, [2015-01-09T23:00:15.139364 #33792] DEBUG -- : 
I, [2015-01-09T23:00:15.140243 #33792]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-09 23:00:15 +0000
D, [2015-01-09T23:00:15.171414 #33792] DEBUG -- : 
D, [2015-01-09T23:00:15.171919 #33792] DEBUG -- : 
I, [2015-01-09T23:00:15.172821 #33792]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-09 23:00:15 +0000
D, [2015-01-09T23:00:15.205051 #33792] DEBUG -- : 
D, [2015-01-09T23:00:15.205477 #33792] DEBUG -- : 
I, [2015-01-09T23:00:15.206529 #33792]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-09 23:00:15 +0000
D, [2015-01-09T23:00:15.244629 #33792] DEBUG -- : 
D, [2015-01-09T23:00:15.245770 #33792] DEBUG -- : 
I, [2015-01-09T23:00:15.246792 #33792]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-09 23:00:15 +0000
D, [2015-01-09T23:00:15.279711 #33792] DEBUG -- : 
D, [2015-01-09T23:00:15.280254 #33792] DEBUG -- : 
I, [2015-01-09T23:00:15.281440 #33792]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-09 23:00:15 +0000
D, [2015-01-09T23:00:15.313348 #33792] DEBUG -- : 
D, [2015-01-09T23:00:15.314504 #33792] DEBUG -- : 
I, [2015-01-09T23:00:15.315847 #33792]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-09 23:00:15 +0000
D, [2015-01-09T23:00:15.356588 #33792] DEBUG -- : 
D, [2015-01-09T23:00:15.357152 #33792] DEBUG -- : 
I, [2015-01-09T23:00:15.358115 #33792]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-09 23:00:15 +0000
D, [2015-01-09T23:00:15.387601 #33792] DEBUG -- : 
D, [2015-01-09T23:00:15.388090 #33792] DEBUG -- : 
I, [2015-01-09T23:00:15.389048 #33792]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-09 23:00:15 +0000
D, [2015-01-09T23:00:15.436447 #33792] DEBUG -- : 
D, [2015-01-09T23:00:15.437004 #33792] DEBUG -- : 
I, [2015-01-09T23:00:15.438148 #33792]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-09 23:00:15 +0000
D, [2015-01-09T23:00:19.896895 #33792] DEBUG -- : 
D, [2015-01-09T23:00:19.897574 #33792] DEBUG -- : 
I, [2015-01-09T23:00:19.898398 #33792]  INFO -- : Started POST "/orders/79/execute/79/2VZ7YQDDDPPC4/PAY-0YF71008GL126062HKSYF2CQ" for 127.0.0.1 at 2015-01-09 23:00:19 +0000
I, [2015-01-09T23:00:19.918594 #33792]  INFO -- : Processing by OrdersController#execute as HTML
I, [2015-01-09T23:00:19.919542 #33792]  INFO -- :   Parameters: {"authenticity_token"=>"ohbtEjIJsyqL+SAcUq0N+GSOROzNN7MrL8IuyZOU47c=", "order_id"=>"79", "payer_id"=>"2VZ7YQDDDPPC4", "payment_id"=>"PAY-0YF71008GL126062HKSYF2CQ"}
D, [2015-01-09T23:00:19.929411 #33792] DEBUG -- :   [1m[35mOrder Load (0.7ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "79"]]
I, [2015-01-09T23:00:36.716991 #33792]  INFO -- : Completed 500 Internal Server Error in 16796ms
F, [2015-01-09T23:00:36.733189 #33792] FATAL -- : 
ArgumentError (id required):
  app/models/order.rb:63:in `execute'
  app/controllers/orders_controller.rb:78:in `execute'


I, [2015-01-09T23:00:36.879821 #33792]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (5.9ms)
I, [2015-01-09T23:00:36.900005 #33792]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (9.6ms)
I, [2015-01-09T23:00:36.918776 #33792]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (6.3ms)
I, [2015-01-09T23:00:36.919905 #33792]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (61.1ms)
D, [2015-01-09T23:02:04.424012 #33792] DEBUG -- : 
D, [2015-01-09T23:02:04.448113 #33792] DEBUG -- : 
I, [2015-01-09T23:02:04.449659 #33792]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-09 23:02:04 +0000
I, [2015-01-09T23:02:04.663967 #33792]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-09T23:02:04.673285 #33792] DEBUG -- :   [1m[36mCart Load (0.7ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-09T23:02:04.724127 #33792] DEBUG -- :   [1m[35mProduct Load (0.9ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-09T23:02:04.742254 #33792]  INFO -- : Read fragment views/store/products/2-20141022062504570899000/a93d4e2e981ab3dfce98a095c3b6c059 (13.9ms)
I, [2015-01-09T23:02:04.743605 #33792]  INFO -- :   Rendered store/index.html.erb within layouts/application (24.6ms)
D, [2015-01-09T23:02:04.812051 #33792] DEBUG -- :   [1m[36mLineItem Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 53]]
D, [2015-01-09T23:02:04.841636 #33792] DEBUG -- :   [1m[35mLineItem Load (0.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
I, [2015-01-09T23:02:04.843759 #33792]  INFO -- :   Rendered collection (0.3ms)
I, [2015-01-09T23:02:04.859828 #33792]  INFO -- :   Rendered carts/_cart.html.erb (22.9ms)
I, [2015-01-09T23:02:04.871911 #33792]  INFO -- : Completed 200 OK in 207ms (Views: 192.2ms | ActiveRecord: 2.9ms)
D, [2015-01-09T23:02:05.192833 #33792] DEBUG -- : 
D, [2015-01-09T23:02:05.209254 #33792] DEBUG -- : 
I, [2015-01-09T23:02:05.219851 #33792]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-09 23:02:05 +0000
D, [2015-01-09T23:02:05.237113 #33792] DEBUG -- : 
D, [2015-01-09T23:02:05.237812 #33792] DEBUG -- : 
I, [2015-01-09T23:02:05.239236 #33792]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-09 23:02:05 +0000
D, [2015-01-09T23:02:05.255278 #33792] DEBUG -- : 
D, [2015-01-09T23:02:05.255755 #33792] DEBUG -- : 
I, [2015-01-09T23:02:05.256624 #33792]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-09 23:02:05 +0000
D, [2015-01-09T23:02:05.273230 #33792] DEBUG -- : 
D, [2015-01-09T23:02:05.289168 #33792] DEBUG -- : 
I, [2015-01-09T23:02:05.290109 #33792]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-09 23:02:05 +0000
D, [2015-01-09T23:02:05.315050 #33792] DEBUG -- : 
D, [2015-01-09T23:02:05.323548 #33792] DEBUG -- : 
I, [2015-01-09T23:02:05.324568 #33792]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-09 23:02:05 +0000
D, [2015-01-09T23:02:05.341708 #33792] DEBUG -- : 
D, [2015-01-09T23:02:05.343184 #33792] DEBUG -- : 
I, [2015-01-09T23:02:05.344473 #33792]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-09 23:02:05 +0000
D, [2015-01-09T23:02:05.369838 #33792] DEBUG -- : 
D, [2015-01-09T23:02:05.371108 #33792] DEBUG -- : 
I, [2015-01-09T23:02:05.380285 #33792]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-09 23:02:05 +0000
D, [2015-01-09T23:02:05.397416 #33792] DEBUG -- : 
D, [2015-01-09T23:02:05.398554 #33792] DEBUG -- : 
I, [2015-01-09T23:02:05.399659 #33792]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-09 23:02:05 +0000
D, [2015-01-09T23:02:05.424010 #33792] DEBUG -- : 
D, [2015-01-09T23:02:05.424456 #33792] DEBUG -- : 
I, [2015-01-09T23:02:05.426163 #33792]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-09 23:02:05 +0000
D, [2015-01-09T23:02:05.449940 #33792] DEBUG -- : 
D, [2015-01-09T23:02:05.450471 #33792] DEBUG -- : 
I, [2015-01-09T23:02:05.451447 #33792]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-09 23:02:05 +0000
D, [2015-01-09T23:02:05.476757 #33792] DEBUG -- : 
D, [2015-01-09T23:02:05.477760 #33792] DEBUG -- : 
I, [2015-01-09T23:02:05.478853 #33792]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-09 23:02:05 +0000
D, [2015-01-09T23:02:05.503712 #33792] DEBUG -- : 
D, [2015-01-09T23:02:05.504248 #33792] DEBUG -- : 
I, [2015-01-09T23:02:05.505339 #33792]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-09 23:02:05 +0000
D, [2015-01-09T23:02:05.546941 #33792] DEBUG -- : 
D, [2015-01-09T23:02:05.556367 #33792] DEBUG -- : 
I, [2015-01-09T23:02:05.557436 #33792]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-09 23:02:05 +0000
D, [2015-01-09T23:02:05.574241 #33792] DEBUG -- : 
D, [2015-01-09T23:02:05.575410 #33792] DEBUG -- : 
I, [2015-01-09T23:02:05.578032 #33792]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-09 23:02:05 +0000
D, [2015-01-09T23:02:05.603432 #33792] DEBUG -- : 
D, [2015-01-09T23:02:05.604082 #33792] DEBUG -- : 
I, [2015-01-09T23:02:05.605221 #33792]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-09 23:02:05 +0000
D, [2015-01-09T23:02:05.631726 #33792] DEBUG -- : 
D, [2015-01-09T23:02:05.632971 #33792] DEBUG -- : 
I, [2015-01-09T23:02:05.635454 #33792]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-09 23:02:05 +0000
D, [2015-01-09T23:02:05.692030 #33792] DEBUG -- : 
D, [2015-01-09T23:02:05.692620 #33792] DEBUG -- : 
I, [2015-01-09T23:02:05.693652 #33792]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-09 23:02:05 +0000
D, [2015-01-09T23:02:05.724694 #33792] DEBUG -- : 
D, [2015-01-09T23:02:05.725692 #33792] DEBUG -- : 
I, [2015-01-09T23:02:05.734287 #33792]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-09 23:02:05 +0000
D, [2015-01-09T23:02:05.753385 #33792] DEBUG -- : 
D, [2015-01-09T23:02:05.753940 #33792] DEBUG -- : 
I, [2015-01-09T23:02:05.755213 #33792]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-09 23:02:05 +0000
D, [2015-01-09T23:02:05.780485 #33792] DEBUG -- : 
D, [2015-01-09T23:02:05.781028 #33792] DEBUG -- : 
I, [2015-01-09T23:02:05.782883 #33792]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-09 23:02:05 +0000
D, [2015-01-09T23:02:05.808434 #33792] DEBUG -- : 
D, [2015-01-09T23:02:05.808874 #33792] DEBUG -- : 
I, [2015-01-09T23:02:05.809789 #33792]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-09 23:02:05 +0000
D, [2015-01-09T23:02:05.838001 #33792] DEBUG -- : 
D, [2015-01-09T23:02:05.838445 #33792] DEBUG -- : 
I, [2015-01-09T23:02:05.839478 #33792]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-09 23:02:05 +0000
D, [2015-01-09T23:02:05.865435 #33792] DEBUG -- : 
D, [2015-01-09T23:02:05.865985 #33792] DEBUG -- : 
I, [2015-01-09T23:02:05.866927 #33792]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-09 23:02:05 +0000
D, [2015-01-09T23:02:05.884100 #33792] DEBUG -- : 
D, [2015-01-09T23:02:05.884699 #33792] DEBUG -- : 
I, [2015-01-09T23:02:05.885733 #33792]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-09 23:02:05 +0000
D, [2015-01-09T23:02:05.905472 #33792] DEBUG -- : 
D, [2015-01-09T23:02:05.906014 #33792] DEBUG -- : 
I, [2015-01-09T23:02:05.906997 #33792]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-09 23:02:05 +0000
D, [2015-01-09T23:02:05.924008 #33792] DEBUG -- : 
D, [2015-01-09T23:02:05.924562 #33792] DEBUG -- : 
I, [2015-01-09T23:02:05.925510 #33792]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-09 23:02:05 +0000
D, [2015-01-09T23:02:05.944594 #33792] DEBUG -- : 
D, [2015-01-09T23:02:05.945114 #33792] DEBUG -- : 
I, [2015-01-09T23:02:05.945863 #33792]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-09 23:02:05 +0000
D, [2015-01-09T23:02:05.988218 #33792] DEBUG -- : 
D, [2015-01-09T23:02:05.988726 #33792] DEBUG -- : 
I, [2015-01-09T23:02:05.989474 #33792]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-09 23:02:05 +0000
D, [2015-01-09T23:02:06.020291 #33792] DEBUG -- : 
D, [2015-01-09T23:02:06.020798 #33792] DEBUG -- : 
I, [2015-01-09T23:02:06.021555 #33792]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-09 23:02:06 +0000
D, [2015-01-09T23:02:16.840570 #33792] DEBUG -- : 
D, [2015-01-09T23:02:16.841098 #33792] DEBUG -- : 
I, [2015-01-09T23:02:16.844067 #33792]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-09 23:02:16 +0000
I, [2015-01-09T23:02:16.869254 #33792]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-09T23:02:16.869925 #33792]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-09T23:02:16.881737 #33792] DEBUG -- :   [1m[36mCart Load (0.8ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-09T23:02:16.888682 #33792] DEBUG -- :   [1m[35mProduct Load (0.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-09T23:02:16.899229 #33792] DEBUG -- :   [1m[36mLineItem Load (0.5ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 53]]
D, [2015-01-09T23:02:16.913980 #33792] DEBUG -- :   [1m[35mProduct Load (0.7ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-09T23:02:16.919212 #33792] DEBUG -- :   [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
D, [2015-01-09T23:02:17.002972 #33792] DEBUG -- :   [1m[35mSQL (69.7ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 53], ["created_at", Fri, 09 Jan 2015 23:02:16 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7fe34fc6a928,'0.1299E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 09 Jan 2015 23:02:16 UTC +00:00]]
D, [2015-01-09T23:02:17.011092 #33792] DEBUG -- :   [1m[36m (3.7ms)[0m  [1mcommit transaction[0m
D, [2015-01-09T23:02:17.046731 #33792] DEBUG -- :   [1m[35mLineItem Load (0.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
I, [2015-01-09T23:02:17.079357 #33792]  INFO -- :   Rendered line_items/_line_item.html.erb (6.6ms)
I, [2015-01-09T23:02:17.095922 #33792]  INFO -- :   Rendered carts/_cart.html.erb (54.0ms)
I, [2015-01-09T23:02:17.097996 #33792]  INFO -- :   Rendered line_items/create.js.erb (60.1ms)
I, [2015-01-09T23:02:17.099991 #33792]  INFO -- : Completed 200 OK in 229ms (Views: 85.0ms | ActiveRecord: 77.1ms)
D, [2015-01-09T23:02:18.092424 #33792] DEBUG -- : 
D, [2015-01-09T23:02:18.093019 #33792] DEBUG -- : 
I, [2015-01-09T23:02:18.094083 #33792]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-09 23:02:18 +0000
I, [2015-01-09T23:02:18.114997 #33792]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-09T23:02:18.115740 #33792]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-09T23:02:18.125421 #33792] DEBUG -- :   [1m[36mCart Load (0.7ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 53]]
D, [2015-01-09T23:02:18.136584 #33792] DEBUG -- :   [1m[35mProduct Load (0.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-09T23:02:18.149367 #33792] DEBUG -- :   [1m[36mLineItem Load (0.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 53]]
D, [2015-01-09T23:02:18.163653 #33792] DEBUG -- :   [1m[35mProduct Load (0.7ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-09T23:02:18.168700 #33792] DEBUG -- :   [1m[36m (0.6ms)[0m  [1mbegin transaction[0m
D, [2015-01-09T23:02:18.183070 #33792] DEBUG -- :   [1m[35mSQL (2.3ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 53], ["created_at", Fri, 09 Jan 2015 23:02:18 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:7fe34e678318,'0.1099E2',18(36)>], ["size", "extra small"], ["updated_at", Fri, 09 Jan 2015 23:02:18 UTC +00:00]]
D, [2015-01-09T23:02:18.189880 #33792] DEBUG -- :   [1m[36m (3.3ms)[0m  [1mcommit transaction[0m
D, [2015-01-09T23:02:18.210703 #33792] DEBUG -- :   [1m[35mLineItem Load (1.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
D, [2015-01-09T23:02:18.231143 #33792] DEBUG -- :   [1m[36mProduct Load (0.7ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-09T23:02:18.245032 #33792]  INFO -- :   Rendered line_items/_line_item.html.erb (22.3ms)
I, [2015-01-09T23:02:18.260798 #33792]  INFO -- :   Rendered carts/_cart.html.erb (58.2ms)
I, [2015-01-09T23:02:18.263076 #33792]  INFO -- :   Rendered line_items/create.js.erb (63.8ms)
I, [2015-01-09T23:02:18.265041 #33792]  INFO -- : Completed 200 OK in 148ms (Views: 69.9ms | ActiveRecord: 10.5ms)
D, [2015-01-09T23:02:19.567572 #33792] DEBUG -- : 
D, [2015-01-09T23:02:19.568469 #33792] DEBUG -- : 
I, [2015-01-09T23:02:19.570146 #33792]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-09 23:02:19 +0000
I, [2015-01-09T23:02:19.602501 #33792]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-09T23:02:19.612275 #33792] DEBUG -- :   [1m[35mUser Load (1.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
D, [2015-01-09T23:02:19.619115 #33792] DEBUG -- :   [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-09T23:02:19.625876 #33792] DEBUG -- :   [1m[35mCart Load (0.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-09T23:02:19.636808 #33792] DEBUG -- :   [1m[36mLineItem Load (0.7ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 53]]
I, [2015-01-09T23:02:19.648450 #33792]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: "Paypal", payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-09T23:02:39.828356 #33792] DEBUG -- :   [1m[35m (0.8ms)[0m  begin transaction
D, [2015-01-09T23:02:39.846462 #33792] DEBUG -- :   [1m[36mSQL (1.9ms)[0m  [1mINSERT INTO "orders" ("created_at", "payment_method", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Fri, 09 Jan 2015 23:02:39 UTC +00:00], ["payment_method", "Paypal"], ["updated_at", Fri, 09 Jan 2015 23:02:39 UTC +00:00]]
D, [2015-01-09T23:02:39.862751 #33792] DEBUG -- :   [1m[35mSQL (1.6ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 147  [["cart_id", nil], ["order_id", 80], ["updated_at", Fri, 09 Jan 2015 23:02:39 UTC +00:00]]
D, [2015-01-09T23:02:39.878619 #33792] DEBUG -- :   [1m[36mSQL (1.4ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 148[0m  [["cart_id", nil], ["order_id", 80], ["updated_at", Fri, 09 Jan 2015 23:02:39 UTC +00:00]]
I, [2015-01-09T23:02:39.880240 #33792]  INFO -- : about to @payment.create
D, [2015-01-09T23:02:40.975269 #33792] DEBUG -- :   [1m[35mProduct Load (0.7ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-09T23:02:40.986367 #33792] DEBUG -- :   [1m[36mProduct Load (1.2ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
I, [2015-01-09T23:02:41.898253 #33792]  INFO -- : in order=
I, [2015-01-09T23:02:42.786344 #33792]  INFO -- : in payment.create
I, [2015-01-09T23:02:42.794191 #33792]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/80/confirm", "cancel_url"=>"http://localhost:3000/orders/80/cancel"}}
I, [2015-01-09T23:02:42.796670 #33792]  INFO -- : #<ActiveModel::Errors:0x007fe35000b1b8 @base=#<Payment:0x007fe34fae4068 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fe350063610 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fe34fc38798 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fe34fc381a8 @error=nil, @total="23.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fe3500a9ed0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fe34fc1b0f8 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fe34fc12cc8 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fe34fb981d0 @error=nil, @return_url="http://localhost:3000/orders/80/confirm", @cancel_url="http://localhost:3000/orders/80/cancel">, @logger=#<Logger:0x007fe34e039290 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fe34e039218 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fe34e0391c8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fe34e0391a0 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fe34e039128>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fe35000b1b8 ...>>, @messages={}>
I, [2015-01-09T23:02:42.797381 #33792]  INFO -- : got past invalid
I, [2015-01-09T23:02:42.823176 #33792]  INFO -- : PayPal-Request-Id: 9908bcc3-0992-426f-9b48-97f61f13ef96
I, [2015-01-09T23:02:42.823901 #33792]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-09T23:02:44.742126 #33792]  INFO -- : Response[201]: Created, Duration: 1.917s
I, [2015-01-09T23:02:44.749026 #33792]  INFO -- : back from super
I, [2015-01-09T23:02:44.759207 #33792]  INFO -- : {"id"=>"PAY-5ER69471JR052021WKSYF4FA", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98", "details"=>{"subtotal"=>"23.98"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/80/confirm", "cancel_url"=>"http://localhost:3000/orders/80/cancel"}, "create_time"=>"2015-01-09T23:02:44Z", "update_time"=>"2015-01-09T23:02:44Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-5ER69471JR052021WKSYF4FA", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7BF355839X765515C", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-5ER69471JR052021WKSYF4FA/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-09T23:02:44.776987 #33792] DEBUG -- :   [1m[35mSQL (2.6ms)[0m  UPDATE "orders" SET "payment_method" = ?, "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ?, "pay_type" = ? WHERE "orders"."id" = 80  [["payment_method", "Paypal"], ["created_at", Fri, 09 Jan 2015 23:02:39 UTC +00:00], ["updated_at", Fri, 09 Jan 2015 23:02:39 UTC +00:00], ["id", 80], ["payment_id", "PAY-5ER69471JR052021WKSYF4FA"], ["state", "created"], ["pay_type", "paypal"]]
I, [2015-01-09T23:02:44.780361 #33792]  INFO -- : @payment save just done
I, [2015-01-09T23:02:44.782388 #33792]  INFO -- : #<Payment:0x007fe34fae4068 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fe34f8eb1f8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fe34f8ea6e0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fe34f8ea118 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fe34f8e8f98 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fe34f8e8a48 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fe34c78f5a0 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fe34c78e218 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fe34c78d200 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fe34c786b80 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fe34fb981d0 @error=nil, @return_url="http://localhost:3000/orders/80/confirm", @cancel_url="http://localhost:3000/orders/80/cancel">, @logger=#<Logger:0x007fe34e039290 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fe34e039218 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fe34e0391c8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fe34e0391a0 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fe34e039128>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fe35000b1b8 @base=#<Payment:0x007fe34fae4068 ...>, @messages={}>, @request_id="9908bcc3-0992-426f-9b48-97f61f13ef96", @header={}, @id="PAY-5ER69471JR052021WKSYF4FA", @create_time="2015-01-09T23:02:44Z", @update_time="2015-01-09T23:02:44Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fe34f8e39d0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5ER69471JR052021WKSYF4FA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fe34f8e22d8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7BF355839X765515C", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fe34f8e0500 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5ER69471JR052021WKSYF4FA/execute", @rel="execute", @method="POST">]>
I, [2015-01-09T23:02:44.783618 #33792]  INFO -- : #<Payment:0x007fe34fae4068 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fe34f8eb1f8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fe34f8ea6e0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fe34f8ea118 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fe34f8e8f98 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fe34f8e8a48 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fe34c78f5a0 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fe34c78e218 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fe34c78d200 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fe34c786b80 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fe34fb981d0 @error=nil, @return_url="http://localhost:3000/orders/80/confirm", @cancel_url="http://localhost:3000/orders/80/cancel">, @logger=#<Logger:0x007fe34e039290 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fe34e039218 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fe34e0391c8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fe34e0391a0 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fe34e039128>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fe35000b1b8 @base=#<Payment:0x007fe34fae4068 ...>, @messages={}>, @request_id="9908bcc3-0992-426f-9b48-97f61f13ef96", @header={}, @id="PAY-5ER69471JR052021WKSYF4FA", @create_time="2015-01-09T23:02:44Z", @update_time="2015-01-09T23:02:44Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fe34f8e39d0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5ER69471JR052021WKSYF4FA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fe34f8e22d8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7BF355839X765515C", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fe34f8e0500 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5ER69471JR052021WKSYF4FA/execute", @rel="execute", @method="POST">]>
D, [2015-01-09T23:02:44.810153 #33792] DEBUG -- :   [1m[36m (24.9ms)[0m  [1mcommit transaction[0m
D, [2015-01-09T23:02:44.847184 #33792] DEBUG -- :   [1m[35mSQL (31.6ms)[0m  UPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 80
I, [2015-01-09T23:02:44.848438 #33792]  INFO -- : about to approve url
I, [2015-01-09T23:02:44.850807 #33792]  INFO -- : #<Payment:0x007fe34fae4068 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fe34f8eb1f8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fe34f8ea6e0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fe34f8ea118 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fe34f8e8f98 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fe34f8e8a48 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fe34c78f5a0 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fe34c78e218 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fe34c78d200 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fe34c786b80 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fe34fb981d0 @error=nil, @return_url="http://localhost:3000/orders/80/confirm", @cancel_url="http://localhost:3000/orders/80/cancel">, @logger=#<Logger:0x007fe34e039290 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fe34e039218 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fe34e0391c8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fe34e0391a0 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fe34e039128>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fe35000b1b8 @base=#<Payment:0x007fe34fae4068 ...>, @messages={}>, @request_id="9908bcc3-0992-426f-9b48-97f61f13ef96", @header={}, @id="PAY-5ER69471JR052021WKSYF4FA", @create_time="2015-01-09T23:02:44Z", @update_time="2015-01-09T23:02:44Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fe34f8e39d0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5ER69471JR052021WKSYF4FA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fe34f8e22d8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7BF355839X765515C", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fe34f8e0500 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5ER69471JR052021WKSYF4FA/execute", @rel="execute", @method="POST">]>
I, [2015-01-09T23:02:44.852666 #33792]  INFO -- : #<Payment:0x007fe34fae4068 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fe34f8eb1f8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fe34f8ea6e0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fe34f8ea118 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fe34f8e8f98 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fe34f8e8a48 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fe34c78f5a0 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fe34c78e218 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fe34c78d200 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fe34c786b80 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fe34fb981d0 @error=nil, @return_url="http://localhost:3000/orders/80/confirm", @cancel_url="http://localhost:3000/orders/80/cancel">, @logger=#<Logger:0x007fe34e039290 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fe34e039218 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fe34e0391c8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fe34e0391a0 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fe34e039128>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fe35000b1b8 @base=#<Payment:0x007fe34fae4068 ...>, @messages={}>, @request_id="9908bcc3-0992-426f-9b48-97f61f13ef96", @header={}, @id="PAY-5ER69471JR052021WKSYF4FA", @create_time="2015-01-09T23:02:44Z", @update_time="2015-01-09T23:02:44Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fe34f8e39d0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5ER69471JR052021WKSYF4FA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fe34f8e22d8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7BF355839X765515C", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fe34f8e0500 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5ER69471JR052021WKSYF4FA/execute", @rel="execute", @method="POST">]>
I, [2015-01-09T23:02:44.853666 #33792]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7BF355839X765515C
I, [2015-01-09T23:02:44.855430 #33792]  INFO -- : #<Payment:0x007fe34fae4068 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fe34f8eb1f8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fe34f8ea6e0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fe34f8ea118 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fe34f8e8f98 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fe34f8e8a48 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fe34c78f5a0 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fe34c78e218 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fe34c78d200 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fe34c786b80 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fe34fb981d0 @error=nil, @return_url="http://localhost:3000/orders/80/confirm", @cancel_url="http://localhost:3000/orders/80/cancel">, @logger=#<Logger:0x007fe34e039290 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fe34e039218 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fe34e0391c8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fe34e0391a0 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fe34e039128>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fe35000b1b8 @base=#<Payment:0x007fe34fae4068 ...>, @messages={}>, @request_id="9908bcc3-0992-426f-9b48-97f61f13ef96", @header={}, @id="PAY-5ER69471JR052021WKSYF4FA", @create_time="2015-01-09T23:02:44Z", @update_time="2015-01-09T23:02:44Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fe34f8e39d0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5ER69471JR052021WKSYF4FA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fe34f8e22d8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7BF355839X765515C", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fe34f8e0500 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-5ER69471JR052021WKSYF4FA/execute", @rel="execute", @method="POST">]>
I, [2015-01-09T23:02:44.858432 #33792]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7BF355839X765515C
I, [2015-01-09T23:02:44.861631 #33792]  INFO -- : Completed 403 Forbidden in 25258ms (ActiveRecord: 69.9ms)
D, [2015-01-09T23:03:21.639831 #33792] DEBUG -- : 
D, [2015-01-09T23:03:21.659421 #33792] DEBUG -- : 
I, [2015-01-09T23:03:21.661042 #33792]  INFO -- : Started GET "/orders/80/confirm?paymentId=PAY-5ER69471JR052021WKSYF4FA&token=EC-7BF355839X765515C&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-09 23:03:21 +0000
I, [2015-01-09T23:03:21.676346 #33792]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-09T23:03:21.683054 #33792]  INFO -- :   Parameters: {"paymentId"=>"PAY-5ER69471JR052021WKSYF4FA", "token"=>"EC-7BF355839X765515C", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"80"}
D, [2015-01-09T23:03:21.697024 #33792] DEBUG -- :   [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
D, [2015-01-09T23:03:21.703435 #33792] DEBUG -- :   [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-09T23:03:21.708941 #33792] DEBUG -- :   [1m[36mOrder Load (0.6ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "80"]]
I, [2015-01-09T23:03:35.605135 #33792]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-5ER69471JR052021WKSYF4FA
I, [2015-01-09T23:03:37.369239 #33792]  INFO -- : Response[200]: OK, Duration: 1.763s
D, [2015-01-09T23:03:41.066324 #33792] DEBUG -- :   [1m[35m (0.9ms)[0m  begin transaction
D, [2015-01-09T23:03:41.078353 #33792] DEBUG -- :   [1m[36mSQL (2.1ms)[0m  [1mUPDATE "orders" SET "name" = ?, "email" = ?, "address" = ?, "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 80[0m  [["name", "Test Buyer"], ["email", "simon.king65-buyer@gmail.com"], ["address", "1 Main Terrace"], ["shipping_address1", "1 Main Terrace"], ["updated_at", Fri, 09 Jan 2015 23:03:41 UTC +00:00]]
D, [2015-01-09T23:03:41.084671 #33792] DEBUG -- :   [1m[35m (4.2ms)[0m  commit transaction
I, [2015-01-09T23:03:41.229813 #33792]  INFO -- :   Rendered orders/_form.html.erb (42.8ms)
I, [2015-01-09T23:03:41.235413 #33792]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (76.5ms)
I, [2015-01-09T23:03:41.294937 #33792]  INFO -- : Completed 200 OK in 19611ms (Views: 208.1ms | ActiveRecord: 9.1ms)
D, [2015-01-09T23:03:41.455980 #33792] DEBUG -- : 
D, [2015-01-09T23:03:41.456416 #33792] DEBUG -- : 
I, [2015-01-09T23:03:41.457225 #33792]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-09 23:03:41 +0000
D, [2015-01-09T23:03:41.493339 #33792] DEBUG -- : 
D, [2015-01-09T23:03:41.493835 #33792] DEBUG -- : 
I, [2015-01-09T23:03:41.494756 #33792]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-09 23:03:41 +0000
D, [2015-01-09T23:03:41.709815 #33792] DEBUG -- : 
D, [2015-01-09T23:03:41.710185 #33792] DEBUG -- : 
I, [2015-01-09T23:03:41.711241 #33792]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-09 23:03:41 +0000
D, [2015-01-09T23:03:41.742734 #33792] DEBUG -- : 
D, [2015-01-09T23:03:41.759989 #33792] DEBUG -- : 
I, [2015-01-09T23:03:41.761163 #33792]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-09 23:03:41 +0000
D, [2015-01-09T23:03:41.779003 #33792] DEBUG -- : 
D, [2015-01-09T23:03:41.779431 #33792] DEBUG -- : 
I, [2015-01-09T23:03:41.780407 #33792]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-09 23:03:41 +0000
D, [2015-01-09T23:03:41.832724 #33792] DEBUG -- : 
D, [2015-01-09T23:03:41.833195 #33792] DEBUG -- : 
I, [2015-01-09T23:03:41.834173 #33792]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-09 23:03:41 +0000
D, [2015-01-09T23:03:41.857823 #33792] DEBUG -- : 
D, [2015-01-09T23:03:41.858773 #33792] DEBUG -- : 
I, [2015-01-09T23:03:41.859667 #33792]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-09 23:03:41 +0000
D, [2015-01-09T23:03:41.887291 #33792] DEBUG -- : 
D, [2015-01-09T23:03:41.893417 #33792] DEBUG -- : 
I, [2015-01-09T23:03:41.894394 #33792]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-09 23:03:41 +0000
D, [2015-01-09T23:03:41.915498 #33792] DEBUG -- : 
D, [2015-01-09T23:03:41.916081 #33792] DEBUG -- : 
I, [2015-01-09T23:03:41.917235 #33792]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-09 23:03:41 +0000
D, [2015-01-09T23:03:41.936058 #33792] DEBUG -- : 
D, [2015-01-09T23:03:41.936570 #33792] DEBUG -- : 
I, [2015-01-09T23:03:41.937653 #33792]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-09 23:03:41 +0000
D, [2015-01-09T23:03:41.964503 #33792] DEBUG -- : 
D, [2015-01-09T23:03:41.965290 #33792] DEBUG -- : 
I, [2015-01-09T23:03:41.966460 #33792]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-09 23:03:41 +0000
D, [2015-01-09T23:03:41.991758 #33792] DEBUG -- : 
D, [2015-01-09T23:03:41.992278 #33792] DEBUG -- : 
I, [2015-01-09T23:03:41.993278 #33792]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-09 23:03:41 +0000
D, [2015-01-09T23:03:42.034334 #33792] DEBUG -- : 
D, [2015-01-09T23:03:42.034901 #33792] DEBUG -- : 
I, [2015-01-09T23:03:42.036084 #33792]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-09 23:03:42 +0000
D, [2015-01-09T23:03:42.074843 #33792] DEBUG -- : 
D, [2015-01-09T23:03:42.075362 #33792] DEBUG -- : 
I, [2015-01-09T23:03:42.076431 #33792]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-09 23:03:42 +0000
D, [2015-01-09T23:03:42.101066 #33792] DEBUG -- : 
D, [2015-01-09T23:03:42.108170 #33792] DEBUG -- : 
I, [2015-01-09T23:03:42.109374 #33792]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-09 23:03:42 +0000
D, [2015-01-09T23:03:42.143228 #33792] DEBUG -- : 
D, [2015-01-09T23:03:42.143757 #33792] DEBUG -- : 
I, [2015-01-09T23:03:42.144711 #33792]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-09 23:03:42 +0000
D, [2015-01-09T23:03:42.174450 #33792] DEBUG -- : 
D, [2015-01-09T23:03:42.174894 #33792] DEBUG -- : 
I, [2015-01-09T23:03:42.176208 #33792]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-09 23:03:42 +0000
D, [2015-01-09T23:03:42.201173 #33792] DEBUG -- : 
D, [2015-01-09T23:03:42.201680 #33792] DEBUG -- : 
I, [2015-01-09T23:03:42.210781 #33792]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-09 23:03:42 +0000
D, [2015-01-09T23:03:42.228173 #33792] DEBUG -- : 
D, [2015-01-09T23:03:42.228876 #33792] DEBUG -- : 
I, [2015-01-09T23:03:42.229871 #33792]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-09 23:03:42 +0000
D, [2015-01-09T23:03:42.255189 #33792] DEBUG -- : 
D, [2015-01-09T23:03:42.255632 #33792] DEBUG -- : 
I, [2015-01-09T23:03:42.256803 #33792]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-09 23:03:42 +0000
D, [2015-01-09T23:03:42.275320 #33792] DEBUG -- : 
D, [2015-01-09T23:03:42.275944 #33792] DEBUG -- : 
I, [2015-01-09T23:03:42.277048 #33792]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-09 23:03:42 +0000
D, [2015-01-09T23:03:42.310549 #33792] DEBUG -- : 
D, [2015-01-09T23:03:42.311146 #33792] DEBUG -- : 
I, [2015-01-09T23:03:42.312063 #33792]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-09 23:03:42 +0000
D, [2015-01-09T23:03:42.338139 #33792] DEBUG -- : 
D, [2015-01-09T23:03:42.338633 #33792] DEBUG -- : 
I, [2015-01-09T23:03:42.339554 #33792]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-09 23:03:42 +0000
D, [2015-01-09T23:03:42.365761 #33792] DEBUG -- : 
D, [2015-01-09T23:03:42.366340 #33792] DEBUG -- : 
I, [2015-01-09T23:03:42.367550 #33792]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-09 23:03:42 +0000
D, [2015-01-09T23:03:42.384496 #33792] DEBUG -- : 
D, [2015-01-09T23:03:42.385115 #33792] DEBUG -- : 
I, [2015-01-09T23:03:42.386140 #33792]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-09 23:03:42 +0000
D, [2015-01-09T23:03:42.406143 #33792] DEBUG -- : 
D, [2015-01-09T23:03:42.406633 #33792] DEBUG -- : 
I, [2015-01-09T23:03:42.407600 #33792]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-09 23:03:42 +0000
D, [2015-01-09T23:03:42.428524 #33792] DEBUG -- : 
D, [2015-01-09T23:03:42.429148 #33792] DEBUG -- : 
I, [2015-01-09T23:03:42.430285 #33792]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-09 23:03:42 +0000
D, [2015-01-09T23:03:42.454107 #33792] DEBUG -- : 
D, [2015-01-09T23:03:42.454538 #33792] DEBUG -- : 
I, [2015-01-09T23:03:42.455344 #33792]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-09 23:03:42 +0000
D, [2015-01-09T23:03:59.346079 #33792] DEBUG -- : 
D, [2015-01-09T23:03:59.346549 #33792] DEBUG -- : 
I, [2015-01-09T23:03:59.347368 #33792]  INFO -- : Started POST "/orders/80/execute/80/2VZ7YQDDDPPC4/PAY-5ER69471JR052021WKSYF4FA" for 127.0.0.1 at 2015-01-09 23:03:59 +0000
I, [2015-01-09T23:03:59.365121 #33792]  INFO -- : Processing by OrdersController#execute as HTML
I, [2015-01-09T23:03:59.365971 #33792]  INFO -- :   Parameters: {"authenticity_token"=>"ohbtEjIJsyqL+SAcUq0N+GSOROzNN7MrL8IuyZOU47c=", "order_id"=>"80", "payer_id"=>"2VZ7YQDDDPPC4", "payment_id"=>"PAY-5ER69471JR052021WKSYF4FA"}
D, [2015-01-09T23:03:59.377115 #33792] DEBUG -- :   [1m[36mOrder Load (0.7ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "80"]]
I, [2015-01-09T23:04:27.041314 #33792]  INFO -- : Completed 500 Internal Server Error in 27672ms
F, [2015-01-09T23:04:27.056699 #33792] FATAL -- : 
ArgumentError (id required):
  app/models/order.rb:63:in `execute'
  app/controllers/orders_controller.rb:78:in `execute'


I, [2015-01-09T23:04:27.148546 #33792]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (6.1ms)
I, [2015-01-09T23:04:27.164334 #33792]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (7.7ms)
I, [2015-01-09T23:04:27.178371 #33792]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (5.6ms)
I, [2015-01-09T23:04:27.179561 #33792]  INFO -- :   Rendered /Users/benking/.rvm/gems/ruby-2.1.5/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (49.5ms)
D, [2015-01-09T23:04:40.412742 #33792] DEBUG -- : 
D, [2015-01-09T23:04:40.413121 #33792] DEBUG -- : 
I, [2015-01-09T23:04:40.413815 #33792]  INFO -- : Started POST "/orders/80/execute/80/2VZ7YQDDDPPC4/PAY-5ER69471JR052021WKSYF4FA" for 127.0.0.1 at 2015-01-09 23:04:40 +0000
I, [2015-01-09T23:04:41.797000 #33792]  INFO -- : Processing by OrdersController#execute as HTML
I, [2015-01-09T23:04:41.797730 #33792]  INFO -- :   Parameters: {"authenticity_token"=>"ohbtEjIJsyqL+SAcUq0N+GSOROzNN7MrL8IuyZOU47c=", "order_id"=>"80", "payer_id"=>"2VZ7YQDDDPPC4", "payment_id"=>"PAY-5ER69471JR052021WKSYF4FA"}
D, [2015-01-09T23:04:41.851443 #33792] DEBUG -- :   [1m[35mOrder Load (11.2ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "80"]]
I, [2015-01-09T23:04:53.634455 #33792]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-5ER69471JR052021WKSYF4FA
I, [2015-01-09T23:04:56.421865 #33792]  INFO -- : Response[200]: OK, Duration: 2.787s
I, [2015-01-09T23:04:56.430909 #33792]  INFO -- : PayPal-Request-Id: 341d0610-0700-401f-92f2-f67ec2bd954e
I, [2015-01-09T23:04:56.431372 #33792]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-5ER69471JR052021WKSYF4FA/execute
I, [2015-01-09T23:04:58.780762 #33792]  INFO -- : Response[200]: OK, Duration: 2.349s
W, [2015-01-09T23:04:58.784534 #33792]  WARN -- : undefined method `fee=' for #<PayPal::SDK::REST::DataTypes::Details:0x007fe34faa0d40>
D, [2015-01-09T23:04:58.792079 #33792] DEBUG -- :   [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
D, [2015-01-09T23:04:58.804472 #33792] DEBUG -- :   [1m[35mSQL (1.3ms)[0m  UPDATE "orders" SET "state" = ?, "updated_at" = ? WHERE "orders"."id" = 80  [["state", "approved"], ["updated_at", Fri, 09 Jan 2015 23:04:58 UTC +00:00]]
D, [2015-01-09T23:04:58.812789 #33792] DEBUG -- :   [1m[36m (6.5ms)[0m  [1mcommit transaction[0m
D, [2015-01-09T23:05:05.845772 #33792] DEBUG -- :   [1m[35mCart Load (0.7ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 53]]
D, [2015-01-09T23:05:05.869582 #33792] DEBUG -- :   [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
D, [2015-01-09T23:05:05.904805 #33792] DEBUG -- :   [1m[35mLineItem Load (1.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 53]]
D, [2015-01-09T23:05:05.909295 #33792] DEBUG -- :   [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 53]]
D, [2015-01-09T23:05:05.913231 #33792] DEBUG -- :   [1m[35m (2.7ms)[0m  commit transaction
I, [2015-01-09T23:05:10.682541 #33792]  INFO -- :   Rendered order_notifier/received.html.erb (2.7ms)
D, [2015-01-09T23:05:10.698880 #33792] DEBUG -- :   [1m[36mLineItem Load (0.9ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 80]]
D, [2015-01-09T23:05:10.840048 #33792] DEBUG -- :   [1m[35mProduct Load (0.8ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-09T23:05:10.895824 #33792] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
I, [2015-01-09T23:05:10.898010 #33792]  INFO -- :   Rendered line_items/_line_item.text.erb (98.9ms)
I, [2015-01-09T23:05:10.898864 #33792]  INFO -- :   Rendered order_notifier/received.text.erb (211.8ms)
I, [2015-01-09T23:05:11.915439 #33792]  INFO -- : 
Sent mail to simon.king65-buyer@gmail.com (928.0ms)
D, [2015-01-09T23:05:11.916392 #33792] DEBUG -- : Date: Fri, 09 Jan 2015 23:05:11 +0000
From: Simon King <simon.king65@gmail.com>
To: simon.king65-buyer@gmail.com
Message-ID: <54b05ea7b9ec_84003ff1a7cfd2ac239cb@Ben-Kings-MacBook.local.mail>
Subject: King Clothing Order Confirmation
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_54b05ea6e134a_84003ff1a7cfd2ac238e9";
 charset=UTF-8
Content-Transfer-Encoding: 7bit


----==_mimepart_54b05ea6e134a_84003ff1a7cfd2ac238e9
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Test Buyer

Thank you for your recent order from King Clothing.

You ordered the following items:

 1 x camo print tee 1 x est 2014 tee
We'll send you a separate e-mail when your order ships.
----==_mimepart_54b05ea6e134a_84003ff1a7cfd2ac238e9
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<h1>OrderNotifier#received</h1>

<p>
  , thank you for your order, we will email you again once your order has been despatched. We hope you enjoy wearing your King Clothing brand tee-shirt.
</p>

----==_mimepart_54b05ea6e134a_84003ff1a7cfd2ac238e9--
<<<<<<< HEAD

I, [2015-01-09T23:05:11.920424 #33792]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-09T23:05:11.922555 #33792]  INFO -- : Completed 302 Found in 30124ms (ActiveRecord: 35.8ms)
D, [2015-01-09T23:05:11.941923 #33792] DEBUG -- : 
D, [2015-01-09T23:05:11.942349 #33792] DEBUG -- : 
I, [2015-01-09T23:05:11.942961 #33792]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-09 23:05:11 +0000
I, [2015-01-09T23:05:11.980484 #33792]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-09T23:05:11.987027 #33792] DEBUG -- :   [1m[35m (0.4ms)[0m  begin transaction
D, [2015-01-09T23:05:11.998497 #33792] DEBUG -- :   [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Fri, 09 Jan 2015 23:05:11 UTC +00:00], ["updated_at", Fri, 09 Jan 2015 23:05:11 UTC +00:00]]
D, [2015-01-09T23:05:12.003945 #33792] DEBUG -- :   [1m[35m (3.0ms)[0m  commit transaction
D, [2015-01-09T23:05:12.071056 #33792] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-09T23:05:12.080601 #33792]  INFO -- : Read fragment views/store/products/2-20141022062504570899000/a93d4e2e981ab3dfce98a095c3b6c059 (1.4ms)
I, [2015-01-09T23:05:12.081676 #33792]  INFO -- :   Rendered store/index.html.erb within layouts/application (15.8ms)
D, [2015-01-09T23:05:12.137003 #33792] DEBUG -- :   [1m[35mLineItem Exists (0.7ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 54]]
D, [2015-01-09T23:05:12.167746 #33792] DEBUG -- :   [1m[36mLineItem Load (0.7ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 54]]
I, [2015-01-09T23:05:12.169947 #33792]  INFO -- :   Rendered collection (0.3ms)
I, [2015-01-09T23:05:12.205817 #33792]  INFO -- :   Rendered carts/_cart.html.erb (43.2ms)
I, [2015-01-09T23:05:12.215233 #33792]  INFO -- : Completed 200 OK in 234ms (Views: 205.7ms | ActiveRecord: 7.3ms)
D, [2015-01-09T23:05:12.285277 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.285989 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.287418 #33792]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.371769 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.372375 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.373381 #33792]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.393498 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.393981 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.394957 #33792]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.421944 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.422611 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.424147 #33792]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.458633 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.459168 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.460145 #33792]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.479436 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.479949 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.481295 #33792]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.524559 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.525143 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.526113 #33792]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.551265 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.551796 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.560673 #33792]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.584047 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.597853 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.598939 #33792]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.630433 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.630927 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.632575 #33792]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.673666 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.674198 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.675231 #33792]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.700515 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.700953 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.702310 #33792]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.723153 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.723752 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.725378 #33792]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.774720 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.775354 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.776669 #33792]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.793588 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.794191 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.795766 #33792]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.820224 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.840851 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.841902 #33792]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.858098 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.858642 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.859672 #33792]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.880959 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.881558 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.882747 #33792]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.933676 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.942377 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.943418 #33792]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.973770 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.974618 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.975796 #33792]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.995389 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.995919 #33792] DEBUG -- : 
I, [2015-01-09T23:05:13.013705 #33792]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-09 23:05:13 +0000
D, [2015-01-09T23:05:13.031764 #33792] DEBUG -- : 
D, [2015-01-09T23:05:13.032346 #33792] DEBUG -- : 
I, [2015-01-09T23:05:13.033653 #33792]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-09 23:05:13 +0000
D, [2015-01-09T23:05:13.059008 #33792] DEBUG -- : 
D, [2015-01-09T23:05:13.059514 #33792] DEBUG -- : 
I, [2015-01-09T23:05:13.060568 #33792]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-09 23:05:13 +0000
D, [2015-01-09T23:05:13.078632 #33792] DEBUG -- : 
D, [2015-01-09T23:05:13.079281 #33792] DEBUG -- : 
I, [2015-01-09T23:05:13.081018 #33792]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-09 23:05:13 +0000
D, [2015-01-09T23:05:13.097852 #33792] DEBUG -- : 
D, [2015-01-09T23:05:13.098412 #33792] DEBUG -- : 
I, [2015-01-09T23:05:13.099613 #33792]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-09 23:05:13 +0000
D, [2015-01-09T23:05:13.117262 #33792] DEBUG -- : 
D, [2015-01-09T23:05:13.117763 #33792] DEBUG -- : 
I, [2015-01-09T23:05:13.118871 #33792]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-09 23:05:13 +0000
D, [2015-01-09T23:05:13.144867 #33792] DEBUG -- : 
D, [2015-01-09T23:05:13.145367 #33792] DEBUG -- : 
I, [2015-01-09T23:05:13.146089 #33792]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-09 23:05:13 +0000
D, [2015-01-09T23:05:13.182053 #33792] DEBUG -- : 
D, [2015-01-09T23:05:13.182539 #33792] DEBUG -- : 
I, [2015-01-09T23:05:13.192964 #33792]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-09 23:05:13 +0000
D, [2015-01-09T23:05:13.215177 #33792] DEBUG -- : 
D, [2015-01-09T23:05:13.215785 #33792] DEBUG -- : 
I, [2015-01-09T23:05:13.216684 #33792]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-09 23:05:13 +0000
>>>>>>> 01e1325fe7803e4b91881cec2cc7987e330f4956
=======

I, [2015-01-09T23:05:11.920424 #33792]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-09T23:05:11.922555 #33792]  INFO -- : Completed 302 Found in 30124ms (ActiveRecord: 35.8ms)
D, [2015-01-09T23:05:11.941923 #33792] DEBUG -- : 
D, [2015-01-09T23:05:11.942349 #33792] DEBUG -- : 
I, [2015-01-09T23:05:11.942961 #33792]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-09 23:05:11 +0000
I, [2015-01-09T23:05:11.980484 #33792]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-09T23:05:11.987027 #33792] DEBUG -- :   [1m[35m (0.4ms)[0m  begin transaction
D, [2015-01-09T23:05:11.998497 #33792] DEBUG -- :   [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Fri, 09 Jan 2015 23:05:11 UTC +00:00], ["updated_at", Fri, 09 Jan 2015 23:05:11 UTC +00:00]]
D, [2015-01-09T23:05:12.003945 #33792] DEBUG -- :   [1m[35m (3.0ms)[0m  commit transaction
D, [2015-01-09T23:05:12.071056 #33792] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-09T23:05:12.080601 #33792]  INFO -- : Read fragment views/store/products/2-20141022062504570899000/a93d4e2e981ab3dfce98a095c3b6c059 (1.4ms)
I, [2015-01-09T23:05:12.081676 #33792]  INFO -- :   Rendered store/index.html.erb within layouts/application (15.8ms)
D, [2015-01-09T23:05:12.137003 #33792] DEBUG -- :   [1m[35mLineItem Exists (0.7ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 54]]
D, [2015-01-09T23:05:12.167746 #33792] DEBUG -- :   [1m[36mLineItem Load (0.7ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 54]]
I, [2015-01-09T23:05:12.169947 #33792]  INFO -- :   Rendered collection (0.3ms)
I, [2015-01-09T23:05:12.205817 #33792]  INFO -- :   Rendered carts/_cart.html.erb (43.2ms)
I, [2015-01-09T23:05:12.215233 #33792]  INFO -- : Completed 200 OK in 234ms (Views: 205.7ms | ActiveRecord: 7.3ms)
D, [2015-01-09T23:05:12.285277 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.285989 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.287418 #33792]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.371769 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.372375 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.373381 #33792]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.393498 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.393981 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.394957 #33792]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.421944 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.422611 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.424147 #33792]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.458633 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.459168 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.460145 #33792]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.479436 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.479949 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.481295 #33792]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.524559 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.525143 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.526113 #33792]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.551265 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.551796 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.560673 #33792]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.584047 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.597853 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.598939 #33792]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.630433 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.630927 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.632575 #33792]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.673666 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.674198 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.675231 #33792]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.700515 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.700953 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.702310 #33792]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.723153 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.723752 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.725378 #33792]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.774720 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.775354 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.776669 #33792]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.793588 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.794191 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.795766 #33792]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.820224 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.840851 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.841902 #33792]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.858098 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.858642 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.859672 #33792]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.880959 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.881558 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.882747 #33792]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.933676 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.942377 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.943418 #33792]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.973770 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.974618 #33792] DEBUG -- : 
I, [2015-01-09T23:05:12.975796 #33792]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-09 23:05:12 +0000
D, [2015-01-09T23:05:12.995389 #33792] DEBUG -- : 
D, [2015-01-09T23:05:12.995919 #33792] DEBUG -- : 
I, [2015-01-09T23:05:13.013705 #33792]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-09 23:05:13 +0000
D, [2015-01-09T23:05:13.031764 #33792] DEBUG -- : 
D, [2015-01-09T23:05:13.032346 #33792] DEBUG -- : 
I, [2015-01-09T23:05:13.033653 #33792]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-09 23:05:13 +0000
D, [2015-01-09T23:05:13.059008 #33792] DEBUG -- : 
D, [2015-01-09T23:05:13.059514 #33792] DEBUG -- : 
I, [2015-01-09T23:05:13.060568 #33792]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-09 23:05:13 +0000
D, [2015-01-09T23:05:13.078632 #33792] DEBUG -- : 
D, [2015-01-09T23:05:13.079281 #33792] DEBUG -- : 
I, [2015-01-09T23:05:13.081018 #33792]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-09 23:05:13 +0000
D, [2015-01-09T23:05:13.097852 #33792] DEBUG -- : 
D, [2015-01-09T23:05:13.098412 #33792] DEBUG -- : 
I, [2015-01-09T23:05:13.099613 #33792]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-09 23:05:13 +0000
D, [2015-01-09T23:05:13.117262 #33792] DEBUG -- : 
D, [2015-01-09T23:05:13.117763 #33792] DEBUG -- : 
I, [2015-01-09T23:05:13.118871 #33792]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-09 23:05:13 +0000
D, [2015-01-09T23:05:13.144867 #33792] DEBUG -- : 
D, [2015-01-09T23:05:13.145367 #33792] DEBUG -- : 
I, [2015-01-09T23:05:13.146089 #33792]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-09 23:05:13 +0000
D, [2015-01-09T23:05:13.182053 #33792] DEBUG -- : 
D, [2015-01-09T23:05:13.182539 #33792] DEBUG -- : 
I, [2015-01-09T23:05:13.192964 #33792]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-09 23:05:13 +0000
D, [2015-01-09T23:05:13.215177 #33792] DEBUG -- : 
D, [2015-01-09T23:05:13.215785 #33792] DEBUG -- : 
I, [2015-01-09T23:05:13.216684 #33792]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-09 23:05:13 +0000
D, [2015-01-17T21:16:39.344433 #758] DEBUG -- : 
D, [2015-01-17T21:16:39.361625 #758] DEBUG -- : 
I, [2015-01-17T21:16:39.362031 #758]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-17 21:16:39 +0000
D, [2015-01-17T21:16:40.218380 #758] DEBUG -- :   [1m[36mActiveRecord::SchemaMigration Load (13.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
I, [2015-01-17T21:16:40.354250 #758]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-17T21:16:40.435982 #758] DEBUG -- :   [1m[35mCart Load (10.8ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 54]]
D, [2015-01-17T21:16:40.543232 #758] DEBUG -- :   [1m[36mProduct Load (2.2ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-17T21:16:40.581186 #758]  INFO -- : Cache digest for store/index.html: a93d4e2e981ab3dfce98a095c3b6c059
I, [2015-01-17T21:16:40.596074 #758]  INFO -- : Read fragment views/store/products/2-20141022062504570899000/a93d4e2e981ab3dfce98a095c3b6c059 (0.6ms)
I, [2015-01-17T21:16:40.596388 #758]  INFO -- :   Rendered store/index.html.erb within layouts/application (59.8ms)
D, [2015-01-17T21:16:41.158353 #758] DEBUG -- :   [1m[35mLineItem Exists (4.1ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 54]]
D, [2015-01-17T21:16:41.201129 #758] DEBUG -- :   [1m[36mLineItem Load (0.3ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 54]]
I, [2015-01-17T21:16:41.201556 #758]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-17T21:16:41.306828 #758]  INFO -- :   Rendered carts/_cart.html.erb (107.5ms)
I, [2015-01-17T21:16:41.308224 #758]  INFO -- : Completed 200 OK in 954ms (Views: 830.2ms | ActiveRecord: 18.7ms)
D, [2015-01-17T21:16:41.309697 #758] DEBUG -- : 
D, [2015-01-17T21:16:41.309772 #758] DEBUG -- : 
I, [2015-01-17T21:16:41.309906 #758]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-17 21:16:41 +0000
I, [2015-01-17T21:16:41.317004 #758]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-17T21:16:41.318561 #758] DEBUG -- :   [1m[35mCart Load (0.2ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 54]]
D, [2015-01-17T21:16:41.321734 #758] DEBUG -- :   [1m[36mProduct Load (0.3ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-17T21:16:41.322654 #758]  INFO -- : Read fragment views/store/products/2-20141022062504570899000/a93d4e2e981ab3dfce98a095c3b6c059 (0.2ms)
I, [2015-01-17T21:16:41.322866 #758]  INFO -- :   Rendered store/index.html.erb within layouts/application (1.9ms)
D, [2015-01-17T21:16:41.334409 #758] DEBUG -- :   [1m[35mLineItem Exists (0.1ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 54]]
D, [2015-01-17T21:16:41.335982 #758] DEBUG -- :   [1m[36mLineItem Load (0.1ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 54]]
I, [2015-01-17T21:16:41.336241 #758]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-17T21:16:41.337971 #758]  INFO -- :   Rendered carts/_cart.html.erb (2.5ms)
I, [2015-01-17T21:16:41.339302 #758]  INFO -- : Completed 200 OK in 22ms (Views: 19.5ms | ActiveRecord: 0.7ms)
D, [2015-01-17T21:16:41.370594 #758] DEBUG -- : 
D, [2015-01-17T21:16:41.370691 #758] DEBUG -- : 
I, [2015-01-17T21:16:41.370932 #758]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-17 21:16:41 +0000
D, [2015-01-17T21:16:41.402579 #758] DEBUG -- : 
D, [2015-01-17T21:16:41.404741 #758] DEBUG -- : 
I, [2015-01-17T21:16:41.407013 #758]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-17 21:16:41 +0000
D, [2015-01-17T21:16:41.427581 #758] DEBUG -- : 
D, [2015-01-17T21:16:41.427766 #758] DEBUG -- : 
I, [2015-01-17T21:16:41.428128 #758]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-17 21:16:41 +0000
D, [2015-01-17T21:16:41.440893 #758] DEBUG -- : 
D, [2015-01-17T21:16:41.441085 #758] DEBUG -- : 
I, [2015-01-17T21:16:41.441288 #758]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-17 21:16:41 +0000
D, [2015-01-17T21:16:41.450523 #758] DEBUG -- : 
D, [2015-01-17T21:16:41.450603 #758] DEBUG -- : 
I, [2015-01-17T21:16:41.451048 #758]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-17 21:16:41 +0000
D, [2015-01-17T21:16:41.463767 #758] DEBUG -- : 
D, [2015-01-17T21:16:41.463850 #758] DEBUG -- : 
I, [2015-01-17T21:16:41.464058 #758]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-17 21:16:41 +0000
D, [2015-01-17T21:16:41.483368 #758] DEBUG -- : 
D, [2015-01-17T21:16:41.483454 #758] DEBUG -- : 
I, [2015-01-17T21:16:41.483666 #758]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-17 21:16:41 +0000
D, [2015-01-17T21:16:41.510582 #758] DEBUG -- : 
D, [2015-01-17T21:16:41.510697 #758] DEBUG -- : 
I, [2015-01-17T21:16:41.511078 #758]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-17 21:16:41 +0000
D, [2015-01-17T21:16:41.527152 #758] DEBUG -- : 
D, [2015-01-17T21:16:41.527240 #758] DEBUG -- : 
I, [2015-01-17T21:16:41.539022 #758]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-17 21:16:41 +0000
D, [2015-01-17T21:16:41.546337 #758] DEBUG -- : 
D, [2015-01-17T21:16:41.548047 #758] DEBUG -- : 
I, [2015-01-17T21:16:41.548470 #758]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-17 21:16:41 +0000
D, [2015-01-17T21:16:41.568660 #758] DEBUG -- : 
D, [2015-01-17T21:16:41.568787 #758] DEBUG -- : 
I, [2015-01-17T21:16:41.569038 #758]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-17 21:16:41 +0000
D, [2015-01-17T21:16:41.578601 #758] DEBUG -- : 
D, [2015-01-17T21:16:41.578678 #758] DEBUG -- : 
I, [2015-01-17T21:16:41.578885 #758]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-17 21:16:41 +0000
D, [2015-01-17T21:16:41.587339 #758] DEBUG -- : 
D, [2015-01-17T21:16:41.587417 #758] DEBUG -- : 
I, [2015-01-17T21:16:41.587634 #758]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-17 21:16:41 +0000
D, [2015-01-17T21:16:41.632789 #758] DEBUG -- : 
D, [2015-01-17T21:16:41.632868 #758] DEBUG -- : 
I, [2015-01-17T21:16:41.633053 #758]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-17 21:16:41 +0000
D, [2015-01-17T21:16:41.642385 #758] DEBUG -- : 
D, [2015-01-17T21:16:41.642469 #758] DEBUG -- : 
I, [2015-01-17T21:16:41.642666 #758]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-17 21:16:41 +0000
D, [2015-01-17T21:16:41.651457 #758] DEBUG -- : 
D, [2015-01-17T21:16:41.655733 #758] DEBUG -- : 
I, [2015-01-17T21:16:41.656344 #758]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-17 21:16:41 +0000
D, [2015-01-17T21:16:41.669161 #758] DEBUG -- : 
D, [2015-01-17T21:16:41.669249 #758] DEBUG -- : 
I, [2015-01-17T21:16:41.669489 #758]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-17 21:16:41 +0000
D, [2015-01-17T21:16:41.685478 #758] DEBUG -- : 
D, [2015-01-17T21:16:41.685558 #758] DEBUG -- : 
I, [2015-01-17T21:16:41.685780 #758]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-17 21:16:41 +0000
D, [2015-01-17T21:16:41.692634 #758] DEBUG -- : 
D, [2015-01-17T21:16:41.692712 #758] DEBUG -- : 
I, [2015-01-17T21:16:41.692903 #758]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-17 21:16:41 +0000
D, [2015-01-17T21:16:41.710677 #758] DEBUG -- : 
D, [2015-01-17T21:16:41.710758 #758] DEBUG -- : 
I, [2015-01-17T21:16:41.710965 #758]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-17 21:16:41 +0000
D, [2015-01-17T21:16:41.722944 #758] DEBUG -- : 
D, [2015-01-17T21:16:41.723022 #758] DEBUG -- : 
I, [2015-01-17T21:16:41.723204 #758]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-17 21:16:41 +0000
D, [2015-01-17T21:16:41.740764 #758] DEBUG -- : 
D, [2015-01-17T21:16:41.740846 #758] DEBUG -- : 
I, [2015-01-17T21:16:41.741044 #758]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-17 21:16:41 +0000
D, [2015-01-17T21:16:41.754852 #758] DEBUG -- : 
D, [2015-01-17T21:16:41.754931 #758] DEBUG -- : 
I, [2015-01-17T21:16:41.755161 #758]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-17 21:16:41 +0000
D, [2015-01-17T21:16:41.773678 #758] DEBUG -- : 
D, [2015-01-17T21:16:41.773996 #758] DEBUG -- : 
I, [2015-01-17T21:16:41.774227 #758]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-17 21:16:41 +0000
D, [2015-01-17T21:16:41.786577 #758] DEBUG -- : 
D, [2015-01-17T21:16:41.786657 #758] DEBUG -- : 
I, [2015-01-17T21:16:41.787410 #758]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-17 21:16:41 +0000
D, [2015-01-17T21:16:41.817626 #758] DEBUG -- : 
D, [2015-01-17T21:16:41.817747 #758] DEBUG -- : 
I, [2015-01-17T21:16:41.817955 #758]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-17 21:16:41 +0000
D, [2015-01-17T21:16:41.856349 #758] DEBUG -- : 
D, [2015-01-17T21:16:41.856446 #758] DEBUG -- : 
I, [2015-01-17T21:16:41.856683 #758]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-17 21:16:41 +0000
D, [2015-01-17T21:16:41.877018 #758] DEBUG -- : 
D, [2015-01-17T21:16:41.877094 #758] DEBUG -- : 
I, [2015-01-17T21:16:41.877248 #758]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-17 21:16:41 +0000
D, [2015-01-17T21:16:41.936285 #758] DEBUG -- : 
D, [2015-01-17T21:16:41.936377 #758] DEBUG -- : 
I, [2015-01-17T21:16:41.936517 #758]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-17 21:16:41 +0000
D, [2015-01-17T21:16:42.016197 #758] DEBUG -- : 
D, [2015-01-17T21:16:42.016277 #758] DEBUG -- : 
I, [2015-01-17T21:16:42.016420 #758]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-17 21:16:42 +0000
D, [2015-01-18T15:17:21.752161 #1336] DEBUG -- : 
D, [2015-01-18T15:17:21.752294 #1336] DEBUG -- : 
I, [2015-01-18T15:17:21.752640 #1336]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-18 15:17:21 +0000
D, [2015-01-18T15:17:22.355289 #1336] DEBUG -- :   [1m[36mActiveRecord::SchemaMigration Load (0.6ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
I, [2015-01-18T15:17:22.526975 #1336]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-18T15:17:22.596004 #1336] DEBUG -- :   [1m[35mCart Load (12.2ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 54]]
D, [2015-01-18T15:17:22.720489 #1336] DEBUG -- :   [1m[36mProduct Load (0.8ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-18T15:17:22.745871 #1336]  INFO -- : Cache digest for store/index.html: a93d4e2e981ab3dfce98a095c3b6c059
I, [2015-01-18T15:17:22.747964 #1336]  INFO -- : Read fragment views/store/products/2-20141022062504570899000/a93d4e2e981ab3dfce98a095c3b6c059 (0.7ms)
I, [2015-01-18T15:17:22.748418 #1336]  INFO -- :   Rendered store/index.html.erb within layouts/application (40.3ms)
D, [2015-01-18T15:17:23.173744 #1336] DEBUG -- :   [1m[35mLineItem Exists (10.5ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 54]]
D, [2015-01-18T15:17:23.205673 #1336] DEBUG -- :   [1m[36mLineItem Load (0.3ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 54]]
I, [2015-01-18T15:17:23.206016 #1336]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-18T15:17:23.284978 #1336]  INFO -- :   Rendered carts/_cart.html.erb (80.8ms)
I, [2015-01-18T15:17:23.286861 #1336]  INFO -- : Completed 200 OK in 759ms (Views: 660.5ms | ActiveRecord: 24.9ms)
D, [2015-01-18T15:17:23.350798 #1336] DEBUG -- : 
D, [2015-01-18T15:17:23.350884 #1336] DEBUG -- : 
I, [2015-01-18T15:17:23.351102 #1336]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-18 15:17:23 +0000
D, [2015-01-18T15:17:23.370871 #1336] DEBUG -- : 
D, [2015-01-18T15:17:23.371190 #1336] DEBUG -- : 
I, [2015-01-18T15:17:23.373616 #1336]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-18 15:17:23 +0000
D, [2015-01-18T15:17:23.393011 #1336] DEBUG -- : 
D, [2015-01-18T15:17:23.395681 #1336] DEBUG -- : 
I, [2015-01-18T15:17:23.396026 #1336]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-18 15:17:23 +0000
D, [2015-01-18T15:17:23.420975 #1336] DEBUG -- : 
D, [2015-01-18T15:17:23.421209 #1336] DEBUG -- : 
I, [2015-01-18T15:17:23.421716 #1336]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-18 15:17:23 +0000
D, [2015-01-18T15:17:23.442517 #1336] DEBUG -- : 
D, [2015-01-18T15:17:23.442839 #1336] DEBUG -- : 
I, [2015-01-18T15:17:23.443225 #1336]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-18 15:17:23 +0000
D, [2015-01-18T15:17:23.452392 #1336] DEBUG -- : 
D, [2015-01-18T15:17:23.452820 #1336] DEBUG -- : 
I, [2015-01-18T15:17:23.455387 #1336]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-18 15:17:23 +0000
D, [2015-01-18T15:17:23.467552 #1336] DEBUG -- : 
D, [2015-01-18T15:17:23.467634 #1336] DEBUG -- : 
I, [2015-01-18T15:17:23.467861 #1336]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-18 15:17:23 +0000
D, [2015-01-18T15:17:23.480020 #1336] DEBUG -- : 
D, [2015-01-18T15:17:23.482532 #1336] DEBUG -- : 
I, [2015-01-18T15:17:23.483898 #1336]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-18 15:17:23 +0000
D, [2015-01-18T15:17:23.496385 #1336] DEBUG -- : 
D, [2015-01-18T15:17:23.496468 #1336] DEBUG -- : 
I, [2015-01-18T15:17:23.496665 #1336]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-18 15:17:23 +0000
D, [2015-01-18T15:17:23.504809 #1336] DEBUG -- : 
D, [2015-01-18T15:17:23.507008 #1336] DEBUG -- : 
I, [2015-01-18T15:17:23.507225 #1336]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-18 15:17:23 +0000
D, [2015-01-18T15:17:23.533426 #1336] DEBUG -- : 
D, [2015-01-18T15:17:23.533957 #1336] DEBUG -- : 
I, [2015-01-18T15:17:23.534750 #1336]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-18 15:17:23 +0000
D, [2015-01-18T15:17:23.548137 #1336] DEBUG -- : 
D, [2015-01-18T15:17:23.548240 #1336] DEBUG -- : 
I, [2015-01-18T15:17:23.548436 #1336]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-18 15:17:23 +0000
D, [2015-01-18T15:17:23.559424 #1336] DEBUG -- : 
D, [2015-01-18T15:17:23.559504 #1336] DEBUG -- : 
I, [2015-01-18T15:17:23.571342 #1336]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-18 15:17:23 +0000
D, [2015-01-18T15:17:23.582206 #1336] DEBUG -- : 
D, [2015-01-18T15:17:23.582285 #1336] DEBUG -- : 
I, [2015-01-18T15:17:23.585572 #1336]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-18 15:17:23 +0000
D, [2015-01-18T15:17:23.600369 #1336] DEBUG -- : 
D, [2015-01-18T15:17:23.600530 #1336] DEBUG -- : 
I, [2015-01-18T15:17:23.601470 #1336]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-18 15:17:23 +0000
D, [2015-01-18T15:17:23.616091 #1336] DEBUG -- : 
D, [2015-01-18T15:17:23.616169 #1336] DEBUG -- : 
I, [2015-01-18T15:17:23.616418 #1336]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-18 15:17:23 +0000
D, [2015-01-18T15:17:23.630943 #1336] DEBUG -- : 
D, [2015-01-18T15:17:23.631048 #1336] DEBUG -- : 
I, [2015-01-18T15:17:23.631289 #1336]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-18 15:17:23 +0000
D, [2015-01-18T15:17:23.638847 #1336] DEBUG -- : 
D, [2015-01-18T15:17:23.639877 #1336] DEBUG -- : 
I, [2015-01-18T15:17:23.640107 #1336]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-18 15:17:23 +0000
D, [2015-01-18T15:17:23.652013 #1336] DEBUG -- : 
D, [2015-01-18T15:17:23.652133 #1336] DEBUG -- : 
I, [2015-01-18T15:17:23.652320 #1336]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-18 15:17:23 +0000
D, [2015-01-18T15:17:23.666923 #1336] DEBUG -- : 
D, [2015-01-18T15:17:23.667001 #1336] DEBUG -- : 
I, [2015-01-18T15:17:23.667231 #1336]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-18 15:17:23 +0000
D, [2015-01-18T15:17:23.678784 #1336] DEBUG -- : 
D, [2015-01-18T15:17:23.678862 #1336] DEBUG -- : 
I, [2015-01-18T15:17:23.679100 #1336]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-18 15:17:23 +0000
D, [2015-01-18T15:17:23.705869 #1336] DEBUG -- : 
D, [2015-01-18T15:17:23.705953 #1336] DEBUG -- : 
I, [2015-01-18T15:17:23.706143 #1336]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-18 15:17:23 +0000
D, [2015-01-18T15:17:23.717864 #1336] DEBUG -- : 
D, [2015-01-18T15:17:23.718045 #1336] DEBUG -- : 
I, [2015-01-18T15:17:23.718263 #1336]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-18 15:17:23 +0000
D, [2015-01-18T15:17:23.728938 #1336] DEBUG -- : 
D, [2015-01-18T15:17:23.729021 #1336] DEBUG -- : 
I, [2015-01-18T15:17:23.729239 #1336]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-18 15:17:23 +0000
D, [2015-01-18T15:17:23.735976 #1336] DEBUG -- : 
D, [2015-01-18T15:17:23.736591 #1336] DEBUG -- : 
I, [2015-01-18T15:17:23.739278 #1336]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-18 15:17:23 +0000
D, [2015-01-18T15:17:23.789145 #1336] DEBUG -- : 
D, [2015-01-18T15:17:23.789783 #1336] DEBUG -- : 
I, [2015-01-18T15:17:23.790340 #1336]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-18 15:17:23 +0000
D, [2015-01-18T15:17:23.804936 #1336] DEBUG -- : 
D, [2015-01-18T15:17:23.805272 #1336] DEBUG -- : 
I, [2015-01-18T15:17:23.805416 #1336]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-18 15:17:23 +0000
D, [2015-01-18T15:17:23.833475 #1336] DEBUG -- : 
D, [2015-01-18T15:17:23.833552 #1336] DEBUG -- : 
I, [2015-01-18T15:17:23.833674 #1336]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-18 15:17:23 +0000
D, [2015-01-18T15:17:23.881819 #1336] DEBUG -- : 
D, [2015-01-18T15:17:23.881896 #1336] DEBUG -- : 
I, [2015-01-18T15:17:23.882113 #1336]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-18 15:17:23 +0000
D, [2015-01-18T15:17:23.904239 #1336] DEBUG -- : 
D, [2015-01-18T15:17:23.904837 #1336] DEBUG -- : 
I, [2015-01-18T15:17:23.905254 #1336]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-18 15:17:23 +0000
D, [2015-01-18T15:17:27.940969 #1336] DEBUG -- : 
D, [2015-01-18T15:17:27.941053 #1336] DEBUG -- : 
I, [2015-01-18T15:17:27.941268 #1336]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-18 15:17:27 +0000
I, [2015-01-18T15:17:27.964134 #1336]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-18T15:17:27.964328 #1336]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-18T15:17:27.966583 #1336] DEBUG -- :   [1m[35mCart Load (0.3ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 54]]
D, [2015-01-18T15:17:27.967587 #1336] DEBUG -- :   [1m[36mProduct Load (0.2ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-18T15:17:27.983648 #1336] DEBUG -- :   [1m[35mLineItem Load (0.3ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 54]]
D, [2015-01-18T15:17:28.085898 #1336] DEBUG -- :   [1m[36mProduct Load (0.4ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-18T15:17:28.086910 #1336] DEBUG -- :   [1m[35m (0.1ms)[0m  begin transaction
D, [2015-01-18T15:17:28.164643 #1336] DEBUG -- :   [1m[36mSQL (36.9ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 54], ["created_at", Sun, 18 Jan 2015 15:17:28 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7fdd84ac1908,'0.1299E2',18(36)>], ["size", "extra small"], ["updated_at", Sun, 18 Jan 2015 15:17:28 UTC +00:00]]
D, [2015-01-18T15:17:28.168888 #1336] DEBUG -- :   [1m[35m (3.7ms)[0m  commit transaction
D, [2015-01-18T15:17:28.206522 #1336] DEBUG -- :   [1m[36mLineItem Load (0.2ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 54]]
I, [2015-01-18T15:17:28.240713 #1336]  INFO -- :   Rendered line_items/_line_item.html.erb (1.8ms)
I, [2015-01-18T15:17:28.242966 #1336]  INFO -- :   Rendered carts/_cart.html.erb (38.1ms)
I, [2015-01-18T15:17:28.243345 #1336]  INFO -- :   Rendered line_items/create.js.erb (40.9ms)
I, [2015-01-18T15:17:28.243735 #1336]  INFO -- : Completed 200 OK in 279ms (Views: 73.8ms | ActiveRecord: 42.0ms)
D, [2015-01-18T15:19:07.096531 #1336] DEBUG -- : 
D, [2015-01-18T15:19:07.096615 #1336] DEBUG -- : 
I, [2015-01-18T15:19:07.096740 #1336]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-18 15:19:07 +0000
I, [2015-01-18T15:19:07.107933 #1336]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-18T15:19:07.140396 #1336] DEBUG -- :   [1m[35mUser Load (9.5ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
I, [2015-01-18T15:19:07.158260 #1336]  INFO -- : Filter chain halted as :authorize rendered or redirected
I, [2015-01-18T15:19:07.158468 #1336]  INFO -- : Completed 401 Unauthorized in 50ms (ActiveRecord: 9.8ms)
D, [2015-01-18T15:21:45.705365 #1336] DEBUG -- : 
D, [2015-01-18T15:21:45.705444 #1336] DEBUG -- : 
I, [2015-01-18T15:21:45.705560 #1336]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-18 15:21:45 +0000
I, [2015-01-18T15:21:45.711861 #1336]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-18T15:21:45.713341 #1336] DEBUG -- :   [1m[36mUser Load (0.2ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
D, [2015-01-18T15:21:45.714785 #1336] DEBUG -- :   [1m[35mUser Load (0.2ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-18T15:21:45.715831 #1336] DEBUG -- :   [1m[36mCart Load (0.2ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 54]]
D, [2015-01-18T15:21:46.063142 #1336] DEBUG -- :   [1m[35mLineItem Load (0.2ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 54]]
I, [2015-01-18T15:21:46.108510 #1336]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: "Paypal", payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-18T15:23:28.026827 #1336] DEBUG -- :   [1m[36m (0.6ms)[0m  [1mbegin transaction[0m
D, [2015-01-18T15:23:28.690408 #1336] DEBUG -- :   [1m[35mSQL (652.1ms)[0m  INSERT INTO "orders" ("created_at", "payment_method", "updated_at") VALUES (?, ?, ?)  [["created_at", Sun, 18 Jan 2015 15:23:28 UTC +00:00], ["payment_method", "Paypal"], ["updated_at", Sun, 18 Jan 2015 15:23:28 UTC +00:00]]
D, [2015-01-18T15:23:28.749205 #1336] DEBUG -- :   [1m[36mSQL (44.3ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 149[0m  [["cart_id", nil], ["order_id", 81], ["updated_at", Sun, 18 Jan 2015 15:23:28 UTC +00:00]]
I, [2015-01-18T15:23:28.751053 #1336]  INFO -- : about to @payment.create
D, [2015-01-18T15:23:29.830685 #1336] DEBUG -- :   [1m[35mProduct Load (0.5ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-18T15:23:32.704967 #1336]  INFO -- : in order=
I, [2015-01-18T15:23:34.096184 #1336]  INFO -- : in payment.create
I, [2015-01-18T15:23:34.102357 #1336]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"12.99"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/81/confirm", "cancel_url"=>"http://localhost:3000/orders/81/cancel"}}
I, [2015-01-18T15:23:34.104645 #1336]  INFO -- : #<ActiveModel::Errors:0x007fdd80b85eb0 @base=#<Payment:0x007fdd82c42888 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd82c40ce0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd82ab6e10 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd82ab4700 @error=nil, @total="12.99", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd82aa7320 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd82a96778 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd82986338 @error=nil, @return_url="http://localhost:3000/orders/81/confirm", @cancel_url="http://localhost:3000/orders/81/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd80b85eb0 ...>>, @messages={}>
I, [2015-01-18T15:23:34.105296 #1336]  INFO -- : got past invalid
I, [2015-01-18T15:23:34.201327 #1336]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/oauth2/token
I, [2015-01-18T15:23:36.506341 #1336]  INFO -- : Response[200]: OK, Duration: 2.304s
I, [2015-01-18T15:23:36.518497 #1336]  INFO -- : PayPal-Request-Id: 868c9d1b-4f83-465e-b1d1-d335209a42b6
I, [2015-01-18T15:23:36.519198 #1336]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-18T15:23:37.822111 #1336]  INFO -- : Response[201]: Created, Duration: 1.302s
I, [2015-01-18T15:23:37.826889 #1336]  INFO -- : back from super
I, [2015-01-18T15:23:37.834329 #1336]  INFO -- : {"id"=>"PAY-9GX21195GP748660WKS5476I", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"12.99", "details"=>{"subtotal"=>"12.99"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/81/confirm", "cancel_url"=>"http://localhost:3000/orders/81/cancel"}, "create_time"=>"2015-01-18T15:23:37Z", "update_time"=>"2015-01-18T15:23:37Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-9GX21195GP748660WKS5476I", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-5CG90069XW655980F", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-9GX21195GP748660WKS5476I/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-18T15:23:37.848673 #1336] DEBUG -- :   [1m[36mSQL (2.6ms)[0m  [1mUPDATE "orders" SET "payment_method" = ?, "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ?, "pay_type" = ? WHERE "orders"."id" = 81[0m  [["payment_method", "Paypal"], ["created_at", Sun, 18 Jan 2015 15:23:28 UTC +00:00], ["updated_at", Sun, 18 Jan 2015 15:23:28 UTC +00:00], ["id", 81], ["payment_id", "PAY-9GX21195GP748660WKS5476I"], ["state", "created"], ["pay_type", "paypal"]]
I, [2015-01-18T15:23:37.850907 #1336]  INFO -- : @payment save just done
I, [2015-01-18T15:23:37.852247 #1336]  INFO -- : #<Payment:0x007fdd82c42888 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd85802720 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fdd85801f28 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fdd85801aa0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd85801050 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd85800bc8 @error=nil, @total="12.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fdd85800060 @error=nil, @subtotal="12.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd817ef188 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd817ee8c8 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd82986338 @error=nil, @return_url="http://localhost:3000/orders/81/confirm", @cancel_url="http://localhost:3000/orders/81/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd80b85eb0 @base=#<Payment:0x007fdd82c42888 ...>, @messages={}>, @request_id="868c9d1b-4f83-465e-b1d1-d335209a42b6", @header={}, @id="PAY-9GX21195GP748660WKS5476I", @create_time="2015-01-18T15:23:37Z", @update_time="2015-01-18T15:23:37Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fdd817dfeb8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9GX21195GP748660WKS5476I", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd817deb80 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-5CG90069XW655980F", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd817dda00 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9GX21195GP748660WKS5476I/execute", @rel="execute", @method="POST">]>
I, [2015-01-18T15:23:37.853463 #1336]  INFO -- : #<Payment:0x007fdd82c42888 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd85802720 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fdd85801f28 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fdd85801aa0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd85801050 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd85800bc8 @error=nil, @total="12.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fdd85800060 @error=nil, @subtotal="12.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd817ef188 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd817ee8c8 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd82986338 @error=nil, @return_url="http://localhost:3000/orders/81/confirm", @cancel_url="http://localhost:3000/orders/81/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd80b85eb0 @base=#<Payment:0x007fdd82c42888 ...>, @messages={}>, @request_id="868c9d1b-4f83-465e-b1d1-d335209a42b6", @header={}, @id="PAY-9GX21195GP748660WKS5476I", @create_time="2015-01-18T15:23:37Z", @update_time="2015-01-18T15:23:37Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fdd817dfeb8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9GX21195GP748660WKS5476I", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd817deb80 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-5CG90069XW655980F", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd817dda00 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9GX21195GP748660WKS5476I/execute", @rel="execute", @method="POST">]>
D, [2015-01-18T15:23:38.460860 #1336] DEBUG -- :   [1m[35m (605.0ms)[0m  commit transaction
D, [2015-01-18T15:23:38.470194 #1336] DEBUG -- :   [1m[36mSQL (3.1ms)[0m  [1mUPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 81[0m
I, [2015-01-18T15:23:38.471093 #1336]  INFO -- : about to approve url
I, [2015-01-18T15:23:38.472486 #1336]  INFO -- : #<Payment:0x007fdd82c42888 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd85802720 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fdd85801f28 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fdd85801aa0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd85801050 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd85800bc8 @error=nil, @total="12.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fdd85800060 @error=nil, @subtotal="12.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd817ef188 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd817ee8c8 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd82986338 @error=nil, @return_url="http://localhost:3000/orders/81/confirm", @cancel_url="http://localhost:3000/orders/81/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd80b85eb0 @base=#<Payment:0x007fdd82c42888 ...>, @messages={}>, @request_id="868c9d1b-4f83-465e-b1d1-d335209a42b6", @header={}, @id="PAY-9GX21195GP748660WKS5476I", @create_time="2015-01-18T15:23:37Z", @update_time="2015-01-18T15:23:37Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fdd817dfeb8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9GX21195GP748660WKS5476I", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd817deb80 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-5CG90069XW655980F", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd817dda00 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9GX21195GP748660WKS5476I/execute", @rel="execute", @method="POST">]>
I, [2015-01-18T15:23:38.474148 #1336]  INFO -- : #<Payment:0x007fdd82c42888 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd85802720 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fdd85801f28 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fdd85801aa0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd85801050 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd85800bc8 @error=nil, @total="12.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fdd85800060 @error=nil, @subtotal="12.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd817ef188 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd817ee8c8 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd82986338 @error=nil, @return_url="http://localhost:3000/orders/81/confirm", @cancel_url="http://localhost:3000/orders/81/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd80b85eb0 @base=#<Payment:0x007fdd82c42888 ...>, @messages={}>, @request_id="868c9d1b-4f83-465e-b1d1-d335209a42b6", @header={}, @id="PAY-9GX21195GP748660WKS5476I", @create_time="2015-01-18T15:23:37Z", @update_time="2015-01-18T15:23:37Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fdd817dfeb8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9GX21195GP748660WKS5476I", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd817deb80 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-5CG90069XW655980F", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd817dda00 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9GX21195GP748660WKS5476I/execute", @rel="execute", @method="POST">]>
I, [2015-01-18T15:23:38.474713 #1336]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-5CG90069XW655980F
I, [2015-01-18T15:23:38.475827 #1336]  INFO -- : #<Payment:0x007fdd82c42888 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd85802720 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fdd85801f28 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fdd85801aa0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd85801050 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd85800bc8 @error=nil, @total="12.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fdd85800060 @error=nil, @subtotal="12.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd817ef188 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd817ee8c8 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd82986338 @error=nil, @return_url="http://localhost:3000/orders/81/confirm", @cancel_url="http://localhost:3000/orders/81/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd80b85eb0 @base=#<Payment:0x007fdd82c42888 ...>, @messages={}>, @request_id="868c9d1b-4f83-465e-b1d1-d335209a42b6", @header={}, @id="PAY-9GX21195GP748660WKS5476I", @create_time="2015-01-18T15:23:37Z", @update_time="2015-01-18T15:23:37Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fdd817dfeb8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9GX21195GP748660WKS5476I", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd817deb80 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-5CG90069XW655980F", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd817dda00 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-9GX21195GP748660WKS5476I/execute", @rel="execute", @method="POST">]>
I, [2015-01-18T15:23:38.478190 #1336]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-5CG90069XW655980F
I, [2015-01-18T15:23:38.480872 #1336]  INFO -- : Completed 403 Forbidden in 112768ms (ActiveRecord: 1309.8ms)
D, [2015-01-18T15:23:38.488291 #1336] DEBUG -- : 
D, [2015-01-18T15:23:38.490020 #1336] DEBUG -- : 
I, [2015-01-18T15:23:38.490562 #1336]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-18 15:23:38 +0000
I, [2015-01-18T15:23:38.505231 #1336]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-18T15:23:38.512429 #1336] DEBUG -- :   [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
D, [2015-01-18T15:23:38.518561 #1336] DEBUG -- :   [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-18T15:23:38.523952 #1336] DEBUG -- :   [1m[35mCart Load (0.5ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 54]]
D, [2015-01-18T15:23:38.533733 #1336] DEBUG -- :   [1m[36mLineItem Load (0.5ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 54]]
I, [2015-01-18T15:23:38.537914 #1336]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: "Paypal", payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-18T15:24:31.169572 #1336] DEBUG -- :   [1m[35m (0.6ms)[0m  begin transaction
D, [2015-01-18T15:24:31.178740 #1336] DEBUG -- :   [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "orders" ("created_at", "payment_method", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sun, 18 Jan 2015 15:24:31 UTC +00:00], ["payment_method", "Paypal"], ["updated_at", Sun, 18 Jan 2015 15:24:31 UTC +00:00]]
I, [2015-01-18T15:24:31.179910 #1336]  INFO -- : about to @payment.create
D, [2015-01-18T15:24:32.159703 #1336] DEBUG -- :   [1m[35mLineItem Load (0.9ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 82]]
I, [2015-01-18T15:24:33.720015 #1336]  INFO -- : in order=
I, [2015-01-18T15:24:35.151700 #1336]  INFO -- : in payment.create
I, [2015-01-18T15:24:35.155701 #1336]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"0"}, "description"=>"King Clothing"}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/82/confirm", "cancel_url"=>"http://localhost:3000/orders/82/cancel"}}
I, [2015-01-18T15:24:35.157155 #1336]  INFO -- : #<ActiveModel::Errors:0x007fdd848da658 @base=#<Payment:0x007fdd849e1330 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd849e0278 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd8155db68 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd8155d3e8 @error=nil, @total="0", @currency="GBP">, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd84923c68 @error=nil, @return_url="http://localhost:3000/orders/82/confirm", @cancel_url="http://localhost:3000/orders/82/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd848da658 ...>>, @messages={}>
I, [2015-01-18T15:24:35.157705 #1336]  INFO -- : got past invalid
I, [2015-01-18T15:24:35.168624 #1336]  INFO -- : PayPal-Request-Id: 619aa4fd-b5ea-4880-a705-0cf73b1dcc50
I, [2015-01-18T15:24:35.169207 #1336]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-18T15:24:36.180050 #1336]  INFO -- : Response[400]: Bad Request, Duration: 1.010s
I, [2015-01-18T15:24:36.181437 #1336]  INFO -- :  in error=
I, [2015-01-18T15:24:36.222551 #1336]  INFO -- : back from super
I, [2015-01-18T15:24:36.226139 #1336]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"0"}, "description"=>"King Clothing"}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/82/confirm", "cancel_url"=>"http://localhost:3000/orders/82/cancel"}}
D, [2015-01-18T15:24:36.237512 #1336] DEBUG -- :   [1m[36mSQL (1.6ms)[0m  [1mUPDATE "orders" SET "payment_method" = ?, "created_at" = ?, "updated_at" = ?, "id" = ?, "pay_type" = ? WHERE "orders"."id" = 82[0m  [["payment_method", "Paypal"], ["created_at", Sun, 18 Jan 2015 15:24:31 UTC +00:00], ["updated_at", Sun, 18 Jan 2015 15:24:31 UTC +00:00], ["id", 82], ["pay_type", "paypal"]]
I, [2015-01-18T15:24:36.239348 #1336]  INFO -- : @payment save just done
I, [2015-01-18T15:24:36.241009 #1336]  INFO -- : #<Payment:0x007fdd849e1330 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions[0].amount", "issue"=>"Amount cannot be zero"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"788c6a452442f"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd849e0278 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd8155db68 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd8155d3e8 @error=nil, @total="0", @currency="GBP">, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd84923c68 @error=nil, @return_url="http://localhost:3000/orders/82/confirm", @cancel_url="http://localhost:3000/orders/82/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd848da658 @base=#<Payment:0x007fdd849e1330 ...>, @messages={:"transactions[0].amount"=>["Amount cannot be zero"]}>, @request_id="619aa4fd-b5ea-4880-a705-0cf73b1dcc50", @header={}>
I, [2015-01-18T15:24:36.242258 #1336]  INFO -- : #<Payment:0x007fdd849e1330 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions[0].amount", "issue"=>"Amount cannot be zero"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"788c6a452442f"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd849e0278 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd8155db68 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd8155d3e8 @error=nil, @total="0", @currency="GBP">, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd84923c68 @error=nil, @return_url="http://localhost:3000/orders/82/confirm", @cancel_url="http://localhost:3000/orders/82/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd848da658 @base=#<Payment:0x007fdd849e1330 ...>, @messages={:"transactions[0].amount"=>["Amount cannot be zero"]}>, @request_id="619aa4fd-b5ea-4880-a705-0cf73b1dcc50", @header={}>
D, [2015-01-18T15:24:36.246608 #1336] DEBUG -- :   [1m[35m (3.0ms)[0m  commit transaction
D, [2015-01-18T15:24:36.253240 #1336] DEBUG -- :   [1m[36mSQL (2.5ms)[0m  [1mUPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 82[0m
I, [2015-01-18T15:24:36.253974 #1336]  INFO -- : about to approve url
I, [2015-01-18T15:24:36.254962 #1336]  INFO -- : #<Payment:0x007fdd849e1330 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions[0].amount", "issue"=>"Amount cannot be zero"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"788c6a452442f"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd849e0278 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd8155db68 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd8155d3e8 @error=nil, @total="0", @currency="GBP">, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd84923c68 @error=nil, @return_url="http://localhost:3000/orders/82/confirm", @cancel_url="http://localhost:3000/orders/82/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd848da658 @base=#<Payment:0x007fdd849e1330 ...>, @messages={:"transactions[0].amount"=>["Amount cannot be zero"]}>, @request_id="619aa4fd-b5ea-4880-a705-0cf73b1dcc50", @header={}>
I, [2015-01-18T15:24:36.257617 #1336]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-18T15:24:36.260109 #1336]  INFO -- : Completed 302 Found in 57754ms (ActiveRecord: 12.6ms)
D, [2015-01-18T15:24:36.269155 #1336] DEBUG -- : 
D, [2015-01-18T15:24:36.270184 #1336] DEBUG -- : 
I, [2015-01-18T15:24:36.270762 #1336]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-18 15:24:36 +0000
I, [2015-01-18T15:24:36.284102 #1336]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-18T15:24:36.290997 #1336] DEBUG -- :   [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
D, [2015-01-18T15:24:36.296148 #1336] DEBUG -- :   [1m[36mUser Load (0.5ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-18T15:24:36.301510 #1336] DEBUG -- :   [1m[35mCart Load (0.7ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 54]]
D, [2015-01-18T15:24:36.309818 #1336] DEBUG -- :   [1m[36mLineItem Load (0.5ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 54]]
I, [2015-01-18T15:24:36.314277 #1336]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: "Paypal", payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-18T15:24:38.009732 #1336] DEBUG -- :   [1m[35m (0.6ms)[0m  begin transaction
D, [2015-01-18T15:24:38.020288 #1336] DEBUG -- :   [1m[36mSQL (2.2ms)[0m  [1mINSERT INTO "orders" ("created_at", "payment_method", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sun, 18 Jan 2015 15:24:38 UTC +00:00], ["payment_method", "Paypal"], ["updated_at", Sun, 18 Jan 2015 15:24:38 UTC +00:00]]
I, [2015-01-18T15:24:38.021575 #1336]  INFO -- : about to @payment.create
D, [2015-01-18T15:24:38.743763 #1336] DEBUG -- :   [1m[35mLineItem Load (0.5ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 83]]
I, [2015-01-18T15:24:39.735859 #1336]  INFO -- : in order=
I, [2015-01-18T15:24:40.576928 #1336]  INFO -- : in payment.create
I, [2015-01-18T15:24:40.580837 #1336]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"0"}, "description"=>"King Clothing"}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/83/confirm", "cancel_url"=>"http://localhost:3000/orders/83/cancel"}}
I, [2015-01-18T15:24:40.582144 #1336]  INFO -- : #<ActiveModel::Errors:0x007fdd80b2d940 @base=#<Payment:0x007fdd82c00028 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd82bf9fc0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd8115c578 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd81156cb8 @error=nil, @total="0", @currency="GBP">, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd828645b8 @error=nil, @return_url="http://localhost:3000/orders/83/confirm", @cancel_url="http://localhost:3000/orders/83/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd80b2d940 ...>>, @messages={}>
I, [2015-01-18T15:24:40.582663 #1336]  INFO -- : got past invalid
I, [2015-01-18T15:24:40.600549 #1336]  INFO -- : PayPal-Request-Id: 8b500ab6-a0fc-4098-9893-74436a554e9a
I, [2015-01-18T15:24:40.601076 #1336]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-18T15:24:41.659120 #1336]  INFO -- : Response[400]: Bad Request, Duration: 1.057s
I, [2015-01-18T15:24:41.660489 #1336]  INFO -- :  in error=
I, [2015-01-18T15:24:41.661475 #1336]  INFO -- : back from super
I, [2015-01-18T15:24:41.664736 #1336]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"0"}, "description"=>"King Clothing"}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/83/confirm", "cancel_url"=>"http://localhost:3000/orders/83/cancel"}}
D, [2015-01-18T15:24:41.675401 #1336] DEBUG -- :   [1m[36mSQL (1.5ms)[0m  [1mUPDATE "orders" SET "payment_method" = ?, "created_at" = ?, "updated_at" = ?, "id" = ?, "pay_type" = ? WHERE "orders"."id" = 83[0m  [["payment_method", "Paypal"], ["created_at", Sun, 18 Jan 2015 15:24:38 UTC +00:00], ["updated_at", Sun, 18 Jan 2015 15:24:38 UTC +00:00], ["id", 83], ["pay_type", "paypal"]]
I, [2015-01-18T15:24:41.677109 #1336]  INFO -- : @payment save just done
I, [2015-01-18T15:24:41.678141 #1336]  INFO -- : #<Payment:0x007fdd82c00028 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions[0].amount", "issue"=>"Amount cannot be zero"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"046b322326ff1"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd82bf9fc0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd8115c578 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd81156cb8 @error=nil, @total="0", @currency="GBP">, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd828645b8 @error=nil, @return_url="http://localhost:3000/orders/83/confirm", @cancel_url="http://localhost:3000/orders/83/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd80b2d940 @base=#<Payment:0x007fdd82c00028 ...>, @messages={:"transactions[0].amount"=>["Amount cannot be zero"]}>, @request_id="8b500ab6-a0fc-4098-9893-74436a554e9a", @header={}>
I, [2015-01-18T15:24:41.679040 #1336]  INFO -- : #<Payment:0x007fdd82c00028 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions[0].amount", "issue"=>"Amount cannot be zero"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"046b322326ff1"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd82bf9fc0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd8115c578 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd81156cb8 @error=nil, @total="0", @currency="GBP">, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd828645b8 @error=nil, @return_url="http://localhost:3000/orders/83/confirm", @cancel_url="http://localhost:3000/orders/83/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd80b2d940 @base=#<Payment:0x007fdd82c00028 ...>, @messages={:"transactions[0].amount"=>["Amount cannot be zero"]}>, @request_id="8b500ab6-a0fc-4098-9893-74436a554e9a", @header={}>
D, [2015-01-18T15:24:41.687331 #1336] DEBUG -- :   [1m[35m (7.0ms)[0m  commit transaction
D, [2015-01-18T15:24:41.694058 #1336] DEBUG -- :   [1m[36mSQL (2.7ms)[0m  [1mUPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 83[0m
I, [2015-01-18T15:24:41.697262 #1336]  INFO -- : about to approve url
I, [2015-01-18T15:24:41.698257 #1336]  INFO -- : #<Payment:0x007fdd82c00028 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions[0].amount", "issue"=>"Amount cannot be zero"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"046b322326ff1"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd82bf9fc0 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd8115c578 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd81156cb8 @error=nil, @total="0", @currency="GBP">, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd828645b8 @error=nil, @return_url="http://localhost:3000/orders/83/confirm", @cancel_url="http://localhost:3000/orders/83/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd80b2d940 @base=#<Payment:0x007fdd82c00028 ...>, @messages={:"transactions[0].amount"=>["Amount cannot be zero"]}>, @request_id="8b500ab6-a0fc-4098-9893-74436a554e9a", @header={}>
I, [2015-01-18T15:24:41.700615 #1336]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-18T15:24:41.702832 #1336]  INFO -- : Completed 302 Found in 5418ms (ActiveRecord: 16.9ms)
D, [2015-01-18T15:24:41.719657 #1336] DEBUG -- : 
D, [2015-01-18T15:24:41.720148 #1336] DEBUG -- : 
I, [2015-01-18T15:24:41.720776 #1336]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-18 15:24:41 +0000
I, [2015-01-18T15:24:41.744277 #1336]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-18T15:24:41.751473 #1336] DEBUG -- :   [1m[35mCart Load (0.5ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 54]]
D, [2015-01-18T15:24:41.767134 #1336] DEBUG -- :   [1m[36mProduct Load (0.8ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-18T15:24:41.770781 #1336]  INFO -- : Cache digest for store/index.xml: a93d4e2e981ab3dfce98a095c3b6c059
I, [2015-01-18T15:24:41.773891 #1336]  INFO -- : Read fragment views/store/products/2-20141022062504570899000/a93d4e2e981ab3dfce98a095c3b6c059 (1.0ms)
I, [2015-01-18T15:24:41.774842 #1336]  INFO -- :   Rendered store/index.html.erb within layouts/application (15.1ms)
D, [2015-01-18T15:24:41.825405 #1336] DEBUG -- :   [1m[35mLineItem Exists (0.5ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 54]]
D, [2015-01-18T15:24:41.834025 #1336] DEBUG -- :   [1m[36mLineItem Load (0.5ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 54]]
I, [2015-01-18T15:24:41.835572 #1336]  INFO -- :   Rendered collection (0.2ms)
I, [2015-01-18T15:24:41.847647 #1336]  INFO -- :   Rendered carts/_cart.html.erb (18.5ms)
I, [2015-01-18T15:24:41.856765 #1336]  INFO -- : Completed 200 OK in 112ms (Views: 100.5ms | ActiveRecord: 2.2ms)
D, [2015-01-18T15:24:48.579250 #1336] DEBUG -- : 
D, [2015-01-18T15:24:48.579641 #1336] DEBUG -- : 
I, [2015-01-18T15:24:48.581136 #1336]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-18 15:24:48 +0000
I, [2015-01-18T15:24:48.613342 #1336]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-18T15:24:48.613918 #1336]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-18T15:24:48.625869 #1336] DEBUG -- :   [1m[35mCart Load (0.5ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 54]]
D, [2015-01-18T15:24:48.631136 #1336] DEBUG -- :   [1m[36mProduct Load (0.5ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-18T15:24:48.639447 #1336] DEBUG -- :   [1m[35mLineItem Load (0.5ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 54]]
D, [2015-01-18T15:24:48.649185 #1336] DEBUG -- :   [1m[36mProduct Load (0.5ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-18T15:24:48.653009 #1336] DEBUG -- :   [1m[35m (0.4ms)[0m  begin transaction
D, [2015-01-18T15:24:48.663955 #1336] DEBUG -- :   [1m[36mSQL (1.9ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 54], ["created_at", Sun, 18 Jan 2015 15:24:48 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7fdd82e582a8,'0.1299E2',18(36)>], ["size", "extra small"], ["updated_at", Sun, 18 Jan 2015 15:24:48 UTC +00:00]]
D, [2015-01-18T15:24:48.674108 #1336] DEBUG -- :   [1m[35m (7.6ms)[0m  commit transaction
D, [2015-01-18T15:24:48.688074 #1336] DEBUG -- :   [1m[36mLineItem Load (0.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 54]]
I, [2015-01-18T15:24:48.701028 #1336]  INFO -- :   Rendered line_items/_line_item.html.erb (5.0ms)
I, [2015-01-18T15:24:48.714277 #1336]  INFO -- :   Rendered carts/_cart.html.erb (30.6ms)
I, [2015-01-18T15:24:48.715858 #1336]  INFO -- :   Rendered line_items/create.js.erb (34.9ms)
I, [2015-01-18T15:24:48.717367 #1336]  INFO -- : Completed 200 OK in 103ms (Views: 40.3ms | ActiveRecord: 12.6ms)
D, [2015-01-18T15:24:50.850528 #1336] DEBUG -- : 
D, [2015-01-18T15:24:50.859363 #1336] DEBUG -- : 
I, [2015-01-18T15:24:50.860124 #1336]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-18 15:24:50 +0000
I, [2015-01-18T15:24:50.875965 #1336]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-18T15:24:50.883134 #1336] DEBUG -- :   [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
D, [2015-01-18T15:24:50.888464 #1336] DEBUG -- :   [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-18T15:24:50.894240 #1336] DEBUG -- :   [1m[35mCart Load (0.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 54]]
D, [2015-01-18T15:24:50.902588 #1336] DEBUG -- :   [1m[36mLineItem Load (0.5ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 54]]
I, [2015-01-18T15:24:50.910057 #1336]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: "Paypal", payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-18T15:24:54.545391 #1336] DEBUG -- :   [1m[35m (0.6ms)[0m  begin transaction
D, [2015-01-18T15:24:54.556475 #1336] DEBUG -- :   [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "orders" ("created_at", "payment_method", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sun, 18 Jan 2015 15:24:54 UTC +00:00], ["payment_method", "Paypal"], ["updated_at", Sun, 18 Jan 2015 15:24:54 UTC +00:00]]
D, [2015-01-18T15:24:54.572214 #1336] DEBUG -- :   [1m[35mSQL (1.3ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 150  [["cart_id", nil], ["order_id", 84], ["updated_at", Sun, 18 Jan 2015 15:24:54 UTC +00:00]]
I, [2015-01-18T15:24:54.573625 #1336]  INFO -- : about to @payment.create
D, [2015-01-18T15:24:55.247397 #1336] DEBUG -- :   [1m[36mProduct Load (0.7ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-18T15:24:56.040746 #1336]  INFO -- : in order=
I, [2015-01-18T15:24:56.760033 #1336]  INFO -- : in payment.create
I, [2015-01-18T15:24:56.765155 #1336]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"12.99"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/84/confirm", "cancel_url"=>"http://localhost:3000/orders/84/cancel"}}
I, [2015-01-18T15:24:56.766841 #1336]  INFO -- : #<ActiveModel::Errors:0x007fdd84a68100 @base=#<Payment:0x007fdd816631e8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd816626f8 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd84b3b258 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd84b3a998 @error=nil, @total="12.99", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd84b339b8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd84b30808 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd815f5008 @error=nil, @return_url="http://localhost:3000/orders/84/confirm", @cancel_url="http://localhost:3000/orders/84/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd84a68100 ...>>, @messages={}>
I, [2015-01-18T15:24:56.767333 #1336]  INFO -- : got past invalid
I, [2015-01-18T15:24:56.782775 #1336]  INFO -- : PayPal-Request-Id: fb1bb4df-275b-4d57-b0d5-ae0abd40644d
I, [2015-01-18T15:24:56.783420 #1336]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-18T15:24:58.313744 #1336]  INFO -- : Response[201]: Created, Duration: 1.530s
I, [2015-01-18T15:24:58.318510 #1336]  INFO -- : back from super
I, [2015-01-18T15:24:58.325937 #1336]  INFO -- : {"id"=>"PAY-2D509785WC580360HKS55ASI", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"12.99", "details"=>{"subtotal"=>"12.99"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/84/confirm", "cancel_url"=>"http://localhost:3000/orders/84/cancel"}, "create_time"=>"2015-01-18T15:24:57Z", "update_time"=>"2015-01-18T15:24:58Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-2D509785WC580360HKS55ASI", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-62B66817XL333542A", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-2D509785WC580360HKS55ASI/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-18T15:24:58.337593 #1336] DEBUG -- :   [1m[35mSQL (1.6ms)[0m  UPDATE "orders" SET "payment_method" = ?, "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ?, "pay_type" = ? WHERE "orders"."id" = 84  [["payment_method", "Paypal"], ["created_at", Sun, 18 Jan 2015 15:24:54 UTC +00:00], ["updated_at", Sun, 18 Jan 2015 15:24:54 UTC +00:00], ["id", 84], ["payment_id", "PAY-2D509785WC580360HKS55ASI"], ["state", "created"], ["pay_type", "paypal"]]
I, [2015-01-18T15:24:58.339694 #1336]  INFO -- : @payment save just done
I, [2015-01-18T15:24:58.341119 #1336]  INFO -- : #<Payment:0x007fdd816631e8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd8157e2a0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fdd8157d8f0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fdd8157d328 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd8157c798 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd8157c1f8 @error=nil, @total="12.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fdd81577270 @error=nil, @subtotal="12.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd81576488 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd81575740 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd815f5008 @error=nil, @return_url="http://localhost:3000/orders/84/confirm", @cancel_url="http://localhost:3000/orders/84/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd84a68100 @base=#<Payment:0x007fdd816631e8 ...>, @messages={}>, @request_id="fb1bb4df-275b-4d57-b0d5-ae0abd40644d", @header={}, @id="PAY-2D509785WC580360HKS55ASI", @create_time="2015-01-18T15:24:57Z", @update_time="2015-01-18T15:24:58Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fdd8156e260 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-2D509785WC580360HKS55ASI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd8156cc08 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-62B66817XL333542A", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd81567758 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-2D509785WC580360HKS55ASI/execute", @rel="execute", @method="POST">]>
I, [2015-01-18T15:24:58.342492 #1336]  INFO -- : #<Payment:0x007fdd816631e8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd8157e2a0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fdd8157d8f0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fdd8157d328 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd8157c798 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd8157c1f8 @error=nil, @total="12.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fdd81577270 @error=nil, @subtotal="12.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd81576488 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd81575740 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd815f5008 @error=nil, @return_url="http://localhost:3000/orders/84/confirm", @cancel_url="http://localhost:3000/orders/84/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd84a68100 @base=#<Payment:0x007fdd816631e8 ...>, @messages={}>, @request_id="fb1bb4df-275b-4d57-b0d5-ae0abd40644d", @header={}, @id="PAY-2D509785WC580360HKS55ASI", @create_time="2015-01-18T15:24:57Z", @update_time="2015-01-18T15:24:58Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fdd8156e260 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-2D509785WC580360HKS55ASI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd8156cc08 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-62B66817XL333542A", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd81567758 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-2D509785WC580360HKS55ASI/execute", @rel="execute", @method="POST">]>
D, [2015-01-18T15:24:58.398467 #1336] DEBUG -- :   [1m[36m (54.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-18T15:24:58.406233 #1336] DEBUG -- :   [1m[35mSQL (2.9ms)[0m  UPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 84
I, [2015-01-18T15:24:58.407196 #1336]  INFO -- : about to approve url
I, [2015-01-18T15:24:58.408499 #1336]  INFO -- : #<Payment:0x007fdd816631e8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd8157e2a0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fdd8157d8f0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fdd8157d328 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd8157c798 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd8157c1f8 @error=nil, @total="12.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fdd81577270 @error=nil, @subtotal="12.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd81576488 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd81575740 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd815f5008 @error=nil, @return_url="http://localhost:3000/orders/84/confirm", @cancel_url="http://localhost:3000/orders/84/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd84a68100 @base=#<Payment:0x007fdd816631e8 ...>, @messages={}>, @request_id="fb1bb4df-275b-4d57-b0d5-ae0abd40644d", @header={}, @id="PAY-2D509785WC580360HKS55ASI", @create_time="2015-01-18T15:24:57Z", @update_time="2015-01-18T15:24:58Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fdd8156e260 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-2D509785WC580360HKS55ASI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd8156cc08 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-62B66817XL333542A", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd81567758 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-2D509785WC580360HKS55ASI/execute", @rel="execute", @method="POST">]>
I, [2015-01-18T15:24:58.409812 #1336]  INFO -- : #<Payment:0x007fdd816631e8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd8157e2a0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fdd8157d8f0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fdd8157d328 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd8157c798 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd8157c1f8 @error=nil, @total="12.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fdd81577270 @error=nil, @subtotal="12.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd81576488 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd81575740 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd815f5008 @error=nil, @return_url="http://localhost:3000/orders/84/confirm", @cancel_url="http://localhost:3000/orders/84/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd84a68100 @base=#<Payment:0x007fdd816631e8 ...>, @messages={}>, @request_id="fb1bb4df-275b-4d57-b0d5-ae0abd40644d", @header={}, @id="PAY-2D509785WC580360HKS55ASI", @create_time="2015-01-18T15:24:57Z", @update_time="2015-01-18T15:24:58Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fdd8156e260 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-2D509785WC580360HKS55ASI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd8156cc08 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-62B66817XL333542A", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd81567758 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-2D509785WC580360HKS55ASI/execute", @rel="execute", @method="POST">]>
I, [2015-01-18T15:24:58.410408 #1336]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-62B66817XL333542A
I, [2015-01-18T15:24:58.411453 #1336]  INFO -- : #<Payment:0x007fdd816631e8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd8157e2a0 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fdd8157d8f0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fdd8157d328 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd8157c798 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd8157c1f8 @error=nil, @total="12.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fdd81577270 @error=nil, @subtotal="12.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd81576488 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd81575740 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd815f5008 @error=nil, @return_url="http://localhost:3000/orders/84/confirm", @cancel_url="http://localhost:3000/orders/84/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd84a68100 @base=#<Payment:0x007fdd816631e8 ...>, @messages={}>, @request_id="fb1bb4df-275b-4d57-b0d5-ae0abd40644d", @header={}, @id="PAY-2D509785WC580360HKS55ASI", @create_time="2015-01-18T15:24:57Z", @update_time="2015-01-18T15:24:58Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fdd8156e260 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-2D509785WC580360HKS55ASI", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd8156cc08 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-62B66817XL333542A", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd81567758 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-2D509785WC580360HKS55ASI/execute", @rel="execute", @method="POST">]>
I, [2015-01-18T15:24:58.413174 #1336]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-62B66817XL333542A
I, [2015-01-18T15:24:58.415485 #1336]  INFO -- : Completed 403 Forbidden in 7538ms (ActiveRecord: 65.3ms)
D, [2015-01-18T15:25:47.021158 #1336] DEBUG -- : 
D, [2015-01-18T15:25:47.021497 #1336] DEBUG -- : 
I, [2015-01-18T15:25:47.022554 #1336]  INFO -- : Started GET "/orders/84/confirm?paymentId=PAY-2D509785WC580360HKS55ASI&token=EC-62B66817XL333542A&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-18 15:25:47 +0000
I, [2015-01-18T15:25:47.040647 #1336]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-18T15:25:47.041298 #1336]  INFO -- :   Parameters: {"paymentId"=>"PAY-2D509785WC580360HKS55ASI", "token"=>"EC-62B66817XL333542A", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"84"}
D, [2015-01-18T15:25:47.050876 #1336] DEBUG -- :   [1m[36mOrder Load (1.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "84"]]
I, [2015-01-18T15:25:50.505502 #1336]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-2D509785WC580360HKS55ASI
I, [2015-01-18T15:25:52.171767 #1336]  INFO -- : Response[200]: OK, Duration: 1.666s
D, [2015-01-18T15:25:55.328825 #1336] DEBUG -- :   [1m[35m (0.5ms)[0m  begin transaction
D, [2015-01-18T15:25:55.343786 #1336] DEBUG -- :   [1m[36mSQL (1.7ms)[0m  [1mUPDATE "orders" SET "name" = ?, "email" = ?, "address" = ?, "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 84[0m  [["name", "Test Buyer"], ["email", "simon.king65-buyer@gmail.com"], ["address", "1 Main Terrace"], ["shipping_address1", "1 Main Terrace"], ["updated_at", Sun, 18 Jan 2015 15:25:55 UTC +00:00]]
D, [2015-01-18T15:25:55.610922 #1336] DEBUG -- :   [1m[35m (264.8ms)[0m  commit transaction
I, [2015-01-18T15:25:55.787496 #1336]  INFO -- :   Rendered orders/_form.html.erb (106.1ms)
I, [2015-01-18T15:25:55.793729 #1336]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (139.1ms)
I, [2015-01-18T15:25:55.851433 #1336]  INFO -- : Completed 200 OK in 8809ms (Views: 237.9ms | ActiveRecord: 268.1ms)
D, [2015-01-18T15:25:55.967427 #1336] DEBUG -- : 
D, [2015-01-18T15:25:55.968079 #1336] DEBUG -- : 
I, [2015-01-18T15:25:55.969237 #1336]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-18 15:25:55 +0000
D, [2015-01-18T15:25:55.995804 #1336] DEBUG -- : 
D, [2015-01-18T15:25:55.996314 #1336] DEBUG -- : 
I, [2015-01-18T15:25:56.005554 #1336]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-18 15:25:56 +0000
D, [2015-01-18T15:25:56.054772 #1336] DEBUG -- : 
D, [2015-01-18T15:25:56.055357 #1336] DEBUG -- : 
I, [2015-01-18T15:25:56.056569 #1336]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-18 15:25:56 +0000
D, [2015-01-18T15:25:56.088130 #1336] DEBUG -- : 
D, [2015-01-18T15:25:56.088795 #1336] DEBUG -- : 
I, [2015-01-18T15:25:56.089835 #1336]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-18 15:25:56 +0000
D, [2015-01-18T15:25:56.139020 #1336] DEBUG -- : 
D, [2015-01-18T15:25:56.140214 #1336] DEBUG -- : 
I, [2015-01-18T15:25:56.141326 #1336]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-18 15:25:56 +0000
D, [2015-01-18T15:25:56.176729 #1336] DEBUG -- : 
D, [2015-01-18T15:25:56.179018 #1336] DEBUG -- : 
I, [2015-01-18T15:25:56.180658 #1336]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-18 15:25:56 +0000
D, [2015-01-18T15:25:56.205863 #1336] DEBUG -- : 
D, [2015-01-18T15:25:56.206315 #1336] DEBUG -- : 
I, [2015-01-18T15:25:56.207275 #1336]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-18 15:25:56 +0000
D, [2015-01-18T15:25:56.230952 #1336] DEBUG -- : 
D, [2015-01-18T15:25:56.231395 #1336] DEBUG -- : 
I, [2015-01-18T15:25:56.232283 #1336]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-18 15:25:56 +0000
D, [2015-01-18T15:25:56.264780 #1336] DEBUG -- : 
D, [2015-01-18T15:25:56.265238 #1336] DEBUG -- : 
I, [2015-01-18T15:25:56.266201 #1336]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-18 15:25:56 +0000
D, [2015-01-18T15:25:56.286610 #1336] DEBUG -- : 
D, [2015-01-18T15:25:56.287098 #1336] DEBUG -- : 
I, [2015-01-18T15:25:56.288169 #1336]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-18 15:25:56 +0000
D, [2015-01-18T15:25:56.324327 #1336] DEBUG -- : 
D, [2015-01-18T15:25:56.324905 #1336] DEBUG -- : 
I, [2015-01-18T15:25:56.326017 #1336]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-18 15:25:56 +0000
D, [2015-01-18T15:25:56.359713 #1336] DEBUG -- : 
D, [2015-01-18T15:25:56.361148 #1336] DEBUG -- : 
I, [2015-01-18T15:25:56.362826 #1336]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-18 15:25:56 +0000
D, [2015-01-18T15:25:56.397484 #1336] DEBUG -- : 
D, [2015-01-18T15:25:56.397920 #1336] DEBUG -- : 
I, [2015-01-18T15:25:56.399546 #1336]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-18 15:25:56 +0000
D, [2015-01-18T15:25:56.430203 #1336] DEBUG -- : 
D, [2015-01-18T15:25:56.430928 #1336] DEBUG -- : 
I, [2015-01-18T15:25:56.444646 #1336]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-18 15:25:56 +0000
D, [2015-01-18T15:25:56.468204 #1336] DEBUG -- : 
D, [2015-01-18T15:25:56.468675 #1336] DEBUG -- : 
I, [2015-01-18T15:25:56.469647 #1336]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-18 15:25:56 +0000
D, [2015-01-18T15:25:56.498429 #1336] DEBUG -- : 
D, [2015-01-18T15:25:56.501050 #1336] DEBUG -- : 
I, [2015-01-18T15:25:56.509904 #1336]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-18 15:25:56 +0000
D, [2015-01-18T15:25:56.527458 #1336] DEBUG -- : 
D, [2015-01-18T15:25:56.528034 #1336] DEBUG -- : 
I, [2015-01-18T15:25:56.529087 #1336]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-18 15:25:56 +0000
D, [2015-01-18T15:25:56.559551 #1336] DEBUG -- : 
D, [2015-01-18T15:25:56.560048 #1336] DEBUG -- : 
I, [2015-01-18T15:25:56.560955 #1336]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-18 15:25:56 +0000
D, [2015-01-18T15:25:56.608165 #1336] DEBUG -- : 
D, [2015-01-18T15:25:56.608648 #1336] DEBUG -- : 
I, [2015-01-18T15:25:56.609796 #1336]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-18 15:25:56 +0000
D, [2015-01-18T15:25:56.632325 #1336] DEBUG -- : 
D, [2015-01-18T15:25:56.633020 #1336] DEBUG -- : 
I, [2015-01-18T15:25:56.634587 #1336]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-18 15:25:56 +0000
D, [2015-01-18T15:25:56.662731 #1336] DEBUG -- : 
D, [2015-01-18T15:25:56.663328 #1336] DEBUG -- : 
I, [2015-01-18T15:25:56.664338 #1336]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-18 15:25:56 +0000
D, [2015-01-18T15:25:56.691878 #1336] DEBUG -- : 
D, [2015-01-18T15:25:56.692590 #1336] DEBUG -- : 
I, [2015-01-18T15:25:56.693585 #1336]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-18 15:25:56 +0000
D, [2015-01-18T15:25:56.718141 #1336] DEBUG -- : 
D, [2015-01-18T15:25:56.718884 #1336] DEBUG -- : 
I, [2015-01-18T15:25:56.720122 #1336]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-18 15:25:56 +0000
D, [2015-01-18T15:25:56.738164 #1336] DEBUG -- : 
D, [2015-01-18T15:25:56.738744 #1336] DEBUG -- : 
I, [2015-01-18T15:25:56.739884 #1336]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-18 15:25:56 +0000
D, [2015-01-18T15:25:56.761146 #1336] DEBUG -- : 
D, [2015-01-18T15:25:56.761637 #1336] DEBUG -- : 
I, [2015-01-18T15:25:56.762679 #1336]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-18 15:25:56 +0000
D, [2015-01-18T15:25:56.782598 #1336] DEBUG -- : 
D, [2015-01-18T15:25:56.783653 #1336] DEBUG -- : 
I, [2015-01-18T15:25:56.785264 #1336]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-18 15:25:56 +0000
D, [2015-01-18T15:25:56.809119 #1336] DEBUG -- : 
D, [2015-01-18T15:25:56.817270 #1336] DEBUG -- : 
I, [2015-01-18T15:25:56.820187 #1336]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-18 15:25:56 +0000
D, [2015-01-18T15:26:02.126913 #1336] DEBUG -- : 
D, [2015-01-18T15:26:02.128005 #1336] DEBUG -- : 
I, [2015-01-18T15:26:02.129047 #1336]  INFO -- : Started POST "/orders/84/execute/84/2VZ7YQDDDPPC4/PAY-2D509785WC580360HKS55ASI" for 127.0.0.1 at 2015-01-18 15:26:02 +0000
I, [2015-01-18T15:26:02.148699 #1336]  INFO -- : Processing by OrdersController#execute as HTML
I, [2015-01-18T15:26:02.150002 #1336]  INFO -- :   Parameters: {"authenticity_token"=>"ohbtEjIJsyqL+SAcUq0N+GSOROzNN7MrL8IuyZOU47c=", "order_id"=>"84", "payer_id"=>"2VZ7YQDDDPPC4", "payment_id"=>"PAY-2D509785WC580360HKS55ASI"}
D, [2015-01-18T15:26:02.159890 #1336] DEBUG -- :   [1m[36mOrder Load (0.7ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "84"]]
I, [2015-01-18T15:26:10.516861 #1336]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-2D509785WC580360HKS55ASI
I, [2015-01-18T15:26:11.735792 #1336]  INFO -- : Response[200]: OK, Duration: 1.218s
I, [2015-01-18T15:26:11.741627 #1336]  INFO -- : found payment #########
I, [2015-01-18T15:26:11.745532 #1336]  INFO -- : PayPal-Request-Id: b540ca0b-9673-4028-9012-71efb379549f
I, [2015-01-18T15:26:11.746242 #1336]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-2D509785WC580360HKS55ASI/execute
I, [2015-01-18T15:26:14.806331 #1336]  INFO -- : Response[200]: OK, Duration: 3.059s
D, [2015-01-18T15:26:14.816593 #1336] DEBUG -- :   [1m[35m (0.6ms)[0m  begin transaction
D, [2015-01-18T15:26:14.828986 #1336] DEBUG -- :   [1m[36mSQL (1.5ms)[0m  [1mUPDATE "orders" SET "state" = ?, "updated_at" = ? WHERE "orders"."id" = 84[0m  [["state", "approved"], ["updated_at", Sun, 18 Jan 2015 15:26:14 UTC +00:00]]
D, [2015-01-18T15:26:14.837967 #1336] DEBUG -- :   [1m[35m (6.7ms)[0m  commit transaction
D, [2015-01-18T15:26:21.075232 #1336] DEBUG -- :   [1m[36mCart Load (0.7ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 54]]
D, [2015-01-18T15:26:21.078384 #1336] DEBUG -- :   [1m[35m (0.5ms)[0m  begin transaction
D, [2015-01-18T15:26:21.087810 #1336] DEBUG -- :   [1m[36mLineItem Load (0.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 54]]
D, [2015-01-18T15:26:21.093413 #1336] DEBUG -- :   [1m[35mSQL (0.9ms)[0m  DELETE FROM "carts" WHERE "carts"."id" = ?  [["id", 54]]
D, [2015-01-18T15:26:21.375172 #1336] DEBUG -- :   [1m[36m (280.0ms)[0m  [1mcommit transaction[0m
I, [2015-01-18T15:27:12.415458 #1336]  INFO -- : #<Order id: 84, name: "Test Buyer", address: "1 Main Terrace", email: "simon.king65-buyer@gmail.com", pay_type: "paypal", created_at: "2015-01-18 15:24:54", updated_at: "2015-01-18 15:26:14", payment_method: "Paypal", payment_id: "PAY-2D509785WC580360HKS55ASI", state: "approved", amount: nil, description: nil, shipping_address1: "1 Main Terrace">
I, [2015-01-18T15:27:12.633559 #1336]  INFO -- :   Rendered order_notifier/received.html.erb (2.6ms)
D, [2015-01-18T15:27:12.652650 #1336] DEBUG -- :   [1m[35mLineItem Load (1.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 84]]
D, [2015-01-18T15:27:12.681364 #1336] DEBUG -- :   [1m[36mProduct Load (0.7ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-18T15:27:12.685936 #1336]  INFO -- :   Rendered line_items/_line_item.text.erb (14.8ms)
I, [2015-01-18T15:27:12.687250 #1336]  INFO -- :   Rendered order_notifier/received.text.erb (48.2ms)
I, [2015-01-18T15:27:13.788474 #1336]  INFO -- : 
Sent mail to simon.king65-buyer@gmail.com (955.5ms)
D, [2015-01-18T15:27:13.789167 #1336] DEBUG -- : Date: Sun, 18 Jan 2015 15:27:12 +0000
From: Simon King <simon.king65@gmail.com>
To: simon.king65-buyer@gmail.com
Message-ID: <54bbd0d0dccf9_5383feec2649b8c3688@Ben-Kings-MacBook.local.mail>
Subject: King Clothing Order Confirmation
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_54bbd0d0aea68_5383feec2649b8c351";
 charset=UTF-8
Content-Transfer-Encoding: 7bit


----==_mimepart_54bbd0d0aea68_5383feec2649b8c351
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Test Buyer

Thank you for your recent order from King Clothing.

You ordered the following items:

 1 x camo print tee
We'll send you a separate e-mail when your order ships.
----==_mimepart_54bbd0d0aea68_5383feec2649b8c351
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<h1>OrderNotifier#received</h1>

<p>
  , thank you for your order, we will email you again once your order has been despatched. We hope you enjoy wearing your King Clothing brand tee-shirt.
</p>

----==_mimepart_54bbd0d0aea68_5383feec2649b8c351--

I, [2015-01-18T15:27:13.815153 #1336]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-18T15:27:13.868222 #1336]  INFO -- : Completed 302 Found in 71717ms (ActiveRecord: 294.1ms)
D, [2015-01-18T16:05:20.794026 #1336] DEBUG -- : 
D, [2015-01-18T16:05:20.818416 #1336] DEBUG -- : 
I, [2015-01-18T16:05:20.819420 #1336]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-18 16:05:20 +0000
I, [2015-01-18T16:05:21.107902 #1336]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-18T16:05:21.116395 #1336] DEBUG -- :   [1m[35m (0.5ms)[0m  begin transaction
D, [2015-01-18T16:05:21.215959 #1336] DEBUG -- :   [1m[36mSQL (88.2ms)[0m  [1mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Sun, 18 Jan 2015 16:05:21 UTC +00:00], ["updated_at", Sun, 18 Jan 2015 16:05:21 UTC +00:00]]
D, [2015-01-18T16:05:21.234890 #1336] DEBUG -- :   [1m[35m (16.0ms)[0m  commit transaction
D, [2015-01-18T16:05:21.317577 #1336] DEBUG -- :   [1m[36mProduct Load (0.9ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-18T16:05:21.335899 #1336]  INFO -- : Read fragment views/store/products/2-20141022062504570899000/a93d4e2e981ab3dfce98a095c3b6c059 (12.9ms)
I, [2015-01-18T16:05:21.337289 #1336]  INFO -- :   Rendered store/index.html.erb within layouts/application (24.6ms)
D, [2015-01-18T16:05:21.389952 #1336] DEBUG -- :   [1m[35mLineItem Exists (0.6ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 55]]
D, [2015-01-18T16:05:21.423395 #1336] DEBUG -- :   [1m[36mLineItem Load (0.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 55]]
I, [2015-01-18T16:05:21.428421 #1336]  INFO -- :   Rendered collection (0.2ms)
I, [2015-01-18T16:05:21.440247 #1336]  INFO -- :   Rendered carts/_cart.html.erb (21.2ms)
I, [2015-01-18T16:05:21.450375 #1336]  INFO -- : Completed 200 OK in 341ms (Views: 210.5ms | ActiveRecord: 106.8ms)
D, [2015-01-18T16:05:34.880226 #1336] DEBUG -- : 
D, [2015-01-18T16:05:34.880580 #1336] DEBUG -- : 
I, [2015-01-18T16:05:34.881082 #1336]  INFO -- : Started POST "/orders/84/execute/84/2VZ7YQDDDPPC4/PAY-2D509785WC580360HKS55ASI" for 127.0.0.1 at 2015-01-18 16:05:34 +0000
I, [2015-01-18T16:05:34.902004 #1336]  INFO -- : Processing by OrdersController#execute as HTML
I, [2015-01-18T16:05:34.902548 #1336]  INFO -- :   Parameters: {"authenticity_token"=>"ohbtEjIJsyqL+SAcUq0N+GSOROzNN7MrL8IuyZOU47c=", "order_id"=>"84", "payer_id"=>"2VZ7YQDDDPPC4", "payment_id"=>"PAY-2D509785WC580360HKS55ASI"}
D, [2015-01-18T16:05:34.909732 #1336] DEBUG -- :   [1m[35mOrder Load (0.5ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "84"]]
I, [2015-01-18T16:05:46.574005 #1336]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-2D509785WC580360HKS55ASI
I, [2015-01-18T16:05:48.640880 #1336]  INFO -- : Response[200]: OK, Duration: 2.066s
I, [2015-01-18T16:05:48.646247 #1336]  INFO -- : found payment #########
I, [2015-01-18T16:05:48.649020 #1336]  INFO -- : PayPal-Request-Id: 114ad9f2-ac17-40d2-895a-359fc000aafa
I, [2015-01-18T16:05:48.649533 #1336]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-2D509785WC580360HKS55ASI/execute
I, [2015-01-18T16:05:49.615062 #1336]  INFO -- : Response[400]: Bad Request, Duration: 0.965s
I, [2015-01-18T16:06:20.534851 #1336]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-2D509785WC580360HKS55ASI
I, [2015-01-18T16:06:22.127459 #1336]  INFO -- : Response[200]: OK, Duration: 1.592s
I, [2015-01-18T16:06:22.135389 #1336]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-18T16:06:22.136708 #1336]  INFO -- : Completed 302 Found in 47233ms (ActiveRecord: 0.5ms)
D, [2015-01-18T16:06:22.152900 #1336] DEBUG -- : 
D, [2015-01-18T16:06:22.153294 #1336] DEBUG -- : 
I, [2015-01-18T16:06:22.153861 #1336]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-18 16:06:22 +0000
I, [2015-01-18T16:06:22.167168 #1336]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-18T16:06:22.172902 #1336] DEBUG -- :   [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
D, [2015-01-18T16:06:22.179974 #1336] DEBUG -- :   [1m[35mSQL (1.4ms)[0m  INSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Sun, 18 Jan 2015 16:06:22 UTC +00:00], ["updated_at", Sun, 18 Jan 2015 16:06:22 UTC +00:00]]
D, [2015-01-18T16:06:22.301917 #1336] DEBUG -- :   [1m[36m (116.7ms)[0m  [1mcommit transaction[0m
D, [2015-01-18T16:06:22.314729 #1336] DEBUG -- :   [1m[35mProduct Load (0.8ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-18T16:06:22.318827 #1336]  INFO -- : Read fragment views/store/products/2-20141022062504570899000/a93d4e2e981ab3dfce98a095c3b6c059 (1.0ms)
I, [2015-01-18T16:06:22.319729 #1336]  INFO -- :   Rendered store/index.html.erb within layouts/application (9.6ms)
D, [2015-01-18T16:06:22.371470 #1336] DEBUG -- :   [1m[36mLineItem Exists (0.6ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 56]]
D, [2015-01-18T16:06:22.380237 #1336] DEBUG -- :   [1m[35mLineItem Load (0.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 56]]
I, [2015-01-18T16:06:22.382217 #1336]  INFO -- :   Rendered collection (0.3ms)
I, [2015-01-18T16:06:22.394887 #1336]  INFO -- :   Rendered carts/_cart.html.erb (19.1ms)
I, [2015-01-18T16:06:22.403345 #1336]  INFO -- : Completed 200 OK in 235ms (Views: 96.3ms | ActiveRecord: 120.5ms)
D, [2015-01-18T16:06:22.472971 #1336] DEBUG -- : 
D, [2015-01-18T16:06:22.473803 #1336] DEBUG -- : 
I, [2015-01-18T16:06:22.474711 #1336]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-18 16:06:22 +0000
D, [2015-01-18T16:06:22.525065 #1336] DEBUG -- : 
D, [2015-01-18T16:06:22.525643 #1336] DEBUG -- : 
I, [2015-01-18T16:06:22.526681 #1336]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-18 16:06:22 +0000
D, [2015-01-18T16:06:22.551178 #1336] DEBUG -- : 
D, [2015-01-18T16:06:22.560719 #1336] DEBUG -- : 
I, [2015-01-18T16:06:22.564443 #1336]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-18 16:06:22 +0000
D, [2015-01-18T16:06:22.594280 #1336] DEBUG -- : 
D, [2015-01-18T16:06:22.594816 #1336] DEBUG -- : 
I, [2015-01-18T16:06:22.595805 #1336]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-18 16:06:22 +0000
D, [2015-01-18T16:06:22.621418 #1336] DEBUG -- : 
D, [2015-01-18T16:06:22.621923 #1336] DEBUG -- : 
I, [2015-01-18T16:06:22.623078 #1336]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-18 16:06:22 +0000
D, [2015-01-18T16:06:22.644329 #1336] DEBUG -- : 
D, [2015-01-18T16:06:22.644851 #1336] DEBUG -- : 
I, [2015-01-18T16:06:22.645856 #1336]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-18 16:06:22 +0000
D, [2015-01-18T16:06:22.671460 #1336] DEBUG -- : 
D, [2015-01-18T16:06:22.672207 #1336] DEBUG -- : 
I, [2015-01-18T16:06:22.673451 #1336]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-18 16:06:22 +0000
D, [2015-01-18T16:06:22.711601 #1336] DEBUG -- : 
D, [2015-01-18T16:06:22.712127 #1336] DEBUG -- : 
I, [2015-01-18T16:06:22.713154 #1336]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-18 16:06:22 +0000
D, [2015-01-18T16:06:22.732712 #1336] DEBUG -- : 
D, [2015-01-18T16:06:22.741353 #1336] DEBUG -- : 
I, [2015-01-18T16:06:22.742669 #1336]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-18 16:06:22 +0000
D, [2015-01-18T16:06:22.781757 #1336] DEBUG -- : 
D, [2015-01-18T16:06:22.782188 #1336] DEBUG -- : 
I, [2015-01-18T16:06:22.783114 #1336]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-18 16:06:22 +0000
D, [2015-01-18T16:06:22.810083 #1336] DEBUG -- : 
D, [2015-01-18T16:06:22.810516 #1336] DEBUG -- : 
I, [2015-01-18T16:06:22.812044 #1336]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-18 16:06:22 +0000
D, [2015-01-18T16:06:22.841343 #1336] DEBUG -- : 
D, [2015-01-18T16:06:22.842197 #1336] DEBUG -- : 
I, [2015-01-18T16:06:22.843281 #1336]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-18 16:06:22 +0000
D, [2015-01-18T16:06:22.870508 #1336] DEBUG -- : 
D, [2015-01-18T16:06:22.871759 #1336] DEBUG -- : 
I, [2015-01-18T16:06:22.872868 #1336]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-18 16:06:22 +0000
D, [2015-01-18T16:06:22.913396 #1336] DEBUG -- : 
D, [2015-01-18T16:06:22.913992 #1336] DEBUG -- : 
I, [2015-01-18T16:06:22.915241 #1336]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-18 16:06:22 +0000
D, [2015-01-18T16:06:22.939609 #1336] DEBUG -- : 
D, [2015-01-18T16:06:22.940249 #1336] DEBUG -- : 
I, [2015-01-18T16:06:22.941353 #1336]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-18 16:06:22 +0000
D, [2015-01-18T16:06:22.968310 #1336] DEBUG -- : 
D, [2015-01-18T16:06:22.969194 #1336] DEBUG -- : 
I, [2015-01-18T16:06:22.970305 #1336]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-18 16:06:22 +0000
D, [2015-01-18T16:06:23.006917 #1336] DEBUG -- : 
D, [2015-01-18T16:06:23.015171 #1336] DEBUG -- : 
I, [2015-01-18T16:06:23.024018 #1336]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-18 16:06:23 +0000
D, [2015-01-18T16:06:23.041313 #1336] DEBUG -- : 
D, [2015-01-18T16:06:23.041902 #1336] DEBUG -- : 
I, [2015-01-18T16:06:23.042951 #1336]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-18 16:06:23 +0000
D, [2015-01-18T16:06:23.061192 #1336] DEBUG -- : 
D, [2015-01-18T16:06:23.062461 #1336] DEBUG -- : 
I, [2015-01-18T16:06:23.063646 #1336]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-18 16:06:23 +0000
D, [2015-01-18T16:06:23.083211 #1336] DEBUG -- : 
D, [2015-01-18T16:06:23.090759 #1336] DEBUG -- : 
I, [2015-01-18T16:06:23.091971 #1336]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-18 16:06:23 +0000
D, [2015-01-18T16:06:23.132230 #1336] DEBUG -- : 
D, [2015-01-18T16:06:23.132782 #1336] DEBUG -- : 
I, [2015-01-18T16:06:23.133935 #1336]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-18 16:06:23 +0000
D, [2015-01-18T16:06:23.158188 #1336] DEBUG -- : 
D, [2015-01-18T16:06:23.158725 #1336] DEBUG -- : 
I, [2015-01-18T16:06:23.159714 #1336]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-18 16:06:23 +0000
D, [2015-01-18T16:06:23.183221 #1336] DEBUG -- : 
D, [2015-01-18T16:06:23.183726 #1336] DEBUG -- : 
I, [2015-01-18T16:06:23.198007 #1336]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-18 16:06:23 +0000
D, [2015-01-18T16:06:23.214673 #1336] DEBUG -- : 
D, [2015-01-18T16:06:23.215177 #1336] DEBUG -- : 
I, [2015-01-18T16:06:23.216176 #1336]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-18 16:06:23 +0000
D, [2015-01-18T16:06:23.234772 #1336] DEBUG -- : 
D, [2015-01-18T16:06:23.235304 #1336] DEBUG -- : 
I, [2015-01-18T16:06:23.236306 #1336]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-18 16:06:23 +0000
D, [2015-01-18T16:06:23.253493 #1336] DEBUG -- : 
D, [2015-01-18T16:06:23.254560 #1336] DEBUG -- : 
I, [2015-01-18T16:06:23.255360 #1336]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-18 16:06:23 +0000
D, [2015-01-18T16:06:23.277019 #1336] DEBUG -- : 
D, [2015-01-18T16:06:23.286045 #1336] DEBUG -- : 
I, [2015-01-18T16:06:23.287350 #1336]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-18 16:06:23 +0000
D, [2015-01-18T16:06:23.308175 #1336] DEBUG -- : 
D, [2015-01-18T16:06:23.308910 #1336] DEBUG -- : 
I, [2015-01-18T16:06:23.310145 #1336]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-18 16:06:23 +0000
D, [2015-01-18T16:06:23.368042 #1336] DEBUG -- : 
D, [2015-01-18T16:06:23.368796 #1336] DEBUG -- : 
I, [2015-01-18T16:06:23.369697 #1336]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-18 16:06:23 +0000
D, [2015-01-18T16:06:27.391990 #1336] DEBUG -- : 
D, [2015-01-18T16:06:27.392570 #1336] DEBUG -- : 
I, [2015-01-18T16:06:27.393603 #1336]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-18 16:06:27 +0000
I, [2015-01-18T16:06:27.419127 #1336]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-18T16:06:27.419840 #1336]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-18T16:06:27.429633 #1336] DEBUG -- :   [1m[36mCart Load (0.6ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 56]]
D, [2015-01-18T16:06:27.436827 #1336] DEBUG -- :   [1m[35mProduct Load (0.7ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-18T16:06:27.447867 #1336] DEBUG -- :   [1m[36mLineItem Load (0.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 56]]
D, [2015-01-18T16:06:27.460680 #1336] DEBUG -- :   [1m[35mProduct Load (0.7ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-18T16:06:27.465593 #1336] DEBUG -- :   [1m[36m (0.6ms)[0m  [1mbegin transaction[0m
D, [2015-01-18T16:06:27.483711 #1336] DEBUG -- :   [1m[35mSQL (7.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 56], ["created_at", Sun, 18 Jan 2015 16:06:27 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7fdd84b19040,'0.1299E2',18(36)>], ["size", "extra small"], ["updated_at", Sun, 18 Jan 2015 16:06:27 UTC +00:00]]
D, [2015-01-18T16:06:27.495136 #1336] DEBUG -- :   [1m[36m (7.8ms)[0m  [1mcommit transaction[0m
D, [2015-01-18T16:06:27.553020 #1336] DEBUG -- :   [1m[35mLineItem Load (0.7ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 56]]
I, [2015-01-18T16:06:27.590081 #1336]  INFO -- :   Rendered line_items/_line_item.html.erb (8.7ms)
I, [2015-01-18T16:06:27.607307 #1336]  INFO -- :   Rendered carts/_cart.html.erb (59.1ms)
I, [2015-01-18T16:06:27.609472 #1336]  INFO -- :   Rendered line_items/create.js.erb (64.7ms)
I, [2015-01-18T16:06:27.611531 #1336]  INFO -- : Completed 200 OK in 190ms (Views: 112.3ms | ActiveRecord: 18.7ms)
D, [2015-01-18T16:06:28.942826 #1336] DEBUG -- : 
D, [2015-01-18T16:06:28.943712 #1336] DEBUG -- : 
I, [2015-01-18T16:06:28.945150 #1336]  INFO -- : Started POST "/line_items?product_id=2" for 127.0.0.1 at 2015-01-18 16:06:28 +0000
I, [2015-01-18T16:06:28.967384 #1336]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-18T16:06:28.968107 #1336]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"2"}
D, [2015-01-18T16:06:28.979600 #1336] DEBUG -- :   [1m[36mCart Load (0.8ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 56]]
D, [2015-01-18T16:06:28.986581 #1336] DEBUG -- :   [1m[35mProduct Load (0.7ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "2"]]
D, [2015-01-18T16:06:28.997238 #1336] DEBUG -- :   [1m[36mLineItem Load (0.9ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 2 LIMIT 1[0m  [["cart_id", 56]]
D, [2015-01-18T16:06:29.010007 #1336] DEBUG -- :   [1m[35mProduct Load (0.7ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
D, [2015-01-18T16:06:29.014991 #1336] DEBUG -- :   [1m[36m (0.6ms)[0m  [1mbegin transaction[0m
D, [2015-01-18T16:06:29.028762 #1336] DEBUG -- :   [1m[35mSQL (2.3ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 56], ["created_at", Sun, 18 Jan 2015 16:06:29 UTC +00:00], ["product_id", 2], ["productprice", #<BigDecimal:7fdd82f1ea48,'0.1099E2',18(36)>], ["size", "extra small"], ["updated_at", Sun, 18 Jan 2015 16:06:29 UTC +00:00]]
D, [2015-01-18T16:06:29.041607 #1336] DEBUG -- :   [1m[36m (8.6ms)[0m  [1mcommit transaction[0m
D, [2015-01-18T16:06:29.063826 #1336] DEBUG -- :   [1m[35mLineItem Load (0.7ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 56]]
D, [2015-01-18T16:06:29.084365 #1336] DEBUG -- :   [1m[36mProduct Load (0.7ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-18T16:06:29.098689 #1336]  INFO -- :   Rendered line_items/_line_item.html.erb (23.0ms)
I, [2015-01-18T16:06:29.114994 #1336]  INFO -- :   Rendered carts/_cart.html.erb (56.5ms)
I, [2015-01-18T16:06:29.117195 #1336]  INFO -- :   Rendered line_items/create.js.erb (62.1ms)
I, [2015-01-18T16:06:29.119287 #1336]  INFO -- : Completed 200 OK in 150ms (Views: 72.4ms | ActiveRecord: 15.9ms)
D, [2015-01-18T16:06:30.658659 #1336] DEBUG -- : 
D, [2015-01-18T16:06:30.659421 #1336] DEBUG -- : 
I, [2015-01-18T16:06:30.660858 #1336]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-18 16:06:30 +0000
I, [2015-01-18T16:06:30.681320 #1336]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-18T16:06:30.690497 #1336] DEBUG -- :   [1m[35mUser Load (0.8ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
D, [2015-01-18T16:06:30.698879 #1336] DEBUG -- :   [1m[36mUser Load (0.8ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-18T16:06:30.705872 #1336] DEBUG -- :   [1m[35mCart Load (0.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 56]]
D, [2015-01-18T16:06:30.719068 #1336] DEBUG -- :   [1m[36mLineItem Load (0.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 56]]
I, [2015-01-18T16:06:30.730773 #1336]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: "Paypal", payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-18T16:06:45.909808 #1336] DEBUG -- :   [1m[35m (0.7ms)[0m  begin transaction
D, [2015-01-18T16:06:45.921771 #1336] DEBUG -- :   [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO "orders" ("created_at", "payment_method", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sun, 18 Jan 2015 16:06:45 UTC +00:00], ["payment_method", "Paypal"], ["updated_at", Sun, 18 Jan 2015 16:06:45 UTC +00:00]]
D, [2015-01-18T16:06:45.944220 #1336] DEBUG -- :   [1m[35mSQL (8.3ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 151  [["cart_id", nil], ["order_id", 85], ["updated_at", Sun, 18 Jan 2015 16:06:45 UTC +00:00]]
D, [2015-01-18T16:06:45.959023 #1336] DEBUG -- :   [1m[36mSQL (1.4ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 152[0m  [["cart_id", nil], ["order_id", 85], ["updated_at", Sun, 18 Jan 2015 16:06:45 UTC +00:00]]
I, [2015-01-18T16:06:45.960658 #1336]  INFO -- : about to @payment.create
D, [2015-01-18T16:06:46.950583 #1336] DEBUG -- :   [1m[35mProduct Load (0.8ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-18T16:06:46.960731 #1336] DEBUG -- :   [1m[36mProduct Load (0.7ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 2]]
I, [2015-01-18T16:06:48.411742 #1336]  INFO -- : in order=
I, [2015-01-18T16:06:49.402637 #1336]  INFO -- : in payment.create
I, [2015-01-18T16:06:49.410794 #1336]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/85/confirm", "cancel_url"=>"http://localhost:3000/orders/85/cancel"}}
I, [2015-01-18T16:06:49.412779 #1336]  INFO -- : #<ActiveModel::Errors:0x007fdd84cb0958 @base=#<Payment:0x007fdd84be3f70 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd84be3200 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd81673f98 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd81673980 @error=nil, @total="23.98", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd81671310 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd8165df40 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fdd84be93d0 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd84d80608 @error=nil, @return_url="http://localhost:3000/orders/85/confirm", @cancel_url="http://localhost:3000/orders/85/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd84cb0958 ...>>, @messages={}>
I, [2015-01-18T16:06:49.413455 #1336]  INFO -- : got past invalid
I, [2015-01-18T16:06:49.439747 #1336]  INFO -- : PayPal-Request-Id: e3dfddfd-cbac-4ef6-9b4a-d5167c1eac7f
I, [2015-01-18T16:06:49.440726 #1336]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-18T16:06:51.215565 #1336]  INFO -- : Response[201]: Created, Duration: 1.774s
I, [2015-01-18T16:06:51.222049 #1336]  INFO -- : back from super
I, [2015-01-18T16:06:51.231943 #1336]  INFO -- : {"id"=>"PAY-2F745824BH249264GKS55UGQ", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"23.98", "details"=>{"subtotal"=>"23.98"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}, {"quantity"=>"1", "name"=>"est 2014 tee", "price"=>"10.99", "currency"=>"GBP", "sku"=>"est 2014 tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/85/confirm", "cancel_url"=>"http://localhost:3000/orders/85/cancel"}, "create_time"=>"2015-01-18T16:06:50Z", "update_time"=>"2015-01-18T16:06:51Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-2F745824BH249264GKS55UGQ", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7T573697D48327327", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-2F745824BH249264GKS55UGQ/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-18T16:06:51.247581 #1336] DEBUG -- :   [1m[35mSQL (2.5ms)[0m  UPDATE "orders" SET "payment_method" = ?, "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ?, "pay_type" = ? WHERE "orders"."id" = 85  [["payment_method", "Paypal"], ["created_at", Sun, 18 Jan 2015 16:06:45 UTC +00:00], ["updated_at", Sun, 18 Jan 2015 16:06:45 UTC +00:00], ["id", 85], ["payment_id", "PAY-2F745824BH249264GKS55UGQ"], ["state", "created"], ["pay_type", "paypal"]]
I, [2015-01-18T16:06:51.250556 #1336]  INFO -- : @payment save just done
I, [2015-01-18T16:06:51.254639 #1336]  INFO -- : #<Payment:0x007fdd84be3f70 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd84b2b038 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fdd84b2a638 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fdd84b2a160 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd84b29440 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd84b28c98 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fdd84b23db0 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd84b22ff0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd84b224d8 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fdd84b20868 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd84d80608 @error=nil, @return_url="http://localhost:3000/orders/85/confirm", @cancel_url="http://localhost:3000/orders/85/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd84cb0958 @base=#<Payment:0x007fdd84be3f70 ...>, @messages={}>, @request_id="e3dfddfd-cbac-4ef6-9b4a-d5167c1eac7f", @header={}, @id="PAY-2F745824BH249264GKS55UGQ", @create_time="2015-01-18T16:06:50Z", @update_time="2015-01-18T16:06:51Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fdd84b19dd8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-2F745824BH249264GKS55UGQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd84b18bb8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7T573697D48327327", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd84b13708 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-2F745824BH249264GKS55UGQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-18T16:06:51.256642 #1336]  INFO -- : #<Payment:0x007fdd84be3f70 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd84b2b038 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fdd84b2a638 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fdd84b2a160 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd84b29440 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd84b28c98 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fdd84b23db0 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd84b22ff0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd84b224d8 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fdd84b20868 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd84d80608 @error=nil, @return_url="http://localhost:3000/orders/85/confirm", @cancel_url="http://localhost:3000/orders/85/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd84cb0958 @base=#<Payment:0x007fdd84be3f70 ...>, @messages={}>, @request_id="e3dfddfd-cbac-4ef6-9b4a-d5167c1eac7f", @header={}, @id="PAY-2F745824BH249264GKS55UGQ", @create_time="2015-01-18T16:06:50Z", @update_time="2015-01-18T16:06:51Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fdd84b19dd8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-2F745824BH249264GKS55UGQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd84b18bb8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7T573697D48327327", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd84b13708 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-2F745824BH249264GKS55UGQ/execute", @rel="execute", @method="POST">]>
D, [2015-01-18T16:06:51.262781 #1336] DEBUG -- :   [1m[36m (4.3ms)[0m  [1mcommit transaction[0m
D, [2015-01-18T16:06:51.270597 #1336] DEBUG -- :   [1m[35mSQL (2.4ms)[0m  UPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 85
I, [2015-01-18T16:06:51.271787 #1336]  INFO -- : about to approve url
I, [2015-01-18T16:06:51.273126 #1336]  INFO -- : #<Payment:0x007fdd84be3f70 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd84b2b038 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fdd84b2a638 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fdd84b2a160 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd84b29440 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd84b28c98 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fdd84b23db0 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd84b22ff0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd84b224d8 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fdd84b20868 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd84d80608 @error=nil, @return_url="http://localhost:3000/orders/85/confirm", @cancel_url="http://localhost:3000/orders/85/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd84cb0958 @base=#<Payment:0x007fdd84be3f70 ...>, @messages={}>, @request_id="e3dfddfd-cbac-4ef6-9b4a-d5167c1eac7f", @header={}, @id="PAY-2F745824BH249264GKS55UGQ", @create_time="2015-01-18T16:06:50Z", @update_time="2015-01-18T16:06:51Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fdd84b19dd8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-2F745824BH249264GKS55UGQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd84b18bb8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7T573697D48327327", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd84b13708 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-2F745824BH249264GKS55UGQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-18T16:06:51.274851 #1336]  INFO -- : #<Payment:0x007fdd84be3f70 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd84b2b038 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fdd84b2a638 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fdd84b2a160 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd84b29440 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd84b28c98 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fdd84b23db0 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd84b22ff0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd84b224d8 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fdd84b20868 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd84d80608 @error=nil, @return_url="http://localhost:3000/orders/85/confirm", @cancel_url="http://localhost:3000/orders/85/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd84cb0958 @base=#<Payment:0x007fdd84be3f70 ...>, @messages={}>, @request_id="e3dfddfd-cbac-4ef6-9b4a-d5167c1eac7f", @header={}, @id="PAY-2F745824BH249264GKS55UGQ", @create_time="2015-01-18T16:06:50Z", @update_time="2015-01-18T16:06:51Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fdd84b19dd8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-2F745824BH249264GKS55UGQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd84b18bb8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7T573697D48327327", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd84b13708 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-2F745824BH249264GKS55UGQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-18T16:06:51.275583 #1336]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7T573697D48327327
I, [2015-01-18T16:06:51.277034 #1336]  INFO -- : #<Payment:0x007fdd84be3f70 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd84b2b038 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fdd84b2a638 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fdd84b2a160 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd84b29440 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd84b28c98 @error=nil, @total="23.98", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fdd84b23db0 @error=nil, @subtotal="23.98">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd84b22ff0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd84b224d8 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">, #<PayPal::SDK::REST::DataTypes::Item:0x007fdd84b20868 @error=nil, @name="est 2014 tee", @sku="est 2014 tee", @price="10.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd84d80608 @error=nil, @return_url="http://localhost:3000/orders/85/confirm", @cancel_url="http://localhost:3000/orders/85/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd84cb0958 @base=#<Payment:0x007fdd84be3f70 ...>, @messages={}>, @request_id="e3dfddfd-cbac-4ef6-9b4a-d5167c1eac7f", @header={}, @id="PAY-2F745824BH249264GKS55UGQ", @create_time="2015-01-18T16:06:50Z", @update_time="2015-01-18T16:06:51Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fdd84b19dd8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-2F745824BH249264GKS55UGQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd84b18bb8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7T573697D48327327", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd84b13708 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-2F745824BH249264GKS55UGQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-18T16:06:51.279326 #1336]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7T573697D48327327
I, [2015-01-18T16:06:51.282295 #1336]  INFO -- : Completed 403 Forbidden in 20600ms (ActiveRecord: 26.2ms)
D, [2015-01-18T16:07:43.044102 #1336] DEBUG -- : 
D, [2015-01-18T16:07:43.044412 #1336] DEBUG -- : 
I, [2015-01-18T16:07:43.045418 #1336]  INFO -- : Started GET "/orders/85/confirm?paymentId=PAY-2F745824BH249264GKS55UGQ&token=EC-7T573697D48327327&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-18 16:07:43 +0000
I, [2015-01-18T16:07:43.061305 #1336]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-18T16:07:43.061792 #1336]  INFO -- :   Parameters: {"paymentId"=>"PAY-2F745824BH249264GKS55UGQ", "token"=>"EC-7T573697D48327327", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"85"}
D, [2015-01-18T16:07:43.072993 #1336] DEBUG -- :   [1m[36mOrder Load (0.6ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "85"]]
I, [2015-01-18T16:07:53.710968 #1336]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-2F745824BH249264GKS55UGQ
I, [2015-01-18T16:07:55.002387 #1336]  INFO -- : Response[200]: OK, Duration: 1.291s
D, [2015-01-18T16:07:56.396197 #1336] DEBUG -- :   [1m[35m (0.8ms)[0m  begin transaction
D, [2015-01-18T16:07:56.411515 #1336] DEBUG -- :   [1m[36mSQL (1.5ms)[0m  [1mUPDATE "orders" SET "name" = ?, "email" = ?, "address" = ?, "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 85[0m  [["name", "Test Buyer"], ["email", "simon.king65-buyer@gmail.com"], ["address", "1 Main Terrace"], ["shipping_address1", "1 Main Terrace"], ["updated_at", Sun, 18 Jan 2015 16:07:56 UTC +00:00]]
D, [2015-01-18T16:07:56.416146 #1336] DEBUG -- :   [1m[35m (2.4ms)[0m  commit transaction
I, [2015-01-18T16:07:56.554593 #1336]  INFO -- :   Rendered orders/_form.html.erb (44.2ms)
I, [2015-01-18T16:07:56.560444 #1336]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (66.8ms)
I, [2015-01-18T16:07:56.617526 #1336]  INFO -- : Completed 200 OK in 13555ms (Views: 199.1ms | ActiveRecord: 5.3ms)
D, [2015-01-18T16:07:56.706047 #1336] DEBUG -- : 
D, [2015-01-18T16:07:56.744587 #1336] DEBUG -- : 
I, [2015-01-18T16:07:56.746111 #1336]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-18 16:07:56 +0000
D, [2015-01-18T16:07:56.770727 #1336] DEBUG -- : 
D, [2015-01-18T16:07:56.771173 #1336] DEBUG -- : 
I, [2015-01-18T16:07:56.773091 #1336]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-18 16:07:56 +0000
D, [2015-01-18T16:07:56.792250 #1336] DEBUG -- : 
D, [2015-01-18T16:07:56.815298 #1336] DEBUG -- : 
I, [2015-01-18T16:07:56.816257 #1336]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-18 16:07:56 +0000
D, [2015-01-18T16:07:56.842919 #1336] DEBUG -- : 
D, [2015-01-18T16:07:56.843499 #1336] DEBUG -- : 
I, [2015-01-18T16:07:56.844686 #1336]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-18 16:07:56 +0000
D, [2015-01-18T16:07:56.865950 #1336] DEBUG -- : 
D, [2015-01-18T16:07:56.867107 #1336] DEBUG -- : 
I, [2015-01-18T16:07:56.868144 #1336]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-18 16:07:56 +0000
D, [2015-01-18T16:07:56.898177 #1336] DEBUG -- : 
D, [2015-01-18T16:07:56.898695 #1336] DEBUG -- : 
I, [2015-01-18T16:07:56.899634 #1336]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-18 16:07:56 +0000
D, [2015-01-18T16:07:56.926322 #1336] DEBUG -- : 
D, [2015-01-18T16:07:56.926872 #1336] DEBUG -- : 
I, [2015-01-18T16:07:56.927964 #1336]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-18 16:07:56 +0000
D, [2015-01-18T16:07:56.954088 #1336] DEBUG -- : 
D, [2015-01-18T16:07:56.954795 #1336] DEBUG -- : 
I, [2015-01-18T16:07:56.956062 #1336]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-18 16:07:56 +0000
D, [2015-01-18T16:07:56.975188 #1336] DEBUG -- : 
D, [2015-01-18T16:07:56.975886 #1336] DEBUG -- : 
I, [2015-01-18T16:07:56.977012 #1336]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-18 16:07:56 +0000
D, [2015-01-18T16:07:57.016926 #1336] DEBUG -- : 
D, [2015-01-18T16:07:57.017509 #1336] DEBUG -- : 
I, [2015-01-18T16:07:57.018663 #1336]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-18 16:07:57 +0000
D, [2015-01-18T16:07:57.041150 #1336] DEBUG -- : 
D, [2015-01-18T16:07:57.041638 #1336] DEBUG -- : 
I, [2015-01-18T16:07:57.042701 #1336]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-18 16:07:57 +0000
D, [2015-01-18T16:07:57.061498 #1336] DEBUG -- : 
D, [2015-01-18T16:07:57.062082 #1336] DEBUG -- : 
I, [2015-01-18T16:07:57.063124 #1336]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-18 16:07:57 +0000
D, [2015-01-18T16:07:57.109214 #1336] DEBUG -- : 
D, [2015-01-18T16:07:57.110404 #1336] DEBUG -- : 
I, [2015-01-18T16:07:57.111467 #1336]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-18 16:07:57 +0000
D, [2015-01-18T16:07:57.130494 #1336] DEBUG -- : 
D, [2015-01-18T16:07:57.131031 #1336] DEBUG -- : 
I, [2015-01-18T16:07:57.131989 #1336]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-18 16:07:57 +0000
D, [2015-01-18T16:07:57.150766 #1336] DEBUG -- : 
D, [2015-01-18T16:07:57.151360 #1336] DEBUG -- : 
I, [2015-01-18T16:07:57.152601 #1336]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-18 16:07:57 +0000
D, [2015-01-18T16:07:57.186371 #1336] DEBUG -- : 
D, [2015-01-18T16:07:57.186964 #1336] DEBUG -- : 
I, [2015-01-18T16:07:57.187950 #1336]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-18 16:07:57 +0000
D, [2015-01-18T16:07:57.214193 #1336] DEBUG -- : 
D, [2015-01-18T16:07:57.222197 #1336] DEBUG -- : 
I, [2015-01-18T16:07:57.224904 #1336]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-18 16:07:57 +0000
D, [2015-01-18T16:07:57.254091 #1336] DEBUG -- : 
D, [2015-01-18T16:07:57.254637 #1336] DEBUG -- : 
I, [2015-01-18T16:07:57.256204 #1336]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-18 16:07:57 +0000
D, [2015-01-18T16:07:57.288090 #1336] DEBUG -- : 
D, [2015-01-18T16:07:57.288689 #1336] DEBUG -- : 
I, [2015-01-18T16:07:57.289634 #1336]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-18 16:07:57 +0000
D, [2015-01-18T16:07:57.342619 #1336] DEBUG -- : 
D, [2015-01-18T16:07:57.343478 #1336] DEBUG -- : 
I, [2015-01-18T16:07:57.345333 #1336]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-18 16:07:57 +0000
D, [2015-01-18T16:07:57.373116 #1336] DEBUG -- : 
D, [2015-01-18T16:07:57.373847 #1336] DEBUG -- : 
I, [2015-01-18T16:07:57.374760 #1336]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-18 16:07:57 +0000
D, [2015-01-18T16:07:57.395358 #1336] DEBUG -- : 
D, [2015-01-18T16:07:57.396186 #1336] DEBUG -- : 
I, [2015-01-18T16:07:57.397226 #1336]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-18 16:07:57 +0000
D, [2015-01-18T16:07:57.436473 #1336] DEBUG -- : 
D, [2015-01-18T16:07:57.437031 #1336] DEBUG -- : 
I, [2015-01-18T16:07:57.437990 #1336]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-18 16:07:57 +0000
D, [2015-01-18T16:07:57.462074 #1336] DEBUG -- : 
D, [2015-01-18T16:07:57.462663 #1336] DEBUG -- : 
I, [2015-01-18T16:07:57.463740 #1336]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-18 16:07:57 +0000
D, [2015-01-18T16:07:57.485153 #1336] DEBUG -- : 
D, [2015-01-18T16:07:57.486231 #1336] DEBUG -- : 
I, [2015-01-18T16:07:57.487362 #1336]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-18 16:07:57 +0000
D, [2015-01-18T16:07:57.517555 #1336] DEBUG -- : 
D, [2015-01-18T16:07:57.518025 #1336] DEBUG -- : 
I, [2015-01-18T16:07:57.519629 #1336]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-18 16:07:57 +0000
D, [2015-01-18T16:07:57.537233 #1336] DEBUG -- : 
D, [2015-01-18T16:07:57.550807 #1336] DEBUG -- : 
I, [2015-01-18T16:07:57.552893 #1336]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-18 16:07:57 +0000
D, [2015-01-18T16:08:01.478779 #1336] DEBUG -- : 
D, [2015-01-18T16:08:01.479368 #1336] DEBUG -- : 
I, [2015-01-18T16:08:01.480102 #1336]  INFO -- : Started POST "/orders/85/execute/85/2VZ7YQDDDPPC4/PAY-2F745824BH249264GKS55UGQ" for 127.0.0.1 at 2015-01-18 16:08:01 +0000
I, [2015-01-18T16:08:01.505642 #1336]  INFO -- : Processing by OrdersController#execute as HTML
I, [2015-01-18T16:08:01.506375 #1336]  INFO -- :   Parameters: {"authenticity_token"=>"ohbtEjIJsyqL+SAcUq0N+GSOROzNN7MrL8IuyZOU47c=", "order_id"=>"85", "payer_id"=>"2VZ7YQDDDPPC4", "payment_id"=>"PAY-2F745824BH249264GKS55UGQ"}
D, [2015-01-18T16:08:01.516665 #1336] DEBUG -- :   [1m[36mOrder Load (0.6ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "85"]]
I, [2015-01-18T16:08:05.964968 #1336]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-2F745824BH249264GKS55UGQ
I, [2015-01-18T16:08:07.290529 #1336]  INFO -- : Response[200]: OK, Duration: 1.325s
I, [2015-01-18T16:08:07.297425 #1336]  INFO -- : found payment #########
I, [2015-01-18T16:08:07.301434 #1336]  INFO -- : PayPal-Request-Id: c00a797b-1b72-4acf-9a7d-41fb53bc63f4
I, [2015-01-18T16:08:07.302125 #1336]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-2F745824BH249264GKS55UGQ/execute
I, [2015-01-18T16:08:09.537047 #1336]  INFO -- : Response[200]: OK, Duration: 2.234s
D, [2015-01-18T16:08:09.547824 #1336] DEBUG -- :   [1m[35m (0.5ms)[0m  begin transaction
D, [2015-01-18T16:08:09.566448 #1336] DEBUG -- :   [1m[36mSQL (7.3ms)[0m  [1mUPDATE "orders" SET "state" = ?, "updated_at" = ? WHERE "orders"."id" = 85[0m  [["state", "approved"], ["updated_at", Sun, 18 Jan 2015 16:08:09 UTC +00:00]]
D, [2015-01-18T16:08:09.575162 #1336] DEBUG -- :   [1m[35m (6.3ms)[0m  commit transaction
D, [2015-01-18T16:08:13.941093 #1336] DEBUG -- :   [1m[36mCart Load (0.6ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 56]]
D, [2015-01-18T16:08:13.944413 #1336] DEBUG -- :   [1m[35m (0.6ms)[0m  begin transaction
D, [2015-01-18T16:08:13.956294 #1336] DEBUG -- :   [1m[36mLineItem Load (0.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 56]]
D, [2015-01-18T16:08:13.961665 #1336] DEBUG -- :   [1m[35mSQL (0.8ms)[0m  DELETE FROM "carts" WHERE "carts"."id" = ?  [["id", 56]]
D, [2015-01-18T16:08:14.036386 #1336] DEBUG -- :   [1m[36m (72.9ms)[0m  [1mcommit transaction[0m
I, [2015-01-18T16:09:06.265996 #1336]  INFO -- : #<Order id: 85, name: "Test Buyer", address: "1 Main Terrace", email: "simon.king65@gmail.com", pay_type: "paypal", created_at: "2015-01-18 16:06:45", updated_at: "2015-01-18 16:08:09", payment_method: "Paypal", payment_id: "PAY-2F745824BH249264GKS55UGQ", state: "approved", amount: nil, description: nil, shipping_address1: "1 Main Terrace">
I, [2015-01-18T16:09:09.581830 #1336]  INFO -- :   Rendered order_notifier/received.html.erb (0.8ms)
D, [2015-01-18T16:09:09.595779 #1336] DEBUG -- :   [1m[35mLineItem Load (0.9ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 85]]
D, [2015-01-18T16:09:09.620356 #1336] DEBUG -- :   [1m[36mProduct Load (0.8ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-18T16:09:09.632475 #1336] DEBUG -- :   [1m[35mProduct Load (0.7ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 2]]
I, [2015-01-18T16:09:09.635361 #1336]  INFO -- :   Rendered line_items/_line_item.text.erb (24.6ms)
I, [2015-01-18T16:09:09.636512 #1336]  INFO -- :   Rendered order_notifier/received.text.erb (49.5ms)
I, [2015-01-18T16:09:13.952597 #1336]  INFO -- : 
Sent mail to simon.king65@gmail.com (902.9ms)
D, [2015-01-18T16:09:13.953753 #1336] DEBUG -- : Date: Sun, 18 Jan 2015 16:09:13 +0000
From: Simon King <simon.king65@gmail.com>
To: simon.king65@gmail.com
Message-ID: <54bbdaa916ca3_5383feec14dbe7c388d@Ben-Kings-MacBook.local.mail>
Subject: King Clothing Order Confirmation
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_54bbdaa59fb77_5383feec14dbe7c375a";
 charset=UTF-8
Content-Transfer-Encoding: 7bit


----==_mimepart_54bbdaa59fb77_5383feec14dbe7c375a
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Test Buyer

Thank you for your recent order from King Clothing.

You ordered the following items:

 1 x camo print tee 1 x est 2014 tee
We'll send you a separate e-mail when your order ships.
----==_mimepart_54bbdaa59fb77_5383feec14dbe7c375a
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<h1>OrderNotifier#received</h1>

<p>
  , thank you for your order, we will email you again once your order has been despatched. We hope you enjoy wearing your King Clothing brand tee-shirt.
</p>

----==_mimepart_54bbdaa59fb77_5383feec14dbe7c375a--

I, [2015-01-18T16:09:13.958249 #1336]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-18T16:09:13.960286 #1336]  INFO -- : Completed 302 Found in 72453ms (ActiveRecord: 92.7ms)
D, [2015-01-18T16:09:13.985340 #1336] DEBUG -- : 
D, [2015-01-18T16:09:13.986342 #1336] DEBUG -- : 
I, [2015-01-18T16:09:13.987163 #1336]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-18 16:09:13 +0000
I, [2015-01-18T16:09:14.010699 #1336]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-18T16:09:14.021665 #1336] DEBUG -- :   [1m[36m (0.6ms)[0m  [1mbegin transaction[0m
D, [2015-01-18T16:09:14.032656 #1336] DEBUG -- :   [1m[35mSQL (1.9ms)[0m  INSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Sun, 18 Jan 2015 16:09:14 UTC +00:00], ["updated_at", Sun, 18 Jan 2015 16:09:14 UTC +00:00]]
D, [2015-01-18T16:09:14.044147 #1336] DEBUG -- :   [1m[36m (7.4ms)[0m  [1mcommit transaction[0m
D, [2015-01-18T16:09:14.061161 #1336] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-18T16:09:14.071532 #1336]  INFO -- : Read fragment views/store/products/2-20141022062504570899000/a93d4e2e981ab3dfce98a095c3b6c059 (3.0ms)
I, [2015-01-18T16:09:14.072941 #1336]  INFO -- :   Rendered store/index.html.erb within layouts/application (17.1ms)
D, [2015-01-18T16:09:14.149599 #1336] DEBUG -- :   [1m[36mLineItem Exists (0.7ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 57]]
D, [2015-01-18T16:09:14.158813 #1336] DEBUG -- :   [1m[35mLineItem Load (0.7ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 57]]
I, [2015-01-18T16:09:14.161004 #1336]  INFO -- :   Rendered collection (0.3ms)
I, [2015-01-18T16:09:14.178085 #1336]  INFO -- :   Rendered carts/_cart.html.erb (24.3ms)
I, [2015-01-18T16:09:14.190516 #1336]  INFO -- : Completed 200 OK in 179ms (Views: 139.5ms | ActiveRecord: 12.3ms)
D, [2015-01-18T16:09:14.267454 #1336] DEBUG -- : 
D, [2015-01-18T16:09:14.290086 #1336] DEBUG -- : 
I, [2015-01-18T16:09:14.291154 #1336]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-18 16:09:14 +0000
D, [2015-01-18T16:09:14.320897 #1336] DEBUG -- : 
D, [2015-01-18T16:09:14.321482 #1336] DEBUG -- : 
I, [2015-01-18T16:09:14.322576 #1336]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-18 16:09:14 +0000
D, [2015-01-18T16:09:14.341859 #1336] DEBUG -- : 
D, [2015-01-18T16:09:14.343049 #1336] DEBUG -- : 
I, [2015-01-18T16:09:14.369923 #1336]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-18 16:09:14 +0000
D, [2015-01-18T16:09:14.388729 #1336] DEBUG -- : 
D, [2015-01-18T16:09:14.389310 #1336] DEBUG -- : 
I, [2015-01-18T16:09:14.390654 #1336]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-18 16:09:14 +0000
D, [2015-01-18T16:09:14.424954 #1336] DEBUG -- : 
D, [2015-01-18T16:09:14.425576 #1336] DEBUG -- : 
I, [2015-01-18T16:09:14.426633 #1336]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-18 16:09:14 +0000
D, [2015-01-18T16:09:14.460511 #1336] DEBUG -- : 
D, [2015-01-18T16:09:14.460994 #1336] DEBUG -- : 
I, [2015-01-18T16:09:14.462231 #1336]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-18 16:09:14 +0000
D, [2015-01-18T16:09:14.490465 #1336] DEBUG -- : 
D, [2015-01-18T16:09:14.490996 #1336] DEBUG -- : 
I, [2015-01-18T16:09:14.491916 #1336]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-18 16:09:14 +0000
D, [2015-01-18T16:09:14.521227 #1336] DEBUG -- : 
D, [2015-01-18T16:09:14.521901 #1336] DEBUG -- : 
I, [2015-01-18T16:09:14.523119 #1336]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-18 16:09:14 +0000
D, [2015-01-18T16:09:14.546577 #1336] DEBUG -- : 
D, [2015-01-18T16:09:14.547178 #1336] DEBUG -- : 
I, [2015-01-18T16:09:14.548272 #1336]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-18 16:09:14 +0000
D, [2015-01-18T16:09:14.577647 #1336] DEBUG -- : 
D, [2015-01-18T16:09:14.578746 #1336] DEBUG -- : 
I, [2015-01-18T16:09:14.589026 #1336]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-18 16:09:14 +0000
D, [2015-01-18T16:09:14.617987 #1336] DEBUG -- : 
D, [2015-01-18T16:09:14.621823 #1336] DEBUG -- : 
I, [2015-01-18T16:09:14.623068 #1336]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-18 16:09:14 +0000
D, [2015-01-18T16:09:14.651565 #1336] DEBUG -- : 
D, [2015-01-18T16:09:14.660166 #1336] DEBUG -- : 
I, [2015-01-18T16:09:14.661202 #1336]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-18 16:09:14 +0000
D, [2015-01-18T16:09:14.692102 #1336] DEBUG -- : 
D, [2015-01-18T16:09:14.704203 #1336] DEBUG -- : 
I, [2015-01-18T16:09:14.705293 #1336]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-18 16:09:14 +0000
D, [2015-01-18T16:09:14.734938 #1336] DEBUG -- : 
D, [2015-01-18T16:09:14.735951 #1336] DEBUG -- : 
I, [2015-01-18T16:09:14.737323 #1336]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-18 16:09:14 +0000
D, [2015-01-18T16:09:14.776812 #1336] DEBUG -- : 
D, [2015-01-18T16:09:14.777351 #1336] DEBUG -- : 
I, [2015-01-18T16:09:14.778455 #1336]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-18 16:09:14 +0000
D, [2015-01-18T16:09:14.801059 #1336] DEBUG -- : 
D, [2015-01-18T16:09:14.801912 #1336] DEBUG -- : 
I, [2015-01-18T16:09:14.803068 #1336]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-18 16:09:14 +0000
D, [2015-01-18T16:09:14.842298 #1336] DEBUG -- : 
D, [2015-01-18T16:09:14.843232 #1336] DEBUG -- : 
I, [2015-01-18T16:09:14.867493 #1336]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-18 16:09:14 +0000
D, [2015-01-18T16:09:14.890647 #1336] DEBUG -- : 
D, [2015-01-18T16:09:14.891783 #1336] DEBUG -- : 
I, [2015-01-18T16:09:14.892760 #1336]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-18 16:09:14 +0000
D, [2015-01-18T16:09:14.912867 #1336] DEBUG -- : 
D, [2015-01-18T16:09:14.921682 #1336] DEBUG -- : 
I, [2015-01-18T16:09:14.930017 #1336]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-18 16:09:14 +0000
D, [2015-01-18T16:09:14.947238 #1336] DEBUG -- : 
D, [2015-01-18T16:09:14.947984 #1336] DEBUG -- : 
I, [2015-01-18T16:09:14.949119 #1336]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-18 16:09:14 +0000
D, [2015-01-18T16:09:14.983505 #1336] DEBUG -- : 
D, [2015-01-18T16:09:14.984442 #1336] DEBUG -- : 
I, [2015-01-18T16:09:14.985732 #1336]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-18 16:09:14 +0000
D, [2015-01-18T16:09:15.012595 #1336] DEBUG -- : 
D, [2015-01-18T16:09:15.013197 #1336] DEBUG -- : 
I, [2015-01-18T16:09:15.014378 #1336]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-18 16:09:15 +0000
D, [2015-01-18T16:09:15.039666 #1336] DEBUG -- : 
D, [2015-01-18T16:09:15.040432 #1336] DEBUG -- : 
I, [2015-01-18T16:09:15.042243 #1336]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-18 16:09:15 +0000
D, [2015-01-18T16:09:15.077975 #1336] DEBUG -- : 
D, [2015-01-18T16:09:15.078535 #1336] DEBUG -- : 
I, [2015-01-18T16:09:15.080179 #1336]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-18 16:09:15 +0000
D, [2015-01-18T16:09:15.096681 #1336] DEBUG -- : 
D, [2015-01-18T16:09:15.097329 #1336] DEBUG -- : 
I, [2015-01-18T16:09:15.098441 #1336]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-18 16:09:15 +0000
D, [2015-01-18T16:09:15.119662 #1336] DEBUG -- : 
D, [2015-01-18T16:09:15.120254 #1336] DEBUG -- : 
I, [2015-01-18T16:09:15.121330 #1336]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-18 16:09:15 +0000
D, [2015-01-18T16:09:15.153945 #1336] DEBUG -- : 
D, [2015-01-18T16:09:15.164729 #1336] DEBUG -- : 
I, [2015-01-18T16:09:15.165903 #1336]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-18 16:09:15 +0000
D, [2015-01-18T16:09:15.208415 #1336] DEBUG -- : 
D, [2015-01-18T16:09:15.209046 #1336] DEBUG -- : 
I, [2015-01-18T16:09:15.209836 #1336]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-18 16:09:15 +0000
D, [2015-01-18T16:09:15.236720 #1336] DEBUG -- : 
D, [2015-01-18T16:09:15.237255 #1336] DEBUG -- : 
I, [2015-01-18T16:09:15.238058 #1336]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-18 16:09:15 +0000
D, [2015-01-18T16:11:07.280738 #1336] DEBUG -- : 
D, [2015-01-18T16:11:07.309441 #1336] DEBUG -- : 
I, [2015-01-18T16:11:07.310309 #1336]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-18 16:11:07 +0000
I, [2015-01-18T16:11:07.404136 #1336]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-18T16:11:07.404743 #1336]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-18T16:11:07.412305 #1336] DEBUG -- :   [1m[36mCart Load (0.5ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 57]]
D, [2015-01-18T16:11:07.417991 #1336] DEBUG -- :   [1m[35mProduct Load (0.5ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-18T16:11:07.427491 #1336] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 57]]
D, [2015-01-18T16:11:07.439632 #1336] DEBUG -- :   [1m[35mProduct Load (0.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-18T16:11:07.443771 #1336] DEBUG -- :   [1m[36m (0.5ms)[0m  [1mbegin transaction[0m
D, [2015-01-18T16:11:07.528622 #1336] DEBUG -- :   [1m[35mSQL (75.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 57], ["created_at", Sun, 18 Jan 2015 16:11:07 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7fdd82e7ef48,'0.1299E2',18(36)>], ["size", "extra small"], ["updated_at", Sun, 18 Jan 2015 16:11:07 UTC +00:00]]
D, [2015-01-18T16:11:07.535867 #1336] DEBUG -- :   [1m[36m (3.7ms)[0m  [1mcommit transaction[0m
D, [2015-01-18T16:11:07.605118 #1336] DEBUG -- :   [1m[35mLineItem Load (0.7ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 57]]
I, [2015-01-18T16:11:07.631177 #1336]  INFO -- :   Rendered line_items/_line_item.html.erb (7.1ms)
I, [2015-01-18T16:11:07.644992 #1336]  INFO -- :   Rendered carts/_cart.html.erb (44.8ms)
I, [2015-01-18T16:11:07.647058 #1336]  INFO -- :   Rendered line_items/create.js.erb (70.6ms)
I, [2015-01-18T16:11:07.648617 #1336]  INFO -- : Completed 200 OK in 243ms (Views: 108.9ms | ActiveRecord: 82.4ms)
D, [2015-01-18T16:11:10.038797 #1336] DEBUG -- : 
D, [2015-01-18T16:11:10.039188 #1336] DEBUG -- : 
I, [2015-01-18T16:11:10.039852 #1336]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-18 16:11:10 +0000
I, [2015-01-18T16:11:10.056254 #1336]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-18T16:11:10.064470 #1336] DEBUG -- :   [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1[0m
D, [2015-01-18T16:11:10.069616 #1336] DEBUG -- :   [1m[35mUser Load (0.6ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-18T16:11:10.074896 #1336] DEBUG -- :   [1m[36mCart Load (0.6ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 57]]
D, [2015-01-18T16:11:10.084119 #1336] DEBUG -- :   [1m[35mLineItem Load (0.5ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 57]]
I, [2015-01-18T16:11:10.091817 #1336]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: "Paypal", payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-18T16:11:32.889992 #1336] DEBUG -- :   [1m[36m (15.6ms)[0m  [1mbegin transaction[0m
D, [2015-01-18T16:11:32.905826 #1336] DEBUG -- :   [1m[35mSQL (1.8ms)[0m  INSERT INTO "orders" ("created_at", "payment_method", "updated_at") VALUES (?, ?, ?)  [["created_at", Sun, 18 Jan 2015 16:11:32 UTC +00:00], ["payment_method", "Paypal"], ["updated_at", Sun, 18 Jan 2015 16:11:32 UTC +00:00]]
D, [2015-01-18T16:11:32.920750 #1336] DEBUG -- :   [1m[36mSQL (1.4ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 153[0m  [["cart_id", nil], ["order_id", 86], ["updated_at", Sun, 18 Jan 2015 16:11:32 UTC +00:00]]
I, [2015-01-18T16:11:32.922376 #1336]  INFO -- : about to @payment.create
D, [2015-01-18T16:11:33.888557 #1336] DEBUG -- :   [1m[35mProduct Load (0.8ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-18T16:11:34.704300 #1336]  INFO -- : in order=
I, [2015-01-18T16:11:35.511801 #1336]  INFO -- : in payment.create
I, [2015-01-18T16:11:35.517203 #1336]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"12.99"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/86/confirm", "cancel_url"=>"http://localhost:3000/orders/86/cancel"}}
I, [2015-01-18T16:11:35.518629 #1336]  INFO -- : #<ActiveModel::Errors:0x007fdd81663f58 @base=#<Payment:0x007fdd8168a090 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd81689488 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd817e6678 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd817e56b0 @error=nil, @total="12.99", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd84d62c98 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd84d4ae18 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd817be1c8 @error=nil, @return_url="http://localhost:3000/orders/86/confirm", @cancel_url="http://localhost:3000/orders/86/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd81663f58 ...>>, @messages={}>
I, [2015-01-18T16:11:35.519276 #1336]  INFO -- : got past invalid
I, [2015-01-18T16:11:35.536924 #1336]  INFO -- : PayPal-Request-Id: acab44e4-6e16-43b4-bc5b-8024d9b85b00
I, [2015-01-18T16:11:35.537678 #1336]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-18T16:11:37.015694 #1336]  INFO -- : Response[201]: Created, Duration: 1.477s
I, [2015-01-18T16:11:37.021303 #1336]  INFO -- : back from super
I, [2015-01-18T16:11:37.029392 #1336]  INFO -- : {"id"=>"PAY-0WN01467BJ0936822KS55WOA", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"12.99", "details"=>{"subtotal"=>"12.99"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/86/confirm", "cancel_url"=>"http://localhost:3000/orders/86/cancel"}, "create_time"=>"2015-01-18T16:11:36Z", "update_time"=>"2015-01-18T16:11:36Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-0WN01467BJ0936822KS55WOA", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-54N25893SA5538526", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-0WN01467BJ0936822KS55WOA/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-18T16:11:37.043311 #1336] DEBUG -- :   [1m[36mSQL (1.8ms)[0m  [1mUPDATE "orders" SET "payment_method" = ?, "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ?, "pay_type" = ? WHERE "orders"."id" = 86[0m  [["payment_method", "Paypal"], ["created_at", Sun, 18 Jan 2015 16:11:32 UTC +00:00], ["updated_at", Sun, 18 Jan 2015 16:11:32 UTC +00:00], ["id", 86], ["payment_id", "PAY-0WN01467BJ0936822KS55WOA"], ["state", "created"], ["pay_type", "paypal"]]
I, [2015-01-18T16:11:37.045685 #1336]  INFO -- : @payment save just done
I, [2015-01-18T16:11:37.047289 #1336]  INFO -- : #<Payment:0x007fdd8168a090 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd815f49c8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fdd84ae3f08 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fdd84ae3940 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd84ae2dd8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd84ae2798 @error=nil, @total="12.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fdd84ae1848 @error=nil, @subtotal="12.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd84ae08a8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd84adbc68 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd817be1c8 @error=nil, @return_url="http://localhost:3000/orders/86/confirm", @cancel_url="http://localhost:3000/orders/86/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd81663f58 @base=#<Payment:0x007fdd8168a090 ...>, @messages={}>, @request_id="acab44e4-6e16-43b4-bc5b-8024d9b85b00", @header={}, @id="PAY-0WN01467BJ0936822KS55WOA", @create_time="2015-01-18T16:11:36Z", @update_time="2015-01-18T16:11:36Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fdd84ad93f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0WN01467BJ0936822KS55WOA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd815efab8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-54N25893SA5538526", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd815ee168 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0WN01467BJ0936822KS55WOA/execute", @rel="execute", @method="POST">]>
I, [2015-01-18T16:11:37.048730 #1336]  INFO -- : #<Payment:0x007fdd8168a090 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd815f49c8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fdd84ae3f08 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fdd84ae3940 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd84ae2dd8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd84ae2798 @error=nil, @total="12.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fdd84ae1848 @error=nil, @subtotal="12.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd84ae08a8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd84adbc68 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd817be1c8 @error=nil, @return_url="http://localhost:3000/orders/86/confirm", @cancel_url="http://localhost:3000/orders/86/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd81663f58 @base=#<Payment:0x007fdd8168a090 ...>, @messages={}>, @request_id="acab44e4-6e16-43b4-bc5b-8024d9b85b00", @header={}, @id="PAY-0WN01467BJ0936822KS55WOA", @create_time="2015-01-18T16:11:36Z", @update_time="2015-01-18T16:11:36Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fdd84ad93f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0WN01467BJ0936822KS55WOA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd815efab8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-54N25893SA5538526", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd815ee168 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0WN01467BJ0936822KS55WOA/execute", @rel="execute", @method="POST">]>
D, [2015-01-18T16:11:37.058316 #1336] DEBUG -- :   [1m[35m (8.1ms)[0m  commit transaction
D, [2015-01-18T16:11:37.065487 #1336] DEBUG -- :   [1m[36mSQL (2.6ms)[0m  [1mUPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 86[0m
I, [2015-01-18T16:11:37.066303 #1336]  INFO -- : about to approve url
I, [2015-01-18T16:11:37.067718 #1336]  INFO -- : #<Payment:0x007fdd8168a090 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd815f49c8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fdd84ae3f08 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fdd84ae3940 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd84ae2dd8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd84ae2798 @error=nil, @total="12.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fdd84ae1848 @error=nil, @subtotal="12.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd84ae08a8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd84adbc68 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd817be1c8 @error=nil, @return_url="http://localhost:3000/orders/86/confirm", @cancel_url="http://localhost:3000/orders/86/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd81663f58 @base=#<Payment:0x007fdd8168a090 ...>, @messages={}>, @request_id="acab44e4-6e16-43b4-bc5b-8024d9b85b00", @header={}, @id="PAY-0WN01467BJ0936822KS55WOA", @create_time="2015-01-18T16:11:36Z", @update_time="2015-01-18T16:11:36Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fdd84ad93f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0WN01467BJ0936822KS55WOA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd815efab8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-54N25893SA5538526", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd815ee168 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0WN01467BJ0936822KS55WOA/execute", @rel="execute", @method="POST">]>
I, [2015-01-18T16:11:37.069762 #1336]  INFO -- : #<Payment:0x007fdd8168a090 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd815f49c8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fdd84ae3f08 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fdd84ae3940 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd84ae2dd8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd84ae2798 @error=nil, @total="12.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fdd84ae1848 @error=nil, @subtotal="12.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd84ae08a8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd84adbc68 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd817be1c8 @error=nil, @return_url="http://localhost:3000/orders/86/confirm", @cancel_url="http://localhost:3000/orders/86/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd81663f58 @base=#<Payment:0x007fdd8168a090 ...>, @messages={}>, @request_id="acab44e4-6e16-43b4-bc5b-8024d9b85b00", @header={}, @id="PAY-0WN01467BJ0936822KS55WOA", @create_time="2015-01-18T16:11:36Z", @update_time="2015-01-18T16:11:36Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fdd84ad93f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0WN01467BJ0936822KS55WOA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd815efab8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-54N25893SA5538526", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd815ee168 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0WN01467BJ0936822KS55WOA/execute", @rel="execute", @method="POST">]>
I, [2015-01-18T16:11:37.070559 #1336]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-54N25893SA5538526
I, [2015-01-18T16:11:37.072499 #1336]  INFO -- : #<Payment:0x007fdd8168a090 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd815f49c8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fdd84ae3f08 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fdd84ae3940 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd84ae2dd8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd84ae2798 @error=nil, @total="12.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fdd84ae1848 @error=nil, @subtotal="12.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd84ae08a8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd84adbc68 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd817be1c8 @error=nil, @return_url="http://localhost:3000/orders/86/confirm", @cancel_url="http://localhost:3000/orders/86/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd81663f58 @base=#<Payment:0x007fdd8168a090 ...>, @messages={}>, @request_id="acab44e4-6e16-43b4-bc5b-8024d9b85b00", @header={}, @id="PAY-0WN01467BJ0936822KS55WOA", @create_time="2015-01-18T16:11:36Z", @update_time="2015-01-18T16:11:36Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fdd84ad93f0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0WN01467BJ0936822KS55WOA", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd815efab8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-54N25893SA5538526", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd815ee168 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0WN01467BJ0936822KS55WOA/execute", @rel="execute", @method="POST">]>
I, [2015-01-18T16:11:37.075677 #1336]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-54N25893SA5538526
I, [2015-01-18T16:11:37.079477 #1336]  INFO -- : Completed 403 Forbidden in 27022ms (ActiveRecord: 34.3ms)
D, [2015-01-18T16:11:37.089642 #1336] DEBUG -- : 
D, [2015-01-18T16:11:37.090566 #1336] DEBUG -- : 
I, [2015-01-18T16:11:37.091506 #1336]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-18 16:11:37 +0000
I, [2015-01-18T16:11:37.106829 #1336]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-18T16:11:37.114537 #1336] DEBUG -- :   [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
D, [2015-01-18T16:11:37.120162 #1336] DEBUG -- :   [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-18T16:11:37.125834 #1336] DEBUG -- :   [1m[35mCart Load (0.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 57]]
D, [2015-01-18T16:11:37.134966 #1336] DEBUG -- :   [1m[36mLineItem Load (0.5ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 57]]
I, [2015-01-18T16:11:37.139164 #1336]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: "Paypal", payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-18T16:11:40.001993 #1336] DEBUG -- :   [1m[35m (0.5ms)[0m  begin transaction
D, [2015-01-18T16:11:40.012000 #1336] DEBUG -- :   [1m[36mSQL (1.6ms)[0m  [1mINSERT INTO "orders" ("created_at", "payment_method", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sun, 18 Jan 2015 16:11:40 UTC +00:00], ["payment_method", "Paypal"], ["updated_at", Sun, 18 Jan 2015 16:11:40 UTC +00:00]]
I, [2015-01-18T16:11:40.013944 #1336]  INFO -- : about to @payment.create
D, [2015-01-18T16:11:43.048101 #1336] DEBUG -- :   [1m[35mLineItem Load (0.5ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 87]]
I, [2015-01-18T16:11:44.056165 #1336]  INFO -- : in order=
I, [2015-01-18T16:11:44.879326 #1336]  INFO -- : in payment.create
I, [2015-01-18T16:11:44.883148 #1336]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"0"}, "description"=>"King Clothing"}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/87/confirm", "cancel_url"=>"http://localhost:3000/orders/87/cancel"}}
I, [2015-01-18T16:11:44.884560 #1336]  INFO -- : #<ActiveModel::Errors:0x007fdd82daa888 @base=#<Payment:0x007fdd82ee4780 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd82edf668 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd813357f0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd81334e18 @error=nil, @total="0", @currency="GBP">, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd82e31108 @error=nil, @return_url="http://localhost:3000/orders/87/confirm", @cancel_url="http://localhost:3000/orders/87/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd82daa888 ...>>, @messages={}>
I, [2015-01-18T16:11:44.885210 #1336]  INFO -- : got past invalid
I, [2015-01-18T16:11:44.895757 #1336]  INFO -- : PayPal-Request-Id: c06c44e7-c7fe-446b-9d20-950e296fb4b8
I, [2015-01-18T16:11:44.896351 #1336]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-18T16:11:45.914555 #1336]  INFO -- : Response[400]: Bad Request, Duration: 1.017s
I, [2015-01-18T16:11:45.916088 #1336]  INFO -- :  in error=
I, [2015-01-18T16:11:45.917208 #1336]  INFO -- : back from super
I, [2015-01-18T16:11:45.920681 #1336]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"0"}, "description"=>"King Clothing"}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/87/confirm", "cancel_url"=>"http://localhost:3000/orders/87/cancel"}}
D, [2015-01-18T16:11:45.932141 #1336] DEBUG -- :   [1m[36mSQL (1.7ms)[0m  [1mUPDATE "orders" SET "payment_method" = ?, "created_at" = ?, "updated_at" = ?, "id" = ?, "pay_type" = ? WHERE "orders"."id" = 87[0m  [["payment_method", "Paypal"], ["created_at", Sun, 18 Jan 2015 16:11:40 UTC +00:00], ["updated_at", Sun, 18 Jan 2015 16:11:40 UTC +00:00], ["id", 87], ["pay_type", "paypal"]]
I, [2015-01-18T16:11:45.933972 #1336]  INFO -- : @payment save just done
I, [2015-01-18T16:11:45.935042 #1336]  INFO -- : #<Payment:0x007fdd82ee4780 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions[0].amount", "issue"=>"Amount cannot be zero"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"0657511076f44"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd82edf668 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd813357f0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd81334e18 @error=nil, @total="0", @currency="GBP">, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd82e31108 @error=nil, @return_url="http://localhost:3000/orders/87/confirm", @cancel_url="http://localhost:3000/orders/87/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd82daa888 @base=#<Payment:0x007fdd82ee4780 ...>, @messages={:"transactions[0].amount"=>["Amount cannot be zero"]}>, @request_id="c06c44e7-c7fe-446b-9d20-950e296fb4b8", @header={}>
I, [2015-01-18T16:11:45.936041 #1336]  INFO -- : #<Payment:0x007fdd82ee4780 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions[0].amount", "issue"=>"Amount cannot be zero"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"0657511076f44"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd82edf668 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd813357f0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd81334e18 @error=nil, @total="0", @currency="GBP">, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd82e31108 @error=nil, @return_url="http://localhost:3000/orders/87/confirm", @cancel_url="http://localhost:3000/orders/87/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd82daa888 @base=#<Payment:0x007fdd82ee4780 ...>, @messages={:"transactions[0].amount"=>["Amount cannot be zero"]}>, @request_id="c06c44e7-c7fe-446b-9d20-950e296fb4b8", @header={}>
D, [2015-01-18T16:11:45.950556 #1336] DEBUG -- :   [1m[35m (13.0ms)[0m  commit transaction
D, [2015-01-18T16:11:45.959178 #1336] DEBUG -- :   [1m[36mSQL (2.8ms)[0m  [1mUPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 87[0m
I, [2015-01-18T16:11:45.960227 #1336]  INFO -- : about to approve url
I, [2015-01-18T16:11:45.962180 #1336]  INFO -- : #<Payment:0x007fdd82ee4780 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions[0].amount", "issue"=>"Amount cannot be zero"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"0657511076f44"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd82edf668 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd813357f0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd81334e18 @error=nil, @total="0", @currency="GBP">, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd82e31108 @error=nil, @return_url="http://localhost:3000/orders/87/confirm", @cancel_url="http://localhost:3000/orders/87/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd82daa888 @base=#<Payment:0x007fdd82ee4780 ...>, @messages={:"transactions[0].amount"=>["Amount cannot be zero"]}>, @request_id="c06c44e7-c7fe-446b-9d20-950e296fb4b8", @header={}>
I, [2015-01-18T16:11:45.965150 #1336]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-18T16:11:45.967712 #1336]  INFO -- : Completed 302 Found in 8860ms (ActiveRecord: 22.6ms)
D, [2015-01-18T16:11:45.977236 #1336] DEBUG -- : 
D, [2015-01-18T16:11:45.978037 #1336] DEBUG -- : 
I, [2015-01-18T16:11:45.978851 #1336]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-18 16:11:45 +0000
I, [2015-01-18T16:11:45.995866 #1336]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-18T16:11:46.004806 #1336] DEBUG -- :   [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
D, [2015-01-18T16:11:46.017821 #1336] DEBUG -- :   [1m[36mUser Load (0.7ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-18T16:11:46.023743 #1336] DEBUG -- :   [1m[35mCart Load (0.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 57]]
D, [2015-01-18T16:11:46.033180 #1336] DEBUG -- :   [1m[36mLineItem Load (0.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 57]]
I, [2015-01-18T16:11:46.037534 #1336]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: "Paypal", payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-18T16:11:50.191334 #1336] DEBUG -- :   [1m[35m (0.5ms)[0m  begin transaction
D, [2015-01-18T16:11:50.201243 #1336] DEBUG -- :   [1m[36mSQL (1.9ms)[0m  [1mINSERT INTO "orders" ("created_at", "payment_method", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sun, 18 Jan 2015 16:11:50 UTC +00:00], ["payment_method", "Paypal"], ["updated_at", Sun, 18 Jan 2015 16:11:50 UTC +00:00]]
I, [2015-01-18T16:11:50.202798 #1336]  INFO -- : about to @payment.create
D, [2015-01-18T16:11:52.213411 #1336] DEBUG -- :   [1m[35mLineItem Load (0.7ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 88]]
I, [2015-01-18T16:11:53.047554 #1336]  INFO -- : in order=
I, [2015-01-18T16:11:54.575416 #1336]  INFO -- : in payment.create
I, [2015-01-18T16:11:54.579401 #1336]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"0"}, "description"=>"King Clothing"}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/88/confirm", "cancel_url"=>"http://localhost:3000/orders/88/cancel"}}
I, [2015-01-18T16:11:54.580798 #1336]  INFO -- : #<ActiveModel::Errors:0x007fdd84cd0370 @base=#<Payment:0x007fdd817b5870 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd817b4650 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd84bdb7f8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd84bdb050 @error=nil, @total="0", @currency="GBP">, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd84d781d8 @error=nil, @return_url="http://localhost:3000/orders/88/confirm", @cancel_url="http://localhost:3000/orders/88/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd84cd0370 ...>>, @messages={}>
I, [2015-01-18T16:11:54.581495 #1336]  INFO -- : got past invalid
I, [2015-01-18T16:11:54.592553 #1336]  INFO -- : PayPal-Request-Id: 98247222-2a3b-4dff-bd57-d02792270a53
I, [2015-01-18T16:11:54.593270 #1336]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-18T16:11:55.612233 #1336]  INFO -- : Response[400]: Bad Request, Duration: 1.018s
I, [2015-01-18T16:11:55.613807 #1336]  INFO -- :  in error=
I, [2015-01-18T16:11:55.614886 #1336]  INFO -- : back from super
I, [2015-01-18T16:11:55.618727 #1336]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"0"}, "description"=>"King Clothing"}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/88/confirm", "cancel_url"=>"http://localhost:3000/orders/88/cancel"}}
D, [2015-01-18T16:11:55.631924 #1336] DEBUG -- :   [1m[36mSQL (2.2ms)[0m  [1mUPDATE "orders" SET "payment_method" = ?, "created_at" = ?, "updated_at" = ?, "id" = ?, "pay_type" = ? WHERE "orders"."id" = 88[0m  [["payment_method", "Paypal"], ["created_at", Sun, 18 Jan 2015 16:11:50 UTC +00:00], ["updated_at", Sun, 18 Jan 2015 16:11:50 UTC +00:00], ["id", 88], ["pay_type", "paypal"]]
I, [2015-01-18T16:11:55.633817 #1336]  INFO -- : @payment save just done
I, [2015-01-18T16:11:55.634923 #1336]  INFO -- : #<Payment:0x007fdd817b5870 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions[0].amount", "issue"=>"Amount cannot be zero"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"4b1bc47b66ea5"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd817b4650 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd84bdb7f8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd84bdb050 @error=nil, @total="0", @currency="GBP">, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd84d781d8 @error=nil, @return_url="http://localhost:3000/orders/88/confirm", @cancel_url="http://localhost:3000/orders/88/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd84cd0370 @base=#<Payment:0x007fdd817b5870 ...>, @messages={:"transactions[0].amount"=>["Amount cannot be zero"]}>, @request_id="98247222-2a3b-4dff-bd57-d02792270a53", @header={}>
I, [2015-01-18T16:11:55.635988 #1336]  INFO -- : #<Payment:0x007fdd817b5870 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions[0].amount", "issue"=>"Amount cannot be zero"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"4b1bc47b66ea5"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd817b4650 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd84bdb7f8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd84bdb050 @error=nil, @total="0", @currency="GBP">, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd84d781d8 @error=nil, @return_url="http://localhost:3000/orders/88/confirm", @cancel_url="http://localhost:3000/orders/88/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd84cd0370 @base=#<Payment:0x007fdd817b5870 ...>, @messages={:"transactions[0].amount"=>["Amount cannot be zero"]}>, @request_id="98247222-2a3b-4dff-bd57-d02792270a53", @header={}>
D, [2015-01-18T16:11:55.713514 #1336] DEBUG -- :   [1m[35m (75.5ms)[0m  commit transaction
D, [2015-01-18T16:11:55.722777 #1336] DEBUG -- :   [1m[36mSQL (3.2ms)[0m  [1mUPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 88[0m
I, [2015-01-18T16:11:55.723841 #1336]  INFO -- : about to approve url
I, [2015-01-18T16:11:55.725202 #1336]  INFO -- : #<Payment:0x007fdd817b5870 @error={"name"=>"VALIDATION_ERROR", "details"=>[{"field"=>"transactions[0].amount", "issue"=>"Amount cannot be zero"}], "message"=>"Invalid request - see details", "information_link"=>"https://developer.paypal.com/webapps/developer/docs/api/#VALIDATION_ERROR", "debug_id"=>"4b1bc47b66ea5"}, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd817b4650 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd84bdb7f8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd84bdb050 @error=nil, @total="0", @currency="GBP">, @description="King Clothing">], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd84d781d8 @error=nil, @return_url="http://localhost:3000/orders/88/confirm", @cancel_url="http://localhost:3000/orders/88/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd84cd0370 @base=#<Payment:0x007fdd817b5870 ...>, @messages={:"transactions[0].amount"=>["Amount cannot be zero"]}>, @request_id="98247222-2a3b-4dff-bd57-d02792270a53", @header={}>
I, [2015-01-18T16:11:55.728121 #1336]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-18T16:11:55.730750 #1336]  INFO -- : Completed 302 Found in 9734ms (ActiveRecord: 86.7ms)
D, [2015-01-18T16:11:55.739738 #1336] DEBUG -- : 
D, [2015-01-18T16:11:55.740192 #1336] DEBUG -- : 
I, [2015-01-18T16:11:55.740831 #1336]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-18 16:11:55 +0000
I, [2015-01-18T16:11:55.757103 #1336]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-18T16:11:55.765461 #1336] DEBUG -- :   [1m[35mCart Load (0.7ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 57]]
D, [2015-01-18T16:11:55.858003 #1336] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-18T16:11:55.875682 #1336]  INFO -- : Read fragment views/store/products/2-20141022062504570899000/a93d4e2e981ab3dfce98a095c3b6c059 (13.2ms)
I, [2015-01-18T16:11:55.877226 #1336]  INFO -- :   Rendered store/index.html.erb within layouts/application (25.0ms)
D, [2015-01-18T16:11:55.936164 #1336] DEBUG -- :   [1m[35mLineItem Exists (0.6ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 57]]
D, [2015-01-18T16:11:55.944143 #1336] DEBUG -- :   [1m[36mLineItem Load (0.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 57]]
I, [2015-01-18T16:11:55.946026 #1336]  INFO -- :   Rendered collection (0.3ms)
I, [2015-01-18T16:11:55.959549 #1336]  INFO -- :   Rendered carts/_cart.html.erb (19.5ms)
I, [2015-01-18T16:11:55.969064 #1336]  INFO -- : Completed 200 OK in 211ms (Views: 197.0ms | ActiveRecord: 2.9ms)
D, [2015-01-18T16:12:02.619591 #1336] DEBUG -- : 
D, [2015-01-18T16:12:02.621402 #1336] DEBUG -- : 
I, [2015-01-18T16:12:02.622650 #1336]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-18 16:12:02 +0000
I, [2015-01-18T16:12:02.641147 #1336]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-18T16:12:02.641770 #1336]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-18T16:12:02.655293 #1336] DEBUG -- :   [1m[35mCart Load (0.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 57]]
D, [2015-01-18T16:12:02.661014 #1336] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-18T16:12:02.671421 #1336] DEBUG -- :   [1m[35mLineItem Load (0.6ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 57]]
D, [2015-01-18T16:12:02.690331 #1336] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-18T16:12:02.696536 #1336] DEBUG -- :   [1m[35m (0.6ms)[0m  begin transaction
D, [2015-01-18T16:12:02.708606 #1336] DEBUG -- :   [1m[36mSQL (1.9ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 57], ["created_at", Sun, 18 Jan 2015 16:12:02 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7fdd82b38d70,'0.1299E2',18(36)>], ["size", "extra small"], ["updated_at", Sun, 18 Jan 2015 16:12:02 UTC +00:00]]
D, [2015-01-18T16:12:02.718861 #1336] DEBUG -- :   [1m[35m (7.3ms)[0m  commit transaction
D, [2015-01-18T16:12:02.736517 #1336] DEBUG -- :   [1m[36mLineItem Load (0.7ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 57]]
I, [2015-01-18T16:12:02.750980 #1336]  INFO -- :   Rendered line_items/_line_item.html.erb (5.9ms)
I, [2015-01-18T16:12:02.765531 #1336]  INFO -- :   Rendered carts/_cart.html.erb (33.8ms)
I, [2015-01-18T16:12:02.767447 #1336]  INFO -- :   Rendered line_items/create.js.erb (38.8ms)
I, [2015-01-18T16:12:02.769181 #1336]  INFO -- : Completed 200 OK in 121ms (Views: 46.9ms | ActiveRecord: 12.9ms)
D, [2015-01-18T16:12:05.528142 #1336] DEBUG -- : 
D, [2015-01-18T16:12:05.528584 #1336] DEBUG -- : 
I, [2015-01-18T16:12:05.529187 #1336]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-18 16:12:05 +0000
I, [2015-01-18T16:12:05.546444 #1336]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-18T16:12:05.553838 #1336] DEBUG -- :   [1m[35mUser Load (0.7ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
D, [2015-01-18T16:12:05.560365 #1336] DEBUG -- :   [1m[36mUser Load (0.9ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-18T16:12:05.565850 #1336] DEBUG -- :   [1m[35mCart Load (0.5ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 57]]
D, [2015-01-18T16:12:05.574768 #1336] DEBUG -- :   [1m[36mLineItem Load (0.5ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 57]]
I, [2015-01-18T16:12:05.583052 #1336]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: "Paypal", payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-18T16:13:03.320196 #1336] DEBUG -- :   [1m[35m (0.7ms)[0m  begin transaction
D, [2015-01-18T16:13:03.330791 #1336] DEBUG -- :   [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "orders" ("created_at", "payment_method", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sun, 18 Jan 2015 16:13:03 UTC +00:00], ["payment_method", "Paypal"], ["updated_at", Sun, 18 Jan 2015 16:13:03 UTC +00:00]]
D, [2015-01-18T16:13:03.347390 #1336] DEBUG -- :   [1m[35mSQL (1.4ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 154  [["cart_id", nil], ["order_id", 89], ["updated_at", Sun, 18 Jan 2015 16:13:03 UTC +00:00]]
I, [2015-01-18T16:13:03.348844 #1336]  INFO -- : about to @payment.create
D, [2015-01-18T16:13:07.502562 #1336] DEBUG -- :   [1m[36mProduct Load (0.7ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-18T16:13:08.237904 #1336]  INFO -- : in order=
I, [2015-01-18T16:13:09.070393 #1336]  INFO -- : in payment.create
I, [2015-01-18T16:13:09.075999 #1336]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"12.99"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/89/confirm", "cancel_url"=>"http://localhost:3000/orders/89/cancel"}}
I, [2015-01-18T16:13:09.078351 #1336]  INFO -- : #<ActiveModel::Errors:0x007fdd81576c08 @base=#<Payment:0x007fdd815ee028 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd815ed448 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd84a41be0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd84a41578 @error=nil, @total="12.99", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd84a3b038 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd84a32fc8 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd815ae2c0 @error=nil, @return_url="http://localhost:3000/orders/89/confirm", @cancel_url="http://localhost:3000/orders/89/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd81576c08 ...>>, @messages={}>
I, [2015-01-18T16:13:09.079230 #1336]  INFO -- : got past invalid
I, [2015-01-18T16:13:09.096441 #1336]  INFO -- : PayPal-Request-Id: 9e942099-d67a-4c5e-a194-ab4b5c4485c9
I, [2015-01-18T16:13:09.096979 #1336]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-18T16:13:11.022893 #1336]  INFO -- : Response[201]: Created, Duration: 1.925s
I, [2015-01-18T16:13:11.027997 #1336]  INFO -- : back from super
I, [2015-01-18T16:13:11.035577 #1336]  INFO -- : {"id"=>"PAY-1SD77778UA107123GKS55XFQ", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"12.99", "details"=>{"subtotal"=>"12.99"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/89/confirm", "cancel_url"=>"http://localhost:3000/orders/89/cancel"}, "create_time"=>"2015-01-18T16:13:10Z", "update_time"=>"2015-01-18T16:13:10Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-1SD77778UA107123GKS55XFQ", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-9MW65313JY4462126", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-1SD77778UA107123GKS55XFQ/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-18T16:13:11.048409 #1336] DEBUG -- :   [1m[35mSQL (1.8ms)[0m  UPDATE "orders" SET "payment_method" = ?, "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ?, "pay_type" = ? WHERE "orders"."id" = 89  [["payment_method", "Paypal"], ["created_at", Sun, 18 Jan 2015 16:13:03 UTC +00:00], ["updated_at", Sun, 18 Jan 2015 16:13:03 UTC +00:00], ["id", 89], ["payment_id", "PAY-1SD77778UA107123GKS55XFQ"], ["state", "created"], ["pay_type", "paypal"]]
I, [2015-01-18T16:13:11.050776 #1336]  INFO -- : @payment save just done
I, [2015-01-18T16:13:11.051984 #1336]  INFO -- : #<Payment:0x007fdd815ee028 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd814cff98 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fdd814cecb0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fdd814ce5a8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd814cd3d8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd814b76f0 @error=nil, @total="12.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fdd814b5a08 @error=nil, @subtotal="12.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd814b45b8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd84863b20 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd815ae2c0 @error=nil, @return_url="http://localhost:3000/orders/89/confirm", @cancel_url="http://localhost:3000/orders/89/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd81576c08 @base=#<Payment:0x007fdd815ee028 ...>, @messages={}>, @request_id="9e942099-d67a-4c5e-a194-ab4b5c4485c9", @header={}, @id="PAY-1SD77778UA107123GKS55XFQ", @create_time="2015-01-18T16:13:10Z", @update_time="2015-01-18T16:13:10Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fdd8485b178 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-1SD77778UA107123GKS55XFQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd848587e8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-9MW65313JY4462126", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd84851ec0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-1SD77778UA107123GKS55XFQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-18T16:13:11.053208 #1336]  INFO -- : #<Payment:0x007fdd815ee028 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd814cff98 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fdd814cecb0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fdd814ce5a8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd814cd3d8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd814b76f0 @error=nil, @total="12.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fdd814b5a08 @error=nil, @subtotal="12.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd814b45b8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd84863b20 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd815ae2c0 @error=nil, @return_url="http://localhost:3000/orders/89/confirm", @cancel_url="http://localhost:3000/orders/89/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd81576c08 @base=#<Payment:0x007fdd815ee028 ...>, @messages={}>, @request_id="9e942099-d67a-4c5e-a194-ab4b5c4485c9", @header={}, @id="PAY-1SD77778UA107123GKS55XFQ", @create_time="2015-01-18T16:13:10Z", @update_time="2015-01-18T16:13:10Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fdd8485b178 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-1SD77778UA107123GKS55XFQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd848587e8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-9MW65313JY4462126", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd84851ec0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-1SD77778UA107123GKS55XFQ/execute", @rel="execute", @method="POST">]>
D, [2015-01-18T16:13:11.061892 #1336] DEBUG -- :   [1m[36m (7.3ms)[0m  [1mcommit transaction[0m
D, [2015-01-18T16:13:11.069091 #1336] DEBUG -- :   [1m[35mSQL (2.8ms)[0m  UPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 89
I, [2015-01-18T16:13:11.069862 #1336]  INFO -- : about to approve url
I, [2015-01-18T16:13:11.072260 #1336]  INFO -- : #<Payment:0x007fdd815ee028 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd814cff98 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fdd814cecb0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fdd814ce5a8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd814cd3d8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd814b76f0 @error=nil, @total="12.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fdd814b5a08 @error=nil, @subtotal="12.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd814b45b8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd84863b20 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd815ae2c0 @error=nil, @return_url="http://localhost:3000/orders/89/confirm", @cancel_url="http://localhost:3000/orders/89/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd81576c08 @base=#<Payment:0x007fdd815ee028 ...>, @messages={}>, @request_id="9e942099-d67a-4c5e-a194-ab4b5c4485c9", @header={}, @id="PAY-1SD77778UA107123GKS55XFQ", @create_time="2015-01-18T16:13:10Z", @update_time="2015-01-18T16:13:10Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fdd8485b178 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-1SD77778UA107123GKS55XFQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd848587e8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-9MW65313JY4462126", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd84851ec0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-1SD77778UA107123GKS55XFQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-18T16:13:11.074363 #1336]  INFO -- : #<Payment:0x007fdd815ee028 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd814cff98 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fdd814cecb0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fdd814ce5a8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd814cd3d8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd814b76f0 @error=nil, @total="12.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fdd814b5a08 @error=nil, @subtotal="12.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd814b45b8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd84863b20 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd815ae2c0 @error=nil, @return_url="http://localhost:3000/orders/89/confirm", @cancel_url="http://localhost:3000/orders/89/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd81576c08 @base=#<Payment:0x007fdd815ee028 ...>, @messages={}>, @request_id="9e942099-d67a-4c5e-a194-ab4b5c4485c9", @header={}, @id="PAY-1SD77778UA107123GKS55XFQ", @create_time="2015-01-18T16:13:10Z", @update_time="2015-01-18T16:13:10Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fdd8485b178 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-1SD77778UA107123GKS55XFQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd848587e8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-9MW65313JY4462126", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd84851ec0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-1SD77778UA107123GKS55XFQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-18T16:13:11.075168 #1336]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-9MW65313JY4462126
I, [2015-01-18T16:13:11.076742 #1336]  INFO -- : #<Payment:0x007fdd815ee028 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd814cff98 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fdd814cecb0 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fdd814ce5a8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd814cd3d8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd814b76f0 @error=nil, @total="12.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fdd814b5a08 @error=nil, @subtotal="12.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd814b45b8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd84863b20 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd815ae2c0 @error=nil, @return_url="http://localhost:3000/orders/89/confirm", @cancel_url="http://localhost:3000/orders/89/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd81576c08 @base=#<Payment:0x007fdd815ee028 ...>, @messages={}>, @request_id="9e942099-d67a-4c5e-a194-ab4b5c4485c9", @header={}, @id="PAY-1SD77778UA107123GKS55XFQ", @create_time="2015-01-18T16:13:10Z", @update_time="2015-01-18T16:13:10Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fdd8485b178 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-1SD77778UA107123GKS55XFQ", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd848587e8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-9MW65313JY4462126", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd84851ec0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-1SD77778UA107123GKS55XFQ/execute", @rel="execute", @method="POST">]>
I, [2015-01-18T16:13:11.078759 #1336]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-9MW65313JY4462126
I, [2015-01-18T16:13:11.081217 #1336]  INFO -- : Completed 403 Forbidden in 65534ms (ActiveRecord: 19.1ms)
D, [2015-01-18T16:13:41.937050 #1336] DEBUG -- : 
D, [2015-01-18T16:13:41.937455 #1336] DEBUG -- : 
I, [2015-01-18T16:13:41.938498 #1336]  INFO -- : Started GET "/orders/89/confirm?paymentId=PAY-1SD77778UA107123GKS55XFQ&token=EC-9MW65313JY4462126&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-18 16:13:41 +0000
I, [2015-01-18T16:13:41.960265 #1336]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-18T16:13:41.960961 #1336]  INFO -- :   Parameters: {"paymentId"=>"PAY-1SD77778UA107123GKS55XFQ", "token"=>"EC-9MW65313JY4462126", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"89"}
D, [2015-01-18T16:13:41.969662 #1336] DEBUG -- :   [1m[36mOrder Load (0.6ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "89"]]
I, [2015-01-18T16:18:40.358466 #1336]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-1SD77778UA107123GKS55XFQ
I, [2015-01-18T16:18:41.727315 #1336]  INFO -- : Response[200]: OK, Duration: 1.321s
D, [2015-01-18T16:18:45.334279 #1336] DEBUG -- :   [1m[35m (0.5ms)[0m  begin transaction
D, [2015-01-18T16:18:45.893696 #1336] DEBUG -- :   [1m[36mSQL (546.4ms)[0m  [1mUPDATE "orders" SET "name" = ?, "email" = ?, "address" = ?, "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 89[0m  [["name", "Test Buyer"], ["email", "simon.king65-buyer@gmail.com"], ["address", "1 Main Terrace"], ["shipping_address1", "1 Main Terrace"], ["updated_at", Sun, 18 Jan 2015 16:18:45 UTC +00:00]]
D, [2015-01-18T16:18:45.900366 #1336] DEBUG -- :   [1m[35m (3.0ms)[0m  commit transaction
I, [2015-01-18T16:18:46.071483 #1336]  INFO -- :   Rendered orders/_form.html.erb (43.1ms)
I, [2015-01-18T16:18:46.078143 #1336]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (67.0ms)
I, [2015-01-18T16:18:46.144346 #1336]  INFO -- : Completed 200 OK in 304181ms (Views: 240.2ms | ActiveRecord: 550.6ms)
D, [2015-01-18T16:18:46.243449 #1336] DEBUG -- : 
D, [2015-01-18T16:18:46.244168 #1336] DEBUG -- : 
I, [2015-01-18T16:18:46.245503 #1336]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-18 16:18:46 +0000
D, [2015-01-18T16:18:46.613144 #1336] DEBUG -- : 
D, [2015-01-18T16:18:46.628277 #1336] DEBUG -- : 
I, [2015-01-18T16:18:46.630268 #1336]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-18 16:18:46 +0000
D, [2015-01-18T16:18:46.648070 #1336] DEBUG -- : 
D, [2015-01-18T16:18:46.648952 #1336] DEBUG -- : 
I, [2015-01-18T16:18:46.649833 #1336]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-18 16:18:46 +0000
D, [2015-01-18T16:18:46.681312 #1336] DEBUG -- : 
D, [2015-01-18T16:18:46.681995 #1336] DEBUG -- : 
I, [2015-01-18T16:18:46.691960 #1336]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-18 16:18:46 +0000
D, [2015-01-18T16:18:46.720164 #1336] DEBUG -- : 
D, [2015-01-18T16:18:46.720658 #1336] DEBUG -- : 
I, [2015-01-18T16:18:46.721631 #1336]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-18 16:18:46 +0000
D, [2015-01-18T16:18:46.768148 #1336] DEBUG -- : 
D, [2015-01-18T16:18:46.768692 #1336] DEBUG -- : 
I, [2015-01-18T16:18:46.769733 #1336]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-18 16:18:46 +0000
D, [2015-01-18T16:18:46.798418 #1336] DEBUG -- : 
D, [2015-01-18T16:18:46.799055 #1336] DEBUG -- : 
I, [2015-01-18T16:18:46.808487 #1336]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-18 16:18:46 +0000
D, [2015-01-18T16:18:46.826756 #1336] DEBUG -- : 
D, [2015-01-18T16:18:46.835238 #1336] DEBUG -- : 
I, [2015-01-18T16:18:46.836279 #1336]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-18 16:18:46 +0000
D, [2015-01-18T16:18:46.856058 #1336] DEBUG -- : 
D, [2015-01-18T16:18:46.857323 #1336] DEBUG -- : 
I, [2015-01-18T16:18:46.858361 #1336]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-18 16:18:46 +0000
D, [2015-01-18T16:18:46.886145 #1336] DEBUG -- : 
D, [2015-01-18T16:18:46.887216 #1336] DEBUG -- : 
I, [2015-01-18T16:18:46.888451 #1336]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-18 16:18:46 +0000
D, [2015-01-18T16:18:46.912378 #1336] DEBUG -- : 
D, [2015-01-18T16:18:46.913381 #1336] DEBUG -- : 
I, [2015-01-18T16:18:46.914873 #1336]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-18 16:18:46 +0000
D, [2015-01-18T16:18:46.952027 #1336] DEBUG -- : 
D, [2015-01-18T16:18:46.955928 #1336] DEBUG -- : 
I, [2015-01-18T16:18:46.962211 #1336]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-18 16:18:46 +0000
D, [2015-01-18T16:18:46.999493 #1336] DEBUG -- : 
D, [2015-01-18T16:18:47.000235 #1336] DEBUG -- : 
I, [2015-01-18T16:18:47.009428 #1336]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-18 16:18:47 +0000
D, [2015-01-18T16:18:47.033540 #1336] DEBUG -- : 
D, [2015-01-18T16:18:47.034619 #1336] DEBUG -- : 
I, [2015-01-18T16:18:47.035554 #1336]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-18 16:18:47 +0000
D, [2015-01-18T16:18:47.085071 #1336] DEBUG -- : 
D, [2015-01-18T16:18:47.085610 #1336] DEBUG -- : 
I, [2015-01-18T16:18:47.086599 #1336]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-18 16:18:47 +0000
D, [2015-01-18T16:18:47.109515 #1336] DEBUG -- : 
D, [2015-01-18T16:18:47.110358 #1336] DEBUG -- : 
I, [2015-01-18T16:18:47.111823 #1336]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-18 16:18:47 +0000
D, [2015-01-18T16:18:47.161644 #1336] DEBUG -- : 
D, [2015-01-18T16:18:47.162872 #1336] DEBUG -- : 
I, [2015-01-18T16:18:47.163961 #1336]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-18 16:18:47 +0000
D, [2015-01-18T16:18:47.195109 #1336] DEBUG -- : 
D, [2015-01-18T16:18:47.195563 #1336] DEBUG -- : 
I, [2015-01-18T16:18:47.196724 #1336]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-18 16:18:47 +0000
D, [2015-01-18T16:18:47.221765 #1336] DEBUG -- : 
D, [2015-01-18T16:18:47.223292 #1336] DEBUG -- : 
I, [2015-01-18T16:18:47.224637 #1336]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-18 16:18:47 +0000
D, [2015-01-18T16:18:47.245205 #1336] DEBUG -- : 
D, [2015-01-18T16:18:47.246187 #1336] DEBUG -- : 
I, [2015-01-18T16:18:47.247435 #1336]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-18 16:18:47 +0000
D, [2015-01-18T16:18:47.275792 #1336] DEBUG -- : 
D, [2015-01-18T16:18:47.277063 #1336] DEBUG -- : 
I, [2015-01-18T16:18:47.278390 #1336]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-18 16:18:47 +0000
D, [2015-01-18T16:18:47.304009 #1336] DEBUG -- : 
D, [2015-01-18T16:18:47.305082 #1336] DEBUG -- : 
I, [2015-01-18T16:18:47.306807 #1336]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-18 16:18:47 +0000
D, [2015-01-18T16:18:47.342713 #1336] DEBUG -- : 
D, [2015-01-18T16:18:47.343255 #1336] DEBUG -- : 
I, [2015-01-18T16:18:47.344261 #1336]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-18 16:18:47 +0000
D, [2015-01-18T16:18:47.361733 #1336] DEBUG -- : 
D, [2015-01-18T16:18:47.363083 #1336] DEBUG -- : 
I, [2015-01-18T16:18:47.364081 #1336]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-18 16:18:47 +0000
D, [2015-01-18T16:18:47.384085 #1336] DEBUG -- : 
D, [2015-01-18T16:18:47.385878 #1336] DEBUG -- : 
I, [2015-01-18T16:18:47.387077 #1336]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-18 16:18:47 +0000
D, [2015-01-18T16:18:47.404307 #1336] DEBUG -- : 
D, [2015-01-18T16:18:47.405019 #1336] DEBUG -- : 
I, [2015-01-18T16:18:47.405789 #1336]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-18 16:18:47 +0000
D, [2015-01-18T16:18:47.426245 #1336] DEBUG -- : 
D, [2015-01-18T16:18:47.427104 #1336] DEBUG -- : 
I, [2015-01-18T16:18:47.428128 #1336]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-18 16:18:47 +0000
D, [2015-01-18T16:18:50.958807 #1336] DEBUG -- : 
D, [2015-01-18T16:18:50.959461 #1336] DEBUG -- : 
I, [2015-01-18T16:18:50.961079 #1336]  INFO -- : Started POST "/orders/89/execute/89/2VZ7YQDDDPPC4/PAY-1SD77778UA107123GKS55XFQ" for 127.0.0.1 at 2015-01-18 16:18:50 +0000
I, [2015-01-18T16:18:50.982006 #1336]  INFO -- : Processing by OrdersController#execute as HTML
I, [2015-01-18T16:18:50.982936 #1336]  INFO -- :   Parameters: {"authenticity_token"=>"ohbtEjIJsyqL+SAcUq0N+GSOROzNN7MrL8IuyZOU47c=", "order_id"=>"89", "payer_id"=>"2VZ7YQDDDPPC4", "payment_id"=>"PAY-1SD77778UA107123GKS55XFQ"}
D, [2015-01-18T16:18:50.999030 #1336] DEBUG -- :   [1m[36mOrder Load (0.8ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "89"]]
I, [2015-01-18T16:18:56.316513 #1336]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-1SD77778UA107123GKS55XFQ
I, [2015-01-18T16:18:57.452901 #1336]  INFO -- : Response[200]: OK, Duration: 1.135s
I, [2015-01-18T16:18:57.458805 #1336]  INFO -- : found payment #########
I, [2015-01-18T16:18:57.462981 #1336]  INFO -- : PayPal-Request-Id: bdf3549f-dbd8-4a4a-b45a-748ba13be643
I, [2015-01-18T16:18:57.463705 #1336]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-1SD77778UA107123GKS55XFQ/execute
I, [2015-01-18T16:18:59.700372 #1336]  INFO -- : Response[200]: OK, Duration: 2.236s
D, [2015-01-18T16:18:59.710345 #1336] DEBUG -- :   [1m[35m (0.6ms)[0m  begin transaction
D, [2015-01-18T16:18:59.722421 #1336] DEBUG -- :   [1m[36mSQL (1.6ms)[0m  [1mUPDATE "orders" SET "state" = ?, "updated_at" = ? WHERE "orders"."id" = 89[0m  [["state", "approved"], ["updated_at", Sun, 18 Jan 2015 16:18:59 UTC +00:00]]
D, [2015-01-18T16:18:59.727325 #1336] DEBUG -- :   [1m[35m (2.8ms)[0m  commit transaction
D, [2015-01-18T16:19:01.456526 #1336] DEBUG -- :   [1m[36mCart Load (0.8ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 57]]
D, [2015-01-18T16:19:01.459861 #1336] DEBUG -- :   [1m[35m (0.5ms)[0m  begin transaction
D, [2015-01-18T16:19:01.470810 #1336] DEBUG -- :   [1m[36mLineItem Load (0.7ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 57]]
D, [2015-01-18T16:19:01.476232 #1336] DEBUG -- :   [1m[35mSQL (0.8ms)[0m  DELETE FROM "carts" WHERE "carts"."id" = ?  [["id", 57]]
D, [2015-01-18T16:19:01.480069 #1336] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mcommit transaction[0m
I, [2015-01-18T16:19:13.509123 #1336]  INFO -- : #<Order id: 89, name: "Test Buyer", address: "1 Main Terrace", email: "simon.king65-buyer@gmail.com", pay_type: "paypal", created_at: "2015-01-18 16:13:03", updated_at: "2015-01-18 16:18:59", payment_method: "Paypal", payment_id: "PAY-1SD77778UA107123GKS55XFQ", state: "approved", amount: nil, description: nil, shipping_address1: "1 Main Terrace">
I, [2015-01-18T16:19:17.006279 #1336]  INFO -- :   Rendered order_notifier/received.html.erb (0.8ms)
D, [2015-01-18T16:19:17.020166 #1336] DEBUG -- :   [1m[35mLineItem Load (0.7ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 89]]
D, [2015-01-18T16:19:17.057658 #1336] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-18T16:19:17.061135 #1336]  INFO -- :   Rendered line_items/_line_item.text.erb (15.2ms)
I, [2015-01-18T16:19:17.062302 #1336]  INFO -- :   Rendered order_notifier/received.text.erb (50.7ms)
I, [2015-01-18T16:19:21.357370 #1336]  INFO -- : 
Sent mail to simon.king65-buyer@gmail.com (819.1ms)
D, [2015-01-18T16:19:21.358992 #1336] DEBUG -- : Date: Sun, 18 Jan 2015 16:19:20 +0000
From: Simon King <simon.king65@gmail.com>
To: simon.king65-buyer@gmail.com
Message-ID: <54bbdd088e7bb_5383feec26c11b4409a@Ben-Kings-MacBook.local.mail>
Subject: King Clothing Order Confirmation
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_54bbdd0516798_5383feec26c11b439b2";
 charset=UTF-8
Content-Transfer-Encoding: 7bit


----==_mimepart_54bbdd0516798_5383feec26c11b439b2
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Test Buyer

Thank you for your recent order from King Clothing.

You ordered the following items:

 1 x camo print tee
We'll send you a separate e-mail when your order ships.
----==_mimepart_54bbdd0516798_5383feec26c11b439b2
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<h1>OrderNotifier#received</h1>

<p>
  , thank you for your order, we will email you again once your order has been despatched. We hope you enjoy wearing your King Clothing brand tee-shirt.
</p>

----==_mimepart_54bbdd0516798_5383feec26c11b439b2--

I, [2015-01-18T16:19:21.362893 #1336]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-18T16:19:21.364697 #1336]  INFO -- : Completed 302 Found in 30380ms (ActiveRecord: 12.2ms)
D, [2015-01-18T16:19:21.386323 #1336] DEBUG -- : 
D, [2015-01-18T16:19:21.386847 #1336] DEBUG -- : 
I, [2015-01-18T16:19:21.387732 #1336]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-18 16:19:21 +0000
I, [2015-01-18T16:19:21.405250 #1336]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-18T16:19:21.412999 #1336] DEBUG -- :   [1m[35m (0.6ms)[0m  begin transaction
D, [2015-01-18T16:19:21.424186 #1336] DEBUG -- :   [1m[36mSQL (2.3ms)[0m  [1mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Sun, 18 Jan 2015 16:19:21 UTC +00:00], ["updated_at", Sun, 18 Jan 2015 16:19:21 UTC +00:00]]
D, [2015-01-18T16:19:21.432017 #1336] DEBUG -- :   [1m[35m (3.2ms)[0m  commit transaction
D, [2015-01-18T16:19:21.496585 #1336] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-18T16:19:21.526474 #1336]  INFO -- : Read fragment views/store/products/2-20141022062504570899000/a93d4e2e981ab3dfce98a095c3b6c059 (24.4ms)
I, [2015-01-18T16:19:21.528201 #1336]  INFO -- :   Rendered store/index.html.erb within layouts/application (38.5ms)
D, [2015-01-18T16:19:21.609788 #1336] DEBUG -- :   [1m[35mLineItem Exists (0.6ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 58]]
D, [2015-01-18T16:19:21.636688 #1336] DEBUG -- :   [1m[36mLineItem Load (0.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 58]]
I, [2015-01-18T16:19:21.638996 #1336]  INFO -- :   Rendered collection (0.4ms)
I, [2015-01-18T16:19:21.656687 #1336]  INFO -- :   Rendered carts/_cart.html.erb (24.8ms)
I, [2015-01-18T16:19:21.669101 #1336]  INFO -- : Completed 200 OK in 262ms (Views: 230.4ms | ActiveRecord: 8.3ms)
D, [2015-01-18T16:19:21.744527 #1336] DEBUG -- : 
D, [2015-01-18T16:19:21.745679 #1336] DEBUG -- : 
I, [2015-01-18T16:19:21.746920 #1336]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-18 16:19:21 +0000
D, [2015-01-18T16:19:21.777480 #1336] DEBUG -- : 
D, [2015-01-18T16:19:21.778185 #1336] DEBUG -- : 
I, [2015-01-18T16:19:21.779170 #1336]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-18 16:19:21 +0000
D, [2015-01-18T16:19:21.819748 #1336] DEBUG -- : 
D, [2015-01-18T16:19:21.820201 #1336] DEBUG -- : 
I, [2015-01-18T16:19:21.821436 #1336]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-18 16:19:21 +0000
D, [2015-01-18T16:19:21.850576 #1336] DEBUG -- : 
D, [2015-01-18T16:19:21.851101 #1336] DEBUG -- : 
I, [2015-01-18T16:19:21.852123 #1336]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-18 16:19:21 +0000
D, [2015-01-18T16:19:21.888263 #1336] DEBUG -- : 
D, [2015-01-18T16:19:21.889472 #1336] DEBUG -- : 
I, [2015-01-18T16:19:21.893816 #1336]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-18 16:19:21 +0000
D, [2015-01-18T16:19:21.930697 #1336] DEBUG -- : 
D, [2015-01-18T16:19:21.931215 #1336] DEBUG -- : 
I, [2015-01-18T16:19:21.932375 #1336]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-18 16:19:21 +0000
D, [2015-01-18T16:19:21.958310 #1336] DEBUG -- : 
D, [2015-01-18T16:19:21.958901 #1336] DEBUG -- : 
I, [2015-01-18T16:19:21.960093 #1336]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-18 16:19:21 +0000
D, [2015-01-18T16:19:21.983563 #1336] DEBUG -- : 
D, [2015-01-18T16:19:21.983998 #1336] DEBUG -- : 
I, [2015-01-18T16:19:21.984977 #1336]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-18 16:19:21 +0000
D, [2015-01-18T16:19:22.013574 #1336] DEBUG -- : 
D, [2015-01-18T16:19:22.019505 #1336] DEBUG -- : 
I, [2015-01-18T16:19:22.020730 #1336]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-18 16:19:22 +0000
D, [2015-01-18T16:19:22.043639 #1336] DEBUG -- : 
D, [2015-01-18T16:19:22.045237 #1336] DEBUG -- : 
I, [2015-01-18T16:19:22.052166 #1336]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-18 16:19:22 +0000
D, [2015-01-18T16:19:22.073850 #1336] DEBUG -- : 
D, [2015-01-18T16:19:22.074899 #1336] DEBUG -- : 
I, [2015-01-18T16:19:22.076520 #1336]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-18 16:19:22 +0000
D, [2015-01-18T16:19:22.109572 #1336] DEBUG -- : 
D, [2015-01-18T16:19:22.110154 #1336] DEBUG -- : 
I, [2015-01-18T16:19:22.111115 #1336]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-18 16:19:22 +0000
D, [2015-01-18T16:19:22.147222 #1336] DEBUG -- : 
D, [2015-01-18T16:19:22.147847 #1336] DEBUG -- : 
I, [2015-01-18T16:19:22.159331 #1336]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-18 16:19:22 +0000
D, [2015-01-18T16:19:22.181116 #1336] DEBUG -- : 
D, [2015-01-18T16:19:22.181814 #1336] DEBUG -- : 
I, [2015-01-18T16:19:22.182804 #1336]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-18 16:19:22 +0000
D, [2015-01-18T16:19:22.218052 #1336] DEBUG -- : 
D, [2015-01-18T16:19:22.222723 #1336] DEBUG -- : 
I, [2015-01-18T16:19:22.224298 #1336]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-18 16:19:22 +0000
D, [2015-01-18T16:19:22.249633 #1336] DEBUG -- : 
D, [2015-01-18T16:19:22.250144 #1336] DEBUG -- : 
I, [2015-01-18T16:19:22.251240 #1336]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-18 16:19:22 +0000
D, [2015-01-18T16:19:22.289050 #1336] DEBUG -- : 
D, [2015-01-18T16:19:22.299583 #1336] DEBUG -- : 
I, [2015-01-18T16:19:22.300992 #1336]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-18 16:19:22 +0000
D, [2015-01-18T16:19:22.344710 #1336] DEBUG -- : 
D, [2015-01-18T16:19:22.345554 #1336] DEBUG -- : 
I, [2015-01-18T16:19:22.346769 #1336]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-18 16:19:22 +0000
D, [2015-01-18T16:19:22.376621 #1336] DEBUG -- : 
D, [2015-01-18T16:19:22.377148 #1336] DEBUG -- : 
I, [2015-01-18T16:19:22.378135 #1336]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-18 16:19:22 +0000
D, [2015-01-18T16:19:22.402293 #1336] DEBUG -- : 
D, [2015-01-18T16:19:22.403487 #1336] DEBUG -- : 
I, [2015-01-18T16:19:22.404683 #1336]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-18 16:19:22 +0000
D, [2015-01-18T16:19:22.431689 #1336] DEBUG -- : 
D, [2015-01-18T16:19:22.432493 #1336] DEBUG -- : 
I, [2015-01-18T16:19:22.433497 #1336]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-18 16:19:22 +0000
D, [2015-01-18T16:19:22.462576 #1336] DEBUG -- : 
D, [2015-01-18T16:19:22.464109 #1336] DEBUG -- : 
I, [2015-01-18T16:19:22.465305 #1336]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-18 16:19:22 +0000
D, [2015-01-18T16:19:22.491910 #1336] DEBUG -- : 
D, [2015-01-18T16:19:22.492482 #1336] DEBUG -- : 
I, [2015-01-18T16:19:22.493939 #1336]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-18 16:19:22 +0000
D, [2015-01-18T16:19:22.523883 #1336] DEBUG -- : 
D, [2015-01-18T16:19:22.524400 #1336] DEBUG -- : 
I, [2015-01-18T16:19:22.525678 #1336]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-18 16:19:22 +0000
D, [2015-01-18T16:19:22.552872 #1336] DEBUG -- : 
D, [2015-01-18T16:19:22.553751 #1336] DEBUG -- : 
I, [2015-01-18T16:19:22.554920 #1336]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-18 16:19:22 +0000
D, [2015-01-18T16:19:22.585550 #1336] DEBUG -- : 
D, [2015-01-18T16:19:22.586050 #1336] DEBUG -- : 
I, [2015-01-18T16:19:22.586802 #1336]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-18 16:19:22 +0000
D, [2015-01-18T16:19:22.612448 #1336] DEBUG -- : 
D, [2015-01-18T16:19:22.612993 #1336] DEBUG -- : 
I, [2015-01-18T16:19:22.613985 #1336]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-18 16:19:22 +0000
D, [2015-01-18T16:19:22.692561 #1336] DEBUG -- : 
D, [2015-01-18T16:19:22.692999 #1336] DEBUG -- : 
I, [2015-01-18T16:19:22.693729 #1336]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-18 16:19:22 +0000
D, [2015-01-18T16:19:22.755021 #1336] DEBUG -- : 
D, [2015-01-18T16:19:22.755688 #1336] DEBUG -- : 
I, [2015-01-18T16:19:22.756721 #1336]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-18 16:19:22 +0000
D, [2015-01-18T16:23:04.006245 #1336] DEBUG -- : 
D, [2015-01-18T16:23:04.006570 #1336] DEBUG -- : 
I, [2015-01-18T16:23:04.007435 #1336]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-18 16:23:04 +0000
I, [2015-01-18T16:23:04.023862 #1336]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-18T16:23:04.024440 #1336]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-18T16:23:04.032057 #1336] DEBUG -- :   [1m[35mCart Load (0.6ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 58]]
D, [2015-01-18T16:23:04.037618 #1336] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-18T16:23:04.045842 #1336] DEBUG -- :   [1m[35mLineItem Load (0.4ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 58]]
D, [2015-01-18T16:23:04.055770 #1336] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-18T16:23:04.059711 #1336] DEBUG -- :   [1m[35m (0.5ms)[0m  begin transaction
D, [2015-01-18T16:23:04.070013 #1336] DEBUG -- :   [1m[36mSQL (1.8ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 58], ["created_at", Sun, 18 Jan 2015 16:23:04 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7fdd84a49318,'0.1299E2',18(36)>], ["size", "extra small"], ["updated_at", Sun, 18 Jan 2015 16:23:04 UTC +00:00]]
D, [2015-01-18T16:23:04.498450 #1336] DEBUG -- :   [1m[35m (425.1ms)[0m  commit transaction
D, [2015-01-18T16:23:04.536603 #1336] DEBUG -- :   [1m[36mLineItem Load (0.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 58]]
I, [2015-01-18T16:23:04.570866 #1336]  INFO -- :   Rendered line_items/_line_item.html.erb (6.6ms)
I, [2015-01-18T16:23:04.583928 #1336]  INFO -- :   Rendered carts/_cart.html.erb (51.7ms)
I, [2015-01-18T16:23:04.585815 #1336]  INFO -- :   Rendered line_items/create.js.erb (56.9ms)
I, [2015-01-18T16:23:04.587384 #1336]  INFO -- : Completed 200 OK in 562ms (Views: 85.5ms | ActiveRecord: 430.2ms)
D, [2015-01-18T16:23:07.456559 #1336] DEBUG -- : 
D, [2015-01-18T16:23:07.457021 #1336] DEBUG -- : 
I, [2015-01-18T16:23:07.457732 #1336]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-18 16:23:07 +0000
I, [2015-01-18T16:23:07.474443 #1336]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-18T16:23:07.482559 #1336] DEBUG -- :   [1m[35mUser Load (1.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 3 LIMIT 1
D, [2015-01-18T16:23:07.487831 #1336] DEBUG -- :   [1m[36mUser Load (0.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-18T16:23:07.493183 #1336] DEBUG -- :   [1m[35mCart Load (0.5ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 58]]
D, [2015-01-18T16:23:07.503229 #1336] DEBUG -- :   [1m[36mLineItem Load (0.8ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 58]]
I, [2015-01-18T16:23:07.511192 #1336]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: "Paypal", payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-18T16:23:13.058076 #1336] DEBUG -- :   [1m[35m (0.7ms)[0m  begin transaction
D, [2015-01-18T16:23:13.067905 #1336] DEBUG -- :   [1m[36mSQL (1.7ms)[0m  [1mINSERT INTO "orders" ("created_at", "payment_method", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Sun, 18 Jan 2015 16:23:13 UTC +00:00], ["payment_method", "Paypal"], ["updated_at", Sun, 18 Jan 2015 16:23:13 UTC +00:00]]
D, [2015-01-18T16:23:13.080241 #1336] DEBUG -- :   [1m[35mSQL (1.3ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 155  [["cart_id", nil], ["order_id", 90], ["updated_at", Sun, 18 Jan 2015 16:23:13 UTC +00:00]]
I, [2015-01-18T16:23:13.081654 #1336]  INFO -- : about to @payment.create
D, [2015-01-18T16:23:13.919443 #1336] DEBUG -- :   [1m[36mProduct Load (0.6ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-18T16:23:14.479733 #1336]  INFO -- : in order=
I, [2015-01-18T16:23:15.151061 #1336]  INFO -- : in payment.create
I, [2015-01-18T16:23:15.156193 #1336]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"12.99"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/90/confirm", "cancel_url"=>"http://localhost:3000/orders/90/cancel"}}
I, [2015-01-18T16:23:15.157741 #1336]  INFO -- : #<ActiveModel::Errors:0x007fdd829df320 @base=#<Payment:0x007fdd811f3a40 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd811f2488 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd82bb1248 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd82bb0438 @error=nil, @total="12.99", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd82ba8210 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd82b9b448 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd82ad5090 @error=nil, @return_url="http://localhost:3000/orders/90/confirm", @cancel_url="http://localhost:3000/orders/90/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd829df320 ...>>, @messages={}>
I, [2015-01-18T16:23:15.158347 #1336]  INFO -- : got past invalid
I, [2015-01-18T16:23:15.175470 #1336]  INFO -- : PayPal-Request-Id: b123b3fd-d148-4349-8db3-4821d5c4ead6
I, [2015-01-18T16:23:15.176081 #1336]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-18T16:23:17.030738 #1336]  INFO -- : Response[201]: Created, Duration: 1.854s
I, [2015-01-18T16:23:17.035661 #1336]  INFO -- : back from super
I, [2015-01-18T16:23:17.043329 #1336]  INFO -- : {"id"=>"PAY-0EE49086JK6172331KS5535A", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"12.99", "details"=>{"subtotal"=>"12.99"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"camo print tee", "price"=>"12.99", "currency"=>"GBP", "sku"=>"camo print tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/90/confirm", "cancel_url"=>"http://localhost:3000/orders/90/cancel"}, "create_time"=>"2015-01-18T16:23:16Z", "update_time"=>"2015-01-18T16:23:16Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-0EE49086JK6172331KS5535A", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-57D30975J6028834Y", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-0EE49086JK6172331KS5535A/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-18T16:23:17.099563 #1336] DEBUG -- :   [1m[35mSQL (39.2ms)[0m  UPDATE "orders" SET "payment_method" = ?, "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ?, "pay_type" = ? WHERE "orders"."id" = 90  [["payment_method", "Paypal"], ["created_at", Sun, 18 Jan 2015 16:23:13 UTC +00:00], ["updated_at", Sun, 18 Jan 2015 16:23:13 UTC +00:00], ["id", 90], ["payment_id", "PAY-0EE49086JK6172331KS5535A"], ["state", "created"], ["pay_type", "paypal"]]
I, [2015-01-18T16:23:17.103105 #1336]  INFO -- : @payment save just done
I, [2015-01-18T16:23:17.104342 #1336]  INFO -- : #<Payment:0x007fdd811f3a40 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd80dc0ce8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fdd80dbb950 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fdd80dba4d8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd80db30c0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd80db2530 @error=nil, @total="12.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fdd80db01b8 @error=nil, @subtotal="12.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd80da8558 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd80da23b0 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd82ad5090 @error=nil, @return_url="http://localhost:3000/orders/90/confirm", @cancel_url="http://localhost:3000/orders/90/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd829df320 @base=#<Payment:0x007fdd811f3a40 ...>, @messages={}>, @request_id="b123b3fd-d148-4349-8db3-4821d5c4ead6", @header={}, @id="PAY-0EE49086JK6172331KS5535A", @create_time="2015-01-18T16:23:16Z", @update_time="2015-01-18T16:23:16Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fdd81072ae0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0EE49086JK6172331KS5535A", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd80d9bce0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-57D30975J6028834Y", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd80d8fd78 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0EE49086JK6172331KS5535A/execute", @rel="execute", @method="POST">]>
I, [2015-01-18T16:23:17.105445 #1336]  INFO -- : #<Payment:0x007fdd811f3a40 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd80dc0ce8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fdd80dbb950 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fdd80dba4d8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd80db30c0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd80db2530 @error=nil, @total="12.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fdd80db01b8 @error=nil, @subtotal="12.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd80da8558 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd80da23b0 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd82ad5090 @error=nil, @return_url="http://localhost:3000/orders/90/confirm", @cancel_url="http://localhost:3000/orders/90/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd829df320 @base=#<Payment:0x007fdd811f3a40 ...>, @messages={}>, @request_id="b123b3fd-d148-4349-8db3-4821d5c4ead6", @header={}, @id="PAY-0EE49086JK6172331KS5535A", @create_time="2015-01-18T16:23:16Z", @update_time="2015-01-18T16:23:16Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fdd81072ae0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0EE49086JK6172331KS5535A", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd80d9bce0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-57D30975J6028834Y", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd80d8fd78 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0EE49086JK6172331KS5535A/execute", @rel="execute", @method="POST">]>
D, [2015-01-18T16:23:17.149296 #1336] DEBUG -- :   [1m[36m (42.1ms)[0m  [1mcommit transaction[0m
D, [2015-01-18T16:23:17.157386 #1336] DEBUG -- :   [1m[35mSQL (2.8ms)[0m  UPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 90
I, [2015-01-18T16:23:17.158378 #1336]  INFO -- : about to approve url
I, [2015-01-18T16:23:17.159523 #1336]  INFO -- : #<Payment:0x007fdd811f3a40 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd80dc0ce8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fdd80dbb950 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fdd80dba4d8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd80db30c0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd80db2530 @error=nil, @total="12.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fdd80db01b8 @error=nil, @subtotal="12.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd80da8558 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd80da23b0 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd82ad5090 @error=nil, @return_url="http://localhost:3000/orders/90/confirm", @cancel_url="http://localhost:3000/orders/90/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd829df320 @base=#<Payment:0x007fdd811f3a40 ...>, @messages={}>, @request_id="b123b3fd-d148-4349-8db3-4821d5c4ead6", @header={}, @id="PAY-0EE49086JK6172331KS5535A", @create_time="2015-01-18T16:23:16Z", @update_time="2015-01-18T16:23:16Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fdd81072ae0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0EE49086JK6172331KS5535A", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd80d9bce0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-57D30975J6028834Y", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd80d8fd78 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0EE49086JK6172331KS5535A/execute", @rel="execute", @method="POST">]>
I, [2015-01-18T16:23:17.160787 #1336]  INFO -- : #<Payment:0x007fdd811f3a40 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd80dc0ce8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fdd80dbb950 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fdd80dba4d8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd80db30c0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd80db2530 @error=nil, @total="12.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fdd80db01b8 @error=nil, @subtotal="12.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd80da8558 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd80da23b0 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd82ad5090 @error=nil, @return_url="http://localhost:3000/orders/90/confirm", @cancel_url="http://localhost:3000/orders/90/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd829df320 @base=#<Payment:0x007fdd811f3a40 ...>, @messages={}>, @request_id="b123b3fd-d148-4349-8db3-4821d5c4ead6", @header={}, @id="PAY-0EE49086JK6172331KS5535A", @create_time="2015-01-18T16:23:16Z", @update_time="2015-01-18T16:23:16Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fdd81072ae0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0EE49086JK6172331KS5535A", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd80d9bce0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-57D30975J6028834Y", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd80d8fd78 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0EE49086JK6172331KS5535A/execute", @rel="execute", @method="POST">]>
I, [2015-01-18T16:23:17.161410 #1336]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-57D30975J6028834Y
I, [2015-01-18T16:23:17.162742 #1336]  INFO -- : #<Payment:0x007fdd811f3a40 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x007fdd80dc0ce8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x007fdd80dbb950 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x007fdd80dba4d8 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x007fdd80db30c0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x007fdd80db2530 @error=nil, @total="12.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x007fdd80db01b8 @error=nil, @subtotal="12.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x007fdd80da8558 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x007fdd80da23b0 @error=nil, @name="camo print tee", @sku="camo print tee", @price="12.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x007fdd82ad5090 @error=nil, @return_url="http://localhost:3000/orders/90/confirm", @cancel_url="http://localhost:3000/orders/90/cancel">, @logger=#<Logger:0x007fdd82e0b980 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x007fdd82e0b930 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x007fdd82e0b8b8 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x007fdd82e0b890 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x007fdd82e0b840>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x007fdd829df320 @base=#<Payment:0x007fdd811f3a40 ...>, @messages={}>, @request_id="b123b3fd-d148-4349-8db3-4821d5c4ead6", @header={}, @id="PAY-0EE49086JK6172331KS5535A", @create_time="2015-01-18T16:23:16Z", @update_time="2015-01-18T16:23:16Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x007fdd81072ae0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0EE49086JK6172331KS5535A", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd80d9bce0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-57D30975J6028834Y", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x007fdd80d8fd78 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-0EE49086JK6172331KS5535A/execute", @rel="execute", @method="POST">]>
I, [2015-01-18T16:23:17.164540 #1336]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-57D30975J6028834Y
I, [2015-01-18T16:23:17.167291 #1336]  INFO -- : Completed 403 Forbidden in 9691ms (ActiveRecord: 91.2ms)
D, [2015-01-18T16:26:40.538499 #1336] DEBUG -- : 
D, [2015-01-18T16:26:40.583019 #1336] DEBUG -- : 
I, [2015-01-18T16:26:40.586411 #1336]  INFO -- : Started GET "/orders/90/confirm?paymentId=PAY-0EE49086JK6172331KS5535A&token=EC-57D30975J6028834Y&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-18 16:26:40 +0000
I, [2015-01-18T16:26:40.763974 #1336]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-18T16:26:40.764544 #1336]  INFO -- :   Parameters: {"paymentId"=>"PAY-0EE49086JK6172331KS5535A", "token"=>"EC-57D30975J6028834Y", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"90"}
D, [2015-01-18T16:26:40.773617 #1336] DEBUG -- :   [1m[36mOrder Load (0.6ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "90"]]
I, [2015-01-18T16:27:12.717630 #1336]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-0EE49086JK6172331KS5535A
I, [2015-01-18T16:27:14.096349 #1336]  INFO -- : Response[200]: OK, Duration: 1.377s
D, [2015-01-18T16:27:17.205699 #1336] DEBUG -- :   [1m[35m (0.5ms)[0m  begin transaction
D, [2015-01-18T16:27:17.329550 #1336] DEBUG -- :   [1m[36mSQL (113.0ms)[0m  [1mUPDATE "orders" SET "name" = ?, "email" = ?, "address" = ?, "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 90[0m  [["name", "Test Buyer"], ["email", "simon.king65-buyer@gmail.com"], ["address", "1 Main Terrace"], ["shipping_address1", "1 Main Terrace"], ["updated_at", Sun, 18 Jan 2015 16:27:17 UTC +00:00]]
D, [2015-01-18T16:27:17.349739 #1336] DEBUG -- :   [1m[35m (17.9ms)[0m  commit transaction
I, [2015-01-18T16:27:17.510144 #1336]  INFO -- :   Rendered orders/_form.html.erb (45.5ms)
I, [2015-01-18T16:27:17.516199 #1336]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (77.3ms)
I, [2015-01-18T16:27:17.579836 #1336]  INFO -- : Completed 200 OK in 36814ms (Views: 227.6ms | ActiveRecord: 132.0ms)
D, [2015-01-18T16:27:17.654689 #1336] DEBUG -- : 
D, [2015-01-18T16:27:17.655072 #1336] DEBUG -- : 
I, [2015-01-18T16:27:17.656051 #1336]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-18 16:27:17 +0000
D, [2015-01-18T16:27:17.852067 #1336] DEBUG -- : 
D, [2015-01-18T16:27:17.852490 #1336] DEBUG -- : 
I, [2015-01-18T16:27:17.853491 #1336]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-18 16:27:17 +0000
D, [2015-01-18T16:27:17.879811 #1336] DEBUG -- : 
D, [2015-01-18T16:27:17.890979 #1336] DEBUG -- : 
I, [2015-01-18T16:27:17.892581 #1336]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-18 16:27:17 +0000
D, [2015-01-18T16:27:17.929522 #1336] DEBUG -- : 
D, [2015-01-18T16:27:17.930427 #1336] DEBUG -- : 
I, [2015-01-18T16:27:17.931682 #1336]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-18 16:27:17 +0000
D, [2015-01-18T16:27:17.951116 #1336] DEBUG -- : 
D, [2015-01-18T16:27:17.951772 #1336] DEBUG -- : 
I, [2015-01-18T16:27:17.952735 #1336]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-18 16:27:17 +0000
D, [2015-01-18T16:27:17.979005 #1336] DEBUG -- : 
D, [2015-01-18T16:27:17.979790 #1336] DEBUG -- : 
I, [2015-01-18T16:27:17.981008 #1336]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-18 16:27:17 +0000
D, [2015-01-18T16:27:18.020104 #1336] DEBUG -- : 
D, [2015-01-18T16:27:18.042638 #1336] DEBUG -- : 
I, [2015-01-18T16:27:18.043798 #1336]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-18 16:27:18 +0000
D, [2015-01-18T16:27:18.069153 #1336] DEBUG -- : 
D, [2015-01-18T16:27:18.077865 #1336] DEBUG -- : 
I, [2015-01-18T16:27:18.078969 #1336]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-18 16:27:18 +0000
D, [2015-01-18T16:27:18.098429 #1336] DEBUG -- : 
D, [2015-01-18T16:27:18.098964 #1336] DEBUG -- : 
I, [2015-01-18T16:27:18.099904 #1336]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-18 16:27:18 +0000
D, [2015-01-18T16:27:18.130803 #1336] DEBUG -- : 
D, [2015-01-18T16:27:18.131867 #1336] DEBUG -- : 
I, [2015-01-18T16:27:18.132976 #1336]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-18 16:27:18 +0000
D, [2015-01-18T16:27:18.150635 #1336] DEBUG -- : 
D, [2015-01-18T16:27:18.151195 #1336] DEBUG -- : 
I, [2015-01-18T16:27:18.152229 #1336]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-18 16:27:18 +0000
D, [2015-01-18T16:27:18.171255 #1336] DEBUG -- : 
D, [2015-01-18T16:27:18.171716 #1336] DEBUG -- : 
I, [2015-01-18T16:27:18.172753 #1336]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-18 16:27:18 +0000
D, [2015-01-18T16:27:18.218851 #1336] DEBUG -- : 
D, [2015-01-18T16:27:18.219306 #1336] DEBUG -- : 
I, [2015-01-18T16:27:18.220436 #1336]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-18 16:27:18 +0000
D, [2015-01-18T16:27:18.266421 #1336] DEBUG -- : 
D, [2015-01-18T16:27:18.266973 #1336] DEBUG -- : 
I, [2015-01-18T16:27:18.268322 #1336]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-18 16:27:18 +0000
D, [2015-01-18T16:27:18.299888 #1336] DEBUG -- : 
D, [2015-01-18T16:27:18.300610 #1336] DEBUG -- : 
I, [2015-01-18T16:27:18.301731 #1336]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-18 16:27:18 +0000
D, [2015-01-18T16:27:18.321107 #1336] DEBUG -- : 
D, [2015-01-18T16:27:18.323452 #1336] DEBUG -- : 
I, [2015-01-18T16:27:18.324769 #1336]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-18 16:27:18 +0000
D, [2015-01-18T16:27:18.350904 #1336] DEBUG -- : 
D, [2015-01-18T16:27:18.351453 #1336] DEBUG -- : 
I, [2015-01-18T16:27:18.352581 #1336]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-18 16:27:18 +0000
D, [2015-01-18T16:27:18.391540 #1336] DEBUG -- : 
D, [2015-01-18T16:27:18.408294 #1336] DEBUG -- : 
I, [2015-01-18T16:27:18.409331 #1336]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-18 16:27:18 +0000
D, [2015-01-18T16:27:18.435236 #1336] DEBUG -- : 
D, [2015-01-18T16:27:18.445664 #1336] DEBUG -- : 
I, [2015-01-18T16:27:18.451353 #1336]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-18 16:27:18 +0000
D, [2015-01-18T16:27:18.477805 #1336] DEBUG -- : 
D, [2015-01-18T16:27:18.479872 #1336] DEBUG -- : 
I, [2015-01-18T16:27:18.480873 #1336]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-18 16:27:18 +0000
D, [2015-01-18T16:27:18.511059 #1336] DEBUG -- : 
D, [2015-01-18T16:27:18.512446 #1336] DEBUG -- : 
I, [2015-01-18T16:27:18.513506 #1336]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-18 16:27:18 +0000
D, [2015-01-18T16:27:18.543274 #1336] DEBUG -- : 
D, [2015-01-18T16:27:18.543981 #1336] DEBUG -- : 
I, [2015-01-18T16:27:18.545177 #1336]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-18 16:27:18 +0000
D, [2015-01-18T16:27:18.563248 #1336] DEBUG -- : 
D, [2015-01-18T16:27:18.563970 #1336] DEBUG -- : 
I, [2015-01-18T16:27:18.565415 #1336]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-18 16:27:18 +0000
D, [2015-01-18T16:27:18.600781 #1336] DEBUG -- : 
D, [2015-01-18T16:27:18.601464 #1336] DEBUG -- : 
I, [2015-01-18T16:27:18.602780 #1336]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-18 16:27:18 +0000
D, [2015-01-18T16:27:18.619623 #1336] DEBUG -- : 
D, [2015-01-18T16:27:18.620078 #1336] DEBUG -- : 
I, [2015-01-18T16:27:18.621048 #1336]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-18 16:27:18 +0000
D, [2015-01-18T16:27:18.642907 #1336] DEBUG -- : 
D, [2015-01-18T16:27:18.643978 #1336] DEBUG -- : 
I, [2015-01-18T16:27:18.645004 #1336]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-18 16:27:18 +0000
D, [2015-01-18T16:27:18.669867 #1336] DEBUG -- : 
D, [2015-01-18T16:27:18.675100 #1336] DEBUG -- : 
I, [2015-01-18T16:27:18.676355 #1336]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-18 16:27:18 +0000
D, [2015-01-18T16:27:22.707413 #1336] DEBUG -- : 
D, [2015-01-18T16:27:22.708136 #1336] DEBUG -- : 
I, [2015-01-18T16:27:22.709043 #1336]  INFO -- : Started POST "/orders/90/execute/90/2VZ7YQDDDPPC4/PAY-0EE49086JK6172331KS5535A" for 127.0.0.1 at 2015-01-18 16:27:22 +0000
I, [2015-01-18T16:27:22.732964 #1336]  INFO -- : Processing by OrdersController#execute as HTML
I, [2015-01-18T16:27:22.733960 #1336]  INFO -- :   Parameters: {"authenticity_token"=>"ohbtEjIJsyqL+SAcUq0N+GSOROzNN7MrL8IuyZOU47c=", "order_id"=>"90", "payer_id"=>"2VZ7YQDDDPPC4", "payment_id"=>"PAY-0EE49086JK6172331KS5535A"}
D, [2015-01-18T16:27:22.746089 #1336] DEBUG -- :   [1m[36mOrder Load (0.8ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "90"]]
I, [2015-01-18T16:27:26.455592 #1336]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-0EE49086JK6172331KS5535A
I, [2015-01-18T16:27:27.714372 #1336]  INFO -- : Response[200]: OK, Duration: 1.257s
I, [2015-01-18T16:27:27.722364 #1336]  INFO -- : found payment #########
I, [2015-01-18T16:27:27.726354 #1336]  INFO -- : PayPal-Request-Id: 63d9fe30-79e6-4322-878c-6c22990b57ef
I, [2015-01-18T16:27:27.727015 #1336]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-0EE49086JK6172331KS5535A/execute
I, [2015-01-18T16:27:29.860958 #1336]  INFO -- : Response[200]: OK, Duration: 2.133s
D, [2015-01-18T16:27:29.871134 #1336] DEBUG -- :   [1m[35m (0.5ms)[0m  begin transaction
D, [2015-01-18T16:27:29.883616 #1336] DEBUG -- :   [1m[36mSQL (1.6ms)[0m  [1mUPDATE "orders" SET "state" = ?, "updated_at" = ? WHERE "orders"."id" = 90[0m  [["state", "approved"], ["updated_at", Sun, 18 Jan 2015 16:27:29 UTC +00:00]]
D, [2015-01-18T16:27:29.892627 #1336] DEBUG -- :   [1m[35m (6.5ms)[0m  commit transaction
D, [2015-01-18T16:27:33.784226 #1336] DEBUG -- :   [1m[36mCart Load (0.7ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 58]]
D, [2015-01-18T16:27:33.787451 #1336] DEBUG -- :   [1m[35m (0.5ms)[0m  begin transaction
D, [2015-01-18T16:27:33.799574 #1336] DEBUG -- :   [1m[36mLineItem Load (0.6ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 58]]
D, [2015-01-18T16:27:33.805179 #1336] DEBUG -- :   [1m[35mSQL (0.8ms)[0m  DELETE FROM "carts" WHERE "carts"."id" = ?  [["id", 58]]
D, [2015-01-18T16:27:33.811760 #1336] DEBUG -- :   [1m[36m (2.8ms)[0m  [1mcommit transaction[0m
I, [2015-01-18T16:27:43.764113 #1336]  INFO -- : #<Order id: 90, name: "Test Buyer", address: "1 Main Terrace", email: "simon.king65-buyer@gmail.com", pay_type: "paypal", created_at: "2015-01-18 16:23:13", updated_at: "2015-01-18 16:27:29", payment_method: "Paypal", payment_id: "PAY-0EE49086JK6172331KS5535A", state: "approved", amount: nil, description: nil, shipping_address1: "1 Main Terrace">
I, [2015-01-18T16:32:04.145474 #1336]  INFO -- :   Rendered order_notifier/received.html.erb (0.6ms)
D, [2015-01-18T16:32:04.171927 #1336] DEBUG -- :   [1m[35mLineItem Load (0.8ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 90]]
D, [2015-01-18T16:32:04.237013 #1336] DEBUG -- :   [1m[36mProduct Load (0.7ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-18T16:32:04.240475 #1336]  INFO -- :   Rendered line_items/_line_item.text.erb (12.1ms)
I, [2015-01-18T16:32:04.241932 #1336]  INFO -- :   Rendered order_notifier/received.text.erb (78.7ms)
I, [2015-01-18T16:32:05.254033 #1336]  INFO -- : 
Sent mail to simon.king65-buyer@gmail.com (904.9ms)
D, [2015-01-18T16:32:05.255406 #1336] DEBUG -- : Date: Sun, 18 Jan 2015 16:32:04 +0000
From: Simon King <simon.king65@gmail.com>
To: simon.king65-buyer@gmail.com
Message-ID: <54bbe0045f7bd_5383feec26b94f04252@Ben-Kings-MacBook.local.mail>
Subject: King Clothing Order Confirmation
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_54bbe0043f3f1_5383feec26b94f041e0";
 charset=UTF-8
Content-Transfer-Encoding: 7bit


----==_mimepart_54bbe0043f3f1_5383feec26b94f041e0
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Test Buyer

Thank you for your recent order from King Clothing.

You ordered the following items:

 1 x camo print tee
We'll send you a separate e-mail when your order ships.
----==_mimepart_54bbe0043f3f1_5383feec26b94f041e0
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<h1>OrderNotifier#received</h1>

<p>
  , thank you for your order, we will email you again once your order has been despatched. We hope you enjoy wearing your King Clothing brand tee-shirt.
</p>

----==_mimepart_54bbe0043f3f1_5383feec26b94f041e0--

I, [2015-01-18T16:32:05.259346 #1336]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-18T16:32:05.261278 #1336]  INFO -- : Completed 302 Found in 282526ms (ActiveRecord: 16.5ms)
D, [2015-01-18T16:32:05.270145 #1336] DEBUG -- : 
D, [2015-01-18T16:32:05.270735 #1336] DEBUG -- : 
I, [2015-01-18T16:32:05.271555 #1336]  INFO -- : Started POST "/orders/90/execute/90/2VZ7YQDDDPPC4/PAY-0EE49086JK6172331KS5535A" for 127.0.0.1 at 2015-01-18 16:32:05 +0000
I, [2015-01-18T16:32:05.377380 #1336]  INFO -- : Processing by OrdersController#execute as HTML
I, [2015-01-18T16:32:05.380602 #1336]  INFO -- :   Parameters: {"authenticity_token"=>"ohbtEjIJsyqL+SAcUq0N+GSOROzNN7MrL8IuyZOU47c=", "order_id"=>"90", "payer_id"=>"2VZ7YQDDDPPC4", "payment_id"=>"PAY-0EE49086JK6172331KS5535A"}
D, [2015-01-18T16:32:05.391822 #1336] DEBUG -- :   [1m[35mOrder Load (0.8ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "90"]]
I, [2015-01-18T16:32:16.211846 #1336]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-0EE49086JK6172331KS5535A
I, [2015-01-18T16:32:17.923704 #1336]  INFO -- : Response[200]: OK, Duration: 1.711s
I, [2015-01-18T16:32:17.932244 #1336]  INFO -- : found payment #########
I, [2015-01-18T16:32:17.936238 #1336]  INFO -- : PayPal-Request-Id: c1ed7ff6-0725-4252-ac5e-4a1c935bcb64
I, [2015-01-18T16:32:17.936887 #1336]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-0EE49086JK6172331KS5535A/execute
I, [2015-01-18T16:32:18.898040 #1336]  INFO -- : Response[400]: Bad Request, Duration: 0.960s
I, [2015-01-19T21:46:28.345450 #1336]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/oauth2/token
I, [2015-01-19T21:46:32.273128 #1336]  INFO -- : Response[200]: OK, Duration: 3.834s
I, [2015-01-19T21:46:32.693277 #1336]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-0EE49086JK6172331KS5535A
I, [2015-01-19T21:46:35.467507 #1336]  INFO -- : Response[200]: OK, Duration: 2.773s
I, [2015-01-19T21:46:35.947458 #1336]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-19T21:46:36.491125 #1336]  INFO -- : Completed 302 Found in 105271108ms (ActiveRecord: 0.8ms)
D, [2015-01-19T21:46:36.712891 #1336] DEBUG -- : 
D, [2015-01-19T21:46:36.714382 #1336] DEBUG -- : 
I, [2015-01-19T21:46:36.749112 #1336]  INFO -- : Started POST "/orders/90/execute/90/2VZ7YQDDDPPC4/PAY-0EE49086JK6172331KS5535A" for 127.0.0.1 at 2015-01-19 21:46:36 +0000
I, [2015-01-19T21:46:37.262554 #1336]  INFO -- : Processing by OrdersController#execute as HTML
I, [2015-01-19T21:46:37.263335 #1336]  INFO -- :   Parameters: {"authenticity_token"=>"ohbtEjIJsyqL+SAcUq0N+GSOROzNN7MrL8IuyZOU47c=", "order_id"=>"90", "payer_id"=>"2VZ7YQDDDPPC4", "payment_id"=>"PAY-0EE49086JK6172331KS5535A"}
D, [2015-01-19T21:46:37.436031 #1336] DEBUG -- :   [1m[36mOrder Load (67.1ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "90"]]
>>>>>>> 56939fbb9bd9ca57ffd99b2eabd9a1716f14edc1
D, [2015-01-20T19:56:11.771649 #10236] DEBUG -- : 
D, [2015-01-20T19:56:11.792651 #10236] DEBUG -- : 
I, [2015-01-20T19:56:11.839653 #10236]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-20 19:56:11 +0000
D, [2015-01-20T19:56:12.792708 #10236] DEBUG -- :   [1m[36mActiveRecord::SchemaMigration Load (0.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
I, [2015-01-20T19:56:13.002720 #10236]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-20T19:56:13.160729 #10236] DEBUG -- :   [1m[35mCart Load (13.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 39]]
D, [2015-01-20T19:56:13.336739 #10236] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-20T19:56:13.456746 #10236]  INFO -- : Cache digest for store/index.html: a93d4e2e981ab3dfce98a095c3b6c059
I, [2015-01-20T19:56:13.532750 #10236]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (2.0ms)
I, [2015-01-20T19:56:13.590753 #10236]  INFO -- :   Rendered store/index.html.erb within layouts/application (284.0ms)
D, [2015-01-20T19:56:25.542437 #10236] DEBUG -- :   [1m[35mLineItem Exists (1.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 39]]
D, [2015-01-20T19:56:25.642443 #10236] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 39]]
I, [2015-01-20T19:56:25.673445 #10236]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-20T19:56:25.735448 #10236]  INFO -- :   Rendered carts/_cart.html.erb (129.0ms)
I, [2015-01-20T19:56:25.795452 #10236]  INFO -- : Completed 200 OK in 12735ms (Views: 12525.7ms | ActiveRecord: 23.0ms)
D, [2015-01-20T19:56:26.135471 #10236] DEBUG -- : 
D, [2015-01-20T19:56:26.156472 #10236] DEBUG -- : 
I, [2015-01-20T19:56:26.213475 #10236]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-20 19:56:26 +0000
D, [2015-01-20T19:56:26.266478 #10236] DEBUG -- : 
D, [2015-01-20T19:56:26.285480 #10236] DEBUG -- : 
I, [2015-01-20T19:56:26.350483 #10236]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-20 19:56:26 +0000
D, [2015-01-20T19:56:26.410487 #10236] DEBUG -- : 
D, [2015-01-20T19:56:26.433488 #10236] DEBUG -- : 
I, [2015-01-20T19:56:26.500492 #10236]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-20 19:56:26 +0000
D, [2015-01-20T19:56:26.554495 #10236] DEBUG -- : 
D, [2015-01-20T19:56:26.577496 #10236] DEBUG -- : 
I, [2015-01-20T19:56:26.634500 #10236]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-20 19:56:26 +0000
D, [2015-01-20T19:56:26.689503 #10236] DEBUG -- : 
D, [2015-01-20T19:56:26.712504 #10236] DEBUG -- : 
I, [2015-01-20T19:56:26.772507 #10236]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-20 19:56:26 +0000
D, [2015-01-20T19:56:26.825510 #10236] DEBUG -- : 
D, [2015-01-20T19:56:26.847512 #10236] DEBUG -- : 
I, [2015-01-20T19:56:26.910515 #10236]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-20 19:56:26 +0000
D, [2015-01-20T19:56:26.963518 #10236] DEBUG -- : 
D, [2015-01-20T19:56:26.988520 #10236] DEBUG -- : 
I, [2015-01-20T19:56:27.054524 #10236]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-20 19:56:26 +0000
D, [2015-01-20T19:56:27.109527 #10236] DEBUG -- : 
D, [2015-01-20T19:56:27.134528 #10236] DEBUG -- : 
I, [2015-01-20T19:56:27.202532 #10236]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-20 19:56:27 +0000
D, [2015-01-20T19:56:27.253535 #10236] DEBUG -- : 
D, [2015-01-20T19:56:27.278536 #10236] DEBUG -- : 
I, [2015-01-20T19:56:27.335540 #10236]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-20 19:56:27 +0000
D, [2015-01-20T19:56:27.388543 #10236] DEBUG -- : 
D, [2015-01-20T19:56:27.412544 #10236] DEBUG -- : 
I, [2015-01-20T19:56:27.473548 #10236]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-20 19:56:27 +0000
D, [2015-01-20T19:56:27.528551 #10236] DEBUG -- : 
D, [2015-01-20T19:56:27.553552 #10236] DEBUG -- : 
I, [2015-01-20T19:56:27.620556 #10236]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-20 19:56:27 +0000
D, [2015-01-20T19:56:27.708561 #10236] DEBUG -- : 
D, [2015-01-20T19:56:27.732562 #10236] DEBUG -- : 
I, [2015-01-20T19:56:27.788566 #10236]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-20 19:56:27 +0000
D, [2015-01-20T19:56:27.848569 #10236] DEBUG -- : 
D, [2015-01-20T19:56:27.863570 #10236] DEBUG -- : 
I, [2015-01-20T19:56:27.909572 #10236]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-20 19:56:27 +0000
D, [2015-01-20T19:56:27.986577 #10236] DEBUG -- : 
D, [2015-01-20T19:56:28.009578 #10236] DEBUG -- : 
I, [2015-01-20T19:56:28.079582 #10236]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-20 19:56:28 +0000
D, [2015-01-20T19:56:28.146586 #10236] DEBUG -- : 
D, [2015-01-20T19:56:28.171587 #10236] DEBUG -- : 
I, [2015-01-20T19:56:28.237591 #10236]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-20 19:56:28 +0000
D, [2015-01-20T19:56:28.292594 #10236] DEBUG -- : 
D, [2015-01-20T19:56:28.314596 #10236] DEBUG -- : 
I, [2015-01-20T19:56:28.372599 #10236]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-20 19:56:28 +0000
D, [2015-01-20T19:56:28.425602 #10236] DEBUG -- : 
D, [2015-01-20T19:56:28.449603 #10236] DEBUG -- : 
I, [2015-01-20T19:56:28.517607 #10236]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-20 19:56:28 +0000
D, [2015-01-20T19:56:28.568610 #10236] DEBUG -- : 
D, [2015-01-20T19:56:28.592612 #10236] DEBUG -- : 
I, [2015-01-20T19:56:28.651615 #10236]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-20 19:56:28 +0000
D, [2015-01-20T19:56:28.705618 #10236] DEBUG -- : 
D, [2015-01-20T19:56:28.729619 #10236] DEBUG -- : 
I, [2015-01-20T19:56:28.796623 #10236]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-20 19:56:28 +0000
D, [2015-01-20T19:56:28.850626 #10236] DEBUG -- : 
D, [2015-01-20T19:56:28.873628 #10236] DEBUG -- : 
I, [2015-01-20T19:56:28.937631 #10236]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-20 19:56:28 +0000
D, [2015-01-20T19:56:28.989634 #10236] DEBUG -- : 
D, [2015-01-20T19:56:29.015636 #10236] DEBUG -- : 
I, [2015-01-20T19:56:29.079639 #10236]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-20 19:56:29 +0000
D, [2015-01-20T19:56:29.130642 #10236] DEBUG -- : 
D, [2015-01-20T19:56:29.153644 #10236] DEBUG -- : 
I, [2015-01-20T19:56:29.213647 #10236]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-20 19:56:29 +0000
D, [2015-01-20T19:56:29.267650 #10236] DEBUG -- : 
D, [2015-01-20T19:56:29.292652 #10236] DEBUG -- : 
I, [2015-01-20T19:56:29.355655 #10236]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-20 19:56:29 +0000
D, [2015-01-20T19:56:29.408658 #10236] DEBUG -- : 
D, [2015-01-20T19:56:29.431660 #10236] DEBUG -- : 
I, [2015-01-20T19:56:29.487663 #10236]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-20 19:56:29 +0000
D, [2015-01-20T19:56:29.543666 #10236] DEBUG -- : 
D, [2015-01-20T19:56:29.568667 #10236] DEBUG -- : 
I, [2015-01-20T19:56:29.626671 #10236]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-20 19:56:29 +0000
D, [2015-01-20T19:56:29.680674 #10236] DEBUG -- : 
D, [2015-01-20T19:56:29.703675 #10236] DEBUG -- : 
I, [2015-01-20T19:56:29.770679 #10236]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-20 19:56:29 +0000
D, [2015-01-20T19:56:29.881685 #10236] DEBUG -- : 
D, [2015-01-20T19:56:29.907687 #10236] DEBUG -- : 
I, [2015-01-20T19:56:29.964690 #10236]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-20 19:56:29 +0000
D, [2015-01-20T19:56:30.049695 #10236] DEBUG -- : 
D, [2015-01-20T19:56:30.067696 #10236] DEBUG -- : 
I, [2015-01-20T19:56:30.118699 #10236]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-20 19:56:30 +0000
D, [2015-01-20T19:56:30.234705 #10236] DEBUG -- : 
D, [2015-01-20T19:56:30.254707 #10236] DEBUG -- : 
I, [2015-01-20T19:56:30.297709 #10236]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-20 19:56:30 +0000
D, [2015-01-20T19:56:30.387714 #10236] DEBUG -- : 
D, [2015-01-20T19:56:30.407715 #10236] DEBUG -- : 
I, [2015-01-20T19:56:30.459718 #10236]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-20 19:56:30 +0000
D, [2015-01-20T19:56:33.489943 #10236] DEBUG -- : 
D, [2015-01-20T19:56:33.505543 #10236] DEBUG -- : 
I, [2015-01-20T19:56:33.567943 #10236]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-20 19:56:33 +0000
I, [2015-01-20T19:56:33.645943 #10236]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-20T19:56:33.708343 #10236]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-20T19:56:33.755143 #10236] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 39]]
D, [2015-01-20T19:56:33.817543 #10236] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1[0m  [["id", "1"]]
D, [2015-01-20T19:56:33.926744 #10236] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1  [["cart_id", 39]]
D, [2015-01-20T19:56:34.097745 #10236] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
D, [2015-01-20T19:56:34.128945 #10236] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-20T19:56:34.331745 #10236] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mINSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)[0m  [["cart_id", 39], ["created_at", Tue, 20 Jan 2015 19:56:34 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:5be84a8,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Tue, 20 Jan 2015 19:56:34 UTC +00:00]]
D, [2015-01-20T19:56:34.503345 #10236] DEBUG -- :   [1m[35m (140.4ms)[0m  commit transaction
D, [2015-01-20T19:56:34.596946 #10236] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 39]]
I, [2015-01-20T19:56:34.659346 #10236]  INFO -- :   Rendered line_items/_line_item.html.erb (0.0ms)
I, [2015-01-20T19:56:34.690546 #10236]  INFO -- :   Rendered carts/_cart.html.erb (140.4ms)
I, [2015-01-20T19:56:34.737346 #10236]  INFO -- :   Rendered line_items/create.js.erb (171.6ms)
I, [2015-01-20T19:56:34.784146 #10236]  INFO -- : Completed 200 OK in 1029ms (Views: 234.0ms | ActiveRecord: 156.0ms)
D, [2015-01-20T19:56:37.838816 #10236] DEBUG -- : 
D, [2015-01-20T19:56:37.870016 #10236] DEBUG -- : 
I, [2015-01-20T19:56:37.916816 #10236]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-20 19:56:37 +0000
I, [2015-01-20T19:56:37.994816 #10236]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-20T19:56:38.072816 #10236] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1
D, [2015-01-20T19:56:38.166417 #10236] DEBUG -- :   [1m[36mUser Load (15.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1[0m
D, [2015-01-20T19:56:38.244417 #10236] DEBUG -- :   [1m[35mCart Load (0.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 39]]
D, [2015-01-20T19:56:38.338017 #10236] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 39]]
I, [2015-01-20T19:56:38.540817 #10236]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: "Paypal", payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-20T19:57:13.421284 #10236] DEBUG -- :   [1m[35m (0.0ms)[0m  begin transaction
D, [2015-01-20T19:57:13.592884 #10236] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mINSERT INTO "orders" ("created_at", "payment_method", "updated_at") VALUES (?, ?, ?)[0m  [["created_at", Tue, 20 Jan 2015 19:57:13 UTC +00:00], ["payment_method", "Paypal"], ["updated_at", Tue, 20 Jan 2015 19:57:13 UTC +00:00]]
D, [2015-01-20T19:57:13.748885 #10236] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 114  [["cart_id", nil], ["order_id", 87], ["updated_at", Tue, 20 Jan 2015 19:57:13 UTC +00:00]]
I, [2015-01-20T19:57:13.780085 #10236]  INFO -- : about to @payment.create
D, [2015-01-20T19:57:18.805293 #10236] DEBUG -- :   [1m[36mProduct Load (0.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-20T19:57:19.834895 #10236]  INFO -- : in order=
I, [2015-01-20T19:57:20.958097 #10236]  INFO -- : in payment.create
I, [2015-01-20T19:57:21.176498 #10236]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Camo Print Tee", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Camo Print Tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/87/confirm", "cancel_url"=>"http://localhost:3000/orders/87/cancel"}}
I, [2015-01-20T19:57:21.817099 #10236]  INFO -- : #<ActiveModel::Errors:0x00000007bd0d38 @base=#<Payment:0x00000009c594d8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009c58308 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000008055908 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000008055408 @error=nil, @total="19.99", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000008046ae8 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000008026ab8 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007e57660 @error=nil, @return_url="http://localhost:3000/orders/87/confirm", @cancel_url="http://localhost:3000/orders/87/cancel">, @logger=#<Logger:0x0000000560b9e0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x0000000560b9b8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x0000000560b8f0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x0000000560b8c8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x0000000560b800>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007bd0d38 ...>>, @messages={}>
I, [2015-01-20T19:57:21.848299 #10236]  INFO -- : got past invalid
I, [2015-01-20T19:57:21.995700 #10236]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/oauth2/token
I, [2015-01-20T19:57:23.307102 #10236]  INFO -- : Response[200]: OK, Duration: 1.280s
I, [2015-01-20T19:57:23.385102 #10236]  INFO -- : PayPal-Request-Id: f3d894ea-1f49-4ace-b0bc-f1f002bbd777
I, [2015-01-20T19:57:23.431902 #10236]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-20T19:57:24.804704 #10236]  INFO -- : Response[201]: Created, Duration: 1.326s
I, [2015-01-20T19:57:24.851505 #10236]  INFO -- : back from super
I, [2015-01-20T19:57:25.272705 #10236]  INFO -- : {"id"=>"PAY-6GT55786J4961532NKS7LGKY", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99", "details"=>{"subtotal"=>"19.99"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Camo Print Tee", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Camo Print Tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/87/confirm", "cancel_url"=>"http://localhost:3000/orders/87/cancel"}, "create_time"=>"2015-01-20T19:57:31Z", "update_time"=>"2015-01-20T19:57:31Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-6GT55786J4961532NKS7LGKY", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7LM957191L970740Y", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-6GT55786J4961532NKS7LGKY/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-20T19:57:25.491106 #10236] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  UPDATE "orders" SET "payment_method" = ?, "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ?, "pay_type" = ? WHERE "orders"."id" = 87  [["payment_method", "Paypal"], ["created_at", Tue, 20 Jan 2015 19:57:13 UTC +00:00], ["updated_at", Tue, 20 Jan 2015 19:57:13 UTC +00:00], ["id", 87], ["payment_id", "PAY-6GT55786J4961532NKS7LGKY"], ["state", "created"], ["pay_type", "paypal"]]
D, [2015-01-20T19:57:25.569106 #10236] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 87[0m
I, [2015-01-20T19:57:25.600306 #10236]  INFO -- : @payment save just done
I, [2015-01-20T19:57:26.645508 #10236]  INFO -- : #<Payment:0x00000009c594d8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000059049a8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000058f6790 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000058f57a0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000058c2b20 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000058c1db0 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000058bb168 @error=nil, @subtotal="19.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000058b3148 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000058b1d70 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007e57660 @error=nil, @return_url="http://localhost:3000/orders/87/confirm", @cancel_url="http://localhost:3000/orders/87/cancel">, @logger=#<Logger:0x0000000560b9e0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x0000000560b9b8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x0000000560b8f0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x0000000560b8c8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x0000000560b800>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007bd0d38 @base=#<Payment:0x00000009c594d8 ...>, @messages={}>, @request_id="f3d894ea-1f49-4ace-b0bc-f1f002bbd777", @header={}, @id="PAY-6GT55786J4961532NKS7LGKY", @create_time="2015-01-20T19:57:31Z", @update_time="2015-01-20T19:57:31Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000058948b0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6GT55786J4961532NKS7LGKY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000058885b0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7LM957191L970740Y", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000586c590 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6GT55786J4961532NKS7LGKY/execute", @rel="execute", @method="POST">]>
I, [2015-01-20T19:57:27.675109 #10236]  INFO -- : #<Payment:0x00000009c594d8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000059049a8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000058f6790 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000058f57a0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000058c2b20 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000058c1db0 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000058bb168 @error=nil, @subtotal="19.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000058b3148 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000058b1d70 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007e57660 @error=nil, @return_url="http://localhost:3000/orders/87/confirm", @cancel_url="http://localhost:3000/orders/87/cancel">, @logger=#<Logger:0x0000000560b9e0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x0000000560b9b8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x0000000560b8f0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x0000000560b8c8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x0000000560b800>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007bd0d38 @base=#<Payment:0x00000009c594d8 ...>, @messages={}>, @request_id="f3d894ea-1f49-4ace-b0bc-f1f002bbd777", @header={}, @id="PAY-6GT55786J4961532NKS7LGKY", @create_time="2015-01-20T19:57:31Z", @update_time="2015-01-20T19:57:31Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000058948b0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6GT55786J4961532NKS7LGKY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000058885b0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7LM957191L970740Y", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000586c590 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6GT55786J4961532NKS7LGKY/execute", @rel="execute", @method="POST">]>
D, [2015-01-20T19:57:27.831110 #10236] DEBUG -- :   [1m[35m (124.8ms)[0m  commit transaction
D, [2015-01-20T19:57:28.018310 #10236] DEBUG -- :   [1m[36mSQL (109.2ms)[0m  [1mUPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 87[0m
I, [2015-01-20T19:57:28.049510 #10236]  INFO -- : about to approve url
I, [2015-01-20T19:57:29.032312 #10236]  INFO -- : #<Payment:0x00000009c594d8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000059049a8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000058f6790 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000058f57a0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000058c2b20 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000058c1db0 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000058bb168 @error=nil, @subtotal="19.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000058b3148 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000058b1d70 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007e57660 @error=nil, @return_url="http://localhost:3000/orders/87/confirm", @cancel_url="http://localhost:3000/orders/87/cancel">, @logger=#<Logger:0x0000000560b9e0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x0000000560b9b8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x0000000560b8f0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x0000000560b8c8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x0000000560b800>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007bd0d38 @base=#<Payment:0x00000009c594d8 ...>, @messages={}>, @request_id="f3d894ea-1f49-4ace-b0bc-f1f002bbd777", @header={}, @id="PAY-6GT55786J4961532NKS7LGKY", @create_time="2015-01-20T19:57:31Z", @update_time="2015-01-20T19:57:31Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000058948b0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6GT55786J4961532NKS7LGKY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000058885b0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7LM957191L970740Y", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000586c590 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6GT55786J4961532NKS7LGKY/execute", @rel="execute", @method="POST">]>
I, [2015-01-20T19:57:30.156514 #10236]  INFO -- : #<Payment:0x00000009c594d8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000059049a8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000058f6790 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000058f57a0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000058c2b20 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000058c1db0 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000058bb168 @error=nil, @subtotal="19.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000058b3148 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000058b1d70 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007e57660 @error=nil, @return_url="http://localhost:3000/orders/87/confirm", @cancel_url="http://localhost:3000/orders/87/cancel">, @logger=#<Logger:0x0000000560b9e0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x0000000560b9b8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x0000000560b8f0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x0000000560b8c8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x0000000560b800>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007bd0d38 @base=#<Payment:0x00000009c594d8 ...>, @messages={}>, @request_id="f3d894ea-1f49-4ace-b0bc-f1f002bbd777", @header={}, @id="PAY-6GT55786J4961532NKS7LGKY", @create_time="2015-01-20T19:57:31Z", @update_time="2015-01-20T19:57:31Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000058948b0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6GT55786J4961532NKS7LGKY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000058885b0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7LM957191L970740Y", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000586c590 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6GT55786J4961532NKS7LGKY/execute", @rel="execute", @method="POST">]>
I, [2015-01-20T19:57:30.218914 #10236]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7LM957191L970740Y
I, [2015-01-20T19:57:31.373316 #10236]  INFO -- : #<Payment:0x00000009c594d8 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000059049a8 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000058f6790 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000058f57a0 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x000000058c2b20 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x000000058c1db0 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x000000058bb168 @error=nil, @subtotal="19.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x000000058b3148 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x000000058b1d70 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x00000007e57660 @error=nil, @return_url="http://localhost:3000/orders/87/confirm", @cancel_url="http://localhost:3000/orders/87/cancel">, @logger=#<Logger:0x0000000560b9e0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x0000000560b9b8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x0000000560b8f0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x0000000560b8c8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x0000000560b800>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000007bd0d38 @base=#<Payment:0x00000009c594d8 ...>, @messages={}>, @request_id="f3d894ea-1f49-4ace-b0bc-f1f002bbd777", @header={}, @id="PAY-6GT55786J4961532NKS7LGKY", @create_time="2015-01-20T19:57:31Z", @update_time="2015-01-20T19:57:31Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x000000058948b0 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6GT55786J4961532NKS7LGKY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x000000058885b0 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7LM957191L970740Y", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000586c590 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-6GT55786J4961532NKS7LGKY/execute", @rel="execute", @method="POST">]>
I, [2015-01-20T19:57:31.466916 #10236]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-7LM957191L970740Y
I, [2015-01-20T19:57:31.529316 #10236]  INFO -- : Completed 403 Forbidden in 53472ms (ActiveRecord: 265.2ms)
D, [2015-01-20T19:59:01.969682 #10236] DEBUG -- : 
D, [2015-01-20T19:59:01.996683 #10236] DEBUG -- : 
I, [2015-01-20T19:59:02.086688 #10236]  INFO -- : Started GET "/orders/87/confirm?paymentId=PAY-6GT55786J4961532NKS7LGKY&token=EC-7LM957191L970740Y&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-20 19:59:01 +0000
I, [2015-01-20T19:59:02.189694 #10236]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-20T19:59:02.263698 #10236]  INFO -- :   Parameters: {"paymentId"=>"PAY-6GT55786J4961532NKS7LGKY", "token"=>"EC-7LM957191L970740Y", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"87"}
D, [2015-01-20T19:59:02.341703 #10236] DEBUG -- :   [1m[35mOrder Load (3.0ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "87"]]
I, [2015-01-20T20:03:36.858404 #10236]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-6GT55786J4961532NKS7LGKY
I, [2015-01-20T20:03:38.030471 #10236]  INFO -- : Response[200]: OK, Duration: 1.139s
D, [2015-01-20T20:03:41.054644 #10236] DEBUG -- :   [1m[36m (1.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-20T20:03:41.277657 #10236] DEBUG -- :   [1m[35mSQL (6.0ms)[0m  UPDATE "orders" SET "name" = ?, "email" = ?, "address" = ?, "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 87  [["name", "Test Buyer"], ["email", "simon.king65-buyer@gmail.com"], ["address", "1 Main Terrace"], ["shipping_address1", "1 Main Terrace"], ["updated_at", Tue, 20 Jan 2015 20:03:41 UTC +00:00]]
D, [2015-01-20T20:03:41.423666 #10236] DEBUG -- :   [1m[36m (95.0ms)[0m  [1mcommit transaction[0m
I, [2015-01-20T20:03:41.667679 #10236]  INFO -- :   Rendered orders/_form.html.erb (161.0ms)
I, [2015-01-20T20:03:41.740684 #10236]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (232.0ms)
I, [2015-01-20T20:03:41.927694 #10236]  INFO -- : Completed 200 OK in 279602ms (Views: 439.0ms | ActiveRecord: 105.0ms)
D, [2015-01-20T20:03:55.719955 #10236] DEBUG -- : 
D, [2015-01-20T20:03:55.739956 #10236] DEBUG -- : 
I, [2015-01-20T20:03:55.808960 #10236]  INFO -- : Started POST "/orders/87/execute/87/2VZ7YQDDDPPC4/PAY-6GT55786J4961532NKS7LGKY" for 127.0.0.1 at 2015-01-20 20:03:55 +0000
I, [2015-01-20T20:03:55.906966 #10236]  INFO -- : Processing by OrdersController#execute as HTML
I, [2015-01-20T20:03:55.997971 #10236]  INFO -- :   Parameters: {"authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order_id"=>"87", "payer_id"=>"2VZ7YQDDDPPC4", "payment_id"=>"PAY-6GT55786J4961532NKS7LGKY"}
D, [2015-01-20T20:03:56.079975 #10236] DEBUG -- :   [1m[35mOrder Load (2.0ms)[0m  SELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1  [["id", "87"]]
I, [2015-01-20T20:04:03.552403 #10236]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-6GT55786J4961532NKS7LGKY
I, [2015-01-20T20:04:04.640465 #10236]  INFO -- : Response[200]: OK, Duration: 1.054s
I, [2015-01-20T20:04:04.680467 #10236]  INFO -- : found payment #########
I, [2015-01-20T20:04:04.731470 #10236]  INFO -- : PayPal-Request-Id: 51b1543e-08ce-4796-a1e2-c579fd072cec
I, [2015-01-20T20:04:04.791474 #10236]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-6GT55786J4961532NKS7LGKY/execute
I, [2015-01-20T20:04:07.141608 #10236]  INFO -- : Response[200]: OK, Duration: 2.312s
D, [2015-01-20T20:04:07.195611 #10236] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-20T20:04:07.307618 #10236] DEBUG -- :   [1m[35mSQL (7.0ms)[0m  UPDATE "orders" SET "state" = ?, "updated_at" = ? WHERE "orders"."id" = 87  [["state", "approved"], ["updated_at", Tue, 20 Jan 2015 20:04:07 UTC +00:00]]
D, [2015-01-20T20:04:07.438625 #10236] DEBUG -- :   [1m[36m (92.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-20T20:04:07.505629 #10236] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 39]]
D, [2015-01-20T20:04:07.547631 #10236] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-20T20:04:07.629636 #10236] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 39]]
D, [2015-01-20T20:04:07.696640 #10236] DEBUG -- :   [1m[36mSQL (5.0ms)[0m  [1mDELETE FROM "carts" WHERE "carts"."id" = ?[0m  [["id", 39]]
D, [2015-01-20T20:04:07.842648 #10236] DEBUG -- :   [1m[35m (112.0ms)[0m  commit transaction
I, [2015-01-20T20:04:14.397023 #10236]  INFO -- : #<Order id: 87, name: "Test Buyer", address: "1 Main Terrace", email: "simon.king65-buyer@gmail.com", pay_type: "paypal", created_at: "2015-01-20 19:57:13", updated_at: "2015-01-20 20:04:07", payment_method: "Paypal", payment_id: "PAY-6GT55786J4961532NKS7LGKY", state: "approved", amount: nil, description: nil, shipping_address1: "1 Main Terrace">
I, [2015-01-20T20:04:14.727042 #10236]  INFO -- :   Rendered order_notifier/received.html.erb (6.0ms)
D, [2015-01-20T20:04:14.832048 #10236] DEBUG -- :   [1m[36mLineItem Load (3.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?[0m  [["order_id", 87]]
D, [2015-01-20T20:04:14.938054 #10236] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-20T20:04:14.985057 #10236]  INFO -- :   Rendered line_items/_line_item.text.erb (96.0ms)
I, [2015-01-20T20:04:15.025059 #10236]  INFO -- :   Rendered order_notifier/received.text.erb (246.0ms)
I, [2015-01-20T20:04:16.163124 #10236]  INFO -- : 
Sent mail to simon.king65-buyer@gmail.com (871.1ms)
D, [2015-01-20T20:04:16.579148 #10236] DEBUG -- : Date: Tue, 20 Jan 2015 20:04:15 +0000
From: Simon King <simon.king65@gmail.com>
To: simon.king65-buyer@gmail.com
Message-ID: <54beb4bf572d6_27fc56118b8847c2@Simon-PC.mail>
Subject: King Clothing Order Confirmation
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_54beb4bffe25_27fc56118b8846bc";
 charset=UTF-8
Content-Transfer-Encoding: 7bit


----==_mimepart_54beb4bffe25_27fc56118b8846bc
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Test Buyer

Thank you for your recent order from King Clothing.

You ordered the following items:

 1 x Camo Print Tee
We'll send you a separate e-mail when your order ships.
----==_mimepart_54beb4bffe25_27fc56118b8846bc
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<h1>OrderNotifier#received</h1>

<p>
  , thank you for your order, we will email you again once your order has been despatched. We hope you enjoy wearing your King Clothing brand tee-shirt.
</p>

----==_mimepart_54beb4bffe25_27fc56118b8846bc--

I, [2015-01-20T20:04:16.619150 #10236]  INFO -- : Completed 500 Internal Server Error in 20582ms
F, [2015-01-20T20:04:16.749158 #10236] FATAL -- : 
OpenSSL::SSL::SSLError (SSL_connect returned=1 errno=0 state=SSLv2/v3 read server hello A: unknown protocol):
  app/controllers/orders_controller.rb:81:in `execute'


I, [2015-01-20T20:04:17.239186 #10236]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_source.erb (13.0ms)
I, [2015-01-20T20:04:17.423196 #10236]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_trace.erb (17.0ms)
I, [2015-01-20T20:04:17.598206 #10236]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/_request_and_response.erb (12.0ms)
I, [2015-01-20T20:04:17.682211 #10236]  INFO -- :   Rendered C:/Ruby21-x64/lib/ruby/gems/2.1.0/gems/actionpack-4.0.0/lib/action_dispatch/middleware/templates/rescues/diagnostics.erb within rescues/layout (548.0ms)
D, [2015-01-20T20:04:17.715213 #10236] DEBUG -- : 
D, [2015-01-20T20:04:17.736214 #10236] DEBUG -- : 
I, [2015-01-20T20:04:17.806218 #10236]  INFO -- : Started POST "/orders/87/execute/87/2VZ7YQDDDPPC4/PAY-6GT55786J4961532NKS7LGKY" for 127.0.0.1 at 2015-01-20 20:04:17 +0000
I, [2015-01-20T20:04:17.889223 #10236]  INFO -- : Processing by OrdersController#execute as HTML
I, [2015-01-20T20:04:17.977228 #10236]  INFO -- :   Parameters: {"authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order_id"=>"87", "payer_id"=>"2VZ7YQDDDPPC4", "payment_id"=>"PAY-6GT55786J4961532NKS7LGKY"}
D, [2015-01-20T20:04:18.055232 #10236] DEBUG -- :   [1m[36mOrder Load (2.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "87"]]
I, [2015-01-20T20:04:27.731786 #10236]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-6GT55786J4961532NKS7LGKY
I, [2015-01-20T20:04:29.051861 #10236]  INFO -- : Response[200]: OK, Duration: 1.277s
I, [2015-01-20T20:04:29.107865 #10236]  INFO -- : found payment #########
I, [2015-01-20T20:04:29.185869 #10236]  INFO -- : PayPal-Request-Id: f5f9bbf4-2739-4dbc-9d1b-9daa033951a1
I, [2015-01-20T20:04:29.260873 #10236]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-6GT55786J4961532NKS7LGKY/execute
I, [2015-01-20T20:04:30.215928 #10236]  INFO -- : Response[400]: Bad Request, Duration: 0.909s
I, [2015-01-20T20:04:30.316934 #10236]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-6GT55786J4961532NKS7LGKY
I, [2015-01-20T20:04:31.504002 #10236]  INFO -- : Response[200]: OK, Duration: 1.143s
I, [2015-01-20T20:04:31.560005 #10236]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-20T20:04:31.613008 #10236]  INFO -- : Completed 302 Found in 13584ms (ActiveRecord: 2.0ms)
D, [2015-01-20T20:04:31.694012 #10236] DEBUG -- : 
D, [2015-01-20T20:04:31.719014 #10236] DEBUG -- : 
I, [2015-01-20T20:04:31.772017 #10236]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-20 20:04:31 +0000
I, [2015-01-20T20:04:31.881023 #10236]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-20T20:04:31.973028 #10236] DEBUG -- :   [1m[35mCart Load (2.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 39]]
D, [2015-01-20T20:04:32.017031 #10236] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-20T20:04:32.140038 #10236] DEBUG -- :   [1m[35mSQL (7.0ms)[0m  INSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Tue, 20 Jan 2015 20:04:32 UTC +00:00], ["updated_at", Tue, 20 Jan 2015 20:04:32 UTC +00:00]]
D, [2015-01-20T20:04:32.281046 #10236] DEBUG -- :   [1m[36m (99.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-20T20:04:32.377052 #10236] DEBUG -- :   [1m[35mProduct Load (3.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-20T20:04:32.449056 #10236]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (4.0ms)
I, [2015-01-20T20:04:32.498058 #10236]  INFO -- :   Rendered store/index.html.erb within layouts/application (145.0ms)
D, [2015-01-20T20:04:32.707070 #10236] DEBUG -- :   [1m[36mLineItem Exists (2.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 40]]
D, [2015-01-20T20:04:32.795075 #10236] DEBUG -- :   [1m[35mLineItem Load (2.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 40]]
I, [2015-01-20T20:04:32.830077 #10236]  INFO -- :   Rendered collection (1.0ms)
I, [2015-01-20T20:04:32.893081 #10236]  INFO -- :   Rendered carts/_cart.html.erb (143.0ms)
I, [2015-01-20T20:04:32.955085 #10236]  INFO -- : Completed 200 OK in 1034ms (Views: 621.0ms | ActiveRecord: 117.0ms)
D, [2015-01-20T21:08:46.724819 #10236] DEBUG -- : 
D, [2015-01-20T21:08:46.756020 #10236] DEBUG -- : 
I, [2015-01-20T21:08:46.802820 #10236]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-20 21:08:46 +0000
I, [2015-01-20T21:08:46.912020 #10236]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-20T21:08:46.974420 #10236]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-20T21:08:47.052420 #10236] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 40]]
D, [2015-01-20T21:08:47.130420 #10236] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-20T21:08:47.239620 #10236] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 40]]
D, [2015-01-20T21:08:47.346226 #10236] DEBUG -- :   [1m[35mProduct Load (2.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-20T21:08:47.389228 #10236] DEBUG -- :   [1m[36m (2.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-20T21:08:47.584429 #10236] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 40], ["created_at", Tue, 20 Jan 2015 21:08:47 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:53595d0,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Tue, 20 Jan 2015 21:08:47 UTC +00:00]]
D, [2015-01-20T21:08:47.802829 #10236] DEBUG -- :   [1m[36m (187.2ms)[0m  [1mcommit transaction[0m
D, [2015-01-20T21:08:47.943229 #10236] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 40]]
I, [2015-01-20T21:08:48.021230 #10236]  INFO -- :   Rendered line_items/_line_item.html.erb (15.6ms)
I, [2015-01-20T21:08:48.099230 #10236]  INFO -- :   Rendered carts/_cart.html.erb (202.8ms)
I, [2015-01-20T21:08:48.146030 #10236]  INFO -- :   Rendered line_items/create.js.erb (249.6ms)
I, [2015-01-20T21:08:48.192830 #10236]  INFO -- : Completed 200 OK in 1172ms (Views: 343.2ms | ActiveRecord: 206.8ms)
D, [2015-01-20T21:08:53.832117 #10236] DEBUG -- : 
D, [2015-01-20T21:08:53.847717 #10236] DEBUG -- : 
I, [2015-01-20T21:08:53.907518 #10236]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-20 21:08:53 +0000
I, [2015-01-20T21:08:53.985518 #10236]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-20T21:08:54.064518 #10236] DEBUG -- :   [1m[36mUser Load (15.6ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-20T21:08:54.126918 #10236] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-20T21:08:54.190319 #10236] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 40]]
D, [2015-01-20T21:08:54.268319 #10236] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 40]]
I, [2015-01-20T21:08:54.361919 #10236]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: "Paypal", payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-20T21:09:02.697351 #10236] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-20T21:09:02.817552 #10236] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "orders" ("created_at", "payment_method", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 20 Jan 2015 21:09:02 UTC +00:00], ["payment_method", "Paypal"], ["updated_at", Tue, 20 Jan 2015 21:09:02 UTC +00:00]]
D, [2015-01-20T21:09:02.907954 #10236] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 115[0m  [["cart_id", nil], ["order_id", 88], ["updated_at", Tue, 20 Jan 2015 21:09:02 UTC +00:00]]
I, [2015-01-20T21:09:02.939154 #10236]  INFO -- : about to @payment.create
D, [2015-01-20T21:09:04.009159 #10236] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-20T21:09:04.852560 #10236]  INFO -- : in order=
I, [2015-01-20T21:09:05.754564 #10236]  INFO -- : in payment.create
I, [2015-01-20T21:09:05.903366 #10236]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Camo Print Tee", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Camo Print Tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/88/confirm", "cancel_url"=>"http://localhost:3000/orders/88/cancel"}}
I, [2015-01-20T21:09:06.351568 #10236]  INFO -- : #<ActiveModel::Errors:0x00000005631a00 @base=#<Payment:0x000000078b71b0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000078b6350 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005bf0ef0 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005bf0770 @error=nil, @total="19.99", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000005be87a0 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005bc71b8 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000059414e8 @error=nil, @return_url="http://localhost:3000/orders/88/confirm", @cancel_url="http://localhost:3000/orders/88/cancel">, @logger=#<Logger:0x0000000560b9e0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x0000000560b9b8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x0000000560b8f0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x0000000560b8c8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x0000000560b800>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005631a00 ...>>, @messages={}>
I, [2015-01-20T21:09:06.367168 #10236]  INFO -- : got past invalid
I, [2015-01-20T21:09:06.445168 #10236]  INFO -- : PayPal-Request-Id: 695d2c1c-dc63-47de-8de5-f58835a43c77
I, [2015-01-20T21:09:06.476368 #10236]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-20T21:09:08.132773 #10236]  INFO -- : Response[201]: Created, Duration: 1.625s
I, [2015-01-20T21:09:08.179573 #10236]  INFO -- : back from super
I, [2015-01-20T21:09:08.602774 #10236]  INFO -- : {"id"=>"PAY-09145617K0962202GKS7MH6Q", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99", "details"=>{"subtotal"=>"19.99"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Camo Print Tee", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Camo Print Tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/88/confirm", "cancel_url"=>"http://localhost:3000/orders/88/cancel"}, "create_time"=>"2015-01-20T21:09:14Z", "update_time"=>"2015-01-20T21:09:14Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-09145617K0962202GKS7MH6Q", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-70R311274C035184X", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-09145617K0962202GKS7MH6Q/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-20T21:09:08.789974 #10236] DEBUG -- :   [1m[36mSQL (15.6ms)[0m  [1mUPDATE "orders" SET "payment_method" = ?, "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ?, "pay_type" = ? WHERE "orders"."id" = 88[0m  [["payment_method", "Paypal"], ["created_at", Tue, 20 Jan 2015 21:09:02 UTC +00:00], ["updated_at", Tue, 20 Jan 2015 21:09:02 UTC +00:00], ["id", 88], ["payment_id", "PAY-09145617K0962202GKS7MH6Q"], ["state", "created"], ["pay_type", "paypal"]]
D, [2015-01-20T21:09:08.883574 #10236] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 88
I, [2015-01-20T21:09:08.914774 #10236]  INFO -- : @payment save just done
I, [2015-01-20T21:09:09.751378 #10236]  INFO -- : #<Payment:0x000000078b71b0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000053a2140 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000053a10d8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000053a0430 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005372a58 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005371ef0 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000005370690 @error=nil, @subtotal="19.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000536ab00 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005369610 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000059414e8 @error=nil, @return_url="http://localhost:3000/orders/88/confirm", @cancel_url="http://localhost:3000/orders/88/cancel">, @logger=#<Logger:0x0000000560b9e0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x0000000560b9b8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x0000000560b8f0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x0000000560b8c8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x0000000560b800>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005631a00 @base=#<Payment:0x000000078b71b0 ...>, @messages={}>, @request_id="695d2c1c-dc63-47de-8de5-f58835a43c77", @header={}, @id="PAY-09145617K0962202GKS7MH6Q", @create_time="2015-01-20T21:09:14Z", @update_time="2015-01-20T21:09:14Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000005360ee8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-09145617K0962202GKS7MH6Q", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000535b4e8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-70R311274C035184X", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000005359dc8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-09145617K0962202GKS7MH6Q/execute", @rel="execute", @method="POST">]>
I, [2015-01-20T21:09:10.502382 #10236]  INFO -- : #<Payment:0x000000078b71b0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000053a2140 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000053a10d8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000053a0430 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005372a58 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005371ef0 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000005370690 @error=nil, @subtotal="19.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000536ab00 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005369610 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000059414e8 @error=nil, @return_url="http://localhost:3000/orders/88/confirm", @cancel_url="http://localhost:3000/orders/88/cancel">, @logger=#<Logger:0x0000000560b9e0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x0000000560b9b8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x0000000560b8f0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x0000000560b8c8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x0000000560b800>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005631a00 @base=#<Payment:0x000000078b71b0 ...>, @messages={}>, @request_id="695d2c1c-dc63-47de-8de5-f58835a43c77", @header={}, @id="PAY-09145617K0962202GKS7MH6Q", @create_time="2015-01-20T21:09:14Z", @update_time="2015-01-20T21:09:14Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000005360ee8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-09145617K0962202GKS7MH6Q", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000535b4e8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-70R311274C035184X", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000005359dc8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-09145617K0962202GKS7MH6Q/execute", @rel="execute", @method="POST">]>
D, [2015-01-20T21:09:10.689582 #10236] DEBUG -- :   [1m[36m (156.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-20T21:09:10.892383 #10236] DEBUG -- :   [1m[35mSQL (156.0ms)[0m  UPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 88
I, [2015-01-20T21:09:10.923583 #10236]  INFO -- : about to approve url
I, [2015-01-20T21:09:11.689984 #10236]  INFO -- : #<Payment:0x000000078b71b0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000053a2140 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000053a10d8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000053a0430 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005372a58 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005371ef0 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000005370690 @error=nil, @subtotal="19.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000536ab00 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005369610 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000059414e8 @error=nil, @return_url="http://localhost:3000/orders/88/confirm", @cancel_url="http://localhost:3000/orders/88/cancel">, @logger=#<Logger:0x0000000560b9e0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x0000000560b9b8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x0000000560b8f0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x0000000560b8c8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x0000000560b800>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005631a00 @base=#<Payment:0x000000078b71b0 ...>, @messages={}>, @request_id="695d2c1c-dc63-47de-8de5-f58835a43c77", @header={}, @id="PAY-09145617K0962202GKS7MH6Q", @create_time="2015-01-20T21:09:14Z", @update_time="2015-01-20T21:09:14Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000005360ee8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-09145617K0962202GKS7MH6Q", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000535b4e8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-70R311274C035184X", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000005359dc8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-09145617K0962202GKS7MH6Q/execute", @rel="execute", @method="POST">]>
I, [2015-01-20T21:09:12.454386 #10236]  INFO -- : #<Payment:0x000000078b71b0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000053a2140 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000053a10d8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000053a0430 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005372a58 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005371ef0 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000005370690 @error=nil, @subtotal="19.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000536ab00 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005369610 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000059414e8 @error=nil, @return_url="http://localhost:3000/orders/88/confirm", @cancel_url="http://localhost:3000/orders/88/cancel">, @logger=#<Logger:0x0000000560b9e0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x0000000560b9b8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x0000000560b8f0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x0000000560b8c8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x0000000560b800>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005631a00 @base=#<Payment:0x000000078b71b0 ...>, @messages={}>, @request_id="695d2c1c-dc63-47de-8de5-f58835a43c77", @header={}, @id="PAY-09145617K0962202GKS7MH6Q", @create_time="2015-01-20T21:09:14Z", @update_time="2015-01-20T21:09:14Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000005360ee8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-09145617K0962202GKS7MH6Q", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000535b4e8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-70R311274C035184X", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000005359dc8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-09145617K0962202GKS7MH6Q/execute", @rel="execute", @method="POST">]>
I, [2015-01-20T21:09:12.501186 #10236]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-70R311274C035184X
I, [2015-01-20T21:09:13.249987 #10236]  INFO -- : #<Payment:0x000000078b71b0 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x000000053a2140 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x000000053a10d8 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x000000053a0430 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000005372a58 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000005371ef0 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000005370690 @error=nil, @subtotal="19.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000536ab00 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000005369610 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x000000059414e8 @error=nil, @return_url="http://localhost:3000/orders/88/confirm", @cancel_url="http://localhost:3000/orders/88/cancel">, @logger=#<Logger:0x0000000560b9e0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x0000000560b9b8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x0000000560b8f0 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x0000000560b8c8 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x0000000560b800>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000005631a00 @base=#<Payment:0x000000078b71b0 ...>, @messages={}>, @request_id="695d2c1c-dc63-47de-8de5-f58835a43c77", @header={}, @id="PAY-09145617K0962202GKS7MH6Q", @create_time="2015-01-20T21:09:14Z", @update_time="2015-01-20T21:09:14Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000005360ee8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-09145617K0962202GKS7MH6Q", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x0000000535b4e8 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-70R311274C035184X", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000005359dc8 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-09145617K0962202GKS7MH6Q/execute", @rel="execute", @method="POST">]>
I, [2015-01-20T21:09:13.327987 #10236]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-70R311274C035184X
I, [2015-01-20T21:09:13.359187 #10236]  INFO -- : Completed 403 Forbidden in 19342ms (ActiveRecord: 358.8ms)
D, [2015-01-20T21:09:56.736461 #10236] DEBUG -- : 
D, [2015-01-20T21:09:56.756463 #10236] DEBUG -- : 
I, [2015-01-20T21:09:56.844468 #10236]  INFO -- : Started GET "/orders/88/confirm?paymentId=PAY-09145617K0962202GKS7MH6Q&token=EC-70R311274C035184X&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-20 21:09:56 +0000
I, [2015-01-20T21:09:57.610511 #10236]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-20T21:09:57.684516 #10236]  INFO -- :   Parameters: {"paymentId"=>"PAY-09145617K0962202GKS7MH6Q", "token"=>"EC-70R311274C035184X", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"88"}
D, [2015-01-20T21:09:57.751519 #10236] DEBUG -- :   [1m[36mOrder Load (2.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "88"]]
I, [2015-01-20T21:09:59.789636 #10236]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-09145617K0962202GKS7MH6Q
I, [2015-01-20T21:10:01.321724 #10236]  INFO -- : Response[200]: OK, Duration: 1.504s
D, [2015-01-20T21:10:02.974818 #10236] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-20T21:10:03.138828 #10236] DEBUG -- :   [1m[36mSQL (8.0ms)[0m  [1mUPDATE "orders" SET "name" = ?, "email" = ?, "address" = ?, "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 88[0m  [["name", "Test Buyer"], ["email", "simon.king65-buyer@gmail.com"], ["address", "1 Main Terrace"], ["shipping_address1", "1 Main Terrace"], ["updated_at", Tue, 20 Jan 2015 21:10:02 UTC +00:00]]
D, [2015-01-20T21:10:03.544851 #10236] DEBUG -- :   [1m[35m (374.0ms)[0m  commit transaction
I, [2015-01-20T21:10:03.928873 #10236]  INFO -- :   Rendered orders/_form.html.erb (147.0ms)
I, [2015-01-20T21:10:03.991876 #10236]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (252.0ms)
I, [2015-01-20T21:10:04.607912 #10236]  INFO -- : Completed 200 OK in 6880ms (Views: 1016.1ms | ActiveRecord: 385.0ms)
D, [2015-01-20T21:10:05.766978 #10236] DEBUG -- : 
D, [2015-01-20T21:10:05.783979 #10236] DEBUG -- : 
I, [2015-01-20T21:10:05.833982 #10236]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-20 21:10:05 +0000
D, [2015-01-20T21:10:05.905986 #10236] DEBUG -- : 
D, [2015-01-20T21:10:05.925987 #10236] DEBUG -- : 
I, [2015-01-20T21:10:05.979990 #10236]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-20 21:10:05 +0000
D, [2015-01-20T21:10:06.289008 #10236] DEBUG -- : 
D, [2015-01-20T21:10:06.332010 #10236] DEBUG -- : 
I, [2015-01-20T21:10:06.385013 #10236]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-20 21:10:06 +0000
D, [2015-01-20T21:10:06.458017 #10236] DEBUG -- : 
D, [2015-01-20T21:10:06.481019 #10236] DEBUG -- : 
I, [2015-01-20T21:10:06.531022 #10236]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-20 21:10:06 +0000
D, [2015-01-20T21:10:06.604026 #10236] DEBUG -- : 
D, [2015-01-20T21:10:06.626027 #10236] DEBUG -- : 
I, [2015-01-20T21:10:06.691031 #10236]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-20 21:10:06 +0000
D, [2015-01-20T21:10:06.780036 #10236] DEBUG -- : 
D, [2015-01-20T21:10:06.806037 #10236] DEBUG -- : 
I, [2015-01-20T21:10:06.849040 #10236]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-20 21:10:06 +0000
D, [2015-01-20T21:10:06.937045 #10236] DEBUG -- : 
D, [2015-01-20T21:10:06.957046 #10236] DEBUG -- : 
I, [2015-01-20T21:10:07.004049 #10236]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-20 21:10:06 +0000
D, [2015-01-20T21:10:07.102054 #10236] DEBUG -- : 
D, [2015-01-20T21:10:07.122055 #10236] DEBUG -- : 
I, [2015-01-20T21:10:07.178059 #10236]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-20 21:10:07 +0000
D, [2015-01-20T21:10:07.262063 #10236] DEBUG -- : 
D, [2015-01-20T21:10:07.283065 #10236] DEBUG -- : 
I, [2015-01-20T21:10:07.338068 #10236]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-20 21:10:07 +0000
D, [2015-01-20T21:10:07.427073 #10236] DEBUG -- : 
D, [2015-01-20T21:10:07.451074 #10236] DEBUG -- : 
I, [2015-01-20T21:10:07.511078 #10236]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-20 21:10:07 +0000
D, [2015-01-20T21:10:07.585082 #10236] DEBUG -- : 
D, [2015-01-20T21:10:07.609083 #10236] DEBUG -- : 
I, [2015-01-20T21:10:07.670087 #10236]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-20 21:10:07 +0000
D, [2015-01-20T21:10:07.762092 #10236] DEBUG -- : 
D, [2015-01-20T21:10:07.785093 #10236] DEBUG -- : 
I, [2015-01-20T21:10:07.839096 #10236]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-20 21:10:07 +0000
D, [2015-01-20T21:10:07.980104 #10236] DEBUG -- : 
D, [2015-01-20T21:10:08.002106 #10236] DEBUG -- : 
I, [2015-01-20T21:10:08.054109 #10236]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-20 21:10:08 +0000
D, [2015-01-20T21:10:08.127113 #10236] DEBUG -- : 
D, [2015-01-20T21:10:08.149114 #10236] DEBUG -- : 
I, [2015-01-20T21:10:08.215118 #10236]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-20 21:10:08 +0000
D, [2015-01-20T21:10:08.294122 #10236] DEBUG -- : 
D, [2015-01-20T21:10:08.319124 #10236] DEBUG -- : 
I, [2015-01-20T21:10:08.384128 #10236]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-20 21:10:08 +0000
D, [2015-01-20T21:10:08.472133 #10236] DEBUG -- : 
D, [2015-01-20T21:10:08.498134 #10236] DEBUG -- : 
I, [2015-01-20T21:10:08.564138 #10236]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-20 21:10:08 +0000
D, [2015-01-20T21:10:08.637142 #10236] DEBUG -- : 
D, [2015-01-20T21:10:08.664144 #10236] DEBUG -- : 
I, [2015-01-20T21:10:08.718147 #10236]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-20 21:10:08 +0000
D, [2015-01-20T21:10:08.795151 #10236] DEBUG -- : 
D, [2015-01-20T21:10:08.819152 #10236] DEBUG -- : 
I, [2015-01-20T21:10:08.887156 #10236]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-20 21:10:08 +0000
D, [2015-01-20T21:10:08.966161 #10236] DEBUG -- : 
D, [2015-01-20T21:10:08.999163 #10236] DEBUG -- : 
I, [2015-01-20T21:10:09.061166 #10236]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-20 21:10:09 +0000
D, [2015-01-20T21:10:09.133170 #10236] DEBUG -- : 
D, [2015-01-20T21:10:09.155172 #10236] DEBUG -- : 
I, [2015-01-20T21:10:09.213175 #10236]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-20 21:10:09 +0000
D, [2015-01-20T21:10:09.293180 #10236] DEBUG -- : 
D, [2015-01-20T21:10:09.320181 #10236] DEBUG -- : 
I, [2015-01-20T21:10:09.378184 #10236]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-20 21:10:09 +0000
D, [2015-01-20T21:10:09.452189 #10236] DEBUG -- : 
D, [2015-01-20T21:10:09.482190 #10236] DEBUG -- : 
I, [2015-01-20T21:10:09.550194 #10236]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-20 21:10:09 +0000
D, [2015-01-20T21:10:09.620198 #10236] DEBUG -- : 
D, [2015-01-20T21:10:09.642200 #10236] DEBUG -- : 
I, [2015-01-20T21:10:09.700203 #10236]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-20 21:10:09 +0000
D, [2015-01-20T21:10:09.774207 #10236] DEBUG -- : 
D, [2015-01-20T21:10:09.797208 #10236] DEBUG -- : 
I, [2015-01-20T21:10:09.853212 #10236]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-20 21:10:09 +0000
D, [2015-01-20T21:10:09.926216 #10236] DEBUG -- : 
D, [2015-01-20T21:10:09.950217 #10236] DEBUG -- : 
I, [2015-01-20T21:10:10.019221 #10236]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-20 21:10:09 +0000
D, [2015-01-20T21:10:10.092225 #10236] DEBUG -- : 
D, [2015-01-20T21:10:10.116227 #10236] DEBUG -- : 
I, [2015-01-20T21:10:10.177230 #10236]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-20 21:10:10 +0000
D, [2015-01-20T21:10:10.263235 #10236] DEBUG -- : 
D, [2015-01-20T21:10:10.286236 #10236] DEBUG -- : 
I, [2015-01-20T21:10:10.357240 #10236]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-20 21:10:10 +0000
D, [2015-01-20T21:10:10.462246 #10236] DEBUG -- : 
D, [2015-01-20T21:10:10.487248 #10236] DEBUG -- : 
I, [2015-01-20T21:10:10.547251 #10236]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-20 21:10:10 +0000
D, [2015-01-20T21:10:13.578084 #10236] DEBUG -- : 
D, [2015-01-20T21:10:13.602085 #10236] DEBUG -- : 
I, [2015-01-20T21:10:13.682090 #10236]  INFO -- : Started POST "/orders/88/execute/88/2VZ7YQDDDPPC4/PAY-09145617K0962202GKS7MH6Q" for 127.0.0.1 at 2015-01-20 21:10:13 +0000
I, [2015-01-20T21:10:13.781095 #10236]  INFO -- : Processing by OrdersController#execute as HTML
I, [2015-01-20T21:10:13.883101 #10236]  INFO -- :   Parameters: {"authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order_id"=>"88", "payer_id"=>"2VZ7YQDDDPPC4", "payment_id"=>"PAY-09145617K0962202GKS7MH6Q"}
D, [2015-01-20T21:10:13.972106 #10236] DEBUG -- :   [1m[36mOrder Load (2.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "88"]]
I, [2015-01-20T21:10:35.236322 #10236]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-09145617K0962202GKS7MH6Q
I, [2015-01-20T21:10:36.793412 #10236]  INFO -- : Response[200]: OK, Duration: 1.519s
I, [2015-01-20T21:10:40.229608 #10236]  INFO -- : found payment #########
I, [2015-01-20T21:10:50.106173 #10236]  INFO -- : PayPal-Request-Id: 1bc624bd-890a-4089-8fd2-75a3003c0814
I, [2015-01-20T21:10:50.160176 #10236]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-09145617K0962202GKS7MH6Q/execute
I, [2015-01-20T21:10:52.805327 #10236]  INFO -- : Response[200]: OK, Duration: 2.612s
D, [2015-01-20T21:11:18.015769 #10236] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2015-01-20T21:11:18.131776 #10236] DEBUG -- :   [1m[36mSQL (7.0ms)[0m  [1mUPDATE "orders" SET "state" = ?, "updated_at" = ? WHERE "orders"."id" = 88[0m  [["state", "approved"], ["updated_at", Tue, 20 Jan 2015 21:11:18 UTC +00:00]]
D, [2015-01-20T21:11:18.257783 #10236] DEBUG -- :   [1m[35m (91.0ms)[0m  commit transaction
D, [2015-01-20T21:11:49.019543 #10236] DEBUG -- :   [1m[36mCart Load (4.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 40]]
D, [2015-01-20T21:11:49.064545 #10236] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-20T21:11:49.157550 #10236] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 40]]
D, [2015-01-20T21:11:49.226554 #10236] DEBUG -- :   [1m[35mSQL (5.0ms)[0m  DELETE FROM "carts" WHERE "carts"."id" = ?  [["id", 40]]
D, [2015-01-20T21:11:49.362562 #10236] DEBUG -- :   [1m[36m (93.0ms)[0m  [1mcommit transaction[0m
I, [2015-01-20T21:12:43.659668 #10236]  INFO -- : #<Order id: 88, name: "Test Buyer", address: "1 Main Terrace", email: "simon.king65-buyer@gmail.com", pay_type: "paypal", created_at: "2015-01-20 21:09:02", updated_at: "2015-01-20 21:11:18", payment_method: "Paypal", payment_id: "PAY-09145617K0962202GKS7MH6Q", state: "approved", amount: nil, description: nil, shipping_address1: "1 Main Terrace">
I, [2015-01-20T21:12:48.312934 #10236]  INFO -- :   Rendered order_notifier/received.html.erb (1.0ms)
D, [2015-01-20T21:12:48.421940 #10236] DEBUG -- :   [1m[35mLineItem Load (3.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 88]]
D, [2015-01-20T21:12:48.543947 #10236] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-20T21:12:48.594950 #10236]  INFO -- :   Rendered line_items/_line_item.text.erb (113.0ms)
I, [2015-01-20T21:12:48.644953 #10236]  INFO -- :   Rendered order_notifier/received.text.erb (271.0ms)
I, [2015-01-20T21:13:06.016947 #10236]  INFO -- : 
Sent mail to simon.king65-buyer@gmail.com (1188.1ms)
D, [2015-01-20T21:13:06.488974 #10236] DEBUG -- : Date: Tue, 20 Jan 2015 21:13:04 +0000
From: Simon King <simon.king65@gmail.com>
To: simon.king65-buyer@gmail.com
Message-ID: <54bec4e0ed857_27fc55364fc849d@Simon-PC.mail>
Subject: King Clothing Order Confirmation
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_54bec4d0a6fb3_27fc55364fc8484f";
 charset=UTF-8
Content-Transfer-Encoding: 7bit


----==_mimepart_54bec4d0a6fb3_27fc55364fc8484f
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Test Buyer

Thank you for your recent order from King Clothing.

You ordered the following items:

 1 x Camo Print Tee
We'll send you a separate e-mail when your order ships.
----==_mimepart_54bec4d0a6fb3_27fc55364fc8484f
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<h1>OrderNotifier#received</h1>

<p>
  , thank you for your order, we will email you again once your order has been despatched. We hope you enjoy wearing your King Clothing brand tee-shirt.
</p>

----==_mimepart_54bec4d0a6fb3_27fc55364fc8484f--

D, [2015-01-20T21:22:26.783465 #10144] DEBUG -- : 
D, [2015-01-20T21:22:26.810466 #10144] DEBUG -- : 
I, [2015-01-20T21:22:26.866469 #10144]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-20 21:22:26 +0000
D, [2015-01-20T21:22:28.879584 #10144] DEBUG -- :   [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
I, [2015-01-20T21:22:29.181602 #10144]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-20T21:22:29.421615 #10144] DEBUG -- :   [1m[35mCart Load (61.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 40]]
D, [2015-01-20T21:22:29.468618 #10144] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-20T21:22:29.691631 #10144] DEBUG -- :   [1m[35mSQL (47.0ms)[0m  INSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)  [["created_at", Tue, 20 Jan 2015 21:22:29 UTC +00:00], ["updated_at", Tue, 20 Jan 2015 21:22:29 UTC +00:00]]
D, [2015-01-20T21:22:29.847640 #10144] DEBUG -- :   [1m[36m (112.0ms)[0m  [1mcommit transaction[0m
D, [2015-01-20T21:22:30.111655 #10144] DEBUG -- :   [1m[35mProduct Load (1.0ms)[0m  SELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1
I, [2015-01-20T21:22:30.246663 #10144]  INFO -- : Cache digest for store/index.html: a93d4e2e981ab3dfce98a095c3b6c059
I, [2015-01-20T21:22:30.373670 #10144]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (47.0ms)
I, [2015-01-20T21:22:30.431673 #10144]  INFO -- :   Rendered store/index.html.erb within layouts/application (371.0ms)
D, [2015-01-20T21:22:32.346783 #10144] DEBUG -- :   [1m[36mLineItem Exists (1.0ms)[0m  [1mSELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1[0m  [["cart_id", 41]]
D, [2015-01-20T21:22:32.584796 #10144] DEBUG -- :   [1m[35mLineItem Load (1.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 41]]
I, [2015-01-20T21:22:32.626799 #10144]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-20T21:22:32.748806 #10144]  INFO -- :   Rendered carts/_cart.html.erb (216.0ms)
I, [2015-01-20T21:22:32.803809 #10144]  INFO -- : Completed 200 OK in 3569ms (Views: 2862.2ms | ActiveRecord: 229.0ms)
D, [2015-01-20T21:22:33.102826 #10144] DEBUG -- : 
D, [2015-01-20T21:22:33.129828 #10144] DEBUG -- : 
I, [2015-01-20T21:22:33.188831 #10144]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-20 21:22:33 +0000
D, [2015-01-20T21:22:33.250834 #10144] DEBUG -- : 
D, [2015-01-20T21:22:33.276836 #10144] DEBUG -- : 
I, [2015-01-20T21:22:33.338840 #10144]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-20 21:22:33 +0000
D, [2015-01-20T21:22:33.394843 #10144] DEBUG -- : 
D, [2015-01-20T21:22:33.419844 #10144] DEBUG -- : 
I, [2015-01-20T21:22:33.486848 #10144]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-20 21:22:33 +0000
D, [2015-01-20T21:22:33.538851 #10144] DEBUG -- : 
D, [2015-01-20T21:22:33.562852 #10144] DEBUG -- : 
I, [2015-01-20T21:22:33.626856 #10144]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-20 21:22:33 +0000
D, [2015-01-20T21:22:33.679859 #10144] DEBUG -- : 
D, [2015-01-20T21:22:33.705861 #10144] DEBUG -- : 
I, [2015-01-20T21:22:33.770864 #10144]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-20 21:22:33 +0000
D, [2015-01-20T21:22:33.825867 #10144] DEBUG -- : 
D, [2015-01-20T21:22:33.850869 #10144] DEBUG -- : 
I, [2015-01-20T21:22:33.912872 #10144]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-20 21:22:33 +0000
D, [2015-01-20T21:22:33.966875 #10144] DEBUG -- : 
D, [2015-01-20T21:22:33.992877 #10144] DEBUG -- : 
I, [2015-01-20T21:22:34.059881 #10144]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-20 21:22:33 +0000
D, [2015-01-20T21:22:34.114884 #10144] DEBUG -- : 
D, [2015-01-20T21:22:34.139885 #10144] DEBUG -- : 
I, [2015-01-20T21:22:34.205889 #10144]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-20 21:22:34 +0000
D, [2015-01-20T21:22:34.260892 #10144] DEBUG -- : 
D, [2015-01-20T21:22:34.285894 #10144] DEBUG -- : 
I, [2015-01-20T21:22:34.348897 #10144]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-20 21:22:34 +0000
D, [2015-01-20T21:22:34.401900 #10144] DEBUG -- : 
D, [2015-01-20T21:22:34.427902 #10144] DEBUG -- : 
I, [2015-01-20T21:22:34.493906 #10144]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-20 21:22:34 +0000
D, [2015-01-20T21:22:34.547909 #10144] DEBUG -- : 
D, [2015-01-20T21:22:34.571910 #10144] DEBUG -- : 
I, [2015-01-20T21:22:34.640914 #10144]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-20 21:22:34 +0000
D, [2015-01-20T21:22:34.733919 #10144] DEBUG -- : 
D, [2015-01-20T21:22:34.759921 #10144] DEBUG -- : 
I, [2015-01-20T21:22:34.818924 #10144]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-20 21:22:34 +0000
D, [2015-01-20T21:22:34.880928 #10144] DEBUG -- : 
D, [2015-01-20T21:22:34.906929 #10144] DEBUG -- : 
I, [2015-01-20T21:22:34.969933 #10144]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-20 21:22:34 +0000
D, [2015-01-20T21:22:35.029936 #10144] DEBUG -- : 
D, [2015-01-20T21:22:35.050937 #10144] DEBUG -- : 
I, [2015-01-20T21:22:35.122942 #10144]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-20 21:22:35 +0000
D, [2015-01-20T21:22:35.189945 #10144] DEBUG -- : 
D, [2015-01-20T21:22:35.214947 #10144] DEBUG -- : 
I, [2015-01-20T21:22:35.280951 #10144]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-20 21:22:35 +0000
D, [2015-01-20T21:22:35.338954 #10144] DEBUG -- : 
D, [2015-01-20T21:22:35.361955 #10144] DEBUG -- : 
I, [2015-01-20T21:22:35.427959 #10144]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-20 21:22:35 +0000
D, [2015-01-20T21:22:35.489963 #10144] DEBUG -- : 
D, [2015-01-20T21:22:35.515964 #10144] DEBUG -- : 
I, [2015-01-20T21:22:35.578968 #10144]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-20 21:22:35 +0000
D, [2015-01-20T21:22:35.630971 #10144] DEBUG -- : 
D, [2015-01-20T21:22:35.656972 #10144] DEBUG -- : 
I, [2015-01-20T21:22:35.719976 #10144]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-20 21:22:35 +0000
D, [2015-01-20T21:22:35.771979 #10144] DEBUG -- : 
D, [2015-01-20T21:22:35.795980 #10144] DEBUG -- : 
I, [2015-01-20T21:22:35.861984 #10144]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-20 21:22:35 +0000
D, [2015-01-20T21:22:35.911987 #10144] DEBUG -- : 
D, [2015-01-20T21:22:35.935988 #10144] DEBUG -- : 
I, [2015-01-20T21:22:35.999992 #10144]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-20 21:22:35 +0000
D, [2015-01-20T21:22:36.048995 #10144] DEBUG -- : 
D, [2015-01-20T21:22:36.074996 #10144] DEBUG -- : 
I, [2015-01-20T21:22:36.141000 #10144]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-20 21:22:36 +0000
D, [2015-01-20T21:22:36.264007 #10144] DEBUG -- : 
D, [2015-01-20T21:22:36.287008 #10144] DEBUG -- : 
I, [2015-01-20T21:22:36.350012 #10144]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-20 21:22:36 +0000
D, [2015-01-20T21:22:36.405015 #10144] DEBUG -- : 
D, [2015-01-20T21:22:36.430016 #10144] DEBUG -- : 
I, [2015-01-20T21:22:36.498020 #10144]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-20 21:22:36 +0000
D, [2015-01-20T21:22:36.552023 #10144] DEBUG -- : 
D, [2015-01-20T21:22:36.579025 #10144] DEBUG -- : 
I, [2015-01-20T21:22:36.643029 #10144]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-20 21:22:36 +0000
D, [2015-01-20T21:22:36.698032 #10144] DEBUG -- : 
D, [2015-01-20T21:22:36.723033 #10144] DEBUG -- : 
I, [2015-01-20T21:22:36.788037 #10144]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-20 21:22:36 +0000
D, [2015-01-20T21:22:36.842040 #10144] DEBUG -- : 
D, [2015-01-20T21:22:36.867041 #10144] DEBUG -- : 
I, [2015-01-20T21:22:36.932045 #10144]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-20 21:22:36 +0000
D, [2015-01-20T21:22:37.042051 #10144] DEBUG -- : 
D, [2015-01-20T21:22:37.064053 #10144] DEBUG -- : 
I, [2015-01-20T21:22:37.124056 #10144]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-20 21:22:37 +0000
D, [2015-01-20T21:22:37.203061 #10144] DEBUG -- : 
D, [2015-01-20T21:22:37.226062 #10144] DEBUG -- : 
I, [2015-01-20T21:22:37.280065 #10144]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-20 21:22:37 +0000
D, [2015-01-20T21:22:37.335068 #10144] DEBUG -- : 
D, [2015-01-20T21:22:37.363070 #10144] DEBUG -- : 
I, [2015-01-20T21:22:37.424073 #10144]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-20 21:22:37 +0000
D, [2015-01-20T21:22:37.477076 #10144] DEBUG -- : 
D, [2015-01-20T21:22:37.498077 #10144] DEBUG -- : 
I, [2015-01-20T21:22:37.566081 #10144]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-20 21:22:37 +0000
D, [2015-01-20T21:22:41.091920 #10144] DEBUG -- : 
D, [2015-01-20T21:22:41.107520 #10144] DEBUG -- : 
I, [2015-01-20T21:22:41.185520 #10144]  INFO -- : Started POST "/line_items?product_id=1" for 127.0.0.1 at 2015-01-20 21:22:41 +0000
I, [2015-01-20T21:22:41.279121 #10144]  INFO -- : Processing by LineItemsController#create as JS
I, [2015-01-20T21:22:41.358121 #10144]  INFO -- :   Parameters: {"utf8"=>"âœ“", "item"=>{"sizze"=>"extra small"}, "commit"=>"Add to Cart", "product_id"=>"1"}
D, [2015-01-20T21:22:41.436121 #10144] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 41]]
D, [2015-01-20T21:22:41.529721 #10144] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? LIMIT 1  [["id", "1"]]
D, [2015-01-20T21:22:41.670121 #10144] DEBUG -- :   [1m[36mLineItem Load (0.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ? AND "line_items"."product_id" = 1 LIMIT 1[0m  [["cart_id", 41]]
D, [2015-01-20T21:22:41.872922 #10144] DEBUG -- :   [1m[35mProduct Load (0.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
D, [2015-01-20T21:22:41.919722 #10144] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-20T21:22:42.138122 #10144] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  INSERT INTO "line_items" ("cart_id", "created_at", "product_id", "productprice", "size", "updated_at") VALUES (?, ?, ?, ?, ?, ?)  [["cart_id", 41], ["created_at", Tue, 20 Jan 2015 21:22:41 UTC +00:00], ["product_id", 1], ["productprice", #<BigDecimal:7ed7310,'0.1999E2',18(36)>], ["size", "extra small"], ["updated_at", Tue, 20 Jan 2015 21:22:41 UTC +00:00]]
D, [2015-01-20T21:22:42.325323 #10144] DEBUG -- :   [1m[36m (140.4ms)[0m  [1mcommit transaction[0m
D, [2015-01-20T21:22:42.434523 #10144] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 41]]
I, [2015-01-20T21:22:42.496923 #10144]  INFO -- :   Rendered line_items/_line_item.html.erb (0.0ms)
I, [2015-01-20T21:22:42.559323 #10144]  INFO -- :   Rendered carts/_cart.html.erb (171.6ms)
I, [2015-01-20T21:22:42.606123 #10144]  INFO -- :   Rendered line_items/create.js.erb (218.4ms)
I, [2015-01-20T21:22:42.668523 #10144]  INFO -- : Completed 200 OK in 1248ms (Views: 280.8ms | ActiveRecord: 140.4ms)
D, [2015-01-20T21:23:17.765878 #10144] DEBUG -- : 
D, [2015-01-20T21:23:17.797078 #10144] DEBUG -- : 
I, [2015-01-20T21:23:17.843878 #10144]  INFO -- : Started GET "/orders/ppcheckout" for 127.0.0.1 at 2015-01-20 21:23:17 +0000
I, [2015-01-20T21:23:17.937478 #10144]  INFO -- : Processing by OrdersController#ppcheckout as HTML
D, [2015-01-20T21:23:18.015478 #10144] DEBUG -- :   [1m[36mUser Load (0.0ms)[0m  [1mSELECT "users".* FROM "users" WHERE "users"."id" = 2 LIMIT 1[0m
D, [2015-01-20T21:23:18.124678 #10144] DEBUG -- :   [1m[35mUser Load (0.0ms)[0m  SELECT "users".* FROM "users" WHERE "users"."name" = 'Ollie' LIMIT 1
D, [2015-01-20T21:23:18.187078 #10144] DEBUG -- :   [1m[36mCart Load (0.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 41]]
D, [2015-01-20T21:23:18.296279 #10144] DEBUG -- :   [1m[35mLineItem Load (0.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?  [["cart_id", 41]]
I, [2015-01-20T21:23:18.499079 #10144]  INFO -- : #<Order id: nil, name: nil, address: nil, email: nil, pay_type: nil, created_at: nil, updated_at: nil, payment_method: "Paypal", payment_id: nil, state: nil, amount: nil, description: nil, shipping_address1: nil>
D, [2015-01-20T21:23:37.632320 #10144] DEBUG -- :   [1m[36m (0.0ms)[0m  [1mbegin transaction[0m
D, [2015-01-20T21:23:37.788321 #10144] DEBUG -- :   [1m[35mSQL (15.6ms)[0m  INSERT INTO "orders" ("created_at", "payment_method", "updated_at") VALUES (?, ?, ?)  [["created_at", Tue, 20 Jan 2015 21:23:37 UTC +00:00], ["payment_method", "Paypal"], ["updated_at", Tue, 20 Jan 2015 21:23:37 UTC +00:00]]
D, [2015-01-20T21:23:37.944321 #10144] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "line_items" SET "cart_id" = ?, "order_id" = ?, "updated_at" = ? WHERE "line_items"."id" = 116[0m  [["cart_id", nil], ["order_id", 89], ["updated_at", Tue, 20 Jan 2015 21:23:37 UTC +00:00]]
I, [2015-01-20T21:23:37.991121 #10144]  INFO -- : about to @payment.create
D, [2015-01-20T21:23:38.991523 #10144] DEBUG -- :   [1m[35mProduct Load (15.6ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-20T21:23:40.223925 #10144]  INFO -- : in order=
I, [2015-01-20T21:23:41.659128 #10144]  INFO -- : in payment.create
I, [2015-01-20T21:23:41.830728 #10144]  INFO -- : {"intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99"}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Camo Print Tee", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Camo Print Tee"}]}}], "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/89/confirm", "cancel_url"=>"http://localhost:3000/orders/89/cancel"}}
I, [2015-01-20T21:23:42.361129 #10144]  INFO -- : #<ActiveModel::Errors:0x00000009f74190 @base=#<Payment:0x0000000addb210 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x0000000adda720 @error=nil, @payment_method="paypal">, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x0000000a85e9b8 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x0000000a85e170 @error=nil, @total="19.99", @currency="GBP">, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x0000000a857550 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x0000000a84fdc8 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000a5bb4e0 @error=nil, @return_url="http://localhost:3000/orders/89/confirm", @cancel_url="http://localhost:3000/orders/89/cancel">, @logger=#<Logger:0x00000005859ee0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005859eb8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005859e40 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005859df0 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005859d28>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009f74190 ...>>, @messages={}>
I, [2015-01-20T21:23:42.376729 #10144]  INFO -- : got past invalid
I, [2015-01-20T21:23:42.657529 #10144]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/oauth2/token
I, [2015-01-20T21:23:44.295532 #10144]  INFO -- : Response[200]: OK, Duration: 1.607s
I, [2015-01-20T21:23:44.357932 #10144]  INFO -- : PayPal-Request-Id: f73317a0-d25d-4eef-8b81-b6b795527a55
I, [2015-01-20T21:23:44.420332 #10144]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment
I, [2015-01-20T21:23:45.793135 #10144]  INFO -- : Response[201]: Created, Duration: 1.342s
I, [2015-01-20T21:23:45.824335 #10144]  INFO -- : back from super
I, [2015-01-20T21:23:46.261136 #10144]  INFO -- : {"id"=>"PAY-8K8442287V879933RKS7MOZY", "intent"=>"sale", "payer"=>{"payment_method"=>"paypal"}, "transactions"=>[{"amount"=>{"currency"=>"GBP", "total"=>"19.99", "details"=>{"subtotal"=>"19.99"}}, "description"=>"King Clothing", "item_list"=>{"items"=>[{"quantity"=>"1", "name"=>"Camo Print Tee", "price"=>"19.99", "currency"=>"GBP", "sku"=>"Camo Print Tee"}]}}], "state"=>"created", "redirect_urls"=>{"return_url"=>"http://localhost:3000/orders/89/confirm", "cancel_url"=>"http://localhost:3000/orders/89/cancel"}, "create_time"=>"2015-01-20T21:23:51Z", "update_time"=>"2015-01-20T21:23:51Z", "links"=>[{"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-8K8442287V879933RKS7MOZY", "rel"=>"self", "method"=>"GET"}, {"href"=>"https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-12M093754E838020J", "rel"=>"approval_url", "method"=>"REDIRECT"}, {"href"=>"https://api.sandbox.paypal.com/v1/payments/payment/PAY-8K8442287V879933RKS7MOZY/execute", "rel"=>"execute", "method"=>"POST"}]}
D, [2015-01-20T21:23:46.479536 #10144] DEBUG -- :   [1m[36mSQL (0.0ms)[0m  [1mUPDATE "orders" SET "payment_method" = ?, "created_at" = ?, "updated_at" = ?, "id" = ?, "payment_id" = ?, "state" = ?, "pay_type" = ? WHERE "orders"."id" = 89[0m  [["payment_method", "Paypal"], ["created_at", Tue, 20 Jan 2015 21:23:37 UTC +00:00], ["updated_at", Tue, 20 Jan 2015 21:23:37 UTC +00:00], ["id", 89], ["payment_id", "PAY-8K8442287V879933RKS7MOZY"], ["state", "created"], ["pay_type", "paypal"]]
D, [2015-01-20T21:23:46.541936 #10144] DEBUG -- :   [1m[35mSQL (0.0ms)[0m  UPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 89
I, [2015-01-20T21:23:46.573136 #10144]  INFO -- : @payment save just done
I, [2015-01-20T21:23:47.713938 #10144]  INFO -- : #<Payment:0x0000000addb210 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009a45390 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009a44878 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009a44300 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009a2f720 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009a2f1a8 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009a2de70 @error=nil, @subtotal="19.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009a2ce08 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009a2c0e8 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000a5bb4e0 @error=nil, @return_url="http://localhost:3000/orders/89/confirm", @cancel_url="http://localhost:3000/orders/89/cancel">, @logger=#<Logger:0x00000005859ee0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005859eb8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005859e40 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005859df0 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005859d28>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009f74190 @base=#<Payment:0x0000000addb210 ...>, @messages={}>, @request_id="f73317a0-d25d-4eef-8b81-b6b795527a55", @header={}, @id="PAY-8K8442287V879933RKS7MOZY", @create_time="2015-01-20T21:23:51Z", @update_time="2015-01-20T21:23:51Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009a25310 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8K8442287V879933RKS7MOZY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009a24050 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-12M093754E838020J", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009a1a398 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8K8442287V879933RKS7MOZY/execute", @rel="execute", @method="POST">]>
I, [2015-01-20T21:23:48.852740 #10144]  INFO -- : #<Payment:0x0000000addb210 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009a45390 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009a44878 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009a44300 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009a2f720 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009a2f1a8 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009a2de70 @error=nil, @subtotal="19.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009a2ce08 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009a2c0e8 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000a5bb4e0 @error=nil, @return_url="http://localhost:3000/orders/89/confirm", @cancel_url="http://localhost:3000/orders/89/cancel">, @logger=#<Logger:0x00000005859ee0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005859eb8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005859e40 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005859df0 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005859d28>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009f74190 @base=#<Payment:0x0000000addb210 ...>, @messages={}>, @request_id="f73317a0-d25d-4eef-8b81-b6b795527a55", @header={}, @id="PAY-8K8442287V879933RKS7MOZY", @create_time="2015-01-20T21:23:51Z", @update_time="2015-01-20T21:23:51Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009a25310 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8K8442287V879933RKS7MOZY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009a24050 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-12M093754E838020J", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009a1a398 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8K8442287V879933RKS7MOZY/execute", @rel="execute", @method="POST">]>
D, [2015-01-20T21:23:48.993140 #10144] DEBUG -- :   [1m[36m (109.2ms)[0m  [1mcommit transaction[0m
D, [2015-01-20T21:23:49.242741 #10144] DEBUG -- :   [1m[35mSQL (171.6ms)[0m  UPDATE "orders" SET "payment_method" = 'Paypal' WHERE "orders"."id" = 89
I, [2015-01-20T21:23:49.273941 #10144]  INFO -- : about to approve url
I, [2015-01-20T21:23:50.256743 #10144]  INFO -- : #<Payment:0x0000000addb210 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009a45390 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009a44878 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009a44300 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009a2f720 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009a2f1a8 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009a2de70 @error=nil, @subtotal="19.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009a2ce08 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009a2c0e8 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000a5bb4e0 @error=nil, @return_url="http://localhost:3000/orders/89/confirm", @cancel_url="http://localhost:3000/orders/89/cancel">, @logger=#<Logger:0x00000005859ee0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005859eb8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005859e40 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005859df0 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005859d28>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009f74190 @base=#<Payment:0x0000000addb210 ...>, @messages={}>, @request_id="f73317a0-d25d-4eef-8b81-b6b795527a55", @header={}, @id="PAY-8K8442287V879933RKS7MOZY", @create_time="2015-01-20T21:23:51Z", @update_time="2015-01-20T21:23:51Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009a25310 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8K8442287V879933RKS7MOZY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009a24050 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-12M093754E838020J", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009a1a398 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8K8442287V879933RKS7MOZY/execute", @rel="execute", @method="POST">]>
I, [2015-01-20T21:23:51.255144 #10144]  INFO -- : #<Payment:0x0000000addb210 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009a45390 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009a44878 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009a44300 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009a2f720 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009a2f1a8 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009a2de70 @error=nil, @subtotal="19.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009a2ce08 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009a2c0e8 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000a5bb4e0 @error=nil, @return_url="http://localhost:3000/orders/89/confirm", @cancel_url="http://localhost:3000/orders/89/cancel">, @logger=#<Logger:0x00000005859ee0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005859eb8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005859e40 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005859df0 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005859d28>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009f74190 @base=#<Payment:0x0000000addb210 ...>, @messages={}>, @request_id="f73317a0-d25d-4eef-8b81-b6b795527a55", @header={}, @id="PAY-8K8442287V879933RKS7MOZY", @create_time="2015-01-20T21:23:51Z", @update_time="2015-01-20T21:23:51Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009a25310 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8K8442287V879933RKS7MOZY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009a24050 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-12M093754E838020J", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009a1a398 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8K8442287V879933RKS7MOZY/execute", @rel="execute", @method="POST">]>
I, [2015-01-20T21:23:51.317545 #10144]  INFO -- : https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-12M093754E838020J
I, [2015-01-20T21:23:52.266547 #10144]  INFO -- : #<Payment:0x0000000addb210 @error=nil, @intent="sale", @payer=#<PayPal::SDK::REST::DataTypes::Payer:0x00000009a45390 @error=nil, @payment_method="paypal", @payer_info=#<PayPal::SDK::REST::DataTypes::PayerInfo:0x00000009a44878 @error=nil, @shipping_address=#<PayPal::SDK::REST::DataTypes::ShippingAddress:0x00000009a44300 @error=nil>>>, @transactions=[#<PayPal::SDK::REST::DataTypes::Transaction:0x00000009a2f720 @error=nil, @amount=#<PayPal::SDK::REST::DataTypes::Amount:0x00000009a2f1a8 @error=nil, @total="19.99", @currency="GBP", @details=#<PayPal::SDK::REST::DataTypes::Details:0x00000009a2de70 @error=nil, @subtotal="19.99">>, @description="King Clothing", @item_list=#<PayPal::SDK::REST::DataTypes::ItemList:0x00000009a2ce08 @error=nil, @items=[#<PayPal::SDK::REST::DataTypes::Item:0x00000009a2c0e8 @error=nil, @name="Camo Print Tee", @sku="Camo Print Tee", @price="19.99", @currency="GBP", @quantity="1">]>, @related_resources=[]>], @redirect_urls=#<PayPal::SDK::REST::DataTypes::RedirectUrls:0x0000000a5bb4e0 @error=nil, @return_url="http://localhost:3000/orders/89/confirm", @cancel_url="http://localhost:3000/orders/89/cancel">, @logger=#<Logger:0x00000005859ee0 @progname=nil, @level=0, @default_formatter=#<Logger::Formatter:0x00000005859eb8 @datetime_format=nil>, @formatter=nil, @logdev=#<Logger::LogDevice:0x00000005859e40 @shift_size=1048576, @shift_age=0, @filename="Application.log", @dev=#<File:Application.log>, @mutex=#<Logger::LogDevice::LogDeviceMutex:0x00000005859df0 @mon_owner=nil, @mon_count=0, @mon_mutex=#<Mutex:0x00000005859d28>>>>, @validation_context=nil, @errors=#<ActiveModel::Errors:0x00000009f74190 @base=#<Payment:0x0000000addb210 ...>, @messages={}>, @request_id="f73317a0-d25d-4eef-8b81-b6b795527a55", @header={}, @id="PAY-8K8442287V879933RKS7MOZY", @create_time="2015-01-20T21:23:51Z", @update_time="2015-01-20T21:23:51Z", @state="created", @links=[#<PayPal::SDK::REST::DataTypes::Links:0x00000009a25310 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8K8442287V879933RKS7MOZY", @rel="self", @method="GET">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009a24050 @error=nil, @href="https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-12M093754E838020J", @rel="approval_url", @method="REDIRECT">, #<PayPal::SDK::REST::DataTypes::Links:0x00000009a1a398 @error=nil, @href="https://api.sandbox.paypal.com/v1/payments/payment/PAY-8K8442287V879933RKS7MOZY/execute", @rel="execute", @method="POST">]>
I, [2015-01-20T21:23:52.328947 #10144]  INFO -- : Redirected to https://www.sandbox.paypal.com/cgi-bin/webscr?cmd=_express-checkout&token=EC-12M093754E838020J
I, [2015-01-20T21:23:52.391347 #10144]  INFO -- : Completed 403 Forbidden in 34407ms (ActiveRecord: 312.0ms)
D, [2015-01-20T21:24:31.456379 #10144] DEBUG -- : 
D, [2015-01-20T21:24:31.481380 #10144] DEBUG -- : 
I, [2015-01-20T21:24:31.578386 #10144]  INFO -- : Started GET "/orders/89/confirm?paymentId=PAY-8K8442287V879933RKS7MOZY&token=EC-12M093754E838020J&PayerID=2VZ7YQDDDPPC4" for 127.0.0.1 at 2015-01-20 21:24:31 +0000
I, [2015-01-20T21:24:31.682392 #10144]  INFO -- : Processing by OrdersController#confirm as HTML
I, [2015-01-20T21:24:31.767397 #10144]  INFO -- :   Parameters: {"paymentId"=>"PAY-8K8442287V879933RKS7MOZY", "token"=>"EC-12M093754E838020J", "PayerID"=>"2VZ7YQDDDPPC4", "order_id"=>"89"}
D, [2015-01-20T21:24:31.858402 #10144] DEBUG -- :   [1m[36mOrder Load (3.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "89"]]
I, [2015-01-20T21:24:39.472837 #10144]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-8K8442287V879933RKS7MOZY
I, [2015-01-20T21:24:40.622903 #10144]  INFO -- : Response[200]: OK, Duration: 1.114s
D, [2015-01-20T21:24:42.071986 #10144] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2015-01-20T21:24:42.245996 #10144] DEBUG -- :   [1m[36mSQL (7.0ms)[0m  [1mUPDATE "orders" SET "name" = ?, "email" = ?, "address" = ?, "shipping_address1" = ?, "updated_at" = ? WHERE "orders"."id" = 89[0m  [["name", "Test Buyer"], ["email", "simon.king65-buyer@gmail.com"], ["address", "1 Main Terrace"], ["shipping_address1", "1 Main Terrace"], ["updated_at", Tue, 20 Jan 2015 21:24:42 UTC +00:00]]
D, [2015-01-20T21:24:42.408005 #10144] DEBUG -- :   [1m[35m (129.0ms)[0m  commit transaction
I, [2015-01-20T21:24:42.720023 #10144]  INFO -- :   Rendered orders/_form.html.erb (238.0ms)
I, [2015-01-20T21:24:42.778026 #10144]  INFO -- :   Rendered orders/confirm.html.erb within layouts/application (300.0ms)
I, [2015-01-20T21:24:42.954037 #10144]  INFO -- : Completed 200 OK in 11146ms (Views: 502.0ms | ActiveRecord: 141.0ms)
D, [2015-01-20T21:24:43.214051 #10144] DEBUG -- : 
D, [2015-01-20T21:24:43.231052 #10144] DEBUG -- : 
I, [2015-01-20T21:24:43.278055 #10144]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-20 21:24:43 +0000
D, [2015-01-20T21:24:43.369060 #10144] DEBUG -- : 
D, [2015-01-20T21:24:43.384061 #10144] DEBUG -- : 
I, [2015-01-20T21:24:43.428064 #10144]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-20 21:24:43 +0000
D, [2015-01-20T21:24:43.545070 #10144] DEBUG -- : 
D, [2015-01-20T21:24:43.582072 #10144] DEBUG -- : 
I, [2015-01-20T21:24:43.635076 #10144]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-20 21:24:43 +0000
D, [2015-01-20T21:24:43.706080 #10144] DEBUG -- : 
D, [2015-01-20T21:24:43.726081 #10144] DEBUG -- : 
I, [2015-01-20T21:24:43.779084 #10144]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-20 21:24:43 +0000
D, [2015-01-20T21:24:43.852088 #10144] DEBUG -- : 
D, [2015-01-20T21:24:43.879089 #10144] DEBUG -- : 
I, [2015-01-20T21:24:43.932092 #10144]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-20 21:24:43 +0000
D, [2015-01-20T21:24:44.017097 #10144] DEBUG -- : 
D, [2015-01-20T21:24:44.035098 #10144] DEBUG -- : 
I, [2015-01-20T21:24:44.084101 #10144]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-20 21:24:44 +0000
D, [2015-01-20T21:24:44.159105 #10144] DEBUG -- : 
D, [2015-01-20T21:24:44.181107 #10144] DEBUG -- : 
I, [2015-01-20T21:24:44.239110 #10144]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-20 21:24:44 +0000
D, [2015-01-20T21:24:44.311114 #10144] DEBUG -- : 
D, [2015-01-20T21:24:44.334115 #10144] DEBUG -- : 
I, [2015-01-20T21:24:44.375118 #10144]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-20 21:24:44 +0000
D, [2015-01-20T21:24:44.452122 #10144] DEBUG -- : 
D, [2015-01-20T21:24:44.473123 #10144] DEBUG -- : 
I, [2015-01-20T21:24:44.517126 #10144]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-20 21:24:44 +0000
D, [2015-01-20T21:24:44.599131 #10144] DEBUG -- : 
D, [2015-01-20T21:24:44.617132 #10144] DEBUG -- : 
I, [2015-01-20T21:24:44.673135 #10144]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-20 21:24:44 +0000
D, [2015-01-20T21:24:44.744139 #10144] DEBUG -- : 
D, [2015-01-20T21:24:44.772141 #10144] DEBUG -- : 
I, [2015-01-20T21:24:44.823143 #10144]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-20 21:24:44 +0000
D, [2015-01-20T21:24:44.902148 #10144] DEBUG -- : 
D, [2015-01-20T21:24:44.923149 #10144] DEBUG -- : 
I, [2015-01-20T21:24:44.971152 #10144]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-20 21:24:44 +0000
D, [2015-01-20T21:24:45.044156 #10144] DEBUG -- : 
D, [2015-01-20T21:24:45.074158 #10144] DEBUG -- : 
I, [2015-01-20T21:24:45.127161 #10144]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-20 21:24:45 +0000
D, [2015-01-20T21:24:45.194165 #10144] DEBUG -- : 
D, [2015-01-20T21:24:45.221166 #10144] DEBUG -- : 
I, [2015-01-20T21:24:45.276169 #10144]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-20 21:24:45 +0000
D, [2015-01-20T21:24:45.358174 #10144] DEBUG -- : 
D, [2015-01-20T21:24:45.384176 #10144] DEBUG -- : 
I, [2015-01-20T21:24:45.432178 #10144]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-20 21:24:45 +0000
D, [2015-01-20T21:24:45.504182 #10144] DEBUG -- : 
D, [2015-01-20T21:24:45.532184 #10144] DEBUG -- : 
I, [2015-01-20T21:24:45.578187 #10144]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-20 21:24:45 +0000
D, [2015-01-20T21:24:45.657191 #10144] DEBUG -- : 
D, [2015-01-20T21:24:45.676192 #10144] DEBUG -- : 
I, [2015-01-20T21:24:45.725195 #10144]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-20 21:24:45 +0000
D, [2015-01-20T21:24:45.797199 #10144] DEBUG -- : 
D, [2015-01-20T21:24:45.818200 #10144] DEBUG -- : 
I, [2015-01-20T21:24:45.868203 #10144]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-20 21:24:45 +0000
D, [2015-01-20T21:24:45.936207 #10144] DEBUG -- : 
D, [2015-01-20T21:24:45.963209 #10144] DEBUG -- : 
I, [2015-01-20T21:24:46.018212 #10144]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-20 21:24:45 +0000
D, [2015-01-20T21:24:46.086216 #10144] DEBUG -- : 
D, [2015-01-20T21:24:46.109217 #10144] DEBUG -- : 
I, [2015-01-20T21:24:46.160220 #10144]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-20 21:24:46 +0000
D, [2015-01-20T21:24:46.233224 #10144] DEBUG -- : 
D, [2015-01-20T21:24:46.259226 #10144] DEBUG -- : 
I, [2015-01-20T21:24:46.326229 #10144]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-20 21:24:46 +0000
D, [2015-01-20T21:24:46.406234 #10144] DEBUG -- : 
D, [2015-01-20T21:24:46.430235 #10144] DEBUG -- : 
I, [2015-01-20T21:24:46.488239 #10144]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-20 21:24:46 +0000
D, [2015-01-20T21:24:46.561243 #10144] DEBUG -- : 
D, [2015-01-20T21:24:46.584244 #10144] DEBUG -- : 
I, [2015-01-20T21:24:46.644248 #10144]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-20 21:24:46 +0000
D, [2015-01-20T21:24:46.717252 #10144] DEBUG -- : 
D, [2015-01-20T21:24:46.743253 #10144] DEBUG -- : 
I, [2015-01-20T21:24:46.805257 #10144]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-20 21:24:46 +0000
D, [2015-01-20T21:24:46.881261 #10144] DEBUG -- : 
D, [2015-01-20T21:24:46.908263 #10144] DEBUG -- : 
I, [2015-01-20T21:24:46.975267 #10144]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-20 21:24:46 +0000
D, [2015-01-20T21:24:47.046271 #10144] DEBUG -- : 
D, [2015-01-20T21:24:47.072272 #10144] DEBUG -- : 
I, [2015-01-20T21:24:47.139276 #10144]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-20 21:24:47 +0000
D, [2015-01-20T21:24:47.215280 #10144] DEBUG -- : 
D, [2015-01-20T21:24:47.236281 #10144] DEBUG -- : 
I, [2015-01-20T21:24:47.297285 #10144]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-20 21:24:47 +0000
D, [2015-01-20T21:24:51.341710 #10144] DEBUG -- : 
D, [2015-01-20T21:24:51.366711 #10144] DEBUG -- : 
I, [2015-01-20T21:24:51.450716 #10144]  INFO -- : Started POST "/orders/89/execute/89/2VZ7YQDDDPPC4/PAY-8K8442287V879933RKS7MOZY" for 127.0.0.1 at 2015-01-20 21:24:51 +0000
I, [2015-01-20T21:24:51.558722 #10144]  INFO -- : Processing by OrdersController#execute as HTML
I, [2015-01-20T21:24:51.668728 #10144]  INFO -- :   Parameters: {"authenticity_token"=>"zNmHvl/+ueeUW4bTUOPgbphWtn05CsBGvH9XCGaUnCI=", "order_id"=>"89", "payer_id"=>"2VZ7YQDDDPPC4", "payment_id"=>"PAY-8K8442287V879933RKS7MOZY"}
D, [2015-01-20T21:24:51.774734 #10144] DEBUG -- :   [1m[36mOrder Load (3.0ms)[0m  [1mSELECT "orders".* FROM "orders" WHERE "orders"."id" = ? LIMIT 1[0m  [["id", "89"]]
I, [2015-01-20T21:25:00.437230 #10144]  INFO -- : Request[get]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-8K8442287V879933RKS7MOZY
I, [2015-01-20T21:25:01.586296 #10144]  INFO -- : Response[200]: OK, Duration: 1.114s
I, [2015-01-20T21:25:03.978432 #10144]  INFO -- : found payment #########
I, [2015-01-20T21:25:05.191502 #10144]  INFO -- : PayPal-Request-Id: 7240fd91-bec3-4aa3-b3d9-1a2546b99ed5
I, [2015-01-20T21:25:05.252505 #10144]  INFO -- : Request[post]: https://api.sandbox.paypal.com/v1/payments/payment/PAY-8K8442287V879933RKS7MOZY/execute
I, [2015-01-20T21:25:07.356626 #10144]  INFO -- : Response[200]: OK, Duration: 2.061s
D, [2015-01-20T21:25:18.878285 #10144] DEBUG -- :   [1m[35m (1.0ms)[0m  begin transaction
D, [2015-01-20T21:25:19.019293 #10144] DEBUG -- :   [1m[36mSQL (6.0ms)[0m  [1mUPDATE "orders" SET "state" = ?, "updated_at" = ? WHERE "orders"."id" = 89[0m  [["state", "approved"], ["updated_at", Tue, 20 Jan 2015 21:25:18 UTC +00:00]]
D, [2015-01-20T21:25:19.245306 #10144] DEBUG -- :   [1m[35m (139.0ms)[0m  commit transaction
D, [2015-01-20T21:25:21.137414 #10144] DEBUG -- :   [1m[36mCart Load (3.0ms)[0m  [1mSELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1[0m  [["id", 41]]
D, [2015-01-20T21:25:21.188417 #10144] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2015-01-20T21:25:21.294423 #10144] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 41]]
D, [2015-01-20T21:25:21.369427 #10144] DEBUG -- :   [1m[35mSQL (4.0ms)[0m  DELETE FROM "carts" WHERE "carts"."id" = ?  [["id", 41]]
D, [2015-01-20T21:25:21.577439 #10144] DEBUG -- :   [1m[36m (162.0ms)[0m  [1mcommit transaction[0m
I, [2015-01-20T21:25:33.465119 #10144]  INFO -- : #<Order id: 89, name: "Test Buyer", address: "1 Main Terrace", email: "simon.king65-buyer@gmail.com", pay_type: "paypal", created_at: "2015-01-20 21:23:37", updated_at: "2015-01-20 21:25:18", payment_method: "Paypal", payment_id: "PAY-8K8442287V879933RKS7MOZY", state: "approved", amount: nil, description: nil, shipping_address1: "1 Main Terrace">
I, [2015-01-20T21:25:35.188217 #10144]  INFO -- :   Rendered order_notifier/received.html.erb (6.0ms)
D, [2015-01-20T21:25:35.317225 #10144] DEBUG -- :   [1m[35mLineItem Load (4.0ms)[0m  SELECT "line_items".* FROM "line_items" WHERE "line_items"."order_id" = ?  [["order_id", 89]]
D, [2015-01-20T21:25:35.452233 #10144] DEBUG -- :   [1m[36mProduct Load (2.0ms)[0m  [1mSELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1[0m  [["id", 1]]
I, [2015-01-20T21:25:35.510236 #10144]  INFO -- :   Rendered line_items/_line_item.text.erb (125.0ms)
I, [2015-01-20T21:25:35.563239 #10144]  INFO -- :   Rendered order_notifier/received.text.erb (309.0ms)
I, [2015-01-20T21:25:52.665217 #10144]  INFO -- : 
Sent mail to simon.king65-buyer@gmail.com (3118.2ms)
D, [2015-01-20T21:25:53.084241 #10144] DEBUG -- : Date: Tue, 20 Jan 2015 21:25:49 +0000
From: Simon King <simon.king65@gmail.com>
To: simon.king65-buyer@gmail.com
Message-ID: <54bec7dd9db9c_27a0547ce8089613@Simon-PC.mail>
Subject: King Clothing Order Confirmation
Mime-Version: 1.0
Content-Type: multipart/alternative;
 boundary="--==_mimepart_54bec7cf953aa_27a0547ce8089565";
 charset=UTF-8
Content-Transfer-Encoding: 7bit


----==_mimepart_54bec7cf953aa_27a0547ce8089565
Content-Type: text/plain;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

Dear Test Buyer

Thank you for your recent order from King Clothing.

You ordered the following items:

 1 x Camo Print Tee
We'll send you a separate e-mail when your order ships.
----==_mimepart_54bec7cf953aa_27a0547ce8089565
Content-Type: text/html;
 charset=UTF-8
Content-Transfer-Encoding: 7bit

<h1>OrderNotifier#received</h1>

<p>
  , thank you for your order, we will email you again once your order has been despatched. We hope you enjoy wearing your King Clothing brand tee-shirt.
</p>

----==_mimepart_54bec7cf953aa_27a0547ce8089565--

I, [2015-01-20T21:25:58.601557 #10144]  INFO -- : Redirected to http://localhost:3000/
I, [2015-01-20T21:26:02.764795 #10144]  INFO -- : Completed 302 Found in 71054ms (ActiveRecord: 328.0ms)
D, [2015-01-20T21:26:02.847799 #10144] DEBUG -- : 
D, [2015-01-20T21:26:02.870801 #10144] DEBUG -- : 
I, [2015-01-20T21:26:02.914803 #10144]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-20 21:26:02 +0000
I, [2015-01-20T21:26:03.042811 #10144]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-20T21:26:03.163818 #10144] DEBUG -- :   [1m[35m (2.0ms)[0m  begin transaction
D, [2015-01-20T21:26:03.278824 #10144] DEBUG -- :   [1m[36mSQL (8.0ms)[0m  [1mINSERT INTO "carts" ("created_at", "updated_at") VALUES (?, ?)[0m  [["created_at", Tue, 20 Jan 2015 21:26:03 UTC +00:00], ["updated_at", Tue, 20 Jan 2015 21:26:03 UTC +00:00]]
D, [2015-01-20T21:26:03.462835 #10144] DEBUG -- :   [1m[35m (140.0ms)[0m  commit transaction
D, [2015-01-20T21:26:03.584842 #10144] DEBUG -- :   [1m[36mProduct Load (3.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-20T21:26:03.658846 #10144]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (4.0ms)
I, [2015-01-20T21:26:03.710849 #10144]  INFO -- :   Rendered store/index.html.erb within layouts/application (156.0ms)
D, [2015-01-20T21:26:03.969864 #10144] DEBUG -- :   [1m[35mLineItem Exists (2.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 42]]
D, [2015-01-20T21:26:04.059869 #10144] DEBUG -- :   [1m[36mLineItem Load (2.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 42]]
I, [2015-01-20T21:26:04.093871 #10144]  INFO -- :   Rendered collection (0.0ms)
I, [2015-01-20T21:26:04.170875 #10144]  INFO -- :   Rendered carts/_cart.html.erb (151.0ms)
I, [2015-01-20T21:26:04.249880 #10144]  INFO -- : Completed 200 OK in 1086ms (Views: 708.0ms | ActiveRecord: 157.0ms)
D, [2015-01-20T21:26:04.657903 #10144] DEBUG -- : 
D, [2015-01-20T21:26:04.720907 #10144] DEBUG -- : 
I, [2015-01-20T21:26:04.788910 #10144]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-20 21:26:04 +0000
D, [2015-01-20T21:26:04.873915 #10144] DEBUG -- : 
D, [2015-01-20T21:26:04.890916 #10144] DEBUG -- : 
I, [2015-01-20T21:26:04.942919 #10144]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-20 21:26:04 +0000
D, [2015-01-20T21:26:05.013923 #10144] DEBUG -- : 
D, [2015-01-20T21:26:05.032924 #10144] DEBUG -- : 
I, [2015-01-20T21:26:05.081927 #10144]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-20 21:26:05 +0000
D, [2015-01-20T21:26:05.150931 #10144] DEBUG -- : 
D, [2015-01-20T21:26:05.176933 #10144] DEBUG -- : 
I, [2015-01-20T21:26:05.229936 #10144]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-20 21:26:05 +0000
D, [2015-01-20T21:26:05.308940 #10144] DEBUG -- : 
D, [2015-01-20T21:26:05.325941 #10144] DEBUG -- : 
I, [2015-01-20T21:26:05.376944 #10144]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-20 21:26:05 +0000
D, [2015-01-20T21:26:05.449948 #10144] DEBUG -- : 
D, [2015-01-20T21:26:05.467949 #10144] DEBUG -- : 
I, [2015-01-20T21:26:05.513952 #10144]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-20 21:26:05 +0000
D, [2015-01-20T21:26:05.597957 #10144] DEBUG -- : 
D, [2015-01-20T21:26:05.614958 #10144] DEBUG -- : 
I, [2015-01-20T21:26:05.669961 #10144]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-20 21:26:05 +0000
D, [2015-01-20T21:26:05.742965 #10144] DEBUG -- : 
D, [2015-01-20T21:26:05.761966 #10144] DEBUG -- : 
I, [2015-01-20T21:26:05.814969 #10144]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-20 21:26:05 +0000
D, [2015-01-20T21:26:05.880973 #10144] DEBUG -- : 
D, [2015-01-20T21:26:05.907974 #10144] DEBUG -- : 
I, [2015-01-20T21:26:05.958977 #10144]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-20 21:26:05 +0000
D, [2015-01-20T21:26:06.034982 #10144] DEBUG -- : 
D, [2015-01-20T21:26:06.055983 #10144] DEBUG -- : 
I, [2015-01-20T21:26:06.109986 #10144]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-20 21:26:06 +0000
D, [2015-01-20T21:26:06.204991 #10144] DEBUG -- : 
D, [2015-01-20T21:26:06.224993 #10144] DEBUG -- : 
I, [2015-01-20T21:26:06.274995 #10144]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-20 21:26:06 +0000
D, [2015-01-20T21:26:06.351000 #10144] DEBUG -- : 
D, [2015-01-20T21:26:06.370001 #10144] DEBUG -- : 
I, [2015-01-20T21:26:06.429004 #10144]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-20 21:26:06 +0000
D, [2015-01-20T21:26:06.501008 #10144] DEBUG -- : 
D, [2015-01-20T21:26:06.532010 #10144] DEBUG -- : 
I, [2015-01-20T21:26:06.604014 #10144]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-20 21:26:06 +0000
D, [2015-01-20T21:26:06.675018 #10144] DEBUG -- : 
D, [2015-01-20T21:26:06.700020 #10144] DEBUG -- : 
I, [2015-01-20T21:26:06.775024 #10144]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-20 21:26:06 +0000
D, [2015-01-20T21:26:06.847028 #10144] DEBUG -- : 
D, [2015-01-20T21:26:06.873030 #10144] DEBUG -- : 
I, [2015-01-20T21:26:06.940034 #10144]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-20 21:26:06 +0000
D, [2015-01-20T21:26:07.012038 #10144] DEBUG -- : 
D, [2015-01-20T21:26:07.037039 #10144] DEBUG -- : 
I, [2015-01-20T21:26:07.104043 #10144]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-20 21:26:07 +0000
D, [2015-01-20T21:26:07.183047 #10144] DEBUG -- : 
D, [2015-01-20T21:26:07.202049 #10144] DEBUG -- : 
I, [2015-01-20T21:26:07.257052 #10144]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-20 21:26:07 +0000
D, [2015-01-20T21:26:07.329056 #10144] DEBUG -- : 
D, [2015-01-20T21:26:07.351057 #10144] DEBUG -- : 
I, [2015-01-20T21:26:07.408060 #10144]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-20 21:26:07 +0000
D, [2015-01-20T21:26:07.484065 #10144] DEBUG -- : 
D, [2015-01-20T21:26:07.510066 #10144] DEBUG -- : 
I, [2015-01-20T21:26:07.581070 #10144]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-20 21:26:07 +0000
D, [2015-01-20T21:26:07.653074 #10144] DEBUG -- : 
D, [2015-01-20T21:26:07.678076 #10144] DEBUG -- : 
I, [2015-01-20T21:26:07.739079 #10144]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-20 21:26:07 +0000
D, [2015-01-20T21:26:07.811083 #10144] DEBUG -- : 
D, [2015-01-20T21:26:07.837085 #10144] DEBUG -- : 
I, [2015-01-20T21:26:07.903089 #10144]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-20 21:26:07 +0000
D, [2015-01-20T21:26:07.980093 #10144] DEBUG -- : 
D, [2015-01-20T21:26:08.012095 #10144] DEBUG -- : 
I, [2015-01-20T21:26:08.078099 #10144]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-20 21:26:08 +0000
D, [2015-01-20T21:26:08.154103 #10144] DEBUG -- : 
D, [2015-01-20T21:26:08.178104 #10144] DEBUG -- : 
I, [2015-01-20T21:26:08.240108 #10144]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-20 21:26:08 +0000
D, [2015-01-20T21:26:08.312112 #10144] DEBUG -- : 
D, [2015-01-20T21:26:08.337113 #10144] DEBUG -- : 
I, [2015-01-20T21:26:08.390116 #10144]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-20 21:26:08 +0000
D, [2015-01-20T21:26:08.469121 #10144] DEBUG -- : 
D, [2015-01-20T21:26:08.495122 #10144] DEBUG -- : 
I, [2015-01-20T21:26:08.563126 #10144]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-20 21:26:08 +0000
D, [2015-01-20T21:26:08.637131 #10144] DEBUG -- : 
D, [2015-01-20T21:26:08.663132 #10144] DEBUG -- : 
I, [2015-01-20T21:26:08.728136 #10144]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-20 21:26:08 +0000
D, [2015-01-20T21:26:08.811141 #10144] DEBUG -- : 
D, [2015-01-20T21:26:08.837142 #10144] DEBUG -- : 
I, [2015-01-20T21:26:08.895145 #10144]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-20 21:26:08 +0000
D, [2015-01-20T21:26:08.967149 #10144] DEBUG -- : 
D, [2015-01-20T21:26:08.989151 #10144] DEBUG -- : 
I, [2015-01-20T21:26:09.044154 #10144]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-20 21:26:08 +0000
D, [2015-01-20T21:26:09.120158 #10144] DEBUG -- : 
D, [2015-01-20T21:26:09.144160 #10144] DEBUG -- : 
I, [2015-01-20T21:26:09.203163 #10144]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-20 21:26:09 +0000
D, [2015-01-20T22:14:30.182997 #10196] DEBUG -- : 
D, [2015-01-20T22:14:30.256001 #10196] DEBUG -- : 
I, [2015-01-20T22:14:30.290003 #10196]  INFO -- : Started GET "/" for 127.0.0.1 at 2015-01-20 22:14:30 +0000
D, [2015-01-20T22:14:39.581535 #10196] DEBUG -- :   [1m[36mActiveRecord::SchemaMigration Load (1.0ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
I, [2015-01-20T22:14:41.280632 #10196]  INFO -- : Processing by StoreController#index as HTML
D, [2015-01-20T22:14:43.965785 #10196] DEBUG -- :   [1m[35mCart Load (40.0ms)[0m  SELECT "carts".* FROM "carts" WHERE "carts"."id" = ? LIMIT 1  [["id", 42]]
D, [2015-01-20T22:14:44.639824 #10196] DEBUG -- :   [1m[36mProduct Load (1.0ms)[0m  [1mSELECT "products".* FROM "products" ORDER BY "products".updated_at DESC LIMIT 1[0m
I, [2015-01-20T22:14:44.772832 #10196]  INFO -- : Cache digest for store/index.html: a93d4e2e981ab3dfce98a095c3b6c059
I, [2015-01-20T22:14:44.867837 #10196]  INFO -- : Read fragment views/store/products/2-20141107200509060857000/a93d4e2e981ab3dfce98a095c3b6c059 (24.0ms)
I, [2015-01-20T22:14:44.904839 #10196]  INFO -- :   Rendered store/index.html.erb within layouts/application (306.0ms)
D, [2015-01-20T22:14:53.795348 #10196] DEBUG -- :   [1m[35mLineItem Exists (1.0ms)[0m  SELECT 1 AS one FROM "line_items" WHERE "line_items"."cart_id" = ? LIMIT 1  [["cart_id", 42]]
D, [2015-01-20T22:14:54.170369 #10196] DEBUG -- :   [1m[36mLineItem Load (1.0ms)[0m  [1mSELECT "line_items".* FROM "line_items" WHERE "line_items"."cart_id" = ?[0m  [["cart_id", 42]]
D, [2015-01-20T22:14:54.603394 #10196] DEBUG -- :   [1m[35mProduct Load (5.0ms)[0m  SELECT "products".* FROM "products" WHERE "products"."id" = ? ORDER BY "products"."id" ASC LIMIT 1  [["id", 1]]
I, [2015-01-20T22:14:55.067420 #10196]  INFO -- :   Rendered line_items/_line_item.html.erb (730.0ms)
I, [2015-01-20T22:14:55.113423 #10196]  INFO -- :   Rendered carts/_cart.html.erb (1034.1ms)
I, [2015-01-20T22:14:55.172426 #10196]  INFO -- : Completed 200 OK in 13838ms (Views: 11050.6ms | ActiveRecord: 61.0ms)
D, [2015-01-20T22:14:57.485559 #10196] DEBUG -- : 
D, [2015-01-20T22:14:57.516561 #10196] DEBUG -- : 
I, [2015-01-20T22:14:57.565563 #10196]  INFO -- : Started GET "/assets/admin.css?body=1" for 127.0.0.1 at 2015-01-20 22:14:57 +0000
D, [2015-01-20T22:14:57.707571 #10196] DEBUG -- : 
D, [2015-01-20T22:14:57.726573 #10196] DEBUG -- : 
I, [2015-01-20T22:14:57.761575 #10196]  INFO -- : Started GET "/assets/carts.css?body=1" for 127.0.0.1 at 2015-01-20 22:14:57 +0000
D, [2015-01-20T22:14:57.902583 #10196] DEBUG -- : 
D, [2015-01-20T22:14:57.948585 #10196] DEBUG -- : 
I, [2015-01-20T22:14:57.994588 #10196]  INFO -- : Started GET "/assets/line_items.css?body=1" for 127.0.0.1 at 2015-01-20 22:14:57 +0000
D, [2015-01-20T22:14:58.086593 #10196] DEBUG -- : 
D, [2015-01-20T22:14:58.131596 #10196] DEBUG -- : 
I, [2015-01-20T22:14:58.208600 #10196]  INFO -- : Started GET "/assets/orders.css?body=1" for 127.0.0.1 at 2015-01-20 22:14:58 +0000
D, [2015-01-20T22:14:58.493616 #10196] DEBUG -- : 
D, [2015-01-20T22:14:58.520618 #10196] DEBUG -- : 
I, [2015-01-20T22:14:58.602623 #10196]  INFO -- : Started GET "/assets/static_pages.css?body=1" for 127.0.0.1 at 2015-01-20 22:14:58 +0000
D, [2015-01-20T22:14:58.688628 #10196] DEBUG -- : 
D, [2015-01-20T22:14:58.702628 #10196] DEBUG -- : 
I, [2015-01-20T22:14:58.811635 #10196]  INFO -- : Started GET "/assets/scaffolds.css?body=1" for 127.0.0.1 at 2015-01-20 22:14:58 +0000
D, [2015-01-20T22:14:58.865638 #10196] DEBUG -- : 
D, [2015-01-20T22:14:58.886639 #10196] DEBUG -- : 
I, [2015-01-20T22:14:58.934642 #10196]  INFO -- : Started GET "/assets/products.css?body=1" for 127.0.0.1 at 2015-01-20 22:14:58 +0000
D, [2015-01-20T22:14:59.000645 #10196] DEBUG -- : 
D, [2015-01-20T22:14:59.014646 #10196] DEBUG -- : 
I, [2015-01-20T22:14:59.077650 #10196]  INFO -- : Started GET "/assets/sessions.css?body=1" for 127.0.0.1 at 2015-01-20 22:14:59 +0000
D, [2015-01-20T22:14:59.150654 #10196] DEBUG -- : 
D, [2015-01-20T22:14:59.179656 #10196] DEBUG -- : 
I, [2015-01-20T22:14:59.231659 #10196]  INFO -- : Started GET "/assets/store.css?body=1" for 127.0.0.1 at 2015-01-20 22:14:59 +0000
D, [2015-01-20T22:14:59.306663 #10196] DEBUG -- : 
D, [2015-01-20T22:14:59.322664 #10196] DEBUG -- : 
I, [2015-01-20T22:14:59.368666 #10196]  INFO -- : Started GET "/assets/users.css?body=1" for 127.0.0.1 at 2015-01-20 22:14:59 +0000
D, [2015-01-20T22:14:59.435670 #10196] DEBUG -- : 
D, [2015-01-20T22:14:59.462672 #10196] DEBUG -- : 
I, [2015-01-20T22:14:59.511675 #10196]  INFO -- : Started GET "/assets/application.css?body=1" for 127.0.0.1 at 2015-01-20 22:14:59 +0000
D, [2015-01-20T22:14:59.744688 #10196] DEBUG -- : 
D, [2015-01-20T22:14:59.769689 #10196] DEBUG -- : 
I, [2015-01-20T22:14:59.851694 #10196]  INFO -- : Started GET "/assets/jquery.js?body=1" for 127.0.0.1 at 2015-01-20 22:14:59 +0000
D, [2015-01-20T22:14:59.911697 #10196] DEBUG -- : 
D, [2015-01-20T22:14:59.950700 #10196] DEBUG -- : 
I, [2015-01-20T22:15:00.266718 #10196]  INFO -- : Started GET "/assets/jquery-ui/effect.js?body=1" for 127.0.0.1 at 2015-01-20 22:14:59 +0000
D, [2015-01-20T22:15:00.379724 #10196] DEBUG -- : 
D, [2015-01-20T22:15:00.393725 #10196] DEBUG -- : 
I, [2015-01-20T22:15:00.454729 #10196]  INFO -- : Started GET "/assets/jquery-ui/effect-blind.js?body=1" for 127.0.0.1 at 2015-01-20 22:15:00 +0000
D, [2015-01-20T22:15:00.550734 #10196] DEBUG -- : 
D, [2015-01-20T22:15:00.568735 #10196] DEBUG -- : 
I, [2015-01-20T22:15:00.630739 #10196]  INFO -- : Started GET "/assets/jquery_ujs.js?body=1" for 127.0.0.1 at 2015-01-20 22:15:00 +0000
D, [2015-01-20T22:15:00.734745 #10196] DEBUG -- : 
D, [2015-01-20T22:15:00.749745 #10196] DEBUG -- : 
I, [2015-01-20T22:15:00.795748 #10196]  INFO -- : Started GET "/assets/turbolinks.js?body=1" for 127.0.0.1 at 2015-01-20 22:15:00 +0000
D, [2015-01-20T22:15:00.909755 #10196] DEBUG -- : 
D, [2015-01-20T22:15:00.940756 #10196] DEBUG -- : 
I, [2015-01-20T22:15:00.985759 #10196]  INFO -- : Started GET "/assets/admin.js?body=1" for 127.0.0.1 at 2015-01-20 22:15:00 +0000
D, [2015-01-20T22:15:01.237773 #10196] DEBUG -- : 
D, [2015-01-20T22:15:01.259775 #10196] DEBUG -- : 
I, [2015-01-20T22:15:01.337779 #10196]  INFO -- : Started GET "/assets/carts.js?body=1" for 127.0.0.1 at 2015-01-20 22:15:01 +0000
D, [2015-01-20T22:15:01.536790 #10196] DEBUG -- : 
D, [2015-01-20T22:15:01.563792 #10196] DEBUG -- : 
I, [2015-01-20T22:15:01.634796 #10196]  INFO -- : Started GET "/assets/line_items.js?body=1" for 127.0.0.1 at 2015-01-20 22:15:01 +0000
D, [2015-01-20T22:15:01.811806 #10196] DEBUG -- : 
D, [2015-01-20T22:15:01.828807 #10196] DEBUG -- : 
I, [2015-01-20T22:15:01.874810 #10196]  INFO -- : Started GET "/assets/orders.js?body=1" for 127.0.0.1 at 2015-01-20 22:15:01 +0000
D, [2015-01-20T22:15:01.933813 #10196] DEBUG -- : 
D, [2015-01-20T22:15:01.955814 #10196] DEBUG -- : 
I, [2015-01-20T22:15:02.014818 #10196]  INFO -- : Started GET "/assets/products.js?body=1" for 127.0.0.1 at 2015-01-20 22:15:01 +0000
D, [2015-01-20T22:15:02.083822 #10196] DEBUG -- : 
D, [2015-01-20T22:15:02.113823 #10196] DEBUG -- : 
I, [2015-01-20T22:15:02.299834 #10196]  INFO -- : Started GET "/assets/sessions.js?body=1" for 127.0.0.1 at 2015-01-20 22:15:02 +0000
D, [2015-01-20T22:15:02.352837 #10196] DEBUG -- : 
D, [2015-01-20T22:15:02.387839 #10196] DEBUG -- : 
I, [2015-01-20T22:15:02.443842 #10196]  INFO -- : Started GET "/assets/static_pages.js?body=1" for 127.0.0.1 at 2015-01-20 22:15:02 +0000
D, [2015-01-20T22:15:02.499846 #10196] DEBUG -- : 
D, [2015-01-20T22:15:02.529847 #10196] DEBUG -- : 
I, [2015-01-20T22:15:02.588851 #10196]  INFO -- : Started GET "/assets/store.js?body=1" for 127.0.0.1 at 2015-01-20 22:15:02 +0000
D, [2015-01-20T22:15:02.639854 #10196] DEBUG -- : 
D, [2015-01-20T22:15:02.703857 #10196] DEBUG -- : 
I, [2015-01-20T22:15:02.745860 #10196]  INFO -- : Started GET "/assets/users.js?body=1" for 127.0.0.1 at 2015-01-20 22:15:02 +0000
D, [2015-01-20T22:15:02.811863 #10196] DEBUG -- : 
D, [2015-01-20T22:15:02.839865 #10196] DEBUG -- : 
I, [2015-01-20T22:15:02.918869 #10196]  INFO -- : Started GET "/assets/application.js?body=1" for 127.0.0.1 at 2015-01-20 22:15:02 +0000
D, [2015-01-20T22:15:03.099880 #10196] DEBUG -- : 
D, [2015-01-20T22:15:03.164884 #10196] DEBUG -- : 
I, [2015-01-20T22:15:03.208886 #10196]  INFO -- : Started GET "/assets/king%20logos.png" for 127.0.0.1 at 2015-01-20 22:15:03 +0000
D, [2015-01-20T22:15:03.345894 #10196] DEBUG -- : 
D, [2015-01-20T22:15:03.366895 #10196] DEBUG -- : 
I, [2015-01-20T22:15:03.425898 #10196]  INFO -- : Started GET "/assets/camo%20print%20tee.jpg" for 127.0.0.1 at 2015-01-20 22:15:03 +0000
D, [2015-01-20T22:15:03.485902 #10196] DEBUG -- : 
D, [2015-01-20T22:15:03.502903 #10196] DEBUG -- : 
I, [2015-01-20T22:15:03.538905 #10196]  INFO -- : Started GET "/assets/est%202014%20tee.jpg" for 127.0.0.1 at 2015-01-20 22:15:03 +0000
D, [2015-01-20T22:15:03.582907 #10196] DEBUG -- : 
D, [2015-01-20T22:15:03.598908 #10196] DEBUG -- : 
I, [2015-01-20T22:15:03.643911 #10196]  INFO -- : Started GET "/assets/kingclothingnyc.png" for 127.0.0.1 at 2015-01-20 22:15:03 +0000
